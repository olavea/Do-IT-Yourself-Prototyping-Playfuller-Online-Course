(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[71],{5390:function(e,t,n){"use strict";var i=n(4);var o=i(n(27));var a=i(n(8));var r=i(n(9));var l=n(34);var s=n(7399);var c=n(1939);var u=n(404);var f=function(){function e(){(0,a.default)(this,e);this.generateActions("loadSuccess","loadFromSavedDataSuccess","connectFailure","updateFailure","disconnectMailChimp","closeDidFailAlert","saveSuccess","reset","changeListId","changeUseSingleOptIn","mailChimpValidationError","closeNoListsAlert","savePreviousSettings","restorePreviousSettings")}(0,r.default)(e,[{key:"loadFromSavedData",value:function e(){var n=this;var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(!i.socialConfig||!i.socialConfig.externalAuthenticationId)return n.loadFromSavedDataSuccess({savedData:i});var t=i.socialConfig.externalAuthenticationId;s.getLists(t).then(function(e){n.loadFromSavedDataSuccess({savedData:i,lists:e})},n.connectFailure).catch(n.connectFailure);e()}}},{key:"connectSuccess",value:function e(t,n,i){return{accountDetail:t,lists:n,socialConfig:i}}},{key:"connectMailChimp",value:function e(t){var r=this;return function(e){var t={serviceProvider:u.MAILCHIMP,params:{authenticationType:"website",startSubscription:true}};c.authenticate(t).then(function(e){if(e.socialConfig){var t=e.socialConfig.externalAuthenticationId;return Promise.all([s.getAccountDetail(t),s.getLists(t),e.socialConfig])}},r.updateFailure).then(function(e){var t=(0,o.default)(e,3),n=t[0],i=t[1],a=t[2];r.connectSuccess(n.data,i,a)},r.connectFailure).catch(r.connectFailure);e()}}}]);return e}();e.exports=l.createActions(f)},5775:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=i(n(8));var r=i(n(9));var o=i(n(34));var l=i(n(7400));var s=i(n(211));var c=function(){function e(){(0,a.default)(this,e);this.generateActions("loadFromCheckoutSettingsSuccess","loadFromSavedDataSuccess","changeSelectedListId","showValidationError","connectSuccess","connectFailure","saveSuccess","disconnect","reset")}(0,r.default)(e,[{key:"loadFromSavedData",value:function e(){var t=this;var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(n.connectionState!==s.default.CONNECTED)return t.reset();e({savedData:n,listId:n.listId});return l.default.getLists().then(t.loadFromSavedDataSuccess).catch(t.connectFailure)}}},{key:"connect",value:function e(){var t=this;return function(e){e();return l.default.getLists().then(t.connectSuccess).catch(t.connectFailure)}}}]);return e}();var u=o.default.createActions(c);t.default=u;e.exports=t.default},5956:function(e,t,n){"use strict";var i=n(4);var a=i(n(8));var r=i(n(9));var o=n(34);var l=n(281);var s=n(5390);var c=n(7415);var u=n(211);var f=function(){function t(){(0,a.default)(this,t);var e=new c;this.state={initialMailChimpConfig:e,mailChimpConfig:e,isDirty:false,showConnectionFailedAlert:false,isConnecting:false,showMailingListRequiredError:false,showNoMailChimpListsAlert:false,previousMailChimpConfig:null,wasRemoved:false};this.bindActions(s)}(0,r.default)(t,[{key:"onSavePreviousSettings",value:function e(){var t=this.state.mailChimpConfig;this.setState({previousMailChimpConfig:t,mailChimpConfig:new c})}},{key:"onRestorePreviousSettings",value:function e(){var t=this.state.previousMailChimpConfig;t&&this.setState({mailChimpConfig:t,previousMailChimpConfig:null})}},{key:"onMailChimpValidationError",value:function e(){this.setState({showMailingListRequiredError:true})}},{key:"onConnectMailChimp",value:function e(){this.setState({wasRemoved:false,isConnecting:true})}},{key:"onLoadSuccess",value:function e(t){var n=t.storeMailingListSettings;var i=c.buildFromJson(n);var a=i.isMailChimpConnected;var r=i.mailChimpConnectionInfo.mailChimpLists;var o=a&&(!r||0===r.length);this.setState({isDirty:false,initialMailChimpConfig:i,mailChimpConfig:i,showNoMailChimpListsAlert:o})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var n=t.savedData,i=t.lists,a=void 0===i?[]:i;var r=!!(n.connectionState===u.CONNECTED&&0===a.length);var o=c.buildFromJson({isMailChimpConnected:n.connectionState===u.CONNECTED,mailChimpListId:n.list,mailChimpUsername:n.username,mailChimpUseSingleOptIn:n.useSingleOptIn,mailChimpConnectionInfo:{mailChimpLists:a},mailChimpOAuthConfig:n.socialConfig});this.setState({isDirty:false,isConnecting:false,mailChimpConfig:o,initialMailChimpConfig:o,showNoMailChimpListsAlert:r})}},{key:"onConnectFailure",value:function e(){var t=this.state.mailChimpConfig;var n=t.mailChimpConnectionInfo;var i=n.merge({mailChimpError:true});var a=t.merge({mailChimpConnectionInfo:i});this.setState({initialMailChimpConfig:a,mailChimpConfig:a})}},{key:"onChangeListId",value:function e(t){var n=this.state,i=n.initialMailChimpConfig,a=n.mailChimpConfig;var r=a.merge({mailChimpListId:t});this.setState({isDirty:!l.is(r,i),mailChimpConfig:r,showMailingListRequiredError:false})}},{key:"onChangeUseSingleOptIn",value:function e(t){var n=this.state,i=n.initialMailChimpConfig,a=n.mailChimpConfig;var r=a.merge({mailChimpUseSingleOptIn:t});this.setState({isDirty:!l.is(r,i),mailChimpConfig:r})}},{key:"onConnectSuccess",value:function e(t){var n=this.state.mailChimpConfig.mailChimpListId;t.accountDetail.list&&(n=t.accountDetail.list);var i=t.lists;var a=0===i.length;var r=c.buildFromJson({isMailChimpConnected:true,mailChimpListId:n,mailChimpUsername:t.accountDetail.username,mailChimpUseSingleOptIn:true,mailChimpConnectionInfo:{mailChimpLists:i},mailChimpOAuthConfig:t.socialConfig});this.setState({isDirty:!(t.accountDetail&&t.accountDetail.connected),isConnecting:false,mailChimpConfig:r,showNoMailChimpListsAlert:a})}},{key:"onDisconnectMailChimp",value:function e(){var t=this.state.mailChimpConfig.mailChimpListId;var n=c.buildFromJson({mailChimpListId:t});this.setState({wasRemoved:true,isDirty:true,mailChimpConfig:n})}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,showMailingListRequiredError:false,initialMailChimpConfig:this.state.mailChimpConfig})}},{key:"onUpdateFailure",value:function e(){this.setState({showConnectionFailedAlert:true,isConnecting:false})}},{key:"onCloseDidFailAlert",value:function e(){this.setState({showConnectionFailedAlert:false})}},{key:"onCloseNoListsAlert",value:function e(){this.setState({showNoMailChimpListsAlert:false})}},{key:"onReset",value:function e(){var t=this.state.initialMailChimpConfig;this.setState({isDirty:false,showMailingListRequiredError:false,mailChimpConfig:t})}}]);return t}();e.exports=o.createStore(f,"MailChimpConfigStore")},5961:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=i(n(7466));var r=i(n(7469));var o=(0,r.default)(a.default);t.default=o;e.exports=t.default},6261:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTVFNkJGMTBBNThFMTFFMDlDNTdDQzRCNDk5QzI1MDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTVFNkJGMTFBNThFMTFFMDlDNTdDQzRCNDk5QzI1MDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NERGOUI2QkEwRDgxMUUwOUM1N0NDNEI0OTlDMjUwNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NERGOUI2Q0EwRDgxMUUwOUM1N0NDNEI0OTlDMjUwNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlSGGdgAAADVSURBVHjaYvz//z8DJYCJgUKAy4C3QFyDxL8KxAuJNYAFiPmAWAhJTACIBYkxgBmqGQTYoDQ7EDNCDYbxEQAUiEh4zn8E+APEP6H4HxD/hYpPR9bDguaCV2iuYUbiMyKFD04XCALxwf+4wV4gFkbWg24ACJviMcAQXT0qB+GqlVB/f4ViEHsJFssYGLGlREZGRpwJB109Ew5FvNDQh4FvQMyFzTJcKfEHEKcD8SMgfgDEmUD8C5tCRgKZ6QwQ/wZiS1wKWAjklXVA/BefAkZKszNAgAEAydEK9KXnuAQAAAAASUVORK5CYII="},6262:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFJJREFUeNpi+P///zIg/gvEGkDMAMTaUP4yEOfnfwj4BcQRQPwPyv/JANXx6z8qAPE1GKBGhaBJBoLEYXb8Q5P8B9P5F4edfxmQXKuC7lqAAAMAmBe0U3F/E2oAAAAASUVORK5CYII="},6669:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(n(27));var a=i(n(8));var r=i(n(9));var l=i(n(2));var s=i(n(34));var c=i(n(211));var u=i(n(683));var f=i(n(5775));function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),true).forEach(function(e){(0,l.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var m={initialData:{connectionState:c.default.DISCONNECTED,listId:null},isConnecting:false,isConnected:false,isDirty:false,lists:[],selectedListId:null,wasRemoved:false,hasConnectionError:false};var C=function(){function t(){var e=this;(0,a.default)(this,t);(0,l.default)(this,"isReady",function(){return e.state.hasConnectionError||e.state.isConnected});(0,l.default)(this,"isConnected",function(){return e.state.isConnected&&e.state.selectedListId});(0,l.default)(this,"getConnectionData",function(){return e.isConnected()?{backendType:u.default.CAMPAIGNS,connectionState:c.default.CONNECTED,listId:e.state.selectedListId}:{backendType:u.default.CAMPAIGNS,connectionState:c.default.DISCONNECTED,listId:null}});this.state=p({},m);this.bindActions(f.default);this.exportPublicMethods({getConnectionData:this.getConnectionData,isConnected:this.isConnected,isReady:this.isReady})}(0,r.default)(t,[{key:"onLoadFromSavedData",value:function e(t){var n=t.savedData,i=t.listId;this.setState({initialData:n,selectedListId:i})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var n=t.results;var i=null!==this.state.initialData.listId;this.setState({isConnected:true,isDirty:!i,lists:n})}},{key:"onLoadFromCheckoutSettingsSuccess",value:function e(t){var n=t.storeMailingListSettings;var i=n.isCampaignsConnected,a=n.campaignsListId,r=n.campaignsMailingLists;this.setState({isConnected:i,isDirty:false,selectedListId:a,lists:r,initialData:{connectionState:i?c.default.CONNECTED:c.default.DISCONNECTED,listId:a}})}},{key:"onChangeSelectedListId",value:function e(t){t&&this.setState({isDirty:true,selectedListId:t})}},{key:"onConnect",value:function e(){this.setState({isConnecting:true,hasConnectionError:false})}},{key:"onConnectSuccess",value:function e(t){var n=t.results;var i={isConnecting:false,isConnected:true,lists:n,wasRemoved:false};if(!this.state.selectedListId){var a=(0,o.default)(n,1),r=a[0].id;i.selectedListId=r;i.isDirty=true}this.setState(i)}},{key:"onConnectFailure",value:function e(){this.setState({isConnecting:false,hasConnectionError:true})}},{key:"onDisconnect",value:function e(){this.setState(p({},m,{initialData:this.state.initialData,isDirty:true,wasRemoved:true}))}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,initialData:this.getConnectionData()})}},{key:"onReset",value:function e(){this.setState(p({},m))}}]);return t}();var h=s.default.createStore(C,"CampaignsConfigStore");t.default=h;e.exports=t.default},6864:function(e,t,n){var i=n(9043);"string"===typeof i&&(i=[[e.i,i,""]]);var a;var r;var o={hmr:true};o.transform=a;o.insertInto=void 0;var l=n(17)(i,o);i.locals&&(e.exports=i.locals);false},7399:function(e,t,n){"use strict";var i=n(86);var a="/api/external/GetMailChimpAccountDetail";var r="/api/external/GetMailChimpLists";var o=function e(t,n){var i=t.title.toLowerCase();var a=n.title.toLowerCase();if(i<a)return-1;if(i>a)return 1;return 0};var l=function e(t){var n=t.data;return Object.keys(n).filter(function(e){return""!==e}).map(function(e){return{value:e,title:n[e].title}}).sort(o)};var s={getAccountDetail:function e(t){return i.get(a,{params:{connectedAccountId:t}})},getLists:function e(t){return i.get(r,{params:{connectedAccountId:t}}).then(l)}};e.exports=s},7400:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=i(n(228));var r=i(n(87));var o=i(n(114));var l="/api/composer";var s="".concat(l,"/mailing-lists");var c={getLists:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(o.default.isFeatureEnabled(r.default.CAMPAIGNS_API_MOCK))return Promise.resolve({results:[{id:"ffffffffffffffffffffffff",name:"Mocked Campaigns API Response",count:1}],hasNextPage:false});return a.default.get(t).then(function(e){var t=e.data;return t})}};var u=c;t.default=u;e.exports=t.default},7415:function(e,t,n){"use strict";var i=n(4);var a=i(n(8));var r=i(n(9));var o=i(n(10));var l=i(n(11));var s=i(n(7));function c(i){function a(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,s.default)(i),t;if(a()){var n=(0,s.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var u=n(281),f=u.Record;var d=n(7416);var p=n(7417);var m={mailChimpUsername:"",mailChimpUseSingleOptIn:true,isMailChimpConnected:false,mailChimpListId:"",mailChimpConnectionInfo:new d,mailChimpOAuthConfig:null};var C=function(e){(0,o.default)(s,e);var t=c(s);function s(){(0,a.default)(this,s);return t.apply(this,arguments)}(0,r.default)(s,null,[{key:"buildFromJson",value:function e(t){var n=t.mailChimpUsername,i=t.mailChimpUseSingleOptIn,a=t.isMailChimpConnected,r=t.mailChimpListId,o=t.mailChimpConnectionInfo,l=t.mailChimpOAuthConfig;return new s({mailChimpUsername:n||"",mailChimpUseSingleOptIn:!!i,isMailChimpConnected:!!a,mailChimpListId:r||"",mailChimpConnectionInfo:new d(o),mailChimpOAuthConfig:l?new p(l):null})}}]);return s}(f(m));e.exports=C},7416:function(e,t,n){"use strict";var i=n(281),a=i.Record;e.exports=a({mailChimpLists:[],mailChimpError:false})},7417:function(e,t,n){"use strict";var i=n(281),a=i.Record;e.exports=a({externalAuthenticationId:null,oauthError:false})},7466:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n(5));var c=i(n(19));var a=i(n(8));var r=i(n(9));var o=i(n(10));var l=i(n(11));var u=i(n(7));var f=i(n(2));var d=i(n(1));var p=i(n(0));var m=i(n(558));var C=i(n(1967));var h=i(n(3434));var v=n(39);var g=i(n(7467));function b(i){function a(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(a()){var n=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var M=function(e){(0,o.default)(n,e);var t=b(n);function n(){(0,a.default)(this,n);return t.apply(this,arguments)}(0,r.default)(n,[{key:"render",value:function e(){var t=this.props,n=t.positionToMouse,i=t.premiumFeatureLabel,a=t.confirmTitle,r=t.confirmDescription,o=(0,c.default)(t,["positionToMouse","premiumFeatureLabel","confirmTitle","confirmDescription"]);var l=this.props.anchor;l=l||(n?"mousepointer":"window");return p.default.createElement(m.default,(0,s.default)({},o,{anchor:l,theme:"damask"}),p.default.createElement(m.default.Body,{className:g.default.confirmModal},p.default.createElement(h.default,{premiumFeatureLabel:i}),a&&p.default.createElement("p",{className:g.default.confirmTitle},a),p.default.createElement("p",{className:g.default.confirmDescription},r),p.default.createElement(C.default,{onClick:this.props.onRequestClose},p.default.createElement(v.T,{project:"src.shared"},"Okay"))))}}]);return n}(p.default.Component);(0,f.default)(M,"propTypes",{anchor:d.default.oneOf(["window","mousepointer"]),confirmDescription:d.default.node.isRequired,confirmTitle:d.default.string.isRequired,isOpen:d.default.bool.isRequired,onRequestClose:d.default.func.isRequired,positionToMouse:d.default.bool,premiumFeatureLabel:d.default.string.isRequired});(0,f.default)(M,"defaultProps",{anchor:"window",onDismiss:function e(){},onUpgrade:function e(){},positionToMouse:true,theme:"damask"});var A=M;t.default=A;e.exports=t.default},7467:function(e,t,n){var i=n(7468);"string"===typeof i&&(i=[[e.i,i,""]]);var a;var r;var o={hmr:true};o.transform=a;o.insertInto=void 0;var l=n(17)(i,o);i.locals&&(e.exports=i.locals);false},7468:function(e,t,n){t=e.exports=n(16)(false);t.push([e.i,".ConfirmationModal-confirmModal-7B-az {\n  text-align: center;\n  padding: 22px 0 0;\n}\n.ConfirmationModal-confirmModal-7B-az p {\n  padding: 0 33px;\n}\n.ConfirmationModal-confirmTitle-3P1we {\n  font-weight: 500;\n  margin-bottom: 0;\n}\n.ConfirmationModal-confirmTitle-3P1we + p {\n  margin-top: 0;\n}\n",""]);t.locals={confirmModal:"ConfirmationModal-confirmModal-7B-az",confirmTitle:"ConfirmationModal-confirmTitle-3P1we"}},7469:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(n(5));var l=i(n(19));var s=i(n(0));var c=i(n(2451));var a=function e(r){return function(e){var t=e.isTrial,n=e.confirmDescription,i=e.confirmTitle,a=(0,l.default)(e,["isTrial","confirmDescription","confirmTitle"]);n=n||(t?c.default.trialConfirmDescription:c.default.confirmDescription);i=i||(t?c.default.trialConfirmTitle:c.default.confirmTitle);return s.default.createElement(r,(0,o.default)({premiumFeatureLabel:c.default.premiumFeatureLabel,confirmDescription:n,confirmTitle:i},a))}};t.default=a;e.exports=t.default},7482:function(e,t,n){"use strict";var i=n(4);var r=i(n(8));var o=i(n(9));var s=i(n(6));var l=i(n(10));var c=i(n(11));var u=i(n(7));var f=i(n(2));function d(i){function a(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(a()){var n=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var a=n(1);var p=n(0);var m=n(157),C=m.Check,h=m.Select;var v=n(5390);var g=n(713);var b=n(15);var M=n(74);var A=n(651);var S=n(568);var y=n(801);var D=n(728);var w=n(24),E=w.t;var k=n(39),I=k.T;var O=n(4156);var x=n(5961);var N=n(8992);var R=function(e){(0,l.default)(a,e);var i=d(a);function a(){var l;(0,r.default)(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];l=i.call.apply(i,[this].concat(t));(0,f.default)((0,s.default)(l),"state",{showMailchimpWarning:false});(0,f.default)((0,s.default)(l),"handleContainerClick",function(){var e=l.props,t=e.isMailChimpConnected,n=e.shouldShowMailchimpWarning,i=e.showConnectionFailedAlert;if(!t)if(n){O.trackInternal("upsell_confirmation_mailchimp_show");l.setState({showMailchimpWarning:true})}else i||v.connectMailChimp()});(0,f.default)((0,s.default)(l),"getDescription",function(){var e=l.props,t=e.isMailChimpConnected,n=e.isConnecting,i=e.mailChimpError,a=e.mailChimpUsername;if(i)return E("Error connecting to MailChimp");if(t)return E("As {username}",{username:a});if(n)return E("Connectingâ€¦");return E("Click to connect")});(0,f.default)((0,s.default)(l),"handleIconClick",function(){var e=l.props.isMailChimpConnected;e&&v.disconnectMailChimp()});(0,f.default)((0,s.default)(l),"handleCloseMailchimpWarning",function(){l.setState({showMailchimpWarning:false});v.connectMailChimp()});(0,f.default)((0,s.default)(l),"renderMailingListOptions",function(){var e=l.props.mailChimpLists;return e.map(function(e){var t=e.title,n=e.value;return p.createElement("option",{key:n,value:n},t)})});(0,f.default)((0,s.default)(l),"renderOAuthFailedAlert",function(){var e=l.props.showConnectionFailedAlert;return p.createElement(g,{key:"oauth-failed-alert",isOpen:e,onDismiss:v.closeDidFailAlert,title:E("External Authentication Error"),dismissText:E("Okay"),anchor:"window"},p.createElement(I,{project:"src.shared"},"Unable to connect to external service."))});(0,f.default)((0,s.default)(l),"renderNoListsAlert",function(){var e=l.props.showNoMailChimpListsAlert;return p.createElement(g,{key:"no-lists-alert",isOpen:e,onDismiss:v.closeNoListsAlert,title:E("No MailChimp Lists Created"),dismissText:E("Okay"),anchor:"window"},p.createElement(I,{project:"src.shared"},"Connecting to MailChimp requires an existing MailChimp mailing list. Please create one to continue."))});(0,f.default)((0,s.default)(l),"renderIcon",function(){return p.createElement("div",{className:N.button,onClick:l.handleIconClick},p.createElement("div",{className:N.icon}))});(0,f.default)((0,s.default)(l),"renderSelect",function(){var e=l.props,t=e.mailChimpListId,n=e.showMailingListRequiredError;var i=[p.createElement("option",{key:"placeholder-option",value:""},"Select Lists")];var a=l.renderMailingListOptions();var r=n?E("Select a list"):null;var o=a.some(function(e){return e.props.value===t})?t:"";return p.createElement(h,{wrapperClassName:N.select,value:o,onChange:function e(t){v.changeListId(t)},type:"light",errorMessage:r},i.concat(a))});(0,f.default)((0,s.default)(l),"renderDoubleOptInConfig",function(){var e=l.props.mailChimpUseSingleOptIn;var t=!e;var n=b(N.check,(0,f.default)({},N.active,t));return p.createElement("div",{className:N.sectionContainer},p.createElement(C,{className:n,wrapperClassName:N.checkWrapper,title:E("Require double opt-in after subscribing"),value:t,onChange:function e(t){v.changeUseSingleOptIn(!t)}}))});(0,f.default)((0,s.default)(l),"renderMailchimpWarning",function(){var e=l.state.showMailchimpWarning;return p.createElement(x,{key:"mailchimp-warning",isOpen:e,isTrial:A.isTrial(),onRequestClose:l.handleCloseMailchimpWarning})});return l}(0,o.default)(a,[{key:"render",value:function e(){var t;var n=this.props.isMailChimpConnected;var i=b(N.container,(t={},(0,f.default)(t,N.connected,n),(0,f.default)(t,N.disconnected,!n),t));return[p.createElement("div",{key:"container",className:i,onClick:this.handleContainerClick},p.createElement("div",{className:N.sectionContainer},p.createElement("div",{className:N.descriptionContainer},p.createElement("div",{className:N.title},"MailChimp"),p.createElement("div",{className:N.description},this.getDescription())),n&&this.renderSelect(),this.renderIcon()),n&&this.renderDoubleOptInConfig()),this.renderNoListsAlert(),this.renderOAuthFailedAlert(),this.renderMailchimpWarning()]}}]);return a}(p.Component);(0,f.default)(R,"propTypes",{isConnecting:a.bool.isRequired,isMailChimpConnected:a.bool.isRequired,mailChimpError:a.bool.isRequired,mailChimpListId:a.string,mailChimpLists:a.arrayOf(a.object),mailChimpUsername:a.string,mailChimpUseSingleOptIn:a.bool,showConnectionFailedAlert:a.bool.isRequired,showMailingListRequiredError:a.bool.isRequired,showNoMailChimpListsAlert:a.bool.isRequired,shouldShowMailchimpWarning:a.bool.isRequired});e.exports=M({getStores:function e(){return[A,y]},getPropsFromStores:function e(){var t=A.getState(),n=t.siteStatus;var i=!y.isFeatureInAllPlans(D.MAILCHIMP_INTEGRATION)&&n===S.TRIAL;return{shouldShowMailchimpWarning:i}}},R)},7483:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(n(8));var a=i(n(9));var l=i(n(6));var s=i(n(10));var r=i(n(11));var c=i(n(7));var u=i(n(2));var f=i(n(1));var d=i(n(0));var p=i(n(15));var m=n(157);var C=i(n(74));var h=i(n(6669));var v=i(n(5775));var g=n(39);var b=i(n(9042));var M=i(n(6864));function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),true).forEach(function(e){(0,u.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function y(i){function a(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(a()){var n=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,r.default)(this,t)}}var D=document.location.hostname;var w="https://".concat(D,"/config/marketing/campaigns");var E=function(e){(0,s.default)(r,e);var i=y(r);function r(){var a;(0,o.default)(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a=i.call.apply(i,[this].concat(t));(0,u.default)((0,l.default)(a),"handleContainerClick",function(e){e.stopPropagation();var t=a.props,n=t.isConnected,i=t.lists;if(!n)return v.default.connect();0===i.length&&window.open(w)});(0,u.default)((0,l.default)(a),"handleDisconnectIconClick",function(){a.props.isConnected&&v.default.disconnect()});(0,u.default)((0,l.default)(a),"handleChange",function(e){v.default.changeSelectedListId(e)});(0,u.default)((0,l.default)(a),"renderMailingListOptions",function(){var e=a.props.lists;return e.map(function(e){var t=e.id,n=e.name;return d.default.createElement("option",{key:t,value:t},n)})});(0,u.default)((0,l.default)(a),"renderSelect",function(){var e=a.props,t=e.lists,n=e.selectedListId;var i=t.find(function(e){var t=e.id;return t===n})?n:"";return d.default.createElement("div",{className:M.default.labelAndSelect},d.default.createElement(m.Label,{className:M.default.label},d.default.createElement(g.T,{project:"src.shared"},"Mailing List")),d.default.createElement(m.Select,{wrapperClassName:M.default.select,value:i,onChange:a.handleChange,type:"light"},a.renderMailingListOptions()))});return a}(0,a.default)(r,[{key:"render",value:function e(){var t=this.props,n=t.isConnected,i=t.isConnecting,a=t.hasConnectionError,r=t.lists;var o=n&&r.length>0;var l=(0,p.default)(M.default.container,(0,u.default)({},M.default.connected,o));return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:l,onClick:this.handleContainerClick},d.default.createElement("div",{className:M.default.titleAndButton},d.default.createElement("div",{className:M.default.title},d.default.createElement(g.T,{project:"src.shared"},"Squarespace Email Campaigns")),d.default.createElement("div",{className:M.default.button,onClick:this.handleDisconnectIconClick},d.default.createElement("div",{className:M.default.icon}))),d.default.createElement("div",{className:M.default.descriptionContainer},d.default.createElement(b.default,{isConnected:n,isConnecting:i,hasConnectionError:a,lists:r}),o&&this.renderSelect())),n&&d.default.createElement("p",{className:(0,p.default)(M.default.description,M.default.postDescription)},d.default.createElement(g.T,{campaignsDashboard:d.default.createElement("a",{href:w,target:"_blank"},d.default.createElement(g.T,{project:"src.shared"},"Email Campaigns dashboard")),project:"src.shared"},"To manage this mailing list and customize the confirmation email, go to the {campaignsDashboard}.")))}}]);return r}(d.default.Component);(0,u.default)(E,"propTypes",{initialData:f.default.object,isConnecting:f.default.bool.isRequired,isConnected:f.default.bool.isRequired,isDirty:f.default.bool,lists:f.default.array.isRequired,selectedListId:f.default.string,wasRemoved:f.default.bool,hasConnectionError:f.default.bool});var k=(0,C.default)({getStores:function e(){return[h.default]},componentDidConnect:function e(t){v.default.loadFromSavedData.defer(t.initialData)},getPropsFromStores:function e(){var t=h.default.getState();return S({},t)}},E);t.default=k;e.exports=t.default},8992:function(e,t,n){var i=n(8993);"string"===typeof i&&(i=[[e.i,i,""]]);var a;var r;var o={hmr:true};o.transform=a;o.insertInto=void 0;var l=n(17)(i,o);i.locals&&(e.exports=i.locals);false},8993:function(e,t,n){t=e.exports=n(16)(false);t.i(n(200),"");var i=n(153);var a=i(n(6261));var r=i(n(6262));t.push([e.i,".MailChimpConfig-container-3D9hd {\n  padding-bottom: 22px;\n  margin-top: 11px;\n  cursor: pointer;\n  background-color: #e4e4e4;\n}\n.MailChimpConfig-disconnected-CcrOo .MailChimpConfig-icon-3XdJO {\n  background-image: url("+a+");\n  filter: invert(100%);\n}\n.MailChimpConfig-descriptionContainer-27lSQ {\n  margin: 22px 22px 0 0;\n  flex-basis: 120px;\n  flex-grow: 1;\n  width: 161px;\n}\n.MailChimpConfig-sectionContainer-1_A9Q {\n  display: flex;\n  align-items: flex-start;\n  margin-top: 11px;\n  padding: 0 11px 0 22px;\n}\n.MailChimpConfig-sectionContainer-1_A9Q:first-child {\n  border-top: none;\n}\n.MailChimpConfig-connected-1exwf {\n  border-left: 3px solid #35d297;\n  color: #3e3e3e;\n}\n.MailChimpConfig-connected-1exwf .MailChimpConfig-button-1PBfu {\n  background-color: #3e3e3e;\n}\n.MailChimpConfig-connected-1exwf .MailChimpConfig-icon-3XdJO {\n  background-image: url("+r+");\n}\n.MailChimpConfig-button-1PBfu {\n  height: 23px;\n  width: 23px;\n  border-radius: 11px;\n  margin: 33px 0 0 11px;\n}\n.MailChimpConfig-select-HTrDG {\n  width: 200px;\n  margin-top: 22px;\n}\n.MailChimpConfig-check-2Ybki {\n  color: #3e3e3e;\n}\n.MailChimpConfig-check-2Ybki:before {\n  border: 2px solid rgba(255, 255, 255, 0.2);\n}\n.MailChimpConfig-check-2Ybki:hover:before {\n  border-color: rgba(255, 255, 255, 0.5);\n}\n.MailChimpConfig-check-2Ybki.MailChimpConfig-active-3BGcc:after {\n  background-color: rgba(255, 255, 255, 0.8);\n}\n.MailChimpConfig-check-2Ybki.MailChimpConfig-active-3BGcc:hover:after {\n  background-color: white;\n}\n.MailChimpConfig-checkWrapper-2_YoR {\n  margin-top: 11px;\n}\n.MailChimpConfig-title-16z0o {\n  color: #3e3e3e;\n  font-size: 12px;\n  word-break: break-all;\n  font-weight: 500;\n  text-transform: uppercase;\n}\n.MailChimpConfig-description-2oGO3 {\n  color: #a1a1a1;\n  font-size: 12px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.MailChimpConfig-icon-3XdJO {\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  height: 23px;\n  width: 23px;\n  opacity: 0.76;\n}\n",""]);t.locals={container:"MailChimpConfig-container-3D9hd",disconnected:"MailChimpConfig-disconnected-CcrOo",icon:"MailChimpConfig-icon-3XdJO",descriptionContainer:"MailChimpConfig-descriptionContainer-27lSQ",sectionContainer:"MailChimpConfig-sectionContainer-1_A9Q",connected:"MailChimpConfig-connected-1exwf",button:"MailChimpConfig-button-1PBfu",select:"MailChimpConfig-select-HTrDG",check:"MailChimpConfig-check-2Ybki "+n(200).locals["checkDarkSmallAfter"],active:"MailChimpConfig-active-3BGcc",checkWrapper:"MailChimpConfig-checkWrapper-2_YoR",title:"MailChimpConfig-title-16z0o",description:"MailChimpConfig-description-2oGO3"}},9042:function(e,t,n){"use strict";var i=n(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=i(n(1));var d=i(n(0));var p=i(n(15));var r=n(24);var m=i(n(6864));var u={CONNECTING:(0,r.t)("Connecting..."),CONNECTION_ERROR:(0,r.t)("There was an issue retrieving your Squarespace Email Campaigns lists. Please try again later."),CONNECT:(0,r.t)("Click to connect"),NO_LISTS:(0,r.t)("Click here to create a mailing list. Then come back to this page to link it with this block.")};var C=function e(t){var n=t.isConnecting,i=void 0!==n&&n,a=t.hasConnectionError,r=void 0!==a&&a,o=t.isConnected,l=void 0!==o&&o,s=t.isMissingLists,c=void 0!==s&&s;if(i)return u.CONNECTING;if(r)return u.CONNECTION_ERROR;if(!l)return u.CONNECT;if(c)return u.NO_LISTS;return""};var o=function e(t){var n=t.isConnecting,i=void 0!==n&&n,a=t.hasConnectionError,r=void 0!==a&&a,o=t.isConnected,l=void 0!==o&&o,s=t.lists,c=void 0===s?[]:s;var u=l&&0===c.length;var f=C({isConnecting:i,hasConnectionError:r,isConnected:l,isMissingLists:u});return f&&d.default.createElement("div",{className:(0,p.default)(m.default.description,m.default.innerDescription)},d.default.createElement("span",null,f))};o.propTypes={isConnecting:a.default.bool,hasConnectionError:a.default.bool,isConnected:a.default.bool,lists:a.default.array};var l=o;t.default=l;e.exports=t.default},9043:function(e,t,n){t=e.exports=n(16)(false);var i=n(153);var a=i(n(6261));var r=i(n(6262));t.push([e.i,".CampaignsConfig-container-3kMxH {\n  background-color: #e4e4e4;\n  cursor: pointer;\n  margin-top: 11px;\n  overflow: hidden;\n  padding: 0 11px 22px 22px;\n}\n.CampaignsConfig-icon-3Sk3L {\n  background-image: url("+a+");\n  filter: invert(100%);\n}\n.CampaignsConfig-titleAndButton-3x92a {\n  display: flex;\n  justify-content: space-between;\n  margin: 22px 0 0;\n}\n.CampaignsConfig-title-e4b3E {\n  color: #3e3e3e;\n  font-size: 12px;\n  word-break: normal;\n  font-weight: 500;\n  text-transform: uppercase;\n}\n.CampaignsConfig-button-3-Rl7 {\n  height: 23px;\n  width: 23px;\n  margin-bottom: -10px;\n  margin-top: 10px;\n}\n.CampaignsConfig-icon-3Sk3L {\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  height: 23px;\n  width: 23px;\n  opacity: 0.76;\n}\n.CampaignsConfig-descriptionContainer-1LRvX {\n  margin: 0 11px 0 0;\n}\n.CampaignsConfig-connected-1Szn1 {\n  border-left: 3px solid #35d297;\n  color: #3e3e3e;\n}\n.CampaignsConfig-connected-1Szn1 .CampaignsConfig-button-3-Rl7 {\n  background-color: #3e3e3e;\n  border-radius: 11px;\n  margin-bottom: 0;\n  margin-right: 11px;\n  margin-top: 0;\n}\n.CampaignsConfig-connected-1Szn1 .CampaignsConfig-icon-3Sk3L {\n  background-image: url("+r+");\n  filter: none;\n}\n.CampaignsConfig-labelAndSelect-rsiHJ {\n  background: #ffffff;\n  display: flex;\n  flex-direction: row;\n  margin-top: 22px;\n}\n.CampaignsConfig-label-2fERg {\n  font-weight: normal;\n  margin: 11px;\n  padding: 0;\n  white-space: nowrap;\n}\n.CampaignsConfig-select-2LeGN {\n  flex-grow: 1;\n  flex-shrink: 1;\n  margin: 0;\n  overflow: hidden;\n}\n.CampaignsConfig-description-c4_7f {\n  color: #a1a1a1;\n  font-size: 12px;\n}\n.CampaignsConfig-description-c4_7f a {\n  color: #3e3e3e;\n}\n.CampaignsConfig-innerDescription-22rGq {\n  margin-right: 11px;\n}\n.CampaignsConfig-postDescription-hKU_3 {\n  color: #797979;\n}\n",""]);t.locals={container:"CampaignsConfig-container-3kMxH",icon:"CampaignsConfig-icon-3Sk3L",titleAndButton:"CampaignsConfig-titleAndButton-3x92a",title:"CampaignsConfig-title-e4b3E",button:"CampaignsConfig-button-3-Rl7",descriptionContainer:"CampaignsConfig-descriptionContainer-1LRvX",connected:"CampaignsConfig-connected-1Szn1",labelAndSelect:"CampaignsConfig-labelAndSelect-rsiHJ",label:"CampaignsConfig-label-2fERg",select:"CampaignsConfig-select-2LeGN",description:"CampaignsConfig-description-c4_7f",innerDescription:"CampaignsConfig-innerDescription-22rGq",postDescription:"CampaignsConfig-postDescription-hKU_3"}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/71-45dace04ec7922a23085a-min.en-US.js.map