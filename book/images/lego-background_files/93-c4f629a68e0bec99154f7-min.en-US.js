(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[93,340],{1078:function(e,t,a){"use strict";var n=a(58);e.exports=function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=n(t);false;var i=t.isAfter()||!a&&t.diff(n(),"s")>-60;return i?t.from(t):t.fromNow()}},11455:function(e,t,a){"use strict";var i=a(86);var n={readAllForType:function e(t){return i.get("/api/slide-layouts",{params:{slideTypes:t}})}};e.exports=n},11456:function(e,t,a){"use strict";var i=a(86);var n={read:function e(){return i.get("/api/popup-overlay/slide-summary")}};e.exports=n},11457:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var o=a(11459);var r=a(34);var l=function(){function e(){(0,n.default)(this,e);this.generateActions("insert","insertSlices","saveSuccess","saveFailure")}(0,s.default)(e,[{key:"update",value:function e(t){var a=this;return function(e){e(t.id);return o.update(t).then(function(e){var t=e.data;return a.insert(t)}).catch(function(e){var t=e.data;return Promise.reject(t.message)})}}},{key:"upsertSlices",value:function e(t){var a=this;return function(e){e(t);return o.upsertSlices(t).then(function(e){var t=e.data;return a.insertSlices(t.slices)}).catch(function(e){var t=e.data;return Promise.reject(t.message)})}}},{key:"renderPreview",value:function e(t,s){var r=this;var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e){e();return o.renderPreview(t,a?s:null).then(function(e){var t=e.data;var a=t.renderedSlide,i=t.pageClasses,n=t.slideType;r.renderPreviewSuccess(a,i,s,n)})}}},{key:"renderPreviewSuccess",value:function e(t,a,i,n){return function(e){e();try{window.Y.Global.fire("slideUpdate",{renderedSlide:t,pageClasses:a,layoutId:i,slideType:n})}catch(e){console.error(e)}}}},{key:"save",value:function e(a){var i=this;return function(e){e();var t=Object.values(a).filter(function(e){return!e.isDemo});return o.upsertSlices(t).then(function(e){var t=e.data;var a=t.slices;false;i.saveSuccess(a);return a}).catch(function(e){var t=e.data;var a=t.message;i.saveFailure(a);return Promise.reject(a)})}}},{key:"discard",value:function e(i){var n=this;return function(e){e(i.id);var t=i.id,a=i.layoutIdentifier;n.renderPreview(t,a,false);return Promise.resolve()}}}]);return e}();e.exports=r.createActions(l)},11459:function(e,t,a){"use strict";var i=a(228);var n={update:function e(t){return i.put("/api/slides/".concat(t.id),t)},upsertSlices:function e(t){var a=t[0].slideId;return i.put("/api/slides/".concat(a,"/slices"),{slices:t})},renderPreview:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.get("/api/slides/preview",{params:{slideId:t,layoutId:a}})}};e.exports=n},11464:function(e,t,a){"use strict";var i=a(4);var r=i(a(27));var n=i(a(8));var s=i(a(9));var o=a(34);var l=a(11457);var c=a(2613);var d=a(11491);var u=a(11498);var g=a(11456);var p=a(11459);var h=a(11455);var f=a(2738);var m=function(){function e(){(0,n.default)(this,e);this.generateActions("fetchDataSuccess","fetchDataFailure","selectCategory","saveSuccess","saveFailure")}(0,s.default)(e,[{key:"fetchData",value:function e(a){var s=this;return function(e){e(a);var t=[c.read(a),d.read(a),h.readAllForType(f.COVER_PAGE)];Promise.all(t).then(function(e){var t=(0,r.default)(e,3),a=t[0],i=t[1],n=t[2];s.fetchDataSuccess({navTitle:a.data.navigationTitle,slide:i.data.slide,layouts:n.data.results})}).catch(function(){return s.fetchDataFailure()})}}},{key:"fetchLockScreenData",value:function e(){var n=this;return function(e){e();var t=[u.readLockScreenSummary(),h.readAllForType(f.LOCK_SCREEN)];Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];n.fetchDataSuccess({slide:a.data.slide,layouts:i.data.results})}).catch(function(){return n.fetchDataFailure()})}}},{key:"fetchPopupOverlayData",value:function e(){var n=this;return function(e){e();var t=[g.read(),h.readAllForType(f.POPUP_OVERLAY)];Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];n.fetchDataSuccess({slide:a.data.slide,layouts:i.data.results})}).catch(function(){return n.fetchDataFailure()})}}},{key:"selectLayout",value:function e(t,a){return function(e){e(a);l.renderPreview(t,a)}}},{key:"save",value:function e(t){var i=this;return function(e){e();return p.update(t).then(function(e){var t=e.data;return i.saveSuccess(t)}).catch(function(e){var t=e.data;var a=t.message;i.saveFailure(a);return Promise.reject(a)})}}}]);return e}();e.exports=o.createActions(m)},11466:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){var t=e.child,a=e.parent;return"".concat(a," ").concat(t)}e.exports=t.default},11473:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(27));var n=i(a(8));var s=i(a(9));var o=i(a(34));var l=i(a(11456));var c=i(a(11455));var d=i(a(2738));var u=i(a(5055));var g=i(a(1570));var p=function(){function e(){(0,n.default)(this,e);this.generateActions("fetchDataSuccess","fetchDataFailure","updatePopupStyle","saveFailure","saveSuccess","show","hide")}(0,s.default)(e,[{key:"save",value:function e(t){var a=this;return g.default.save(t).then(function(){return a.saveSuccess(t.popupOverlaySettings.style)}).catch(function(){return a.saveFailure()})}},{key:"fetchData",value:function e(a){var s=this;return function(e){e();var n=a?a.style:u.default.NONE;var t=[l.default.read(),c.default.readAllForType(d.default.POPUP_OVERLAY)];return Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];s.fetchDataSuccess({summary:a.data,layouts:i.data.results,popupStyle:n})}).catch(function(){return s.fetchDataFailure()})}}},{key:"discard",value:function e(){return function(e){e();return Promise.resolve()}}}]);return e}();var h=o.default.createActions(p);t.default=h;e.exports=t.default},11490:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SECTION_VIRTUAL_TWEAK_OVERLAY_PREFIX=t.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME=t.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME=t.ALL_SECTIONS_SELECTOR=t.HEADER_SECTION_SELECTOR=t.PARAGRAPH_HTML_BLOCK_ID=t.HEADING_HTML_BLOCK_ID=t.HEADER_SECTION_ID=t.HEADER_SECTION_TAG=t.SECTION_SELECTOR=t.SECTION_ID_ATTR=t.SECTION_TAG=void 0;var i="section";t.SECTION_TAG=i;var n="data-section-id";t.SECTION_ID_ATTR=n;var s="".concat(i,"[").concat(n,"]");t.SECTION_SELECTOR=s;var r="header";t.HEADER_SECTION_TAG=r;var o="header";t.HEADER_SECTION_ID=o;var l="__jacquard-block-html--heading";t.HEADING_HTML_BLOCK_ID=l;var c="__jacquard-block-html--paragraph";t.PARAGRAPH_HTML_BLOCK_ID=c;var d="".concat(r,"[").concat(n,'="').concat(o,'"]');t.HEADER_SECTION_SELECTOR=d;var u="".concat(d,",").concat(s);t.ALL_SECTIONS_SELECTOR=u;var g="add-hit-box";t.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME=g;var p="control-button-wrapper";t.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME=p;var h="__jacquard-section";t.SECTION_VIRTUAL_TWEAK_OVERLAY_PREFIX=h},11491:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(228));var s={read:function e(t){return n.default.get("/api/content-collections/".concat(t,"/slide-summary"))}};var r=s;t.default=r;e.exports=t.default},11498:function(e,t,a){"use strict";var i=a(86);var n={readLockScreenSummary:function e(){return i.get("/api/lock-screen/slide-summary")}};e.exports=n},11538:function(e,t,a){"use strict";var i=a(4);var d=i(a(19));var u=i(a(8));var n=i(a(9));var g=i(a(2));var s=a(24),r=s.t;var o=a(43);var p=a(722);var l=a(12984);var h=a(641);var f=a(1030);var m=a(12365);var v=a(1432);var c=a(757),b=c.isMobile;var y="sqs-frontend-overlay-editor-widget-host";var S=function(){function c(e,t){var s=this;var a=e.Y,i=(0,d.default)(e,["Y"]);(0,u.default)(this,c);(0,g.default)(this,"handleOverlayMouseover",function(e){var t=h(e.target,".".concat(y));var a=s.state.overlayRootNode.getDOMNode();var i=a.contains(t);var n=!(i&&t!==a);s.set("isMouseOver",n)});this.Y=a;this.props=i;var n={rootNode:null,overlayRootNode:t.rootNode,model:null,dirty:false,visible:false,editable:false,alwaysShowAnnotationWhenMouseOver:false,isMouseOver:false,placeAnnotationInside:false,scrollLayoutOnEditingStart:null};this.state=p({},n,t);var r=this.state.rootNode.getDOMNode(),o=r.ownerDocument;this.preview={window:o.defaultView,document:o};this.afterChangeHandlers={};this.eventListeners=[];this.YUIEventListeners=[];this.disabledLinks=[];this.attachEventListeners();var l=this.props.stack.add(function(){});l()}(0,n.default)(c,[{key:"destroy",value:function e(){var t=this.state.rootNode.getDOMNode();t&&t.classList.remove("sqs-layout-dark");var a=this.state.overlayRootNode.getDOMNode();a&&a.classList.remove(y);this.destroyEvents();this.state={};this.preview={};this.afterChangeHandlers={};this.eventListeners=[];this.YUIEventListeners=[];this.disabledLinks=[];this.set("destroyed",true)}},{key:"attachEventListeners",value:function e(){var i=this;this.syncDarkOrLight();var n=this.state.overlayRootNode.getDOMNode();n.classList.add(y);if(b())this.registerEventListener(n,"click",function(e){var t=!i.state.isMouseOver;if(t){var a=function e(t){n.contains(t.target)||i.set("isMouseOver",false)};setTimeout(function(){if(!n||!n.ownerDocument||n.ownerDocument.defaultView)return;n.ownerDocument.body.addEventListener("click",a,{once:true})})}return i.set("isMouseOver",t)});else{this.registerEventListener(n,"mouseenter",function(){return i.set("isMouseOver",true)});this.registerEventListener(n,"mouseleave",function(){return i.set("isMouseOver",false)});this.state.alwaysShowAnnotationWhenMouseOver||this.registerEventListener(n,"mouseover",this.handleOverlayMouseover)}}},{key:"set",value:function e(t,a){if(a===this.state[t])return;this.state[t]=a;var i=this.afterChangeHandlers[t];i&&i.length&&i.forEach(function(e){return e(a)})}},{key:"addAfterChangeHandler",value:function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this.afterChangeHandlers[t]||(this.afterChangeHandlers[t]=[]);this.afterChangeHandlers[t].push(a.bind(i))}},{key:"syncDarkOrLight",value:function e(){var a=this.state.rootNode.getDOMNode();if(!a||!this.preview.document.body.contains(a))return;l(a,function(e){var t=m(e);a.classList.toggle("sqs-layout-dark",t);a.classList.toggle("sqs-frontend-overlay-editor-widget-host-light",t)})}},{key:"getId",value:function e(){return this.Y.stamp(this.state.rootNode)}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.state.rootNode.getDOMNode();var a=t&&t.getAttribute("data-annotation-alignment");if(!f(a)||0===a.length)return null;var i=["top","left","center","right","bottom"].reduce(function(e,t){e[t]=a.includes(t);return e},{});if(i.top){if(i.left)return v.TOP_LEFT;if(i.right)return v.TOP_RIGHT;if(i.center)return v.TOP_CENTER}else if(i.bottom){if(i.left)return v.BOTTOM_LEFT;if(i.right)return v.BOTTOM_RIGHT;if(i.center)return v.BOTTOM_CENTER}return null}},{key:"hasPermission",value:function e(){return true}},{key:"getClassificationLabel",value:function e(){return"Base"}},{key:"getActionList",value:function e(){return[]}},{key:"invokeOnModelPromise",value:function e(i){var n=this;var t=new Promise(function(t,a){var e=o(n.state.model,i);e?n.state.model[i](function(e){e?a(e):t()}):t()});t.then(function(){return n.set("dirty",false)});t.catch(function(e){var t=o(e,"responseJSON.message",e);return new n.Y.Squarespace.Widgets.Alert({"strings.title":r("Error Saving"),"strings.message":t||r("Please try saving again.")})});return t}},{key:"revert",value:function e(){return this.invokeOnModelPromise("load")}},{key:"save",value:function e(){return this.invokeOnModelPromise("save")}},{key:"syncScroll",value:function e(t){if(t){var a=this.state.rootNode.getDOMNode();var i=a.querySelectorAll(".sqs-block");var s=this.preview.window.innerHeight;var n=Array.from(i).find(function(e){var t=e.getBoundingClientRect();var a=Math.min(s,t.bottom)-Math.max(0,t.top);var i=t.top>=0;var n=a>=s;return t.height>0&&(i||n)})||i[i.length-1];if(!n)return;this.set("scrollLayoutOnEditingStart",{anchorNodeId:n.getAttribute("id"),anchorNodeOffsetTop:n.getBoundingClientRect().top})}else this.set("scrollLayoutOnEditingStart",null)}},{key:"setLayoutNodeHeight",value:function e(t){if(!this.state.rootNode)return;if(t){var a=this.state.rootNode.getDOMNode();var i=a.getBoundingClientRect().height;a.style.minHeight=i+"px"}else this.clearLayoutNodeHeight()}},{key:"clearLayoutNodeHeight",value:function e(){if(!this.state.rootNode)return;var t=this.state.rootNode.getDOMNode();t.style.minHeight=null}},{key:"onGlobalEvent",value:function e(t,a){var i=this;this.registerYUIEventListener(this.Y.Global.on(t,function(e){e.sourceId&&!i.matchesCollectionId(e.sourceId)||a.call(i,e)}))}},{key:"matchesCollectionId",value:function e(t){return this.state.collection.get("id")===t}},{key:"disableLinkNavigation",value:function e(){var t=this;this.disabledLinks=Array.from(this.state.rootNode.getDOMNode().querySelectorAll("a[href]"));this.disabledLinks.map(function(e){return e.addEventListener("click",t.haltEvent)})}},{key:"reenableLinkNavigation",value:function e(){var t=this;this.disabledLinks.map(function(e){return e.removeEventListener("click",t.haltEvent)});this.disabledLinks=[]}},{key:"haltEvent",value:function e(t){t.stopPropagation();t.preventDefault()}},{key:"registerEventListener",value:function e(t,a,i){t.addEventListener(a,i);this.eventListeners.push({node:t,eventName:a,callback:i})}},{key:"registerYUIEventListener",value:function e(t){this.YUIEventListeners.push(t)}},{key:"destroyEvents",value:function e(){this.eventListeners.forEach(function(e){var t=e.node,a=e.eventName,i=e.callback;t.removeEventListener(a,i)});this.YUIEventListeners.forEach(function(e){return e.detach()})}}]);return c}();e.exports=S},11539:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.createInjectableNode=t.isTweakNode=void 0;var n=i(a(2));var s=a(2372);function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var l=function e(t){return t&&t.classList&&t.classList.contains(s.INJECTED_NODE_CLASS)};t.isTweakNode=l;var c={style:{type:"text/css"}};var d={element:"div",styles:{},attrs:{},className:"",content:"",id:""};var u=function e(t){var a=o({},d,{},t);a.className+=" "+s.INJECTED_NODE_CLASS;var i=document.createElement(a.element);i.className=a.className;i.id=a.id;i.innerHTML=a.content;var n=o({},c[a.element],{},a.attrs);Object.keys(n).forEach(function(e){i[e]=n[e]});Object.keys(a.styles).forEach(function(e){i.style[e]=a.styles[e]});return i};t.createInjectableNode=u},11540:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=i(a(77));function c(e,t){t?e.style.display="none":e.style.display.includes("none")&&(e.style.display="")}function d(e,t){e.outerHTML=t}function u(e,t){e.innerHTML=t}function g(e,t){e.appendChild(t)}function n(e,t){var a=e.querySelector,i=e.hidden,n=e.outerHtml,s=e.innerHtml,r=e.child;var o=t.querySelectorAll(a);if(0===o.length)throw"Unable to find any replacements with query selector: ".concat(a);(0,l.default)(i)||o.forEach(function(e){return c(e,i)});(0,l.default)(n)||o.forEach(function(e){return d(e,n)});(0,l.default)(r)||o.forEach(function(e){return g(e,r)});(0,l.default)(s)||o.forEach(function(e){return u(e,s)})}e.exports=t.default},11541:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));var s;var r=a(4155);var o=(s={},(0,n.default)(s,r.HEADING,"heading"),(0,n.default)(s,r.SUB_HEADING,"sub-heading"),(0,n.default)(s,r.BODY,"body"),(0,n.default)(s,r.IMAGE,"image"),(0,n.default)(s,r.GALLERY,"gallery"),(0,n.default)(s,r.VIDEO,"video"),(0,n.default)(s,r.SOCIAL_ICONS,"social-icons"),(0,n.default)(s,r.BUTTONS,"buttons"),(0,n.default)(s,r.NAVIGATION,"navigation"),(0,n.default)(s,r.CUSTOM_FORM,"custom-form"),(0,n.default)(s,r.NEWSLETTER,"newsletter"),(0,n.default)(s,r.ALBUM,"album"),(0,n.default)(s,r.MAP,"map"),(0,n.default)(s,r.LOCK,"lock"),(0,n.default)(s,r.PASSWORD,"password"),(0,n.default)(s,r.TWITTER,"twitter"),(0,n.default)(s,r.LOGO,"logo"),(0,n.default)(s,r.ACTION,"action"),(0,n.default)(s,r.POPUP_OVERLAY_ACTION,"popup-overlay-action"),(0,n.default)(s,r.TEMP_LOCK_INJECT,"temp-lock-inject"),s);e.exports=o},11551:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isYuiClassEnabled=l;var n=i(a(43));var s=a(901);var r=function e(){return(0,n.default)(window,["Static","SQUARESPACE_CONTEXT","yuiEliminationExperimentList"],[])};var o;function l(e){if(!o){var t=r();if(!t.length)return true;o=new s.StaticPraetorClient({isConfigurationLoaded:true,experimentContextList:t})}var a=o.getABTestVariant("".concat(e,"-enabled"),"true"),i=a.variant;if("false"===i)return false;return true}},11569:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=a(34);var r=function e(){(0,n.default)(this,e);this.generateActions("hide","showEditorOverlay","hideEditorOverlay","reset","setMouseOver","setOverlayEditors","show","setIsSaving","setPageSectionNodes")};e.exports=s.createActions(r)},11570:function(e,t){var a={ABOUT:"ABOUT",APPOINTMENTS:"APPOINTMENTS",BLOG:"BLOG",CONTACT:"CONTACT",DESIGNER_LAYOUTS:"DESIGNER_LAYOUTS",EVENTS:"EVENTS",FAQS:"FAQS",GALLERY:"GALLERY",GENERAL:"GENERAL",MENU:"MENU",MUSIC:"MUSIC",PORTFOLIO:"PORTFOLIO",PRIVACY_POLICY:"PRIVACY_POLICY",PROJECT:"PROJECT",REVIEWS:"REVIEWS",RSVP:"RSVP",SERVICES:"SERVICES",STORE:"STORE",TEAM:"TEAM",TOS:"TOS"};e.exports=a},11621:function(e,t,a){"use strict";var i=a(4);var o=i(a(8));var n=i(a(9));var l=i(a(10));var s=i(a(11));var r=i(a(7));function c(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,r.default)(i),t;if(n()){var a=(0,r.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var d=a(24),u=d.t;var g=a(722);var p=a(67);var h=a(1030);var f=a(1236),m=f.IGNORED_ITEM_ANNOTATION_SELECTORS;var v=a(11786);var b=a(11569);var y=a(12366);var S=a(11538);var q=a(11787);var _=a(1089);var C='[data-content-field="title"]';var E=function(e){(0,l.default)(r,e);var s=c(r);function r(e,t){var a;(0,o.default)(this,r);var i={collection:null,shimmySelector:".sqs-navigation-bar",showAddItemButton:true,showEditButton:true,strings:{editText:u("Edit")}};var n=g({},i,t);a=s.call(this,e,n);a.toggleEditButton();a.attachAfterChangeListeners();a.examineAndInitializeMainImageToggle(a.state.rootNode);a.containedMetaFields=a.getContainedMetaFields();return a}(0,n.default)(r,[{key:"toggleEditButton",value:function e(){var t=this.preview.window.Static.SQUARESPACE_CONTEXT.itemId;h(t)&&this.set("showEditButton",false)}},{key:"attachAfterChangeListeners",value:function e(){var t=this;this.addAfterChangeHandler("editable",function(){t.syncEditor();t.syncEditorOverlay()},this)}},{key:"bindNestedContentItems",value:function e(){var r=this;this.state.rootNode.all("[data-item-id]:not(.sqs-simple-like):not(.sqs-add-to-cart-button)").each(function(t){var e=m.some(function(e){return t.hasClass(e)});if(e)return;var a=t.getDOMNode().getAttribute("data-item-id");var i=r.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");var n=r.Y.Squarespace.AttrValidators.isInstanceOf(i);var s=new i({id:a,collectionId:r.state.collection.get("id")});r.props.registerAnnotationController(y,{rootNode:t,model:n(s,"model")?s:null,collection:r.state.collection,strings:{label:r.state.strings.nestedItemLabel},trackingIdentifier:r.state.trackingIdentifier})})}},{key:"renderInlineMetaDataEditors",value:function e(){var t=this;var a=this.state.rootNode.getDOMNode();var i=this.state.collection;this.disableLinkNavigation();var n=a.querySelector(C);if(n){this.titleEditor=new v(this.Y,{hostNode:n,data:i.get("title"),placeholder:u("Enter a page title…")});this.titleEditor.addDataChangeHandler(function(){return t.set("dirty",true)})}var s=a.querySelector('[data-content-field="description"]');if(s){this.descriptionEditor=new v(this.Y,{hostNode:s,data:i.get("description.html")||"",placeholder:u("Enter a page description…"),multiline:true});this.descriptionEditor.addDataChangeHandler(function(){return t.set("dirty",true)})}}},{key:"destroyInlineMetaDataEditors",value:function e(){if(this.titleEditor){var t=this.titleEditor.hostNode;t.innerHTML=this.state.collection.get("title");this.titleEditor.destroy();this.titleEditor=null}if(this.descriptionEditor){var a=this.descriptionEditor.hostNode;a.innerHTML=this.state.collection.get("description.html");this.descriptionEditor.destroy();this.descriptionEditor=null}this.reenableLinkNavigation()}},{key:"getClassificationLabel",value:function e(){return this.state.strings.label}},{key:"getActionList",value:function e(){var a=this;var t=[];var i=this.state.collection;this.state.showAddItemButton&&t.push({name:"add",label:i.getTemplateConfiguration().get("addText"),handleClick:this.handleAddContentRequest});if(this.state.showEditButton)t.push({name:"edit",label:this.state.strings.edit,handleClick:function e(){_.annotationClickCollection("collection-panel",i.get("typeName"));a.navigateToCollection({shimmy:a.state.shimmySelector})}});else{var n=this.containedMetaFields;n.size()>0&&t.push({name:"edit",label:u("Edit"),handleClick:function e(){_.annotationClickCollection("collection-edit-inline-metadata",i.get("typeName"));var t=function e(){a.state.collection.load(function(){a.set("editable",true)})};i.get("isDemoCollection")?a.cloneCollection().then(t):t()}})}var s=this.getMainImageToggleAction();p(s)&&t.push(s);var r=this.getCollectionSettingsAction();p(r)&&t.push(r);return t}},{key:"getContainedMetaFields",value:function e(){var t=this;var a=[C,'[data-content-field="description"]'];var i=this.state.rootNode;if(i.test(a.join(",")))return new this.Y.NodeList(i);var n=i.all(a.join(","));n=n.filter(function(e){if(t.Y.one(e).ancestor("[data-item-id]"))return false;return true});return n}},{key:"navigateToCollection",value:function e(t){var a=this.state.collection;var i=a?a.get("id"):"";this.Y.Squarespace.Singletons.Location.goToCollection(i,t)}},{key:"syncEditor",value:function e(){this.state.editable?this.renderInlineMetaDataEditors():this.destroyInlineMetaDataEditors()}},{key:"syncEditorOverlay",value:function e(){var t=this;if(!this.state.editable)return b.hideEditorOverlay();b.showEditorOverlay({buttons:[{name:"save",label:u("Save"),handleClick:function e(){return t.props.fireRequestSaveChangesEvent()}},{name:"cancel",label:u("Cancel"),handleClick:function e(){return t.props.fireRequestDiscardChangesEvent()}}],className:"sqs-content-item-minimal-node-header",hostNode:this.state.rootNode.getDOMNode(),label:u("Editing &lsquo;{sub1}&rsquo;",{sub1:this.state.collection.get("title")}),trackButtonClick:this.props.trackButtonClick})}},{key:"save",value:function e(){var t=this;var i=this.state.collection;this.titleEditor&&i.set("title",this.titleEditor.data);this.descriptionEditor&&i.set("description",{html:this.descriptionEditor.data});var e=new Promise(function(t,a){i.save({silent:true},function(e){e?a(e):t()})});e.then(function(){t.set("editable",false);t.set("dirty",false)});return e}},{key:"revert",value:function e(){var i=this;var e=new Promise(function(t,a){i.state.collection.load(function(e){e?a(e):t()})});e.then(function(){i.set("editable",false);i.set("dirty",false)});return e}}]);return r}(q(S));e.exports=E},11622:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(34);var o=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,[{key:"update",value:function e(t,a){return{field:t,value:a}}}]);return e}();e.exports=r.createActions(o)},11623:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=l;var s=i(a(11624));var r=i(a(11625));var n=i(a(11631));var o=new n.default;function l(e,t,a){var i=[];var n=[];e.forEach(function(e){r.default.canReplace(e)?i.push(e):s.default.canReplace(e)&&n.push(e)});if(i.length>0)return o.enqueue(function(){return r.default.replace(i,t,a).then(function(){return s.default.replace(n,a)})});return o.enqueue(function(){return Promise.resolve().then(function(){return s.default.replace(n,a)})})}false;e.exports=t.default},11624:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(11540));var o=i(a(11466));function l(a,e,i){var n=e.replacement,t=e.querySelectors;if(!t)throw"No query selectors provided!";t.forEach(function(e){var t=(0,o.default)(e);null===i.querySelector(t)?(0,r.default)({querySelector:e.parent,child:n?n[a]:null,hidden:null===n},i):(0,r.default)({querySelector:t,innerHtml:n?n[a]:null,hidden:null===n},i)})}var c={"html-block":l.bind(void 0,"text"),"button-block":l.bind(void 0,"buttonText"),"site-title":l.bind(void 0,"title"),page:l.bind(void 0,"description"),"no-component":l.bind(void 0,"siteTitle")};var d=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,null,[{key:"replace",value:function e(t,a){t.forEach(function(e){c[e.entityType](e,a.contentDocument)})}},{key:"canReplace",value:function e(t){var a=t.entityType,i=t.serverSide;return c.hasOwnProperty(a)&&!i}}]);return e}();t.default=d;e.exports=t.default},11625:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(452));var o=i(a(11540));var l=i(a(77));var c=i(a(11626));var d=i(a(11630));var u=i(a(11466));var g=new Set(["reference-site-title"]);function p(e,t){return!e.innerHTML||!t.innerHTML}function h(e,n,s){var t=e.querySelectors;if(!t)throw"No query selectors provided!";t.forEach(function(e){var t=(0,u.default)(e);var a=s.querySelector(t);var i=null!==n.querySelector(t);if(!a)throw"Unable to find component in response document with query selector: ".concat(t);i?p(a,n.querySelector(t))?(0,o.default)({querySelector:t,outerHtml:a.outerHTML,hidden:false},n):(0,o.default)({querySelector:t,innerHtml:a.innerHTML,hidden:false},n):(0,o.default)({querySelector:e.parent,child:a,hidden:false},n)})}var f={"image-item":h,"no-component":h};function m(e,t){return r.default.post("/api/content-preview?path=".concat(t),e).then(function(e){var t=new DOMParser;return t.parseFromString(e.data,"text/html")})}var v=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,null,[{key:"replace",value:function e(t,a,i){var s=i.contentDocument,r=i.contentWindow;t.forEach(function(e){d.default.initialize(e,s)});return m(t,a).then(function(n){if(!n.body.innerHTML&&t.length)return Promise.reject(new Error("The response document is empty for the provided component replacements"));return Promise.all(t.map(function(e){var t=e.entityType,a=e.replacement,i=e.serverSide;if(!(0,l.default)(a)&&g.has(a.type)&&!i)return Promise.resolve();if(!(0,l.default)(f[t]))return d.default.finalize(e,s,n).then(function(){return f[t](e,s,n)});return Promise.reject(new Error("No replacement method for entity type ".concat(t)))})).then(function(){return c.default.finalize(t,r,s).then(function(){c.default.cleanup(s,n);d.default.cleanup(t,s)})})})}},{key:"canReplace",value:function e(t){var a=t.entityType,i=t.serverSide,n=t.replacement;return i||f.hasOwnProperty(a)&&!g.has(n.type)}}]);return e}();t.default=v;e.exports=t.default},11626:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(40));var o=i(a(11627));var l=i(a(11466));var c=new Set(["image-item"]);var d=["has-site-title","has-logo-image"];var u=(new o.default.Builder).withPromises().build();function g(e,t,i){var a=e.reduce(function(a,e){c.has(e.entityType)&&e.querySelectors.forEach(function(e){var t=Array.from(i.querySelectorAll((0,l.default)(e)));a.push.apply(a,(0,r.default)(t))});return a},[]);if(!a.length)return Promise.resolve();t.dispatchEvent(new CustomEvent("controller:refresh"));return Promise.all(a.map(function(e){return u.loadAllAsync({},e.parentNode)}))}function p(t,a){d.forEach(function(e){a.body.classList.contains(e)?t.body.classList.add(e):t.body.classList.remove(e)})}var h=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,null,[{key:"finalize",value:function e(t,a,i){return g(t,a,i).then(function(){a.Squarespace.initializeLayoutBlocks(a.Y)})}},{key:"cleanup",value:function e(t,a){p(t,a)}}]);return e}();t.default=h;e.exports=t.default},11630:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(11466));var o="blur(20px)";function l(e){false}function c(a){return new Promise(function(e){var t=document.createElement("img");t.src=a;t.onload=e;t.onerror=e})}function d(){l("Could not select an image element to set a preload state on.")}function u(e,t,a){var i="[data-parallax-id='".concat(a,"'] > figure:last-of-type img");var n=t.querySelector(i);if(!n){d();return}e.preload.url&&(n.src=e.preload.url);n.style.filter=o}function g(e,t,a){if(!t||!a){d();return}if(e){t.style.backgroundImage="url(".concat(e,")");t.style.backgroundRepeat="no-repeat";t.style.backgroundPosition="50% 50%";t.style.backgroundSize="cover";a.src=""}t.style.filter=o;t.style.removeProperty("transition")}function p(i,n){i.querySelectors.forEach(function(e){var t=n.querySelector(e.parent);var a=n.querySelector((0,r.default)(e));if(t&&t.dataset.parallaxId){u(i,n,t.dataset.parallaxId);return}g(i.preload.url,t,a)})}var h={image:p};function f(e,t,a){if(!e.preload)return;return Promise.all(e.querySelectors.map(function(e){var t=a.querySelector((0,r.default)(e));if(t&&t.dataset&&t.dataset.src)return c(t.dataset.src);return Promise.resolve()}))}var m={image:f};function v(e,a){e.querySelectors.forEach(function(e){var t=a.querySelector(e.parent);if(t&&!t.dataset.parallaxId){t.style.transition="filter 0.25s ease";t.style.filter="blur(0)";t.style.removeProperty("background-image");t.style.removeProperty("background-repeat");t.style.removeProperty("background-position");t.style.removeProperty("background-size")}})}var b={image:v};var y=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,null,[{key:"initialize",value:function e(t,a){t.preload&&h[t.preload.type]&&h[t.preload.type](t,a)}},{key:"finalize",value:function e(t,a,i){if(t.preload&&m[t.preload.type])return m[t.preload.type](t,a,i);return Promise.resolve()}},{key:"cleanup",value:function e(t,a){t.forEach(function(e){e.preload&&b[e.preload.type]&&b[e.preload.type](e,a)})}}]);return e}();t.default=y;e.exports=t.default},11631:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(2));var o=function(){function e(){(0,n.default)(this,e);(0,r.default)(this,"currentEnqueued",Promise.resolve())}(0,s.default)(e,[{key:"enqueue",value:function e(i){var n=this.currentEnqueued;this.currentEnqueued=new Promise(function(e,t){function a(){return i().then(e).catch(t)}n.then(a).catch(a)});return this.currentEnqueued}}]);return e}();var l=o;t.default=l;e.exports=t.default},11702:function(e,t){var a={PROJECTS:"PROJECTS"};e.exports=a},11785:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a(8));var n=i(a(9));var s=a(24);var r=i(a(522));var c=i(a(1004));var d=a(1342);var u="le2-welcome";var o=function(){function o(e,t){var a=this;var i=t.hostNode,n=t.pageLayout,s=t.startupBlockId;(0,l.default)(this,o);this.Y=e;this.hostNode=i;this.pageLayout=n;this.startupBlockId=s||null;this.dirtyLayoutData=false;while(this.hostNode.firstChild)this.hostNode.removeChild(this.hostNode.firstChild);this.EDIT_CONTROLLER=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var r={layoutNode:this.Y.one(this.hostNode),layoutModel:this.pageLayout,editMode:this.getEditMode(),startupBlockId:this.startupBlockId,layoutTutorialPromise:this.showTutorialIfNecessary(),dragDropLock:(0,d.isMobileContentEditingEnabled)()};this.imageLoaderRefreshHandle||(this.imageLoaderRefreshHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:grid-cleaned",function(){a.Y.Squarespace.ImageLoadManager.refreshAll()}));this.EDIT_CONTROLLER.pluginLayoutEditor(r);this.EDIT_CONTROLLER.alignInsertPoints(this.Y.one(this.hostNode));this.onBlockRemoveRequestHandler=this.Y.SQS.LayoutEngine.Events.on("layout-engine:remove-requested",this.onBlockRemoveRequested.bind(this));this.pageLayoutOnChangeHandler=this.pageLayout.on("change",function(e){a.setDirtyLayoutData(true,{editorUid:e.editorUid})});this.pageLayoutAfterChangeHandler=this.pageLayout.after("change",function(e){if(e.forceRefresh){a.EDIT_CONTROLLER.destroyLayoutEditor(a.Y.one(a.hostNode));a.Y.fire("renderLayoutEngineUpgradeWrappers");a.EDIT_CONTROLLER.pluginLayoutEditor(r)}})}(0,n.default)(o,[{key:"getEditMode",value:function e(){if(!r.default.isSevenOne())return null;if("item"===this.hostNode.getAttribute("data-type"))return null;var t=this.Y.SQS.LayoutEngine.Layout.EditMode;return t.SECTION}},{key:"destroy",value:function e(){this.dirtyLayoutDataChangeHandler=null;this.onBlockRemoveRequestHandler.detach();this.pageLayoutOnChangeHandler.detach();this.pageLayoutAfterChangeHandler.detach();this.imageLoaderRefreshHandle&&this.imageLoaderRefreshHandle.detach();this.EDIT_CONTROLLER.destroyLayoutEditor(this.Y.one(this.hostNode));var t=this.hostNode.querySelectorAll(".sqs-block-content[tabindex]");Array.from(t).forEach(function(e){return e.removeAttribute("tabindex")})}},{key:"setDirtyLayoutData",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dirtyLayoutData=t;this.dirtyLayoutDataChangeHandler(t,a)}},{key:"addDirtyLayoutDataHandler",value:function e(t){this.dirtyLayoutDataChangeHandler=t}},{key:"showTutorialIfNecessary",value:function e(){var i=this;return new Promise(function(e,t){if(c.default.isTutorialCompleted(u))return e();if(r.default.isSevenOne())return e();c.default.markTutorialCompleted(u);var a=i.promptLayoutEngineVideoModal();a.onceAfter(["confirm","cancel"],function(){return e()})})}},{key:"onBlockRemoveRequested",value:function e(t){var a=this;t.preventDefault();var i=t.selected;var n=i.size();return new this.Y.Squarespace.Widgets.Confirmation({"strings.title":(0,s.pluralize)({one:"Remove Block",other:"Remove Blocks"},n),"strings.message":(0,s.pluralize)({one:"Are you sure you want to delete this block",other:"Are you sure you want to delete these blocks"},n)}).on("confirm",function(){a.Y.SQS.LayoutEngine.Events.fire("layout-engine:remove-confirmed",{selected:i})})}},{key:"promptLayoutEngineVideoModal",value:function e(){var t=this.Y.Squarespace.Widgets.ConfirmationMedia;return new t({mediaSrc:["https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.webm","https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.mp4"],"strings.confirm":(0,s.t)("OK"),"strings.title":(0,s.t)("Adding Content With Blocks"),mediaDimension:{width:734,height:500},mediaType:t.TYPE_MEDIA.VIDEO})}},{key:"showAddBlockMenu",value:function e(t){this.EDIT_CONTROLLER.showBlockMenu(t)}}]);return o}();t.default=o;e.exports=t.default},11786:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var c=i(a(8));var s=i(a(9));var d=i(a(643));var u=a(24);var g=a(2877);function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var l=function(){function l(e,t){var a=t.hostNode,i=t.data,n=t.placeholder,s=t.multiline,r=t.menuItems,o=t.textEditorOptions;(0,c.default)(this,l);this.Y=e;this.hostNode=a;this.parentNode=a.parentNode;this.data=(0,d.default)(i)?i:"";this.dataChangeHandler=function(){};this.placeholder=n||(0,u.t)("Write here…");this.multiline=s||false;this.dirty=false;this.menuItems=r;this.parentNode.classList.add(g.DISABLE_DRAG_SELECTION_CLASSNAME);this.hostNode.innerHTML="";this.editor=this.createHTMLContentEditor(o)}(0,s.default)(l,[{key:"destroy",value:function e(){this.editor.destroy(true);this.editor=null;this.dataChangeHandler=null;this.parentNode.classList.remove(g.DISABLE_DRAG_SELECTION_CLASSNAME)}},{key:"setData",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.data=t;this.dataChangeHandler(t,a)}},{key:"addDataChangeHandler",value:function e(t){this.dataChangeHandler=t}},{key:"createHTMLContentEditor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=new this.Y.Squarespace.TextEditor(o({render:this.hostNode,placeholder:this.placeholder,type:this.multiline?"simple":"plainText",isInline:!this.multiline,MenuConstructor:this.multiline?this.Y.Squarespace.Singletons.TextEditorToolbar:null,menuItems:this.menuItems,initialData:this.data,boundingBox:this.multiline?"div":"span"},t));a.on("contentUpdated",function(e){if(this.data!==e.content){this.data=e.content;this.dataChangeHandler(this.data);this.dirty=true}}.bind(this));return a}}]);return l}();t.default=l;e.exports=t.default},11787:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(268));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(722));var g=i(a(43));var p=i(a(12365));var h=a(24);var f=i(a(836));var m=i(a(906));var v=i(a(1089));var b=i(a(229));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var S="data-edit-main-image";var q="pageAnnotationEmptyMessage";var _="pageAnnotationEmptyMessageLight";var C="pageAnnotationEmptyMessageDark";var n=function e(t){return function(e){(0,c.default)(s,e);var n=y(s);function s(e,t){(0,r.default)(this,s);var a={emptyMessage:e.Y.Node.create('<div class="'.concat(q,'">')+(0,h.t)("This page is empty. Start editing and add content blocks.")+"</div>")};var i=(0,u.default)({},a,t);return n.call(this,e,i)}(0,o.default)(s,[{key:"destroy",value:function e(){if(this.addContentItemHelper){this.addContentItemHelper.destroy();this.addContentItemHelper=null}(0,l.default)((0,d.default)(s.prototype),"destroy",this).call(this)}},{key:"handleAddContentRequest",value:function e(){var t=this.state.collection;v.default.annotationClickCollection("collection-add",t.get("typeName"));if(t.get("isDemoCollection")){this.cloneCollection().then(this.handleAddContentRequest.bind(this));return}this.addContentItemHelper||(this.addContentItemHelper=new(this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Mixins.AddContentItemHandlerMixin"))({collection:t,collectionConfiguration:t.getTemplateConfiguration()}));t.get("type")===b.default.PRODUCTS?this.addContentItemHelper.handleAddContentRequest({analytics:{productPage:"cms-page-preview"}}):this.addContentItemHelper.handleAddContentRequest()}},{key:"getCollectionDialogPortal",value:function e(){return this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.CollectionDialogPortal")}},{key:"cloneCollection",value:function e(){return this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id"))}},{key:"showCollectionSettings",value:function e(t){var a=this.state.collection.get("id");this.getCollectionDialogPortal().showCollectionConfigurationDialog(a,t)}},{key:"examineAndInitializeMainImageToggle",value:function e(t){var a=this;if(!t)return false;if(t.hasAttribute(S)){this.mainImageToggleNodeReference=t;this.state.collection.load(function(){a.props.annotationController&&"function"===typeof a.props.annotationController.repaintRequest&&a.props.annotationController.repaintRequest()});return true}}},{key:"getMainImageToggleAction",value:function e(){var t=this;if(!f.default.hasPermission(m.default.CONFIG_CHANGE_STRUCTURE))return null;var a=this.mainImageToggleNodeReference&&this.mainImageToggleNodeReference.getDOMNode();if(!a||!a.hasAttribute(S))return null;var i=this.state.collection;if(i.get("isDemoCollection")&&!i.get("mainImageId"))return null;return{name:"banner",label:(0,h.t)("Banner"),handleClick:function e(){v.default.annotationClickCollection("collection-settings-banner",i.get("typeName"));t.showCollectionSettings("media")}}}},{key:"getCollectionSettingsAction",value:function e(){var t=this;if(!f.default.hasPermission(m.default.CONFIG_CHANGE_STRUCTURE))return null;var a=this.state.collection;return{name:"settings",label:(0,h.t)("Settings"),handleClick:function e(){v.default.annotationClickCollection("collection-settings",a.get("typeName"));t.showCollectionSettings()}}}},{key:"findMainElementBackgroundColor",value:function e(){var t=this.state.rootNode;while(t){var a=t.getComputedStyle("backgroundColor");if("transparent"!==a)return a;t=t.ancestor()}return"white"}},{key:"setEmptyMessageStyle",value:function e(t,a){if(t&&a){var i=(0,p.default)(a);if(i){t.removeClass(C);t.addClass(_)}else{t.removeClass(_);t.addClass(C)}}}},{key:"renderEmptyMessage",value:function e(){if(!(0,g.default)(this,"state.rootNode"))return;var t=this.state.rootNode.getDOMNode();if(!(0,g.default)(t,"ownerDocument.defaultView"))return;if(!this.state.model)return;if(!this.state.model.isLayoutBlank())return;var a=this.findMainElementBackgroundColor();this.setEmptyMessageStyle(this.state.emptyMessage,a);this.state.rootNode.prepend(this.state.emptyMessage)}},{key:"removeEmptyMessage",value:function e(t){this.state.emptyMessage&&this.state.emptyMessage.remove(t)}}]);return s}(t)};t.default=n;e.exports=t.default},11788:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isEditingUiEl=d;t.getStyles=u;t.getThemeDataBySectionEl=g;t.getThemeOverride=p;t.getSectionIdByEl=h;t.getNextSectionEl=f;t.getClosestSectionEl=m;var n=i(a(40));var s=i(a(90));var r=a(11490);var o=i(a(1920));var l=a(1571);var c=[r.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME,r.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME,"sqs-layout-insert-point"];function d(e){if(!e||!e.className)return false;var t=(0,n.default)(e.classList);var a=t.some(function(e){return c.includes(e)});return a}function u(e){return e?JSON.parse(e.getAttribute("data-current-styles")):{}}function g(e){var t=p(e);if((0,s.default)(t)){var a=o.default.getState();var i=(0,l.getActiveThemeId)(a);return{themeId:i,isDefault:true}}return{themeId:t}}function p(e){var t=u(e);return t.sectionTheme||""}function h(e){return(e?e.getAttribute(r.SECTION_ID_ATTR):"")||""}function f(e){if(!e)return null;var t=e.nextElementSibling;return t&&h(t)?t:null}function m(e){if(!e)return null;return h(e)?e:e.closest(r.SECTION_SELECTOR)||null}},11789:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.generateThemesCss=t.themesToLessMaps=t.mappingsToLess=t.getAdjustmentExpressionValue=t.upsertSectionThemesStyles=t.getSectionThemesStyleEl=t.paletteToLessMap=void 0;var g=i(a(27));var s=a(2372);var p=a(3075);var r=a(11539);var n=i(a(729));var o=(0,n.default)("ThemeUtils"),l=o.warn,c=o.err;var h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.colors,i=void 0===a?[]:a;return i.map(function(e){var t=e.id,a=e.value;return"@".concat(t,": ").concat(a,";")}).join("")};t.paletteToLessMap=h;var d=function e(t){return t?t.querySelector(s.SECTION_THEMES_STYLES_SELECTOR):null};t.getSectionThemesStyleEl=d;var u=function e(t,a){if(!t||!a||!a.defaultView||!a.body)return;var i=d(a)||(0,r.createInjectableNode)({element:"style",id:s.SECTION_THEMES_STYLES_STYLE_TAG_ID});var n;"string"===typeof t?n=t:t instanceof Element&&(n=t.innerHTML);a.body.appendChild(i);i.innerHTML=n;return i};t.upsertSectionThemesStyles=u;var f={fade:function e(t){var a=(t||"0%").match(/(\d+)%/);var i=a&&a.length?parseInt(a[1],10):0;var n=i/100;return+n}};var m=function e(t,a){return f[t]?f[t](a):null};t.getAdjustmentExpressionValue=m;var v=function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.map(function(e,t){var a=e.colorId,i=e.custom,n=e.variableName,s=e.adjustmentExpression;if(!n){c("Invalid mapping -- missing variableName",{mappings:o,index:t});return""}if(!a){if(!i){c("Missing colorId mapping",{mappings:o,index:t});return""}l("Missing colorId mapping",{mappings:o,index:t})}var r;if(i)r=i;else{r="@".concat(a);s&&(r=s.replace("@color",r))}return"@".concat(n,": ").concat(r,";")}).join("")};t.mappingsToLess=v;var b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce(function(e,t){var a=t.mappings,i=t.themeId;e[i]=v(a);return e},{})};t.themesToLessMaps=b;var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o=t.sectionThemesPartial,a=t.siteAestheticValues;a=void 0===a?{}:a;var i=a.colors;i=void 0===i?{}:i;var n=i.palette,s=void 0===n?{}:n,r=i.themes,l=void 0===r?[]:r;if(!o)return"";var c=h(s);var d=b(l);var u=Object.entries(d).reduce(function(e,t){var a=(0,g.default)(t,2),i=a[0],n=a[1];var s="".concat(c).concat(n," .").concat(i," {").concat(o,"}");var r=(0,p.compileLess)(s);return e+r},"");return u};t.generateThemesCss=y},11790:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=t.SECTION_CATALOG_PRELOAD_EFFECTIVENESS=t.PAGE_CATALOG_PRELOAD_EFFECTIVENESS=t.ITEM_CATALOG_PRELOAD_EFFECTIVENESS=t.SECTION_CATALOG_ENTRY_ADDED=t.PAGE_CATALOG_ENTRY_ADDED=t.ITEM_CATALOG_ENTRY_ADDED=t.SECTION_CATALOG_FULLY_LOADED=t.PAGE_CATALOG_FULLY_LOADED=t.ITEM_CATALOG_FULLY_LOADED=t.SECTION_CATALOG_RENDERED=t.PAGE_CATALOG_RENDERED=t.ITEM_CATALOG_RENDERED=void 0;var i="item-catalog-rendered";t.ITEM_CATALOG_RENDERED=i;var n="page-catalog-rendered";t.PAGE_CATALOG_RENDERED=n;var s="section-catalog-rendered";t.SECTION_CATALOG_RENDERED=s;var r="item-catalog-fully-loaded";t.ITEM_CATALOG_FULLY_LOADED=r;var o="page-catalog-fully-loaded";t.PAGE_CATALOG_FULLY_LOADED=o;var l="section-catalog-fully-loaded";t.SECTION_CATALOG_FULLY_LOADED=l;var c="item-catalog-entry-added";t.ITEM_CATALOG_ENTRY_ADDED=c;var d="page-catalog-entry-added";t.PAGE_CATALOG_ENTRY_ADDED=d;var u="section-catalog-entry-added";t.SECTION_CATALOG_ENTRY_ADDED=u;var g="item-catalog-preload-effectiveness";t.ITEM_CATALOG_PRELOAD_EFFECTIVENESS=g;var p="page-catalog-preload-effectiveness";t.PAGE_CATALOG_PRELOAD_EFFECTIVENESS=p;var h="section-catalog-preload-effectiveness";t.SECTION_CATALOG_PRELOAD_EFFECTIVENESS=h;var f={ITEM_CATALOG_RENDERED:i,PAGE_CATALOG_RENDERED:n,SECTION_CATALOG_RENDERED:s,ITEM_CATALOG_FULLY_LOADED:r,PAGE_CATALOG_FULLY_LOADED:o,SECTION_CATALOG_FULLY_LOADED:l,ITEM_CATALOG_ENTRY_ADDED:c,PAGE_CATALOG_ENTRY_ADDED:d,SECTION_CATALOG_ENTRY_ADDED:u,ITEM_CATALOG_PRELOAD_EFFECTIVENESS:g,PAGE_CATALOG_PRELOAD_EFFECTIVENESS:p,SECTION_CATALOG_PRELOAD_EFFECTIVENESS:h};t.default=f},11791:function(e,t,a){"use strict";var i={STYLE_STORE_DATA_ATTRIBUTE:"data-sqs-item-stored-style",RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE:"data-sqs-viewport-relative-height",RELATIVE_HEIGHT_PROPS:["height","min-height","max-height"],CLASS_NAME_IN_FLIGHT:"sqs-in-flight",CLASS_NAME_ITEMS_REORDERING:"sqs-items-reordering",CLASS_NAME_ITEMS_REORDERING_INFLIGHT:"sqs-index-drag-reordering-ready"};e.exports=i},11792:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(34);var o=a(11569);var l=function e(){return{mouseOverNode:null,editorOverlay:null,overlayEditors:[],visible:true,isSaving:false,pageSectionNodes:null}};var c=function(){function e(){(0,n.default)(this,e);this.state=l();this.bindActions(o)}(0,s.default)(e,[{key:"onReset",value:function e(){this.setState(l())}},{key:"onSetOverlayEditors",value:function e(t){this.setState({overlayEditors:t})}},{key:"onShow",value:function e(){this.setState({visible:true})}},{key:"onHide",value:function e(){this.setState({visible:false})}},{key:"onSetMouseOver",value:function e(t){var a=t.referenceNode,i=t.isOver;this.setState({mouseOverNode:i?a:null})}},{key:"onShowEditorOverlay",value:function e(t){this.setState({editorOverlay:t})}},{key:"onHideEditorOverlay",value:function e(){this.setState({editorOverlay:null})}},{key:"onSetIsSaving",value:function e(t){this.setState({isSaving:t})}},{key:"onSetPageSectionNodes",value:function e(t){this.setState({pageSectionNodes:t})}}]);return e}();e.exports=r.createStore(c,"AnnotationsStore")},11882:function(e,t,a){a(5518);var i=a(24).setLocale;var n=a(0);var s=a(60);var r=a(1028);var o=a(34);var l=a(5514);var c=a(11473);var d=a(517);var u=a(5991);var g=a(728);var p=a(801);var h=a(411);var f=a(12364);var m=a(13038);var v=a(5513);var b=a(1578);var y=a(6273);var S=a(276);var q=a(2716);var _=a(276).setResolvedMemberLocaleFromContext;YUI.add("squarespace-yui-for-react-first",function(a){a.namespace("Squarespace.Damask");a.config.win.ImageLoader=new u;var t={PREVIEW_FRAME_LOAD:"previewFrameLoad"};a.Squarespace.Damask.ReactFirst=a.Base.create("Damask",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){a.Squarespace.Singletons.Location.set("controller",this);y.setRouter(this.get("router"));this.publish(t.PREVIEW_FRAME_LOAD);this._bindInstrumentation();a.Global.publish("popupOverlay:requestShow");a.Global.publish("popupOverlay:hide");a.Global.publish("cookieBanner:force");a.Global.publish("cookieBanner:unforce");a.Global.publish("previewFrame:load");a.Global.on("siteTitleChange",function(e){var t=this.getSiteTitleAnnotationController();if(!t)return;var a=h.getState().siteTitle;t.setSiteTitle(e.newVal,a)},this);a.Global.on("siteDescriptionChange",function(e){var t=this.getSiteDescriptionAnnotationController();if(!t)return;var a=h.getState().siteDescription;t.setSiteDescription(e.newVal,a)},this);a.Squarespace.Utils.storeSharedSSIdentity();this._bindBrowserDragStart();this._bindActionListeners();this._bindOverlayEvents();d.bindUncaughtErrorReporter("damask",function(){return this.get("router").getCurrentLocation().state}.bind(this));var e=_();i("en-US",e);a.one("html").addClass(a.Squarespace.Utils.getBrowserClassName())},_bindFrame:function(){var e=this.get("previewFrame");this._instrumentation.bindFrame();e.addTarget(this);this._registerEvent([e.after(v.FRAME_EDITING_CHANGE,function(e){e.newVal?this._setBannerVisibility(false):this._syncBannerVisibility()},this)])},_bindInstrumentation:function(){this._instrumentation=new a.Squarespace.Damask.Instrumentation({damask:this,frame:this.get("previewFrame")});this.get("previewFrame")?this._bindFrame():this.after("previewFrameChange",function(){this._bindFrame()})},destructor:function(){this._resizeEmitter.destroy();this._actionListener.removeAllActionListeners();this._actionListener=null;l.unlisten(this.boundSyncBannerVisibility)},renderUI:function(){},bindUI:function(){a.Squarespace.EscManager.attach();b.isProductionEnvironment()&&this._bindContextMenuClick();this._bindAltRToRefresh();this._bindOverlayEvents()},_bindAltRToRefresh:function(){a.one(a.config.doc).on("keyup",function(e){e.altKey&&"r"===String.fromCharCode(e.charCode).toLowerCase()&&e.target.test("body")&&this.requestFrameRefresh()},this)},_bindActionListeners:function(){this._actionListener||(this._actionListener=new r(o));this.boundSyncBannerVisibility=this._syncBannerVisibility.bind(this);l.listen(this.boundSyncBannerVisibility)},_bindOverlayEvents:function(){if(p.isFeatureEnabled(g.POPUP_OVERLAY)){this._actionListener.addActionListener(c.SHOW,function(){a.Global.fire("popupOverlay:requestShow")});this._actionListener.addActionListener(c.HIDE,function(){a.Global.fire("popupOverlay:hide")})}},_syncBannerVisibility:function(){var e=l.getState();this._setBannerVisibility(e.isBannerVisible)},_setBannerVisibility:function(e){this.get("boundingBox").toggleClass(this.getClassName("banner-visible"),e)},_bindContextMenuClick:function(){a.one(a.config.doc).on("contextmenu",function(e){if(!e.target.ancestor('input, textarea, [contenteditable="true"]',true)){e.stopPropagation();e.preventDefault()}})},_bindBrowserDragStart:function(){a.config.doc.addEventListener("dragover",function(e){if(e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.includes("Files")){e.preventDefault();q(e.dataTransfer,"none")}},true)},syncUI:function(){this._updateBodyClass()},_fireEvent:function(e){return function(){this.fire(e)}},getAnnotationControllerByType:function(e){var t=this.getContentModeController();if(!t)return;return t._getAnnotationControllerByType(e)},getSiteTitleAnnotationController:function(){return this.getAnnotationControllerByType(f.SiteTitle)},getSiteDescriptionAnnotationController:function(){return this.getAnnotationControllerByType(f.SiteDescription)},_updateBodyClass:function(){var e=a.one("body");e.addClass("sqs-locale-"+(S.getResolvedMemberLocale()+"").toLowerCase())},_renderSafariPrivateAlert:function(){var e=this.get("contentBox").append("<div>").getDOMNode();s.render(n.createElement(m),e)},shouldFrameBeExpandedOnLoad:function(){if(!a.Squarespace.Help.isTutorialCompleted())return true;return false},getPanelPath:function(){return this.get("router").getCurrentLocation().pathname.substr(1).split("/")},getHistoryPreviewUrl:function(){var e=this.get("router").parseLocationHash();return e[1]||null},getPreviewFrameCollection:function(){return this.get("contentBridge").get("collection")},requestFrameRefresh:function(){if(!this.get("previewFrame"))return;this.get("previewFrame").requestRefresh("yui-for-react-first requeestFrameRefresh")},getFrameUrl:function(){if(!this.get("previewFrame"))return;return this.get("previewFrame").get("url")},setFrameUrl:function(e){this.get("router").replaceFrameUrl(e)},setFrameUrlOrRefresh:function(e){if(!this.get("previewFrame"))return;this.get("previewFrame").setUrlOrRequestRefresh(e)},isFrameEditable:function(){if(!this.get("previewFrame"))return true;return!!this.get("previewFrame").get("editable")},toggleFrameEditable:function(e){var t=this.get("previewFrame");if(!t)return;a.Lang.isUndefined(e)?t.set("editable",!this.isFrameEditable()):t.set("editable",!!e)},getContentModeController:function(){return this.get("contentBridge").get("controller")},getWebsiteOverlaysManager:function(){var e=this.get("previewFrame");return a.Lang.isValue(e)?e.getWebsiteOverlaysManager():null},getFrameContentWindow:function(){return this.get("previewFrame").get("iframe").get("contentWindow")},isFrameLoading:function(){return this.get("previewFrame").get("loading")}},{CSS_PREFIX:"sqs-damask",EVENTS:t,ATTRS:{isSafariPrivate:{valueFn:function(){if(a.UA.safari)try{window.sessionStorage.setItem("safari-test","testing");window.sessionStorage.removeItem("safari-test")}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.sessionStorage.length)return true}return false}},router:{},basename:{value:"/config"},redirects:{value:[]},contentBridge:{valueFn:function(){return new a.Squarespace.Damask.Preview.ContentBridge},validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Damask.Preview.ContentBridge)},memberAccount:{valueFn:function(){return a.Squarespace.Singletons.AuthenticatedMemberAccount},setter:function(e){if(!a.instanceOf(e,a.Squarespace.Models.MemberAccount)){var t=this.get("siteContext.authenticatedAccount")||{};return new a.Squarespace.Models.MemberAccount(t)}return e}},modalManager:{valueFn:function(){var e=new a.Squarespace.Damask.Modal.Manager({damask:this});return e},validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Damask.Modal.Manager)},previewFrame:{},siteContext:{}}})},"1.0",{requires:["squarespace-common","squarespace-dialog","array-invoke","base","event-custom-base","node","squarespace-attr-validators","squarespace-context","squarespace-damask-instrumentation","squarespace-damask-modal-manager","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame","squarespace-damask-panel-async-data-panel","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-help","squarespace-models-content-collection","squarespace-models-member-account","squarespace-navigation-list-utils","squarespace-pinterest","squarespace-singletons-location","squarespace-ss-widget","squarespace-ui-base","squarespace-util","squarespace-widgets-information","widget-parent","squarespace-content-manager-widgets-cover-page","squarespace-async-wrappers-cover-page-editors-for-standalone","squarespace-settings-site-billing-panels-delete-site","squarespace-settings-site-billing-panels-switch-products","squarespace-widgets-billing-checkout-website-picker","squarespace-widgets-billing-checkout-commerce-picker"]})},11883:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(a(8));var n=i(a(9));var l=i(a(6));var c=i(a(268));var d=i(a(10));var s=i(a(11));var u=i(a(7));var g=i(a(182));var p=i(a(722));var h=a(24);var f=a(1714);var m=i(a(11569));var v=i(a(1004));var b=i(a(11785));var r=i(a(11538));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var S="layout-add-block-button";var q="enter-edit-mode";var _=function(e){(0,d.default)(r,e);var s=y(r);function r(e,t){var a;(0,o.default)(this,r);var i={model:null,isModelLoading:false,columns:null,instrumentationDescription:""};var n=(0,p.default)({},i,t);a=s.call(this,e,n);a.addAfterChangeHandler("editable",a.afterEditableChange);a.registerYUIEventListener(a.state.rootNode.delegate("dblclick",a.handleDblClick,".sqs-block",(0,l.default)(a)));return a}(0,n.default)(r,[{key:"afterEditableChange",value:function e(t){this.syncScroll(t);this.setLayoutNodeHeight(t);this.renderEditor();this.setLayoutNodeHeight();this.syncEditorOverlay();if(t){this.set("startupBlockId",null);(0,f.measure)(q)}}},{key:"handleDblClick",value:function e(t){t.halt();if(!this.state.visible||this.state.editable)return;var a=t.target;var i=a.hasClass(".sqs-block")?a:a.ancestor(".sqs-block");i&&this.set("startupBlockId",i.getAttribute("id"));this.enterEditMode()}},{key:"enterEditMode",value:function e(){var t=this;(0,f.mark)(q);this.state.model?this.set("editable",true):this.initModel(function(){return t.set("editable",true)})}},{key:"initModel",value:function e(t){var a=this;(0,g.default)(t)||(t=function e(){});if(this.state.model){t.call(this);return}if(this.state.isModelLoading){this.addAfterChangeHandler("isModelLoading",t);return}this.set("isModelLoading",true);this.loadModel(function(){a.set("isModelLoading",false);t.call(a)})}},{key:"loadModel",value:function e(t){throw new Error("LayoutBase#_loadModel not implemented.")}},{key:"revert",value:function e(){var t=this;var a=(0,c.default)((0,u.default)(r.prototype),"revert",this).call(this);a.then(function(){t.layoutEditorInstance&&t.layoutEditorInstance.setDirtyLayoutData(false);t.renderEditor()});return a}},{key:"save",value:function e(){var t=this;var a=(0,c.default)((0,u.default)(r.prototype),"save",this).call(this);a.then(function(){t.layoutEditorInstance&&t.layoutEditorInstance.setDirtyLayoutData(false)});return a}},{key:"renderEditor",value:function e(){var t=this;if(this.layoutEditorInstance){this.layoutEditorInstance.destroy();this.layoutEditorInstance=null}if(this.state.editable){var a=this.getPageLayout();var i=this.state.collection;i&&a.set("collectionId",i.get("id"));this.layoutEditorInstance=new b.default(this.Y,{hostNode:this.state.rootNode.getDOMNode(),pageLayout:a,startupBlockId:this.state.startupBlockId});this.layoutEditorInstance.addDirtyLayoutDataHandler(function(e){t.syncEditorOverlay();t.set("dirty",e)})}}},{key:"trackEditClick",value:function e(){}},{key:"getActionList",value:function e(){var t=this;return[{name:"edit",label:(0,h.t)("Edit"),handleClick:function e(){t.trackEditClick();t.enterEditMode()}}]}},{key:"getClassificationLabel",value:function e(){return this.state.rootNode.getAttribute("data-layout-label")||null}},{key:"syncEditorOverlay",value:function e(){var a=this;if(!this.state.editable)return m.default.hideEditorOverlay();var t=[{name:"save",label:(0,h.t)("Save"),handleClick:function e(){return a.props.fireRequestSaveChangesEvent()}},{name:"cancel",label:(0,h.t)("Cancel"),handleClick:function e(){return a.props.fireRequestDiscardChangesEvent()}}];if(!this.state.rootNode.getDOMNode().classList.contains("sqs-locked-layout")){var i=v.default.isTutorialCompleted(S);var n=(0,h.t)("Add Block");t.push({name:"add",label:i?"":n,title:n,className:"sqs-float-right sqs-annotation-add-block-button",icon:i,handleClick:function e(t){v.default.markTutorialCompleted(S);a.showAddBlockMenu(t)}})}m.default.showEditorOverlay({buttons:t,hostNode:this.state.rootNode.getDOMNode(),instrumentationDescription:this.getClassificationLabel().trim(),label:(0,h.t)("Editing &lsquo;{sub1}&rsquo;",{sub1:this.getClassificationLabel().trim()}),scrollLayoutOnEditingStart:this.state.scrollLayoutOnEditingStart,trackButtonClick:this.props.trackButtonClick})}},{key:"showAddBlockMenu",value:function e(t){if(!this.layoutEditorInstance)return;this.layoutEditorInstance.showAddBlockMenu({align:{node:this.Y.one(t.target),points:[this.Y.WidgetPositionAlign.TC,this.Y.WidgetPositionAlign.TR]},layoutNode:this.state.rootNode})}}]);return r}(r.default);t.default=_;e.exports=t.default},11884:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var g=i(a(27));var l=i(a(54));var q=i(a(44));var c=i(a(52));var d=i(a(40));var u=i(a(8));var n=i(a(9));var p=i(a(6));var s=i(a(268));var h=i(a(10));var r=i(a(11));var f=i(a(7));var m=i(a(2));var v=i(a(11550));var b=i(a(107));var y=i(a(722));var _=i(a(183));var C=i(a(43));var E=i(a(100));var k=i(a(1697));var w=a(1714);var S=a(53);var T=a(32);var I=i(a(1090));var o=a(515);var A=i(a(87));var x=i(a(1434));var L=a(2877);var D=i(a(5072));var N=a(11490);var O=i(a(114));var R=a(729);var P=i(a(1089));var B=a(318);var M=a(13e3);var F=a(11885);var U=a(11788);var V=i(a(3076));var z=i(a(5569));var H=i(a(11886));var G=i(a(2575));var W=a(2231);var Y=a(11789);var j=a(2617);var Q=i(a(3087));var X=i(a(11538));var K=i(a(11785));var J=i(a(13001));var Z=i(a(12369));var $=i(a(0));var ee=i(a(60));var te=i(a(11661));var ae=i(a(1920));var ie=i(a(13004));var ne=i(a(12371));var se=i(a(2620));var re=a(13005);var oe=i(a(1698));var le=i(a(5059));var ce=i(a(3493));var de=i(a(11569));var ue=i(a(3078));var ge=i(a(3066));var pe=i(a(13006));var he=i(a(13007));var fe=i(a(12374));var me=a(24);var ve=i(a(4111));var be=a(11790);var ye=a(11889);var Se=i(a(1246));var qe=a(12375);var _e=i(a(12372));var Ce=a(2880);var Ee=i(a(12376));function ke(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function we(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(a),true).forEach(function(e){(0,m.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ke(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function Te(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,f.default)(i),t;if(n()){var a=(0,f.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,r.default)(this,t)}}var Ie=(0,R.createLogger)("section-annotation-controller","#357");var Ae=11;var xe=275;var Le=2.5*o.GRID_PX;var De=150;var Ne="sqs-scrim-enabled";var Oe="sqs-scrim-fading";var Re="sqs-empty-section-list";var Pe="sqs-empty-section";var Be="sqs-empty-add-button";var Me="layoutEngineSection";var Fe="gallerySection";var Ue="userItemsListSection";var Ve="sqs-loading-section";var ze="page-section";var He='.sqs-layout[data-type="'.concat(ze,'"]');var Ge="section.page-section";var We="footer-sections";var Ye={DOWN:1,UP:-1};var je=function(e){(0,h.default)(o,e);var r=Te(o);function o(e,t){var S;var a=t.rootNode;(0,u.default)(this,o);var i={isAddingSection:false,isEditing:false,isScrimEnabled:false,hasCatalogLoaded:false,stylesBySectionId:{}};var n=(0,y.default)({},i,{rootNode:a});S=r.call(this,e,n);(0,m.default)((0,p.default)(S),"getSections",function(){return(0,C.default)(S.getSectionStoreState(),"sections",[])});(0,m.default)((0,p.default)(S),"getSectionById",function(a){return a?S.getSections().find(function(e){var t=e.id;return t===a}):null});(0,m.default)((0,p.default)(S),"getSectionByNode",function(e){return e?S.getSectionById((0,U.getSectionIdByEl)(e)):null});(0,m.default)((0,p.default)(S),"getSectionNode",function(e){return S.getRootEl().querySelector((0,F.getSectionSelector)(e))});(0,m.default)((0,p.default)(S),"updateTweaksJsf",function(e){var t=S.getSectionStoreState(),a=t.tweakDefinitionsForSection,i=t.collectionId;if(!a)return;var n=e[0];var s=(0,U.getClosestSectionEl)(n.target);var r=S.getSectionByNode(s);if(!r){console.error("Mutation detected on dead section",{section:r});S.unobserveSection();return}var o=r.typeName||(0,re.getTypeNameById)(i);var l=ae.default.getState(),c=l.tweakDefinitions;var d=(0,Q.default)({isGallery:(0,V.default)(r),isUserItemsList:(0,H.default)(r),isMainContent:(0,z.default)(r),sectionNode:s,tweakDefinitions:c,typeName:o});var u=(0,v.default)(Object.keys(d),Object.keys(a));if(0===u.length)return;Ie("tweakDefinitions changed",{tweakDefinitionsDiff:u});S.getSectionActions().setTweakDefinitionsForSection({tweakDefinitionsForSection:d})});(0,m.default)((0,p.default)(S),"debouncedUpdateTweaksJsf",(0,E.default)(function(){S.updateTweaksJsf(S.aggregatedMutationLists);S.aggregatedMutationLists.length=0},10,{leading:false,trailing:true}));(0,m.default)((0,p.default)(S),"handleSectionMutated",function(e){var t=(0,d.default)(e).filter(function(e){return e.target&&!(0,U.isEditingUiEl)(e.target)});S.aggregatedMutationLists=(0,k.default)(t.concat(S.aggregatedMutationLists));S.aggregatedMutationLists.length>0&&S.debouncedUpdateTweaksJsf()});(0,m.default)((0,p.default)(S),"toggleEditingUi",function(e){var t=e.isGalleryContentEditorOpen,a=e.isUserItemsListContentEditorOpen,i=e.isSettingsOpen;var n=!(i||t||a);Object.values(S.sectionEditingUisBySectionId).forEach(function(e){n?e.show():e.hide()})});(0,m.default)((0,p.default)(S),"toggleEmptyState",function(e){var t=e.sections;var a=S.getRootEl();if(!a)return;t&&0!==t.length?a.classList.remove(Re):a.classList.add(Re)});(0,m.default)((0,p.default)(S),"updateEditedSection",function(){var t=(0,c.default)(q.default.mark(function e(a){var i,n,s,r,o,l,c,d,u,g,p,h,f,m,v,b,y;return q.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.openSettingsId,n=a.isGalleryContentEditorOpen,s=a.isUserItemsListContentEditorOpen,r=a.sectionId,o=a.sections;l=n||s;c=i||(l?r:null);if(!(!o||!c)){t.next=5;break}return t.abrupt("return");case 5:d=S.findSectionIndex(o,c);if(!(-1===d)){t.next=8;break}return t.abrupt("return");case 8:u=S.state.stylesBySectionId;g=u[c];p=o[d];h=!g;f=S.shouldUpdateStyles(g,p);m=S.shouldUpdateNonStyleTweaks(g,p);v=h||f||m;if(!v){t.next=24;break}if(!S.canModifySectionDom(p)){t.next=23;break}b=S.updateTweaksViaTemplateHandler(p);if(!(!b||m)){t.next=23;break}t.next=21;return S.updateSectionDomAndStyles(p);case 21:y=(0,V.default)(p)&&!h&&g.galleryOptions.design!==p.galleryOptions.design;y&&G.default.changeGalleryLayoutFinish(p.galleryOptions.design);case 23:S.notifyTemplateOfSectionThemeUpdate(g,p,c);case 24:S.updateStylesBySectionId(c,p);case 25:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,p.default)(S),"isSectionRerenderRequired",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(0,l.default)(e)||!e)return false;if(t.isSaving)return false;var a=["activeTab","catalog","catalogHTML","focusedSectionId","frameParentNodeRect","isAdminOpen","isCatalogOpen","isColorPanelOpen","isControllerInitialized","isDirty","isEditing","isGalleryContentEditorOpen","isUserItemsListContentEditorOpen","isLoaded","isSectionThemesPanelOpen","isSettingsOpen","isThemeEditorOpen","lastPersistedSections","openAdminId","openSectionNode","openSectionToolbarRect","openSettingsId","pageSectionsId","sectionId","themeUISchema","tweakDefinitionsForSection","typeName","uiSchema"];var i=(0,b.default)(e,a);var n=(0,b.default)(t,a);var s=!(0,_.default)(i,n);return s});(0,m.default)((0,p.default)(S),"onPageSectionStoreUpdate",function(){S.updateSectionThemeUI();var e=oe.default.getState(),t=e.isSettingsOpen,a=e.isEditing;if(!a)return;var i=S.Y.Squarespace.LayoutEngine.EditController.getInstance();if(!i||i.get("destroyed"))return;var n=i._dragSelection;t&&n.get("enabled")?i.disableDragSelection():t||n.get("enabled")||i.enableDragSelection()});(0,m.default)((0,p.default)(S),"onFrameToolBarStoreUpdate",function(){S.updateSectionThemeUI()});(0,m.default)((0,p.default)(S),"onTweakStoreUpdate",function(){S.updateSectionThemeUI()});(0,m.default)((0,p.default)(S),"onSiteHeaderFooterStoreUpdate",function(){S.updateSectionThemeUI()});(0,m.default)((0,p.default)(S),"onSectionCatalogStoreUpdate",function(){var e=ie.default.getState();S.set("hasCatalogLoaded",e.isLoaded);S.sectionCatalog&&S.updateCatalogData()});(0,m.default)((0,p.default)(S),"onSectionListClick",function(e){e.target.classList.contains(Ne)&&S.onScrimClicked(e);e.target.parentElement.classList.contains(Be)&&S.onEmptySectionButtonClick(e)});(0,m.default)((0,p.default)(S),"canModifySectionDom",function(e){if(!e){Ie("section not provided");return false}var t=S.getRootEl();if(!t)return false;if(!S.getFrameWindow()){Ie("The frameWindow reference was released.");return false}var a=S.getSectionNode(e);if(!a||!a.parentNode){Ie("The sectionNode is no longer present.",{section:e});return false}return true});(0,m.default)((0,p.default)(S),"updateTweaksViaTemplateHandler",function(e){var t=S.getFrameWindow();if(!S.getFrameWindow())return false;var a=t.SQSSectionTweak&&t.SQSSectionTweak.refresh(e.id,e);return a});(0,m.default)((0,p.default)(S),"getSectionReplacements",function(e){var t=[{entityType:"page-sections",key:"idv1.p.".concat(e.id),replacement:{type:"reference-page-sections",pageSections:{sections:[e],websiteId:window.Static.SQUARESPACE_CONTEXT.website.id}}}];if(e.typeName){var a=S.getSectionStoreState(),i=a.collectionId;t.push({entityType:"no-component",replacement:{type:"collection-type-name",typeName:e.typeName,collectionId:i}})}return t});(0,m.default)((0,p.default)(S),"getGeneratedCss",function(e){var t=ae.default.getState();var a="";try{a=(0,Y.generateThemesCss)(t)}catch(e){a=""}a=a||(0,Y.getSectionThemesStyleEl)(e);return a});(0,m.default)((0,p.default)(S),"updateSectionDomAndStyles",function(){var t=(0,c.default)(q.default.mark(function e(a){var i,n,s,r,o,l,c,d,u,g,p,h=arguments;return q.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=h.length>1&&void 0!==h[1]?h[1]:null;if(S.canModifySectionDom(a)){t.next=3;break}return t.abrupt("return");case 3:n=O.default.isFeatureEnabled(A.default.SEVEN_ONE_CONTENT_PREVIEW_SECTION_API)&&("GALLERY"===a.sectionName||"LAYOUT_ENGINE"===a.sectionName);t.prev=4;s=S.getFrameWindow();if(!n){t.next=14;break}l=(0,F.getSectionSelector)(a);t.next=10;return(0,M.getSectionPreview)(a,l);case 10:r=t.sent;o=r;t.next=19;break;case 14:c=S.getSectionReplacements(a);t.next=17;return(0,M.getContentPreview)({pathname:i||s.location.pathname,replacements:c});case 17:r=t.sent;o=(0,M.getFragmentFromContentPreview)({responseDoc:r,selector:(0,F.getSectionSelector)(a)});case 19:if(S.canModifySectionDom(a)){t.next=21;break}return t.abrupt("return");case 21:d=S.getSectionNode(a);S.replaceSectionNode(d,o);Ie("Replaced section with newly fetched DOM",{section:a});u=S.getSectionStoreState(),g=u.sections;p=S.getCurrentSectionPosition(g,o);S.initializeSectionHelperElements(a.id,o,p);s.ImageLoader.loadAll();S.getContentInitializer().initializeScripts(o);S.afterSectionsChanged();t.next=35;break;case 32:t.prev=32;t.t0=t["catch"](4);Ie("Uncaught Error in updateSectionDomAndStyles",t.t0);case 35:case"end":return t.stop()}},e,null,[[4,32]])}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,p.default)(S),"scroll",function(){S.scrollRafId=window.requestAnimationFrame(function(){var e=S.getFrameWindow();if(!e)return;e.scrollY>10?S.hideHeaderThemeButton():S.showHeaderThemeButton()})});(0,m.default)((0,p.default)(S),"getAddBlankHandler",function(d){return(0,c.default)(q.default.mark(function e(){var a,i,n,s,r,o,l,c;return q.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!S.state.isAddingSection){t.next=2;break}return t.abrupt("return");case 2:S.set("isAddingSection",true);t.next=5;return _e.default.loadBlanks();case 5:a=t.sent;i=a.data;n=S.getSectionForType(d,i),s=n.html,r=n.sectionId;t.next=10;return S.getSectionActions().addBlankSection({type:d,sectionId:r,afterSectionId:(0,U.getSectionIdByEl)(S.currentSectionNode),isAddAbove:S.isTopAddSelected});case 10:o=t.sent;Ie("Add ".concat(d," to the store using blank sectionId."),{sectionIdFromBlank:r,sectionAdded:o});try{l=S.buildSectionNode({html:s,section:o});c=S.isTopAddSelected?S.currentSectionNode:(0,U.getNextSectionEl)(S.currentSectionNode);S.injectSection({section:o,sectionNode:l,aboveNode:c})}catch(e){(0,B.captureException)(e)}S.hideCatalog();case 14:case"end":return t.stop()}},e)}))});(0,m.default)((0,p.default)(S),"showSectionCatalog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.hasMeasuredRenderTime=false;S.hasMeasuredLoadTime=false;(0,ye.resetGuid)();var i={detail:(0,ye.getGuid)()};(0,w.mark)(be.SECTION_CATALOG_ENTRY_ADDED,i);(0,w.mark)(be.SECTION_CATALOG_RENDERED,i);(0,w.mark)(be.SECTION_CATALOG_FULLY_LOADED,i);if(!S.hasMeasuredCatalogEffectiveness){S.hasMeasuredCatalogEffectiveness=true;(0,w.measure)(be.SECTION_CATALOG_PRELOAD_EFFECTIVENESS)}var n=150;var s=S.getRootEl();e=e||s.querySelector("."+Pe);S.isTopAddSelected=t;S.currentSectionNode=e;S.getOrCreateAndShowSectionCatalog(a);S.turnOffInsertionPoints();var r=S.sectionCatalogNode.ownerDocument.body;r.style.overflowY="hidden";S.updateCatalogData();S.getSectionActions().setIsCatalogOpen(true);P.default.openSectionCatalog();S.registerTimer(function(){var e=S.sectionCatalogNode.querySelector(".sqs-catalog-container");var t=S.sectionCatalogNode.querySelector(".sqs-catalog-scrim ");e&&e.classList.add("visible");t&&t.classList.add("visible");S.sectionCatalogNode.classList.add("visible")},n)});(0,m.default)((0,p.default)(S),"moveSectionUp",function(e){var t=S.getSectionStoreState(),a=t.sections;if(e){var i=S.getCurrentSectionPosition(a,e);if(-1===i||0===i)return;S.getRootEl().classList.add("sqs-section-moving");S.registerTimer(function(){S.moveSection(e,i,Ye.UP)},De);P.default.moveSection("up",S.getSectionAreaName())}});(0,m.default)((0,p.default)(S),"moveSectionDown",function(e){if(e){var t=S.getSectionStoreState(),a=t.sections;var i=S.getCurrentSectionPosition(a,e);if(-1===i||i===a.length-1)return;S.getRootEl().classList.add("sqs-section-moving");S.registerTimer(function(){S.moveSection(e,i,Ye.DOWN)},De);P.default.moveSection("down",S.getSectionAreaName())}});(0,m.default)((0,p.default)(S),"duplicateSection",function(){var t=(0,c.default)(q.default.mark(function e(a){var i,n,s,r;return q.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=S.getSectionByNode(a);n=S.buildLoadingPlaceholderNode(a);S.injectSectionNode({sectionNode:n,aboveNode:(0,U.getNextSectionEl)(a)});S.currentSectionNode=a;t.prev=4;t.next=7;return S.getSectionActions().duplicateSection(i);case 7:s=t.sent;t.next=10;return(0,M.getSectionPreview)(s,(0,F.getSectionSelector)(s));case 10:r=t.sent;S.getRootEl().replaceChild(r,n);S.injectSection({section:s,sectionNode:r,aboveNode:(0,U.getNextSectionEl)(a)});t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](4);S.removeSectionNode(n);throw t.t0;case 19:case"end":return t.stop()}},e,null,[[4,15]])}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,p.default)(S),"deleteSection",function(){var t=(0,c.default)(q.default.mark(function e(a){var i,n,s,r,o,l,c,d,u;return q.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return S.confirm({title:(0,me.t)("Remove Section"),message:(0,me.t)("Are you sure you want to remove this section?"),confirmLabel:(0,me.t)("Remove")});case 3:t.next=8;break;case 5:t.prev=5;t.t0=t["catch"](0);return t.abrupt("return");case 8:if(a){t.next=10;break}return t.abrupt("return");case 10:S.holdPositionAnimator();i=S.getSectionStoreState(),n=i.sections;s=S.getCurrentSectionPosition(n,a);r=n.splice(s,1),o=(0,g.default)(r,1),l=o[0].sectionName;S.getSectionActions().updateSections(n);c=(0,U.getSectionIdByEl)(a);d=S.getSectionStoreState(),u=d.collectionId;a.remove();if(0===n.length){S.set("isEmpty",true);S.getRootEl().append(S.createEmptySectionNode())}S.releasePositionAnimator();S.afterSectionsChanged();P.default.deleteSection(l,c,S.getSectionAreaName(),u);case 22:case"end":return t.stop()}},e,null,[[0,5]])}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,p.default)(S),"closeSettings",function(){S.unobserveSection();S.getSectionActions().setIsSettingsOpen({isSettingsOpen:false,openSettingsId:null,openSectionToolbarRect:null,openSectionNode:null});S.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:false,sectionId:null});S.getSectionActions().setIsUserItemsListContentEditorOpen({isUserItemsListContentEditorOpen:false,sectionId:null});var e=S.getRootEl();e&&e.removeEventListener("click",S.closeSettings)});(0,m.default)((0,p.default)(S),"hideScrim",function(){S.getRootEl().classList.add(Oe);S.set("isScrimEnabled",false);S.registerTimer(function(){var e=S.getRootEl();e&&e.classList.remove(Ne,Oe)},S.getScrimFadeOutDuration()+150)});(0,m.default)((0,p.default)(S),"confirm",function(a){if(!S.confirmationMountNode){var e=S.getRootEl().ownerDocument;S.confirmationMountNode=e.createElement("div");e.body.appendChild(S.confirmationMountNode)}var i=function e(t){ee.default.render($.default.createElement(te.default,we({isOpen:false,cancelStyle:"default",confirmStyle:"default"},a)),S.confirmationMountNode);t()};return new Promise(function(e,t){ee.default.render($.default.createElement(te.default,we({isOpen:true,onConfirm:i.bind((0,p.default)(S),e),onDismiss:i.bind((0,p.default)(S),t),onRequestClose:i.bind((0,p.default)(S),t),cancelStyle:"default",confirmStyle:"default"},a)),S.confirmationMountNode)})});S.initializeScrim(a);var s=a.getDOMNode();s.addEventListener("click",S.onSectionListClick);S.detachPageSectionsStoreActionListener=oe.default.listen(S.onPageSectionStoreUpdate);S.detachSiteHeaderFooterStoreListener=le.default.listen(S.onSiteHeaderFooterStoreUpdate);S.detachTweakStoreListener=ae.default.listen(S.onTweakStoreUpdate);S.detachFrameToolBarStoreListener=ce.default.listen(S.onFrameToolBarStoreUpdate);S.detachSectionCatalogEntryActionListener=ie.default.listen(S.onSectionCatalogStoreUpdate);S.onSectionCatalogStoreUpdate();S.timeouts=[];S.bodyEditors=[];S.sectionEditingUisBySectionId={};S.pendingRenderedNodes=[];return S}(0,n.default)(o,[{key:"getRootEl",value:function e(){return this.state.rootNode?this.state.rootNode.getDOMNode():null}},{key:"getFrameWindow",value:function e(){var t=this.getRootEl();return t&&t.ownerDocument.defaultView||null}},{key:"unobserveSection",value:function e(){this.debouncedUpdateTweaksJsf.cancel();if(this.sectionMutationObserver){this.sectionMutationObserver.disconnect();this.sectionMutationObserver=null}this.observedSectionNode=null}},{key:"observeSection",value:function e(t){this.unobserveSection();if(!t)return;this.observedSectionNode=t;this.sectionMutationObserver=new MutationObserver(this.handleSectionMutated);this.sectionMutationObserver.observe(t,{attributeFilter:["class"],attributes:true,childList:true,subtree:true})}},{key:"updateStylesBySectionId",value:function e(t,a){if(!this.state||!this.state.stylesBySectionId){(0,B.captureMessage)("Attempting to update styles by section ID with no state!");return}this.state.stylesBySectionId[t]=a}},{key:"notifyTemplateOfSectionThemeUpdate",value:function e(t,a,i){if(!t)return;var n=(0,C.default)(t,"styles.sectionTheme");var s=(0,C.default)(a,"styles.sectionTheme");n!==s&&window.Y.Global.fire("section:theme:change",i,s)}},{key:"onSectionStoreUpdate",value:function e(t){var a=t.isDirty,i=t.isEditing,n=t.isLoaded;if(!this.state.rootNode){Ie("[".concat(this.constructor.name,"] still listening to store updates after rootNode removal"));return}this.toggleEditingUi(t);this.set("editable",i);this.set("dirty",a);this.isSectionRerenderRequired(this.prevState,t)&&this.updateEditedSection(t);this.toggleEmptyState(t);i!==this.state.isEditing&&this.handleEditChange(i,n);this.prevState=t}},{key:"handleEditChange",value:function e(t,a){var i=this;if(t){var n=a?Promise.resolve():this.loadLatestSectionData();var s=this.state.hasCatalogLoaded?Promise.resolve():this.loadLatestCatalogSectionData();var r=ve.default.getState(),o=r.view;Promise.all([n,s]).then(function(){(O.default.isFeatureEnabled(A.default.MOBILE_PREVIEW_PAGE_EDITING)||o===x.default.DESKTOP)&&i.initializeEditors()}).catch(function(e){Ie("error fetching fetching data upon entering edit mode",e)});this.detachDeviceViewStoreListener||(this.detachDeviceViewStoreListener=ve.default.listen(function(){var e=ve.default.getState(),t=e.view;if(!O.default.isFeatureEnabled(A.default.MOBILE_PREVIEW_PAGE_EDITING))if(t===x.default.DESKTOP)i.timeouts.push(setTimeout(function(){if(i.bodyEditors.length)return;i.initializeEditors()}));else{i.unmountEditors();i.appendEmptyPreviewSectionNodeIfNeeded()}i.onDeviceViewChanges(t)}))}else{this.cleanUp();this.appendEmptyPreviewSectionNodeIfNeeded()}var l=this.getRootEl();l&&(l.dataset.isEditing=t);t?this.state.rootNode.getDOMNode().classList.remove(L.DISABLE_DRAG_SELECTION_CLASSNAME):this.state.rootNode.getDOMNode().classList.add(L.DISABLE_DRAG_SELECTION_CLASSNAME);this.set("isEditing",t)}},{key:"shouldUpdateStyles",value:function e(t,a){if(!t)return false;if((0,V.default)(t)){if(!(0,_.default)(t.galleryOptions,a.galleryOptions))return true;if(t.styles.sectionTheme!==a.styles.sectionTheme)return true}if((0,H.default)(t)){if(!(0,_.default)(t.userItemsListOptions,a.userItemsListOptions))return true;if(t.styles.sectionTheme!==a.styles.sectionTheme)return true}return!(0,_.default)(t.styles,a.styles)}},{key:"shouldUpdateNonStyleTweaks",value:function e(t,a){var i=t?!(0,_.default)(t.backgroundImageId,a.backgroundImageId):a.backgroundImageId;if(i)return true;var n=t?!(0,_.default)(t.video,a.video):a.video.url;if(n)return true;var s=(0,C.default)(t,"galleryOptions.lastUpdate")!==(0,C.default)(a,"galleryOptions.lastUpdate");if(s)return true;var r=t&&this.isGalleryUpdated(t,a);if(r)return true;var o=t&&this.isListUpdated(t,a);if(o)return true;var l=!!t&&!(0,_.default)(t.typeName,a.typeName);if(l)return true;return false}},{key:"isGalleryUpdated",value:function e(t,a){if(t.galleryOptions&&a.galleryOptions&&t.galleryOptions.transientGalleryId!==a.galleryOptions.transientGalleryId)return true;if(t.galleryOptions&&a.galleryOptions&&t.galleryOptions.design!==a.galleryOptions.design)return true;return false}},{key:"isListUpdated",value:function e(t,a){var i=!(0,_.default)(t.userItems,a.userItems);var n=t.userItemsListOptions&&a.userItemsListOptions&&t.userItemsListOptions.design!==a.userItemsListOptions.design;var s=i||n;return s}},{key:"getPersistantSelectors",value:function e(){return[He]}},{key:"replaceSectionNode",value:function e(i,n){var t=i.parentNode;if(!t)return;t.insertBefore(n,i);this.getPersistantSelectors().forEach(function(e){var t=i.querySelector(e);if(t){var a=n.querySelector(e);if(!a){(0,B.captureMessage)("replaceSectionNode: No new layout node to replace with.");return}a.parentNode.insertBefore(t,a);a.remove()}});if(this.observedSectionNode===i){this.observeSection(n);this.updateTweaksJsf([{target:n}])}i.remove();(0,w.measure)(Ce.COLLECTION_NEW_LAYOUT_LOAD,{requireStart:true})}},{key:"initializeEditors",value:function e(){var a=this;if(!this.getFrameWindow())return;var t=this.getSectionStoreState(),i=t.sections;var n=i.length;if(0===n){this.cleanUpEmptySectionNode();this.set("isEmpty",true);this.getRootEl().append(this.createEmptySectionNode());this.onMeasureEditModePerformance()}i.forEach(function(e,t){a.initializeEditorForSection(e,t,n)})}},{key:"appendEmptyPreviewSectionNodeIfNeeded",value:function e(){this.cleanUpEmptySectionNode();var t=this.getRootEl();if(!t)return false;var a=t.querySelectorAll(".page-section");if(0===a.length){this.set("isEmpty",true);t.append(this.createPreviewEmptySectionNode());return true}return false}},{key:"cleanUpEmptySectionNode",value:function e(){var t=this.getRootEl();if(!t)return;var a=t.querySelector("."+Pe);if(a){this.set("isEmpty",false);a.remove()}}},{key:"initializeEditorForSection",value:function e(t,a,i){var n=this;var s=this.getRootEl();if(!s)return;var r=this.getSectionNode(t);if(!r){Ie("Could not locate the section with ID: ".concat(t.id));return}var o=(0,T.getBreakpoint)(S.breakpoints),l=o.name;var c="mobile-0"===l;c&&r.addEventListener("click",function(){var e=n.getRootEl().querySelector("[data-focused-section]");e&&e.removeAttribute("data-focused-section");r.setAttribute("data-focused-section",true);Se.default.setFocusedSectionId(t.id)});if(!t.content){this.initializeSectionHelperElements(t.id,r,a);1===i&&this.onMeasureEditModePerformance();Ie("No section content. Main section only");return}r.setAttribute("data-test","section");var d=r.querySelector(He);var u=this.getLE2SectionSelectorById(t.id).replace("#","");if(!d||!u||d.id!==u){Ie("Could not find LayoutEngine node for section",{layoutNode:d,section:t,le2Id:u});return}d.style.zIndex="1";this.initializeSectionHelperElements(t.id,r,a);var g=this.Y.SQS.LayoutEngine.Models.EditableContentBlock;var p=new g(t.content);var h=p.get("layout");var f=new K.default(this.Y,{hostNode:d,pageLayout:h});this.bindMeasureEditModePerformance(d);f.addDirtyLayoutDataHandler(function(e){n.getSectionActions().setSectionContent({sectionId:t.id,content:we({},t.content,{layout:f.pageLayout.toJSON()})})});this.bodyEditors.push(f)}},{key:"bindMeasureEditModePerformance",value:function e(t){var a=this;this.performanceTrackingEventHandle||(this.performanceTrackingEventHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:layout-rendered",function(t){a.pendingRenderedNodes=a.pendingRenderedNodes.filter(function(e){return e.getDOMNode()!==t.node.getDOMNode()});0===a.pendingRenderedNodes.length&&a.onMeasureEditModePerformance()}));this.pendingRenderedNodes.push(this.Y.one(t))}},{key:"initializeSectionHelperElements",value:function e(t,a,i){this.getSectionActions().setOpenSectionNode(a);if(!a.querySelector(".sqs-section-editing-ui")){var n=this.getSectionEditingFeatures(a);this.sectionEditingUisBySectionId[t]=new J.default({sectionNode:a,sectionPosition:i,features:n})}}},{key:"buildEmptySectionNode",value:function e(t){var a=t.title,i=t.description,n=t.hasButton;var s=this.getRootEl().ownerDocument.createElement("div");s.classList.add(Pe);s.dataset.controller="";var r=a?'<div class="sqs-empty-title">'.concat(a,"</div>"):"";var o=i?'<div class="sqs-empty-description">'.concat(i,"</div>"):"";var l=n?'<div class="'.concat(N.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME," ").concat(Be,'">\n        <div class="sqs-section-add-button icon-page-section-add-section"></div>\n      </div>'):"";s.innerHTML='\n      <div class="sqs-empty-section-content '.concat(L.DISABLE_DRAG_SELECTION_CLASSNAME,'">\n        ').concat(r,"\n        ").concat(o,"\n        ").concat(l,"\n      </div>\n    ");return s}},{key:"buildLoadingPlaceholderNode",value:function e(t){var a=this.getRootEl().ownerDocument.createElement("div");a.classList.add(Ve);a.dataset.controller="";var i=t.clientHeight+"px";a.style.height=i;a.style.width="100%";return a}},{key:"getSectionEditingFeatures",value:function e(t){var a=this;var i=(0,U.getSectionIdByEl)(t);var n=this.getSectionStoreState().sections.find(function(e){return e.id===i});var s=(0,V.default)(n)?{galleryContent:function e(){P.default.openGalleryImagePicker(i);a.openGalleryContentEditor(n,t)}}:{};var r=(0,H.default)(n)?{userItemsListContent:function e(){a.openUserItemsListContentEditor(n)}}:{};var o=this.isSectionDeletable(t);var l=o?{delete:this.deleteSection}:{};var c=this.isSectionMoveable(t);var d=c?{up:this.moveSectionUp,down:this.moveSectionDown}:{};var u=this.isSectionAddable(t);var g=u?{add:this.showSectionCatalog}:{};var p=O.default.isFeatureEnabled(A.default.SEVEN_ONE_SECTION_DUPLICATION);var h=this.isSectionDuplicable(t);var f=h&&p?{duplicate:this.duplicateSection}:{};var m=O.default.isFeatureEnabled(A.default.MOBILE_PREVIEW_PAGE_EDITING);var v=(o||c)&&m?{more:true}:{};return we({},g,{},f,{},d,{settings:this.handleSettingsButtonClick.bind(this),admin:this.handleAdminButtonClick.bind(this)},l,{},s,{},r,{},v)}},{key:"isSectionItemManageable",value:function e(t){var a=(0,U.getSectionIdByEl)(t);var i=this.getSectionStoreState(),n=i.sections,s=i.collectionId,r=i.itemId;var o=se.default.getState().get(s);var l=n.find(function(e){return e.id===a});return o&&(0,z.default)(l)&&!r}},{key:"isSectionAddable",value:function e(t){return true}},{key:"isSectionDuplicable",value:function e(t){var a=this.getSectionByNode(t);return!(0,z.default)(a)}},{key:"isSectionMoveable",value:function e(t){return true}},{key:"fireMoveSectionEvent",value:function e(){window.Y.Global.fire("tweak:change",{config:{},getName:function e(){return"move-section"},getValue:function e(){return true}})}},{key:"isHeaderTransparent",value:function e(){var t=ae.default.getState(),a=t.tweakValuesCurrent;return"true"===a["tweak-transparent-header"]}},{key:"renderReactComponent",value:function e(t,a,i){ee.default.render($.default.createElement(t,a),i)}},{key:"getHeaderThemeButton",value:function e(){var t=this.getFrameWindow();var a=null===t||void 0===t?void 0:t.document.querySelector("[data-key=".concat(qe.HEADER_SECTION_THEME_INDICATOR_KEY,"]"));return a}},{key:"showHeaderThemeButton",value:function e(){var t=this.getHeaderThemeButton();t&&(t.style.display="")}},{key:"hideHeaderThemeButton",value:function e(){var t=this.getHeaderThemeButton();t&&(t.style.display="none")}},{key:"getIndicatorPositionOffsets",value:function e(){var t=Ae;var a=this.getHeaderEl();var i=a.getBoundingClientRect();var n=i.height;var s=a.querySelector(".sqs-announcement-bar-dropzone");var r=a.querySelector(".sqs-announcement-bar-hidden");if(s&&!r){var o=s.getBoundingClientRect();var l=o.height;t=l}return{header:t,firstSection:n+Ae}}},{key:"getHeaderEl",value:function e(){var t=this.getRootEl();return t&&t.ownerDocument&&t.ownerDocument.querySelector("header")}},{key:"isFooter",value:function e(){var t=this.getRootEl();return t&&t.id===We}},{key:"getPageSectionEls",value:function e(){var t=this.getRootEl();return Array.from(t&&t.ownerDocument&&t.ownerDocument.querySelectorAll(Ge))}},{key:"getIndicatorConfig",value:function e(t){var a=(0,U.getThemeDataBySectionEl)(t),i=a.themeId,n=a.isDefault;if(!i)return null;var s=W.ThemesConfigById[i];if(!s)return null;var r=(0,j.getThemeCardMappingsById)(i);return we({},s,{cardMappings:r,isDefault:n})}},{key:"updateSectionThemeUI",value:function e(){var t=this;if(this.isFooter())return;var a=ae.default.getState();if(!a.loaded)return;if(!(0,Ee.default)())return;!this.scrollRafId&&this.getFrameWindow()&&this.getFrameWindow().addEventListener("scroll",this.scroll);de.default.setPageSectionNodes.defer({header:{node:this.getHeaderEl(),indicator:this.getIndicatorConfig(this.getHeaderEl())},sections:this.getPageSectionEls().map(function(e){return{node:e,indicator:t.getIndicatorConfig(e)}}),offsets:this.getIndicatorPositionOffsets()})}},{key:"insertChildAtIndex",value:function e(t,a,i){i=i||0;i>=t.children.length?t.appendChild(a):t.insertBefore(a,t.children[i])}},{key:"hideCatalog",value:function e(){var t=this;this.turnOnInsertionPoints();this.set("isAddingSection",false);var a=300;if(!this.sectionCatalogNode||!this.sectionCatalog)return;var i=this.sectionCatalogNode.ownerDocument.body;i.style.overflowY="";if(this.sectionCatalogNode){var n=this.sectionCatalogNode.querySelector(".sqs-catalog-container");var s=this.sectionCatalogNode.querySelector(".sqs-catalog-scrim");n&&n.classList.remove("visible");s&&s.classList.remove("visible")}this.registerTimer(function(){t.sectionCatalogNode&&t.sectionCatalogNode.classList.remove("visible");t.sectionCatalog.cleanUp();t.getSectionActions().setIsCatalogOpen(false)},2*a)}},{key:"handleCloseCatalog",value:function e(){this.hideCatalog()}},{key:"getSectionForType",value:function e(t,a){var i=(0,g.default)(a,3),n=i[0],s=i[1],r=i[2];switch(t){case Me:return n;case Fe:return s;case Ue:return r;default:throw new Error("Unsupported empty section type: "+t)}}},{key:"getContentInitializer",value:function e(){this.catalogContentInitializer||(this.catalogContentInitializer=new fe.default(this.Y));return this.catalogContentInitializer}},{key:"getOrCreateAndShowSectionCatalog",value:function e(){var a=this;var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.sectionCatalogNode)return this.sectionCatalogNode;var i=[{id:"blank_section",label:(0,me.t)("Add Blank"),onClick:this.getAddBlankHandler(Me)}];if(O.default.isFeatureEnabled(A.default.SECTION_ADMIN)){var n={id:"blank_gallery",label:(0,me.t)("Add Blank Gallery"),onClick:this.getAddBlankHandler(Fe)};i.push(n);var s={id:"blank_user_items_list_section",label:(0,me.t)("Add Blank User Items List Section"),onClick:this.getAddBlankHandler(Ue)};i.push(s)}var r=we({buttons:i,entrySelector:".page-section[".concat(N.SECTION_ID_ATTR,"]"),onCategoryClick:function e(t){a.hasMeasuredLoadTime=true;P.default.categoryClick(t,"section-catalog")},categoryMessageBundle:ge.default,categoryOrder:this.props.sectionsArea===D.default.FOOTER_SECTIONS?he.default:pe.default,getEntriesForCategory:function e(t){return ie.default.getSectionsForCategory(t)},initializeItems:this.getContentInitializer().initializeSections,onCloseCatalog:this.handleCloseCatalog.bind(this),onCategoryLoaded:function e(){if(!a.hasMeasuredLoadTime){a.hasMeasuredLoadTime=true;(0,w.measure)(be.SECTION_CATALOG_FULLY_LOADED,{detail:(0,ye.getGuid)()})}},onSelectItem:this.handleSelectedSectionNode.bind(this),title:(0,me.t)("Add a Section")},t);var o=this.getRootEl();if(o){var l=new Z.default(o,r);var c=l.getCatalog();o.ownerDocument.body.appendChild(c);this.sectionCatalog=l;this.sectionCatalogNode=c;return c}}},{key:"updateCatalogData",value:function e(){var t=ie.default.getState(),a=t.categories,i=t.entryPreviews;if(!this.hasMeasuredRenderTime&&i&&i.length){this.hasMeasuredRenderTime=true;(0,w.measure)(be.SECTION_CATALOG_RENDERED,{detail:(0,ye.getGuid)()})}this.sectionCatalog.setLoadedCategories(a)}},{key:"getSectionHtmlFromCatalog",value:function e(t){var a=ie.default.getState().sectionPreviews;var i=a.find(function(e){return e.id===t})||{},n=i.html;return n}},{key:"getComponentsFromCatalog",value:function e(t){var a=ie.default.getAllSectionsFromCatalog();var i=a.find(function(e){return e.sectionId===t})||{},n=i.componentReplacements;return n}},{key:"handleSelectedSectionNode",value:function e(t,r){if(this.state.isAddingSection)return;this.set("isAddingSection",true);(0,w.measure)(be.SECTION_CATALOG_ENTRY_ADDED,{detail:(0,ye.getGuid)()});var o=(0,U.getSectionIdByEl)(t);var l=ie.default.getPreviewEntryForSection(o);var a=ie.default.getCatalogEntryForSection(o);if(null===l)throw new Error("Unable to find preview");if(null===a)throw new Error("Unable to find catalog entry");this.getSectionActions().addSection({section:l,afterSectionId:(0,U.getSectionIdByEl)(this.currentSectionNode),websiteId:l.websiteId,isAddAbove:this.isTopAddSelected,componentReplacements:a.componentReplacements||[]}).then(function e(t){var a=this.buildSectionNode({html:l.html,section:t});var i=this.isTopAddSelected?this.currentSectionNode:(0,U.getNextSectionEl)(this.currentSectionNode);this.injectSection({section:t,sectionNode:a,aboveNode:i});var n=this.getSectionStoreState(),s=n.collectionId;P.default.addSectionToPage(r,o,this.getSectionAreaName(),s)}.bind(this));this.hideCatalog()}},{key:"buildSectionNode",value:function e(t){var a=t.html,i=t.section;var n=this.currentSectionNode.ownerDocument;var s=n.createElement("div");s.innerHTML=a;var r=s.querySelector(N.SECTION_SELECTOR)||s.firstElementChild;if(!r)throw new Error("Could not buildSectionNode");r.setAttribute(N.SECTION_ID_ATTR,i.id);r.classList.add("page-section-catalog-added");var o=r.querySelector(He);if(o){var l=this.getLE2SectionSelectorById(i.id).replace("#","");o.setAttribute("id",l)}return r}},{key:"injectSection",value:function e(t){var a=t.section,i=t.sectionNode,n=t.aboveNode;this.injectSectionNode({sectionNode:i,aboveNode:n});this.connectNewSectionNode({section:a,sectionNode:i})}},{key:"injectSectionNode",value:function e(t){var a=t.sectionNode,i=t.aboveNode;if(!a)throw new Error("Tried to inject a section without a sectionNode");a.style.opacity=0;a.style.transition="opacity ".concat(xe,"ms ease-in");this.holdPositionAnimator();var n=this.getRootEl();i?n.insertBefore(a,i):n.appendChild(a);this.cleanUpEmptySectionNode();this.registerTimer(function(){a.style.transition="";a.style.opacity=1},0);this.releasePositionAnimator();this.scrollIntoViewIfNeeded(a);this.afterSectionsChanged()}},{key:"removeSectionNode",value:function e(t){var a=this;this.holdPositionAnimator();this.registerTimer(function(){t.remove();a.releasePositionAnimator()},0)}},{key:"connectNewSectionNode",value:function e(t){var a=t.section,i=t.sectionNode;i.ownerDocument.defaultView.Squarespace.initializeLayoutBlocks(this.Y,this.Y.one(i));this.getContentInitializer().initializeScripts(i);var n=this.getSectionStoreState(),s=n.sections;this.currentSectionNode=i;var r=this.getCurrentSectionPosition(s,i);this.initializeEditorForSection(a,r);this.fireMoveSectionEvent()}},{key:"scrollIntoViewIfNeeded",value:function e(t){var a=t.ownerDocument.querySelector("html");var i=a.clientHeight;var n=a.scrollTop;var s=n+i;var r=t.offsetHeight;var o=t.offsetTop;var l=o+r;var c=o-Le<n;var d=l+Le>s;if(c||d){var u=o-Le;(0,I.default)(a,{top:u,left:0},{easing:"easeInOutSine",maxDuration:xe})}}},{key:"findSectionIndex",value:function e(t,a){return t.findIndex(function(e,t){return e.id===a})}},{key:"getCurrentSectionPosition",value:function e(t,a){if(!a||!t)return;var i=(0,U.getSectionIdByEl)(a);return this.findSectionIndex(t,i)}},{key:"swapSection",value:function e(t,a,i){var n=t[a];t[a]=t[i];t[i]=n;return t}},{key:"holdPositionAnimator",value:function e(){this.positionAnimatorTimer&&window.clearTimeout(this.positionAnimatorTimer);var t=this.getRootEl();if(!t)return;this.positions=(0,d.default)(t.querySelectorAll(N.SECTION_SELECTOR)).map(function(e){var t=e.getBoundingClientRect();e.style.transition="";e.style.transform="";return{top:t.top,section:e}})}},{key:"releasePositionAnimator",value:function e(){var t=this;if(!this.positions)return;this.positions.forEach(function(e){var t=e.section,a=e.top;var i=t.getBoundingClientRect();var n=i.top;t.style.transform="translateY(".concat(a-n,"px)")});this.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transition="transform ".concat(xe,"ms ease-in-out")});t.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transform="translateY(0px)"});t.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transform="";t.style.zIndex=""});t.registerTimer(t.fireMoveSectionEvent,0);t.positionAnimatorTimer=setTimeout(function(){var e=t.getRootEl();e&&e.classList.remove("sqs-section-moving")},200)},xe+100)},0)},0)}},{key:"getFrameParentNodeRect",value:function e(){var t;var a=null===(t=this.Y.config.win.top.document.querySelector("#sqs-site-frame"))||void 0===t?void 0:t.parentNode;if(!a)return null;return a.getBoundingClientRect()}},{key:"handleSettingsButtonClick",value:function e(t){var a=this;var i=(0,U.getSectionIdByEl)(t);var n=t.querySelector(".toolbar-buttons");var s=this.getSectionStoreState(),r=s.sections,o=s.collectionId,l=s.itemId;var c=r.find(function(e){return e.id===i});G.default.clickEditSection(this.getSectionAreaName(),o,l);var d=c.typeName||(0,re.getTypeNameById)(o);this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a.closeSettings)});this.getSectionActions().setIsSettingsOpen({collectionId:o,frameParentNodeRect:this.getFrameParentNodeRect(),isGallery:(0,V.default)(c),isMainContent:(0,z.default)(c),isSettingsOpen:true,openSectionNode:t,openSectionToolbarRect:n.getBoundingClientRect(),openSettingsId:i,typeName:d});this.observeSection(t)}},{key:"openGalleryContentEditor",value:function e(t){var a=this;this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a.closeSettings)});this.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:true,sectionId:t.id})}},{key:"openUserItemsListContentEditor",value:function e(t){var a=this;this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a.closeSettings)});this.getSectionActions().setIsUserItemsListContentEditorOpen({isUserItemsListContentEditorOpen:true,sectionId:t.id})}},{key:"handleAdminButtonClick",value:function e(t){var a=(0,U.getSectionIdByEl)(t);var i=t.querySelector(".control-buttons");var n=this.getSectionStoreState(),s=n.collectionId;ue.default.loadCategories(s,a);this.getSectionActions().setIsAdminOpen.defer({isAdminOpen:true,openAdminId:a,openSectionToolbarRect:i.getBoundingClientRect()})}},{key:"moveSection",value:function e(t,a,i){var n=this.getSectionStoreState(),s=n.sections;var r=this.getRootEl();this.holdPositionAnimator();var o=a+i;var l=s[o].id;var c="[".concat(N.SECTION_ID_ATTR,'="').concat(l,'"]');var d=r.querySelector(c);t.style.zIndex=1;var u=i>0?d:t;var g=i>0?t:d;r.insertBefore(u,g);this.swapSection(s,a,o);this.getSectionActions().updateSections(s);this.releasePositionAnimator();this.scrollIntoViewIfNeeded(t);this.afterSectionsChanged()}},{key:"isSectionDeletable",value:function e(t){var a=this.getSectionStoreState(),i=a.sections;var n=i.find(function(e){return e.id===(0,U.getSectionIdByEl)(t)});return"MAIN_CONTENT"!==n.sectionName}},{key:"loadLatestCatalogSectionData",value:function e(){this.hasMeasuredCatalogEffectiveness||(0,w.mark)(be.SECTION_CATALOG_PRELOAD_EFFECTIVENESS);ne.default.loadCatalog.defer()}},{key:"revert",value:function e(){var t=this.getSectionActions();t.setDirty(false);t.setEditing(false);return Promise.resolve()}},{key:"initializeScrim",value:function e(t){t.getDOMNode().setAttribute("data-edit-button-text",this.getScrimButtonText())}},{key:"showScrim",value:function e(){this.getRootEl().classList.add(Ne);this.set("isScrimEnabled",true)}},{key:"onDeviceViewChanges",value:function e(t){if(O.default.isFeatureEnabled(A.default.MOBILE_PREVIEW_PAGE_EDITING)){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();if(a&&!a.get("destroyed"))if(t===x.default.PHONE){this.turnOffInsertionPoints();a.set("supportsInsertPoints",false)}else{a.set("supportsInsertPoints",true);this.turnOnInsertionPoints()}}if(!this.sectionEditingUisBySectionId)return;Object.values(this.sectionEditingUisBySectionId).forEach(function(e){return e.onDeviceViewChanges(t)})}},{key:"getScrimButtonText",value:function e(){return""}},{key:"onScrimClicked",value:function e(t){}},{key:"onEmptySectionButtonClick",value:function e(t){}},{key:"afterSectionsChanged",value:function e(){}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(n)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"turnOffInsertionPoints",value:function e(){this.bodyEditors.forEach(function(e){e.EDIT_CONTROLLER.disableInsertPoints()})}},{key:"turnOnInsertionPoints",value:function e(){this.bodyEditors.forEach(function(e){e.EDIT_CONTROLLER.enableInsertPoints()})}},{key:"cleanupScrollEvents",value:function e(){this.scrollRafId&&window.cancelAnimationFrame(this.scrollRafId);var t=this.getFrameWindow();t&&t.removeEventListener("scroll",this.scroll)}},{key:"unmountEditors",value:function e(){this.bodyEditors.forEach(function(e){e.destroy()});this.bodyEditors=[]}},{key:"destroy",value:function e(){(0,s.default)((0,f.default)(o.prototype),"destroy",this).call(this);this.prevState=null;this.deregisterTimers();this.cleanUp();this.cleanupScrollEvents();if(this.catalogContentInitializer){this.catalogContentInitializer.destroy();this.catalogContentInitializer=null}if(this.sectionEditingUisBySectionId){Object.values(this.sectionEditingUisBySectionId).forEach(function(e){return e.destroy()});this.sectionEditingUisBySectionId=null}this.positionAnimatorTimer&&clearTimeout(this.positionAnimatorTimer);if(this.confirmationMountNode){ee.default.unmountComponentAtNode(this.confirmationMountNode);this.confirmationMountNode=null}if(this.detachPageSectionsStoreActionListener){this.detachPageSectionsStoreActionListener();this.detachPageSectionsStoreActionListener=null}if(this.performanceTrackingEventHandle){this.performanceTrackingEventHandle.detach();this.performanceTrackingEventHandle=null}if(this.detachDeviceViewStoreListener){this.detachDeviceViewStoreListener();this.detachDeviceViewStoreListener=null}}},{key:"cleanUp",value:function e(){this.unobserveSection();this.sectionCatalog&&this.sectionCatalog.cleanUp();if(this.sectionCatalogNode){this.sectionCatalogNode.remove();this.sectionCatalogNode=null}if(this.detachSectionCatalogEntryActionListener){this.detachSectionCatalogEntryActionListener();this.detachSectionCatalogEntryActionListener=null}if(this.detachTweakStoreListener){this.detachTweakStoreListener();this.detachTweakStoreListener=null}if(this.detachFrameToolBarStoreListener){this.detachFrameToolBarStoreListener();this.detachFrameToolBarStoreListener=null}if(this.detachSiteHeaderFooterStoreListener){this.detachSiteHeaderFooterStoreListener();this.detachSiteHeaderFooterStoreListener=null}this.unmountEditors();this.set("isAddingSection",false)}},{key:"getLE2SectionSelectorById",value:function e(t){return"#".concat(ze,"-").concat(t)}},{key:"isInlineEditable",value:function e(){return false}},{key:"onMeasureEditModePerformance",value:function e(){}},{key:"loadLatestSectionData",value:function e(){false}},{key:"getSectionStoreState",value:function e(){false}},{key:"getSectionActions",value:function e(){false}},{key:"createEmptySectionNode",value:function e(){false}},{key:"createPreviewEmptySectionNode",value:function e(){false}},{key:"getScrimFadeOutDuration",value:function e(){false}},{key:"getSectionAreaName",value:function e(){false}},{key:"manageItems",value:function e(){false}},{key:"isFrameRealAndIfNotDestroy",value:function e(){if(this.Y.config.win.frameElement||this.Y.config.win.MOBILEAPP)return true;(0,B.captureMessage)("Detached frame not properly unloaded!");this.destroy();return false}}]);return o}(X.default);t.default=je;e.exports=t.default},11885:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getSectionSelector=n;var i=a(11490);function n(e){return e?"".concat(i.SECTION_TAG,"[").concat(i.SECTION_ID_ATTR,'="').concat(e.id,'"]'):""}},11886:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2722));function s(e){return e.sectionName===n.default.USER_ITEMS_LIST}var r=s;t.default=r;e.exports=t.default},11887:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=a(729);var o=a(12373);var l=(0,r.createLogger)("section-catalog-entry-actions","#357");var c=function(){function t(e){(0,n.default)(this,t);this.generateActions("loadCatalogEntriesSuccess","loadCatalogPreviewsSuccess","loadCatalogEntriesFailure","loadCatalogPreviewsFailure")}(0,s.default)(t,[{key:"loadCatalog",value:function e(){var a=this;return function(e){e();a.getLoadCatalogPromise().then(function(e){var t=e.data;a.loadCatalogEntriesSuccess(t);a.loadCatalogPreviews(t)}).catch(function(e){a.loadCatalogEntriesFailure(e)})}}},{key:"loadCatalogPreviews",value:function e(i){var n=this;return function(e){e(i);if(!i.length){l("no catalog entries from section catalog");return}var t=5;var a=(0,o.chunkWithMinimum)(i,t);Promise.all(a.map(n.getLoadPreviewsPromise)).then(function(e){var t=e.map(function(e){return e.data});var a=t.flat();n.loadCatalogPreviewsSuccess(a)}).catch(function(e){n.loadCatalogPreviewsFailure(e)})}}}]);return t}();var d=c;t.default=d;e.exports=t.default},11888:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=a(729);var c=i(a(90));var o=a(12373);var d=(0,r.createLogger)("section-catalog-entry-store","#357");var l=function(){function e(){(0,n.default)(this,e);this.state={isLoaded:false,selectedTag:"tag2",categories:[],entriesByCategory:{},entryPreviews:[]};this.exportPublicMethods({findCatalogEntry:this.findCatalogEntry,isEntryForPreview:this.isEntryForPreview})}(0,s.default)(e,[{key:"onLoadCatalogEntriesSuccess",value:function e(t){var a=(0,o.catalogEntryListToCategories)(t);var i=(0,o.catalogEntryListToGroupingByCategory)(t);this.setState({categories:a,entriesByCategory:i,isLoaded:true})}},{key:"onLoadCatalogEntriesFailure",value:function e(t){d("catalog failed to load entries",t);this.setState({isLoaded:true})}},{key:"normalizeEntryPreviews",value:function e(t){false}},{key:"isEntryForPreview",value:function e(t,a){false}},{key:"onLoadCatalogPreviewsSuccess",value:function e(t){var a=this.normalizeEntryPreviews(t);this.setState({entryPreviews:a})}},{key:"onLoadCatalogPreviewsFailure",value:function e(t){d("catalog failed to load previews",t)}},{key:"getPreviewsForCategory",value:function e(t){var a=this;var i=this.getState(),n=i.entriesByCategory,s=i.entryPreviews;if(!s.length||!Object.keys(n).length||!t)return;var r=n[t];if((0,c.default)(r)){d("Entries are missing for the category",t);return}var o=s.filter(function(t){return r.some(function(e){return a.isEntryForPreview(e,t)})});if(s.length>0&&0===o.length){var l=window.SQUARESPACE_SENTRY;l&&l.withScope(function(e){e.setTag("project","seven_one_catalog");e.setExtra("context",JSON.stringify({entryPreviews:s,previewsForCategorySelected:o}));l.captureMessage("previews for category selected is empty")})}return o}},{key:"findCatalogEntry",value:function e(t){var a=this.getState(),i=a.entriesByCategory;if(!i||!t)return null;return Object.values(i).flat().find(function(e){return!!t(e)})}},{key:"getPreviewEntryForSection",value:function e(t){var a=this.getState(),i=a.entryPreviews;var n=i.find(function(e){return e.id===t});return void 0===n?null:n}}]);return e}();var u=l;t.default=u;e.exports=t.default},11889:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=t.resetGuid=t.getGuid=void 0;var n=i(a(43));var s;var r=function e(){var t=(0,n.default)(window,"Static.SQUARESPACE_CONTEXT.website.id");return"".concat(t,"-").concat(Date.now())};var o=function e(){return s};t.getGuid=o;var l=function e(){s=r()};t.resetGuid=l;var c={getGuid:o,resetGuid:l};t.default=c;l()},11890:function(e,t,a){"use strict";var i=a(4);var s=i(a(2));var n=i(a(8));var r=i(a(9));var o=a(34);var l=a(643);var g=a(794);var c=a(13013);var p=a(12377);var d=function(){function e(){(0,n.default)(this,e);this.bindListeners({onUpdate:[c.LOAD,c.SAVE,c.CREATE]});this.exportPublicMethods({getPageCollectionData:this.getPageCollectionData,getPageCollectionDataList:this.getPageCollectionDataList,savePageCollectionData:this.savePageCollectionData,resetPageCollectionData:this.resetPageCollectionData,createPageCollectionData:this.createPageCollectionData})}(0,r.default)(e,[{key:"getDefaultData",value:function e(){return{layout:p.EmptyLayout(12)}}},{key:"onUpdate",value:function e(t){var a=t.id,i=t.collectionId,n=t.data;n=n||this.getDefaultData();this.setState((0,s.default)({},i,{id:a,data:n}))}},{key:"getPageCollectionData",value:function e(t){var a=this;var i=l(t)?t:t.collectionId;var n=this.getState()[i];if(n)return Promise.resolve(n);return c.load(i).then(function(){return a.getState()[i]})}},{key:"getPageCollectionDataList",value:function e(t){return Promise.all(t.map(this.getPageCollectionData.bind(this)))}},{key:"savePageCollectionData",value:function e(t,a){var i=this;var n=this.getState()[t].id;return c.save(n,t,Object.assign({},a,{data:Object.assign({},a.data,{updatedOn:a.data.updatedOn||this.getState()[t].data.updatedOn})})).then(function(){return i.getState()[t]})}},{key:"resetPageCollectionData",value:function e(t){var a=this;var i=g.getState().markdownMode;var n=p.Layout,s=p.Row,r=p.Column,o=p.HTMLBlock,l=p.MarkdownBlock;var c=i?l(" ","<p> </p>"):o("<p> </p>");var d={layout:n(s(r(12,c)))};var u=this.getState()[t];if(!u)return this.getPageCollectionData(t).then(function(){return a.savePageCollectionData(t,{data:d})});return this.savePageCollectionData(t,{data:d})}},{key:"createPageCollectionData",value:function e(t,a){var i=this;return c.create(t,a).then(function(){return i.getState()[t]})}}]);return e}();e.exports=o.createStore(d,"PageCollectionDataStore")},11891:function(e,t,a){"use strict";var i={IN_FLIGHT:{zIndex:999,boxShadow:"0px 0px 60px rgba(0,0,0,0.2)",position:"absolute"},SIMULATED_POST_FLIGHT:{boxShadow:"none"},TRANSITION_DURATION:.5,MIN_SCALE_FACTOR:.5,SCROLL_SPEED:20,SCROLL_TRIGGER_SIZE:100,USE_ACCELERATED_SCROLL:true};e.exports=i},11892:function(e,t,a){var s=a(100);var r=a(1089);YUI.add("squarespace-damask-instrumentation",function(n){var i=[];i.push({identifier:"back",selector:".back-container"});i.push({identifier:"index-manager",selector:"[data-action]",properties:function(e){return{action:e.getDOMNode().getAttribute("title")}}});i.push({identifier:"save",selector:".changes-workflow-button-wrapper .sqs-button.save"});i.push({identifier:"cancel",selector:".changes-workflow-button-wrapper .sqs-button.revert"});i.push({identifier:"create-page",selector:".sqs-navigation-item-list .add-page",properties:function(e){return{nestedAddPage:!!e.ancestor(".sqs-navigation-item-folder")}}});i.push({identifier:"frame-expand",selector:"html.fullscreen .sqs-node-expander-button"});i.push({identifier:"frame-contract",selector:"html:not(.fullscreen) .sqs-node-expander-button"});i.push({identifier:"support.squarespace.com",selector:'a[href*="support.squarespace.com"]',includeHref:true});i.push({identifier:"help",selector:".link-knowledge-base",includeHref:true});n.namespace("Squarespace.Damask");n.Squarespace.Damask.Instrumentation=n.Base.create("Instrumentation",n.Base,[n.Squarespace.GlobalEventBubbler],{initializer:function(){this.LOG=new n.Squarespace.Debugger({name:"Instrumentation",output:false});this.debouncedTrackEngagementSearch=s(this.trackEngagementSearch,500);this._bindInterfaceListeners();this._bindDialogListeners();this._bindConfirmationDialogListeners();this._bindAccountMenuListeners();this._bindDialogMultiOption();this._bindDialogButton();this._bindCheckoutSubmitter();this._bindDialogFieldError();this._bindSettingsPanelListeners();this._bindDomainListeners();this.bubbleEventsToGlobal()},trackInsertBlock:function(e){try{var t=e.getAttrs();r.createBlock({blockId:t.id,blockType:t.blockTypeName},this.getCollectionFromFrame())}catch(e){}},trackDeleteBlock:function(e){try{var t=e.getAttrs();r.deleteBlock({blockId:t.id,blockType:t.blockTypeName},this.getCollectionFromFrame())}catch(e){}},bindFrame:function(){this._bindAnnotationListeners();this._bindDamaskPreviewFooter();this._bindFrameButtonControllerListeners();this._bindFrameUrlChange();this._bindLayoutEngineInteractions();this._bindBlockInteractions()},trackEngagementSearch:function(e){if(!e)return;try{r.searchForBlock(e,this.getCollectionFromFrame());n.Squarespace.Analytics.trackInternal("engagement_block_search",{searchQuery:e})}catch(e){}},_bindInterfaceListeners:function(){this.get("damask").get("router").onChange(function(e){this.trackInterfaceView({params:e.params})}.bind(this));this.get("damask").get("boundingBox").on("click",function(e){for(var t=0;t<i.length;t++)if(e.target.ancestor(i[t].selector,true)){var a=i[t].properties;"function"===typeof a&&(a=a(e.target));a=a||{};i[t].includeHref&&(a.href=e.target.getAttribute("href"));this.trackInterfaceClick(i[t].identifier,a);break}},this)},_bindDialogListeners:function(){n.Global.on("EditingDialog:show",function(e){var t=e.target.params;var a=t.name;if(!n.Lang.isString(a)||0===a.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:t.name,params:{id:t.id}})},this);n.Global.on("EditingDialog:tab-shown",function(e){var t=e.target.params.name;if(!n.Lang.isString(t)||0===t.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:e.target.params.name,tab:e.name})},this);n.Global.on("EditingDialog:button-click",function(e){var t=e.target.params.name;if(!n.Lang.isString(t)||0===t.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}var a={dialog:e.target.params.name};var i=e.target.getData();["collectionId","id","urlId","title"].forEach(function(e){i.hasOwnProperty(e)&&(a[e]=i[e])});this.trackInterfaceClick("button-"+e.type,a)},this)},_bindAccountMenuListeners:function(){n.Global.on("AccountMenu:visibleChange",function(e){e.newVal?this.trackInterfaceView({dialog:"AccountMenu"}):this.trackInterfaceClick("dialog-close",{dialog:"AccountMenu"})},this)},_bindAnnotationListeners:function(){function t(e){return(e.label||"").toLowerCase().replace(/\s+/,"-")}function a(e){return{label:e.instrumentationDescription}}n.Global.on("annotation-overlay-button-click",function(e){this.trackSiteClick("annotation-"+t(e),a(e))},this)},_bindFrameButtonControllerListeners:function(){n.Global.on("FrameButtonController:button-click",function(e){this.trackInterfaceClick("frame-"+e.type)},this)},_bindFrameUrlChange:function(){this.get("damask").get("previewFrame").after("urlChange",function(e){this.trackSiteView()},this)},_bindDialogMultiOption:function(){n.Global.on("multiOption:option-click",function(e){var t=e.target.get("dialog");this.trackInterfaceClick(e.option,{dialog:t?t.params.name:""})},this)},_bindDialogButton:function(){n.Global.on("button:button-click",function(e){var t=e.target.get("strings.text")||e.target.get("strings.title")||"";var a=e.target.get("name")||"";var i=e.target.get("href")||"";if(!t&&!a&&!i){this.LOG.warn("Button widget does not have enough information to log. Instrumentation attempt failed.");return}this.trackInterfaceClick("button-click",{text:t,name:a,href:i})},this)},_bindCheckoutSubmitter:function(){n.Global.on("*:submit",function(e){var t=e.target.get("isCheckoutSubmitter");var a=e.target.get("submitButtonLabel")||"";if(!n.Lang.isValue(t)||!t)return;if(!n.Lang.isString(a)||0===a.length){this.LOG.warn("CheckoutSubmitter was shown but it did not have a valid button label! Instrumentation attempt failed.");return}this.trackInterfaceClick("checkout-submit",{label:a})},this)},_bindDialogFieldError:function(){n.Global.on("*:error-shown",function(e){var t=e.target.get("name");var a=e.target.get("strings")?e.target.get("strings.title")||e.target.get("strings.placeholder"):"";var i=e.target.get("data")||"";var n=e.message||"";t||a||n||this.LOG.warn("DialogField Error was shown but it did not have enough information. Instrumentation attempt failed.");this.trackInterfaceView({dialog:t||a,value:i,error:n})},this)},_bindSettingsPanelListeners:function(){n.Global.on("*:saved-changes",function(e){var t;e.target.getChangedFields&&(t=e.target.getChangedFields());this.trackInterfaceClick("save",{fields:t})},this);n.Global.on("*:revert-changes",function(e){var t;e.target.getChangedFields&&(t=e.target.getChangedFields());this.trackInterfaceClick("cancel",{fields:t})},this)},_bindBlockInteractions:function(){n.Array.each([{global:"Block:create",identifier:"block-create"},{global:"Block:drop",identifier:"block-drop"},{global:"Block:remove",identifier:"block-remove"}],function(t){n.Global.on(t.global,function(e){this[e.backend?"trackInterfaceClick":"trackSiteClick"](t.identifier,{blockType:e.blockType,region:e.region})},this)},this)},_bindLayoutEngineInteractions:function(){this.publishEventsForBubbling();n.Global.on("LayoutInsertPoint:click",function(e){this[e.backend?"trackInterfaceClick":"trackSiteClick"]("layout-insert-point")},this);n.Global.on("layout-engine:block-menu-search-query-change",function(e){this.debouncedTrackEngagementSearch(e.query)},this);n.Global.on("layout-engine:block-menu-search-query-enter",function(e){this.debouncedTrackEngagementSearch.cancel();this.trackEngagementSearch(e.query)},this);n.Global.on("layout-engine:open-block-menu",function(){r.openBlockMenu(this.getCollectionFromFrame())},this);n.Global.on("layout-engine:insert-block",this.trackInsertBlock,this);n.Global.on("layout-engine:delete-block",this.trackDeleteBlock,this)},_bindConfirmationDialogListeners:function(){var a=["show"];var i=["confirm","reject","cancel"];n.Array.each([].concat(a).concat(i),function(t){n.Global.on("confirmation:"+t,function(e){a.includes(t)?this.trackInterfaceView({dialog:e.target.get("instrumentationTitle")||e.target.get("strings.title")}):i.includes(t)&&this.trackInterfaceClick(t,{dialog:e.target.get("strings.title")})},this)},this)},_bindDamaskPreviewFooter:function(){n.Global.on("DamaskPreviewFooter:foundYInFrameChange",function(e){e.newVal&&this.trackInterfaceView({widget:"disable-user-scripts"})},this);n.Global.on(["DamaskPreviewFooter:enableScriptsInPreview","DamaskPreviewFooter:disableScriptsInPreview"],function(e){var t=e.type.split(":")[1];this.trackInterfaceClick(t)},this)},_bindDomainListeners:function(){var e={"domain:search":"domain-search","domain:add-to-cart":"domain-add-to-cart","domain:remove-from-cart":"domain-remove-from-cart","domain:select-provider":"domain-select-provider","domain:purchase-complete":"domain-purchase-complete","domain:lock-toggle":"domain-lock-toggle","domain:www-toggle":"domain-www-toggle"};n.Object.each(e,function(t,e){n.Global.on(e,function(e){this.trackInterfaceClick(t,e||{})},this)},this)},trackSiteClick:function(e,t){this._track("site_click",n.merge(t,{identifier:e,frameUrl:this.getUrlFromFrame()},this.getPageInformation()))},trackSiteView:function(e){this._track("site_view",n.merge(e,this.getPageInformation()))},trackInterfaceView:function(e){e=e||{};var t=this.getSanitizedInterfaceUrl();var a=this.getCollectionByUrl();if(a){e.pageType=n.Squarespace.ContentCollectionUtils.getIdentifierForCollection(a);e.urlId=a.get("urlId");t="/pages/"}if(this._lastUrl===t&&!n.Lang.isString(e.dialog)&&!n.Lang.isString(e.widget))return;this._track("interface_view",n.merge(e,{url:t}));this._lastUrl=t},trackInterfaceClick:function(e,t){this._track("interface_click",n.merge(t,{identifier:e,url:this.getSanitizedInterfaceUrl()}))},_track:function(e,t){this.LOG.info(e,JSON.stringify(t));n.Squarespace.Analytics.trackInternal(e,t)},getPageInformation:function(){var e={};var t=this.getPageTypeFromFrame();n.Lang.isValue(t)&&(e.pageType=t);return e},getCollectionIdByUrl:function(){var e=this.getSanitizedInterfaceUrl();if(e.startsWith("/pages/"))return e.split("/").slice(-1)[0];return null},getCollectionByUrl:function(){var e=this.getCollectionIdByUrl();if(e)return n.Squarespace.ContentCollectionCache.getById(e);return null},getCollectionFromFrame:function(){var e=this.get("damask").get("previewFrame").get("contentBridge").get("controller");if(!e)return null;var t=e.get("contextCollection");return t||null},getPageTypeFromFrame:function(){var e=this.getCollectionFromFrame();return e?n.Squarespace.ContentCollectionUtils.getIdentifierForCollection(e):null},getSanitizedInterfaceUrl:function(){return this.get("damask").get("router").getCurrentLocation().state.appUrl},getUrlFromFrame:function(){var e=this.get("damask").get("previewFrame").get("url");return e}},{ATTRS:{damask:{},previewFrame:{}}})},"1.0",{requires:["base","@sqs/layout-engine/events","squarespace-content-collection-utils","squarespace-debugger","squarespace-global-event-bubbler","squarespace-util"]})},11893:function(e,t,a){var n=a(128);var s=a(24).t;var r=a(810);var o=a(1114).getLabelForProductLine;YUI.add("squarespace-damask-modal-manager",function(a){var i=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","currentTermsOfServiceVersion"]);a.namespace("Squarespace.Damask.Modal");a.Squarespace.Damask.Modal.Manager=a.Base.create("modalManager",a.Base,[],{render:function(){this._showTips();var e=new a.Squarespace.Models.ConnectedAccounts.loadFromStore;e&&this._showUnauthorizedSocialAccountAlert(e);this._renderBillingSummary()},_renderUpdateTOS:function(){var e=this.get("siteContext.website.siteStatus.value");if(this._accountNotRemovedOrExpired(e)){var t=new a.Squarespace.Widgets.TermsOfService({websiteSettings:this.get("siteContext.websiteSettings"),mostRecentToSVersion:i});t.on("destroy",function(){this._showTips()},this);t.render()}},_showUnauthorizedSocialAccountAlert:function(e){var t=a.Array.some(e,function(e){return e.accountState===a.Squarespace.AccountStates.UNAUTHORIZED},this);t&&new a.Squarespace.Widgets.Confirmation({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.confirm":s("Reconnect Accounts"),"strings.cancel":s("Dismiss"),"strings.title":s("Connected Accounts Deactivated"),"strings.message":s("One or more of your Connected Accounts has been deactivated. You must reconnect them for continued usage.")}).on("confirm",function(){a.Squarespace.Singletons.Location.go("/settings/connected-accounts")})},_showTips:function(){this.hasCompletedMemberTutorial("welcome")||a.later(200,this,this._renderMemberTutorialWelcome)},_renderMemberTutorialWelcome:function(){this._markMemberTutorialCompleted("welcome")},showUpdateTOS:function(){return!this.hasAgreedToMostRecentToS()&&this.canAgreeToToS()},canAgreeToToS:function(){return a.Squarespace.UtilAuthenticated.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_ACCEPT_TOS)},hasAgreedToMostRecentToS:function(){return!a.Lang.isValue(i)||this.get("websiteSettings").get("lastAgreedTermsOfService")===i},_isStatus:function(e){var t=this.get("siteContext.website.siteStatus.value");return e===t},hasCompletedMemberTutorial:function(e){return a.Object.getValue(this.get("siteContext.authenticatedAccount.tutorialsCompleted"),e)},hasCompletedWebsiteTutorial:function(e){return a.Object.getValue(this.get("siteContext.websiteSettings.tutorialsCompleted"),e)},_markWebsiteTutorialComplete:function(e){var t=this.get("siteContext.websiteSettings");t.tutorialsCompleted[e]=true;a.Data.post({url:"/api/config/MarkWebsiteTutorialCompleted",data:{tutorial:e}},this)},_markMemberTutorialCompleted:function(e){a.Data.post({url:"/api/config/MarkMemberTutorialCompleted",json:true,data:{tutorial:e}},this)},_accountNotRemovedOrExpired:function(e){return e!==a.Squarespace.StatusConstants.EXPIRED&&e!==a.Squarespace.StatusConstants.REMOVED},_renderBillingSummary:function(){if(a.Lang.isValue(n.get("billingChangeSummary"))){var e=JSON.parse(n.get("billingChangeSummary"));this._isStatus(a.Squarespace.StatusConstants.EXPIRED)?this.set("cancelled",true):this._showBillingChangeSummary(e);n.set("billingChangeSummary","",{expires:new Date(0)})}},_showBillingChangeSummary:function(e){var t=this.get("strings.periodChangeConfirmationMessage");e.planChange&&(t=this.get("strings.planChangeConfirmationMessage"));if(e.productLineChange){t=this.get("strings.productLineChangeConfirmationMessage");e.prevProductLineLabel=o(e.prevProductLine);e.newProductLineLabel=o(e.newProductLine)}e.nextBillDate=r(e.nextBillDate);new a.Squarespace.Widgets.Alert({"strings.title":s("Transaction Complete"),"strings.message":a.Lang.sub(t,e),position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,showOverlay:true}).show()}},{ATTRS:{siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},damask:{},cancelled:{value:false},strings:{value:{productLineChangeConfirmationMessage:s('You\'ve changed from <strong data-test="billing-cycle-confirm-change__prevProductLine">{prevProductLineLabel}: {prevPlanName} plan</strong> to <strong data-test="billing-cycle-confirm-change__newProductLine">{newProductLineLabel}: {newPlanName} plan</strong>. Your website will renew on {nextBillDate}.'),periodChangeConfirmationMessage:s('You\'ve changed your billing cycle from <strong data-test="billing-cycle-confirm-change__prevPeriodName">{prevPeriodName}</strong> to <strong data-test="billing-cycle-confirm-change__newPeriodName">{newPeriodName}</strong>. Your website will renew on {nextBillDate}.'),planChangeConfirmationMessage:s('You\'ve changed from the <strong data-test="confirm-plan-change__prevPlanName">{prevPlanName} plan</strong> to the <strong data-test="confirm-plan-change__newPlanName">{newPlanName} plan</strong>.'),websiteCanceled:s("We have canceled your website subscription. You can get all of your content back at any time by subscribing again.")}},websiteSettings:{valueFn:function(){return this.get("siteContext.websiteSettings")},setter:function(e){if(!a.instanceOf(e,a.Squarespace.Models.WebsiteSettings))return new a.Squarespace.Models.WebsiteSettings(e);return e}}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-enum","squarespace-models-website-settings","squarespace-singletons-location","squarespace-ss-widget","squarespace-terms-of-service-overlay","squarespace-util","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},11894:function(e,t,a){var n=a(24).t;var s=a(11551).isYuiClassEnabled;YUI.add("squarespace-terms-of-service-overlay",function(i){if(s("termsOfServiceOverlay"))var t=i.namespace("Squarespace.Widgets").TermsOfService=i.Base.create("termsOfServiceOverlay",i.Squarespace.Widgets.SSWidget,[i.Overlay],{renderUI:function(){t.superclass.renderUI.call(this);this._animateIn()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");i.Squarespace.EscManager&&this.after("visibleChange",this._toggleEscapeManager,this);i.delegate("click",this._acceptNewToS,e,".button.accept",this);i.delegate("click",this._rejectNewToS,e,".button.cancel, .close-button",this);this.after("frameContentChange",this._updateFrameContent,this)},_toggleEscapeManager:function(){this.get("visible")?i.Squarespace.EscManager.addTarget(this):i.Squarespace.EscManager.removeTarget(this)},_animateIn:function(){this.get("boundingBox").setStyles({opacity:1,transform:"scale(1)"})},_animateOut:function(){var e=new i.Anim({node:this.get("boundingBox"),duration:.3,easing:i.Easing.easeOutStrong,to:{opacity:0,transform:"scale(0.94)"},from:{opacity:1,transform:"scale(1)"}});this._anims.add(e);e.after("end",function(){this.set("visible",false);this.destroy()},this);e.run()},_acceptNewToS:function(e){e.halt();this._setUserToS()},_setUserToS:function(){var e=this.get("websiteSettings");var t=e.get("lastAgreedTermsOfService");var a=this.get("mostRecentToSVersion");e.set("lastAgreedTermsOfService",this.get("mostRecentToSVersion"));e.save(i.bind(function(){i.Squarespace.Analytics.trackInternal("engagement_terms_of_service_updated",{oldTOSVersion:t,agreedTOSVersion:a});this._animateOut()},this))},_rejectNewToS:function(e){e.preventDefault();var t=this.get("websiteSettings").get("mostRecentToSVersion");new i.Squarespace.Widgets.Confirmation({"strings.title":n("Reject Terms of Servce"),"strings.message":n("Are you sure you wish to reject the Terms of Service? You will not be able to edit your website."),"strings.confirm":n("Reject Terms of Service")}).on("confirm",function(){i.Squarespace.Analytics.trackInternal("engagement_terms_of_service_rejected",{rejectedVersion:t});window.location="http://www.squarespace.com"},this)}},{HANDLEBARS_TEMPLATE:"terms-of-service-overlay.html",CSS_PREFIX:"sqs-terms-of-service-overlay",ATTRS:{websiteSettings:{setter:function(e){if(!i.instanceOf(e,i.Squarespace.Models.WebsiteSettings))return new i.Squarespace.Models.WebsiteSettings(e);return e}},mostRecentToSVersion:{},endPoint:{value:"/api/config/acceptTos"},tosURL:{value:"https://www.squarespace.com/terms-of-service"},strings:{value:{title:n("Updated Terms of Service"),accept:n("I accept, continue to my account."),cancel:n("Cancel")}},iframeHeight:{value:400},align:{value:{node:null,points:[i.WidgetPositionAlign.TL,i.WidgetPositionAlign.TL]}},zIndex:{value:300001}}})},"1.0",{requires:["base","overlay","squarespace-escmanager","squarespace-models-website-settings","squarespace-ss-widget","squarespace-terms-of-service-overlay-template","squarespace-util","squarespace-widgets-confirmation"]})},11895:function(e,t){YUI.add("squarespace-terms-of-service-overlay-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["terms-of-service-overlay.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l="function",c=this.escapeExpression;s+='<div class="overlay"></div>\n<div class="content">\n  <header class=\'title\'>\n    <h1>'+c((r=(r=t.strings,null==r||false===r?r:r.title),typeof r===l?r.apply(t):r))+'</h1>\n  </header>\n  <section>\n    <p>We have recently updated our Terms of Service. Please review them below.</p>\n    <div class=\'tos-frame\'>\n      <iframe name="tos-frame-iframe" src="';if(o=a.tosURL)o=o.call(t,{hash:{},data:n});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}s+=c(o)+'?source=in-app" class="terms-of-service-frame" seamless="true" height="';if(o=a.iframeHeight)o=o.call(t,{hash:{},data:n});else{o=t.iframeHeight;o=typeof o===l?o.apply(t):o}s+=c(o)+'" width="100%">\n        <a href="';if(o=a.tosURL)o=o.call(t,{hash:{},data:n});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}s+=c(o)+'" target="_blank">Squarespace Terms of Service</a>\n      </iframe>\n    </div>\n  <p>\n  By clicking \'I accept\' below you are agreeing to the <a href="';if(o=a.tosURL)o=o.call(t,{hash:{},data:n});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}s+=c(o)+"\" target=\"_blank\">Squarespace Terms of Service</a>.\n  </p>\n  <div class='buttons'>\n      <div class='control button cancel'>\n        <a class='cancel' href='http://www.squarespace.com/'>"+c((r=(r=t.strings,null==r||false===r?r:r.cancel),typeof r===l?r.apply(t):r))+"</a>\n      </div>\n      <div class='control button primary accept'>\n        <a class='accept' href='#'>"+c((r=(r=t.strings,null==r||false===r?r:r.accept),typeof r===l?r.apply(t):r))+"</a>\n      </div>\n  </div>\n  </section>\n</div>\n";return s})})();var t="terms-of-service-overlay.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},11896:function(e,t,a){var o=a(3476);var i=a(12382);var n=a(729);var l=n.createLogger("content-bridge","hotpink");var c=n.createWarningLogger("content-bridge");var d=a(2201);YUI.add("squarespace-damask-preview-content-bridge",function(r){r.namespace("Squarespace.Damask.Preview");var s=r.Squarespace.Damask.Preview.ContentBridge=r.Base.create("contentBridge",r.Base,[],{initializer:function(){this.LOG=new r.Squarespace.Debugger({name:this.name,output:false});this._events={controller:[],contentItem:[],contentItemEditor:[]};this._publishEvents()},destructor:function(){this._cleanup()},_detachEventsFrom:function(e){while(e.length){var t=e.pop();try{t.listener.detach()}catch(e){false}}},_unbindContentItemEvents:function(){this._detachEventsFrom(this._events.contentItem)},_unbindContentItemEditorEvents:function(){this._detachEventsFrom(this._events.contentItemEditor)},_publishEvents:function(){this.publish("cmcStateChange");this.publish("cmcEditableChange");this.publish("cmcSave");this.publish("cmcDiscard");this.publish("contentItemSave");this.publish("collectionSave")},changeContent:function(e){this._cleanup();this.set("staticContext",e.Static);var t=e.Y.Squarespace.Frontend;var a=t?t.ContentModeController:null;if(a){this.set("controller",a);this._bindControllerEvents();this._updateCollection();this._updateContentItem()}},saveAnnotationControllerChanges:function(){return this.get("controller").saveAnnotationControllerChanges()},revertAnnotationControllerChanges:function(){this.get("controller").revertAnnotationControllerChanges()},getContentItemFieldsToHide:function(){return this.get("controller").getDamaskHideFields()},showContentItemEditor:function(t){if(!r.Lang.isValue(t)){c("_showContentItemEditor called but no contentItem found.");return false}var e=this.get("id");t.detach(e+"|*");var a=t.on(e+"|save",function(e){if(r.Lang.isValue(r.Object.getValue(e,"options.headers.X-AutoSave".split("."))))return;var t=this.get("collection").get("fullUrl");var a=r.Object.getValue(e,["parsed","urlId"]);var i=t+a;this.fire("contentItemSave",{url:i})},this);this._events.contentItemEditor.push({name:"saveContentItem",listener:a});t.load(r.bind(function(){var e=this._initActiveContentItem(t);this._events.contentItemEditor.push({name:"deactivateEditorBeforeDestroy",listener:e.before("destroy",this._deactivateContentItemEditor,this)});e.show()},this))},_cleanup:function(){try{this._unbindControllerEvents();this._unbindContentItemEvents();this._unbindContentItemEditorEvents();this.setAttrs({staticContext:null,controller:null,contentItem:null,collection:null})}catch(e){false}},_bindControllerEvents:function(){this._unbindControllerEvents();var e=this.get("controller");if(!r.Lang.isValue(e)){c("Could not find the ContentModeController in the frame!");return}var t=this.get("cmcVisible");l("Setting controllers visible based on initial cmcVisible",{cmcVisible:t});e.set("visible",t);e.getTargets().includes(this)||e.addTarget(this);var a=this.get("id");this._events.controller.push({name:"controllerCmcVisibleChange",listener:this.after("cmcVisibleChange",function(e){l("Updating controllers visible based on cmcVisibleChange",{cmcVisible:e.newVal});this.get("controller").set("visible",e.newVal)})},{name:"controllerEditableChange",listener:e.after(a+"|editableChange",function(e){this.fire("cmcEditableChange",e)},this)},{name:"controllerDirtyEditableChange",listener:e.after([a+"|dirtyChange",a+"|editableChange"],function(e){this.set("editLabel",this.get("controller").getActiveAnnotationControllerLabel());this.fire("cmcStateChange",e)},this)},{name:"controllerRequestSaveChanges",listener:e.on(a+"|*:request-save-changes",function(e){var t={};e.model&&(t.model=e.model);this.fire("cmcSave",t)},this)},{name:"controllerRequestDiscardChanges",listener:e.on(a+"|*:request-discard-changes",function(){this.fire("cmcDiscard")},this)},{name:"controllerContextCollectionChange",listener:e.on(a+"|contextCollectionChange",function(e){e.newVal?this.set("collection",e.newVal):this._updateCollection()},this)})},_unbindControllerEvents:function e(){this._detachEventsFrom(this._events.controller);var t=this.get("controller");r.Lang.isValue(t)&&t.removeTarget(this)},_bindContentItemEditorEvents:function(){this._events.contentItemEditor.push({name:"showContentItemEditor",listener:this.get("controller").on("*:showContentItemEditor",function(e){if(!r.Lang.isString(e.itemId)||!r.Lang.isString(e.collectionId)){c("showContentItemEditor fired without a itemId or collectionId.");return}this.showContentItemEditor(new r.Squarespace.Models.ContentItem({id:e.itemId,collectionId:e.collectionId}))},this)})},_updateCollection:function(){var e=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]);var t=r.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER;if(!e||!e.includes(t))return;var a=null;var i=r.Squarespace.ContentCollectionCache;var n=this._getCollectionFromController();r.Lang.isValue(n)||(n=this._getCollectionFromContext());a=i.getCollectionFromData(n);a&&a.load(function(){if(!r.Env)return;r.bind(this._bindContentItemEditorEvents,this)}.bind(this));this.set("collection",a)},_getCollectionFromController:function(){var e=this.get("controller");if(!r.Lang.isValue(e))return null;var t=e.get("contextCollection");if(!r.Lang.isValue(t))return null;return t.toJSON()},_getCollectionFromContext:function(){var e=this.get("staticContext.SQUARESPACE_CONTEXT.collection");if(!r.Lang.isObject(e))return null;return i(e)},_updateContentItem:function(){this._unbindContentItemEvents();var e=this.get("staticContext.SQUARESPACE_CONTEXT.item");if(!r.Lang.isValue(e)||!r.Lang.isValue(e.id))return;var t=this.get("collection");if(!r.Lang.isValue(t))return;this.set("contentItem",t.items.getById(e.id)||null);this._bindContentItemEvents()},_bindContentItemEvents:function(){var t=this.get("collection");if(!r.Lang.isValue(t))return;this._events.contentItem.push({name:"fireOnRemoved",listener:t.items.on("remove",function(e){this.get("contentItem")===e.model&&this.fire("contentItemRemove",{collectionUrl:t.get("urlId")})},this)},{name:"fireOnBulkRemove",listener:t.items.on("bulk-remove",function(e){-1!==e.target.indexOf(this.get("contentItem"))&&this.fire("contentItemRemove",{collectionUrl:t.get("urlId")})})})},_initActiveContentItem:function(e){return s.buildContentItemEditor(e,this.get("contentBox"),this.getContentItemFieldsToHide())},ensureCollectionInStackedIndexIsOnScreen:function(e,t,a){this.get("controller")&&this.get("controller").ensureCollectionInStackedIndexIsOnScreen(e,t,a)},getCollectionUrl:function(e){return s.getCollectionUrl(e)}},{getCollectionUrl:function(e){var t="/"+e.get("urlId");var a=s.getIndexCollectionUrl(e);r.Lang.isString(a)&&e.get("enabled")&&(t=a);a||e.get("id")!==d.getHomepageCollectionId()||(t="/");return t},_getIndexCollectionHashUrl:function(e){if(!r.Squarespace.Navigation.ListUtils.isCollectionInIndex(e))return null;var t=r.Squarespace.Navigation.ListUtils.getParentCollection(e);var a=s.getCollectionUrl(t);"/"===a&&(a="");var i=t?t.getTemplateConfiguration().get("indexCollectionHashUrlTemplate"):null;if(!i)return a+"/#/"+e.get("urlId");var n=r.Squarespace.Lang.sub(i,{collection:e.toJSON()});return a+"/"+n},getIndexCollectionUrl:function(e){var t=this._getCollectionUrlFromNavigation(e);var a=r.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(e);if(a&&a.getTemplateConfiguration().get("indexType")===o.FULL_URL)return"/"+e.get("urlId");if(!r.Lang.isValue(t))return this._getIndexCollectionHashUrl(e);var i=r.Squarespace.Lang.sub(t,{collection:e.toJSON()});var n=s.getCollectionUrl(a);return n+i},_getCollectionUrlFromNavigation:function(e){var t=r.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!r.Lang.isValue(t))return null;var a=t.getFolderItemList();if(!r.Lang.isValue(a))return null;var i=a.getNavigationItem();if(!r.Lang.isValue(i))return null;var n=i.get("collection");if(!r.Lang.isValue(n))return null;var s=n.getTemplateConfiguration();if(!r.Lang.isValue(s))return null;return s.get("indexConfiguration.collectionUrl")},buildContentItemEditor:function(e,t,a){var i={};var n=r.Squarespace.ContentItemEditorFactory.getEditor(e,i);return new n({model:e,render:t,hideFields:a})},ATTRS:{staticContext:{},controller:{},collection:{},contentItem:{},cmcVisible:{value:true,validator:r.Squarespace.AttrValidators.isBoolean},editLabel:{value:"",validator:r.Squarespace.AttrValidators.isNullOrString},isEditing:{getter:function(){var e=this.get("controller");if(!r.Lang.isValue(e))return false;return!!(e.get("dirty")||e.get("editable"))}},dirty:{getter:function(){var e=this.get("controller");return r.Lang.isValue(e)&&e.get("dirty")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-manager-navigation-ui-utils","squarespace-debugger","squarespace-enum","squarespace-fluent-confirmation","squarespace-model-editor","squarespace-models-content-item","squarespace-models-template-navigation-list","squarespace-util"]})},11897:function(e,t,a){var s=a(24).t;var d=a(2201);var u=a(21);var g=a(1089);var p=a(229);YUI.add("squarespace-content-manager-navigation-ui-utils",function(o){var l=function(e){new o.Squarespace.Widgets.Alert({"strings.title":e.title,"strings.message":e.msg})};var c={HOMEPAGE:{title:s("Cannot Delete Homepage"),msg:s("This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting.")},TEMPLATE:{title:s("Cannot Delete Template Page"),msg:s("This page is a page that is provided by the template you are currently using. It cannot be removed while you are using this template.")}};o.namespace("Squarespace").NavigationUIUtils={deleteNavigationItem:function(i,n,e){if(!i)throw new Error("Unknown entity trying to be deleted.");var s=o.Lang.isValue(i.get("collectionId"));var r=!i.get("children").isEmpty();var t=i.get("collection");if(s){if(i.get("collectionId")===d.getHomepageCollectionId()){l(c.HOMEPAGE);t.get("isDemoCollection")&&g.deleteDemoCollectionErrorModalShown(t.get("typeName"));return o.Promise.reject(c.HOMEPAGE.title)}if(t.get("type")===p.TEMPLATE_PAGE){l(c.TEMPLATE);return o.Promise.reject(c.TEMPLATE.title)}}var a=function(){t.get("isDemoCollection")&&g.userDeleteDemoCollection(t.get("typeName"));return new o.Promise(function(a,e){var t=new o.Parallel;s&&r&&i.get("children").each(function(e){e.destroy({remove:true},t.add(u))});i.destroy(o.merge({remove:true},n),t.add(u));t.done(function e(t){a(i,t)})})};if(e)return a();return this.showDeleteConfirmation().then(a)},showDeleteConfirmation:function(e,t){var a;var i;if(t&&t.get("isDemoCollection")){a=s("Remove Example Page");i=s("Are you sure you wish to remove this example page?")}else{var n=o.Escape.html(t&&t.get("navigationTitle")||e&&e.get("title")||s("this item"));a=s("Delete {item}",{item:n});i=s("Are you sure you want to delete <strong>{item}</strong>?",{item:n})}return o.Squarespace.Fluent.Confirm({"strings.title":a,"strings.message":i,"strings.confirm":s("Delete"),className:"delete-collection"})},deleteCollection:function(e,t,a){var i=e.get("id");var n=o.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(i);if(!n)throw new Error("Could not find the navigation item for collection #"+i);return this.deleteNavigationItem(n,t,a)}}},"1.0",{requires:["base","promise","squarespace-fluent-confirmation","squarespace-models-template-navigation-list","squarespace-widgets-alert"]})},11898:function(e,t,a){var i=a(5513);var n=a(472);YUI.add("squarespace-damask-preview-frame",function(e){e.namespace("Squarespace.Damask.Preview");var t=n.isV8()?e.Squarespace.Damask.Preview.FrameV8:e.Squarespace.Damask.Preview.FrameV6;e.Squarespace.Damask.Preview.Frame=e.Base.create("preview",t,[],{},{CSS_PREFIX:"sqs-preview-frame",EVENTS:i,ATTRS:{contentBridge:{validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Damask.Preview.ContentBridge)},contentWindow:{getter:function(){if(e.Lang.isValue(this.iframe))return this.iframe.get("contentWindow")}},dirty:{value:false},editable:{value:true},frameLocked:{value:0},loading:{value:true},refreshing:{value:false},url:{value:"/"},pathname:{getter:function(){return this.get("url").split("#")[0]}},router:{},websiteOverlaysManager:{getter:"getWebsiteOverlaysManager"},frameless:{value:false}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-commerce-email-preview","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame-base-v6","squarespace-damask-preview-frame-base-v8","squarespace-damask-preview-footer","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-singletons-location","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-share-buttons","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation","widget-child","widget-parent"]})},11899:function(e,t,a){var o=a(34);var l=a(1028);var c=a(11900);YUI.add("squarespace-damask-announcement-bar-bridge",function(t){t.namespace("Squarespace.Damask.Preview");var a=null;var e=new l(o);var i={};var n={};var s={};function r(t){return function(e){t(e.newVal)}}e.addActionListener(c.ADD_ON_VISIBILITY_CHANGED_HANDLER,function(e){n[e.key]||(n[e.key]=e.callback);if(a){false;s[e.key]=a.after("AnnouncementBar:visibleChange",r(e.callback))}else{false;i[e.key]=e.callback}});e.addActionListener(c.REMOVE_ON_VISIBILITY_CHANGED_HANDLER,function(e){if(a&&s[e]){a.detach(s[e]);delete s[e]}else delete i[e];delete n[e]});t.Squarespace.Damask.Preview.AnnouncementBarBridge=t.Base.create("announcementBarBridge",t.Base,[],{initializer:function(){this._addActionListeners()},destructor:function(){t.Array.invoke(this.eventListeners,"detach");this.eventListeners=[];this.actionListener.removeAllActionListeners();this.actionListener=null},_notifyBar:function(e,t){if(!a)return;a.fire(e,t)},_addActionListeners:function(){this.eventListeners=[t.Global.on(t.Squarespace.Widgets.AnnouncementBar.EVENTS.READY,function(e,t){a&&Object.keys(s).forEach(function(e){s[e].detach()});a=e.bar;Object.keys(n).forEach(function(e){s[e]=a.after("AnnouncementBar:visibleChange",r(n[e]));delete i[e]})})];this.actionListener=new l(o);this.actionListener.addActionListener(c.RESET_VISIBILITY,function(){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.RESET_VISIBILITY)}.bind(this));this.actionListener.addActionListener(c.UPDATE,function(e){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.UPDATE,e)}.bind(this));this.actionListener.addActionListener(c.CLOSE,function(){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.CLOSE)}.bind(this))}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-announcement-bar"]})},11900:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(34);var o=function(){function e(){(0,n.default)(this,e);this.generateActions("closed","close","resetVisibility","update","removeOnVisibilityChangedHandler")}(0,s.default)(e,[{key:"addOnVisibilityChangedHandler",value:function e(t,a){return{key:t,callback:a}}}]);return e}();e.exports=r.createActions(o)},11901:function(e,t,a){var s=a(0);var r=a(60);var l=a(43);var c=a(24).t;var d=a(11661).default;var n=a(5583);var u=a(1028);var g=a(34);var p=a(651);var h=a(1306);var f=a(514);var m=a(13039);var v=a(5513);var b=a(11622);var y=a(5581);var S=a(757);var q=a(1732);var _=a(595);var i=a(729);var C=a(318);var E=a(522);var k=a(425);var w=a(1714);var T=i.createLogger("frame-v6","hotpink");YUI.add("squarespace-damask-preview-frame-base-v6",function(o){var e=new u(g);var t={};var a={};var i=null;e.addActionListener(h.ADD_LOAD_HANDLER,function(e){if(i){false;a[e.key]=i.on(v.LOAD,e.callback)}else{false;t[e.key]=e.callback}});e.addActionListener(h.REMOVE_LOAD_HANDLER,function(e){if(i){if(a[e]){i.detach(a[e]);delete a[e]}}else delete t[e]});o.namespace("Squarespace.Damask.Preview").FrameV6=o.Base.create("preview-base-v6",o.Squarespace.Damask.Preview.FrameBase,[],{initializer:function(){this._bridgeEvents=[];this.publish(v.LOAD);this.publish(v.FRAME_SAVE_ENTER,{broadcast:2,emitFacade:true});this.publish(v.FRAME_SAVE_EXIT,{broadcast:2,emitFacade:true});this.publish(v.FRAME_EDITING_CHANGE);this._frameFooter=new o.Squarespace.Damask.Preview.Footer({frame:this,contentBridge:this.get("contentBridge")});this.addActionListeners();new o.Squarespace.Damask.Preview.AnnouncementBarBridge},destructor:function(){this._retuckTimeout&&this._retuckTimeout.cancel();this.actionListener.removeAllActionListeners();this.actionListener=null;this._unbindBridgeEvents();i=null;Object.keys(a).forEach(function(e){this.detach(a[e]);delete a[e]}.bind(this));this.confirmationMountNode&&this.confirmationMountNode.remove()},renderUI:function(){var e=this.get("contentBox");this._frameFooter.render(e)},bindUI:function(){var e=this.get("router");e.onBeforeUnload(function(){if(this.get("dirty"))return c("You have unsaved changes.")}.bind(this));e.onBeforeChange(function e(t,a){var i=!!t.state;if(!i||!this.get("dirty")){a();return}var n=t.state.frameUrl!==this.get("url");if(n){this._showHasChangesConfirmation(function e(){this._discardChanges();a()}.bind(this),function e(){a(false)});return}a()}.bind(this));this.after("urlChange",function(e){if("onIframeLoaded"===e.source){this.get("router").pushFrameUrl(e.newVal);return}this._syncFrameUrl()});this.after("editableChange",function(e){this.get("contentBridge").set("cmcVisible",e.newVal)},this);this.after("loadingChange",this._syncLoadingState,this);this.on("*:refresh",function(e){this.requestRefresh({reason:"heard *:refresh",e:e})},this);this.on(v.FRAME_SAVE_ENTER,this._frameEnterSave,this);this.on(v.FRAME_SAVE_EXIT,this._frameExitSave,this);this.on("framelessChange",this._syncFrameUrl,this);this.on(v.LOAD,function(e){e.refresh&&w.measure("frame-refresh")});this._bindFrameFooter()},syncUI:function(){this._syncFrameUrl();this._syncFrameFooterVisibility()},addActionListeners:function(){i=this;Object.keys(t).forEach(function(e){a[e]=this.on(v.LOAD,t[e]);delete t[e]}.bind(this));this.actionListener=new u(g);this.actionListener.addActionListener(h.REFRESH,this.requestRefresh.bind(this));this.actionListener.addActionListener(h.SET_URL,function e(t){setTimeout(this.setUrlOrRequestRefresh.bind(this,t),0)}.bind(this));this.actionListener.addActionListener(h.DISABLE_EDITING,function(){this.set("editable",false)}.bind(this));this.actionListener.addActionListener(h.ENABLE_EDITING,function(){this.set("editable",true)}.bind(this));this.actionListener.addActionListener(h.IF_LOADED,function(e){i&&e()});this.actionListener.addActionListener(h.DISABLE_LINKS,function(){this.set("disableLinks",true)}.bind(this));this.actionListener.addActionListener(h.ENABLE_LINKS,function(){this.set("disableLinks",false)}.bind(this));this.actionListener.addActionListener(b.UPDATE,function(e){var t=this.getWebsiteOverlaysManager();if(!t)return;t.set(e.field,e.value)}.bind(this))},getCurrentPanelWidth:function(){return o.all(".sqs-damask-panel").pop().get("offsetWidth")},resetTopBodyScroll:function(){o.config.doc.body.scrollTop=0},setFramePosition:function(e){var t=this.get("boundingBox");if(S.isSubDesktop()){t.removeClass("full-tuck");t.addClass("tucked");return}e="number"===typeof e?e:this.getCurrentPanelWidth();var a=o.one("body").get("region").width;if(n.shouldFrameBeTucked(e,a)){t.addClass("tucked");e>=a&&t.addClass("full-tuck")}else{if(t.hasClass("tucked")){t.addClass("untucking");this._retuckTimeout=o.later(500,this,function e(){t.removeClass("untucking")});t.removeClass("tucked").removeClass("full-tuck")}t.setStyles({left:e})}},_bindFrameFooter:function(){this._registerEvent(this._frameFooter.after("visibleChange",function(e){this._syncFrameFooterVisibility()},this));this._registerEvent(this._frameFooter.after("requestFrameRefresh",function(e){try{var t="about:blank"===this.get("iframe").get("contentWindow.location.href");t?this.setUrlOrRequestRefresh("/"):this.setUrlOrRequestRefresh(this.get("url"))}catch(e){this.LOG.error("Issue refreshing the frame",e);o.config.win.location.reload()}},this))},_syncFrameFooterVisibility:function(){var e=this._frameFooter.get("visible");var t=this.get("contentBox");if(e){t.addClass("footer-visible");this.get("iframe").addClass("footer-visible")}else{t.removeClass("footer-visible");this.get("iframe").removeClass("footer-visible")}},_frameEnterSave:function(){if(this._escManagerCloseTarget)return;this._escManagerCloseTarget={close:o.bind(function(e,t){this._confirmDone(e,t)},this),ignoreBodyClicks:true};o.Squarespace.EscManager.addTarget(this._escManagerCloseTarget)},_frameExitSave:function(){o.Squarespace.EscManager.removeTarget(this._escManagerCloseTarget);this._escManagerCloseTarget=null},isFrameExpanded:function(){return this.get("isReactFirstExpanded")},_updateContentBridge:function(e){this._unbindBridgeEvents();var t=this.get("contentBridge");t.changeContent(e);var a=function(e){if(true===e.refresh){this.requestRefresh("updateContentBridge.navigateAfterSave");return}o.Lang.isString(e.url)&&this.setUrlOrRequestRefresh(e.url)};var i=function(e){o.Lang.isString(e.collectionUrl)&&this.set("url","/"+e.collectionUrl)};this._onCmcStateChange();this._bridgeEvents=[t.on("cmcStateChange",this._onCmcStateChange,this),t.on("cmcSave",this._saveChanges,this),t.on("cmcDiscard",this._confirmDone,this),t.on("cmcEditableChange",function(e){this.fire(v.FRAME_EDITING_CHANGE,e)},this),t.on("editLabelChange",function e(){this._syncContentModeController()},this),t.on("collectionSave",a,this),t.on("contentItemSave",a,this),t.on("contentItemRemove",i,this)];this._syncContentModeController()},_onCmcStateChange:function(){this._syncDirtyState();this._syncContentModeController();var e=this.get("contentBridge").get("isEditing");e?this.fire(v.FRAME_SAVE_ENTER):this.fire(v.FRAME_SAVE_EXIT)},_unbindBridgeEvents:function(){o.Array.invoke(this._bridgeEvents,"detach");this._bridgeEvents=[]},_syncFrameUrl:function(){this.LOG.time("load");var e=this.get("url");if(!e)return;e=e.replace(/:/g,"%3A");var t=this.get("iframe").get("contentWindow.location.href");var a=_.getPath(t);var i=this.get("iframe").getAttribute("src");if(!_.isProperUrl(t)&&i&&i===e)return;if(_.pathMatches(e,t)){var n=_.getHash(e);n&&(e=a+n)}this.set("loading",true);if(this.get("frameless"))return;this._updateFrameWithoutAddingToHistory(e)},_urlIsOnlyHashChangeFromCurrentLocation:function(e){var t=this.get("iframe").get("contentWindow").getDOMNode().location;var a=t.href.replace(t.origin,"");var i=function(e){var t=e.split("#")[0];t=t.replace(/^\//,"");return t};return i(e)===i(a)},_stripProtocolAndHostFromInternalUrl:function(e){var t=Static.SQUARESPACE_CONTEXT.website.primaryDomain;var a=[o.config.win.location.hostname.toLowerCase()];t&&a.push(t.toLowerCase());var i=_.hasExternalProtocol(e);var n=_.getHostName(e).toLowerCase();if(i&&0===a.indexOf(n)){var s=_.stripProtocolAndSlashes(e);return s.substr(s.indexOf("/"))}return e},getIframeDocument:function e(){var t=this.get("iframe")?this.get("iframe").get("contentWindow"):null;return t?t.get("document"):null},_updateFrameWithoutAddingToHistory:function(e){var t=this._stripProtocolAndHostFromInternalUrl(e);if(this._urlIsOnlyHashChangeFromCurrentLocation(t)){-1===t.indexOf("#")&&(t+="#");var a=this.get("iframe").get("contentWindow").getDOMNode().location;var i=[a.protocol,"//",a.host,"/",t.replace(/^\//,"")].join("");i!==""+a&&a.replace(i);this.set("loading",false);return}var n=this.getIframeDocument();var s=n?n.get("body"):null;var r=s?s.get("children"):null;if(r&&r.getDOMNodes().length){var o=n.get("documentElement").getDOMNode();var l=o.classList;this.get("iframe").once("load",function e(){var t=this.getIframeDocument();if(!t)return;var a=t.get("documentElement").getDOMNode();for(var i=0;i<y.values.length;i++){var n=y.values[i];l.contains(n)&&a.classList.add(n)}},this)}var c=this.get("iframe").ancestor();this.get("iframe").remove();this.get("iframe").set("src",t);c.append(this.get("iframe"));this.get("router").pushFrameUrl(t)},_syncLoadingState:function(){var e=this.get("loading");e||this.get("contentBox").addClass("content-loaded")},canEditPage:function(){var e=o.Squarespace.UtilAuthenticated.userHasAccessPermission(o.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER);var t=this.get("iframe").get("contentWindow.Static.SQUARESPACE_CONTEXT.pageFeatures");if(!o.Lang.isArray(t))return false;var a=t.includes(o.Squarespace.PageFeatures.EDITABLE);var i=p.getState().siteStatus;if(i===o.Squarespace.StatusConstants.EXPIRED)return false;return a&&e},_frameMouseMoveHandler:function(e){var t=document.querySelector(".config-website-frame")||document.querySelector(".preview-viewport");if(!t)return;o.Squarespace.Mouse.lastX=t.offsetLeft+e.clientX;o.Squarespace.Mouse.lastY=t.offsetTop+e.clientY;o.Squarespace.Mouse.client.lastX=o.Squarespace.Mouse.lastX;o.Squarespace.Mouse.client.lastY=o.Squarespace.Mouse.lastY;o.Squarespace.Mouse.isDebugging&&o.Squarespace.Mouse.debug()},onIframeLoaded:function(e){this.LOG.timeEnd("load");var i=null;var n=null;try{i=this.get("iframe").get("contentWindow");n=this.get("iframe").get("contentWindow.Y")}catch(e){}var t=o.bind(function(){if(null!==i){var e=i.get("location");var t=e.pathname;if(!_.isProperUrl(e.href)){var a="The frameUrl: "+t+" is invalid";T(a);C.captureException(a);return}o.Lang.isString(e.search)&&e.search.length>0&&(t+=e.search);o.Lang.isString(e.hash)&&e.hash.length>0&&(t+=e.hash);this.set("url",t,{source:"onIframeLoaded"})}this.set("loading",false);this.fire(v.LOAD,{refresh:this.get("refreshing")});this.set("refreshing",false);o.one(o.config.doc.body).addClass("sqs-frame-loaded")},this);if(!n){var a=i&&i.get("document.body.className");var s=o.Lang.isString(a)&&-1!==a.indexOf("squarespace-system-page");s||this._frameFooter.set("foundYInFrame",false);Static.SQUARESPACE_CONTEXT.website.websiteType!==f.PARKING_PAGE&&this.LOG.error("Could not find Y on page... not continuing.");t();return}this.LOG.isInfoEnabled()&&this.LOG.info("onIframeLoaded (href: %s) (src: %s)",this.get("iframe").get("contentWindow.location.href"),this.get("iframe").getAttribute("src"));this._frameFooter.set("foundYInFrame",true);this._throttledFrameMouseMoveHandler=k(this._frameMouseMoveHandler,250);this._frameMouseMoveListener=n.one(n.config.doc).on("mousemove",this._throttledFrameMouseMoveHandler,this);this.LOG.time("Squarespace.onInitialize");n.config.win.Squarespace.onInitialize(n,o.bind(function(){this.LOG.timeEnd("Squarespace.onInitialize");this._updateContentBridge(n.config.win);var e=this._timers=[];this._timerTimerHandle=o.Do.after(function(){e.push(o.Do.originalRetVal)},n,"later");n.IO.prototype._rS=function(e,t){var a=this;if(4===e.c.readyState){t.timeout&&a._clearTimeout(e.id);if(!n.Env)return;n.later(0,this,function(){if(!n.Env)return;a.complete(e,t);a._result(e,t)})}};this._frameLinkClickHandle=n.one(n.config.doc.body).delegate("click",this._frameLinkClick,"a",this);this._frameUnloadHandle=i.on("unload",this._frameUnload,this);n.Get.css("https://assets.squarespace.com/universal/fonts/squarespace-font-v1.1.css");this._frameHashChangeHandle=n.one(n.config.win).on("hashchange",function(){var e=i.get("location");this.set("url",e.pathname+e.search+e.hash,{source:"onIframeLoaded"})},this);this._syncFrameClassnames();this._syncTitle();this._syncContentModeController();this._syncDirtyState();t()},this));this.get("iframe").get("contentWindow.Y").one("html").toggleClass(y.IS_EXPANDED,o.one("html").hasClass("fullscreen"))},_frameUnload:function(e){var t=e.currentTarget;var a=t.getDOMNode();var i=a.Y;var n=a.Squarespace;var s=a.onbeforeunload;h.frameUnload();s&&s({});o.Array.each(this._timers,function(e){e.cancel()});this._timerTimerHandle.detach();this._timerTimerHandle=null;this._timers=[];this._throttledFrameMouseMoveHandler&&this._throttledFrameMouseMoveHandler.cancel();this._frameMouseMoveListener&&this._frameMouseMoveListener.detach();o.Global.fire(v.FRAME_UNLOAD);o.Object.each(m,function(e){o.Global.detach(e)});if(o.UA.ie){delete YUI.Env.mods["squarespace-events-collection"];delete i.config.win.ImageLoader}n.globalDestroy(i);t.destroy(true);this.get("contentBridge").destroy();if(o.Lang.isValue(this.getWebsiteOverlaysManager())){this.getWebsiteOverlaysManager().removeTarget(this);this.getWebsiteOverlaysManager().destroy(true)}this._frameLinkClickHandle.detach();this._frameLinkClickHandle=null;this._frameHashChangeHandle.detach();this._frameHashChangeHandle=null;this._frameUnloadHandle.detach();this._frameUnloadHandle=null;i.Anim.stop();i.detachAll();i.destroy();for(var r in n)n[r]=null},_frameLinkClick:function(e){var t=e.currentTarget;var a=t.getAttribute("target");var i=t.getAttribute("href");if(e._event.defaultPrevented)return;if(this.get("disableLinks")){e.stopPropagation();e.preventDefault();return false}if(this.get("contentBridge").get("isEditing")){e.preventDefault();return}var n=_.getCategory(i);switch(n){case q.ANCHOR:e.halt();this._updateFrameWithoutAddingToHistory(this.get("pathname")+i);break;case q.EMPTY_STRING:e.halt();break;case q.MALFORMED_PROTOCOL:e.preventDefault();break;case q.MISC_PROTOCOL:break;case q.CONTENT_LINK:e.preventDefault();this._updateFrameWithoutAddingToHistory(i);break;case q.EXTERNAL_LINK:case q.FILE_LINK:default:(!o.Lang.isValue(a)||"_blank"!==a&&"_top"!==a)&&t.setAttribute("target","_top")}},_syncFrameClassnames:function(){var e=this.get("iframe").get("contentWindow.Y");var t=e.one("html");t.removeClass("squarespace-cameron");t.addClass("squarespace-damask");t.addClass(o.Squarespace.Utils.getBrowserClassName())},_syncTitle:function(){if(Static.SQUARESPACE_CONTEXT.website.websiteType===f.PARKING_PAGE)return;var e=this.get("iframe").get("contentWindow.document.title");o.Lang.isString(e)&&o.one("title").setContent(o.Escape.html(e))},getWebsiteOverlaysManager:function(){if(!this.get("iframe"))return null;var e=this.get("iframe").getDOMNode();if(!e||!parent.document.body.contains(e))return null;return l(e,"contentWindow.Y.Squarespace.Singletons.WebsiteOverlaysManager",null)},_syncContentModeController:function(e){var t=o.one("html");var a=this.get("contentBridge").get("cmcVisible");if("boolean"===typeof e&&a!==e){T(e?"ENABLING annotations - init":"DISABLING annotations - init");this.get("contentBridge").set("cmcVisible",e);a=e}if(!this.canEditPage()){T("DISABLING edit annotations - not authorized");t.removeClass("editing-page");a&&this.get("contentBridge").set("cmcVisible",false);return false}var i=!this.isFrameExpanded();if(i&&!a){T("ENABLING annotations - panel visible");this.get("contentBridge").set("cmcVisible",true);a=true}var n=this.get("contentBridge").get("isEditing");t.toggleClass("editing-page",n);this.resetTopBodyScroll();var s=this.get("contentBridge").get("collection");s&&!s.get("enabled")?this._frameFooter.set("collectionIsEnabled",false):this._frameFooter.set("collectionIsEnabled",true);return a},_syncDirtyState:function(){var e=false;this.canEditPage()&&(e=this.get("contentBridge").get("dirty"));this.set("dirty",e)},requestRefresh:function(a){T("requestRefresh",a);if(this.get("loading")||this.get("contentBridge").get("isEditing")){false;return}var e=this.get("iframe");try{var t=e.getDOMNode();var i=t.contentWindow;var n=i.location;w.mark("frame-refresh");n.reload();this.set("loading",true);this.set("refreshing",true)}catch(t){C.withScope(function(e){e.setExtra("refresh_reason",JSON.stringify(a));C.captureException(t)})}},setUrlOrRequestRefresh:function(e){e===this.get("url")?this.requestRefresh({reason:"setUrlOrRequestRefresh -- same url, refresh",url:e}):this.set("url",e)},_confirmDone:function(e,t){if(!this.get("contentBridge").get("dirty")){this._discardChanges();return}"function"!==typeof t&&(t=function(){});this._showHasChangesConfirmation(function(){this._discardChanges();t(true)}.bind(this),function(){t(false)})},_showHasChangesConfirmation:function(e,t){if(E.isSevenOne()){this._showRosettaHasChangesConfirmation(e,t);return}var a=o.Squarespace.Widgets.Confirmation.show({"strings.title":c("Cancel"),"strings.message":c("Your changes will be discarded, are you sure you want to cancel?"),"strings.confirm":c("Yes"),"strings.cancel":c("No"),style:o.Squarespace.Fluent.TYPE.CONFIRM_OR_CANCEL,showOverlay:true});a.on("confirm",e);a.on("cancel",t)},_onCloseRosettaHasChangesConfirmation:function(e,t){r.render(s.createElement(d,Object.assign({},{isOpen:false,cancelStyle:"default",confirmStyle:"default"},e)),this.confirmationMountNode);t()},_showRosettaHasChangesConfirmation:function(e,t){if(!this.confirmationMountNode){var a=this.get("iframe").getDOMNode();var i=l(a,"contentWindow.document");if(!i){C.captureException("Dirty Iframe was destroyed without prompting user at "+this.get("url"));return}this.confirmationMountNode=i.createElement("div");i.body.appendChild(this.confirmationMountNode)}var n={title:c("Are You Sure?"),message:c("Are you sure you want to discard all changes without saving?"),confirmLabel:c("Discard"),cancelLabel:c("Cancel")};r.render(s.createElement(d,Object.assign({},{isOpen:true,onConfirm:this._onCloseRosettaHasChangesConfirmation.bind(this,n,e),onDismiss:this._onCloseRosettaHasChangesConfirmation.bind(this,n,t),onRequestClose:this._onCloseRosettaHasChangesConfirmation.bind(this,n,t),cancelStyle:"default",confirmStyle:"default"},n)),this.confirmationMountNode)},_saveChanges:function e(){w.mark("save-page");this.get("contentBridge").saveAnnotationControllerChanges().then(function e(){w.measure("save-page")},function e(){w.measure("save-page")})},_discardChanges:function(){this.get("contentBridge").revertAnnotationControllerChanges()}},{ATTRS:{iframe:{},isReactFirstExpanded:{},zendeskIsReady:{value:false}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-commerce-email-preview","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-footer","squarespace-damask-preview-frame-base","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-share-buttons","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation"]})},11902:function(e,t,a){var n=a(24).t;var s=a(1236);var o=a(128);var l=a(514);var c=a(12383);YUI.add("squarespace-damask-preview-footer",function(r){var i={TOGGLE_DISABLE_SCRIPTS:"toggle-disable-scripts",ENABLE_COLLECTION:"enable-collection"};r.namespace("Squarespace.Damask.Preview");r.Squarespace.Damask.Preview.Footer=r.Base.create("DamaskPreviewFooter",r.Squarespace.SSWidget,[],{initializer:function(){this.publish("requestFrameRefresh");this.publish("foundYInFrameChange",{broadcast:2});this.publish("enableScriptsInPreview",{broadcast:2});this.publish("disableScriptsInPreview",{broadcast:2})},renderUI:function(){this.get("contentBox").append('<span class="message"></span>').append('<span class="action"></span>')},bindUI:function(){this.after("foundYInFrameChange",this.syncUI,this);this.after("collectionIsEnabledChange",this.syncUI,this);r.Global.on("deviceView:change",this.syncUI,this);this.get("contentBox").delegate("click",function(e){var t=e.target.getAttribute("data-action");if(t===i.TOGGLE_DISABLE_SCRIPTS)this._toggleDisableScripts();else if(e.target.getAttribute("data-action")===i.ENABLE_COLLECTION){var a=new r.Squarespace.Widgets.Confirmation({"strings.message":"Make this page visible to visitors?"});a.on("confirm",this._enableCollection.bind(this))}},".action",this)},_toggleDisableScripts:function(){this._toggleCookie()?this.fire("disableScriptsInPreview"):this.fire("enableScriptsInPreview");this.fire("requestFrameRefresh");this.syncUI()},_enableCollection:function(){var e=this.get("contentBridge").get("collection").get("id");var t=r.Squarespace.ContentCollectionCache.getById(e);t.load(function(){t.set("enabled",true);t.save(function(e){e&&e.errors&&e.errors.urlId?new r.Squarespace.Widgets.Alert({"strings.title":this.get("strings.urlIdErrorTitle"),"strings.message":this.get("strings.urlIdErrorMessage")}):true!==t.get("enabled")?c():this.fire("requestFrameRefresh")}.bind(this))}.bind(this))},syncUI:function(){var e=this._getFooterParams();if(e){var t=this.get("boundingBox");t.setAttribute("data-action-name",e.action);var a=this.get("contentBox");a.one(".message").setContent(e.message);var i=a.one(".action");i.setContent(e.actionMessage);i.setAttribute("data-action",e.action)}var n=r.one("html");var s=!!e&&!(n.hasClass("device-view-phone")||n.hasClass("device-view-tablet"));this.set("visible",s)},_getFooterParams:function(){var e=window.Static.SQUARESPACE_CONTEXT.website.websiteType;if(e===l.PARKING_PAGE)return null;if(this.isDisableScriptsCookieSet())return{message:n("Scripts have been disabled on your site preview."),actionMessage:n("Enable Scripts in Preview"),action:i.TOGGLE_DISABLE_SCRIPTS};if(!this.get("foundYInFrame"))return{message:n("We detected an error loading your site preview. This is usually caused by injected code."),actionMessage:n("Disable Scripts in Preview"),action:i.TOGGLE_DISABLE_SCRIPTS};if(!this.get("collectionIsEnabled"))return{message:n("This disabled page doesn't appear to visitors."),actionMessage:n("Enable page"),action:i.ENABLE_COLLECTION};return null},_toggleCookie:function(){if(o.get(s.DISABLE_USER_SCRIPTS_COOKIE)){o.set(s.DISABLE_USER_SCRIPTS_COOKIE,"",{expires:new Date(0),path:"/"});return false}o.set(s.DISABLE_USER_SCRIPTS_COOKIE,true,{path:"/"});return true},isDisableScriptsCookieSet:function(){return r.Lang.isValue(o.get(s.DISABLE_USER_SCRIPTS_COOKIE))}},{CSS_PREFIX:"sqs-damask-preview-footer",ATTRS:{frame:{},foundYInFrame:{value:true},visible:{value:false},collectionIsEnabled:{value:true},contentBridge:{},strings:{value:{urlIdErrorTitle:n("Duplicate URL Slug"),urlIdErrorMessage:n("This page has a duplicate URL. Choose another.")}}}})},"1.0",{requires:["base","squarespace-ss-widget"]})},11903:function(e,t,a){YUI.add("squarespace-damask-preview-frame-base",function(e){e.namespace("Squarespace.Damask.Preview").FrameBase=e.Base.create("preview-base",e.Squarespace.Widgets.SSWidget,[e.WidgetChild,e.WidgetParent],{initializer:function(){},destructor:function(){},getCurrentPanelWidth:function(){return e.all(".sqs-damask-panel").pop().get("offsetWidth")},renderUI:function(){false},bindUI:function(){false},syncUI:function(){false},addActionListeners:function(){false},setFramePosition:function(e){false},canEditPage:function(){false},getWebsiteOverlaysManager:function(){false},requestRefresh:function(){false},setUrlOrRequestRefresh:function(e){false}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-ui-base","widget-child","widget-parent"]})},11904:function(e,t,a){a(13040);YUI.add("squarespace-management",function(e){},"1.0",{requires:["squarespace-frontend-content-mode"]})},11905:function(e,t,a){a(2227);a(1335);a(4210);var i=a(1714);var g=a(229);var p=a(87);var h=a(4113);var f=a(4155);var m=a(128);var v=a(24).t;var b=a(6702);var y=a(1236);var S=a(4156);var q=a(1089);var n=a(729);var _=a(522);var C=a(12382);var E=a(2716);var k=a(1595);var w=a(5994);var T=a(13042);var I=a(11569);var A=a(1306);var x=a(5439).finishEditing;var L=a(11792);var D=a(12364);var N=a(651);var O=a(1004);var R=a(114);var P=a(11623);var B=a(13065);var M=a(12386);var F=a(12374);var s=a(11790);var r=a(11889);var U=a(4111);var V=a(1434);var o=false;var z=n.createLogger("ContentModeController","khaki",o);var H=n.createWarningLogger("ContentModeController");var G=n.createErrorLogger("ContentModeController");var W=i.mark;var Y=i.measure;var j=s.ITEM_CATALOG_FULLY_LOADED;var Q=s.PAGE_CATALOG_FULLY_LOADED;var X=s.ITEM_CATALOG_RENDERED;var K=s.PAGE_CATALOG_RENDERED;var J=s.ITEM_CATALOG_ENTRY_ADDED;var Z=s.PAGE_CATALOG_ENTRY_ADDED;var $=s.PAGE_CATALOG_PRELOAD_EFFECTIVENESS;var ee=s.ITEM_CATALOG_PRELOAD_EFFECTIVENESS;var te=r.getGuid;var ae=r.resetGuid;YUI.add("squarespace-frontend-content-mode",function(o){var l=o.Squarespace.Navigation.ListUtils;var a=250;var e=1e4;var t=o.namespace("Squarespace.Frontend");var i=y.IGNORED_ITEM_ANNOTATION_SELECTORS;var n=y.REGISTERED_ACTIONS_FOR_NEXT_LOAD_STORE_KEY;var s=["sqs-layout-dark","sqs-frontend-overlay-editor-widget"];var r=o.Base.create("ContentModeController",o.Base,[o.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._events=[];this.annotationControllers=[];this.logReadyState();o.Global.publish("annotationControllersInitialized");this.publish("refresh",{emitFacade:true});this.on("*:navigate",this._navigate,this);this.after("editableChange",function(e){o.one(o.config.doc.body).toggleClass("sqs-hide-overlay-widgets",!!e.newVal);o.one(o.config.doc.body).toggleClass("sqs-edit-mode-active",!!e.newVal)});this._bindBrowserDragStart();I.reset();this._events.push(o.on("domready",function(){var e=o.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]);var t=o.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER;if(!e||!e.includes(t))return;var a=this.get("contextCollection");var i={contentModeController:this,win:o.config.win,mouse:o.Squarespace.Mouse,overlayEditorClassName:"",placeLastClassifications:[],allocateTopLeftCorner:false};if(a&&a.get("type")===o.Squarespace.CollectionTypes.SPLASH_PAGE){i.overlayEditorClassName="sqs-cover-page-overlay";i.placeLastClassifications.push("Gallery");i.allocateTopLeftCorner=true}this.overlayAnnotationController=new T(i);this.logReadyState();this.stack=new o.Parallel;this.stack.done(function(){this._stackTimeoutId=setTimeout(function(){if(!this.get("destroyed")){this._stackTimeoutId=null;this.set("annotationControllersInitialized",true);o.Global.fire("annotationControllersInitialized",{annotationControllers:this.annotationControllers})}}.bind(this),100)}.bind(this));this._initializeAnnotationControllers();this._handleRegisteredActionsOnNextLoad();this.controllersInitailizedForRefreshToWork=true},this));this.after("visibleChange",this._sync);this.windowExists()&&o.config.win.MutationObserver?this._bindDOMListeners():this._bindWatcher();this.bindLayoutEngineUpgradePills();this.bindNetworkListener();this.bindOrientationListener();this.bindDeviceViewStore()},logReadyState:function(){z("document.readyState",{ready:o.config.doc.readyState,doc:o.config.doc})},bindDeviceViewStore:function(){if(!R.isFeatureEnabled(p.MOBILE_PREVIEW_PAGE_EDITING))return;this.detachDeviceViewStoreListener=U.listen(function(){var e=U.getState().view===V.PHONE;o.one(o.config.doc.body).toggleClass("mobile-preview-editing",e)})},bindNetworkListener:function(){o.config.win.addEventListener("online",this._updateOnlineStatus.bind(this));o.config.win.addEventListener("offline",this._updateOnlineStatus.bind(this))},detachNetworkListener:function(){o.config.win.removeEventListener("online",this._updateOnlineStatus.bind(this));o.config.win.removeEventListener("offline",this._updateOnlineStatus.bind(this))},_updateOnlineStatus:function(){var e=navigator.onLine?"online":"offline";var t=Date.now();o.Global.fire("network:"+e);if("online"===e){var a=this.disconnectedAt?t-this.disconnectedAt:void 0;this.disconnectedAt=void 0;q.userNetworkReconnect(a)}else this.disconnectedAt=t},bindOrientationListener:function(){o.config.win.addEventListener("orientationchange",this._handleOrientationChange.bind(this))},detachOrientationListener:function(){o.config.win.removeEventListener("orientationchange",this._handleOrientationChange.bind(this))},_handleOrientationChange:function(){q.userDeviceOrientationChange()},bindLayoutEngineUpgradePills:function(){var e=o.config.win;o.Do.after(this.renderLayoutEngineUpgradeWrappers,e.Squarespace,"initializeLayoutBlocks",e.Squarespace);this._registerEvent(o.on("renderLayoutEngineUpgradeWrappers",this.renderLayoutEngineUpgradeWrappers,this));e.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&this.renderLayoutEngineUpgradeWrappers();N.isTrial()&&o.one(o.config.doc.documentElement).addClass("squarespace-page-in-trial");var t=O.getState().toJS().guilds;var a=t&&t[h.CIRCLE_USER]||false;(a||o.config.win.top.Static.SQUARESPACE_CONTEXT.isCircleMemberWebsite)&&o.one(o.config.doc.documentElement).addClass("squarespace-circle-member")},renderLayoutEngineUpgradeWrappers:function(){var a=o.one(o.config.doc);S.getFeatureGatedBlockTypes().forEach(function(t){var e=".sqs-block-"+b.BlockTypeNames[t];a.all(e).each(function(e){S.renderBlockWrapper({node:e.getDOMNode(),blockType:t})})})},_handleRegisteredActionsOnNextLoad:function(){try{this._getRegisteredActionsOnNextLoad().forEach(function(e){if("enterPostEditFlow"===e.action)this._enterEditPostFlow(e.options);else if("ensureCollectionInStackedIndexIsOnScreen"===e.action){var t=e.options.collectionId;var a=e.options.parentCollectionId;this.ensureCollectionInStackedIndexIsOnScreen(t,a)}}.bind(this))}catch(e){H("Issue handling registered actions on next load.",e)}finally{m.set(n,"",{expires:new Date(0),path:"/"})}},_enterEditPostFlow:function(e){var t=this._getAnnotationControllerByType(D.ContentItemMinimal);t&&t.requestEditFlowEntrance()},_getRegisteredActionsOnNextLoad:function(){var e=[];try{var t=m.get(n,{path:"/"});t&&(e=JSON.parse(t))}catch(e){H("Error de-serializing Set<ActionOnNextLoad>",e)}return o.Lang.isArray(e)?e:[]},registerActionOnNextLoad:function(e){var t=this._getRegisteredActionsOnNextLoad();t.push(e);m.set(n,JSON.stringify(t),{path:"/"})},_bindDOMListeners:function(){if(!o.config.doc.body)return;this._mutationObserver=new o.config.win.MutationObserver(function(e){if(!this.get("visible"))return;var t=e.find(function(e){if(!e.target){H("mutation.target is not real!",e);return true}var t=e.target.classList;if(!t)return true;var a=s.find(function(e){return t.contains(e)});return!o.Lang.isValue(a)});if(!o.Lang.isValue(t))return;if(!this.windowExists())return;this._domChangeResponder&&this._domChangeResponder.cancel();this._domChangeResponder=o.later(a,this,function e(){this._domChangeResponder=null;this._refreshLiveAnnotationControllers()})}.bind(this));this._mutationObserver.observe(o.config.doc.body,{childList:true,attributes:true,subtree:true})},windowExists:function(){return o&&o.config&&o.config.win},_bindWatcher:function(){this._domWatcher=o.later(e,this,this._refreshLiveAnnotationControllers,null,true)},_refreshLiveAnnotationControllers:function e(){if(!this.windowExists())return;if(!this.controllersInitailizedForRefreshToWork)return;z("Request to update live edit controllers!");this.initializeBlockFields();this._initializeNavigations();this.getHotAnnotationControllers().filter(function(e){return e instanceof D.Index}).forEach(function(e){e.syncChildCollectionAnnotationControllers()});this.overlayAnnotationController&&this.overlayAnnotationController.invalidateAndRequestRepaint()},_bindBrowserDragStart:function(){o.one(o.config.doc).on(["dragenter","dragover"],function(e){e.stopPropagation();e.preventDefault();var t=e._event.dataTransfer;E(t,"none")})},destructor:function(){o.Array.each(this.annotationControllers,function(e){e.destroy(true)},this);o.Array.each(this._events,function(e){e.detach()});this.annotationControllers.length=0;this._events.length=0;if(this._stackTimeoutId){clearTimeout(this._stackTimeoutId);this._stackTimeoutId=null}if(this._domWatcher){this._domWatcher.cancel();this._domWatcher=null}if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null}this._domChangeResponder&&this._domChangeResponder.cancel();if(this._slideEditController){this._slideEditController.destroy();this._slideEditController=null}if(this._slideUpdateRenderSynchronizerHandle){this._slideUpdateRenderSynchronizerHandle.detach();this._slideUpdateRenderSynchronizerHandle=null}if(this.overlayAnnotationController){this.overlayAnnotationController.destroy();this.overlayAnnotationController=null}if(this._popupOverlayShowingHandle){this._popupOverlayShowingHandle.detach();this._popupOverlayShowingHandle=null}if(this.catalogContentInitializer){this.catalogContentInitializer.destroy();this.catalogContentInitializer=null}this.detachNetworkListener();this.detachOrientationListener();I.reset.defer();this.detachDeviceViewStoreListener&&this.detachDeviceViewStoreListener()},_initializeAnnotationControllers:function(){this.initializeBlockFields();this._initializeSiteTitle();this._initializeSiteHeader();this._initializeSiteDescription();this._initializePageConfiguration();this._initializeSlideAnnotationController();this._initializeNavigations();this._initializeContentField("connected-accounts",D.ConnectedAccounts);this._initializeContentField("business-information",D.BusinessInformation);if(_.isSevenOne()){o.one("body").addClass("sqs-jacquard");o.one("body").addClass("sqs-jacquard-outline-beta");this._initializeSections("[data-page-sections]",D.PageSections);this._initializeSections("[data-footer-sections]",D.FooterSections)}this._registerEvent(o.on("beforeunload",this.destroy,this));this._sync()},isInitializing:function(){return!this.get("annotationControllersInitialized")},_navigate:function(e){if(e.source===this.name)return;var t={source:this.name};e.shimmy&&(t.shimmy=e.shimmy);e.focus&&(t.focus=e.focus);o.Squarespace.Singletons.Location.go(e.path,t);e.stopPropagation()},isNodeVisible:function(e,t){var a=e.get("region");var i=a.width>0||a.height>0;if(!i)return false;var n=e.getComputedStyle("visibility");if("hidden"===n)return false;var s=e.get("parentNode");if(t&&s&&s!==o.one(o.config.doc))return this.isNodeVisible(s,t);return true},_initializeSiteTitle:function(){if(R.isFeatureEnabled(p.SITE_HEADER_FOOTER))return;var e=o.all('[data-content-field="site-title"]');e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(D.SiteTitle,{rootNode:e})},this)},_initializeSiteHeader:function(){if(!R.isFeatureEnabled(p.SITE_HEADER_FOOTER))return;var e=o.all("header#header");e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(D.SiteHeader,{rootNode:e})},this)},_initializeSiteDescription:function(){var e=o.all('[data-content-field="site-description"]');e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(D.SiteDescription,{rootNode:e})},this)},_initializeSlideAnnotationController:function(){if(!o.one(".sqs-slide")){this._popupOverlayShowingHandle=o.Global.once("popupOverlay:showing",function(){this._createSlideController(true)}.bind(this));return}this._createSlideController()},_createSlideController:function(e){this._slideEditController=new o.Squarespace.SlideRendering.EditController({stack:this.stack,shouldShowPopup:e});if(!this.get("contextCollection"))return;this._slideUpdateRenderSynchronizerHandle=o.Global.after(["slideUpdateRendered","slideComponentSync"],function(){this._syncSliceAnnotationControllers();this._syncBodyClasses()}.bind(this));this._syncSliceAnnotationControllers()},_syncSliceAnnotationControllers:function(){var n=[];var s=[];this.getHotAnnotationControllers().forEach(function(e){var t=e.state.rootNode;var a=t.getDOMNode();if(e.state.destroyed||!a||!t.inDoc()){n.push(e);return}s.push(a);var i=t.ancestor("[data-compound-type]");i&&s.push(i.getDOMNode())});for(var e=0;e<n.length;e++)this.removeAnnotationController(n[e]);o.all("[data-slice-type]").each(function(e){var t=this._getValidRootNodeForSliceTypeNode(e);if(s.indexOf(t.getDOMNode())>-1)return;this._createAnnotationControllerForSliceNode(e)},this)},_getValidRootNodeForSliceTypeNode:function(e){var t=e.getAttribute("data-slice-type");var a=w[t];if(a===f.IMAGE){var i=e.one("img");if(i)return i}else if(a===f.HEADING){var n=e.one("h1");if(n)return n}return e},_createAnnotationControllerForSliceNode:function(e){var t=this._getValidRootNodeForSliceTypeNode(e);var a=e.hasAttribute("data-compound-type")?e.getAttribute("data-compound-type"):e.getAttribute("data-slice-type");this.registerAnnotationController(D.PanelLink,{contextCollectionId:this.get("contextCollection").get("id"),rootNode:t,sliceTypeStr:a,visible:this.get("visible")})},_isDemoCollectionPage:function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.collectionId;return o.Squarespace.ContentCollectionUtils.isDemoCollectionId(e)},_isItemView:function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.itemId;return o.Lang.isValue(e)},_initializePageConfiguration:function(){var a=['[data-content-field="main-content"]','.sqs-layout[data-type="page"]',"[data-collection-id]"].join(",");if(_.isSevenOne())return;var e=o.all(a);z("Found "+e.size()+" page configuration wrappers.");e.each(function(e){if(e.ancestor(a))return;for(var t=0;t<i.length;t++)if(e.hasClass(i[t]))return;this.initializeAnnotationControllerForNode(e)},this)},initializeAnnotationControllerForNode:function(e,t){var a=this._getCollection(e);var i=this.getPageConfigurationCtor(a);if(!o.Lang.isFunction(i)){z("Could not find a PageConfigurationCtor for node.",e.getDOMNode());return}if(this.isBound(e,i)){z("Not rebinding on element.",e.getDOMNode(),i.NAME);return}if(i===D.Page&&!e.test('.sqs-layout[data-type="page"]')){var n=e.all('.sqs-layout[data-type="page"]');if(1===n.size())e=n.item(0);else{n.size()>1&&H("Multiple .sqs-layout found inside of wrapper. Creating generic annotation.",n._nodes);i=D.PageWrapper}}var s=this.registerAnnotationController(i,{rootNode:e,overlayRootNode:t||e,collection:a});t&&t!==e&&s.set("placeAnnotationInside",true);z("Plugged",i.NAME,"for ",a.toDebugString(),e.getDOMNode());return s},getPageConfigurationCtor:function(e){if(!o.Lang.isValue(e))return null;var t=e.get("typeName");var a=e.get("type");o.Lang.isValue(a)||(a=e.getTemplateConfiguration().get("collectionType"));if(!t&&a===g.COLLECTION_TYPE_PAGE){e.set("typeName","page");t="page"}if(a===g.COLLECTION_TYPE_GENERIC){var i=e.get("ordering");if(!o.Lang.isValue(i)){var n=k.getCollectionConfig(t);var s=k.getPageConfig(t);var r=n||s;i=r?r.ordering:null}if(o.Squarespace.ContentCollectionUtils.isIndex(e)){if(l.isCollectionAStackedIndex(e))return D.StackedIndex;return D.Index}if(i===o.Squarespace.CollectionOrdering.USER)return D.Gallery;if(i===o.Squarespace.CollectionOrdering.CHRONOLOGICAL)return D.Blog;if(i===o.Squarespace.CollectionOrdering.CALENDAR)return D.Calendar;if(i===o.Squarespace.CollectionOrdering.MUSIC_ALBUM)return D.MusicAlbum}if(a===g.COLLECTION_TYPE_PAGE)return D.Page;if(a===g.PRODUCTS)return D.Products},_getCollection:function(e){var t=o.Squarespace.ContentCollectionCache;var a=null;e.hasAttribute("data-collection-id")&&(a=e.getAttribute("data-collection-id"));e.test('.sqs-layout[data-type="page"]')&&(a=e.getAttribute("id").substr("page-".length));if(o.Lang.isString(a)&&a.length){if(o.config.win.Static.SQUARESPACE_CONTEXT.collectionId===a)return t.getCollectionFromData(o.config.win.Static.SQUARESPACE_CONTEXT.collection);return t.getById(a)}var i=o.config.win.Static.SQUARESPACE_CONTEXT.collection;if(o.Lang.isObject(i))return o.Squarespace.ContentCollectionCache.getCollectionFromData(i)},_initializeSections:function(a,i){var e=o.all(a);z("Found "+e.size()+" page sections.");var n=o.Array.filter(this.annotationControllers,function(e){return e instanceof i});e.each(function(e){if(!e.all(a).isEmpty())return;var t=this._getRegisteredAnnotationController(e);!t&&this.isNodeVisible(e)?this.registerAnnotationController(i,{rootNode:e}):t&&n.includes(t)&&this.isNodeVisible(e)&&n.remove(t)},this);if(n.length>0){z("Page sections are waiting for garbage collection",n);for(var t=0;t<n.length;t++)this.removeAnnotationController(n[t])}},_initializeNavigations:function(){var a='[data-content-field^="navigation"]';var e=o.all(a);z("Found "+e.size()+" navigations.");var i=o.Array.filter(this.annotationControllers,function(e){return e instanceof D.Navigation});e.each(function(e){if(!e.all(a).isEmpty())return;var t=this._getRegisteredAnnotationController(e);!t&&this.isNodeVisible(e)?this.registerAnnotationController(D.Navigation,{rootNode:e}):t&&i.includes(t)&&this.isNodeVisible(e)&&i.remove(t)},this);if(i.length>0){z("Navigations waiting for garbage collection.",i);for(var t=0;t<i.length;t++)this.removeAnnotationController(i[t])}},_initializeContentField:function(e,t){o.all('[data-content-field="'+e+'"]').each(function(e){this.isNodeVisible(e)&&this.registerAnnotationController(t,{rootNode:e})},this)},getValidBlockFieldNodes:function(){var e=o.all('.sqs-layout[data-type="block"], .sqs-layout[data-type="block-field"]');var t=[];e.each(function(e){if(!this.isNodeVisible(e)&&!o.Squarespace.Utils.isDeveloperModeEnabled()){z("Skipping blockField because element is not visible.",e._node);return}t.push(e)},this);return t},initializeBlockFields:function(){var e=this.getValidBlockFieldNodes();z("Valid block nodes",e);var a=o.Array.filter(this.annotationControllers,function(e){return e instanceof D.BlockField});o.Array.each(e,function(e){var t=this._getRegisteredAnnotationController(e);o.Lang.isValue(t)||(t=this.registerAnnotationController(D.BlockField,{rootNode:e}));a.includes(t)&&a.remove(t)},this);if(a.length>0){z("Block fields waiting for garbage collection",a);for(var t=0;t<a.length;t++)this.removeAnnotationController(a[t])}},removeAnnotationController:function(e){this.annotationControllers.remove(e);e.destroy();this.overlayAnnotationController.repaintRequest()},registerAnnotationController:function e(t,a){if(!this.overlayAnnotationController){G("Tried to registerAnnotationController without overlayAnnotationController");return}var i={annotationController:this.overlayAnnotationController,contentModeControllerSet:this.set.bind(this),fireRequestDiscardChangesEvent:this.fireRequestDiscardChangesEvent.bind(this),fireRequestSaveChangesEvent:this.fireRequestSaveChangesEvent.bind(this),initializeAnnotationControllerForNode:this.initializeAnnotationControllerForNode.bind(this),isNodeVisible:this.isNodeVisible.bind(this),registerActionOnNextLoad:this.registerActionOnNextLoad.bind(this),registerAnnotationController:this.registerAnnotationController.bind(this),removeAnnotationController:this.removeAnnotationController.bind(this),stack:this.stack,trackButtonClick:this.trackButtonClick.bind(this),Y:o};var n=new t(i,a);this.get("visible")!==n.state.visible&&n.set("visible",this.get("visible"));n.addAfterChangeHandler("dirty",this._syncDirtyState,this);n.addAfterChangeHandler("editable",this._syncEditableState,this);n.addAfterChangeHandler("visible",function(){this.overlayAnnotationController.repaintRequest()},this);this.annotationControllers.push(n);this.overlayAnnotationController.repaintRequest();return n},trackButtonClick:function(e){o.Global.fire("annotation-overlay-button-click",e)},isBound:function(t,a){return o.Lang.isValue(o.Array.find(this.annotationControllers,function(e){return e instanceof a&&e.state.rootNode===t}))},_getAnnotationControllerByType:function(t){if(!this.annotationControllers)return;return o.Array.find(this.annotationControllers,function(e){return e instanceof t})},_getRegisteredAnnotationController:function(t){return o.Array.find(this.annotationControllers,function(e){return e.state.rootNode===t})},_getPropertyFromAnnotationController:function(t){return o.Array.map(this.annotationControllers,function(e){return e.state[t]})},_syncDirtyState:function(){this.set("dirty",this._getPropertyFromAnnotationController("dirty").includes(true))},_syncEditableState:function(){this.set("editable",this._getPropertyFromAnnotationController("editable").includes(true))},__getActiveAnnotationController:function(){return o.Array.find(this.annotationControllers,function(e){return e.state.editable})},getActiveAnnotationControllerLabel:function(){var e=o.Array.find(this.annotationControllers,function(e){return e.state.editable});if(e instanceof D.LayoutBase)return e.getClassificationLabel();return null},fireRequestDiscardChangesEvent:function(){this.fire("request-discard-changes")},revertAnnotationControllerChanges:function(){var e=o.Promise.all(o.Array.map(this.annotationControllers,function(a){return new o.Promise(function(e,t){if(a.state.dirty)a.revert().then(function(){a.set("editable",false);e()},t);else{x();a.set("editable",false);e()}})}));_.isSevenOne()&&e.then(function(){A.disableEditing();A.refresh.defer("content-mode revertAnnotationControllerChanges")});e.catch(function(e){G("Error reverting edit controller changes",e);return new o.Squarespace.Widgets.Alert({"strings.title":v("Error Reverting"),"strings.message":e||v("Please try reverting again.")})});return e},fireRequestSaveChangesEvent:function(e){var t={};e&&(t.model=e);this.fire("request-save-changes",t)},saveAnnotationControllerChanges:function e(){if(L.getState().isSaving)return o.Promise.reject(new Error("Save in progress"));var t=o.Promise.all(o.Array.reduce(this.annotationControllers,[],function(e,t){if(t.state.dirty){I.setIsSaving(true);e.push(t.save().then(function(){t.set("editable",false);I.setIsSaving(false)}).catch(function(e){I.setIsSaving(false);return o.Promise.reject(e)}))}t.set("editable",false);return e}));t.catch(function(e){G("Error saving edit controller changes",e);return new o.Squarespace.Widgets.Alert({"strings.title":v("Error Saving"),"strings.message":e||v("Please try saving again.")})});return t},_sync:function(){var t=this.get("visible");this._syncBodyClasses();var a=[];o.Array.each(this.annotationControllers,function(e){if(!e.state.rootNode.inDoc()){a.push(e);return}z("Set edit controller visible",{controller:e,isVisible:t});e.set("visible",t)},this);while(0!==a.length){var e=a.shift();this.removeAnnotationController(e)}},_syncBodyClasses:function(){var e=this.get("visible");o.one(o.config.doc.body).toggleClass("sqs-edit-mode",e);o.one(o.config.doc.body).toggleClass("sqs-hide-overlay-widgets",!e);o.Global.fire("_syncBodyClasses",o.config.win)},getDamaskHideFields:function(){var a=[];o.Array.each(this.annotationControllers,function(e){var t=e.state.damaskFieldsToHide;if(!o.Lang.isValue(t))return;o.Object.each(t,function(e,t){e.call(this)&&a.push(t)},e)});return a},getHotAnnotationControllers:function(){return this.annotationControllers},goToContentItem:function(e){if(!o.config.win)return;o.config.win.location.href=e.get("fullUrl")},ensureCollectionInStackedIndexIsOnScreen:function(e,t,a){var i=this.get("contextCollection");if(a||!i||i.get("id")!==t&&!l.isCollectionInIndex(i)){this.registerActionOnNextLoad({action:"ensureCollectionInStackedIndexIsOnScreen",options:{collectionId:e,parentCollectionId:t}});if(!o.config)return;a&&o.config.win.location.reload();var n=o.Squarespace.ContentCollectionCache.getById(e);var s=CONFIG_PANEL.get("contentBridge").getCollectionUrl(n);o.Squarespace.Singletons.Location.setFrameUrlOrRefresh(s);return}var r=this._getAnnotationControllerByType(D.Index);if(!r)return;r.ensureCollectionIsInView(e)},runContentPreviewer:function(e){return P(e,o.config.win.location.pathname,o.config.win.frameElement)},getContentInitializer:function(){this.catalogContentInitializer||(this.catalogContentInitializer=new F(o));return this.catalogContentInitializer},showPageCatalog:function(e,t){ae();var a={detail:te()};W(K,a);W(Q,a);W(Z,a);if(!this.pageCatalog){Y($);this.pageCatalog=new B({catalogType:M.COLLECTION,onInitializeContent:this.getContentInitializer().initializePages,getDestinationNode:function(){if(o&&o.config&&o.config.win)return o.config.win.document.body;G("Catalog Render Fail, destination node unavailable");return null},onSelectItem:t||o.Global.fire.bind(o.Global)})}this.pageCatalog.showCatalog(e)},showItemCatalog:function(a){ae();var e={detail:te()};W(X,e);W(j,e);W(J,e);if(!this.itemCatalog){Y(ee);this.itemCatalog=new B({catalogType:M.ITEM,onInitializeContent:this.getContentInitializer().initializePages,getDestinationNode:function(){if(o&&o.config&&o.config.win)return o.config.win.document.body;G("Catalog Render Fail, destination node unavailable");return null},onSelectItem:function(e,t){if(!t||!Object.keys(t).length)return a(null);a(Object.assign({},t,{toCollectionId:this.get("contextCollection").get("id")}))}.bind(this)})}this.itemCatalog.showCatalog()}},{ATTRS:{visible:{value:false},dirty:{value:false},annotationControllersInitialized:{value:false},contextCollection:{}}});if(o.Squarespace.Utils.isInDamaskFrame()){var c=o.config.win.Static.SQUARESPACE_CONTEXT.collection;var d;if(o.Lang.isObject(c)){d=o.Squarespace.ContentCollectionCache.getCollectionFromData(C(c));var u={};o.config.win.SQSSectionTweak={watch:function(e,t){u[e]=t},disconnect:function(e,t){if(!u[e]||!u[e]!==t)return;delete u[e]},refresh:function(e,t){if(u[e])return u[e](t);return false}};o.Global.fire("section:tweaks:ready")}t.ContentModeController=new r({contextCollection:d})}},"1.0",{requires:["base","promise","@sqs/layout-engine/block-content-html","@sqs/layout-engine/events","@sqs/layout-engine/layout-builder","@sqs/layout-engine/models-layout","squarespace-attr-validators","squarespace-block-content-html-editor","squarespace-content-collection-utils","squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-manager-navigation-ui-utils","squarespace-damask-context-globals","squarespace-enum","squarespace-layout-engine-edit-controller","squarespace-layout-renderable-blocks-web-app","squarespace-logger","squarespace-mixins-event-registrar","squarespace-models-content-collection","squarespace-models-content-item","squarespace-models-layout-block-field","squarespace-models-layout-page-collection-data","squarespace-models-template-navigation-list","squarespace-navigation-list-utils","squarespace-promises","squarespace-singletons-location","squarespace-slice-type-groups","squarespace-slide-rendering-edit-controller","squarespace-ss-widget","squarespace-util-authenticated","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation-media","widget-position-align"]})},11906:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=i(a(13066));var u=i(a(11887));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var p=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return d.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return d.default.loadPreviews(t)}}]);return a}(u.default);var h=c.default.createActions(p);t.default=h;e.exports=t.default},11907:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=i(a(11906));var u=i(a(11888));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var p=function(e){(0,r.default)(a,e);var t=g(a);function a(){var e;(0,n.default)(this,a);e=t.call(this);e.bindActions(d.default);e.exportPublicMethods({getPagesForCategory:e.getPreviewsForCategory,getCatalogEntryForCollection:e.getCatalogEntryForCollection});return e}(0,s.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.collectionId,i=e.title,n=e.websiteId,s=e.isFolder;var r=new DOMParser;var o=r.parseFromString(t,"text/html");var l=o.createElement("div");var c=o.body.querySelector("[data-page-sections]");l.classList.add("article-wrapper");c.setAttribute("data-collection-id",a);c.setAttribute("data-website-id",n);s&&c.setAttribute("data-is-folder",true);l.innerHTML=c.outerHTML;return{collectionId:a,html:l.outerHTML,title:i}})}},{key:"isEntryForPreview",value:function e(t,a){return t.collectionId===a.collectionId}},{key:"getCatalogEntryForCollection",value:function e(a){var t=function e(t){return t.collectionId===a};return this.findCatalogEntry(t)}}]);return a}(u.default);var h=c.default.createStore(p,"PageCatalogEntryStore");t.default=h;e.exports=t.default},11908:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var s=a(24);var r=i(a(11570));var o;var l=(o={},(0,n.default)(o,r.default.ABOUT,(0,s.t)("About")),(0,n.default)(o,r.default.APPOINTMENTS,(0,s.t)("Appointments")),(0,n.default)(o,r.default.BLOG,(0,s.t)("Blog")),(0,n.default)(o,r.default.CONTACT,(0,s.t)("Contact")),(0,n.default)(o,r.default.DESIGNER_LAYOUTS,(0,s.t)("Designer Layouts")),(0,n.default)(o,r.default.EVENTS,(0,s.t)("Events")),(0,n.default)(o,r.default.FAQS,(0,s.t)("FAQs")),(0,n.default)(o,r.default.GALLERY,(0,s.t)("Gallery")),(0,n.default)(o,r.default.GENERAL,(0,s.t)("General")),(0,n.default)(o,r.default.MENU,(0,s.t)("Menu")),(0,n.default)(o,r.default.MUSIC,(0,s.t)("Music")),(0,n.default)(o,r.default.PORTFOLIO,(0,s.t)("Portfolio")),(0,n.default)(o,r.default.PRIVACY_POLICY,(0,s.t)("Privacy Policy")),(0,n.default)(o,r.default.PROJECT,(0,s.t)("Project")),(0,n.default)(o,r.default.REVIEWS,(0,s.t)("Reviews")),(0,n.default)(o,r.default.RSVP,(0,s.t)("RSVP")),(0,n.default)(o,r.default.SERVICES,(0,s.t)("Services")),(0,n.default)(o,r.default.STORE,(0,s.t)("Store")),(0,n.default)(o,r.default.TEAM,(0,s.t)("Team")),(0,n.default)(o,r.default.TOS,(0,s.t)("Terms of Service")),o);t.default=l;e.exports=t.default},11909:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var s=a(24);var r=i(a(11702));var o=(0,n.default)({},r.default.PROJECTS,(0,s.t)("Projects"));t.default=o;e.exports=t.default},11910:function(e,t){YUI.add("squarespace-models-layout-block-field",function(e){e.namespace("Squarespace.Models").BlockField=e.Base.create("BlockField",e.Model,[e.Squarespace.ModelSync.REST,e.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{url:e.Squarespace.API_ROOT+"block-fields/{widgetName}",root:e.Squarespace.API_ROOT+"block-fields",idAttribute:"widgetName"},{ATTRS:{widgetName:{validator:e.Lang.isString}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},11911:function(e,t){YUI.add("squarespace-models-layout-ec-backed-model-sanitizer-mixin",function(a){a.namespace("Squarespace.Models.Layout");a.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin=a.Base.create("ECBBackedModelSanitizerMixin",a.Base,[],{parse:function(e){e=a.Model.prototype.parse.call(this,e);if(!a.Lang.isObject(e))return{};a.Lang.isObject(e.data)||(e.data={layout:{columns:12,rows:[]}});return e},isLayoutEmpty:function(){return this.get("data").get("layout").isEmpty()},isLayoutBlank:function(){return this.get("data").get("layout").isBlank()},_setData:function(e){var t=this.get("data");if(a.instanceOf(t,a.SQS.LayoutEngine.Models.EditableContentBlock)){t.setAttrs(e);return t}if(a.instanceOf(e,a.SQS.LayoutEngine.Models.EditableContentBlock))return e;return new a.SQS.LayoutEngine.Models.EditableContentBlock(e)}},{ATTRS:{data:{value:{},setter:"_setData"}}})},"1.0",{requires:["base","model","@sqs/layout-engine/models-layout"]})},11912:function(e,t,a){var s=a(11890);YUI.add("squarespace-models-layout-page-collection-data",function(e){e.namespace("Squarespace.Models");var t=e.Squarespace.Models.PageCollectionData=e.Base.create("Layout",e.Model,[e.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.collection;e.data=this.getDataInJSON();return e},getDataInJSON:function(){return this.get("data").toJSON()},sync:function(e,t,a){var i=this.get("collectionId");var n;switch(e){case"read":n=s.getPageCollectionData(i);break;case"update":n=s.savePageCollectionData(i,this.toJSON());break;case"create":n=s.createPageCollectionData(i,this.toJSON())}n&&"function"===typeof a&&n.then(a.bind(this,null)).catch(a.bind(this))}},{ATTRS:{collectionId:{getter:function(){return this.get("collection").get("id")}},collection:{},websiteId:{getter:function(){return this.get("collection").get("websiteId")}}}})},"1.0",{requires:["base","model","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},11913:function(e,t){YUI.add("squarespace-slice-type-groups",function(e){e.namespace("Squarespace");e.Squarespace.SliceTypeGroups={BRANDING_TEXT:[e.Squarespace.SliceType.HEADING,e.Squarespace.SliceType.SUB_HEADING,e.Squarespace.SliceType.BODY,e.Squarespace.SliceType.LOGO,e.Squarespace.SliceType.LOCK],ACTION:[e.Squarespace.SliceType.BUTTONS,e.Squarespace.SliceType.NAVIGATION,e.Squarespace.SliceType.CUSTOM_FORM,e.Squarespace.SliceType.NEWSLETTER,e.Squarespace.SliceType.ACTION,e.Squarespace.SliceType.POPUP_OVERLAY_ACTION],MEDIA:[e.Squarespace.SliceType.IMAGE,e.Squarespace.SliceType.GALLERY],VIDEO:[e.Squarespace.SliceType.VIDEO],AUDIO:[e.Squarespace.SliceType.ALBUM],LOCATION:[e.Squarespace.SliceType.MAP],TWITTER:[e.Squarespace.SliceType.TWITTER],SOCIAL_ICONS:[e.Squarespace.SliceType.SOCIAL_ICONS]}},"1.0",{requires:["squarespace-enum"]})},11914:function(e,t,a){var i=a(2738);var n=a(4172);var o=a(6270);var s=a(5960);YUI.add("squarespace-slide-rendering-edit-controller",function(r){r.namespace("Squarespace.SlideRendering");r.Squarespace.SlideRendering.EditController=r.Base.create("EditController",r.Base,[],{initializer:function(e){e.shouldShowPopup?this.onShowOverlay():this._initEditController();this.showPopupOverlayEvent=r.Global.on("popupOverlay:showing",this.onShowOverlay,this);this.hidePopupOverlayEvent=r.Global.on("popupOverlay:hide",this.onHideOverlay,this)},destructor:function(){this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor);this.showPopupOverlayEvent.detach();this.showPopupOverlayEvent=null;this.hidePopupOverlayEvent.detach();this.hidePopupOverlayEvent=null},_initEditController:function(e){var t=e||r.one(".sqs-slide");if(!t)return;this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor);this._currentSlideWidget=r.Widget.getByNode(t);if(!this._currentSlideWidget)return;this._currentSlideWidget.plug(r.Squarespace.SlideRendering.Editor);this._loadLayoutsAndInitFonts(this._bindGlobalSlideUpdate.bind(this))},onShowOverlay:function(){var e='.sqs-slide[data-slide-type="'+n[i.POPUP_OVERLAY]+'"]';var t=r.one(e);this._initEditController(t)},onHideOverlay:function(){var e='.sqs-slide[data-slide-type="'+n[i.COVER_PAGE]+'"]';var t=r.one(e);this._initEditController(t)},_bindGlobalSlideUpdate:function(){r.Global.detach("slideUpdate");r.Global.after("slideUpdate",function(a){var i=s.getWrapperSelector(a.slideType);var n=r.one(i);if(!n)return;this._loadDefaultFontsForLayout(a.layoutId,function(){var e=n.one(".sqs-slide");var t=r.Widget.getByNode(e);n.replace(a.renderedSlide);t&&t.destroy();r.later(100,this,function e(){t=this._createAndRenderNewSlideWidget(i);t.plug(r.Squarespace.SlideRendering.Editor);r.Global.fire("slideUpdateRendered")})}.bind(this))}.bind(this))},_createAndRenderNewSlideWidget:function(e){var t=r.one(e+" .sqs-slide");var a=t.getAttribute("data-slide-layout-id");return r.Squarespace.SlideRendering.Layouts.Factory.create(a,{boundingBox:t,render:true})},_loadLayoutsAndInitFonts:function(e){var t=r.all(".sqs-slide");var a=[];t.each(function(e){a.push(o[e.getAttribute("data-slide-type")])});this._layouts=new r.Squarespace.Models.SlideLayoutList({slideTypes:a});var i=new r.Parallel;var n=i.add();var s=i.add();r.Squarespace.TypekitUtils.initStaticContextFonts(function(){r.Squarespace.TypekitUtils.appendPreviewScript(n)});this._layouts.load(function(){s.call(this)}.bind(this));i.done(function(){t.each(function(e){var t=e.getAttribute("data-slide-layout-id");this._loadDefaultFontsForLayout(t)}.bind(this));e&&e()}.bind(this))},_loadDefaultFontsForLayout:function(e,t){var a=this._layouts.getByIdentifier(e);if(!a){false;return}var i=new r.Parallel;a.get("typekitFonts").forEach(function(e){var t=e.cssName;r.config.win.SquarespaceFonts.loadTypekit(t,i.add())});t&&i.done(t);var n=[];a.get("webFonts").forEach(function(e){n.push(e)});n.length>0&&r.config.win.SquarespaceFonts.load({googleFamilies:n})}})},"1.0",{requires:["base","parallel","widget","squarespace-enum","squarespace-models-slide","squarespace-models-slide-layout-list","squarespace-slide-rendering-editor","squarespace-slide-rendering-layouts-factory","squarespace-typekit-utils"]})},11915:function(e,t){YUI.add("squarespace-models-slide",function(n){n.namespace("Squarespace.Models");n.Squarespace.Models.Slide=n.Base.create("Slide",n.Model,[n.Squarespace.ModelSync.REST],{root:n.Squarespace.API_ROOT+"slides",url:n.Squarespace.API_ROOT+"slides/{id}",renderPreview:function(e,i){return new n.Promise(n.bind(function(t,a){try{n.Data.post({headers:{"Content-Type":"application/json"},url:n.Squarespace.API_ROOT+"slides/preview",data:n.JSON.stringify({slide:this.toJSON(),slices:e.toJSON(),useDefaultTweaks:i}),success:function(e){t(e)},failure:function(e){a(e)}},this)}catch(e){console.error(e)}},this))}},{ATTRS:{id:{value:null},type:{value:null,validator:n.Squarespace.AttrValidators.isNullOrValueIn(n.Squarespace.SlideType),writeOnce:"initOnly"},collectionId:{value:null},createdOn:{value:null},updatedOn:{value:null},layoutIdentifier:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},11916:function(e,t){YUI.add("squarespace-models-slide-layout-list",function(s){s.namespace("Squarespace.Models");var a=s.Squarespace.Models.SlideLayoutList=s.Base.create("SlideLayoutList",s.Squarespace.Models.ModelList,[],{model:s.Squarespace.Models.SlideLayout,url:s.Squarespace.API_ROOT+"slide-layouts",getURL:function(){var e=s.Squarespace.ModelSync.REST.prototype.getURL.apply(this,arguments);var t=e.split("?");var a=t[1];var i=s.Lang.isValue(a);var n=i?s.QueryString.parse(a):{};this.get("slide")?n.slideTypes=this.get("slide").get("type"):this.get("slideTypes")&&(n.slideTypes=this.get("slideTypes"));return t[0]+"?"+s.QueryString.stringify(n)},parse:function(e){var t=a.superclass.parse.call(this,e);t.forEach(function(e){e.sliceAreas=s.Object.values(e.sliceAreas)});return t},getByIdentifier:function(t){var a;var e=this.some(function(e){if(e.get("identifier")===t){a=e;return true}});!e&&false;return a},comparator:function(e){var t=e.get("status");var a=this.get("slide")?this.get("slide").get("layoutIdentifier"):"";var i=e.get("identifier");var n=e.get("category")+i;if(t===s.Squarespace.SlideLayoutStatus.ALPHA)return"z"+n;if(t===s.Squarespace.SlideLayoutStatus.BETA)return"y"+n;if(i===a)return"0";return n}},{ATTRS:{slide:{value:null,validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Models.Slide)},slideTypes:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-model-list","squarespace-models-slide","squarespace-models-slide-layout","squarespace-util"]})},11917:function(e,t){YUI.add("squarespace-models-slide-layout",function(a){a.namespace("Squarespace.Models");var t=a.Squarespace.Models.SlideLayout=a.Base.create("SlideLayout",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.API_ROOT+"slide-layouts",hasSliceType:function(t){a.Lang.isArray(t)||(t=[t]);return this.get("sliceAreas").some(function(e){return-1!==t.indexOf(e.get("sliceType"))})},toJSON:function(){var e=t.superclass.toJSON.call(this);e.sliceAreas=e.sliceAreas.toJSON();return e}},{ATTRS:{identifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},sliceAreas:{valueFn:function(){return new a.Squarespace.Models.SliceAreaList},setter:function(e){if(!(e instanceof a.Squarespace.Models.SliceAreaList))return new a.Squarespace.Models.SliceAreaList({items:e});return e},writeOnce:"initOnly"},name:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},category:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(a.Squarespace.SlideLayoutCategory),writeOnce:"initOnly"},status:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(a.Squarespace.SlideLayoutStatus),writeOnce:"initOnly"},typekitFonts:{value:[],validator:a.Squarespace.AttrValidators.isArray},webFonts:{value:[],validator:a.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-area-list","squarespace-util"]})},11918:function(e,t){YUI.add("squarespace-models-slice-area-list",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.SliceAreaList=e.Base.create("SliceAreaList",e.ModelList,[],{model:e.Squarespace.Models.SliceArea,filterBySliceTypes:function(t){return this.filter({asList:true},function(e){return-1!==t.indexOf(e.get("sliceType"))})}})},"1.0",{requires:["base","model-list","squarespace-models-slice-area"]})},11919:function(e,t){YUI.add("squarespace-models-slice-area",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.SliceArea=t.Base.create("SliceArea",t.Model,[],{toJSON:function(){var e=a.superclass.toJSON.call(this);e.demoSlice=e.demoSlice.toJSON();return e}},{ATTRS:{sliceType:{value:t.Squarespace.SliceType.HEADING,validator:t.Squarespace.AttrValidators.isValueIn(t.Squarespace.SliceType),writeOnce:"initOnly"},params:{value:{},validator:t.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},demoSlice:{value:null,setter:function(e){if(!(e instanceof t.Squarespace.Models.Slice))return new t.Squarespace.Models.Slice(e);return e},writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-models-slice"]})},11920:function(e,t,a){YUI.add("squarespace-models-slice",function(n){n.namespace("Squarespace.Models");var s=n.Squarespace.Models.Slice=n.Base.create("Slice",n.Model,[n.Squarespace.ModelSync.REST],{root:n.Squarespace.API_ROOT+"slides/{slideId}/slices",url:n.Squarespace.API_ROOT+"slides/{slideId}/slices/{id}",initializer:function(){n.Do.after(function(){var e=n.Do.currentRetVal;e=e.replace("{slideId}",this.get("slideId"));return new n.Do.AlterReturn("Templating slideId.",e)},this,"getURL",this)},updateContentReferences:function(e){this.get("content").updateReferences(e)},save:function(a,i){if(n.Lang.isFunction(a)){i=a;a={}}this.get("content").saveReferences(n.bind(function(e,t){n.Lang.isValue(e)?n.Lang.isValue(i)&&i.call(this,e,t):s.superclass.save.call(this,a,function(e,t){this._resetClientAttrs();n.Lang.isFunction(i)&&i(e,t)}.bind(this))},this))},serialize:function(){var e=this.toJSON();delete e.content.acceptedTypes;return n.JSON.stringify(e)},parse:function(e){var t=s.superclass.parse.call(this,e);this.get("content").setAttrs(t.content);delete t.content;return t},toJSON:function(){var e=s.superclass.toJSON.call(this);e.content=e.content.toJSON();return e},renderPreview:function(e,i){return new n.Promise(n.bind(function(t,a){try{n.Data.post({json:true,url:n.Squarespace.API_ROOT+"slides/slice-preview",data:{slice:this.toJSON(),slideLayoutIdentifier:e,slideType:i},success:function(e){t(e)},failure:function(e){a(e)}},this)}catch(e){false}},this))},_resetClientAttrs:function(){this.get("content").resetClientAttrs()}},{ATTRS:{id:{value:null},slideId:{value:null},type:{value:null,validator:n.Squarespace.AttrValidators.isNullOrValueIn(n.Squarespace.SliceType)},content:{valueFn:function(){var e=this.get("type");return n.Squarespace.Models.SliceContent.Factory.create(e)},setter:function(e){var t=this.get("slideId");if(!(e instanceof n.Squarespace.Models.SliceContent.Base)){var a=this.get("type");e=n.merge({},e,{slideId:t});return n.Squarespace.Models.SliceContent.Factory.create(a,e)}e.set("slideId",t);return e},writeOnce:"initOnly"},isDemo:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},isCompoundType:{getter:function(){var e=this.get("content");return e instanceof n.Squarespace.Models.SliceContent.Compound}},absoluteType:{getter:function(){if(this.get("isCompoundType"))return this.get("content").get("currentType");return this.get("type")}},absoluteContent:{getter:function(){var e=this.get("content");if(this.get("isCompoundType"))return e.get("currentContent");return e}}}})},"1.0",{requires:["base","event-custom","json","model","promise","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-content-base","squarespace-models-slice-content-factory","squarespace-models-slice-content-compound","squarespace-util"]})},11921:function(e,t){YUI.add("squarespace-models-slice-content-base",function(t){t.namespace("Squarespace.Models.SliceContent");t.Squarespace.Models.SliceContent.Base=t.Base.create("Base",t.Model,[],{saveReferences:function(e){t.Lang.isFunction(e)&&e()},updateReferences:function(e){},resetClientAttrs:function(){}},{ATTRS:{_type:{value:null,validator:t.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly",readOnly:true},slideId:{value:null},refreshRenderingAfterSave:{value:false,validator:t.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},11922:function(e,t){YUI.add("squarespace-models-slice-content-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.Models.SliceContent,"SLICE_TYPE");e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-models-slice-content-action","squarespace-models-slice-content-album","squarespace-models-slice-content-body","squarespace-models-slice-content-buttons","squarespace-models-slice-content-custom-form","squarespace-models-slice-content-gallery","squarespace-models-slice-content-heading","squarespace-models-slice-content-image","squarespace-models-slice-content-lock","squarespace-models-slice-content-logo","squarespace-models-slice-content-map","squarespace-models-slice-content-navigation","squarespace-models-slice-content-newsletter","squarespace-models-slice-content-popup-overlay-action","squarespace-models-slice-content-password","squarespace-models-slice-content-social-icons","squarespace-models-slice-content-sub-heading","squarespace-models-slice-content-twitter","squarespace-models-slice-content-video"]})},11923:function(e,t){YUI.add("squarespace-models-slice-content-action",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Action=e.Base.create("Action",e.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:e.Squarespace.SliceType.ACTION,ATTRS:{_type:{value:"Action"},acceptedTypes:{value:[e.Squarespace.SliceType.BUTTONS,e.Squarespace.SliceType.NAVIGATION]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},11924:function(e,t){YUI.add("squarespace-models-slice-content-compound",function(n){n.namespace("Squarespace.Models.SliceContent");var t=n.Squarespace.Models.SliceContent.Compound=n.Base.create("Compound",n.Squarespace.Models.SliceContent.Base,[],{initializer:function(){this._currentContentMap={};var i=n.Squarespace.Models.SliceContent.Factory;this.after("currentTypeChange",function(e){this._currentContentMap[e.prevVal]=this.get("currentContent");var t=e.newVal;var a=this._currentContentMap[t];n.Lang.isValue(a)?this.set("currentContent",a):this.set("currentContent",i.create(t))},this)},toJSON:function(){var e=t.superclass.toJSON.call(this);e.currentContent=e.currentContent.toJSON();return e},saveReferences:function(e){this.get("currentContent").saveReferences(e)},updateReferences:function(e){this.get("currentContent").updateReferences(e)}},{ATTRS:{acceptedTypes:{value:[],validator:n.Squarespace.AttrValidators.isArray,writeOnce:"initOnly"},currentType:{valueFn:function(){return this.get("acceptedTypes")[0]},validator:function(e){return-1!==this.get("acceptedTypes").indexOf(e)}},currentContent:{valueFn:function(){var e=this.get("currentType");return n.Squarespace.Models.SliceContent.Factory.create(e)},setter:function(e){if(!(e instanceof n.Squarespace.Models.SliceContent.Base)){var t=this.get("currentContent");if(n.Lang.isValue(t)){t.setAttrs(e);return t}var a=this.get("currentType");return n.Squarespace.Models.SliceContent.Factory.create(a,e)}return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-factory"]})},11925:function(e,t,a){var n=a(24).t;var s=a(229);YUI.add("squarespace-models-slice-content-album",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Album=i.Base.create("Album",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentCollection],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.contentCollection;delete e.eventListeners;return e},updateReferences:function(e){var t=this.get("contentCollectionId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentCollection").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.ALBUM,ATTRS:{_type:{value:"Album"},contentCollection:{valueFn:function(){var e=i.Squarespace.Utils.getGuid();return new i.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId"),type:s.SLIDE_ALBUM,ordering:i.Squarespace.CollectionOrdering.MUSIC_ALBUM,metadata:{typeName:"music-album"},title:n("Slide Album {id}",{id:e}),navigationTitle:e,enabled:true,itemLimit:60,itemCount:0})}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},11926:function(e,t){YUI.add("squarespace-models-slice-content-has-content-collection",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasContentCollection=a.Base.create("HasContentCollection",a.Base,[a.Squarespace.Mixins.EventRegistrar],{initializer:function(){var e=this.get("contentCollection");e&&e.get("type")!==a.Squarespace.CollectionTypes.INSTAGRAM&&this._registerEvent(e.after("idChange",function(e){this.set("contentCollectionId",e.newVal)},this));this.after("contentCollectionChange",function(e){var t=e.newVal;t.get("type")!==a.Squarespace.CollectionTypes.INSTAGRAM&&this._registerEvent(t.after("idChange",function(e){this.set("contentCollectionId",e.newVal)}.bind(this)))}.bind(this))}},{ATTRS:{contentCollectionId:{value:null},contentCollection:{valueFn:function(){return new a.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId")})},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ContentCollection)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-event-registrar","squarespace-models-content-collection"]})},11927:function(e,t){YUI.add("squarespace-models-slice-content-body",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Body=e.Base.create("Body",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.BODY,ATTRS:{_type:{value:"Body"},body:{value:null,validator:e.Squarespace.AttrValidators.isNullOrObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base"]})},11928:function(e,t){YUI.add("squarespace-models-slice-content-buttons",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Buttons=e.Base.create("Buttons",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:e.Squarespace.SliceType.BUTTONS,ATTRS:{_type:{value:"Buttons"},limit:{value:2}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},11929:function(e,t){YUI.add("squarespace-models-slice-content-has-links",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasLinks=a.Base.create("HasLinks",a.Base,[],{initializer:function(){this.get("links").after("*:change",function(){this.fire("change")},this);a.Do.after(function(){var e=a.Do.currentRetVal;e.links=e.links.toJSON();return e},this,"toJSON",this)}},{ATTRS:{links:{valueFn:function(){var e=new a.ModelList({model:a.Squarespace.Models.SliceContent.Link});for(var t=0;t<this.get("limit");t++)e.add({});return e},setter:function(e){if(e instanceof a.ModelList)return e;return new a.ModelList({model:a.Squarespace.Models.SliceContent.Link,items:e})},validator:function(e){var t=this.get("limit");if(e instanceof a.ModelList)return e.size()<=t;if(a.Lang.isArray(e))return e.length<=t;return false},writeOnce:"initOnly"},limit:{value:5,validator:a.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","model-list","squarespace-attr-validators","squarespace-models-slice-content-link"]})},11930:function(e,t){YUI.add("squarespace-models-slice-content-link",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Link=e.Base.create("Link",e.Model,[],{},{ATTRS:{text:{value:"",validator:e.Squarespace.AttrValidators.isString},clickthroughUrl:{value:{},validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},11931:function(e,t,a){var i=a(24).t;YUI.add("squarespace-models-slice-content-custom-form",function(n){n.namespace("Squarespace.Models.SliceContent");function e(a,i){return function(){var e=this.get(a);if(n.Lang.isValue(e)){var t=new n.Squarespace.Models.Form({formId:e});return t}return new i}}var t=n.Squarespace.Models.SliceContent.CustomForm=n.Base.create("CustomForm",n.Squarespace.Models.SliceContent.Base,[n.Squarespace.Models.SliceContent.HasForm],{initializer:function(){this.get("newsletterForm").after("idChange",function(e){this.set("newsletterFormId",e.newVal)},this)},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.form;delete e.newsletterForm;return e},updateReferences:function(e){this._updateFormReferences(this.get("formId"),this.get("form"),e);this._updateFormReferences(this.get("newsletterFormId"),this.get("newsletterForm"),e)},_updateFormReferences:function(e,t,a){if(n.Lang.isValue(e)){var i=a[e];n.Lang.isValue(i)&&t.setAttrs(i)}}},{SLICE_TYPE:n.Squarespace.SliceType.CUSTOM_FORM,ATTRS:{_type:{value:"CustomForm"},buttonLabel:{value:i("Open Form")},isNewsletterFormSelected:{value:false},newsletterFormId:{value:null},newsletterForm:{valueFn:e("newsletterFormId",n.Squarespace.Models.SliceDemoNewsletterForm)},form:{valueFn:e("formId",n.Squarespace.Models.SliceDemoCustomForm)}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form"]})},11932:function(e,t){YUI.add("squarespace-models-slice-content-has-form",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.HasForm=e.Base.create("HasForm",e.Base,[],{initializer:function(){this.get("form").after("idChange",function(e){this.set("formId",e.newVal)},this)}},{ATTRS:{formId:{value:null},buttonLabel:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},form:{valueFn:function(){return new e.Squarespace.Models.Form({formId:this.get("formId")})},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.Form),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-form"]})},11933:function(e,t,a){var n=a(24).t;YUI.add("squarespace-models-slice-content-gallery",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Gallery=i.Base.create("Gallery",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentCollection],{initializer:function(){this.after("sourceChange",function(e){this.set("contentCollection",this.get("defaultCollections")[e.newVal])}.bind(this))},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.contentCollection;delete e.defaultCollections;delete e.eventListeners;return e},updateReferences:function(e){var t=this.get("contentCollectionId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentCollection").setAttrs(a)}},resetClientAttrs:function(){this.get("source")!==i.Squarespace.BackgroundSource.UPLOAD&&(this.get("defaultCollections")[i.Squarespace.BackgroundSource.UPLOAD]=this._getNewUploadCollection())},_getNewUploadCollection:function(){var e=n("Transient Gallery {transientGalleryId}",{transientGalleryId:i.Squarespace.Utils.getGuid()});return new i.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:i.Squarespace.CollectionTypes.GALLERY_BLOCK,ordering:i.Squarespace.CollectionOrdering.USER,title:e,navigationTitle:e,enabled:true,urlId:i.Squarespace.Utils.getGuid(),itemCount:0})},_getNewVideoCollection:function(){return this._getNewUploadCollection()}},{SLICE_TYPE:i.Squarespace.SliceType.GALLERY,ATTRS:{_type:{value:"Gallery"},source:{value:i.Squarespace.BackgroundSource.UPLOAD,validator:i.Squarespace.AttrValidators.isValueIn(i.Squarespace.BackgroundSource)},disableImages:{value:false},contentCollection:{valueFn:function(){var e=this.get("source");return this.get("defaultCollections")[e]}},defaultCollections:{valueFn:function(){var e={};e[i.Squarespace.BackgroundSource.UPLOAD]=this._getNewUploadCollection();e[i.Squarespace.BackgroundSource.VIDEO]=this._getNewVideoCollection();e[i.Squarespace.BackgroundSource.NONE]=this._getNewUploadCollection();return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},11934:function(e,t){YUI.add("squarespace-models-slice-content-heading",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Heading=e.Base.create("Heading",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:e.Squarespace.SliceType.HEADING,ATTRS:{_type:{value:"Heading"}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},11935:function(e,t){YUI.add("squarespace-models-slice-content-has-text",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.HasText=e.Base.create("HasText",e.Base,[],{},{ATTRS:{text:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators"]})},11936:function(e,t){YUI.add("squarespace-models-slice-content-image",function(i){i.namespace("Squarespace.Models.SliceContent");i.Squarespace.Models.SliceContent.Image=i.Base.create("Image",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(a){this.get("contentItem").save(i.bind(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)},this))},updateReferences:function(e){var t=this.get("contentItemId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentItem").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.IMAGE,ATTRS:{_type:{value:"Image"},newContentItemConfig:{value:{recordType:i.Squarespace.RecordType.IMAGE}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},11937:function(e,t){YUI.add("squarespace-models-slice-content-has-content-item",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasContentItem=a.Base.create("HasContentItem",a.Base,[],{initializer:function(){this._bindContentItemIdChange();var e=this.get("id");this.after(e+"|contentItemChange",function(e){this.set("contentItemId",e.newVal.get("id"));this._bindContentItemIdChange()},this);this._afterToJSON=a.after(function(){var e=a.Do.currentRetVal;var t=e.contentItem;a.Lang.isValue(t)&&(e.contentItem=t.toJSON());return new a.Do.AlterReturn("ContentItem toJSON",e)},this,"toJSON",this)},destructor:function(){this._afterToJSON.detach()},_bindContentItemIdChange:function(){var e=this.get("id");this.get("contentItem").after(e+"|idChange",function(e){this.set("contentItemId",e.newVal)},this)}},{ATTRS:{contentItemId:{value:null},contentItem:{valueFn:function(){var e=this.get("newContentItemConfig");return new a.Squarespace.Models.ContentItem(a.merge(e,{id:this.get("contentItemId")}))},getter:function(e){return e},setter:function(e){if(e instanceof a.Squarespace.Models.ContentItem)return e;if(a.Lang.isObject(e))return new a.Squarespace.Models.ContentItem(e);if(a.Lang.isNull(e)){var t=this.get("newContentItemConfig");return new a.Squarespace.Models.ContentItem(a.merge(t,{id:null}))}}},newContentItemConfig:{value:{},validator:a.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-content-item"]})},11938:function(e,t){YUI.add("squarespace-models-slice-content-lock",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Lock=e.Base.create("Lock",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.LOCK,ATTRS:{_type:{value:"Lock"},display:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},11939:function(e,t){YUI.add("squarespace-models-slice-content-logo",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Logo=e.Base.create("Logo",e.Squarespace.Models.SliceContent.Compound,[],{resetClientAttrs:function(){this.get("currentType")!==e.Squarespace.SliceType.IMAGE&&delete this._currentContentMap[e.Squarespace.SliceType.IMAGE]}},{SLICE_TYPE:e.Squarespace.SliceType.LOGO,ATTRS:{_type:{value:"Logo"},acceptedTypes:{value:[e.Squarespace.SliceType.IMAGE,e.Squarespace.SliceType.HEADING]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},11940:function(e,t){YUI.add("squarespace-models-slice-content-map",function(t){t.namespace("Squarespace.Models.SliceContent");var a=t.Squarespace.Models.SliceContent.Map=t.Base.create("Map",t.Squarespace.Models.SliceContent.Base,[],{toJSON:function(){var e=a.superclass.toJSON.call(this);e.location=e.location.toJSON();return e}},{SLICE_TYPE:t.Squarespace.SliceType.MAP,ATTRS:{_type:{value:"Map"},location:{valueFn:function(){return new t.Squarespace.Models.GeoLocation},setter:function(e){if(!(e instanceof t.Squarespace.Models.GeoLocation))return new t.Squarespace.Models.GeoLocation(e);return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-geo-location","squarespace-models-slice-content-base"]})},11941:function(e,t){YUI.add("squarespace-models-geo-location",function(e){var t=40.72;var a=-74;e.namespace("Squarespace.Models");e.Squarespace.Models.GeoLocation=e.Base.create("GeoLocation",e.Model,[],{},{ATTRS:{mapZoom:{value:10,validator:e.Squarespace.AttrValidators.isNumber},mapLat:{value:t,validator:e.Squarespace.AttrValidators.isNumber},mapLng:{value:a,validator:e.Squarespace.AttrValidators.isNumber},markerLat:{value:t,validator:e.Squarespace.AttrValidators.isNumber},markerLng:{value:a,validator:e.Squarespace.AttrValidators.isNumber},addressTitle:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressLine1:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressLine2:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressCountry:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},11942:function(e,t){YUI.add("squarespace-models-slice-content-navigation",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Navigation=e.Base.create("Navigation",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:e.Squarespace.SliceType.NAVIGATION,ATTRS:{_type:{value:"Navigation"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},11943:function(e,t,a){var i=a(24).t;YUI.add("squarespace-models-slice-content-newsletter",function(n){n.namespace("Squarespace.Models.SliceContent");var t=n.Squarespace.Models.SliceContent.Newsletter=n.Base.create("Newsletter",n.Squarespace.Models.SliceContent.Base,[n.Squarespace.Models.SliceContent.HasForm],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.form;return e},saveReferences:function(a){var e=this.get("mailchimpConnect");var t=this.get("googleDocsConnect");if(e||t){var i=this.get("form");i.set("backendConnectionConfigs",{googleDocsConnect:t,mailchimpConnect:e});i.save(function(e,t){n.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}else a.call(this)},updateReferences:function(e){var t=this.get("formId");if(n.Lang.isValue(t)){var a=e[t];if(n.Lang.isValue(a)){var i=this.get("form");i.setAttrs(a)}}}},{SLICE_TYPE:n.Squarespace.SliceType.NEWSLETTER,ATTRS:{_type:{value:"Newsletter"},form:{valueFn:function(){var e=this.get("formId");if(n.Lang.isValue(e))return new n.Squarespace.Models.Form({formId:e});var t=new n.Squarespace.Models.SliceDemoNewsletterForm;var a=t.get("fields");n.Array.each(a,function(e){n.Squarespace.FormEditingUtils.resolveFieldId(e,a)},this);return t}},mailchimpConnect:{},googleDocsConnect:{},submitButtonText:{value:i("Sign Up")},disclaimerMessage:{value:{html:i("We respect your privacy.")}},submissionHTML:{},submissionMessage:{value:{html:i("Thank you!")}},successRedirect:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-form-editing-utils","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-newsletter-form"]})},11944:function(e,t){YUI.add("squarespace-models-slice-content-popup-overlay-action",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.PopupOverlayAction=e.Base.create("PopupOverlayAction",e.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:e.Squarespace.SliceType.POPUP_OVERLAY_ACTION,ATTRS:{_type:{value:"PopupOverlayAction"},acceptedTypes:{value:[e.Squarespace.SliceType.NEWSLETTER,e.Squarespace.SliceType.BUTTONS]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},11945:function(e,t){YUI.add("squarespace-models-slice-content-password",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Password=e.Base.create("Password",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.PASSWORD,ATTRS:{_type:{value:"Password"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},11946:function(e,t){YUI.add("squarespace-models-slice-content-social-icons",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.SocialIcons=e.Base.create("SocialIcons",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.SOCIAL_ICONS,ATTRS:{_type:{value:"SocialIcons"},display:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},11947:function(e,t){YUI.add("squarespace-models-slice-content-sub-heading",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.SubHeading=e.Base.create("SubHeading",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:e.Squarespace.SliceType.SUB_HEADING,ATTRS:{_type:{value:"SubHeading"}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},11948:function(e,t){YUI.add("squarespace-models-slice-content-twitter",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Twitter=i.Base.create("Twitter",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasConnectedAccount],{initializer:function(){var e=this.get("id");this.get("socialData").after(e+"|change",function(e){var t=e.changed.socialSearch;i.Lang.isValue(t)&&this.set("socialSearchId",t.newVal.id)},this);this.after("useSearchChange",function(e){this.set("refreshRenderingAfterSave",e.newVal)}.bind(this))},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.socialData;delete e.connectedAccount;return e},saveReferences:function(a){if(this.get("useSearch")){var e=this.get("socialData");e.set("preview",false);e.save(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}else a.call(this)},updateReferences:function(e){var t=this.get("socialSearchId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("socialData").set("socialSearch",a)}},previewSocialSearch:function(a){var e=this.get("socialData");e.set("preview",true);e.save(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}},{SLICE_TYPE:i.Squarespace.SliceType.TWITTER,ATTRS:{_type:{value:"Twitter"},serviceId:{value:i.Squarespace.ExternalServiceProviders.TWITTER},socialSearchId:{value:null},useSearch:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},numTweets:{value:10,validator:i.Squarespace.AttrValidators.isNumber},showAvatar:{value:true,validator:i.Squarespace.AttrValidators.isBoolean},showDisplayName:{value:true,validator:i.Squarespace.AttrValidators.isBoolean},socialData:{valueFn:function(){return new i.Squarespace.Models.SocialData({socialSearch:{referenceId:this.get("slideId"),referenceType:i.Squarespace.SocialSearchReferenceType.SLIDE,serviceProvider:i.Squarespace.ExternalServiceProviders.TWITTER}})},setter:function(e){e.get("socialSearch.referenceId")||e.set("socialSearch.referenceId",this.get("slideId"));return e},validator:i.Squarespace.AttrValidators.isInstanceOf(i.Squarespace.Models.SocialData)},refreshRenderingAfterSave:{valueFn:function(){return this.get("useSearch")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-connected-account","squarespace-models-social-data"]})},11949:function(e,t){YUI.add("squarespace-models-slice-content-has-connected-account",function(t){t.namespace("Squarespace.Models.SliceContent");t.Squarespace.Models.SliceContent.HasConnectedAccount=t.Base.create("HasConnectedAccount",t.Base,[],{initializer:function(){this.after("connectedAccountIdChange",function(){this.set("connectedAccount",this._getConnectedAccount())},this)},destructor:function(){this._afterToJSON.detach()},_getConnectedAccount:function(){var e=this.get("connectedAccountId");if(t.Lang.isValue(e))return t.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(e);return null}},{ATTRS:{serviceId:{value:null,validator:t.Squarespace.AttrValidators.isNullOrValueIn(t.Squarespace.ExternalServiceProviders)},connectedAccountId:{value:null},connectedAccount:{valueFn:"_getConnectedAccount",validator:t.Squarespace.AttrValidators.isNullOrInstanceOf(t.Squarespace.Models.ConnectedAccount)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-connected-account","squarespace-models-connected-accounts"]})},11950:function(e,t){YUI.add("squarespace-models-slice-content-video",function(i){i.namespace("Squarespace.Models.SliceContent");i.Squarespace.Models.SliceContent.Video=i.Base.create("Video",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(a){this.get("contentItem").save(i.bind(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)},this))},updateReferences:function(e){var t=this.get("contentItemId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentItem").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.VIDEO,ATTRS:{_type:{value:"Video"},newContentItemConfig:{value:{recordType:i.Squarespace.RecordType.VIDEO}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},11951:function(e,t,a){var n=a(100);var s=a(11541);var c=a(5994);var r=a(5333);YUI.add("squarespace-slide-rendering-editor",function(l){var e=["branding-font","heading-font","body-font","navigation-font","button-font","track-font","vertical-positioning","horizontal-positioning","alignment"];var i=["enable-gallery-border","gallery-border-size","gallery-size"];l.namespace("Squarespace.SlideRendering");l.Squarespace.SlideRendering.Editor=l.Base.create("Editor",l.Plugin.Base,[],{initializer:function(){this._bindGlobalEvents()},destructor:function(){this._sliceUpdateHandler&&this._sliceUpdateHandler.detach();this._videoPropUpdateHandler&&this._videoPropUpdateHandler.detach();this._tweakChangeHandler&&this._tweakChangeHandler.detach();this._slicePreviewTimers&&l.Object.each(this._slicePreviewTimers,function(e){e.cancel()})},_bindGlobalEvents:function(){l.Global.detach("sliceUpdate");this._sliceUpdateHandler=l.Global.after("sliceUpdate",function e(t){false;var a=new l.Squarespace.Models.Slice(t.slice);!t.forceServerRefresh&&this._sliceCanClientRefresh(a)?this._clientRefreshSlice(a):this._serverRefreshSlice(a,t.slideType)},this);this._videoPropUpdateHandler=l.Global.after("videoPropUpdate",function(e){if(this.scheduledVideoUpdate){clearTimeout(this.scheduledVideoUpdate);this.scheduledVideoUpdate=null}this._attemptBackgroundVideoUpdate(e.slice,e.changeData)},this);this._tweakChangeHandler=l.Global.on("tweak:change",n(function(e){var t=e.getName();this._isTweakResponsive(t)&&this.get("host")._syncResponsiveComponents();this._isTweakImageRefresh(t)&&this.get("host").get("contentBox").one('[data-slice-type="gallery"] .sqs-active-slide img').refresh()},100),this)},_attemptBackgroundVideoUpdate:function(t,a){try{this._updateBackgroundVideo(t,a);this.scheduledVideoUpdate=null}catch(e){this.scheduledVideoUpdate=setTimeout(function(){this._attemptBackgroundVideoUpdate(t,a)}.bind(this),0)}},_sliceCanClientRefresh:function(e){var t=this._getSliceNode(e.get("type"),e.get("isCompoundType"));var a="true"===t.getAttribute("data-content-empty");var i=t.getAttribute("data-slice-type");var n=e.get("absoluteType")!==c[i];if(a||n)return false;var s=this.get("host")._sliceWidgetMap[e.get("type")];return s&&s.get("canClientRefresh")},_clientRefreshSlice:function(e){var t=this.get("host")._sliceWidgetMap[e.get("type")];t.refreshFromSliceContent(e.get("absoluteContent"));this.get("host")._syncResponsiveComponents()},_serverRefreshSlice:function(e,t){l.Lang.isValue(this._slicePreviewTimers)||(this._slicePreviewTimers={});var a=e.get("type");this._slicePreviewTimers[a]&&this._slicePreviewTimers[a].cancel();var i=this.get("host");var n=i.get("slideLayoutIdentifier");this._slicePreviewTimers[a]=l.later(250,this,function(){e.renderPreview(n,t).then(l.bind(function(e){this._replaceSlice(e.renderedSlice);i._destroyResponsiveComponents();i._initResponsiveComponents();i._syncResponsiveComponents();r.parse()},this))})},_updateBackgroundVideo:function(e,t){var a=this.get("host")._sliceWidgetMap[e.type];var i=a.videoBg;i[t.key]=t.val;this._updateItemAttribute(a.get("items"),t);if("url"===t.key){i.destroy();a._initGallery()}else i.syncPlayer()},_updateItemAttribute:function(e,t){var a="data-config-"+t.key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e.each(function(e){e.setAttribute(a,t.val||"")})},_replaceSlice:function(e){var t=l.Node.create(e);var a=c[t.getAttribute("data-slice-type")];var i=c[t.getAttribute("data-compound-type")];var n;var s;if(i){n=this._getSliceNode(i,true);s=i}else{n=this._getSliceNode(a,false);s=a}var r=l.Node.create('<div class="wrap-node"></div>');n.wrap(r);n.remove(true);var o=this.get("host");o._sliceWidgetMap[s]&&o._sliceWidgetMap[s].destroy();r.setHTML(t);t.unwrap();"true"===t.getAttribute("data-content-empty")?delete o._sliceWidgetMap[s]:o._widgetizeSliceNode(t)},_getSliceNode:function(e,t){var a=s[e];var i;i=t?'[data-compound-type="'+a+'"]':'[data-slice-type="'+a+'"]:not([data-compound-type])';var n=this.get("host").get("contentBox").one(i);!n&&false;return n},_isTweakResponsive:function(t){var a=false;e.forEach(function(e){0===t.indexOf(e)&&(a=true)});return a},_isTweakImageRefresh:function(t){var a=false;i.forEach(function(e){0===t.indexOf(e)&&(a=true)});return a}},{NS:"editor"})},"1.0",{requires:["base","node","plugin","squarespace-models-slice"]})},11952:function(e,t,a){var n=a(24).t;var i=a(595);var c=a(1577);YUI.add("squarespace-typekit-utils",function(l){l.namespace("Squarespace");l.Squarespace.TypekitUtils={appendPreviewScript:function(t,e){var a=this._getFrameStatic(e);if(!l.Lang.isValue(a))return;var i=e?l.Squarespace.Damask.ContextGlobals.get("Y"):l;var n=a.SQUARESPACE_CONTEXT.website.typekitId;if(n){var s="//use.typekit.net/"+n+".js";c(s,{doc:i.config.doc}).then(function e(){try{window.Typekit.load()}catch(e){}})}else{var r=i.one("body");if(r.one("#typekit-preview-script")){l.Lang.isFunction(t)&&t();return}var o="https://use.typekit.net/previewkits/pk-v1.js?t";c(o,{doc:i.config.doc,id:"typekit-preview-script"}).then(function e(){l.Lang.isFunction(t)&&t()})}},initStaticContextFonts:function(e,t){var a=this._getFrameStatic(t);if(!l.Lang.isValue(a))return;a.SQUARESPACE_CONTEXT.typekitFonts={};a.SQUARESPACE_CONTEXT.typekitkitFonts={};a.SQUARESPACE_CONTEXT.website.typekitId?this._initCustomFonts(e,t):this._initDefaultFonts(e,t)},_initDefaultFonts:function(t,e){var a=this._getFrameStatic(e);if(!l.Lang.isValue(a))return;l.Data.get({url:"/api/fonts/typekit",success:function(e){l.Array.each(e,function(e){var t=i.createUrlSafeString(e.normalName);e.familyName=t;a.SQUARESPACE_CONTEXT.typekitFonts[t]=e});t&&t()}})},_initCustomFonts:function(a,e){var i=this._getFrameStatic(e);if(!l.Lang.isValue(i))return;var t=i.SQUARESPACE_CONTEXT.website.typekitId;l.jsonp("https://typekit.com/api/v1/json/kits/"+t+"/published?callback={callback}",{context:this,on:{failure:function(){console.log("TypekitUtils: Custom kit load failure.")},success:function(e){var t=l.Object.getValue(e,["kit","families"]);l.Lang.isValue(t)&&l.Array.each(t,function(e){var t=e.css_names[0];i.SQUARESPACE_CONTEXT.typekitkitFonts[t]={familyName:t,normalName:e.name,foundry:"Typekit",variationNames:this._getVariationNames(e.variations),variations:e.variations,id:e.id,type:n("Adobe Fonts Project ID")}},this);a&&a()},timeout:function(){console.log("TypekitUtils: Custom kit load timeout.")}},timeout:3e4})},_getVariationNames:function(e){var s=[];l.Array.each(e,function(e,t){var a=e[1];var i=e[0];var n="";switch(a){case"1":n+="Thin";break;case"2":n+="Extra Light";break;case"3":n+="Light";break;case"4":n+="Regular";break;case"5":n+="Medium";break;case"6":n+="Semibold";break;case"7":n+="Bold";break;case"8":n+="Extra Bold";break;case"9":n+="Black";break;default:n+=a+"00";break}switch(i){case"n":n+="";break;case"i":n+=" Italic";break;default:n+=" "+i;break}s[t]=n});return s},_getFrameStatic:function(e){if(e)return l.Squarespace.Damask.ContextGlobals.get("Static");return l.config.win.Static}}},"1.0",{requires:["jsonp","squarespace-damask-context-globals","squarespace-util"]})},11953:function(e,t,a){var i=a(2892);YUI.add("squarespace-damask-preview-frame-base-v8",function(e){e.namespace("Squarespace.Damask.Preview").FrameV8=e.Base.create("preview-base-v8",e.Squarespace.Damask.Preview.FrameBase,[],{toggleFrameExpand:function(){this.getFrameAPI().then(function(e){e.isEditing()||e.toggleFullscreen()})},shrink:function(){this.getFrameAPI().then(function(e){e.isFullscreen()&&e.toggleFullscreen()})},canEditPage:function(){},requestRefresh:function(){this.getFrameAPI().then(function(e){e.isLoading()||e.reload()})},setUrlOrRequestRefresh:function(e){var t=this.get("router");var a=t.getCurrentLocation().state;a&&a.currentUrl===e?this.requestRefresh():t.replaceFrameUrl(e)},getFrameAPI:function(){return i.then(function(e){return e.FrameAPI})}})},"1.0",{requires:["base","squarespace-damask-preview-frame-base"]})},11954:function(e,t,a){var i=a(12388);var n=a(757);YUI.add("squarespace-damask-panel-async-data-panel",function(e){e.namespace("Squarespace.Damask.Panel");e.Squarespace.Damask.Panel.AsyncDataPanel=e.Base.create("AsyncDataPanel",e.Squarespace.SSWidget,[],{CONTENT_TEMPLATE:null,initializer:function(){this.get("boundingBox").setStyles({left:this.get("offset"),width:this.get("width")}).addClass("sqs-damask-panel");this.getPanel(this.get("location.params"),this.done.bind(this),this.redirect.bind(this))},destructor:function(){if(this.widget){this.widget.destroy(true);this.widget=null}this.get("spinner").destroy(true)},getPanel:function(){throw new Error("getPanel must be implemented.")},redirect:function(e){setTimeout(function(){this.get("router").replace(e)}.bind(this),0)},done:function(e){if(this.get("destroyed"))return;this.widget=e;this.get("spinner").stop();var t=this.get("boundingBox");t.removeClass("sqs-damask-panel");this.widget.set("location",this.get("location"));this.widget.set("damask",this.get("damask"));this.widget.set("router",this.get("router"));this.widget.set("direction",this.get("direction"));this.widget.set("widthCallback",this.get("widthCallback"));this.widget.render(t)},addHidingClassname:function(e){this.get("boundingBox").addClass("sqs-damask-panel-hiding");if(n.isSubDesktop()){var t=i.OUTGOING[e];this.widget.get("boundingBox").removeClass(i.INCOMING_PANEL);this.widget.get("boundingBox").addClass(t)}}},{CSS_PREFIX:"async-data-panel",ATTRS:{damask:{},location:{},offset:{},router:{},width:{},widthCallback:{},spinner:{valueFn:function(){return new e.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.get("boundingBox")})}},direction:{}}})},"1.0",{requires:["base","squarespace-spinner","squarespace-ss-widget"]})},11955:function(e,t,a){var n=a(128);var s=a(5085);var r=a(472);YUI.add("squarespace-help",function(i){i.Squarespace.Help={isTutorialCompleted:function(){if(s.getShowUpdate())return false;var e=Static.SQUARESPACE_CONTEXT.website.websiteType;var t=i.merge(i.Squarespace.Context.getInstance().get("websiteSettings").get("tutorialsCompleted"));var a=t.welcome||t["damask-guide"]||t["commerce-guide"]||t.onboarding;if(n.get("skipOnboarding"))return true;if(n.get("alwaysShowGuide"))return false;if(t){if(r.isV8())return t["squarespace-alpha-welcome-screen"];if(i.Squarespace.Utils.isCoverPageOnly())return t["cover-page-guide"];if(e===i.Squarespace.WebsiteType.COMMERCE)return a;if(e===i.Squarespace.WebsiteType.PARKING_PAGE)return"true"!==n.get("showParkingPageOnboarding");return a}return false}}},"1.0",{requires:["squarespace-util"]})},11956:function(e,t,s){var o=s(24).t;YUI.add("squarespace-content-manager-widgets-cover-page",function(r){var a=s(1028);var i=s(34);var n=s(11464);r.namespace("Squarespace.ContentManagerWidgets");var t=r.Squarespace.ContentManagerWidgets.CoverPage=r.Base.create("CoverPage",r.Squarespace.ContentManagerWidgets.Base,[r.Squarespace.Mixins.Loadable,r.Squarespace.Damask.Panel.MixinPanel,r.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){var e=this.get("slideSummary");this._registerEvent(this.get("loadable").onceAfter("load",function(){this._updateSlicesForLayout();this._registerEvent(e.after("load",function(){this._updateSlicesForLayout();this.syncUI()},this))},this));var t=function(){e.load()};this.actionListener=new a(i);this.actionListener.addActionListener(n.SAVE_SUCCESS,t)},destructor:function(){r.Array.each(this._renderedPushers,function(e){e.destroy()});this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy();this.actionListener.removeAllActionListeners()},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");e.append('<div class="cover-page-description">'+o("Cover Pages are simple one-page websites. Customize yours by adding content and tweaking the styles below.")+"</div>");this._editorContainer=this.get("contentBox").appendChild('<div class="editor-container"></div>')},syncUI:function(){t.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},hasUnsavedChanges:function(){return false},ensureSavedChanges:function(e){if(r.Lang.isFunction(e))return e();return r.when(true)},activatePath:function(e){this.get("loading")?this.onceAfter("loadingChange",function(){r.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e)}):r.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.apply(this,arguments)},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=r.later(500,this,function(){this._emptyEditorContainer();this._loadingSpinner&&this._loadingSpinner.destroy();this._loadingSpinner=new r.Squarespace.Spinner({render:this._editorContainer,size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy();this._emptyEditorContainer();this._renderAndRegisterPushers()},_emptyEditorContainer:function(){r.Array.each(this._renderedPushers,function(e){e.destroy()});this._renderedPushers=[];this._editorContainer.empty()},_renderAndRegisterPushers:function(){var e=this._editorContainer;var t=this.get("slideSummary");var a=t.get("slide");var i=a.get("layoutIdentifier");var n=this.get("slideLayouts");var s=n.getByIdentifier(i);this._renderedPushers.push(new r.Squarespace.Widgets.SlideLayoutChooserPusher({render:e,title:o("Layout"),name:"layout",selectedLayout:s}));s.hasSliceType(r.Squarespace.SliceTypeGroups.BRANDING_TEXT)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Branding & Text"),description:o("Logo, headline, body text, and social"),name:"branding-text"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.VIDEO)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Video"),description:o("Embed a video"),name:"video"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.MEDIA)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Media"),description:o("Add images or video to your page"),name:"media"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.AUDIO)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Audio"),description:o("Upload one or more audio tracks"),name:"audio"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.LOCATION)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Map Location"),description:o("Put a central location on your map"),name:"location"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.TWITTER)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Twitter"),description:o("Connect your account and display tweets"),name:"twitter"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.ACTION)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Action"),description:o("Create buttons, links, and forms"),name:"action"}));s.hasSliceType(r.Squarespace.SliceTypeGroups.SOCIAL_ICONS)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Social Links"),description:o("Add links to your social profiles"),name:"social-links"}));this.get("renderStyleEditorPanelPusher")&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Style"),description:o("Adjust fonts, colors, and sizes"),name:"slide-style",className:"cover-pages-style-pusher"}));this._registerPushers()},_updateSlicesForLayout:function(){var e=this.get("slideSummary");var t=e.get("slide");var a=t.get("layoutIdentifier");var i=this.get("slideLayouts");var n=i.getByIdentifier(a);e.get("slices").updateForLayout(n,t)},_getRenderedPushersArray:function(){return this._renderedPushers}},{CSS_PREFIX:"sqs-content-manager-cover-page",ATTRS:{slideSummary:{valueFn:function(){return new r.Squarespace.Models.SlideSummary({url:r.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:r.Squarespace.API_ROOT,collectionId:this.get("collection").get("id")}),slideType:r.Squarespace.SlideType.COVER_PAGE})},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SlideSummary)},slideLayouts:{valueFn:function(){return new r.Squarespace.Models.SlideLayoutList({slide:this.get("slideSummary").get("slide")})},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SlideLayoutList),writeOnce:"initOnly"},modelsSaving:{value:false},addContentButtonVisible:{value:false},loadable:{valueFn:function(){return new r.Squarespace.MultiLoader({loadables:[this.get("slideSummary"),this.get("slideLayouts")]})}},loadOnInitialize:{value:true},damask:{},renderStyleEditorPanelPusher:{value:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-manager-widgets-base","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-damask-panel-panel-pusher","squarespace-enum","squarespace-mixins-loadable","squarespace-models-slide-layout-list","squarespace-models-slide-summary","squarespace-multi-loader","squarespace-slice-type-groups","squarespace-spinner","squarespace-util","squarespace-widgets-slice-group-editor","squarespace-widgets-slide-layout-chooser-pusher"]})},11957:function(e,t,a){var r=a(24).t;var i=a(2877);var n=a(12383);var o=a(1089);var l=a(2575);var c=a(12368);var d=i.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-content-manager-widgets-base",function(s){s.namespace("Squarespace.ContentManagerWidgets");var i=s.Squarespace.ContentManagerWidgets.Base=s.Base.create("ContentManagerBase",s.Squarespace.Widgets.DataWidget,[s.WidgetChild,s.WidgetParent,s.Squarespace.Damask.Panel.MixinPanel,s.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this.headerTray=this.add(s.merge({childType:s.Squarespace.Widgets.LibraryManagerHeaderTray},this._getHeaderTrayOptions())).item(0)},destructor:function(){this.headerTray=null;if(this.unsupportedTray){this.unsupportedTray.destroy(true);this.unsupportedTray=null}if(this.exampleContentTray){this.exampleContentTray.destroy(true);this.exampleContentTray=null}},renderUI:function(){this.headerTray.render(this.get("contentBox"));this.get("contentBox").prepend(this.headerTray.get("boundingBox"))},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("collection");var t=this.get("id");var a="navigationTitle";this._registerEvent(e.after(a+"Change",function(e){this.headerTray.set("strings.title",e.newVal)},this));this._registerEvent(e.on("urlIdChange",function(t){s.Array.each(this.headerTray.get("buttons"),function(e){"view-page"===e.className&&(e.href=t.newVal)})},this));this._registerEvent(c(s,this.get("router"),e));this._bindDemoContentEvents();this._registerEvent(s.on(t+"|key",function(e){if(this.get("collection").get("isDemoCollection"))return;if(0===s.Squarespace.OPEN_DIALOGS.length&&!e.target.ancestor("input, textarea, [contenteditable=true]",true)){this._callAfterEnsuringSavedChanges(this.handleAddContentRequest);e.halt()}},window,"down:32",this))},_bindDemoContentEvents:function(){this._registerEvent(this.get("collection").after("clonedExampleContent",function(e){this.headerTray.set("buttons",this._getHeaderTrayOptions().buttons);this.syncUI()},this))},syncUI:function(){var e=this.get("collection");var t=e.get("isDemoCollection");this._toggleUnsupportedTray(!this.get("collectionConfiguration").get("supported"));this._toggleExampleContentTray(t);var a=this.get("boundingBox");var i=this.headerTray.get("contentBox").one(".title");if(t){if(!a.one(".content-overlay")){a.addClass("has-example-content-overlay");a.append('<div class="content-overlay '+d+'"></div>')}i.one(".demo-collection-tag")||i.append('<div class="demo-collection-tag">Example Page</div>')}else{var n=a.one(".content-overlay");n&&n.remove(true);a.removeClass("has-example-content-overlay");var s=i.one(".demo-collection-tag");s&&s.remove(true)}},activatePath:function(e,t){if(s.Lang.isValue(t)&&s.Lang.isValue(t.item)){var a=t.item.get("name");this.activatePusher(t.item,a)}else this.get("loaded")?s.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e):this.onceAfter("loadedChange",function(){s.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e)})},activatePusherByName:function(e){var t=s.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePusherByName.call(this,e);if(t){var a=new s.Squarespace.Models.ContentItem({id:e,collectionId:this.get("collection").get("id"),displayIndex:this.get("collection").get("nextDisplayIndex"),recordType:s.Squarespace.RecordType.STORE_ITEM});a.load(s.bind(function(){this.activatePusher(a,e)},this))}},_callAfterEnsuringSavedChanges:function(e){this.hasUnsavedChanges()?this.ensureSavedChanges(e.bind(this)):e.call(this)},_toggleUnsupportedTray:function(e){if(e){this.unsupportedTray||(this.unsupportedTray=this._initTray({"strings.title":r("Unsupported Collection"),"strings.subtitle":r("This page will not be rendered on the frontend."),buttons:[{label:r("Configure"),action:this._callAfterEnsuringSavedChanges.bind(this,this.openCollectionConfigureDialog)}]}));this.unsupportedTray.show()}else this.unsupportedTray&&this.unsupportedTray.hide()},_toggleExampleContentTray:function(e){if(e){if(!this.exampleContentTray){var t=this.get("collection").get("typeName");o.cloneDemoCollectionModalShown(t);var a=r("Example Page");var i=r("This page is an example. You can either copy it and add your own content, or remove it.");var n=[{label:r("Copy Page"),action:this._callAfterEnsuringSavedChanges.bind(this,function(){this.get("collection").cloneToNewCollection().then(function(){o.userCloneDemoCollection(t);s.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),true)}.bind(this))})},{label:r("Remove"),action:this._callAfterEnsuringSavedChanges.bind(this,this.removeCollection)}];this.exampleContentTray=this._initTray({"strings.title":a,"strings.subtitle":i,className:"example-content-tray",buttons:n})}this.exampleContentTray.show()}else this.exampleContentTray&&this.exampleContentTray.hide()},_initTray:function(e){return new s.Squarespace.Widgets.ActionTray(s.merge(e,{render:this.get("boundingBox"),scrollNode:this.get("contentBox"),className:e.className+" dialog-tray"}))},_toggleEnabled:function(){var e=this.get("collection");e.set("enabled",!e.get("enabled"));var t=e.get("enabled");var a=s.bind(function(){t&&!e.get("enabled")&&n()},this);t?e.save({},a):new s.Squarespace.Widgets.Confirmation({"strings.title":r("Disable Collection"),"strings.message":r("Are you sure you wish to disable this collection?")}).on("confirm",function(){e.save({},a)},this)},_registerItemPushers:function(e,t){var a=t||this.get("collection").items;if(s.Lang.isValue(e)&&s.Lang.isValue(e.model)){if(e.model.get("isPusher")){this._registerPusher(e.model);return}a=e.model||e.models}a.each(function(e){this._registerPusher(e)},this)},hasUnsavedChanges:function(){console.warn("hasUnsavedChanges not implemented!");return false},ensureSavedChanges:function(e){console.warn("ensureSavedChanges not implemented.");if(s.Lang.isFunction(e))return e();return s.when(true)},_getTypeLabel:function(e,t){if(t)return t.get("title");return(e.get("typeName")||r("Page")).capitalize()},_getHeaderTrayOptions:function(){var e=this.get("collection");var t=e.getTemplateConfiguration();var a=this._getTypeLabel(e,t);var i=[];var n=e.get("isDemoCollection");if(!n){this.get("settingsButtonVisible")&&i.push({label:r("{typeLabel} Settings",{typeLabel:a}),className:"settings light",action:function(e){l.clickCollectionSettingsGear(this.get("collection").get("id"),"panel");this.openCollectionConfigureDialog()},context:this});if(this.get("addContentButtonVisible")){t||false;var s=(t?t.get("addText"):null)||r("Add Content");i.push({label:s,className:"add",action:function(){l.clickButtonToAddContentItemFromPanel(this.get("collection").get("id"));this.handleAddContentRequest()},context:this,testAttribute:e.get("typeName")+"-add-item"})}}return{strings:{title:this.get("strings.title")||e.get("navigationTitle"),subtitle:this.get("strings.subtitle")||""},buttons:i,visible:true,collection:e}},openCollectionConfigureDialog:function(){s.Squarespace.CollectionDialogPortal.showCollectionConfigurationDialog(this.get("collection").get("id"))},handleAddContentRequest:function(){throw new Error("Not implemented.")},removeCollection:function(){s.Squarespace.NavigationUIUtils.deleteCollection(this.get("collection"))}},{ASYNC_DATA:true,CSS_PREFIX:"sqs-content-manager-base",ATTRS:{"strings.title":{},addDebounceTime:{value:1e3},collection:{},collectionConfiguration:{},addContentButtonVisible:{value:true},settingsButtonVisible:{valueFn:function(){return s.Squarespace.UtilAuthenticated.userHasAccessPermission(s.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)},validator:s.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},helpSectionIdentifier:{value:"welcome"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-manager-collection-dialog-portal","squarespace-content-manager-navigation-ui-utils","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-util-authenticated","squarespace-widgets-confirmation","squarespace-widgets-data-widget"]})},11958:function(e,t,a){var n=a(869).default;YUI.add("squarespace-content-manager-collection-dialog-portal",function(i){i.namespace("Squarespace");i.Squarespace.CollectionDialogPortal={showCollectionConfigurationDialog:function(e,t){var a=i.Squarespace.ContentCollectionCache.getById(e);if(a.get("isDemoCollection")){this.exampleContentCloneConfirmationWithCollectionId(e).then(function(){this.showCollectionConfigurationDialog(a.get("id"),t)}.bind(this));return}return n.showCollectionSettingsEditor(e,t)},exampleContentCloneConfirmationWithCollectionId:function(e){var t=i.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e);return this.exampleContentCloneConfirmation(t)},exampleContentCloneConfirmation:function(a){if(!a){false;return}return i.Squarespace.Promises.create(function(e,t){a.get("collection").cloneToNewCollection({silent:true}).then(e)})}}},"1.0",{requires:["squarespace-damask-context-globals","squarespace-singletons-location","squarespace-promises","squarespace-models-content-collection","squarespace-models-template-navigation-list"]})},11959:function(e,t,a){var i=a(12388);var n=a(757);var s=a(0);var r=a(60);var o=a(1919).default;var l=a(2377);var c=a(2376);YUI.add("squarespace-damask-panel-mixin-panel",function(t){t.namespace("Squarespace.Damask.Panel");t.Squarespace.Damask.Panel.MixinPanel=t.Base.create("MixinPanel",t.Base,[],{initializer:function(){this._beforeRenderUIEvent=t.Do.before(this._addCssClassNames,this,"renderUI",this);this._afterRenderUIEvent=t.Do.after(this.applyOffsets,this,"renderUI",this);this.after("inViewChange",function(e){this.get("boundingBox").toggleClass("sqs-panel-in-view",e.newVal)});this.after("dirtyChange",this._renderMenuHeader);setTimeout(function(){this._renderMenuHeader()}.bind(this),300);this._bindInViewCalculation()},_renderMenuHeader:function(){var e;var t;if(this.get("menuHeaderChildWidget")){t=s.createRef();e=s.createElement("div",{ref:t})}r.render(s.createElement(c.Provider,{value:this.get("router")},s.createElement(l.Provider,{value:this.get("location")},s.createElement(o,{isDirty:this.get("dirty"),onSaveClick:this._initSaveChanges?this._initSaveChanges.bind(this):null,onDiscardClick:this._discardChanges?this._discardChanges.bind(this):null,router:this.get("router"),location:this.get("location"),children:e}))),this.get("menuHeaderNode").getDOMNode(),function(){t&&setTimeout(function(){this.get("menuHeaderChildWidget").render(t.current)}.bind(this),0)}.bind(this))},destructor:function(){this.cacheScrollTop();this._recalculateTimeout&&this._recalculateTimeout.cancel();if(t.Lang.isValue(this._beforeRenderUIEvent)){this._beforeRenderUIEvent.detach();this._beforeRenderUIEvent=null}if(t.Lang.isValue(this._afterRenderUIEvent)){this._afterRenderUIEvent.detach();this._afterRenderUIEvent=null}t.Lang.isValue(this.get("menuHeaderChildWidget"))&&this.get("menuHeaderChildWidget").destroy(true);var e=this.get("menuHeaderNode").getDOMNode();t.Lang.isValue(e)&&r.unmountComponentAtNode(e);this.get("menuHeaderNode").destroy(true)},cacheScrollTop:function(){this.get("router").saveScrollTop(this.get("location.key"),this.get("contentBox").get("scrollTop"))},applyOffsets:function(){var e=this.get("location.key");var t=this.get("router").getScrollTop(e);var a=this.get("offset");t&&this.get("contentBox").set("scrollTop",t);a&&this.get("boundingBox").setStyle("left",a)},addHidingClassname:function(e){this.get("boundingBox").addClass("sqs-damask-panel-hiding");this.get("boundingBox").removeClass(i.INCOMING_PANEL);if(n.isSubDesktop()){var t=i.OUTGOING[e];this.get("boundingBox").addClass(t)}},_addCssClassNames:function(){this.get("boundingBox").addClass("sqs-damask-panel");this.get("contentBox").addClass("sqs-damask-panel-content");setTimeout(function(){this.get("boundingBox").addClass(i.INCOMING_PANEL)}.bind(this),50);if(n.isSubDesktop()){var e=i.INCOMING[this.get("direction")];this.get("boundingBox").addClass(e)}},_bindInViewCalculation:function(){this._registerEvent(t.Do.after(function e(){this._recalculateTimeout=t.later(400,this,this._updateInView)},this,"renderUI",this));this.after("activePanelChange",this._updateInView,this)},_updateInView:function(){this.set("inView",!t.Lang.isValue(this.get("activePanel")))}},{ATTRS:{damask:{validator:function(e){return t.Lang.isObject(e)}},animationEnabled:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},inView:{value:false,validator:t.Squarespace.AttrValidators.isBoolean},panelPathName:{value:"",validator:t.Squarespace.AttrValidators.isNullOrString},siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},urlAddressable:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},isSaving:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},isReverting:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},menuHeaderNode:{valueFn:function(){return new t.Node.create("<div>")}},menuHeaderChildWidget:{},protectChanges:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},location:{},router:{},offset:{value:0},direction:{}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-promises"]})},11960:function(e,t,a){var o=a(802);YUI.add("squarespace-damask-panel-mixin-panel-parent",function(s){s.namespace("Squarespace.Damask.Panel");var r=s.Squarespace.Damask.Panel.MixinPanelParent=s.Base.create("MixinPanelParent",s.Base,[],{destructor:function(){s.Object.each(this.get("pushers"),function(e){e.removeTarget(this)},this);s.Object.each(this.get("activeEvents"),function(e){s.Array.invoke(e,"detach")})},getPusherByName:function(e){var t=s.Object.getValue(this.get("pushers"),e);if(s.Lang.isValue(t))return t;return null},activatePusherByName:function(e,t){var a=this.getPusherByName(e);a&&this.activatePusher(a)},activatePusher:function(e){e.set("active",true,{source:"activatePusherByName"})},_registerPushers:function(){s.Array.each(this._getRenderedPushersArray(),this._registerPusher,this)},_registerPusher:function(e){var t=this.get("pushers");if(!e.get("isPusher"))return;var a=e.get("name");var i=r.ensureTrailingSlash(this.get("location.pathname"));var n=e.get("path")?e.get("path"):i+a;e.set("pathname",n);e.set("router",this.get("router"));if(s.Lang.isValue(a)){if(s.Object.hasKey(t,a)){this.get("LOG").warn(o("Pusher `name` ATTR duplicate detected: `{name}` Rebinding active change events.",{name:a}));this._unbindActiveChangeEvents(a)}}else this.get("LOG").warn("Pusher `name` ATTR missing: "+e);t[a]=e;this._bindActiveChangeEvents(e,a)},_renamePusher:function(e,t,a){var i=this.get("pushers");var n=this.get("activeEvents");a=a||e.get("name");e.set("name",t);i[t]=e;n[t]=n[a];delete n[a];delete i[a]},_deregisterPusher:function(e){var t=e.get("name");this._unbindActiveChangeEvents(t);delete this.get("pushers")[t]},_bindActiveChangeEvents:function(e,t){if(s.Object.hasKey(this.get("activeEvents"),t))return;var a="activeChange";this.get("activeEvents")[t]=[e.before(a,this._beforeActiveChange,this),e.after(a,this._afterActiveChange,this)]},_unbindActiveChangeEvents:function(e){var t=this.get("activeEvents");s.Array.each(t[e],function(e){e.detach()});delete t[e]},_getRenderedPushersArray:function(){this.get("LOG").error("_getRenderedPushersArray called but not implemented");return[]},_beforeActiveChange:function(e){if(e.newVal&&!e.prevVal&&!this.get("inView")){e.halt();return}if("activatePusherByName"===e.source)return;if(e.prevVal||!e.newVal)return;if(s.Lang.isBoolean(e.force)&&e.force)return;e.halt();e.target.set("active",true,{force:true})},_afterActiveChange:function(e){if("activatePusherByName"===e.source){e.halt();return}e.newVal&&this.activatePusherByName(e.target.get("name"))}},{ensureTrailingSlash:function(e){return"/"===e.slice(-1)?e:e+"/"},ATTRS:{LOG:{valueFn:function(){return new s.Squarespace.Debugger({name:this.name})}},pushers:{value:{},validator:s.Squarespace.AttrValidators.isObject},activePanel:{validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Widgets.SSWidget)},activeEvents:{value:{},validator:s.Squarespace.AttrValidators.isObject},location:{},title:{validator:s.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-damask-menu-make","squarespace-damask-panel-menu-item","squarespace-debugger","squarespace-ss-widget"]})},11961:function(e,t){YUI.add("squarespace-damask-menu-make",function(s){s.namespace("Squarespace.Damask.Menu");var r=s.Squarespace.ObjectBuilder;function e(e,t,a){e={builtObj:e};var i=r.make(e,t,a);i=r.walkObject(s.merge(i),[{test:function(e){return e&&e.$whenHasPermission},map:function(e){var t=true;s.Array.each(e.$whenHasPermission,function(e){s.Squarespace.UtilAuthenticated.userHasAccessPermission(e)||(t=false)});if(t){delete e.$whenHasPermission;return e}return}},{test:function(e){return e&&e.$whenWebsiteIsNot},map:function(e){var t=true;var a=s.Squarespace.Context.getInstance().get("website").get("siteStatus.value");s.Array.each(e.$whenWebsiteIsNot,function(e){e===a&&(t=false)});if(t){delete e.$whenWebsiteIsNot;return e}return}},{test:function(e){return e&&e.$whenDoesNotHavePlan},map:function(e){var t=true;s.Array.each(e.$whenDoesNotHavePlan,function(e){e===s.Object.getValue(Static,["SQUARESPACE_CONTEXT","plan"])&&(t=false)});if(t){delete e.$whenDoesNotHavePlan;return e}return}},{test:function(e){return e&&e.$whenWebsiteTypeIsNot},map:function(e){var t=true;var a=s.Squarespace.Context.getInstance().get("website");var i=a.get("websiteType");s.Array.each(e.$whenWebsiteTypeIsNot,function(e){e===i&&(t=false)});if(t){delete e.$whenWebsiteTypeIsNot;return e}return}}]);var n={};s.Object.each(i,function(e,t){s.Lang.isObject(e)&&(n[t]=e)});return n.builtObj}s.Squarespace.Damask.Menu.make=e},"1.0",{requires:["base","squarespace-context","squarespace-object-builder","squarespace-util-authenticated"]})},11962:function(e,t){YUI.add("squarespace-damask-panel-menu-item",function(i){i.namespace("Squarespace.Damask.Panel");var n=i.Squarespace.Damask.Panel.MenuItem=i.Base.create("MenuItem",i.Squarespace.SSWidget,[i.Squarespace.Damask.Panel.MixinPusher],{renderUI:function(){n.superclass.renderUI.apply(this,arguments);this.get("contentBox").setAttribute("data-label",this.get("name"));this.get("contentBox").setAttribute("data-test","menuItem-"+this.get("name"));this.get("contentBox").append('<div class="title"></div>');this._initToolTip(this.get("tip"))},syncUI:function(){n.superclass.syncUI.apply(this,arguments);var e=this.get("contentBox");var t=this.getAttrs(["label","href","target"]);var a=t.label;i.Lang.isValue(t.href)&&(a=i.Lang.sub('<a href="{href}" target="{target}">{label}</a>',t));e.one(".title").setContent(a)},destructor:function(){if(i.Lang.isValue(this.toolTip)){this.toolTip.destroy();this.toolTip=null}},_initToolTip:function(e){if(!i.Lang.isObject(e))return;var t=i.merge(e,{target:this.get("contentBox")});this.toolTip=new i.Squarespace.ToolTip(t)}},{CSS_PREFIX:"sqs-damask-menu-item",ATTRS:{label:{validator:i.Squarespace.AttrValidators.isString},tip:{validator:i.Squarespace.AttrValidators.isObject},target:{value:"_blank"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget","squarespace-ui-base"]})},11963:function(e,t){YUI.add("squarespace-damask-panel-panel-pusher",function(e){e.namespace("Squarespace.Damask.Panel");e.Squarespace.Damask.Panel.PanelPusher=e.Base.create("PanelPusher",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){this.after(["titleChange","descriptionChange","isDisabledChange"],this.syncUI,this)},syncUI:function(){var e=this.get("contentBox");e.one(".title").setContent(this.get("title"));e.one(".description").setContent(this.get("description"));var t=this.get("boundingBox");t.setAttribute("data-name",this.get("name"));e.one(".panel-pusher").toggleClass("disabled",this.get("isDisabled")).toggleClass("hasError",this.get("hasError"))}},{CSS_PREFIX:"sqs-panel-pusher",TEMPLATE:'<div class="panel-pusher"><div class="title"></div><div class="description"></div></div>',ATTRS:{readOnly:{value:true,readOnly:true},title:{validator:e.Squarespace.AttrValidators.isString},description:{validator:e.Squarespace.AttrValidators.isNullOrString},isDisabled:{validator:e.Squarespace.AttrValidators.isBoolean,value:false},hasError:{validator:e.Squarespace.AttrValidators.isBoolean,value:false}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget"]})},11964:function(e,t){YUI.add("squarespace-models-slide-summary",function(t){t.namespace("Squarespace.Models");var o=t.Squarespace.Models.SlideSummary=t.Base.create("SlideSummary",t.Model,[t.Squarespace.ModelSync.REST],{initializer:function(e){t.Lang.isValue(e.url)||console.error("Squarespace.Models.ResolvedSlideTweaks: Must pass contextual URL on initialize.")},parse:function(e){var t=o.superclass.parse.call(this,e);var a=t.slide;var i=t.slices;var n=t.sliceContentReferences;var s=this.get("slide");var r=this.get("slices");s.setAttrs(a);r.reset(i);r.invoke("updateContentReferences",n);delete t.slide;delete t.slices;delete t.sliceContentReferences;return t}},{ATTRS:{slide:{valueFn:function(){return new t.Squarespace.Models.Slide({type:this.get("slideType"),collectionId:this.get("collectionId")})},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.Slide),writeOnce:"initOnly"},slices:{valueFn:function(){return new t.Squarespace.Models.SliceList},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.SliceList),writeOnce:"initOnly"},slideType:{value:null,validator:t.Squarespace.AttrValidators.isNullOrValueIn(t.Squarespace.SlideType),writeOnce:"initOnly"},collectionId:{value:null}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-list","squarespace-models-slide","squarespace-util"]})},11965:function(e,t){YUI.add("squarespace-models-slice-list",function(s){s.namespace("Squarespace.Models");s.Squarespace.Models.SliceList=s.Base.create("SliceList",s.Squarespace.Models.ModelList,[],{model:s.Squarespace.Models.Slice,getByType:function(t){var a;var e=this.some(function(e){if(e.get("type")===t){a=e;return true}});!e&&false;return a},filterByTypes:function(t){return this.filter({asList:true},function(e){return-1!==t.indexOf(e.get("type"))})},updateForLayout:function(e,t){this._removeAndDestroyDemoSlices();this._addDemoSlices(e.get("sliceAreas"),t.get("id"))},_removeAndDestroyDemoSlices:function(){var e=this.filter({asList:true},function(e){return e.get("isDemo")});this.remove(e);e.each(function(e){e.destroy()})},_addDemoSlices:function(e,n){e.each(function(t){if(t.get("sliceType")===s.Squarespace.SliceType.TEMP_LOCK_INJECT)return;var e=this.some(function(e){return e.get("type")===t.get("sliceType")});if(!e){var a=t.get("demoSlice");var i=new s.Squarespace.Models.Slice(s.merge(a.toJSON(),{slideId:n,isDemo:true}));this.add(i)}}.bind(this))}},{})},"1.0",{requires:["base","squarespace-models-model-list","squarespace-models-slice","squarespace-util"]})},11966:function(e,t,a){YUI.add("squarespace-multi-loader",function(a){a.namespace("Squarespace");a.Squarespace.MultiLoader=a.Base.create("MultiLoader",a.Base,[],{initializer:function(){this.publish("load")},load:function(){var t=new a.Parallel;a.Array.each(this.get("loadables"),function(e){e.load(t.add())});t.done(a.bind(function(){this.fire("load")},this))}},{ATTRS:{loadables:{value:[],validator:function(e){var t=!a.Array.some(e,function(e){return!a.Lang.isFunction(e.load)});if(t)return true;false;return false},writeOnce:"initOnly"}}})},"1.0",{requires:["base","parallel"]})},11967:function(e,t){YUI.add("squarespace-widgets-slice-group-editor",function(s){s.namespace("Squarespace.Widgets");var i=s.Squarespace.Widgets.SliceContentEditor.HasPusherMixin;var e=s.Squarespace.Widgets.SliceGroupEditor=s.Base.create("SliceGroupEditor",s.Squarespace.Widgets.SSWidget,[s.Squarespace.Damask.Panel.MixinPanel,s.Squarespace.Mixins.Loadable,s.Squarespace.Mixins.SaveChanges,s.Squarespace.Mixins.SlideRefresher,s.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this._renderedEditors={};this.get("loading")||this._bindSlicesForChanges();this._registerEvent(this.get("loadable").after("load",function(){this.set("slices",this._getSlicesFromSummary());this._bindSlicesForChanges()},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy(true);s.Object.each(this._renderedEditors,function(e){e.destroy(true)})},renderUI:function(){var e=this.get("contentBox");var t=this.get("strings.title");var a=this.get("strings.description");e.append('<div class="title">'+t+"</div>");e.append('<div class="description">'+a+"</div>")},syncUI:function(){e.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},markAsDirty:function(e){if(this.get("slicesSaving"))return;s.Lang.isValue(e)&&e.set("isDemo",false);s.Squarespace.Mixins.SaveChanges.prototype.markAsDirty.apply(this,arguments)},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=s.later(500,this,function(){this._emptyEditorsAndSpinner();this._loadingSpinner=new s.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._emptyEditorsAndSpinner();var t=this.get("sliceTypeOrdering");var a=this.get("sliceAreas");s.Array.each(t,function(t){var e=a.filter({asList:true},function(e){return e.get("sliceType")===t});e.each(this._renderEditorForSliceArea,this)},this);a.each(function(e){-1===t.indexOf(e.get("sliceType"))&&this._renderEditorForSliceArea(e)},this);this._registerPushers()},_getRenderedPushersArray:function(){var a=[];s.Object.each(this._renderedEditors,function(e){if(e.hasImpl(i)){var t=e.getPushers();while(t.length>0)a.push(t.shift())}});return a},_renderEditorForSliceArea:function(e){var t=this.get("slices");var a=e.get("sliceType");var i=t.getByType(a);var n=s.Squarespace.Widgets.SliceContentEditor.Factory.create(a,{render:this.get("contentBox"),sliceContent:i.get("content"),sliceType:a});this._renderedEditors[a]=n},_emptyEditorsAndSpinner:function(){s.Object.each(this._renderedEditors,function(e){e.destroy(true)});this._renderedEditors={};this._loadingSpinner&&this._loadingSpinner.destroy(true)},_getSlicesFromSummary:function(){var e=this.get("slideSummary").get("slices");var a=this.get("sliceAreas").map(function(e){return e.get("sliceType")});return e.filter({asList:true},function(e){var t=e.get("type");return-1!==a.indexOf(t)})},_bindSlicesForChanges:function(){var e=this.get("slices");this._registerEvent(e.after("*:change",function(e){if(!this._sliceChangeNeedsRefresh(e.changed))return;this._markAsDirtyAndRefreshSliceRendering(e.target)},this));this._registerEvent(e.each(function(e){this._bindSliceContentForChanges(e.get("content"),e)},this));this._registerEvent(e.after("add",function(e){this._bindSliceContentForChanges(e.model.get("content"),e.model)},this))},_bindSliceContentForChanges:function(e,t){this._registerEvent(e.after("change",function(e){if(e.changed){if("isNewsletterFormSelected"in e.changed)return;if(!this._sliceContentChangeNeedsRefresh(e.changed))return}this._markAsDirtyAndRefreshSliceRendering(t)},this));if(e instanceof s.Squarespace.Models.SliceContent.Compound){var a=e.get("currentContent");this._bindSliceContentForChanges(a,t);this._registerEvent(e.after("currentContentChange",function(e){if(e.newVal===e.prevVal)return;this._bindSliceContentForChanges(e.newVal,t)},this))}else{this._bindSliceContentReferencesForChanges(e,t);this._bindSliceContentReferencedForm(e,t)}},_bindSliceContentReferencedForm:function(a,i){s.Array.each(["form","newsletterForm"],function(e){var t=a.get(e);if(!t)return;this._bindFormReference(t,i);this._registerEvent(a.after("*:change",function(e){if(s.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(i,true);this._bindFormReference(e.newVal,i)}},this))},this)},_bindSliceContentReferencesForChanges:function(e,a){var t=e.get("contentCollection");if(s.Lang.isValue(t)){this._bindContentCollectionReference(t,a);this._registerEvent(e.after("contentCollectionChange",function(e){if(s.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindContentCollectionReference(e.newVal,a)}},this))}var i=e.get("contentItem");if(s.Lang.isValue(i)){this._bindContentItemReference(i,a);this._registerEvent(e.after("contentItemChange",function(e){if(s.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindContentItemReference(e.newVal,a)}},this))}var n=e.get("socialData");if(s.Lang.isValue(n)){this._bindTwitterSocialDataReference(n,a);this._registerEvent(e.after("socialDataChange",function(e){if(s.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindTwitterSocialDataReference(e.newVal,a)}},this))}a.get("type")===s.Squarespace.SliceType.CUSTOM_FORM&&this._registerEvent(e.after("isNewsletterFormSelectedChange",function(e){if(s.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){var t=e.currentTarget;t.get("newsletterFormId")?this._refreshSliceRendering(a,true):this._refreshSliceRendering(a,false)}},this))},_bindFormReference:function(e,t){this._registerEvent(e.after("save",function(){this._refreshSliceRendering(t,true)},this))},_bindContentCollectionReference:function(e,i){var n=e.items;this._registerEvent(n.after("remove",function(e){e.onReorder?this._refreshSliceRendering(i):this._markAsDirtyAndRefreshSliceRendering(i)},this));this._registerEvent(n.after("*:change",function(e){var t=e.changed;if(s.Object.hasKey(t,"displayIndex")&&1===s.Object.size(t))return;var a=n.some(function(e){return e.get("mediaProcessingState")!==s.Squarespace.MediaProcessingState.READY});if(a)return;this._markAsDirtyAndRefreshSliceRendering(i)},this))},_bindContentItemReference:function(e,t){this._registerEvent(e.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(t)},this));var a=e.get("structuredContent");s.Lang.isValue(a)&&this._registerEvent(a.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(t)},this))},_bindTwitterSocialDataReference:function(e,t){this._registerEvent(e.after("change",function(e){this._markAsDirtyAndRefreshSliceRendering(t)},this))},_sliceChangeNeedsRefresh:function(e){var a=["id","websiteId","createdOn","updatedOn","isDemo"];return s.Object.some(e,function(e,t){return-1===a.indexOf(t)})},_sliceContentChangeNeedsRefresh:function(e){var a=[];return s.Object.some(e,function(e,t){return-1===a.indexOf(t)})},_markAsDirtyAndRefreshSliceRendering:function(e,t){this.markAsDirty(e);this._refreshSliceRendering(e,t)},_refreshSliceRendering:function(e,t,a){if(this.get("slicesSaving")&&!a)return;try{s.Global.fire("sliceUpdate",{slice:e.toJSON(),forceServerRefresh:t,slideType:this.get("slideSummary").get("slide").get("type")})}catch(e){console.error(e.stack)}},_saveChanges:function(){return s.Squarespace.Promises.create(function(t){var e=new s.Parallel;this._set("slicesSaving",true);this.get("slices").each(function(i){var n=i.get("type");this._renderedEditors[n].hideError();i.get("isDemo")||i.save(e.add(s.bind(function(e,t){if(s.Lang.isValue(e)){var a=e.responseJSON.message;this._renderedEditors[n].renderError(a)}else i.get("content").get("refreshRenderingAfterSave")&&this._refreshSliceRendering(i,false,true)},this)))},this);e.done(s.bind(function(){var e=this.get("slideSummary").get("slide");s.Squarespace.Analytics.trackInternal("coverpage_content_update",{slideId:e.get("id"),collectionId:e.get("collectionId")});this._set("slicesSaving",false);s.Object.each(this._renderedEditors,function(e){e.resetAfterSave()});t()},this))},this)},_revertChanges:function(){return s.Squarespace.Promises.create(function(e){this.get("slideSummary").load(s.bind(function(){this._refreshSlideRendering(false);e()},this))},this)}},{CSS_PREFIX:"sqs-slice-group-editor",ATTRS:{slideSummary:{value:null,validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Models.SlideSummary)},sliceAreas:{valueFn:function(){return new s.Squarespace.Models.SliceAreaList},validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Models.SliceAreaList)},slices:{valueFn:"_getSlicesFromSummary",validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Models.SliceList)},sliceTypeOrdering:{value:[],validator:s.Squarespace.AttrValidators.isArray},slicesSaving:{value:false},loadable:{valueFn:function(){return this.get("slideSummary")}}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-enum","squarespace-mixin-save-changes","squarespace-mixins-loadable","squarespace-mixins-slide-refresher","squarespace-models-slice-area-list","squarespace-models-slice-content-compound","squarespace-models-slice-list","squarespace-models-slide-summary","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-slice-content-editor-factory","squarespace-widgets-slice-content-editor-has-pusher-mixin","widget-parent"]})},11968:function(e,t,a){var n=a(24).t;YUI.add("squarespace-mixin-save-changes",function(i){i.namespace("Squarespace.Mixins").SaveChanges=i.Base.create("saveChanges",i.Base,[],{ensureSavedChanges:function(){if(!this.hasUnsavedChanges())return i.when();return i.Squarespace.Promises.create(function(e,t){var a=new i.Squarespace.Widgets.Confirmation({"strings.title":n("Review Changes"),"strings.message":n("You have made changes. Do you want to save or discard them?"),"strings.confirm":n("Save"),"strings.reject":n("Discard"),style:i.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:true});a.once("confirm",function(){this._initSaveChanges().then(e,t)},this);a.once("reject",function(){this._discardChanges().then(e,t)},this);a.once("cancel",function(){t()})},this)},requestDelete:function(){return i.Squarespace.Fluent.Confirm({"strings.title":n("Delete Post"),"strings.message":n("Are you sure you wish to remove this item?"),"strings.confirm":n("Delete Post"),showOverlay:true}).then(i.bind(this._deleteItem,this))},revertChanges:function(){return i.Squarespace.Fluent.Confirm({"strings.title":n("Revert Changes"),"strings.message":n("This will revert the document back to the last saved version. Any changes will be lost. Do you want to proceed?"),"strings.confirm":n("Revert Changes"),showOverlay:true}).then(i.bind(this._revertChanges,this)).then(i.bind(this.markAsClean,this))},_initSaveChanges:function(){return this._saveChanges().then(i.bind(this.markAsClean,this))},_discardChanges:function(){return this._revertChanges().then(i.bind(this.markAsClean,this))},markAsClean:function(){this.set("dirty",false)},markAsDirty:function(){this.set("dirty",true)},hasUnsavedChanges:function(){return this.get("dirty")},isInSavingContext:function(){return this.get("dirty")},_deleteItem:function(){throw new Error('Y.Squarespace.ContentManagerWidgets.HasTray: No "_saveChanges" method implemented.')},_saveChanges:function(){this._throwClassError(n('No "_saveChanges" method implemented.'))},_revertChanges:function(){this._throwClassError(n("No _revertChanges method implemented"))},_throwClassError:function(e){throw new Error(["Class",this.constructor.NAME,"-",e].join(" "))}},{ATTRS:{dirty:{value:false,validator:i.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-fluent-confirmation","squarespace-promises","squarespace-widgets-confirmation"]})},11969:function(e,t,i){YUI.add("squarespace-mixins-slide-refresher",function(e){e.namespace("Squarespace");var a=i(11457);e.Squarespace.Mixins.SlideRefresher=e.Base.create("SlideRefresher",e.Base,[],{_refreshSlideRendering:function(e){var t=this.get("slideSummary").get("slide");a.renderPreview(t.get("id"),t.get("layoutIdentifier"))}},{ATTRS:{slideSummary:{value:null}}})},"1.0",{requires:["base"]})},11970:function(e,t){YUI.add("squarespace-widgets-slice-content-editor-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.Widgets.SliceContentEditor,"SLICE_TYPE");e.namespace("Squarespace.Widgets.SliceContentEditor");e.Squarespace.Widgets.SliceContentEditor.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-widgets-slice-content-editor-action","squarespace-widgets-slice-content-editor-album","squarespace-widgets-slice-content-editor-buttons","squarespace-widgets-slice-content-editor-custom-form","squarespace-widgets-slice-content-editor-gallery","squarespace-widgets-slice-content-editor-lock","squarespace-widgets-slice-content-editor-map","squarespace-widgets-slice-content-editor-navigation","squarespace-widgets-slice-content-editor-newsletter","squarespace-widgets-slice-content-editor-password","squarespace-widgets-slice-content-editor-popup-overlay-action","squarespace-widgets-slice-content-editor-social-icons","squarespace-widgets-slice-content-editor-sub-heading","squarespace-widgets-slice-content-editor-twitter","squarespace-widgets-slice-content-editor-video"]})},11971:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-action",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Action=t.Base.create("Action",t.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:t.Squarespace.SliceType.ACTION,CSS_PREFIX:"sqs-slice-content-editor-action",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Action}},strings:{value:{title:i("Select Action Type"),description:i("Choose between buttons or navigation links.")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},11972:function(e,t,a){var n=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-compound",function(i){var t={};t[i.Squarespace.SliceType.BODY]=n("Body");t[i.Squarespace.SliceType.IMAGE]=n("Image");t[i.Squarespace.SliceType.SOCIAL_ICONS]=n("Social Icons");t[i.Squarespace.SliceType.MAP]=n("Map");t[i.Squarespace.SliceType.BUTTONS]=n("Buttons");t[i.Squarespace.SliceType.NAVIGATION]=n("Navigation");t[i.Squarespace.SliceType.NEWSLETTER]=n("Newsletter Form");t[i.Squarespace.SliceType.CUSTOM_FORM]=n("Custom Form");t[i.Squarespace.SliceType.ALBUM]=n("Album");t[i.Squarespace.SliceType.GALLERY]=n("Gallery");t[i.Squarespace.SliceType.VIDEO]=n("Video");t[i.Squarespace.SliceType.HEADING]=n("Heading");t[i.Squarespace.SliceType.SUB_HEADING]=n("Sub Heading");t[i.Squarespace.SliceType.LOGO]=n("Logo");t[i.Squarespace.SliceType.ACTION]=n("Action");t[i.Squarespace.SliceType.POPUP_OVERLAY_ACTION]=n("Action");i.namespace("Squarespace.Widgets.SliceContentEditor");var e=i.Squarespace.Widgets.SliceContentEditor.Compound=i.Base.create("Compound",i.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var e=this.get("sliceContent");this._currentTypeSelect=new i.Squarespace.DialogFields.Radio({name:"currentType-"+t[e.get("currentType")],className:"dark",numeric:true,data:e.get("currentType"),options:i.bind(function(){var t=[];i.Array.each(e.get("acceptedTypes"),function(e){t.push({label:this._getLabelForSliceType(e),value:e})},this);return t},this)()})},destructor:function(){this._currentTypeSelect&&this._currentTypeSelect.destroy();this._sliceContentEditor&&this._sliceContentEditor.destroy();this._descriptionField&&this._descriptionField.destroy(true)},renderUI:function(){e.superclass.renderUI.call(this);this._currentTypeSelect.render(this.get("contentBox"))},bindUI:function(){e.superclass.bindUI.call(this);var t=this.get("sliceContent");this._registerEvent(t.after("currentContentChange",this.syncUI,this));this._currentTypeSelect.after("dataChange",function(e){t.set("currentType",e.newVal)})},syncUI:function(){e.superclass.syncUI.call(this);this._destroySliceContentEditor();this._renderSliceContentEditor()},_renderLoadedState:function(){e.superclass._renderLoadedState.call(this)},_empty:function(){e.superclass._empty.call(this)},_getLabelForSliceType:function(e){return t[e]},_renderSliceContentEditor:function(){var e=this.get("sliceContent");var t=e.get("currentType");var a=i.Squarespace.Widgets.SliceContentEditor.Factory;this._sliceContentEditor=a.create(t,{render:this.get("contentBox"),sliceContent:e.get("currentContent"),isCompoundCurrentContent:true})},_destroySliceContentEditor:function(){this._sliceContentEditor&&this._sliceContentEditor.destroy()}},{CSS_PREFIX:"sqs-slice-content-editor-compound",ATTRS:{sliceContent:{validator:function(e){return e instanceof i.Squarespace.Models.SliceContent.Compound}}}})},"1.0",{requires:["base","squarespace-dialog-description","squarespace-dialog-radio","squarespace-enum","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-factory"]})},11973:function(e,t,a){var n=a(11541);YUI.add("squarespace-widgets-slice-content-editor-base",function(i){i.namespace("Squarespace.Widgets.SliceContentEditor");var e=e||function(){};var a=i.Squarespace.Widgets.SliceContentEditor.Base=i.Base.create("Base",i.Squarespace.Widgets.SSWidget,[i.WidgetParent],{initializer:function(){if(!this.get("isCompoundCurrentContent")){var e=n[this.get("sliceType")];this.get("boundingBox").setAttribute("data-shimmy-id",e)}},destructor:function(){this._descriptionField&&this._descriptionField.destroy(true)},renderUI:function(){a.superclass.renderUI.call(this);this._descriptionField=new i.Squarespace.DialogFields.Description({render:this.get("contentBox"),title:this.get("strings.title"),text:this.get("strings.description")});var t=this.get("sliceContent");i.Array.each(this.get("fields"),function(e){this.add(e(t))},this)},bindUI:function(){a.superclass.bindUI.call(this);this.after("*:dataChange",this._onFieldDataChange,this)},renderError:function(e){this.hideError();this._errorNode=i.Node.create('<div class="error">'+e+"</div>");this.get("contentBox").one(".sqs-description").insert(this._errorNode,"after")},hideError:function(){this._errorNode&&this._errorNode.remove(true)},resetAfterSave:e,_onFieldDataChange:function(e){this.get("sliceContent").set(e.target.get("name"),e.newVal)},_getFieldByName:function(t){var a;this.some(function(e){if(e.get("name")===t){a=e;return true}});return a}},{CSS_PREFIX:"sqs-slice-content-editor-base",ATTRS:{sliceContent:{value:null,validator:i.Squarespace.AttrValidators.isNullOrInstanceOf(i.Squarespace.Models.SliceContent.Base)},sliceType:{},isCompoundCurrentContent:{value:false},fields:{value:[],validator:function(e){if(!i.Lang.isArray(e)){false;return false}var t=i.Squarespace.Widgets.SliceContentEditor.Fields;var a=i.Array.some(e,function(e){return!i.Object.hasValue(t,e)});if(a){false;return false}return true},writeOnce:"initOnly"}}})},"1.0",{requires:["base","widget-parent","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-ss-widget","squarespace-widgets-slice-content-editor-fields"]})},11974:function(e,t,a){var l=a(24).t;var n=a(24).pluralize;var s=a(801);var r=a(728);var c=a(683);var d=a(211);var u=a(404);YUI.add("squarespace-widgets-slice-content-editor-fields",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");o.Squarespace.Widgets.SliceContentEditor.Fields={DISPLAY_SOCIAL:function(e){return{childType:o.Squarespace.DialogFields.Check,name:"display",data:e.get("display"),className:"dark","strings.title":l("Display Social Icons"),"strings.description":l("If enabled, the social icons you have configured in your site settings will be displayed.")}},DISPLAY_SOCIAL_PUSHER:function(e){return{childType:o.Squarespace.Damask.Panel.PanelPusher,name:"connected-services",title:l("Connected Accounts"),description:l("Connect your social services."),childPanelConfig:{"strings.title":l("Connected Accounts")}}},DISPLAY_LOCK:function(e){return{childType:o.Squarespace.DialogFields.Check,name:"display",data:e.get("display"),className:"dark","strings.title":l("Display Lock Icon")}},VIDEO:function(e){var t=e.get("contentItem");var a=t.get("structuredContent");return[{childType:o.Squarespace.DialogFields.Oembed,name:"oembed",filter:"video",data:a.get("oembed")}]},MAP:function(e){return{childType:o.Squarespace.DialogFields.Map,name:"location",data:e.get("location").toJSON(),height:250,showTitle:false,googleTrackingContext:{productPage:"cover-page",productSection:"panel"}}},LINKS_BUTTONS:function(e){return{childType:o.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:e.get("limit"),"strings.linkLabelPlaceholder":l("Button Label"),data:e.get("links")}},LINKS_NAVIGATION:function(e){return{childType:o.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:e.get("limit"),"strings.linkLabelPlaceholder":l("Link Label"),data:e.get("links")}},ALBUM:function(e){var t=e.get("contentCollection");var a=function(e){if(t.isNew()){t.onceAfter("save",function(){e()});t.save()}else e()};return{childType:o.Squarespace.DialogFields.TrackList,name:"contentCollectionId",data:t,stickyHeadersEnabled:false,uploadPreflight:a}},BUTTON_LABEL:function(e){return{childType:o.Squarespace.DialogFields.Text,name:"buttonLabel","strings.placeholder":l("Button Label"),data:e.get("buttonLabel")}},CUSTOM_FORM:function(e){return{childType:o.Squarespace.DialogFields.Button,name:"editForm",strings:{text:l("Edit Form")}}},NEWSLETTER_FORM:function(e){return{childType:o.Squarespace.DialogFields.Button,name:"editNewsletterForm",strings:{text:l("Storage & Advanced Options")}}},NEWSLETTER_STORAGE:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Storage Options")},s.isFeatureEnabled(r.MAILCHIMP_INTEGRATION)?{childType:o.Squarespace.DialogFields.MailChimpServiceConnect,name:"mailchimpConnect",data:t(e.get("form"),c.MAILCHIMP)}:null,{childType:o.Squarespace.DialogFields.GoogleDocsServiceConnect,name:"googleDocsConnect",data:t(e.get("form"),c.GOOGLE)}].filter(function(e){return e})},NEWSLETTER_SUBMIT_LABEL:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Submit Button Label"),text:l("Display this message to users after they submit your form.")},{childType:o.Squarespace.DialogFields.Text,name:"submitButtonText","strings.placeholder":l("Submit Button Label"),data:e.get("submitButtonText")}]},NEWSLETTER_POST_SUBMIT_HTML:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Post-Submit HTML")},{childType:o.Squarespace.DialogFields.HtmlCode,name:"submissionHTML",data:e.get("submissionHTML")}]},NEWSLETTER_POST_SUBMIT_MESSAGE:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Post-Submit Message")},{childType:o.Squarespace.DialogFields.Wysiwyg,name:"submissionMessage",data:e.get("submissionMessage"),editorHeight:175}]},TWITTER:function(e){var t=e.get("useSearch");var a=i(u.TWITTER,e.get("connectedAccountId"),true);return a.concat([{childType:o.Squarespace.DialogFields.Check,name:"useSearch",data:t,className:"dark","strings.title":l("Use Twitter Search"),"strings.description":l("Search twitter for a phrase, hashtag, or handle.")},{childType:o.Squarespace.DialogFields.TextWithRefresh,name:"searchTerm",className:"thin","strings.placeholder":l("Search Term"),visible:t,data:e.get("socialData").get("socialSearch.searchTerm")},{childType:o.Squarespace.DialogFields.Slider,name:"numTweets",range:[1,20],getPluralizedSliderLabel:function(e){return n({one:"{%n} Tweet",other:"{%n} Tweets"},e)},labelWidth:70,data:e.get("numTweets")},{childType:o.Squarespace.DialogFields.Check,name:"showAvatar",data:e.get("showAvatar"),className:"dark","strings.title":l("Show Avatar"),"strings.description":l("Display the Twitter user's avatar image.")},{childType:o.Squarespace.DialogFields.Check,name:"showDisplayName",data:e.get("showDisplayName"),className:"dark","strings.title":l("Show Display Name"),"strings.description":l("Show the Twitter user's display name.")}])}};function t(e,t){var a={};if(e){var i=e.getConnBackend(t);if(i.length>0){var n=i[0];a={connectionState:d.CONNECTED,username:n.socialConfig.profileUserName,socialConfig:n.socialConfig};t===c.GOOGLE?a.spreadsheetName=n.config.spreadsheetName:t===c.MAILCHIMP&&(a.list=n.backendId)}}return a}function i(s,e,t){var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var i=a.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var n=o.Array.reduce(i,[],function(e,t){var a=t.get("collectionId");var i=o.Lang.isValue(a);var n=t.get("serviceId")===s;i&&n&&e.push({label:t.get("screenname"),value:t.get("id")});return e});var r={childType:o.Squarespace.DialogFields.Select,name:"connectedAccountId",className:"thin dark",padding:[10,10],options:n,visible:t&&n.length>0,"strings.placeholder":l("Select Account"),data:e};return[r,{childType:o.Squarespace.DialogFields.Button,name:"addAccount",alignment:"center","strings.text":l("Add Account"),visible:t}]}},"1.0",{requires:["squarespace-damask-panel-panel-pusher","squarespace-dialog-button","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file-image","squarespace-dialog-google-docs-service-connect","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-map","squarespace-dialog-music-track-list","squarespace-dialog-oembed","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-text-with-refresh","squarespace-dialog-video","squarespace-dialog-wysiwyg","squarespace-enum","squarespace-models-connected-accounts","squarespace-models-content-item","squarespace-util-authenticated","squarespace-widgets-slice-content-editor-link-list","squarespace-content-item-types-editor"]})},11975:function(e,t){YUI.add("squarespace-dialog-music-track-list",function(t){var a=t.namespace("Squarespace.DialogFields").TrackList=t.Base.create("TrackList",t.Squarespace.DialogField2,[],{initializer:function(e){a.superclass.initializer.apply(this,arguments);this._initalizeTrackList();this.after("dataChange",this._initalizeTrackList,this)},destructor:function(){if(this._trackList){this._trackList.destroy();this._trackList=null}},renderUI:function(){a.superclass.renderUI.apply(this,arguments);this._trackList.render(this.get("contentBox"))},bindUI:function(){a.superclass.bindUI.apply(this,arguments);this.after("dataChange",function(e){this._trackList.set("collection",e.newVal)});this.after("uploadPreflightChange",function(e){this._trackList.set("uploadPreflight",e.newVal)})},syncUI:function(){a.superclass.syncUI.apply(this,arguments)},_initalizeTrackList:function(){this._trackList&&this._trackList.destroy();var e=this.get("data");t.Lang.isNull(e)&&false;this._trackList=new t.Squarespace.Widgets.MusicAlbums.ListView({collection:e,items:e.items,stickyHeadersEnabled:false,uploadPreflight:this.get("uploadPreflight"),spinnerColor:this.get("spinnerColor")})},didDataChange:function(){return true}},{CSS_PREFIX:"sqs-music-track-list-field",ATTRS:{data:{validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.ContentCollection)},spinnerColor:{valueFn:function(){return"dark"}},uploadPreflight:{valueFn:function(){return t.bind(function(e){this.get("data").save({},e)},this)}},cloneInitialData:{value:false}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-util","squarespace-widgets-music-albums-list-view"]})},11976:function(e,t,a){var i=a(24).t;var n=a(1236);YUI.add("squarespace-widgets-music-albums-list-view",function(r){r.namespace("Squarespace.Widgets.MusicAlbums");var e=r.Squarespace.Widgets.MusicAlbums.ListView=r.Base.create("trackList",r.Squarespace.Widgets.List.SelectableListView,[],{destructor:function(){this.uploader.destroy();this.uploader=null},_addItemWidget:function(e){this.add({model:e,render:this.get("contentBox").one(".tracks"),spinnerColor:this.get("spinnerColor")})},renderUI:function(){e.superclass.renderUI.call(this);this._renderUploader()},bindUI:function(){e.superclass.bindUI.call(this);this.on("uploadPreflightChange",function(e){this.uploader.get("destroyed")||this.uploader.set("preflight",e.newVal)});this._registerEvent(this.get("items").after(["add","remove"],function(e){"reorder"!==e.source&&this.get("rendered")&&this.syncUI()},this))},syncUI:function(){e.superclass.syncUI.call(this);this._syncEmptyState()},removeItemInPlace:function(e){var t=this.getWidgetForItemById(e.get("id"));this.remove(t.get("index"));t.destroy()},_syncListItems:function(){this._rerenderChildren(this.get("items"))},_syncEmptyState:function(e){var t=e;r.Lang.isBoolean(t)||(t=this.get("items").isEmpty());this.get("boundingBox").toggleClass(this.getClassName("empty"),!!t);var a='<div class="title">'+this.get("strings.uploadText")+"</div>";t&&(a+='<div class="desc">'+this.get("strings.emptyDescription")+"</div>");this.uploader.set("selectButtonLabel",a)},_enableItemReorder:function(){e.superclass._enableItemReorder.call(this);this._ddDelegate.set("dragConstrainedConfig",r.merge(this._ddDelegate.get("dragConstrainedConfig"),{constrain:this.get("contentBox").one(".tracks")}));this._ddDelegate.on("reorder:reorder",this._onDDReorder,this)},_onDDReorder:function(e){var t=e.reorder;t.proxyNode.setAttribute("data-track-number",t.visibleIndex+1)},_renderUploader:function(){this.uploader=new r.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:true,autoUpload:true,fileFilters:[{description:i("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}],processFile:r.bind(this._uploadAudioProcessor,this),addPlaceholder:r.bind(this._addAudioPlaceholder,this),fileComplete:r.bind(this._audioUploadComplete,this),createJob:r.bind(this._createAudioProcessingJob,this),jobFailure:r.bind(this._audioProcessingUpdate,this),jobComplete:r.bind(this._audioProcessingUpdate,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),validateFileFn:r.bind(this._validateFileBeforeUpload,this),render:this.get("contentBox")})},_doPreflightThenSetUploadURL:function(e){var t=this.get("uploadPreflight")||function(e){e()};t(function(){this._updateUploadURL();e()}.bind(this))},_updateUploadURL:function(){this.uploader.set("uploadURL","/api/albums/"+this.get("collection").get("id")+"/tracks")},_uploadAudioProcessor:function(e){var t=this.get("model");var a=this.uploader.fileDataFromFile(e.file);a&&!e.item&&(e.item=a.item);var i=e.index;if(e.item)i=e.item.get("displayIndex");else{var n=t.get("nextDisplayIndex");r.Lang.isNumber(i)&&t instanceof r.Squarespace.Models.ContentCollection?i+=n:i=n}e.postData={contentType:"audio",process:"true",index:i,collectionId:this.get("collection").get("id"),id:e.id};if(e.invalid){var s=e.invalid[0];new r.Squarespace.Widgets.Alert({"strings.title":s.title,"strings.message":s.message})}},_validateFileBeforeUpload:function(){if(this.get("collection").get("nextDisplayIndex")>=n.MAX_TRACKS_IN_ALBUM)return{title:i("Max Size Reached"),message:i("This album has a maximum size of {number} tracks.",{number:n.MAX_TRACKS_IN_ALBUM})}},_addAudioPlaceholder:function(e){var t=new r.Squarespace.Models.ContentItem({mediaIsUploading:true,mediaProcessingState:r.Squarespace.MediaProcessingState.QUEUED,displayIndex:e.postData.index,recordType:r.Squarespace.RecordType.AUDIO});e.item=t;this.get("model").items.add(e.item,{source:"upload"});var a=this.getWidgetForItemById(t.get("id"));if(r.Lang.isValue(a))return a.get("contentBox")},_audioUploadComplete:function(e,t){var a=e.item;a.set("mediaIsUploading",false);a.setAttrs(t.media[0]);0===e.index&&this.get("model").load()},_createAudioProcessingJob:function(e,t){if(!t.job){false;return null}e.item.setAttrs(t.media[0]);var a=new r.Squarespace.AudioProcessingJob(r.merge(t.job,{started:true}));a.set("collection",this.get("model"));return a},_audioProcessingUpdate:function(a,e){var t=new r.Squarespace.Models.ContentItem({id:e.get("data.contentItemId"),recordType:r.Squarespace.RecordType.AUDIO});t.load(function(e,t){r.Lang.isValue(e)||a.item.setAttrs(t)})},_uiAddChild:function(e,t){var a=e.get("boundingBox");t.contains(a)||t.appendChild(e.get("boundingBox"))}},{TEMPLATE:'<div class="sqs-music-album-track-list-header">'+i("Tracks")+'</div><div class="tracks"></div>',CSS_PREFIX:"sqs-music-album-track-list",ATTRS:{defaultChildType:{value:r.Squarespace.Widgets.MusicAlbumTrack},model:{getter:function(e){return this.get("collection")||e}},"strings.uploadText":{value:i("Add Tracks")},"strings.emptyDescription":{value:i("This collection is empty. Click here to add your first item.")},spinnerColor:{value:"dark"},uploadPreflight:{value:null},reorderable:{value:true}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/dd-delegate","squarespace-job-manager","squarespace-uploader","squarespace-widgets-alert","squarespace-widgets-list-selectable-view","squarespace-widgets-music-album-track"]})},11977:function(e,t){YUI.add("squarespace-widgets-list-selectable-view",function(i){i.namespace("Squarespace.Widgets.List");var a=i.Squarespace.Widgets.List.SelectableListView=i.Base.create("SelectableListView",i.Squarespace.Widgets.List.BaseView,[i.Squarespace.Mixins.ClickSelectableParent,i.Squarespace.Mixins.ContentCollectionBulkActionable],{bindUI:function(){a.superclass.bindUI.call(this);this.after("selectionChange",function(e){this.get("contentBox").toggleClass("multi-select-enabled",e.newVal&&e.newVal.size()>1);this.updateActionTray()},this);this.get("reorderable")&&this._enableItemReorder()},syncUI:function(){var e=this.getFocusedWidget();var t;i.Lang.isValue(e)&&(t=e.get("item"));a.superclass.syncUI.call(this);i.Lang.isValue(t)&&this.setFocusedChild(this.getWidgetForItemById(t.get("id")));this._ddDelegate&&this._ddDelegate.syncTargets()},destructor:function(){if(this._ddDelegate){this._ddDelegate.destroy(true);this._ddDelegate=null}},_enableItemReorder:function(){var e="."+this.get("defaultChildType").CSS_PREFIX;var t=this.get("contentBox");var a=this.get("multiple");this._ddDelegate=new i.SQS.DDWrappers.DD.Delegate({container:t,nodes:e,dragConfig:{groups:["list-"+this.get("id")]},enableDragReorder:true,dragReorderConfig:{selectedClassSelector:e+"-selected",enableGrouping:a},enableDragConstrained:true,dragConstrainedConfig:{stickY:true}});this._ddDelegate.on("reorder:reordered",function(e){this._reorderListItems(a?e.reordered:[e.reordered])},this)},_reorderListItems:function(e){var t=i.Array.map(e,function(e){return i.Widget.getByNode(e.node).get("item")});this.get("model").items.reorderItems(t,e[0].newIndex)}},{CSS_PREFIX:"sqs-list-view",ATTRS:{collection:{},model:{getter:function(e){return this.get("collection")||e}},moveable:{value:true},multiple:{value:true},reorderable:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-list-base-view","squarespace-content-collection-bulk-actionable","squarespace-mixins-click-selectable-parent"]})},11978:function(e,t,a){YUI.add("squarespace-widgets-list-base-view",function(r){r.namespace("Squarespace.Widgets.List");var e=r.Squarespace.Widgets.List.BaseView=r.Base.create("BaseView",r.Squarespace.Widgets.DataWidget,[r.WidgetParent],{destructor:function(){this._detachItemEvents()},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-list-view");this.get("contentBox").addClass("sqs-list-view-content");this._addChildren(this.get("items"))},bindUI:function(){e.superclass.bindUI.call(this);this._registerItemEvents();this.after("itemsChange",this._onItemChange)},syncUI:function(){e.superclass.syncUI.call(this);this._syncListItems(this.get("items"))},_syncListItems:function(i){i instanceof r.ModelList&&(i=i.toArray());var n=[];var s=[];r.Array.each(i,function(e){var t=this.getWidgetForItemById(e.get("id"));var a=this.indexOf(t);-1!==a&&t.get("item")===e||n.push(e)},this);this.each(function(t,e){var a=r.Array.some(i,function(e){return t.get("item")===e},this);s[e]=!a&&t},this);this._removeChildren(s);this._addChildren(n)},_rerenderChildren:function(e){this._removeAllChildren();this._addChildren(e)},_removeChildren:function(e){r.Array.each(e,this._removeChild,this)},_removeChild:function(e,t){if(e){this.remove(t);e.destroy(true)}},_removeAllChildren:function(){var e=this.removeAll();r.Array.invoke(e,"destroy",true)},_addChildren:function(e){if(!e||0===e.length)return;e instanceof r.ModelList&&(e=e.toArray());e.forEach(this._addItemWidget,this)},_addItemWidget:function(e){if(!e.get("id")){false;return}this.add({item:e})},_onItemChange:function(e){e.prevVal&&this._detachItemEvents();e.newVal&&this._registerItemEvents();this._rerenderChildren(e.newVal);this.syncUI()},_detachItemEvents:function(){if(this._itemEventHandle){this._itemEventHandle.detach();this._itemEventHandle=null}},_registerItemEvents:function(){this._itemEventHandle&&false;this._itemEventHandle=this.get("items").after("add",function(e){if("reorder"===e.source)return;this._addItemWidget(e.model)},this)},getWidgetForItemById:function(t){!t||r.Lang.isString(t)||(t=t.get("id"));return r.Array.find(this.toJSON(),function(e){return e.get("item").get("id")===t})||null},getWidgetForItem:function(t){return r.Array.find(this.toJSON(),function(e){return e.get("item")===t})||null}},{CSS_PREFIX:"sqs-list-view",ATTRS:{defaultChildType:{value:r.Squarespace.Widgets.List.ItemBase},items:{value:new r.ModelList}}})},"1.0",{requires:["array-invoke","base","@sqs/yui-dd-wrappers/dd-behaviors","squarespace-widgets-data-widget","squarespace-widgets-list-base-item-view","widget-parent"]})},11979:function(e,t,a){var i=a(24).t;var d=a(229);var u=a(149);var n=a(164).FontSize;var r=a(810);var s=a(3525);var g=a(1089);var o=a(729);var l=a(318);var p=a(472);var h=l.captureException;var f=o.createLogger("content-item list widget","black");YUI.add("squarespace-widgets-list-base-item-view",function(c){c.namespace("Squarespace.Widgets.List");var e=c.Squarespace.Widgets.List.BaseItem=c.Base.create("BaseItem",c.Squarespace.SSWidget,[c.WidgetChild,c.Squarespace.Mixins.ClickSelectable],{initializer:function(){this.publish("buttonAction")},bindUI:function(){var e=this.get("id");this.get("boundingBox").delegate("click",function(e){e.stopImmediatePropagation();this._handleActionClick(e.target.getAttribute("attr-button-name"))},".button",this);this._registerEvent(this.get("item").after(e+"|save",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|titleChange",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|publishOnChange",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|structuredContentChange",function(e){this.get("item").get("recordType")===u.EVENT&&this._renderAgain(e)}.bind(this),this));this._registerEvent(this.get("item").after("workflowStateChange",this.syncUI,this));this._registerEvent(this.get("item").after("workflowStateChange",this.trackAction,this))},_handleActionClick:function(e){this.fire("buttonAction",{action:e})},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-item-view");this.get("contentBox").addClass("sqs-item-view-content");this._addButtons()},syncUI:function(){this._fitText()},_fitText:function(){var e=this.get("contentBox").one(".title");if(e){this._responsiveTitle=new n({rootNode:e.getDOMNode(),widthRatio:1,minFontSize:13});e.setStyle("display","inline-block");this._responsiveTitle.resetAndRespond();e.setStyle("display",null)}},destructor:function(){this.detachAll();this.get("item").detach(this.get("id")+"|*");this._responsiveTitle&&(this._responsiveTitle=null)},trackAction:function(e){try{var t=this.get("item");var a=t.get("id");var i=t.get("recordType");var n=this.get("parent");var s=t.get("collectionId");var r=n?n.get("collection"):null;r=r||c.Squarespace.ContentCollectionCache.getById(s);if(!r)throw new Error("Could not find item's collection");var o=r.get("type");var l="blog";o===d.COLLECTION_TYPE_GENERIC&&i===u.EVENT&&(l="events");if(e.target.get("workflowState")===c.Squarespace.WorkflowStates.DELETED){f("Delete item via widget",{item:t});g.deleteCollectionItemFromPanel({itemId:a,collectionType:l,collectionId:s})}}catch(e){h(e)}},_renderAgain:function(e){if(e.target.get("workflowState")===c.Squarespace.WorkflowStates.DELETED){this.destroy(true);return}if(!this.get("destroyed")){this.get("contentBox").empty().prepend(this.renderTemplate());this._addButtons();this.syncUI()}},_addButtons:function(){var e=this.get("contentBox").one(".list-item");var t=c.Node.create('<div class="buttons controls">');var a=this.get("buttonList");var i=this.get("item");p.isV8()&&i.get("recordType")===u.TEXT&&(a=c.Array.filter(a,function(e){return"edit"!==e.key}));var n=this.get("boundingBox").get("offsetHeight")/a.length;c.Array.each(a,function(e){t.append('<div class="button button-'+e.key+'" attr-button-name="'+e.key+'" style="line-height:'+n+'px">'+e.label+"</div>")});e.append(t)},_getLikeText:function(e){if(!Static.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled)return false;if(0===e.likeCount)return false;if(1===e.likeCount)return i("1 Like");if(!c.Lang.isValue(e.likeCount))return false;return i("{number} Likes",{number:e.likeCount})},_getCommentText:function(e){if(Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname||e.commentState===c.Squarespace.CommentStates.DISABLED||0===e.commentCount||!c.Lang.isValue(e.commentCount))return false;return e.commentCount},_getEventDate:function(e){var t;var a;var i=e.structuredContent;var n=new Date(i.startDate);var s=new Date(i.endDate);if(n.toDateString()===s.toDateString()){t=r(n,"LLLLT");a=r(s,"LT")}else{t=r(n,"LLL");a=r(s,"LLL")}return(n?t+"&nbsp;&mdash;&nbsp;":"")+(s?a:"")},_getHBTemplateContext:function(){var e=this.get("item").toJSON();e.commentCount=this._getCommentText(e);e.likeCount=this._getLikeText(e);c.Lang.isValue(e.proxyForId)&&(e.flag={className:"example-content",message:"Example"});e.recordType===c.Squarespace.RecordType.EVENT&&(e.eventDateDescriptor=this._getEventDate(e));!e.imageUrl||e.coverImageUrl||(e.coverImageUrl=e.imageUrl);c.Lang.isString(e.coverImageUrl)&&(e.coverImageUrl=e.coverImageUrl.replace(/http(s?):/,""));e.author&&(e.author.displayName=this._getUserName(e.author));e.publishOn=s(e.publishOn);return e},_getUserName:function(t){var e=t.displayName;var a=t.firstName;var i=t.lastName;var n=c.Squarespace.Context.getInstance().get("memberAccountNames");var s=c.Object.some(n,function(e){return e.displayName!==t.displayName&&c.Lang.isString(e.displayName)&&-1!==e.displayName.indexOf(i)},this);if(1===c.Object.size(n))return null;c.Object.size(n)<10&&!s&&(e=this._getNameWithInitials(a,i));return c.Lang.isString(e)?c.Escape.html(c.Lang.trim(e)):null},_getNameWithInitials:function(e,t){var a=null;if(c.Lang.isString(e)&&""!==c.Lang.trim(e)){a=c.Lang.trim(e).substr(0,1)+".";c.Lang.isString(t)&&""!==c.Lang.trim(t)&&(a+=" "+c.Lang.trim(t))}return a}},{CSS_PREFIX:"sqs-item-view",HANDLEBARS_TEMPLATE:"widgets-list-base-item-view.html",ATTRS:{buttonList:{value:[{key:"edit",label:i("Edit")},{key:"delete",label:i("Delete")}]},item:{},strings:{value:{typeName:"item"}}}})},"1.0",{requires:["base","squarespace-content-item-types-editor","squarespace-mixins-click-selectable","squarespace-ss-widget","squarespace-util","squarespace-widgets-list-base-item-view-template","widget-child"]})},11980:function(e,t){YUI.add("squarespace-mixins-click-selectable",function(e){e.namespace("Squarespace.Mixins");e.Squarespace.Mixins.ClickSelectable=e.Base.create("clickSelectable",e.Base,[],{initializer:function(){this.publish("plainClicked");this.publish("modifierClicked");if(!this.hasImpl(e.WidgetChild))throw new Error("You must have the WidgetChild extension.");e.Do.after(this._bindClickSelectableEvents,this,"bindUI",this)},_bindClickSelectableEvents:function(){this.get("boundingBox").on(["contextmenu","click"],function(e){e.stopPropagation();if(e.shiftKey||e.ctrlKey||e.metaKey){e.preventDefault();this.fire("modifierClicked")}else this.fire("plainClicked")},this);this.after("selectedChange",function(){this.get("boundingBox").toggleClass(this.getClassName("selected"),this.get("selected"));0===this.get("selected")&&this.blur()})},toggleSelected:function(){this.set("selected",0===this.get("selected")?1:0)}})},"1.0",{requires:["base","widget-parent"]})},11981:function(e,t){YUI.add("squarespace-widgets-list-base-item-view-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["widgets-list-base-item-view.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o,l,c="function",d=this.escapeExpression,u=s.helperMissing,g=this,p=s.blockHelperMissing;function h(e,t){return" has-thumbnail"}function f(e,t){var a="",i;a+='\n      <div class="thumbnail" style="background-image: url(';if(i=s.coverImageUrl)i=i.call(e,{hash:{},data:t});else{i=e.coverImageUrl;i=typeof i===c?i.apply(e):i}a+=d(i)+'?format=100w)"></div>\n    ';return a}function m(e,t){return"has-title"}function v(e,t){return"no-title"}function b(e,t){var a;if(a=s.icon)a=a.call(e,{hash:{},data:t});else{a=e.icon;a=typeof a===c?a.apply(e):a}return d(a)}function y(e,t){var a;if(a=s.title)a=a.call(e,{hash:{},data:t});else{a=e.title;a=typeof a===c?a.apply(e):a}return d(a)}function S(e,t){var a;if(a=s.noTitle)a=a.call(e,{hash:{},data:t});else{a=e.noTitle;a=typeof a===c?a.apply(e):a}return d(a)}function q(e,t){var a="",i;a+='\n      <span class="status">';if(i=s.message)i=i.call(e,{hash:{},data:t});else{i=e.message;i=typeof i===c?i.apply(e):i}a+=d(i)+"</span>\n    ";return a}function _(e,t){var a="",i;a+='\n      <span class="event-date-descriptor">';if(i=s.eventDateDescriptor)i=i.call(e,{hash:{},data:t});else{i=e.eventDateDescriptor;i=typeof i===c?i.apply(e):i}(i||0===i)&&(a+=i);a+="</span>\n    ";return a}function C(e,t){var a="",i;a+="\n      ";i=s["if"].call(e,e.publishOn,{hash:{},inverse:g.program(22,k,t),fn:g.program(20,E,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function E(e,t){var a="",i;a+='\n        <span class="publish-on">';if(i=s.publishOn)i=i.call(e,{hash:{},data:t});else{i=e.publishOn;i=typeof i===c?i.apply(e):i}a+=d(i)+"</span>\n      ";return a}function k(e,t){var a="",i;a+="\n        ";i=s["if"].call(e,e.addedOn,{hash:{},inverse:g.noop,fn:g.program(23,w,t),data:t});(i||0===i)&&(a+=i);a+="\n      ";return a}function w(e,t){var a="",i,n;a+='\n          <span class="added-on"';n={hash:{format:"ll"},data:t};a+=d((i=s["date-format"]||e["date-format"],i?i.call(e,e.addedOn,n):u.call(e,"date-format",e.addedOn,n)))+"</span>\n        ";return a}function T(e,t){var a="",i;a+='\n      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="display-name">'+d((i=(i=e.author,null==i||false===i?i:i.displayName),typeof i===c?i.apply(e):i))+"</span>\n    ";return a}function I(e,t){var a="",i;a+='\n    <div class="flag ';if(i=s.className)i=i.call(e,{hash:{},data:t});else{i=e.className;i=typeof i===c?i.apply(e):i}a+=d(i)+'">\n      ';if(i=s.message)i=i.call(e,{hash:{},data:t});else{i=e.message;i=typeof i===c?i.apply(e):i}a+=d(i)+"\n    </div>\n  ";return a}n+='<div class="list-item';r=s["if"].call(t,t.coverImageUrl,{hash:{},inverse:g.noop,fn:g.program(1,h,i),data:i});(r||0===r)&&(n+=r);n+='">\n    ';r=s["if"].call(t,t.coverImageUrl,{hash:{},inverse:g.noop,fn:g.program(3,f,i),data:i});(r||0===r)&&(n+=r);n+='\n\n  <header class="list-item-header">\n    <h2 class="';r=s["if"].call(t,t.title,{hash:{},inverse:g.program(7,v,i),fn:g.program(5,m,i),data:i});(r||0===r)&&(n+=r);n+='">\n    <span class="icon collection-icon ';r=s["if"].call(t,t.icon,{hash:{},inverse:g.noop,fn:g.program(9,b,i),data:i});(r||0===r)&&(n+=r);n+='"></span>\n    <span class="title">';r=s["if"].call(t,t.title,{hash:{},inverse:g.program(13,S,i),fn:g.program(11,y,i),data:i});(r||0===r)&&(n+=r);n+='</span>\n    </h2>\n  </header>\n\n  <div class="meta">\n    ';l={hash:{},inverse:g.noop,fn:g.program(15,q,i),data:i};if(r=s.flag)r=r.call(t,l);else{r=t.flag;r=typeof r===c?r.apply(t):r}s.flag||(r=p.call(t,r,l));(r||0===r)&&(n+=r);n+="\n\n    ";r=s["if"].call(t,t.eventDateDescriptor,{hash:{},inverse:g.program(19,C,i),fn:g.program(17,_,i),data:i});(r||0===r)&&(n+=r);n+="\n\n    ";o=s["if"].call(t,(r=t.author,null==r||false===r?r:r.displayName),{hash:{},inverse:g.noop,fn:g.program(25,T,i),data:i});(o||0===o)&&(n+=o);n+="\n  </div>\n\n  ";l={hash:{},inverse:g.noop,fn:g.program(27,I,i),data:i};if(o=s.flag)o=o.call(t,l);else{o=t.flag;o=typeof o===c?o.apply(t):o}s.flag||(o=p.call(t,o,l));(o||0===o)&&(n+=o);n+="\n</div>\n";return n})})();var t="widgets-list-base-item-view.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},11982:function(e,t){YUI.add("squarespace-mixins-click-selectable-parent",function(e){e.namespace("Squarespace.Mixins");e.Squarespace.Mixins.ClickSelectableParent=e.Base.create("clickSelectableParent",e.Base,[],{initializer:function(){this.publish("selectionChange");if(!this.hasImpl(e.WidgetParent))throw new Error("You must have the WidgetParent extension.");this._registerEvent(e.Do.after(this._bindEvents,this,"bindUI"))},_bindEvents:function(){var e=this.get("defaultChildType").NAME;this.on(e+":plainClicked",function(e){e.stopPropagation();this.setFocusedChild(e.target,{source:"list-click"})});this.on(e+":modifierClicked",function(e){e.stopPropagation();e.target.toggleSelected()})},setFocusedChild:function(t){this.each(function(e){if(e!==t){e.blur();e.set("selected",0)}},this);this.some(function(e){if(e===t){e.focus();e.set("selected",1);return true}},this)},getFocusedWidget:function(){return e.Array.find(this.toJSON(),function(e){return e.get("focused")})},clearSelected:function(){e.Array.invoke(this._items,"blur");e.Array.invoke(this._items,"set","selected",0)}},{ATTRS:{multiple:{value:true,readOnly:true}}})},"1.0",{requires:["array-invoke","base","widget-parent"]})},11983:function(e,t,a){var o=a(24).t;var i=a(229);var l=a(6268);var n=a(869).default;YUI.add("squarespace-widgets-music-album-track",function(s){s.namespace("Squarespace.Widgets");var a="macintosh"===s.UA.os?"metaKey":"ctrlKey";var r=s.Squarespace.Widgets.MusicAlbumTrack=s.Base.create("MusicAlbumTrack",s.Squarespace.Widgets.Model,[s.WidgetChild,s.Squarespace.Mixins.EditableModel],{renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".meta");this._titleNode=e.one(".title");this._artistNameNode=t.one(".artist-name");this._durationNode=t.one(".duration");this._utilsNode=e.one(".utils")},bindUI:function(){r.superclass.bindUI.call(this);this._bindStructuredContentListener();this.get("contentBox").on(["click","contextmenu"],function(e){var t=this.get("model");e.shiftKey||e[a]?this._toggleSelected():e.target.ancestor(".remove",true)?this._confirmAndDestroy():t&&t.get("mediaProcessingState")===s.Squarespace.MediaProcessingState.READY&&(this.get("parent").get("collection").get("type")===i.COLLECTION_TYPE_GENERIC?n.showCollectionItemSettingsEditor(this.get("model").getAttrs()):this._edit())},this)},syncUI:function(){r.superclass.syncUI.call(this);this._syncMediaProcessingState();var e=this.get("model");var t=e.get("title")||o("No Title");var a=e.get("structuredContent");var i=a.get("artistName")||o("Unknown Artist");var n=a.get("lengthInMilliSeconds");n=s.Lang.isValue(n)?l(n):o("N/A");this._titleNode.empty().setHTML(t);this._artistNameNode.empty().setHTML(i);this._durationNode.empty().setHTML(n)},_toggleSelected:function(){this.set("selected",0===this.get("selected")?1:0)},_confirmAndDestroy:function(){var e=o("Remove Track");var t=o("Are you sure you wish to remove this track?");var a=function(){this.get("model").destroy({remove:true})};new s.Squarespace.Widgets.Confirmation({"strings.title":e,"strings.message":t}).on("confirm",a,this)},_syncMediaProcessingState:function(){var e=this.get("contentBox").one(".processing-wrapper");e&&e.remove(true);var t=this.get("model");var a=t.get("mediaProcessingState");var i=t.get("mediaIsUploading");var n=t.get("systemDataId");switch(a){case s.Squarespace.MediaProcessingState.QUEUED:case s.Squarespace.MediaProcessingState.PROCESSING:this._showProcessingStatus(o("Processing…"),true);break;case s.Squarespace.MediaProcessingState.READY:this.set("className",this.getClassName("ready"));break;default:if(i)this._showProcessingStatus(o("Uploading…"),true);else if(n){this.set("className",this.getClassName("error"));this._showProcessingStatus(o("Error Processing"),false)}else{this.set("className",this.getClassName("error"));this._showProcessingStatus(o("No Audio Asset"),false)}break}},_showProcessingStatus:function(e,t){this.set("className",this.getClassName("processing"));var a=this._utilsNode.appendChild('<div class="processing-wrapper"></div>');t&&new s.Squarespace.Spinner({render:a,color:this.get("spinnerColor")});a.append("<span>"+e+"</span>")},_bindStructuredContentListener:function(){var e=this.get("model").get("structuredContent");e&&this._registerEvent(e.after("change",this.syncUI,this))}},{CSS_PREFIX:"sqs-music-album-track",HANDLEBARS_TEMPLATE:"widgets-music-album-track.html",ATTRS:{editorCtor:{valueFn:function(){return s.Squarespace.ContentItemEditor.Audio}},model:{valueFn:function(){return new s.Squarespace.Models.ContentItem({recordType:s.Squarespace.RecordType.Audio})},validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Models.ContentItem)},item:{getter:function(){return this.get("model")},readOnly:true},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-audio","squarespace-enum","squarespace-mixins-editable-model","squarespace-models-content-item","squarespace-spinner","squarespace-ui-base","squarespace-widgets-confirmation","squarespace-widgets-model","squarespace-widgets-music-album-track-template","widget-child"]})},11984:function(e,t){YUI.add("squarespace-mixins-editable-model",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EditableModel=a.Base.create("EditableModel",a.Base,[],{_edit:function(){var e=a.merge({model:this.get("model")},this.get("editorConfig"));var t=new(this.get("editorCtor"))(e);this._bindEditor(t);t.show()},_bindEditor:function(e){}},{CSS_PREFIX:"sqs-editable-model",ATTRS:{editorCtor:{value:a.Squarespace.ModelEditorDialog,writeOnce:"initOnly"},editorConfig:{value:{},writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-model-editor"]})},11985:function(e,t){YUI.add("squarespace-widgets-model",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Model=e.Base.create("Model",e.Squarespace.Widgets.SSWidget,[e.WidgetChild],{bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.model=e.model.toJSON();return e}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new e.Model},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Model),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-ss-widget","widget-child"]})},11986:function(e,t){YUI.add("squarespace-widgets-music-album-track-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["widgets-music-album-track.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<span class="title"></span>\n<div class="meta">\n  <span class="artist-name"></span>\n  <span class="duration"></span>\n</div>\n<div class="utils">\n  <a class="remove">Remove</a>\n</div>'})})();var t="widgets-music-album-track.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},11987:function(e,t){YUI.add("squarespace-dialog-text-with-refresh",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.TextWithRefresh=e.Base.create("TextWithRefresh",e.Squarespace.DialogFields.Text,[],{initializer:function(){this.publish("refresh")},renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").append('<div class="refresh-icon"></div>')},bindUI:function(){t.superclass.bindUI.call(this);this.get("contentBox").one(".refresh-icon").after("click",function(){this.fire("refresh")}.bind(this));this._textField.after("keyup",function(e){13===e.keyCode&&this.fire("refresh")}.bind(this))}},{CSS_PREFIX:"sqs-dialog-text-with-refresh",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-text"]})},11988:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-video",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.Video=e.Base.create("Video",e.Squarespace.Widgets.DialogField2,[],{initializer:function(){this._modelEditor=new e.Squarespace.ContentItemEditor.VideoMinimalGlobal({model:this.get("data")})},destructor:function(){this._modelEditor.destroy()},renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").append('<div class="name">'+i("Test Test")+'</div><div class="edit-video">'+i("Edit")+"</div>")},bindUI:function(){t.superclass.bindUI.call(this);this.get("contentBox").one(".edit-video").on("click",function(){this._modelEditor.show()},this)}},{CSS_PREFIX:"sqs-dialog-video",ATTRS:{collectionConfig:{value:{},validator:e.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},data:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Models.ContentItem),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-video","squarespace-dialog-field-2","squarespace-models-content-item"]})},11989:function(e,t){YUI.add("squarespace-widgets-slice-content-editor-link-list",function(l){l.namespace("Squarespace.Widgets.SliceContentEditor");var e=l.Squarespace.Widgets.SliceContentEditor.LinkList=l.Base.create("LinkList",l.Squarespace.DialogField2,[],{initializer:function(){this._linkEditors=[];var e=this.get("data");var a=this.get("strings.linkLabelPlaceholder");e.each(function(e){var t=new l.Squarespace.Widgets.SliceContentEditor.Link({link:e,"strings.linkLabelPlaceholder":a});this._linkEditors.push(t)},this);var t=e.size();var i=this.get("numLinksAllowed");if(i>t){var n=i-t;for(var s=0;s<n;s++){var r=new l.Squarespace.Models.SliceContent.Link;var o=new l.Squarespace.Widgets.SliceContentEditor.Link({link:r,"strings.linkLabelPlaceholder":a});e.add(r);this._linkEditors.push(o)}}},destructor:function(){l.Array.each(this._linkEditors,function(e){e.destroy()})},renderUI:function(){e.superclass.renderUI.call(this);var t=this.get("contentBox");l.Array.each(this._linkEditors,function(e){e.render(t)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link-list",ATTRS:{numLinksAllowed:{value:1,validator:l.Squarespace.AttrValidators.isNumber},data:{validator:l.Squarespace.AttrValidators.isInstanceOf(l.ModelList)}}})},"1.0",{requires:["base","model-list","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-slice-content-link","squarespace-widgets-slice-content-editor-link"]})},11990:function(e,t,a){var i=a(0);var n=a(60);var s=a(6703);YUI.add("squarespace-widgets-slice-content-editor-link",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");var a=e.Squarespace.Widgets.SliceContentEditor.Link=e.Base.create("Link",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.reactMountNode=null;this._textField=new e.Squarespace.DialogFields.Text({data:this.get("link").get("text"),className:"thin","strings.placeholder":this.get("strings.linkLabelPlaceholder")})},destructor:function(){this._textField.destroy();if(this.reactMountNode){n.unmountComponentAtNode(this.reactMountNode);this.reactMountNode.remove();this.reactMountNode=null}},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._textField.render(e);if(null===this.reactMountNode){this.reactMountNode=this.get("contentBox").appendChild('<div class="yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-create-link data-state-loaded"></div>').getDOMNode();this.renderReact()}},getReactProps:function(){return{flush:true,isDark:true,showVisitLink:false,value:this.get("link").get("clickthroughUrl"),onChange:function(e){this.get("link").set("clickthroughUrl",e)}.bind(this)}},renderReact:function(){n.render(i.createElement(s,this.getReactProps()),this.reactMountNode)},bindUI:function(){a.superclass.bindUI.call(this);var t=this.get("link");this._textField.after("dataChange",function(e){t.set("text",e.newVal)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link",ATTRS:{link:{valueFn:function(){return new e.Squarespace.Models.SliceContent.Link},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.SliceContent.Link)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-text","squarespace-models-slice-content-link","squarespace-ss-widget","squarespace-util"]})},11991:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-album",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Album=t.Base.create("Album",t.Squarespace.Widgets.SliceContentEditor.AsyncBase,[],{},{SLICE_TYPE:t.Squarespace.SliceType.ALBUM,CSS_PREFIX:"sqs-slice-content-editor-album",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Album}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.ALBUM]},loadable:{valueFn:function(){return this.get("sliceContent").get("contentCollection").items}},loadOnInitialize:{valueFn:function(){return!this.get("sliceContent").get("contentCollection").isNew()}},strings:{value:{title:i("Album")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-album","squarespace-widgets-slice-content-editor-async-base"]})},11992:function(e,t){YUI.add("squarespace-widgets-slice-content-editor-async-base",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");e.Squarespace.Widgets.SliceContentEditor.AsyncBase=e.Base.create("AsyncBase",e.Squarespace.Widgets.SliceContentEditor.Base,[e.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy()},renderUI:function(){},syncUI:function(){this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=e.later(500,this,function(){this._empty();this._loadingSpinner=new e.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._empty();var t=this.get("sliceContent");e.Array.each(this.get("fields"),function(e){this.add(e(t))},this);this.after("*:dataChange",this._onFieldDataChange,this)},_empty:function(){this._loadingSpinner&&this._loadingSpinner.destroy();var e=this.removeAll();e.each(function(e){e.destroy()});this.get("contentBox").empty()}},{CSS_PREFIX:"sqs-slice-content-editor-async-base",ATTRS:{}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-loadable","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},11993:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-buttons",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Buttons=t.Base.create("Buttons",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.BUTTONS,CSS_PREFIX:"sqs-slice-content-editor-buttons",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Buttons}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_BUTTONS]},strings:{value:{title:i("Buttons")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-widgets-slice-content-editor-base","squarespace-models-slice-content-buttons","squarespace-widgets-slice-content-editor-fields"]})},11994:function(e,t,a){var s=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-custom-form",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");var i={FORM:"FORM",NEWSLETTER:"NEWSLETTER"};var n=t.Squarespace.Widgets.SliceContentEditor.CustomForm=t.Base.create("CustomForm",t.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var e=this.get("sliceContent");this._formTypeSelect=new t.Squarespace.DialogFields.Radio({name:"currentType-Form",className:"dark",data:e.get("isNewsletterFormSelected")?i.NEWSLETTER:i.FORM,options:[{label:s("Form"),value:i.FORM},{label:s("Newsletter Signup"),value:i.NEWSLETTER}]});this._buttonLabelInput=new t.Squarespace.DialogFields.Text({className:"custom-form-button-label",data:e.get("buttonLabel"),"strings.placeholder":s("Button Label")});this._editFormButton=new t.Squarespace.DialogFields.Button({"strings.text":this._getEditButtonLabel()})},destructor:function(){this._editFormDialog&&this._editFormDialog.destroy(true);this._formTypeSelect.destroy();this._buttonLabelInput.destroy();this._editFormButton.destroy()},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("contentBox");this._formTypeSelect.render(e);this._buttonLabelInput.render(e);this._editFormButton.render(e)},bindUI:function(){n.superclass.bindUI.call(this);var a=this.get("sliceContent");this._formTypeSelect.after("dataChange",function(e){var t=e.newVal===i.NEWSLETTER;a.set("isNewsletterFormSelected",t);this._editFormButton.set("strings.text",this._getEditButtonLabel())}.bind(this));this._buttonLabelInput.after("dataChange",function(e){a.set("buttonLabel",e.newVal)});this._editFormButton.after("click",this._showEditDialog.bind(this))},_showEditDialog:function(){this._editFormDialog&&this._editFormDialog.destroy(true);this.get("sliceContent").get("isNewsletterFormSelected")?this._editFormDialog=new t.Squarespace.SlideNewsletterFormEditor({model:this.get("sliceContent").get("newsletterForm")}):this._editFormDialog=new t.Squarespace.SlideCustomFormEditor({model:this.get("sliceContent").get("form")});this._editFormDialog.show()},_getEditButtonLabel:function(){return this.get("sliceContent").get("isNewsletterFormSelected")?s("Edit Newsletter Signup"):s("Edit Form")}},{SLICE_TYPE:t.Squarespace.SliceType.CUSTOM_FORM,CSS_PREFIX:"sqs-slice-content-editor-custom-form",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.CustomForm}},strings:{value:{title:s("Select Submission Type"),description:s("Choose between a custom form and a newsletter signup.")}}}})},"1.0",{requires:["base","squarespace-dialog-button","squarespace-dialog-radio","squarespace-dialog-text","squarespace-editor-slide-custom-form","squarespace-editor-slide-newsletter-form","squarespace-enum","squarespace-models-slice-content-custom-form","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},11995:function(e,t,a){var i=a(24).t;var n=a(683);var s=a(6694);YUI.add("squarespace-editor-slide-custom-form",function(e){e.namespace("Squarespace");e.Squarespace.SlideCustomFormEditor=e.Base.create("SlideCustomFormEditor",e.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:i("Edit Form"),loadingText:i("Editing Form…")}},buttons:{value:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Save")}]},fieldsets:{valueFn:function(){return[s.BUILD,s.STORAGE,s.ADVANCED,s.DISCLAIMER,s.CAPTCHA]}},acceptedBackendTypes:{valueFn:function(){return[n.EMAIL,n.GOOGLE,n.MAILCHIMP,n.ZAPIER]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-enum"]})},11996:function(e,t,a){var i=a(24).t;var n=a(683);var s=a(6694);YUI.add("squarespace-editor-slide-newsletter-form",function(e){e.namespace("Squarespace");e.Squarespace.SlideNewsletterFormEditor=e.Base.create("SlideNewsletterFormEditor",e.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:i("Edit Newsletter Signup"),loadingText:i("Editing Newsletter Signup")}},buttons:{value:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Save")}]},fieldsets:{valueFn:function(){return[s.STORAGE,s.ADVANCED,s.DISCLAIMER]}},acceptedBackendTypes:{valueFn:function(){return[n.CAMPAIGNS,n.GOOGLE,n.MAILCHIMP]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-enum"]})},11997:function(e,t,a){var n=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-gallery",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");var i=o.Squarespace.Widgets.SliceContentEditor.Gallery=o.Base.create("Gallery",o.Squarespace.Widgets.SliceContentEditor.Base,[o.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{resetAfterSave:function(){var e=this.get("sliceContent");if(e.get("source")!==o.Squarespace.BackgroundSource.UPLOAD){var t=e.get("defaultCollections");var a=t[o.Squarespace.BackgroundSource.UPLOAD];var i=function(e){if(a.isNew()){a.onceAfter("save",function(){e()});a.save()}else e()};this._getFieldByName("contentCollectionId").setAttrs({data:a,uploadPreflight:i})}},_getServiceProvider:function(){return o.Squarespace.ExternalServiceProviders.INSTAGRAM},_onFieldDataChange:function(e){var t=e.target.get("name");var a=e.newVal;if("contentCollectionId"===t)return;if("connectedAccountId"===t)this._updateCollectionIdForConnectedAccount();else if("source"===t){this.get("sliceContent").set("source",parseInt(a,10));this._updateCollectionId();this._hideAndShowFieldsForSource()}else i.superclass._onFieldDataChange.call(this,e)},_hideAndShowFieldsForSource:function(){var e=this.get("sliceContent").get("source");var t;var a;if(e===o.Squarespace.BackgroundSource.UPLOAD){t=[this._getFieldByName("connectedAccountId"),this._getFieldByName("addAccount")];a=[this._getFieldByName("contentCollectionId")]}else{t=[this._getFieldByName("contentCollectionId")];a=[];var i=this._getFieldByName("connectedAccountId");i.get("options").length>0&&a.push(i);a.push(this._getFieldByName("addAccount"))}o.Array.invoke(t,"set","visible",false);o.Array.invoke(a,"set","visible",true)},_updateCollectionId:function(){var e=this.get("sliceContent");var t=this.get("sliceContent").get("source");var a=null;if(t===o.Squarespace.BackgroundSource.UPLOAD){var i=this._getFieldByName("contentCollectionId");a=i.get("data").get("id")}else{var n=this._getFieldByName("connectedAccountId");var s=n.get("data");if(s){var r=o.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(s);r&&(a=r.get("collectionId"))}}e.set("contentCollectionId",a)},_updateCollectionIdForConnectedAccount:function(){var e=this._getFieldByName("connectedAccountId");var t=e.get("data");var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(t);var i=a.get("collectionId");var n=this.get("sliceContent");var s=n.get("contentCollection");s.set("id",i);s.ensureProcessedItems().then(function(){n.set("contentCollectionId",i)})}},{SLICE_TYPE:o.Squarespace.SliceType.GALLERY,CSS_PREFIX:"sqs-slice-content-editor-gallery",ATTRS:{sliceContent:{validator:function(e){return e instanceof o.Squarespace.Models.SliceContent.Gallery}},fields:{value:[o.Squarespace.Widgets.SliceContentEditor.Fields.GALLERY]},strings:{value:{title:n("Gallery")}}}})},"1.0",{requires:["array-invoke","base","squarespace-enum","squarespace-models-connected-accounts","squarespace-models-slice-content-gallery","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},11998:function(e,t,a){var i=a(1939);var n=a(2367);YUI.add("squarespace-widgets-slice-content-editor-has-external-auth",function(r){r.namespace("Squarespace.Widgets.SliceContentEditor");r.Squarespace.Widgets.SliceContentEditor.HasExternalAuth=r.Base.create("HasExternalAuth",r.Base,[],{initializer:function(){r.Do.after(function(){var e=this._getFieldByName("addAccount");e&&e.after("click",this._addAccount,this)},this,"bindUI",this)},_addAccount:function(){var a=this._getServiceProvider();i.authenticate({urlParams:{authenticationType:"website",startSubscription:true},serviceProvider:a}).then(this._continueAuthentication.bind(this)).catch(function(e){if(window.SQUARESPACE_SENTRY){var t="Issue with ExternalAuthentication: "+a;e&&e.data?window.SQUARESPACE_SENTRY.captureMessage(t+" "+e.data):window.SQUARESPACE_SENTRY.captureMessage(t)}})},_continueAuthentication:function(e){var t=e.socialConfig;if(r.Lang.isValue(t)){var a=t.externalAuthenticationId;this._refreshConnectedAccountField(a)}},_refreshConnectedAccountField:function(a){this._getAccountFieldOptions().then(r.bind(function(e){var t=this._getFieldByName("connectedAccountId");t.setAttrs({options:e,data:a});e.length>0&&t.set("visible",true)},this))},_getAccountFieldOptions:function(){var s=this._getServiceProvider();return r.Squarespace.Promises.create(function(i){n.refreshConnectedAccounts(true).then(function(){var e=r.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var t=e.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var a=r.Array.reduce(t,[],function(e,t){var a=t.get("collectionId");var i=r.Lang.isValue(a);var n=t.get("serviceId")===s;i&&n&&e.push({label:t.get("screenname"),value:t.get("id")});return e});i(a)})},this)},_getServiceProvider:function(){false}})},"1.0",{requires:["base","squarespace-models-connected-accounts","squarespace-promises"]})},11999:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-lock",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Lock=t.Base.create("Lock",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.LOCK,CSS_PREFIX:"sqs-slice-content-editor-lock",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Lock}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_LOCK]},strings:{value:{title:i("Lock")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-lock","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12e3:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-map",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Map=t.Base.create("Map",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.MAP,CSS_PREFIX:"sqs-slice-content-editor-map",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Map}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.MAP]},strings:{value:{title:i("Map")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-map","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12001:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-navigation",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Navigation=t.Base.create("Navigation",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.NAVIGATION,CSS_PREFIX:"sqs-slice-content-editor-navigation",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Navigation}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_NAVIGATION]},strings:{value:{title:i("Navigation")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-navigation","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12002:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-newsletter",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Newsletter=t.Base.create("Newsletter",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.NEWSLETTER,CSS_PREFIX:"sqs-slice-content-editor-newsletter",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Newsletter}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_SUBMIT_LABEL,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_STORAGE,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_MESSAGE,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_HTML]},strings:{value:{title:i("Newsletter")}}}})},"1.0",{requires:["base","squarespace-editor-slide-newsletter-form","squarespace-enum","squarespace-models-slice-content-newsletter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12003:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-password",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Password=t.Base.create("Password",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.PASSWORD,CSS_PREFIX:"sqs-slice-content-editor-password",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Password}},fields:{value:[]},strings:{value:{title:i("Password")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-password","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12004:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-popup-overlay-action",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.PopupOverlayAction=t.Base.create("PopupOverlayAction",t.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:t.Squarespace.SliceType.POPUP_OVERLAY_ACTION,CSS_PREFIX:"sqs-slice-content-editor-popup-overlay-action",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.PopupOverlayAction}},strings:{value:{title:i("Select Action Type"),description:i("Choose between a newsletter or buttons.")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},12005:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-social-icons",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.SocialIcons=t.Base.create("SocialIcons",t.Squarespace.Widgets.SliceContentEditor.Base,[t.Squarespace.Widgets.SliceContentEditor.HasPusherMixin],{},{SLICE_TYPE:t.Squarespace.SliceType.SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-content-editor-social-icons",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.SocialIcons}},fields:{valueFn:function(){var e=[t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL];t.Squarespace.Utils.isCoverPageOnly()&&e.push(t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL_PUSHER);return e}},strings:{value:{title:i("Social Icons")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-social-icons","squarespace-util","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-pusher-mixin"]})},12006:function(e,t,a){var i=a(11551).isYuiClassEnabled;YUI.add("squarespace-widgets-slice-content-editor-has-pusher-mixin",function(t){if(i("HasPusherMixin")){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.HasPusherMixin=t.Base.create("HasPusherMixin",t.Base,[],{getPushers:function(){return this.toJSON().filter(function(e){return e instanceof t.Squarespace.Damask.Panel.PanelPusher})}})}},"1.0",{requires:["base","squarespace-damask-panel-panel-pusher"]})},12007:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-sub-heading",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.SubHeading=t.Base.create("SubHeading",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.SUB_HEADING,CSS_PREFIX:"sqs-slice-content-editor-sub-heading",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.SubHeading}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.TEXT]},strings:{value:{title:i("Subtitle")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-sub-heading","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12008:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-twitter",function(a){a.namespace("Squarespace.Widgets.SliceContentEditor");var n=a.Squarespace.Widgets.SliceContentEditor.Twitter=a.Base.create("Twitter",a.Squarespace.Widgets.SliceContentEditor.Base,[a.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{bindUI:function(){n.superclass.bindUI.call(this);this._getFieldByName("searchTerm").after("refresh",function(){this.hideError();var e=this.get("sliceContent");var t=e.get("socialData").get("socialSearch.searchTerm");a.Lang.isValue(t)&&""!==t||this.renderError(i("Search term has not been defined."));e.previewSocialSearch(function(e,t){a.Lang.isValue(e)&&this.renderError(e.responseJSON.message)}.bind(this))}.bind(this))},_onFieldDataChange:function(e){var t=e.target.get("name");var a=e.newVal;if("searchTerm"===t){var i=this.get("sliceContent").get("socialData");i.set("socialSearch.searchTerm",a)}else{"useSearch"===t&&this._getFieldByName("searchTerm").set("visible",a);n.superclass._onFieldDataChange.call(this,e)}},_getServiceProvider:function(){return a.Squarespace.ExternalServiceProviders.TWITTER}},{SLICE_TYPE:a.Squarespace.SliceType.TWITTER,CSS_PREFIX:"sqs-slice-content-editor-twitter",ATTRS:{sliceContent:{validator:function(e){return e instanceof a.Squarespace.Models.SliceContent.Twitter}},fields:{value:[a.Squarespace.Widgets.SliceContentEditor.Fields.TWITTER]},strings:{value:{title:i("Twitter")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-twitter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},12009:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slice-content-editor-video",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");var l=o.Squarespace.Widgets.SliceContentEditor.Video=o.Base.create("Video",o.Squarespace.Widgets.SliceContentEditor.Base,[],{destructor:function(){this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel()},_onFieldDataChange:function(e){var t=this.get("sliceContent");var a=t.get("contentItem");var i=a.get("structuredContent");var n=e.newVal;switch(e.target.get("name")){case"title":a.set("title",n);break;case"body":a.set("body",n);break;case"overlay":i.set("overlay",n);break;case"oembed":i.set("oembed",n);var s=n.title;var r=n.description;o.Lang.isValue(s)&&a.set("title",n.title);o.Lang.isValue(r)&&a.set("body",{html:"<p>"+n.description+"</p>"});break;case"mainImage":break;default:l.superclass._onFieldDataChange.call(this,e)}},_syncFieldsForOembedChange:function(e){var t=e.title;var a=e.description;var i=e.thumbnailUrl;o.Lang.isValue(t)&&this._getFieldByName("title").set("data",t);o.Lang.isValue(a)&&this._getFieldByName("body").set("data",{html:"<p>"+a+"</p>"});if(o.Lang.isValue(i)){var n=this._getFieldByName("mainImage");var s=this._getFieldByName("overlay");this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel();this._thumbnailSyncTimer=o.later(1e3,this,function(){var e=this.get("sliceContent").get("contentItem");if(e.isNew())e.save(function(){n.saveFromUrl(i,e.get("id"));s.set("data",true)});else{n.saveFromUrl(i,e.get("id"));s.set("data",true)}})}}},{SLICE_TYPE:o.Squarespace.SliceType.VIDEO,CSS_PREFIX:"sqs-slice-content-editor-video",ATTRS:{sliceContent:{validator:function(e){return e instanceof o.Squarespace.Models.SliceContent.Video}},fields:{value:[o.Squarespace.Widgets.SliceContentEditor.Fields.VIDEO]},strings:{value:{title:i("Video")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-video","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},12010:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-slide-layout-chooser-pusher",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.SlideLayoutChooserPusher=e.Base.create("SlideLayoutChooserPusher",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){t.superclass.bindUI.call(this);this.after("selectedLayoutChange",this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox").one(".image-thumbnail img");e.setAttribute("src",this.get("selectedLayout").get("thumbnailUrl"))}},{CSS_PREFIX:"sqs-slide-layout-chooser-pusher",TEMPLATE:'<div class="image-thumbnail"><img/><div class="image-thumbnail-overlay"></div></div><div class="change-layout-button">'+i("Change Layout")+"</div>",ATTRS:{selectedLayout:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Models.SlideLayout)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-pusher","squarespace-models-slide","squarespace-models-slide-layout","squarespace-ss-widget"]})},12011:function(e,t,a){var g=a(24).t;YUI.add("squarespace-async-wrappers-cover-page-editors-for-standalone",function(o){o.namespace("Squarespace.AsyncWrappers");var l={action:function(e,t){return{strings:{title:g("Action"),description:g("Your Cover Page should have a clear goal. Choose which type best meets your needs.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.ACTION),sliceTypeOrdering:[o.Squarespace.SliceType.ACTION,o.Squarespace.SliceType.CUSTOM_FORM]}},"social-links":function(e,t){return{strings:{title:g("Social Links"),description:g("Configure your social icons that are used on your cover page.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.SOCIAL_ICONS),sliceTypeOrdering:[o.Squarespace.SliceType.SOCIAL_ICONS]}},audio:function(e,t){return{strings:{title:g("Audio"),description:g("Add one or more tracks to create a playlist of songs. Then organize your tracks to create an album.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.AUDIO),sliceTypeOrdering:[o.Squarespace.SliceType.ALBUM]}},video:function(e,t){return{strings:{title:g("Video"),description:g("Paste the URL of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.VIDEO),sliceTypeOrdering:[o.Squarespace.SliceType.VIDEO]}},location:function(e,t){return{strings:{title:g("Map Location"),description:g("Input your address into the fields below to let people know where you, your business, or your next event can be found. To edit how this location appears in text, navigate to the Branding & Text panel.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.LOCATION),sliceTypeOrdering:[o.Squarespace.SliceType.MAP]}},twitter:function(e,t){return{strings:{title:g("Twitter"),description:g("Pick the account below you would like to import content from, or press Add Account to connect a new one.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.TWITTER),sliceTypeOrdering:[o.Squarespace.SliceType.TWITTER]}}};var t;function a(){if(!t){var e=o.config.win.Static.SQUARESPACE_CONTEXT.coverPageCollection;t=o.Squarespace.ContentCollectionCache.getCollectionFromData(e)}return t}var c;function i(e){if(c){e();return}var t=new o.Squarespace.Models.SlideSummary({url:o.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:o.Squarespace.API_ROOT,collectionId:a().get("id")}),slideType:o.Squarespace.SlideType.COVER_PAGE});t.load(function(){c=t;e()})}var d;function n(e){if(d){e();return}var t=new o.Squarespace.Models.SlideLayoutList({slide:c.get("slide")});t.load(function(){d=t;e()})}var s;function r(e){if(s){e();return}var t=c.get("slide");var a=t.get("layoutIdentifier");var i=d.getByIdentifier(a);c.get("slices").updateForLayout(i,t);c.after("load",function(){c.get("slices").updateForLayout(i,t)});s=true;e()}function u(e){i(function(){n(function(){r(e)})})}o.Squarespace.AsyncWrappers.CoverPageEditorForStandalone=o.Base.create("CoverPageEditor",o.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,s,t){var a=this.get("location.pathname");var r=a.slice(a.lastIndexOf("/")).substr(1);u(function(){var e=c.get("slide");var t=e.get("layoutIdentifier");var a=d.getByIdentifier(t);var i=a.get("sliceAreas");var n=l[r](c,i);setTimeout(function(){s(new o.Squarespace.Widgets.SliceGroupEditor(n))})})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel"]})},12012:function(e,t,a){var i=a(24).t;var n=a(3057);YUI.add("squarespace-settings-site-billing-panels-delete-site",function(t){t.namespace("Squarespace.Settings.Site.BillingPanels");var e=t.Squarespace.Settings.Site.BillingPanels.DeleteSite=t.Base.create("billingDeleteSite",t.Squarespace.Settings.Site.BillingPanels.Base,[],{renderUI:function(){e.superclass.renderUI.apply(this,arguments);this.get("contentBox").one(".subtitle").hide();n.loadAllSubscriptions().then(this._renderDeletePanel.bind(this),this._renderError.bind(this))},destructor:function(){if(t.Lang.isValue(this._deleteSiteButton)){this._deleteSiteButton.destroy();this._deleteSiteButton=null}},_renderError:function(){var e=this.get("contentBox").one(".subtitle");e.empty().setContent(this.get("strings.subscriptionLoadErrorSubtitle"));e.show()},_renderDeletePanel:function(e){var t=this.get("contentBox").one(".subtitle");var a=this.get("contentBox").one(".settings-panel-fields");var i=e.data.results;if(0===i.length||this._isWebsiteTheOnlySubscription(i)){this._createRemoveAccountButton().render(a);a.show()}else t.empty().setContent(this.get("strings.activeSubscriptionsSubtitle"));t.show()},_isWebsiteTheOnlySubscription:function(e){return e.length===e.filter(function(e){return"website"===e.type})},_createRemoveAccountButton:function(){this._deleteSiteButton=new t.Squarespace.DialogFields.Button({className:"sqs-remove-account","strings.text":i("Delete Site"),onClick:t.bind(this._deleteSite,this)});return this._deleteSiteButton},_deleteSite:function(){var e=this._deleteSiteButton;new t.Squarespace.Widgets.Confirmation({position:t.Squarespace.Widgets.Confirmation.ANCHOR.ELEMENT,anchor:e.getNode(),showOverlay:true,"strings.confirm":i("Delete Site"),"strings.title":i("Delete Site"),"strings.message":i("Your site will be taken down immediately and will no longer be accessible.")}).on("confirm",function(){t.Data.post({url:"/api/billing/RemoveAccount",data:{autorenew:false},success:function(){window.location="/"}},this)},this)}},{CSS_PREFIX:"sqs-billing-delete-site",ATTRS:{showAdminMessage:{value:false,readOnly:true},"strings.activeSubscriptionsSubtitle":{value:i("You cannot delete your website because you have one or more active subscriptions."),readOnly:true},"strings.subscriptionLoadErrorSubtitle":{value:i("There was a problem retrieving your subscriptions."),readOnly:true},"strings.title":{value:i("Delete Website")},"strings.subtitle":{value:i("When you delete your site, your site and its content are marked for deletion. Please note that deleted sites may take more than 30 days to be permanently deleted from our systems.")},website:{valueFn:function(){return t.Squarespace.Context.getInstance().get("website")},readOnly:true}}})},"1.0",{requires:["base","squarespace-context","squarespace-settings-site-billing-panels-base"]})},12013:function(e,t,a){var i=a(24).t;YUI.add("squarespace-settings-site-billing-panels-base",function(a){a.namespace("Squarespace.Settings.Site.BillingPanels");var t=a.Squarespace.Settings.Site.BillingPanels.Base=a.Base.create("billingBase",a.Squarespace.SSWidget,[a.Squarespace.Damask.Panel.MixinPanelParent,a.Squarespace.Damask.Panel.MixinPanel],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.get("preventRenderTemplate")||this._renderPanel()},bindUI:function(){t.superclass.bindUI.apply(this);this._isTrial()&&this._registerEvent(this.get("website").after("siteStatusChange",this.syncUI,this))},syncUI:function(){t.superclass.syncUI.apply(this);var e=this.get("contentBox").one(".subtitle");e&&this._isTrial()&&e.setContent(this._getTrialSubstring())},destructor:function(){if(a.Lang.isObject(this._headerTray)){this._headerTray.destroy();this._headerTray=null}},_renderPanel:function(){var e=this.get("contentBox");var t=e.one(".sqs-panel-notification");this.get("showAdminMessage")&&t.setContent('<div class="sqs-panel-admin-notice">'+this.get("strings.adminAccess")+"</div>");this._headerTray=new a.Squarespace.Widgets.HeaderTray({strings:this._getHeaderTrayStrings()}).render(e.one(".panel-header"))},_getHeaderTrayStrings:function(){return this.get("strings")},_isTrial:function(){var e=this.get("website");return e&&e.get("siteStatus")===a.Squarespace.StatusConstants.TRIAL}},{TEMPLATE:'<div class="panel-header"></div><div class="sqs-panel-notification"></div><div class="spinner"></div><div class="settings-panel-fields hidden"></div>',ATTRS:{accessRules:{valueFn:function(){return new a.Squarespace.Settings.Site.BillingPanels.AccessRules},readOnly:true},"strings.adminAccess":{value:i("You have access to this panel because you are an admin. It would not be revealed to a customer in your billing state. Do not attempt to make any billing changes on this panel."),validator:a.Squarespace.AttrValidators.isString},showAdminMessage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-damask-panel-panel-pusher","squarespace-settings-site-billing-panels-access-rules","squarespace-ss-widget","squarespace-tray"]})},12014:function(e,t,a){var i=a(853);YUI.add("squarespace-settings-site-billing-panels-access-rules",function(t){t.namespace("Squarespace.Settings.Site.BillingPanels");t.Squarespace.Settings.Site.BillingPanels.AccessRules=t.Base.create("billingAccessRules",t.Base,[],{trialAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.TRIAL)&&!this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)&&this.get("systemAvailable")},subscribedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.SUBSCRIBED)&&(this._hasSiteStatus(t.Squarespace.StatusConstants.PAID)||this._hasSiteStatus(t.Squarespace.StatusConstants.ACTIVE_PARKING_PAGE))&&this.get("systemAvailable")},internalAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.FREE)&&this._hasSiteStatus(t.Squarespace.StatusConstants.INTERNAL)&&this.get("systemAvailable")},compedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.FREE)&&this.get("systemAvailable")},linkedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},pastDueAccess:function(){return this._hasSiteStatus(t.Squarespace.StatusConstants.PASTDUE)&&!this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},expiredAccess:function(){return this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)&&!this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},deleteSiteAccess:function(){return this.get("systemAvailable")&&(this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)||this._hasSiteStatus(t.Squarespace.StatusConstants.TRIAL))},isAdminOr:function(e){return t.bind(function(){return this.get("hasAdminAccess")||e.call(this)},this)},isAdminAndNot:function(e){return t.bind(function(){return this.get("hasAdminAccess")&&!e.call(this)},this)},_hasBillingStatus:function(e){return t.Squarespace.Context.getInstance().get("billingStatus")===e},_hasSiteStatus:function(e){return t.Squarespace.Context.getInstance().get("website").get("siteStatus").value===e}},{ATTRS:{hasAdminAccess:{valueFn:function(){return t.Squarespace.UtilAuthenticated.isSquarespaceAdmin()},readOnly:true},systemAvailable:{value:true,readOnly:true},reverseBillingStatus:{valueFn:function(){return i(t.Squarespace.BillingStatus)},readOnly:true}}})},"1.0",{requires:["base","squarespace-context","squarespace-enum","squarespace-util","squarespace-util-authenticated"]})},12015:function(e,t,a){var r=a(24).t;var i=a(0);var n=a(60);var o=a(228);var l=a(1028);var c=a(34);var d=a(2893);var u=a(13072);var g=a(1076);var p=a(450);var h=a(213);var f=a(319).WEBSITE_COVER_PAGE;var m=a(514);var v=a(1114);var b=a(323);var y=a(505);var S=a(207);YUI.add("squarespace-settings-site-billing-panels-switch-products",function(s){var e=new l(c);e.addActionListener(d.OPEN_TEMPLATE_PICKER_FROM_PARKING_PAGE,function(){window.setTimeout(function(){var a=new t({forParkingPage:true});a._getReactivationEligibility().then(function(){if(a.get("isEligibleForReactivation"))return a._renderReactivate();return a.ensureTemplateIsPicked(b.CLASSIC)}).then(function(){return g.load()}).then(function(e,t){return a.skipOverBillingIfNotACustomer(b.CLASSIC)}).catch(function(e){})},0)});s.namespace("Squarespace.Settings.Site.BillingPanels");var t=s.Squarespace.Settings.Site.BillingPanels.SwitchProducts=s.Base.create("billingWebsite",s.Squarespace.Settings.Site.BillingPanels.Base,[s.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{initializer:function(){this._isParkingPage()&&this._getReactivationEligibility()},syncUI:function(){if(this.get("forParkingPage"))return;t.superclass.syncUI.apply(this,arguments);if(!this.get("isLoaded")){this._renderLoadingSpinner();return}this._destroySpinner();var a=this.get("contentBox");var e=this._getSwitchProductsPusherConfigs();e.forEach(function(e){var t=s.Node.create('<div class="sqs-panel-pusher" data-test="'+e.name+'"><div class="sqs-panel-pusher-content"><div class="panel-pusher"><div class="title"></div><div class="description"></div></div></div></div>');t.one(".title").setContent(e.title);t.one(".description").setContent(e.description);t.on("click",e.onClick);a.append(t)});this._registerPushers();this._isParkingPage()&&this.get("isEligibleForReactivation")&&this._renderReactivate()},bindUI:function(){if(this.get("forParkingPage"))return;this.after("isEligibleForReactivationChange",this.syncUI);this.after("isLoadedChange",this.syncUI)},destructor:function(){this.mountNode&&n.unmountComponentAtNode(this.mountNode.getDOMNode())},_renderLoadingSpinner:function(){if(this._spinnerContainer)return;this._spinnerContainer=this.get("contentBox").appendChild('<div class="switch-products-spinner"></div>');this._loadingSpinner=new s.Squarespace.Spinner({render:this._spinnerContainer,size:"extra-large",color:"dark"})},_destroySpinner:function(){this._loadingSpinner&&this._loadingSpinner.destroy();this._spinnerContainer&&this._spinnerContainer.empty()},_renderReactivate:function(){this.mountNode=s.Node.create("<div>");this.get("contentBox").append(this.mountNode);n.render(i.createElement(u),this.mountNode.getDOMNode())},_getReactivationEligibility:function(){this.set("isLoaded",false);return o.get("/api/rest/websites/reactivation/eligibility").then(function(e){this.set("isEligibleForReactivation",e.data.eligible);this.set("isLoaded",true)}.bind(this),function(){this.set("isLoaded",true)}.bind(this))},_getCurrentProductLine:function(){var e=s.Squarespace.Context.getInstance().get("website").get("websiteType");if(!s.Lang.isNumber(e)){false;e=m.CLASSIC}return v.getProductLineForWebsiteType(e)},_getSwitchProductsPusherConfigs:function(){var t=this._getCurrentProductLine();return[b.CLASSIC,b.COMMERCE].filter(function(e){return e!==t}).map(function(e){if(e===b.CLASSIC)return this._getClassicProductLinePusherConfig();if(e===b.COMMERCE)return this._getCommerceProductLinePusherConfig();return null}.bind(this))},_getClassicProductLinePusherConfig:function(){var n=this._getCurrentProductLine();return{name:"change-to-website",title:r("Website"),description:r("All-in-one, beautiful website platform"),onClick:function(){var i={fromProductLine:n,toProductLine:b.CLASSIC};h("engagement_product_switch_attempt",i);return s.Squarespace.Promises.create(function(e,t){var a;if(n===b.COVER_PAGE){a=new s.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You\'re about to switch to a Website plan. You won\'t be able to return to the Cover Page plan on this site.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:S.SWITCH_PRODUCTS}),width:400});a.on("cancel",function(){h("engagement_product_switch_attempt_reject",i)});a.on("confirm",function(){h("engagement_product_switch_attempt_confirm",i)})}else n===b.COMMERCE&&(a=new s.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You are about to switch to our Website plan. Some Commerce features will be disabled, and you\'ll be charged an additional transaction fee for orders.<br /><a target="_blank" href="{switchProductsUrl}">Learn more about how your site will change.</a>',{switchProductsUrl:S.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()}).then(function(){return this.ensureTemplateIsPicked(b.CLASSIC)}.bind(this)).then(function(){return g.load()}).then(function(e,t){return this.skipOverBillingIfNotACustomer(b.CLASSIC)}.bind(this)).then(function(e,t){this.get("router").push(y.forSwitchProducts()+"change-to-website")}.bind(this))}.bind(this)}},_getCommerceProductLinePusherConfig:function(){var n=this._getCurrentProductLine();return{name:"change-to-commerce",title:r("Commerce"),description:r("Powerful platform for merchants"),onClick:function(){var i={fromProductLine:n,toProductLine:b.COMMERCE};h("engagement_product_switch_attempt",i);return s.Squarespace.Promises.create(function(e,t){var a;if(n===b.COVER_PAGE){a=new s.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You\'re about to switch to a Commerce plan. You won\'t be able to return to the Cover Page plan on this site.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:S.SWITCH_PRODUCTS}),width:400});a.on("cancel",function(){h("engagement_product_switch_attempt_reject",i)});a.on("confirm",function(){h("engagement_product_switch_attempt_confirm",i)})}else n===b.CLASSIC&&(a=new s.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You are about to switch to our Commerce plan, which is designed for businesses who have a primary goal of selling.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:S.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()}).then(function(){return this.ensureTemplateIsPicked(b.COMMERCE)}.bind(this)).then(function(){return g.load()}).then(function(e,t){return this.skipOverBillingIfNotACustomer(b.COMMERCE)}.bind(this)).then(function(e,t){this.get("router").push(y.forSwitchProducts()+"change-to-commerce")}.bind(this))}.bind(this)}},_getCoverPageProductLinePusherConfig:function(){var i=this._getCurrentProductLine();return{name:"change-to-cover-page",title:r("Cover Page"),description:r("Focused, single page website"),onClick:function(){h("engagement_product_switch_attempt",{fromProductLine:i,toProductLine:b.COVER_PAGE});var e=s.Squarespace.Promises.create(function(e,t){var a;i===b.CLASSIC?a=new s.Squarespace.Widgets.Confirmation({width:500,"strings.title":r("Are you sure?"),"strings.message":r('Your website will be converted to a single Cover Page and the rest of your pages and content will be hidden.<br /><br />We\'ll preserve a copy of the rest of your former website\'s contents while your Cover Page is active, so that if you later decide to return to a Website plan, your old content will appear on your new site.<br /><br />To continue, select a Cover Page to set as your homepage.<br /><br /><a target="_blank" href="{switchProductsUrl}">Learn more</a>',{switchProductsUrl:S.SWITCH_PRODUCTS})}):i===b.COMMERCE&&(a=new s.Squarespace.Widgets.Confirmation({width:500,"strings.title":r("Are you sure?"),"strings.message":r('Your website will be converted to a single Cover Page and the rest of your pages and content will be hidden. Your orders, inventory and other store sections will also be hidden.<br /><br />We\'ll preserve a copy of the rest of your former website\'s contents while your Cover Page is active, so that if you later decide to return to a Commerce plan, your old content will appear on your new site.<br /><br />To continue, select a Cover Page to set as your homepage.<br /><br /><a target="_blank" href="{switchProductsUrl}">Learn more</a>',{switchProductsUrl:S.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()});this._isNotAPaidWebsite()||(e=e.then(function(){return g.load()}).then(function(){p.selectFeatureLevel(f)},this));return e.then(function(e,t){this.get("router").push(y.forSwitchProducts()+"change-to-cover-page")}.bind(this))}.bind(this)}},skipOverBillingIfNotACustomer:function(a){return s.Squarespace.Promises.create(function(e,t){if(this._isNotAPaidWebsite()){this._startProductSwitchAuthorizationFlow(a,{templateIdentifier:s.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__});t()}else e()},this)},ensureTemplateIsPicked:function(a){var i=this._getCurrentProductLine();return s.Squarespace.Promises.create(function(e,t){[b.COVER_PAGE,b.PARKING_PAGE].indexOf(i)>=0?this._getTemplatePickerActivation(a).then(e,t):e()},this)},_isNotAPaidWebsite:function(){var e=s.Squarespace.Context.getInstance().get("website");var t=e.get("siteStatus.value");return this._isParkingPage()||t===s.Squarespace.StatusConstants.INTERNAL||t===s.Squarespace.StatusConstants.TRIAL||t===s.Squarespace.StatusConstants.COMPED},_isParkingPage:function(){var e=s.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");return t===m.PARKING_PAGE},_getTemplatePickerActivation:function(i){return s.Squarespace.Promises.create(function(t,e){var a=new s.Squarespace.TemplatePicker({render:true,"strings.callToAction":r("Select"),"strings.title":r("Choose a template to get started"),className:"no-description",websiteType:v.getWebsiteTypeForProductLine(i)});a.once("install-template",function(e){a.destroy();s.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__=e.identifier;t()},this)})},_getRenderedPushersArray:function(){return[]}},{ATTRS:{strings:{valueFn:function(){var e=r("Switch Products");var t=r('Squarespace offers a range of customized products which can simplify your Squarespace experience depending on your goals. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:S.SWITCH_PRODUCTS});if(s.Squarespace.Utils.isCoverPageOnly()){e=r("Upgrade Product");t=r("Squarespace Cover Pages are just the beginning. Upgrade to a full website or Squarespace Commerce to experience the full power of our platform.")}else if(this._isParkingPage()){e=r("Build a Site");t=r('Squarespace offers a range of website building options depending on your goals. Start with a simple landing page, a full website, or an online store. Choose one of the products below to start your 14 day free trial. <br /><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:S.SWITCH_PRODUCTS})}return{title:e,subtitle:t}}},router:{},isEligibleForReactivation:{value:false},isLoaded:{value:true},forParkingPage:{value:false}}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-base","squarespace-system-error","squarespace-widgets-billing-checkout-cover-page-picker","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-spinner","squarespace-template-picker","squarespace-widgets-billing-checkout-commerce-picker","squarespace-widgets-billing-checkout-website-picker","squarespace-promises"]})},12016:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(514);var r=a(323);var o=a(11551).isYuiClassEnabled;YUI.add("squarespace-widgets-billing-checkout-cover-page-picker",function(a){if(o("CoverPagePicker")){a.namespace("Squarespace.Widgets.Billing.Checkout");a.Squarespace.Widgets.Billing.Checkout.CoverPagePicker=a.Base.create("CoverPagePicker",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.Squarespace.Mixins.Loadable,a.Squarespace.Damask.Panel.MixinPanel,a.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{initializer:function(){this.publish("chosen",{defaultFn:function(e){var t=this.get("onChosen");t&&t(e)},context:this});this._slideLayouts=[];a.Data.get({url:"/api/slide-layouts",data:{slideType:a.Squarespace.SlideType.COVER_PAGE},success:function(e){this._slideLayouts=e.results;this.fire("slide-layouts-loaded")}},this)},renderUI:function(){this._renderCoverPages()},_renderCoverPages:function(){var e=this.get("contentBox");var t=this._renderHeader();this._isParkingPage()||(t+=this._renderExistingCoverPages());t+=this._renderNewCoverPages();e.setContent(t);this._adjustDimensions()},_renderHeader:function(){var e=i("Select a Cover Page to continue.");var t=i("Confirm Product Change");var a=i("To change your plan, choose an existing Cover page or create a new one.");if(this._isParkingPage()){e=i("Choose your Cover Page layout to continue.");t=i("Start Free Trial");a=""}return'<div class="header"><span class="headline">'+e+'</span><span class="confirm-plan-change" data-action="confirm-plan-change">'+t+'</span><p class="explanation">'+a+"</p></div>"},_renderExistingCoverPages:function(){var e=a.Squarespace.ContentCollectionCache.filter(function(e){return e.get("type")===n.SPLASH_PAGE});var t=e.map(function(e){return'<div class="cover-page-frame"><div class="select"><span data-collection-id="'+e.get("id")+'">'+i("Select")+'</span></div><iframe src="/'+e.get("urlId")+'"></iframe></div>'}).join("");""!==t&&(t='<div class="cover-page-frame-wrapper"><div class="label">Existing</div><div class="items">'+t+"</div></div>");return t},_renderNewCoverPages:function(){var e=this._isParkingPage()?"":i("New");var t=this._slideLayouts.map(function(e){return'<div class="new-cover-page" style="background-image: url('+e.thumbnailUrl+')" /><div class="select"><span data-cover-page-identifier="'+e.identifier+'">'+i("Select")+"</span></div></div>"}).join("");""===t&&(t='<span class="loading">'+i("Loading…")+"</span>");t='<div class="new-cover-page-wrapper"><span class="label">'+e+'</span><div class="items">'+t+"</div></div>";return t},_adjustDimensions:function(){var e=this.get("contentBox").one(".items").get("offsetWidth");var t=".items > div.new-cover-page, .items > div.cover-page-frame";var a=this.get("contentBox").one(t);if(!a)return;var i=a.get("offsetWidth");var n=Math.floor(e/i);var s=e-n*i;var r=2*(n-1);var o=Math.floor(s/r);var l="."+this.getClassName("content")+" .items > div";var c=l+" { margin-left: "+o+"px !important; margin-right: "+o+"px !important; margin-bottom: "+o+"px !important; }";var d=l+":nth-child("+n+"n) { margin-right: 0px !important; }";var u=l+":nth-child("+n+"n+1) { margin-left: 0px !important; }";this._dimensionsStyleNode||(this._dimensionsStyleNode=this.get("boundingBox").appendChild("<style></style>"));this._dimensionsStyleNode.set("innerText",[c,u,d].join(""))},_isParkingPage:function(){return Static.SQUARESPACE_CONTEXT.website.websiteType===s.PARKING_PAGE},bindUI:function(){this._registerEvent(a.one(a.config.win).on("resize",function(){this._adjustDimensions()},this));this.get("contentBox").delegate("click",function(e){this.get("selectedExistingCollectionId")===e.target.getAttribute("data-collection-id")?this.set("selectedExistingCollectionId",null):this.set("selectedExistingCollectionId",e.target.getAttribute("data-collection-id"));this.set("selectedNewCoverPageLayoutIdentifier",null)},"[data-collection-id]",this);this.get("contentBox").delegate("click",function(e){this.get("selectedNewCoverPageLayoutIdentifier")===e.target.getAttribute("data-cover-page-identifier")?this.set("selectedNewCoverPageLayoutIdentifier",null):this.set("selectedNewCoverPageLayoutIdentifier",e.target.getAttribute("data-cover-page-identifier"));this.set("selectedExistingCollectionId",null)},"[data-cover-page-identifier]",this);this.get("contentBox").delegate("click",this._emitChosen,'[data-action="confirm-plan-change"]',this);this.on("slide-layouts-loaded",this._renderCoverPages,this);this.after(["selectedExistingCollectionIdChange","selectedNewCoverPageLayoutIdentifierChange"],function(e){var t=this.get("contentBox");t.all(".selected").each(function(e){e.removeClass("selected");e.one(".select span").setContent("Select")});var a=null;this.get("selectedExistingCollectionId")?a=t.one('[data-collection-id="'+this.get("selectedExistingCollectionId")+'"]').ancestor(".cover-page-frame"):this.get("selectedNewCoverPageLayoutIdentifier")&&(a=t.one('[data-cover-page-identifier="'+this.get("selectedNewCoverPageLayoutIdentifier")+'"]').ancestor(".new-cover-page"));if(a){a.one(".select span").setContent("Selected");a.addClass("selected");t.addClass("has-selected")}else t.removeClass("has-selected")},this)},_emitChosen:function(){var e={};this.get("selectedExistingCollectionId")?e.collectionId=this.get("selectedExistingCollectionId"):this.get("selectedNewCoverPageLayoutIdentifier")&&(e.coverPageIdentifier=this.get("selectedNewCoverPageLayoutIdentifier"));this.fire("chosen",e)}},{CSS_PREFIX:"sqs-cover-page-picker",ATTRS:{selectedExistingCollectionId:{},selectedNewCoverPageLayoutIdentifier:{},onChosen:{valueFn:function(){return function(e){this._startProductSwitchAuthorizationFlow(r.COVER_PAGE,{coverPageSlideIdentifier:e.coverPageIdentifier,existingCoverPageId:e.collectionId})}.bind(this)}}}})}},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-mixins-loadable","squarespace-models-content-collection","squarespace-ss-widget","widget-parent"]})},12017:function(e,t,a){var c=a(24).t;var i=a(11467);var n=a(1114);var d=a(430);var s=a(0);var r=a(60);var u=a(1170);var g=a(1701);var o=a(228);var p=a(213);var h=a(1392);var f=a(514);var m=a(13077);var v=a(1179);var b=a(1076);var l=a(408).deserializer;var y=a(1389);var S=l(y,"data.invoice");YUI.add("squarespace-settings-site-billing-panels-mixin-switch-products",function(l){l.namespace("Squarespace.Settings.Site.BillingPanels");l.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts=l.Base.create("MixinSwitchProducts",l.Base,[],{_isNotAPaidWebsite:function(){var e=l.Squarespace.Context.getInstance().get("website");var t=e.get("siteStatus.value");return this._isParkingPage()||t===l.Squarespace.StatusConstants.INTERNAL||t===l.Squarespace.StatusConstants.TRIAL||t===l.Squarespace.StatusConstants.COMPED},_isParkingPage:function(){var e=l.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");return t===f.PARKING_PAGE},_showBigSpinner:function(){this._bigSpinnerRenderTarget||(this._bigSpinnerRenderTarget=this.get("contentBox").appendChild('<div class="transaction-overlay"></div>').getDOMNode());var e=this._isParkingPage()?c("Please wait while we set up your 14 day free trial…"):c("Please wait while we process your product change…");r.render(s.createElement(i,{visible:true,subtext:e}),this._bigSpinnerRenderTarget)},_hideBigSpinner:function(){if(!this._bigSpinnerRenderTarget)return;r.unmountComponentAtNode(this._bigSpinnerRenderTarget);this._bigSpinnerRenderTarget=null},_hasValidViolations:function(e){if(!e||0===e.length)return false;e=e.filter(function(e){return e.userActionRequired});return e.length>0},_destroyOrderSummary:function(){if(!this._orderSummaryRenderNode)return;r.unmountComponentAtNode(this._orderSummaryRenderNode);this._orderSummaryRenderNode=null},_showViolations:function(e){var t;t=1===e.length?'<div class="plan-violations-alert-message">'+e[0].message+"</div>":'<ul class="plan-violations-alert-message">'+e.map(function(e){return"<li>"+e.message+"</li>"}).join("")+"</ul>";new l.Squarespace.Widgets.Alert({"strings.title":c("Plan Change Violations"),"strings.message":t})},_getCurrentProductLine:function(){var e=l.Squarespace.Context.getInstance().get("website").get("websiteType");if(!l.Lang.isNumber(e)){false;e=f.CLASSIC}return n.getProductLineForWebsiteType(e)},_doProductSwitch:function(e,t){l.Data.post({url:"/api/billing/product-types/website/product-lines/"+e+"/transitions",data:t,success:function(){p("engagement_product_switch_complete",{fromProductLine:this._getCurrentProductLine(),toProductLine:e,planId:t.planId,coverPageIdentifier:t.coverPageSlideIdentifier,usedExistingPage:!!t.existingCoverPageId,templateWebsiteIdentifier:t.templateIdentifier}).then(function(){l.config.win.location.href="/config"})},failure:function(e){this._hideBigSpinner();if(e.billingErrorCode===h.CARD_DECLINED){this._destroyOrderSummary();var t=new l.Squarespace.Widgets.Confirmation({"strings.title":c("Card Declined"),"strings.message":c("Please update your billing information and try again"),"strings.confirm":c("Update Card")});t.on("confirm",function(){l.Squarespace.Singletons.Location.go("/settings/billing/billing/payment-info")});return}var a=new l.Squarespace.SystemError(c("Product Switching Error"),e,"json");a.show()},json:true},this)},_previewChangeForNotPaidAndDoProductSwitch:function(t,a){this._showBigSpinner();o.post("/api/billing/product-types/website/product-lines/"+t+"/transitions/preview",a).then(function(e){if(this._hasValidViolations(e.data.violations)){this._destroyOrderSummary();this._hideBigSpinner();this._showViolations(e.data.violations);return}this._doProductSwitch(t,a)}.bind(this))},_renderOrderSummary:function(e){this._orderSummaryRenderNode||(this._orderSummaryRenderNode=this.get("contentBox").appendChild("<div></div>").getDOMNode());r.render(s.createElement(m,l.merge({fromProductLine:this._getCurrentProductLine(),onCancel:this._destroyOrderSummary.bind(this),onConfirmProductChange:function(){this._showBigSpinner();this._doProductSwitch(e.toProductLine,e.websiteProductLineChangeParams)}.bind(this)},e)),this._orderSummaryRenderNode)},_confirmBillingChangesWithUser:function(n){return new l.Squarespace.Promises.create(function(){o.post("/api/billing/product-types/website/product-lines/"+n.toProductLine+"/transitions/preview",n.websiteProductLineChangeParams).then(S).then(function(e){var t=e.data;var a=t.violations;var i=t.invoice;this._hideBigSpinner();if(this._hasValidViolations(a)){this._destroyOrderSummary();this._showViolations(a);return}this._renderOrderSummary(l.merge(n,{loading:false,invoice:i}))}.bind(this))},this)},_startProductSwitchAuthorizationFlow:function(n,s){if(this._isNotAPaidWebsite()){this._previewChangeForNotPaidAndDoProductSwitch(n,s);return}this._renderOrderSummary({loading:true});var r=u.getState().featureLevel;var o=new l.Squarespace.Models.Billing.Summary;var e=l.Squarespace.Promises.create(function(e){if(this._isNotAPaidWebsite()||v.getState().loaded){e();return}b.load().then(e)}.bind(this));var t=l.Squarespace.Promises.create(function(e){o.load(e)});var a=l.Squarespace.Promises.create(function(e,t){g.getState().productLine===n?e(g.getState()):d.getAvailablePlans(n).then(e,t)});l.Squarespace.Promises.all(t,a,e).then(function(){var e=o.get("subscriptions").toArray().find(function(e){return"website"===e.get("type")});if(!e){this._hideBigSpinner();new l.Squarespace.SystemError(c("Missing Billing Account"),{},"json");return}var t=l.Array.find(g.getState().products,function(e){return e.featureLevel===r});var a={};l.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__&&(a.templateIdentifier=l.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__);var i=l.merge(a,s,{subscriptionId:e.get("id"),featureLevel:r});this._confirmBillingChangesWithUser({toProductLine:n,websiteProductLineChangeParams:i,currentProductName:e.get("plan.planDisplayName"),selectedProductName:t.name,currency:g.getState().currency}).then(function(){this._doProductSwitch(n,i)}.bind(this))}.bind(this))}})},"1.0",{requires:["base","squarespace-context","squarespace-damask-panel-async-data-panel","squarespace-models-billing-summary","squarespace-promises","squarespace-singletons-location","squarespace-system-error","squarespace-widgets-alert","squarespace-widgets-billing-checkout-cover-page-picker"]})},12018:function(e,t){YUI.add("squarespace-models-billing-summary",function(a){a.namespace("Squarespace.Models.Billing");a.Squarespace.Models.Billing.Summary=a.Base.create("billingSummary",a.Model,[a.Squarespace.ModelSync.REST],{initializer:function(){this.onceAfter("load",function(){this.set("initialLoadComplete",true)},this)},url:"/api/billing/summary",isNew:function(){return false},parse:function(e){var t=a.Squarespace.Models.Billing.Summary.superclass.parse.call(this,e);t.subscriptions=new a.Squarespace.Models.Billing.SubscriptionList({items:a.Array.map(t.subscriptions,function(e){a.Lang.isNumber(e.renewalDate)&&(e.renewalDate=new Date(e.renewalDate));"resold"===e.type&&(e.type="website");return e})});t.customer=new a.Squarespace.Models.BillingInformation(t.customer);return t},_setCustomer:function(e){if(a.Squarespace.Utils.isIAP()||a.Squarespace.Utils.isIAPGracePeriod())return;var t=this.get("customer");t?t.setAttrs(e.toJSON()):t=e;return t}},{ATTRS:{initialLoadComplete:{value:false,validator:a.Squarespace.AttrValidators.isBoolean},subscriptions:{validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.Billing.SubscriptionList)},customer:{valueFn:function(){return new a.Squarespace.Models.BillingInformation},setter:"_setCustomer",validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.BillingInformation)},cardLast4:{getter:function(){var e=this.get("customer");if(e){var t=e.get("cardNumber");if(a.Lang.isString(t))return t.substr(-4)}return null}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-billing-information","squarespace-models-billing-subscription-list"]})},12019:function(e,t,a){var o=a(2759);YUI.add("squarespace-models-billing-information",function(r){r.namespace("Squarespace.Models");r.Squarespace.Models.BillingInformation=r.Base.create("BillingInformation",r.Model,[],{url:"/api/billing/customer",sync:function(e,t,a){r.Lang.isFunction(a)||(a=function(){});var i=function(e){a(null,e.data)};var n=function(e){var t={code:e.status,msg:e.statusText,responseJSON:{errors:e.data}};a.call(null,t,e)};var s=this.toJSON();switch(e){case"create":o.create(s).then(i,n);break;case"update":o.save(s).then(i,n);break;case"read":o.loadCustomer().then(i,n);break;default:throw new Error("Unsupported action: "+e)}}},{ATTRS:{name:{validator:r.Squarespace.AttrValidators.isString},balance:{validator:r.Squarespace.AttrValidators.isNumber},cardNumber:{validator:r.Squarespace.AttrValidators.isString},cvv:{validator:r.Squarespace.AttrValidators.isNullOrString,value:null},zip:{validator:r.Squarespace.AttrValidators.isString},expirationMonth:{validator:r.Squarespace.AttrValidators.isNumber},expirationYear:{validator:r.Squarespace.AttrValidators.isNumber},country:{validator:function(e){if(!r.Lang.isString(e))return false;if(""===e)return false;return r.Lang.isValue(r.Squarespace.Localities.COUNTRY_OPTIONS[e])}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-localities"]})},12020:function(e,t){YUI.add("squarespace-models-billing-subscription-list",function(a){a.namespace("Squarespace.Models.Billing");var i=a.Squarespace.Models.Billing.SubscriptionList=a.Base.create("billingSubscriptionList",a.ModelList,[],{model:a.Squarespace.Models.Billing.Subscription,add:function(e,t){e=a.Lang.isArray(e)?a.Array.map(e,this._reifyModel,this):this._reifyModel(e);return i.superclass.add.call(this,e,t)},filterByType:function(t){return this.filter(function(e){return e.get("type")===t})},isPastDue:function(){return this.some(function(e){return e.get("pastDue")})},_reifyModel:function(e){if(e instanceof a.Model)return e;return a.Squarespace.Models.Billing.SubscriptionFactory.create(e)}})},"1.0",{requires:["base","model-list","squarespace-models-billing-subscription","squarespace-models-billing-subscription-factory"]})},12021:function(e,t,a){var i=a(96);YUI.add("squarespace-models-billing-subscription",function(n){n.namespace("Squarespace.Models.Billing");var e=function(e,t){if(e instanceof i)return true;try{i.fromJson(e);return true}catch(e){false;return false}};n.Squarespace.Models.Billing.Subscription=n.Base.create("billingSubscription",n.Model,[n.Squarespace.ModelSync.REST],{url:"/api/billing/subscriptions/{id}",root:"/api/billing/subscriptions",initializer:function(e){!n.Lang.isObject(e.nextChargeAmount)||e.nextChargeAmount instanceof i||this.set("nextChargeAmount",i.fromJson(e.nextChargeAmount));!n.Lang.isObject(e.nextChargeTax)||e.nextChargeTax instanceof i||this.set("nextChargeTax",i.fromJson(e.nextChargeTax))},isNew:function(){return!n.Lang.isString(this.get("id"))},previewCancel:function(){return n.Squarespace.Promises.create(function(t,e){var a=this.getURL("read")+"/cancellation-preview";n.Data.get({url:a,success:function(e){n.Lang.isValue(e.refundAmount)?t({refundAmount:i.fromJson(e.refundAmount)}):n.Lang.isValue(e.amount)?t({refundAmount:new i(e.amount,"USD")}):t(null)},failure:e})},this)},previewQuantityChange:function(e){return n.Squarespace.Promises.create(function(t,a){var i=new n.Squarespace.Models.QuantityChangePreview({subscriptionId:this.get("id"),newQuantity:e});i.load(function(e){n.Lang.isValue(e)?a(e):t(i)})},this)},changePeriod:function(e){return n.Squarespace.Promises.create(function(t,a){this.setLegacyPeriod(e);this.save(function(e){n.Lang.isValue(e)?a(e):t(this)})},this)},toJSON:function(){var e=n.Squarespace.Models.Billing.Subscription.superclass.toJSON.call(this);n.Lang.isDate(e.renewalDate)&&(e.renewalDate=e.renewalDate.getTime());e.nextChargeAmount instanceof i&&(e.nextChargeAmount=e.nextChargeAmount.toJson());e.nextChargeTax instanceof i&&(e.nextChargeTax=e.nextChargeTax.toJson());return e},parse:function(e){var t=n.Squarespace.Models.Billing.Subscription.superclass.parse.call(this,e);n.Lang.isNumber(t.renewalDate)&&(t.renewalDate=new Date(t.renewalDate));return t},setLegacyPlan:function(e){this.set("product",n.merge(this.get("product"),{plan:e}))},setLegacyPeriod:function(e){this.set("product",n.merge(this.get("product"),{period:e}))}},{ATTRS:{id:{validator:n.Squarespace.AttrValidators.isString},renewalDate:{validator:n.Squarespace.AttrValidators.isDate},nextChargeAmount:{validator:e,setter:function(e){if(n.Lang.isObject(e)&&!(e instanceof i))return i.fromJson(e);return e}},nextChargeTax:{validator:e,setter:function(e){if(n.Lang.isObject(e)&&!(e instanceof i))return i.fromJson(e);return e}},product:{validator:function(e){return n.Lang.isString(e.plan)&&n.Lang.isString(e.period)}},type:{validator:n.Squarespace.AttrValidators.isString},postSubscribeTemplateInstallIdentifier:{validator:n.Squarespace.AttrValidators.isNullOrString,value:null},coverPageCollectionId:{validator:n.Squarespace.AttrValidators.isNullOrString,value:null},createNewCoverPage:{validator:n.Squarespace.AttrValidators.isNullOrBoolean,value:null}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-quantity-change-preview","squarespace-promises"]})},12022:function(e,t,a){var i=a(11551).isYuiClassEnabled;YUI.add("squarespace-models-quantity-change-preview",function(e){i("QuantityChangePreview")&&(e.Squarespace.Models.QuantityChangePreview=e.Base.create("QuantityChangePreview",e.Model,[e.Squarespace.ModelSync.REST],{url:"/api/billing/quantity-change-preview?subId={subscriptionId}&qty={newQuantity}"},{ATTRS:{subscriptionId:{validator:e.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},newQuantity:{validator:e.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},amount:{validator:e.Squarespace.AttrValidators.isNumber}}}))},"1.0",{requires:["base","squarespace-attr-validators","squarespace-model-sync-rest"]})},12023:function(e,t){YUI.add("squarespace-models-billing-subscription-factory",function(i){i.namespace("Squarespace.Models.Billing");var n={googleapps:i.Squarespace.Models.Billing.GoogleAppsSubscription,website:i.Squarespace.Models.Billing.WebsiteSubscription,domain:i.Squarespace.Models.Billing.DomainSubscription,campaigns:i.Squarespace.Models.Billing.CampaignsSubscription};i.Squarespace.Models.Billing.SubscriptionFactory={create:function(e){var t=e.type;var a=n[t];if(!i.Lang.isFunction(a))return null;return new a(e)}}},"1.0",{requires:["squarespace-models-billing-campaigns-subscription","squarespace-models-billing-domain-subscription","squarespace-models-billing-google-apps-subscription","squarespace-models-billing-website-subscription"]})},12024:function(e,t){YUI.add("squarespace-models-billing-campaigns-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.CampaignsSubscription=e.Base.create("campaigns",e.Squarespace.Models.Billing.Subscription,[e.Squarespace.Models.Billing.AutorenewTogglable],{},{ATTRS:{autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean},plan:{validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription","squarespace-models-billing-autorenew-togglable"]})},12025:function(e,t){YUI.add("squarespace-models-billing-autorenew-togglable",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.AutorenewTogglable=e.Base.create("autorenewTogglable",e.Base,[],{enableAutorenew:function(){this.set("autorenewEnabled",true)},disableAutorenew:function(){this.set("autorenewEnabled",false)},toggleAutorenew:function(){this.set("autorenewEnabled",!this.get("autorenewEnabled"))}},{ATTRS:{autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators"]})},12026:function(e,t){YUI.add("squarespace-models-billing-domain-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.DomainSubscription=e.Base.create("domainSub",e.Squarespace.Models.Billing.Subscription,[],{},{ATTRS:{domainName:{validator:e.Squarespace.AttrValidators.isString},autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription"]})},12027:function(e,t){YUI.add("squarespace-models-billing-google-apps-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.GoogleAppsSubscription=e.Base.create("googleAppsSub",e.Squarespace.Models.Billing.Subscription,[],{},{ATTRS:{domain:{validator:e.Squarespace.AttrValidators.isString},numAddresses:{validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription"]})},12028:function(e,t){YUI.add("squarespace-models-billing-website-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.WebsiteSubscription=e.Base.create("websiteSubscription",e.Squarespace.Models.Billing.Subscription,[e.Squarespace.Models.Billing.AutorenewTogglable],{},{ATTRS:{startDate:{validator:e.Squarespace.AttrValidators.isNumber},endDate:{validator:e.Squarespace.AttrValidators.isNumber},product:{validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription","squarespace-models-billing-autorenew-togglable"]})},12029:function(e,t,a){var i=a(11793);var n=a(0);var s=a(60);var r=a(323);YUI.add("squarespace-widgets-billing-checkout-commerce-picker",function(e){e.namespace("Squarespace.Widgets.Billing.Checkout");var t=e.Squarespace.Widgets.Billing.Checkout.CommercePlanPicker=e.Base.create("CommercePicker",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.mountNode=e.Node.create("<div>");this.get("contentBox").append(this.mountNode);s.render(n.createElement(i,{productLine:r.COMMERCE,onFeatureLevelSelected:function(){this._startProductSwitchAuthorizationFlow(r.COMMERCE,{templateIdentifier:e.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__})}.bind(this),showProductLinePicker:false}),this.mountNode.getDOMNode())},destructor:function(){if(this.mountNode){s.unmountComponentAtNode(this.mountNode.getDOMNode());this.mountNode.remove(true);this.mountNode=null}}},{CSS_PREFIX:"sqs-commerce-plan-picker",ATTRS:{}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-ss-widget"]})},12039:function(e,t,a){var i=a(11793);var n=a(0);var s=a(60);var r=a(323);YUI.add("squarespace-widgets-billing-checkout-website-picker",function(e){e.namespace("Squarespace.Widgets.Billing.Checkout");var t=e.Squarespace.Widgets.Billing.Checkout.WebsitePlanPicker=e.Base.create("WebsitePicker",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.get("boundingBox").setStyle("width","100%");this.mountNode=e.Node.create("<div>");this.get("contentBox").append(this.mountNode);s.render(n.createElement(i,{productLine:r.CLASSIC,onFeatureLevelSelected:function(){this._startProductSwitchAuthorizationFlow(r.CLASSIC,{templateIdentifier:e.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__})}.bind(this),showProductLinePicker:false}),this.mountNode.getDOMNode())},destructor:function(){if(this.mountNode){s.unmountComponentAtNode(this.mountNode.getDOMNode());this.mountNode.remove(true);this.mountNode=null}}},{CSS_PREFIX:"sqs-website-plan-picker",ATTRS:{}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-ss-widget"]})},12049:function(e,t,a){var i=a(13238);YUI.add("squarespace-plugin-inline-input-editor",function(t){t.Event.defineOutside("click");t.namespace("Squarespace.Plugin");t.Squarespace.Plugin.InlineInputEditor=t.Base.create("InlineInputEditor",t.Plugin.Base,[],{initializer:function(){var e=this.get("input");this.get("host").get("boundingBox").addClass("inline-editing");this.get("render").append(e);this._bindInputEvents();e.focus();this.get("autoSelect")&&e.select()},destructor:function(){this.get("host").get("boundingBox").removeClass("inline-editing");t.Array.invoke(this._events,"detach");this.get("input").remove(true)},finishEditing:function e(){var t=this.get("host");var a=this.constructor.NS;if(!t.hasPlugin(a))return;this._commitChanges();var i=this.get("onBlur");"function"===typeof i&&i()},_bindInputEvents:function(){var a=this.get("input");this._events=[a.on(["click","contextmenu"],function(e){e.halt()}),a.on("clickoutside",function e(t){t.halt(true);a.blur();i()&&this.finishEditing()},this),a.on("blur",this.finishEditing,this),a.on("keyup",function e(t){var a=t.target;this.set("data",a.get("value").trim());if(27===t.keyCode){t.halt();this._clearChanges()}else if(13===t.keyCode){a.blur();i()&&this.finishEditing()}else this.get("onKeyUp")(t)},this)]},_commitChanges:function(){var e={newVal:this.get("data"),prevVal:this.get("initialData")};this.get("onCommit").call(this.get("host"),e);this._unplugFromHost()},_clearChanges:function(){this.set("data",this.get("initialData"));this.get("onClear").call(this.get("host"));this._unplugFromHost()},_unplugFromHost:function(){this.get("host").unplug(this.constructor)}},{NS:"inlineInputEditor",ATTRS:{autoSelect:{value:true},data:{validator:t.Lang.isString},initialData:{validator:t.Lang.isString,valueFn:function(){return this.get("data")},writeOnce:"initOnly"},input:{readOnly:true,valueFn:function(){var e=t.Node.create('<input type="text" />');e.addClass(this.get("inputClassName"));e.set("value",this.get("data"));e.set("placeholder",this.get("strings.placeholder"));return e}},inputClassName:{value:"sqs-inline-input-editor",validator:t.Lang.isString},onClear:{value:function(){},validator:t.Lang.isFunction},onCommit:{validator:t.Lang.isFunction},render:{valueFn:function(){this.get("host").get("contentBox")}},onBlur:{value:function(){}},onKeyUp:{value:function(){}},strings:{value:{placeholder:""}}}})},"1.0",{requires:["array-invoke","base","node","plugin"]})},12058:function(e,t,a){var r=a(24).t;YUI.add("squarespace-async-wrappers-domains",function(s){s.namespace("Squarespace.AsyncWrappers");function a(n){return s.Squarespace.Promises.create(function(t,a){var i=new s.Squarespace.Domains.ViewModels.DomainList;i.load(function(){var e=i.getByName(decodeURIComponent(n));if(!e){a(r("Could not find domain: {domainName}",{domainName:decodeURIComponent(n)}));return}t(e)})})}s.Squarespace.AsyncWrappers.ManagedDNSPanel=s.Base.create("ManagedDNSPanel",s.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,t){a(e.name).then(function(e){t(new s.Squarespace.Domains.Manage.DNS.Edit({domain:e}))})}});s.Squarespace.AsyncWrappers.LinkedDNSPanel=s.Base.create("LinkedDNSPanel",s.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,t){a(e.name).then(function(e){t(new s.Squarespace.Domains.Manage.DNS.Setup({model:e}))})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel","squarespace-domains-manage-dns-edit","squarespace-domains-manage-dns-setup","squarespace-domains-view-models-domain-list","squarespace-domains-view-models-domain","squarespace-promises"]})},12059:function(e,t,a){var n=a(24).t;var s=a(0);var r=a(60);var o=a(1919).default;var l=a(2377);var c=a(2376);YUI.add("squarespace-domains-manage-dns-edit",function(a){a.namespace("Squarespace.Domains.Manage.DNS");var i=a.Squarespace.Domains.Manage.DNS.Edit=a.Base.create("Edit",a.Squarespace.Widgets.SSWidget,[a.Squarespace.Damask.Panel.MixinPanel,a.Squarespace.Mixins.SaveChanges],{renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("nameserverSection");this.get("headerTray").render(e);this.get("recordSection").render(e);this._renderMenuHeader();t.render(e);t.hide()},bindUI:function(){i.superclass.bindUI.call(this);this.on("activeSectionChange",function(e){e.prevVal.hide();e.newVal.show()});var t=this.get("recordSection");var e=this.get("nameserverSection");this._registerEvent(this.get("headerTray").on("tab-switch-requested",this._handleTabSwitch,this),t.on("state-change",this._consumeStateChange,this),e.on("state-change",this._consumeStateChange,this),e.after("usingDefaultNameserversChange",function(e){t.set("usingDefaultNameservers",e.newVal)}))},_consumeStateChange:function(e){this.set("dirty",e.dirty)},_handleTabSwitch:function(t){if(t.dunzo)return;t.halt();this.ensureSavedChanges().then(function(){var e=this.get(t.button.get("name")+"Section");this.set("activeSection",e);this.get("headerTray").fire("tab-switch-requested",a.merge(t,{dunzo:true}))}.bind(this))},_saveChanges:function(){this.set("dirty",false);return this.get("activeSection").saveChanges()},_revertChanges:function(){return this.get("activeSection").revertChanges()},_renderMenuHeader:function(){var e;var t;if(this.get("menuHeaderChildWidget")){t=s.createRef();e=s.createElement("div",{ref:t})}r.render(s.createElement(c.Provider,{value:this.get("router")},s.createElement(l.Provider,{value:this.get("location")},s.createElement(o,{onBackClick:this.get("router")&&this.get("router").goBack,router:this.get("router"),location:this.get("location"),isDirty:this.get("dirty"),onSaveClick:this._saveChanges?this._saveChanges.bind(this):null,onDiscardClick:this._revertChanges?this._revertChanges.bind(this):null,children:e}))),this.get("menuHeaderNode").getDOMNode(),function(){t&&this.get("menuHeaderChildWidget").render(t.current)}.bind(this))}},{CSS_PREFIX:"sqs-domains-manage-dns-edit",ATTRS:{activeSection:{valueFn:function(){return this.get("recordSection")}},domain:{},headerTray:{valueFn:function(){var e=[{name:"record",label:this.get("strings.recordsTabLabel")}];var t=this.get("domain").get("tldFeatures");t.canUpdateNameserverSettings&&e.push({name:"nameserver",label:this.get("strings.nameserversTabLabel")});return new a.Squarespace.Widgets.TabbedHeaderTray({"strings.title":this.get("strings.title"),buttons:e})}},menuHeaderChildWidget:{},menuHeaderNode:{valueFn:function(){return new a.Node.create("<div>")}},location:{},router:{},recordSection:{valueFn:function(){return new a.Squarespace.Domains.Manage.DNS.RecordsEdit({domain:this.get("domain")})}},nameserverSection:{valueFn:function(){return new a.Squarespace.Domains.Manage.DNS.NameserversEdit({domain:this.get("domain")})}},strings:{value:{title:n("Advanced Settings"),recordsTabLabel:n("DNS Records"),nameserversTabLabel:n("Nameservers")}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-domains-manage-dns-nameservers-edit","squarespace-domains-manage-dns-records-edit","squarespace-mixin-save-changes","squarespace-ss-widget","squarespace-tray"]})},12060:function(e,t,a){var i=a(24).t;var n=a(207);var s=a(2606);YUI.add("squarespace-domains-manage-dns-nameservers-edit",function(r){r.namespace("Squarespace.Domains.Manage.DNS");var a=r.Squarespace.Domains.Manage.DNS.NameserversEdit=r.Base.create("NameserversEdit",r.Squarespace.Domains.Manage.DNS.EditSection,[],{renderUI:function(){var e=this.get("boundingBox");this.get("description").appendTo(e);this.get("title").appendTo(e);this.get("presetRadio").render(e);this.get("spinner").render(e)},bindUI:function(){a.superclass.bindUI.call(this);this._registerEvent(this.get("presetRadio").after("dataChange",function(e){if(!e.fromDefault){this.fire("state-change",{dirty:true});"custom"===e.prevVal&&this.set("customNameservers",this.get("editTable").collectCurrentData());this._sendAnalyticEvent(e.newVal)}this.set("usingDefaultNameservers","squarespace"===e.newVal);this.syncUI()},this))},syncUI:function(){a.superclass.syncUI.call(this);this.syncTable()},saveChanges:function(){var s=this.get("editTable");var e=this.get("loadableData");var t=s.collectCurrentData();var a=r.Array.dedupe(t.map(function(e){return e.hostName}));s.set("isLoading",true);e.reset(t);return r.Squarespace.Promises.create(function(i,n){if(a.length<2||a.length>13){this._showSaveError(this.get("strings.countErrorMessage"));s.set("isLoading",false);s.setData(a.map(function(e){return{hostName:e}}));n();return}e.sync("update",{},function(e,t){s.set("isLoading",false);if(!e){i();s.set("initialData",r.clone(this._getTableData()));var a=this.get("presetRadio").get("data");this.set("defaultOption",a);this.set("usingDefaultNameservers","squarespace"===a);return}e.responseJSON&&e.responseJSON.hostName?this.highlightBadNameserver(e.responseJSON):this._showSaveError(e.responseJSON.message);n()}.bind(this))},this)},highlightBadNameserver:function(e){var a=e.message.split(", ").shift();var i=e.hostName;this.get("editTable").get("rows").forEach(function(e){var t=e.collectCurrentData();t.hostName===i&&e.setCellError(0,a)})},_sendAnalyticEvent:function(e){var t=this.get("domain");s.toggleNameserverType(t.get("name"),e,t.get("isPurchasedFree"),t.get("managedDomainExpiration"),t.get("registeredOn"))},_onLoadableDataLoad:function(){a.superclass._onLoadableDataLoad.call(this);this.get("loadableData").getDefaults(function(e){this.set("loadableAndDefaultDataLoaded",true);this.set("defaultNameservers",e.nameServers);var t=this.isCurrentDataDefault();t||this.set("customNameservers",this._getTableData());this.updatePresetRadio(t);this.syncUI()}.bind(this))},_renderTable:function(){var e=this.get("editTable");var t=this._getTableData();e.render(this.get("boundingBox"));e.set("initialData",r.clone(t));e.setData(t);this.updatePresetRadio(this.isCurrentDataDefault())},_getTableData:function(){return this.get("loadableData").toJSON().nameServers},revertChanges:function(){var e=this.get("defaultOption");var t="squarespace"===e?"hide":"show";this.get("presetRadio").set("data",e,{fromDefault:true});a.superclass.revertChanges.call(this);this.toggleInputRow(t);return r.when()},show:function(){a.superclass.show.call(this);this.updatePresetRadio(this.isCurrentDataDefault())},updatePresetRadio:function(e){if(!this.get("loadableAndDefaultDataLoaded"))return;var t="custom";if(e){this.toggleInputRow("hide");t="squarespace"}this.set("defaultOption",t);this.get("presetRadio").set("data",t,{fromDefault:true})},syncTable:function(){if(!this.get("presetRadio").get("data"))return;var e=this.get("editTable");var t="show";if("squarespace"===this.get("presetRadio").get("data")){e.setData(this.get("defaultNameservers"));t="hide"}else e.setData(this.get("customNameservers"));this.toggleInputRow(t)},toggleInputRow:function(e){var t="hide"===e;var a=this.get("editTable");a.toggleInputRow(e);a.set("locked",t)},isCurrentDataDefault:function(){if(!this.get("loadableAndDefaultDataLoaded"))return;var e=this._getTableData();var t=this.get("defaultNameservers");var a=function(e){return e.hostName};return e.map(a).join("")===t.map(a).join("")}},{CSS_PREFIX:"sqs-domains-manage-dns-nameservers-edit",ATTRS:{editTable:{valueFn:function(){return new r.Squarespace.Widgets.EditTable.LockableTable({className:"bleed",header:null,fields:[{name:"hostName",editable:true,validator:r.Squarespace.Domains.DNSTable.validators.valueNotEmpty,inputCell:{dialogConfig:{"strings.placeholder":i("Enter Name Server")}}}],"strings.unlockConfirmTitle":this.get("strings.unlockConfirmTitle"),"strings.unlockConfirmMessage":this.get("strings.unlockConfirmMessage")})}},loadableData:{valueFn:function(){return new r.Squarespace.Domains.ViewModels.NameserverSet({domainId:this.get("domain").get("id")})}},title:{valueFn:function(){return r.Node.create('<h4 class="section-title">'+i("Nameservers")+"</h4>")}},presetRadio:{valueFn:function(){return new r.Squarespace.DialogFields.Radio({name:"nameserverPreset",className:"preset-radio",options:[{label:i("Use Squarespace nameservers"),value:"squarespace"},{label:i("Use custom nameservers"),value:"custom"}]})}},defaultNameservers:{value:[]},customNameservers:{value:[]},defaultOption:{},loadableAndDefaultDataLoaded:{value:false},"strings.description":{value:i('Nameservers control how your website is located based on your domain name. Use Squarespace\'s nameservers unless another service will host your domain. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.ADVANCED_DNS_SETTINGS_LANDING})},"strings.errorTitle":{value:i("Nameserver Error")},"strings.countErrorMessage":{value:i("You must specify at least 2 and at most 13 valid and unique nameservers.")}}})},"1.0",{requires:["base","squarespace-domains-dns-table-validators","squarespace-domains-manage-dns-edit-section","squarespace-domains-view-models-nameserver-set","squarespace-promises","squarespace-widgets-edit-table-lockable-table"]})},12061:function(e,t,a){var l=a(24).t;YUI.add("squarespace-domains-dns-table-validators",function(a){a.namespace("Squarespace.Domains.DNSTable");var s=/^[a-fA-F0-9]{1,4}$/;var i=/^[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?(\.[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?)+$/i;var n=/^[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?$/i;var r=/^(https?:)?(\/\/)?[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,3}(\S*)?$/i;var o=a.Squarespace.Domains.DNSTable.validators={isIPAddress:function(e){var t=e.split(".");var a=t.length;var i=l("Not a valid IP address.");if(4!==a){console.error(e,i);return i}for(var n=0;n<a;n+=1){var s=+t[n];if(isNaN(s)||s<0||s>255){console.error(e,i);return i}}},isIPv6Address:function(e){var t=e.split(":");var a=t.length;var i=l("Not a valid IPv6 address.");if(8!==a){console.error(e,i);return i}for(var n=0;n<a;n+=1)if(!s.test(t[n])){console.error(e,i);return i}},isSrvData:function(e){var t=e.split(" ");var a=l("Please enter your SRV weight, port and mapping in the correct format: 5 8080 www.example.com");if(3!==t.length){console.error(e,a);return a}if(isNaN(t[0])||isNaN(t[1])||!r.test(t[2])){console.error(e,a);return a}},isHostname:function(e){var t=l("Not a valid host name.");if(!i.test(e)){console.error(t);return t}},isValidUrl:function(e){var t=l("Not a valid url.");if(!r.test(e)){console.error(t);return t}},isValidHost:function(e){var t=l("Not a valid host.");var a=e.split(".");var i=e.length<=255&&-1===e.indexOf("..")&&(a.every(function(e){return n.test(e)||""===e})||"@"===e||"*"===e);if(!i){console.log(t);return t}},valueNotEmpty:function(e){if(""===a.Lang.trim(e)){var t=l("Cannot be empty.");console.error(e,t);return t}},isNotIPAddress:function(e){var t=o.isIPAddress(e);var a=l("Cannot be an IP address.");if(!t){console.error(e,a);return a}return o.valueNotEmpty(e)}}},"1.0",{requires:[]})},12062:function(e,t,a){var i=a(24).t;YUI.add("squarespace-domains-manage-dns-edit-section",function(a){a.namespace("Squarespace.Domains.Manage.DNS");var t=a.Squarespace.Domains.Manage.DNS.EditSection=a.Base.create("EditSection",a.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<section></section>",CONTENT_TEMPLATE:null,initializer:function(){this.publish("state-change")},destructor:function(){this.get("description").destroy(true);this.get("editTable").destroy(true);this.get("spinner").destroy(true)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("boundingBox");this.get("description").appendTo(e);this.get("spinner").render(e)},bindUI:function(){var e=this.get("editTableDirtyEvents");this._registerEvent(this.get("editTable").after(e,function(){this.fire("state-change",{dirty:true})},this));this.get("loadableData").load(this._onLoadableDataLoad.bind(this))},hide:function(){this.get("boundingBox").hide()},show:function(){this.get("boundingBox").show()},saveChanges:function(){console.log("implement me plox");return a.when()},revertChanges:function(){this.get("editTable").revertChanges();this.fire("state-change",{dirty:false});return a.when()},_onLoadableDataLoad:function(){this.get("spinner").stop();this._renderTable()},_renderTable:function(){console.log("implement me plox")},_resetTableData:function(){var e=this.get("editTable");var t=this._getTableData();e.set("initialData",a.clone(t));e.setData(t)},_restoreTable:function(){var e=this.get("editTable");var t=this.get("loadableData");var a=this.get("restoreButton");var i=function(){e.set("isLoading",false);a.set("disabled",false)};e.set("isLoading",true);a.set("disabled",true);t.restoreDefaults(function(){t.load(function(){this._resetTableData();i();this.fire("state-change",{dirty:false})}.bind(this))}.bind(this),function(){this._showSaveError();i()}.bind(this))},_showSaveError:function(e){new a.Squarespace.Widgets.Alert({"strings.title":this.get("strings.errorTitle"),"strings.message":e||i("An unexpected error occured while changing your DNS settings.")})},_getTableData:function(){return this.get("loadableData")}},{CSS_PREFIX:"sqs-domains-manage-dns-edit-section",ATTRS:{domain:{},description:{valueFn:function(){return a.Node.create("<p></p>").setContent(this.get("strings.description"))}},editTable:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Widgets.EditTable.Table)},editTableDirtyEvents:{value:["edit-table:row-delete","edit-table:row-add","edit-table:cell-edit"],validator:a.Squarespace.AttrValidators.isArray},loadableData:{},spinner:{valueFn:function(){return new a.Squarespace.Spinner({size:44,color:"dark"})}},usingDefaultNameservers:{value:true}}})},"1.0",{requires:["base","node","squarespace-domains-view-models-preset-template-list","squarespace-dialog-button","squarespace-ss-widget","squarespace-spinner","squarespace-widgets-confirmation","squarespace-widgets-edit-table-table"]})},12063:function(e,t){YUI.add("squarespace-domains-view-models-preset-template-list",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.PresetTemplateList=e.Base.create("PresetTemplateList",e.Squarespace.Models.ModelList,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.API_ROOT+"domain-preset-templates",model:e.Squarespace.Domains.Models.PresetTemplate,getTypeById:function(e){var t=this.getById(e);return t&&t.get("type")}})},"1.0",{requires:["base","squarespace-domains-models-preset-template","squarespace-model-sync-rest","squarespace-models-model-list"]})},12064:function(e,t){YUI.add("squarespace-domains-models-preset-template",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.PresetTemplate=e.Base.create("PresetTemplate",e.Model,[],{},{ATTRS:{type:{validator:e.Squarespace.AttrValidators.isString},displayName:{validator:e.Squarespace.AttrValidators.isString},records:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12065:function(e,t,a){var s=a(24).t;YUI.add("squarespace-widgets-edit-table-table",function(i){i.namespace("Squarespace.Widgets.EditTable");var n=i.Squarespace.Widgets.EditTable.Table=i.Base.create("table",i.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:"<table></table>",ROW_CONSTRUCTOR:i.Squarespace.Widgets.EditTable.Row,initializer:function(){var e=this.get("actionColumn");e&&this.get("fields").push(e);this._generateRows();this._createInputRow();this.publish("edit-table:row-add");this.publish("edit-table:row-delete");this.publish("edit-table:cell-edit")},destructor:function(){this._destroyAllRows()},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("header");e instanceof i.Node&&e.appendTo(this.get("contentBox"));this._renderAllRows();var t=this.get("loadingOverlay");this.get("spinner").render(t);var a=this.get("boundingBox");t.appendTo(a);a.toggleClass("is-visible",this.get("visible"));a.toggleClass("is-hidden",!this.get("visible"))},bindUI:function(){this._bindInputRowEvents();this.get("rows").forEach(this._bindRowEvents,this);this.after("edit-table:row-add",function(e){this.addRow(e.data)});this.after("edit-table:row-add",function(e){this.get("inputRow").resetDialogCells()});this.after("edit-table:row-delete",function(e){this.removeRow(e.row)});this.after("isLoadingChange",function(e){this.get("boundingBox").toggleClass("is-loading",e.newVal)});this.after("visibleChange",function(e){var t=this.get("boundingBox");t.toggleClass("is-visible",e.newVal);t.toggleClass("is-hidden",!e.newVal)})},addRow:function(e){var t=this.createRow(e);this._addRow(t);t.animateAdd()},createRow:function(e){return new this.ROW_CONSTRUCTOR({data:e,fields:this.get("fields")})},removeRow:function(e){this._removeRow(e,true);e.animateRemove()},setData:function(e){this._destroyAllRows();this.set("data",e);this._generateRows();this._createInputRow();this._renderAllRows();this._bindInputRowEvents();this.get("rows").forEach(this._bindRowEvents,this)},revertChanges:function(){this.setData(i.clone(this.get("initialData")))},collectCurrentData:function(){return this.get("rows").map(function(e){return e.collectCurrentData()})},toggleInputRow:function(e){var t=this.get("inputRow");if(!t&&"hide"===e||t&&"show"===e)return;if("show"===e){this._createInputRow();this.get("inputRow").render(this.get("contentBox"));this._bindInputRowEvents()}else if("hide"===e){t.destroy(true);this.set("inputRow",null)}else false},_generateRows:function(){this.set("rows",this.get("data").map(this.createRow,this))},_createInputRow:function(){if(false===this.get("inputRow"))return;this.set("inputRow",new i.Squarespace.Widgets.EditTable.DialogRow({fields:this.get("fields")}))},_addRow:function(e){this.get("rows").push(e);this._renderNewRow(e);this._bindRowEvents(e)},_renderNewRow:function(e){e.render(this.get("contentBox"));this.get("inputRow").get("boundingBox").insert(e.get("boundingBox"),"before")},_removeRow:function(t,e){var a=this.get("rows");a=a.filter(function(e){return e!==t});this.set("rows",a);e||t.detroy(true)},_bindRowEvents:function(t){this._registerEvent(t.on("row:delete",function(e){this.fire("edit-table:row-delete",{row:t})},this),t.on("row:cell-edit",function(e){this.fire("edit-table:cell-edit",{row:e.row,cell:e.cell,newVal:e.newVal,prevVal:e.prevVal})},this))},_bindInputRowEvents:function(){var e=this.get("inputRow");e&&this._registerEvent(e.on("row:cell-click",function(e){"action"===e.cell.get("name")&&e.row.isValid()&&this.fire("edit-table:row-add",{data:e.row.collectCurrentData()})},this))},_renderAllRows:function(){var t=this.get("contentBox");var e=this.get("inputRow");this.get("rows").forEach(function(e){e.render(t);e.get("boundingBox").all(".data-container").addClass("expanded")});e&&e.render(t)},_destroyAllRows:function(){i.Array.invoke(this.get("rows"),"destroy",true);this.set("rows",[]);var e=this.get("inputRow");e&&e.destroy(true)}},{CSS_PREFIX:"sqs-edit-table-table",ATTRS:{data:{value:[]},initialData:{valueFn:function(){return i.clone(this.get("data"))}},fields:{value:[]},header:{valueFn:function(){var t=new i.Node.create('<tr class="header"></tr>');this.get("fields").forEach(function(e){t.append(i.Node.create('<th class="'+e.name+'">'+e.header+"</th>"))});this.get("actionColumn")&&t.append(i.Node.create("<th>&nbsp;</th>"));return t}},inputRow:{},rows:{value:[]},actionColumn:{value:{name:"action",editable:false,header:"",inputCell:{dialog:i.Squarespace.DialogFields.Button,dialogConfig:{className:"primary","strings.text":s("Add")}}}},isLoading:{value:false},loadingOverlay:{valueFn:function(){return i.Node.create('<div class="loading-overlay"></div>')}},spinner:{valueFn:function(){return new i.Squarespace.Spinner({size:22,color:"dark"})}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-dialog-button","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-edit-table-dialog-row","squarespace-widgets-edit-table-row"]})},12066:function(e,t){YUI.add("squarespace-widgets-edit-table-dialog-row",function(t){t.namespace("Squarespace.Widgets.EditTable");var e=t.Squarespace.Widgets.EditTable.DialogRow=t.Base.create("DialogRow",t.Squarespace.Widgets.EditTable.Row,[],{CELL_CONSTRUCTOR:t.Squarespace.Widgets.EditTable.DialogCell,initializer:function(){this.publish("row:cell-click");this.publish("row:cell-edit")},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-row")},bindUI:function(){var e=this.get("cells");this._registerEvent(e.map(function(e){return e.on("cell:click",this._propagateCellClick,this)},this));this._registerEvent(e.map(function(e){return e.on("cell:edit",this._propagateDataChange,this)},this));this.after("hasErrorChange",function(e){this.get("boundingBox").toggleClass("has-error",e.newVal)})},isValid:function(){var e=this.get("cells").map(function(e){return e.isDataValid(e.get("data"))});return t.Array.every(e,function(e){return e})},resetDialogCells:function(){this.get("cells").forEach(function(e){e.resetDialogField()})},_propagateCellClick:function(e){if(!this.isValid()){this.set("hasError",true);return}this.set("hasError",false);this.fire("row:cell-click",{cell:e.cell,row:this})},_propagateDataChange:function(e){this.fire("row:cell-edit",{cell:e.cell,row:this})}},{CSS_PREFIX:"sqs-edit-table-dialog-row",ATTRS:{fields:{},cells:{valueFn:function(){return this.get("fields").map(function(e){return new this.CELL_CONSTRUCTOR({field:e})},this)}},hasError:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-edit-table-dialog-cell","squarespace-widgets-edit-table-row"]})},12067:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-edit-table-dialog-cell",function(t){t.namespace("Squarespace.Widgets.EditTable.DialogCell");var a=t.Squarespace.Widgets.EditTable.DialogCell=t.Base.create("DialogCell",t.Squarespace.Widgets.EditTable.Cell,[],{initializer:function(){this._constructDialogField();this.publish("cell:click");this.publish("cell:edit")},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("boundingBox");e.addClass(this.get("name"));e.addClass("sqs-edit-table-cell");this.get("dialogField").render(this.get("contentBox"))},bindUI:function(){var e=this.get("dialogField");this._registerEvent(e.on("click",function(e){if(this.get("locked"))return;this.fire("cell:click",{cell:this})},this),e.after("dataChange",function(e){this.fire("cell:edit",{cell:this})},this),e.on("keyup",function(){this.get("boundingBox").removeClass("has-error")},this));this.after("lockedChange",function(e){e.newVal?this.get("dialogField").disable():this.get("dialogField").enable();this.syncUI()});this.after("errorChange",function(e){this.get("dialogField").toggleError(e.newVal);this.syncUI()})},syncUI:function(){var e=this.get("boundingBox");e.toggleClass("locked",this.get("locked"));e.toggleClass("has-error",!!this.get("error"))},setDialogConfig:function(e){this.set("dialogConfig",e);this.get("dialogField").setAttrs(e)},resetDialogField:function(){this.get("dialogField").set("data",this.get("dialogConfig").data)},isDataValid:function(){this.set("error",null);return a.superclass.isDataValid.apply(this,arguments)},_constructDialogField:function(){var e=this.get("dialogCtor");var t=this.get("dialogConfig");t.disabled=!!this.get("field.locked");var a=new e(t);t["strings.placeholder"]||a.set("strings.placeholder",this.get("field.header")||i("Value"));this.set("dialogField",a)}},{CSS_PREFIX:"sqs-edit-table-dialog-cell",ATTRS:{field:{},dialogCtor:{valueFn:function(){var e=this.get("field.inputCell.dialog");return e||t.Squarespace.DialogFields.Text}},dialogConfig:{valueFn:function(){var e=this.get("field.inputCell.dialogConfig");return e||{}}},dialogField:{},name:{getter:function(){return this.get("field.name")}},placeholder:{setter:function(e){this.get("dialogField").set("strings.placeholder",e);return e}},data:{getter:function(){return this.get("dialogField").get("data")}}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-widgets-edit-table-cell"]})},12068:function(e,t){YUI.add("squarespace-widgets-edit-table-cell",function(a){a.namespace("Squarespace.Widgets.EditTable");var e=a.Squarespace.Widgets.EditTable.Cell=a.Base.create("cell",a.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<td></td>",CONTENT_TEMPLATE:'<div class="data-container"></div>',initializer:function(){this.publish("cell:edit")},destructor:function(){if(this.error){this.error.destroy(true);this.error=null}},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass(this.get("field.name"))},bindUI:function(){var t=this.get("contentBox");t.on("click",function(e){if(!this.get("editable")||this.get("locked"))return;e.halt();this.plug(a.Squarespace.Plugin.InlineInputEditor,{render:t,data:this.get("data"),onKeyUp:function(){this.get("boundingBox").removeClass("has-error")}.bind(this),onBlur:function(){this.error&&this.error.hideFlyout()}.bind(this),onCommit:function(e){e.prevVal!==e.newVal&&this.set("data",e.newVal)}})},this);this.before("dataChange",function(e){if(!this.isDataValid(e.newVal))return;this.set("error",null);var t=this.fire("cell:edit",{newVal:e.newVal,prevVal:e.prevVal,cell:this});t||e.halt()});this.after(["dataChange","lockedChange"],this.syncUI);this.after("errorChange",function(e){this._toggleErrorTooltip(e.newVal)})},syncUI:function(){var e=this.get("boundingBox");e.toggleClass("locked",this.get("locked"));e.toggleClass("editable",this.get("editable"));e.toggleClass("has-error",!!this.get("error"));this.get("contentBox").set("text",this.get("data"))},isDataValid:function(e){var t=this.get("validator")(e);if(t){this.set("error",t);return false}this.set("error",null);return true},_toggleErrorTooltip:function(e){this.syncUI();if(e)this.error=new a.Squarespace.Widgets.EditTable.CellError({target:this.get("boundingBox"),render:true,"strings.error":e});else if(this.error){this.error.destroy(true);this.error=null}}},{CSS_PREFIX:"sqs-edit-table-cell",ATTRS:{data:{value:""},field:{},editable:{valueFn:function(){return!!this.get("field.editable")}},locked:{valueFn:function(){return!!this.get("field.locked")}},validator:{valueFn:function(){var e=this.get("field.validator");if(e)return e;return function(){}}},error:{}}})},"1.0",{requires:["base","node","squarespace-plugin-inline-input-editor","squarespace-ui-base","squarespace-ss-widget","squarespace-widgets-edit-table-cell-error"]})},12069:function(e,t){YUI.add("squarespace-widgets-edit-table-cell-error",function(n){n.namespace("Squarespace.Widgets.EditTable");n.Squarespace.Widgets.EditTable.CellError=n.Base.create("CellError",n.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,destructor:function(){var e=this.get("anchorNode");var t=this.get("flyout");e.remove();e.destroy(true);t.remove();t.destroy(true)},renderUI:function(){this.get("anchorNode").appendTo(this.get("target"));this.get("flyout").appendTo(n.one("body"))},bindUI:function(){this._registerEvent(this.get("anchorNode").on("mouseenter",function(){this.get("target").addClass("error-is-hovering");this.showFlyout()},this),this.get("flyout").on("click",this.hideFlyout,this))},showFlyout:function(){var e=this.get("target");var t=this.get("flyout");var a=e.getX()+e.get("offsetWidth");var i=e.getY();t.setStyles({top:i+1,left:a});t.addClass("is-visible");t.addClass("is-showing");n.config.win.setTimeout(t.removeClass.bind(t,"is-showing"),300)},hideFlyout:function(){var e=this.get("flyout");e.addClass("is-hiding");n.config.win.setTimeout(function(){e.removeClass("is-visible");e.removeClass("is-hiding");this.get("target").removeClass("error-is-hovering")}.bind(this),100)}},{CSS_PREFIX:"sqs-widgets-edit-table-cell-error",ATTRS:{target:{},anchorNode:{valueFn:function(){return n.Node.create('<div class="error-hover">&#33;</div>')}},flyout:{valueFn:function(){return n.Node.create('<div class="cell-error-flyout"><div class="error-message">'+this.get("strings.error")+"</div></div>")}},strings:{value:{}}}})},"1.0",{requires:["base","node","squarespace-ss-widget"]})},12070:function(e,t){YUI.add("squarespace-widgets-edit-table-row",function(i){i.namespace("Squarespace.Widgets.EditTable");i.Squarespace.Widgets.EditTable.Row=i.Base.create("row",i.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<tr></tr>",CONTENT_TEMPLATE:null,CELL_CONSTRUCTOR:i.Squarespace.Widgets.EditTable.Cell,initializer:function(){this.publish("row:cell-edit");this.publish("row:delete")},destructor:function(){i.Array.invoke(this.get("cells"),"destroy",true)},renderUI:function(){this.get("cells").forEach(function(e){e.render(this.get("boundingBox"))},this)},bindUI:function(){this.get("cells").forEach(this._bindCellEvents,this)},collectCurrentData:function(){var e=this.get("cells").map(function(e){return e.get("data")});var t=this._collectFieldKeys();return i.Array.hash(t,e)},setCellError:function(e,t){var a=this.get("cells")[e];if(!a)return;a.set("error",t);this.set("hasError",true)},animateAdd:function(){var e=this.get("boundingBox").all(".data-container");i.config.win.setTimeout(e.addClass.bind(e,"expanded"),0)},animateRemove:function(){var e=this.get("boundingBox").all(".data-container");e.removeClass("expanded");i.config.win.setTimeout(this.destroy.bind(this,true),300)},_collectFieldKeys:function(){return this.get("fields").map(function(e){return e.name})},_bindCellEvents:function(e){this._registerEvent(e.after("errorChange",this._syncErrorState,this),e.after("cell:edit",function(e){this.fire("row:cell-edit",{row:this,cell:e.cell,newVal:e.newVal,prevVal:e.prevVal})},this),e.after("cell:delete",function(e){this.fire("row:delete",{row:this})},this))},_syncErrorState:function(){var e=this.get("cells").some(function(e){return!!e.get("error")});this.get("boundingBox").toggleClass("has-error",e)}},{CSS_PREFIX:"sqs-edit-table-row",ATTRS:{data:{value:[]},fields:{},cells:{valueFn:function(){var a=this.get("data");return this.get("fields").map(function(e){var t={data:a[e.name],field:e};if("action"===e.name)return new i.Squarespace.Widgets.EditTable.DeleteCell(t);return new this.CELL_CONSTRUCTOR(t)},this)}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-ss-widget","squarespace-widgets-edit-table-cell","squarespace-widgets-edit-table-delete-cell"]})},12071:function(e,t){YUI.add("squarespace-widgets-edit-table-delete-cell",function(e){e.namespace("Squarespace.Widgets.EditTable");var t=e.Squarespace.Widgets.EditTable.DeleteCell=e.Base.create("DeleteCell",e.Squarespace.Widgets.EditTable.Cell,[],{initializer:function(){this.publish("cell:delete")},renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-cell");this.get("trashCan").appendTo(this.get("contentBox"))},bindUI:function(){this.get("boundingBox").delegate("click",function(e){if(this.get("locked")){e.halt();return}this.fire("cell:delete")},".icon-delete",this);this.after("lockedChange",this.syncUI)},syncUI:function(){this.get("boundingBox").toggleClass("locked",this.get("locked"))}},{CSS_PREFIX:"sqs-edit-table-delete-cell",ATTRS:{trashCan:{valueFn:function(){return e.Node.create('<span class="icon icon-delete"></span>')}}}})},"1.0",{requires:["base","node","squarespace-widgets-edit-table-cell"]})},12072:function(e,t,a){var n=a(21);YUI.add("squarespace-domains-view-models-nameserver-set",function(a){a.namespace("Squarespace.Domains.ViewModels");var i=a.Squarespace.Domains.ViewModels.NameserverSet=a.Base.create("NameserverSet",a.ModelList,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{domainId}/nameserver-set",model:a.Squarespace.Domains.Models.Nameserver,parse:function(e){var t=i.superclass.parse.call(this,e);return t.nameServers},toJSON:function(){var e=i.superclass.toJSON.call(this);return{nameServers:e}},restoreDefaults:function(e,t){a.Data.post({url:this.getURL("read")+"/reseter",success:e||n,failure:t||n})},getDefaults:function(e,t){a.Data.get({url:this.getURL("read")+"/default",success:e||n,failure:t||n})}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","model-list","squarespace-domains-models-nameserver","squarespace-model-sync-rest"]})},12073:function(e,t){YUI.add("squarespace-domains-models-nameserver",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Nameserver=e.Base.create("Nameserver",e.Model,[],{},{ATTRS:{hostName:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12074:function(e,t){YUI.add("squarespace-widgets-edit-table-lockable-table",function(e){e.namespace("Squarespace.Widgets.EditTable");var t=e.Squarespace.Widgets.EditTable.LockableTable=e.Base.create("LockableTable",e.Squarespace.Widgets.EditTable.Table,[e.Squarespace.Widgets.EditTable.MixinLockable],{bindUI:function(){t.superclass.bindUI.call(this);this.after("lockedChange",this.syncUI)},syncUI:function(){t.superclass.syncUI.call(this);this.get("boundingBox").toggleClass(this.getClassName("locked"),this.get("locked"))},setData:function(){t.superclass.setData.apply(this,arguments);this._toggleTableLock(this.get("locked"))}},{CSS_PREFIX:"sqs-widgets-edit-table-lockable-table",ATTRS:{}})},"1.0",{requires:["base","node","squarespace-widgets-confirmation","squarespace-widgets-edit-table-mixin-lockable","squarespace-widgets-edit-table-table"]})},12075:function(e,t){YUI.add("squarespace-widgets-edit-table-mixin-lockable",function(e){e.namespace("Squarespace.Widgets.EditTable");e.Squarespace.Widgets.EditTable.MixinLockable=e.Base.create("MixinLockable",e.Base,[],{initializer:function(){this.after("lockedChange",function(e){this._toggleTableLock(e.newVal)})},_toggleTableLock:function(t){this.get("rows").forEach(function(e){e.get("cells").forEach(function(e){e.set("locked",t)})});var e=this.get("inputRow");e&&e.get("cells").forEach(function(e){e.set("locked",t)})}},{ATTRS:{locked:{value:false}}})},"1.0",{requires:["base"]})},12076:function(e,t,a){var i=a(24).t;var n=a(0);var r=a(60);var o=a(207);var l=a(2364);YUI.add("squarespace-domains-manage-dns-records-edit",function(s){s.namespace("Squarespace.Domains.Manage.DNS");var t=s.Squarespace.Domains.Manage.DNS.RecordsEdit=s.Base.create("RecordsEdit",s.Squarespace.Domains.Manage.DNS.EditSection,[],{bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("presets");this.after("usingDefaultNameserversChange",this.syncUI);this._registerEvent([e.on("missingRecordsFound",function(){var e=this.get("contentBox");var t=this.get("missingRecordsBanner");t.render(e);e.prepend(t.get("boundingBox"))},this),s.Squarespace.Domains.Events.on("domain:link-status-load",this._renderDeprecatedIPAddressNotification.bind(this))])},renderUI:function(){var e=this.get("boundingBox");this.get("deprecatedIPAddressNotification").appendTo(e);this.get("nameserversWarning").appendTo(e);this.get("description").appendTo(e);this.get("title").appendTo(e);this.get("presets").render(e);this.get("customHeading").appendTo(e);this.get("spinner").render(e)},syncUI:function(){this.get("nameserversWarning").toggleClass("is-visible",!this.get("usingDefaultNameservers"))},saveChanges:function(){var n=this.get("editTable");var e=this._mapTableDataToRecordSet(n.collectCurrentData());var t=this.get("loadableData");n.set("isLoading",true);t.reset(e);return s.Squarespace.Promises.create(function(a,i){t.sync("update",{},function(e,t){n.set("isLoading",false);if(e){console.error(t);this._showSaveError(e.responseJSON.message);i();return}this.get("editTable").set("initialData",s.clone(this._getTableData()));a()}.bind(this))},this)},_renderDeprecatedIPAddressNotification:function(){var e=s.Array.some(this.get("domain").get("linkStatusList"),function(e){return e.get("deprecated")});e&&r.render(n.createElement(l,{title:i("Invalid IP Address"),type:"error"},n.createElement("div",null,i("We are unable to create an SSL certificate for your domain because it is using an invalid IP address. Please follow {theseSteps} to update your DNS records with the correct IP addresses.",{theseSteps:n.createElement("a",{href:o.CONNECT_DOMAIN,target:"_blank"},i("these steps"))}))),this.get("deprecatedIPAddressNotification").getDOMNode())},_renderTable:function(){this.get("editTable").render(this.get("boundingBox"));this._resetTableData()},_renderResetButton:function(){},_getTableData:function(){return s.Squarespace.Domains.DNSTable.mapRecordsToTableData(this.get("loadableData").toJSON().records)},_mapTableDataToRecordSet:function(e){var t=s.Squarespace.Domains.DNSTable.fieldMap;return e.map(function(a){var i={};if("SRV"===a.record){var e=a.data.split(" ");i.subdomain=a.host;i.type=a.record;i.priority=a.priority;i.weight=e[0];i.port=e[1];i.hostname=e[2];return i}s.Object.each(t[a.record],function(e,t){i[e]=a[t]});return i})},destructor:function(){r.unmountComponentAtNode(this.get("deprecatedIPAddressNotification"));this.get("deprecatedIPAddressNotification").destroy(true);this.get("nameserversWarning").destroy(true);this.get("description").destroy(true);this.get("title").destroy(true);this.get("presets").destroy(true);this.get("customHeading").destroy(true);this.get("spinner").destroy(true);this.get("missingRecordsBanner").destroy(true)}},{CSS_PREFIX:"sqs-domains-manage-dns-records-edit",ATTRS:{editTable:{valueFn:function(){return new s.Squarespace.Domains.DNSTable.RecordsTable({className:"bleed custom-table",header:null,groupOrder:["CNAME","A","MX","AAAA","TXT","SRV"],groupKey:"record",domain:this.get("domain")})}},customHeading:{valueFn:function(){return s.Node.create('<div class="table-heading">'+i("Custom Records")+"</div>")}},presets:{valueFn:function(){var e=this.get("domain");return new s.Squarespace.Domains.Manage.DNS.Presets({presetList:this.get("presetList"),presetTemplates:this.get("presetTemplateList"),hostname:e.get("name"),primarySubdomain:e.get("chosenPrimarySubdomain")})}},loadableData:{valueFn:function(){return new s.Squarespace.Domains.ViewModels.RecordSet({domainId:this.get("domain").get("id")})}},presetList:{valueFn:function(){return new s.Squarespace.Domains.ViewModels.PresetList({domainId:this.get("domain").get("id")})}},presetTemplateList:{valueFn:function(){return new s.Squarespace.Domains.ViewModels.PresetTemplateList}},title:{valueFn:function(){return s.Node.create('<h4 class="section-title">'+i("Add Presets")+"</h4>")}},nameserversWarning:{valueFn:function(){return s.Node.create('<div class="nameservers-warning">'+this.get("strings.nameserversWarning")+"</div>")}},deprecatedIPAddressNotification:{valueFn:function(){return s.Node.create('<div class="deprecated-ip-address-notification"></div>')}},missingRecordsBanner:{valueFn:function(){return new s.Squarespace.DialogFields.StateIndicatorBanner({name:"missingRecords",data:1,stateDisplays:[{value:1,state:1,message:i("There was a problem adding one or more of your presets. Please remove the highlighted presets and try adding them again."),className:"error"}]})}},"strings.description":{value:i('Custom records define how your domain behaves. Common uses include pointing your domain at your web service or configuring email delivery for your domain. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:o.ADVANCED_DNS_SETTINGS_LANDING})},"strings.errorTitle":{value:i("DNS Record Conflict")},"strings.nameserversWarning":{value:i("We noticed you are using custom nameservers. Your DNS settings will be managed with your third-party nameserver provider. Use Squarespace's nameservers to activate the DNS settings below.")}}})},"1.0",{requires:["base","squarespace-dialog-state-indicator-banner","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-domains-manage-dns-edit-section","squarespace-domains-manage-dns-presets","squarespace-domains-view-models-preset-list","squarespace-domains-view-models-preset-template-list","squarespace-domains-view-models-record-set","squarespace-promises","squarespace-widgets-alert"]})},12077:function(e,t){YUI.add("squarespace-dialog-state-indicator-banner",function(r){var t=r.namespace("Squarespace.DialogFields").StateIndicatorBanner=r.Base.create("stateIndicatorBanner",r.Squarespace.DialogField2,[],{initializer:function(e){this._stateDisplayMap={};r.Array.forEach(e.stateDisplays,function(e){this._stateDisplayMap[e.value]={state:e.state,message:e.message,className:e.className}},this)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");e.one(".warn-msg").plug(r.Squarespace.Animations.Scalable,{duration:.25});e.one(".live-msg").plug(r.Squarespace.Animations.Scalable,{duration:.25});this._updateClass(this._getStateDisplay(this.get("data")))},syncUI:function(){var e=this.get("contentBox");var t=this._getStateDisplay(this.get("data"));if(t){e.setStyle("opacity",1);this._updateCopy(t)}else e.setStyle("opacity",0);this._doTransition(t);this._inDefinedState=!!t},_updateClass:function(e){var t=this.get("contentBox");var a=this._inOkState(e);var i=a?"warn":"live";var n=a?"live":"warn";var s=!t.hasClass(n);t.removeClass(i);t.addClass(n);e&&r.Lang.isValue(e.className)&&t.addClass(e.className);return s},_getStateDisplay:function(e){return this._stateDisplayMap[e]},_inOkState:function(e){return r.Lang.isObject(e)&&e.state===t.STATES.OK},_updateCopy:function(e){var t=this.get("contentBox");this._inOkState(e)?t.one(".live-msg span").setHTML(e.message):t.one(".warn-msg span").setHTML(e.message)},_doTransition:function(e){var t=this._inOkState(e);var a=this.get("contentBox");var i=t?a.one(".warn-msg"):a.one(".live-msg");var n=t?a.one(".live-msg"):a.one(".warn-msg");var s=this._updateClass(e);i.hide();i.once("hidden",function(){s&&n.show()})}},{STATES:{OK:1,WARN:2},CSS_PREFIX:"sqs-state-indicator-banner",TEMPLATE:'<div class="warning-wrapper"><div class="warn-msg"><img width="16" height="16" src="/universal/images-v6/dialog/tiny-alert.png" /><span></span><div class="banner-buttons"></div></div><div class="live-msg"><img width="16" height="16" src="/universal/images-v6/dialog/checkbox-active-14-light.png" /><span></span><div class="banner-buttons"></div></div></div>'})},"1.0",{requires:["base","node","squarespace-animations","squarespace-dialog-field-2"]})},12078:function(e,t,a){var s=a(24).t;YUI.add("squarespace-domains-dns-table-configs",function(a){a.namespace("Squarespace.Domains.DNSTable");a.Squarespace.Domains.DNSTable.fieldMap={A:{host:"subdomain",record:"type",priority:"priority",data:"ip"},AAAA:{host:"subdomain",record:"type",priority:"priority",data:"ip"},CNAME:{host:"subdomain",record:"type",priority:"priority",data:"hostname"},MX:{host:"subdomain",record:"type",priority:"priority",data:"hostname"},TXT:{host:"subdomain",record:"type",priority:"priority",data:"text"}};a.Squarespace.Domains.DNSTable.mapRecordsToTableData=function e(t){if(!t)return[];return t.map(function(e){if("SRV"===e.type)return{host:e.subdomain,record:e.type,priority:e.priority,data:e.weight+" "+e.port+" "+e.hostname};var t=a.Squarespace.Domains.DNSTable.fieldMap[e.type];return{host:e[t.host],record:e[t.record],priority:e[t.priority],data:e[t.data]}})};var e={className:"sqs-select-light",data:"A",options:[{label:"A",value:"A"},{label:"AAAA",value:"AAAA"},{label:"CNAME",value:"CNAME"},{label:"MX",value:"MX"},{label:"TXT",value:"TXT"},{label:"SRV",value:"SRV"}]};var t={"strings.placeholder":s("N/A"),disabled:true};var i=a.Squarespace.Domains.DNSTable.validatorForRecordType={A:a.Squarespace.Domains.DNSTable.validators.isIPAddress,CNAME:function(e){return a.Squarespace.Domains.DNSTable.validators.isNotIPAddress(e)||a.Squarespace.Domains.DNSTable.validators.isHostname(e)},MX:a.Squarespace.Domains.DNSTable.validators.isHostname,AAAA:a.Squarespace.Domains.DNSTable.validators.isIPv6Address,TXT:a.Squarespace.Domains.DNSTable.validators.valueNotEmpty,SRV:a.Squarespace.Domains.DNSTable.validators.isSrvData};var n=a.Squarespace.Domains.DNSTable.dialogConfigForRecordType={A:[{"strings.placeholder":"@",data:"@",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"A"}),t,{"strings.placeholder":s("Enter IP address"),validator:i.A}],CNAME:[{"strings.placeholder":"www",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"CNAME"}),t,{"strings.placeholder":s("Enter alias data"),validator:i.CNAME}],MX:[{"strings.placeholder":"@",data:"@",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"MX"}),{"strings.placeholder":10,disabled:false},{"strings.placeholder":s("Enter mail server"),validator:i.MX}],AAAA:[{"strings.placeholder":"www",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"AAAA"}),t,{"strings.placeholder":s("Enter IPv6 address"),validator:i.AAAA}],TXT:[{"strings.placeholder":"@",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"TXT"}),t,{"strings.placeholder":s("Text"),validator:i.TXT}],SRV:[{"strings.placeholder":"_http._tcp",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"SRV"}),{"strings.placeholder":10,disabled:false},{"strings.placeholder":"5 8080 example.com",validator:i.SRV}]};a.Squarespace.Domains.DNSTable.fields=[{name:"host",editable:false,header:s("Host"),inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:n.A[0]}},{name:"record",editable:false,header:s("Record"),validator:a.Squarespace.Domains.DNSTable.validators.valueNotEmpty,inputCell:{dialog:a.Squarespace.DialogFields.Select,dialogConfig:e}},{name:"priority",locked:true,editable:false,header:s("Priority"),inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:n.A[2]}},{name:"data",editable:true,header:s("Data"),validator:i.A,inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:n.A[3]}}]},"1.0",{requires:["squarespace-dialog-select","squarespace-dialog-text","squarespace-domains-dns-table-validators"]})},12079:function(e,t,a){var i=a(24).t;var r=a(2606);YUI.add("squarespace-domains-dns-table-records-table",function(n){n.namespace("Squarespace.Domains.DNSTable");var s=["AAAA","CNAME","SRV"];var e=n.Squarespace.Domains.DNSTable.RecordsTable=n.Base.create("RecordsTable",n.Squarespace.Widgets.EditTable.GroupTable,[],{ROW_CONSTRUCTOR:n.Squarespace.Domains.DNSTable.RecordsRow,bindUI:function(){e.superclass.bindUI.call(this);this.before("edit-table:row-add",function(e){var t=this._runCustomValidation(e.data);if(!t){e.halt(true);return}this._sendAnalyticEvent(e.data.record)})},_sendAnalyticEvent:function(e){var t=this.get("domain");r.addCustomDNSRecord(t.get("name"),e,t.get("isPurchasedFree"),t.get("managedDomainExpiration"),t.get("registeredOn"))},_createInputRow:function(){if(false===this.get("inputRow"))return;this.set("inputRow",new n.Squarespace.Domains.DNSTable.RecordsDialogRow({fields:this.get("fields")}))},_runCustomValidation:function(e){var t=this.collectCurrentData();return this._validateCNAMEHosts(e,t)&&this._validateDuplicateSubdomains(e,t)&&this._validateMXPriority(e)},_validateCNAMEHosts:function(t,e){var a=e.some(function(e){return"CNAME"===e.record&&e.host===t.host});if(a){this.get("inputRow").setCellError(0,this.get("strings.cnameHasHost"));return false}return true},_validateDuplicateSubdomains:function(e,t){if(-1===s.indexOf(e.record))return true;var a=e.host;var i=t.some(function(e){return e.host===a&&-1!==s.indexOf(e.record)});if(i){this.get("inputRow").setCellError(0,n.Lang.sub(this.get("strings.duplicateError"),e));return false}return true},_validateMXPriority:function(e){if(-1===["MX","SRV"].indexOf(e.record))return true;var t=parseInt(e.priority);if(isNaN(t)||t<0||t>255){this.get("inputRow").setCellError(2,this.get("strings.mxPriorityNaN"));return false}return true}},{CSS_PREFIX:"sqs-domains-manage-dns-records-table",ATTRS:{fields:{value:n.clone(n.Squarespace.Domains.DNSTable.fields)},domain:{},"strings.cnameHasHost":{value:i("This host is already in use by a CNAME record.")},"strings.duplicateError":{value:i("Host cannot be duplicated for {record} records.")},"strings.mxPriorityNaN":{value:i("Priority must be a number between 0 and 255.")}}})},"1.0",{requires:["base","node","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-dialog-row","squarespace-domains-dns-table-records-row","squarespace-widgets-edit-table-group-table"]})},12080:function(e,t){YUI.add("squarespace-domains-dns-table-records-dialog-row",function(t){t.namespace("Squarespace.Domains.DNSTable");var a="record-type-";var n=function(){};var i=t.Object.keys(t.Squarespace.Domains.DNSTable.fieldMap).map(function(e){return e.toLowerCase()});var e=t.Squarespace.Domains.DNSTable.RecordsDialogRow=t.Base.create("RecordsDialogRow",t.Squarespace.Widgets.EditTable.DialogRow,[],{bindUI:function(){e.superclass.bindUI.call(this);this._registerEvent(this.get("cells").map(function(e){return e.on("cell:edit",function(e){if("record"===e.cell.get("name")){var t=e.cell.get("data");this._changeDialogCells(t);this._setBoundingClassForRecordType(t)}},this)},this))},_changeDialogCells:function(e){var i=t.Squarespace.Domains.DNSTable.dialogConfigForRecordType[e];this.get("cells").forEach(function(e,t){var a=i[t];if(!a)return;"priority"===e.get("name")&&(a.data="");a.validator||(a.validator=n);e.setDialogConfig(a);e.setAttrs({validator:a.validator,error:null})})},_setBoundingClassForRecordType:function(e){var t=this.get("boundingBox");i.forEach(function(e){t.removeClass(a+e)});t.addClass(a+e.toLowerCase())}})},"1.0",{requires:["base","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-validators","squarespace-widgets-edit-table-dialog-row"]})},12081:function(e,t,a){var s=a(24).t;YUI.add("squarespace-domains-dns-table-records-row",function(n){n.namespace("Squarespace.Domains.DNSTable");var t=n.Squarespace.Domains.DNSTable.RecordsRow=n.Base.create("RecordsRow",n.Squarespace.Widgets.EditTable.Row,[],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("data").record;this.get("boundingBox").addClass("record-type-"+e.toLowerCase())},collectCurrentData:function(){var e=t.superclass.collectCurrentData.call(this);-1===["MX","SRV"].indexOf(e.record)?e.priority="":e.priority=parseInt(e.priority,10);return e}},{ATTRS:{cells:{valueFn:function(){var a=this.get("data");var e=a.record;var i=n.Squarespace.Domains.DNSTable.validatorForRecordType[e];-1===["MX","SRV"].indexOf(e)&&(a.priority=s("N/A"));return this.get("fields").map(function(e){var t={data:a[e.name],field:e};if("action"===e.name)return new n.Squarespace.Widgets.EditTable.DeleteCell(t);"data"===e.name&&(t.validator=i);return new this.CELL_CONSTRUCTOR(t)},this)}}}})},"1.0",{requires:["base","squarespace-domains-dns-table-configs","squarespace-widgets-edit-table-row"]})},12082:function(e,t){YUI.add("squarespace-widgets-edit-table-group-table",function(t){t.namespace("Squarespace.Widgets.EditTable");var e=t.Squarespace.Widgets.EditTable.GroupTable=t.Base.create("GroupTable",t.Squarespace.Widgets.EditTable.Table,[],{renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-table")},_removeRow:function(t,e){var a=this.get("groups");var i=this.get("groupMap");var n=t.get("data."+this.get("groupKey"));var s=i[n];var r=a[s];a[s]=r.filter(function(e){return e!==t});e||t.destroy(true)},_findInsertNodeByGroup:function(e){var t=this.get("groups");var a=this.get("groupMap");var i=a[e];while(i>=0){var n=t[i];if(n.length){var s=n[n.length-1];return s.get("boundingBox")}i-=1}return this.get("header")},_renderNewRow:function(e){var t=this.get("groups");var a=this.get("groupMap");var i=e.get("data."+this.get("groupKey"));var n=t[a[i]];if(!n){var s=t.push([])-1;a[i]=s;n=t[s]}var r=this._findInsertNodeByGroup(i);n.push(e);e.render(this.get("contentBox"));r?r.insert(e.get("boundingBox"),"after"):this.get("contentBox").prepend(e.get("boundingBox"))},_generateRows:function(){var a=this.get("groups");var i=this.get("groupMap");var n=this.get("groupKey");this.get("data").forEach(function(e){var t=i[e[n]];a[t].push(this.createRow(e))},this)},_destroyAllRows:function(){t.Array.invoke(this.get("rows"),"destroy",true);this.set("groups",this.get("groupOrder").map(function(){return[]}));var e=this.get("inputRow");e&&e.destroy(true)}},{CSS_PREFIX:"sqs-edit-table-group-table",ATTRS:{groupOrder:{value:[],writeOnce:true,validator:t.Squarespace.AttrValidators.isArray},groupKey:{validator:t.Squarespace.AttrValidators.isString},groupMap:{valueFn:function(){var e=this.get("groupOrder");return e.reduce(function(e,t,a){e[t]=a;return e},{})},writeOnce:true,validator:t.Squarespace.AttrValidators.isObject},groups:{valueFn:function(){var e=this.get("groupOrder");return e.map(function(e){return[]})},validator:t.Squarespace.AttrValidators.isArray},rows:{getter:function(){return t.Array.flatten(this.get("groups"))},readOnly:true}}})},"1.0",{requires:["array-invoke","base","squarespace-widgets-edit-table-table","squarespace-attr-validators"]})},12083:function(e,t,a){var r=a(24).t;var i=a(5163);YUI.add("squarespace-domains-manage-dns-presets",function(l){l.namespace("Squarespace.Domains.Manage.DNS");var c=l.Squarespace.Domains.DNSTable.mapRecordsToTableData;var n={mail:r("Mail MX Records"),forward:r("Forwarding"),website:r("Squarespace Records"),verification:r("Domain Verification")};var t=l.Squarespace.Domains.Manage.DNS.Presets=l.Base.create("Presets",l.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,initializer:function(){this.tableEvents=[];this.get("presetList").load(this.handlePresetLoad.bind(this));this.get("presetTemplates").load(this.generateTables.bind(this));this.publish("add");this.publish("remove");this.publish("missingRecordsFound")},destructor:function(){if(this.tableEvents){l.Array.invoke(this.tableEvents,"detach");this.tableEvents=null}},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("boundingBox");this.get("headingTable").render(e.one(".heading-table"));this.get("select").render(e.one(".select"));this.get("addButton").render(e.one(".add-button"));this.get("currentForm").render(e.one(".additional-fields"))},bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.get("addButton").on("click",this.addPreset,this),this.get("select").on("dataChange",function(e){this.get("currentForm").set("templateId",e.newVal)},this))},generateTables:function(){var a={};var i=function(e){return{label:e.get("displayName"),value:e.get("id")}};this.get("presetTemplates").toArray().forEach(function(e){var t=e.get("type");a[t]?a[t].options.push(i(e)):a[t]={label:n[t],options:[i(e)]}});a=l.Object.values(a);this.get("select").setAttrs({options:a})},addPreset:function(){var i=parseInt(this.get("select").get("data"));if(window.isNaN(i))return;var e=this.get("currentForm");if(e.get("dataRequired")&&!e.isValid()){console.log("Form errors");return}var t=e.getData();var a={templateId:i,type:this.get("presetTemplates").getTypeById(i)};if(t.subdomain){a.subdomain=t.subdomain;delete t.subdomain}a.data=t;var n=this.get("addButton");var s=function(){n.set("isLoading",false);e.reset()};n.set("isLoading",true);this.get("presetList").create(a,function(e){var t=this.get("presetList").getById(e.id);var a=this.createTable(t,false);this.get("tables")[e.id]=a;l.config.win.setTimeout(a.set.bind(a,"selected",true),100);l.Squarespace.Domains.Events.fire("preset:add",{templateId:i});s()}.bind(this),function(e){var t=e&&e.message||r("Failed to apply preset.");l.Squarespace.Widgets.Alert.show({"strings.title":r("DNS Record Conflict"),"strings.message":t});s()})},removePreset:function(e){var t=this.get("presetList");var a=t.getById(e);var i=this.get("tables")[e];if(this.isPresetThePrimarySubdomain(a,i)){l.Squarespace.Widgets.Alert.show({"strings.title":this.get("strings.primaryWarningTitle"),"strings.message":this.get("strings.primaryWarningMessage")});return}i.set("isLoading",true);var n=i.set.bind(i,"isLoading",false);t.remove(a,function(){i.set("selected",false);l.Squarespace.Domains.Events.fire("preset:remove",{preset:a});n()},null,function(){l.Squarespace.Widgets.Alert.show({"strings.title":this.get("strings.removeFailureTitle"),"strings.message":this.get("strings.removeFailureMessage")});n()})},handlePresetLoad:function(){var e=this.get("presetList").toArray();var i=this.get("tables");var n=this.get("hostname");e.forEach(function(e){e.get("missingRecords").length&&this.fire("missingRecordsFound");var t=this.createTable(e,true);var a=e.get("data");i[e.get("id")]=t;a&&t.set("extraData",e.formatExtraData(n))},this);this.set("tables",i)},createTable:function(e,t){var a=this.get("boundingBox").one(".tables");var i=e.get("id");var n=e.get("data");var s=e.get("existingRecords");var r=e.get("missingRecords");r.length&&(s=r);var o=new l.Squarespace.Domains.Manage.DNS.PresetTable({key:i,name:e.get("displayName"),data:c(s),render:a,selected:t,hasMissingRecords:!!e.get("missingRecords").length});n&&o.set("extraData",e.formatExtraData(this.get("hostname")));this.tableEvents.push(o.on("remove",this.removePreset.bind(this,i)));return o},isPresetThePrimarySubdomain:function(e,t){if(e.get("templateId")!==i.SQUARESPACE_SUBDOMAIN_WEBSITE)return false;var a=this.get("primarySubdomain");if(""===a)return false;return a===t.get("data")[0].host}},{CSS_PREFIX:"sqs-domains-manage-dns-presets",TEMPLATE:'<div class="form"><div class="select"></div><div class="additional-fields"></div><div class="add-button"></div></div><div class="sqs-domains-preset-table heading-table"></div><div class="tables"></div>',ATTRS:{presetList:{},presetTemplates:{},hostname:{},primarySubdomain:{},select:{valueFn:function(){return new l.Squarespace.DialogFields.Select({className:"sqs-select-light"})}},addButton:{valueFn:function(){return new l.Squarespace.DialogFields.Button({className:"primary add","strings.text":r("Add")})}},headingTable:{valueFn:function(){return new l.Squarespace.Widgets.EditTable.Table({className:"preset-table bleed",fields:l.clone(l.Squarespace.Domains.DNSTable.fields),inputRow:false})}},tables:{value:{}},currentForm:{valueFn:function(){return new l.Squarespace.Domains.Manage.DNS.PresetForm({hostname:"."+this.get("hostname")})}},strings:{value:{primaryWarningTitle:r("Change Primary Domain"),primaryWarningMessage:r("You must set a new primary domain before removing this preset."),removeFailureTitle:r("Something Went Wrong"),removeFailureMessage:r("Failed to remove preset.")}}}})},"1.0",{requires:["base","node","squarespace-dialog-button","squarespace-dialog-select","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-domains-events","squarespace-domains-manage-dns-preset-form","squarespace-domains-manage-dns-preset-table","squarespace-ss-widget","squarespace-widgets-alert","squarespace-widgets-edit-table-table"]})},12084:function(e,t){YUI.add("squarespace-domains-events",function(e){e.namespace("Squarespace.Domains");var t={broadcast:2};var a=new e.EventTarget;a.publish("domain:link-status-load");a.publish("domain:search",t);a.publish("domain:add-to-cart",t);a.publish("domain:remove-from-cart",t);a.publish("domain:select-provider",t);a.publish("domain:purchase-complete",t);a.publish("domain:www-toggle",t);a.publish("domain:lock-toggle",t);a.publish("preset:add",t);a.publish("preset:remove",t);e.Lang.isValue(e.Squarespace.Domains.Events)||(e.Squarespace.Domains.Events=a)},"1.0",{requires:["event"]})},12085:function(e,t,i){var n=i(24).t;YUI.add("squarespace-domains-manage-dns-preset-form",function(r){r.namespace("Squarespace.Domains.Manage.DNS");var a=i(5163);var t={};t[a.SQUARESPACE_APEX_FORWARDING]={fieldOrder:["url"],fields:{url:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"forward-url",required:true,"strings.placeholder":n("URL")})},validator:r.Squarespace.Domains.DNSTable.validators.isValidUrl}},validate:["url"]};t[a.SQUARESPACE_SUBDOMAIN_FORWARDING]={fieldOrder:["subdomain","arrow","target"],fields:{subdomain:{constructor:function(e){return new r.Squarespace.DialogFields.TextWithStatic({className:"subdomain-subdomain",required:true,"strings.placeholder":n("subdomain"),"strings.staticText":e})},validator:r.Squarespace.Domains.DNSTable.validators.isValidHost},arrow:{constructor:function(){return r.Node.create('<div class="subdomain-arrow"><span class="icon icon-arrow"></span></div>')}},target:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"subdomain-target",required:true,"strings.placeholder":n("URL")})},validator:r.Squarespace.Domains.DNSTable.validators.isValidUrl}},validate:["subdomain","target"]};t[a.SQUARESPACE_SUBDOMAIN_WEBSITE]={fieldOrder:["subdomain"],fields:{subdomain:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"forward-url",required:true,"strings.placeholder":n("Subdomain")})},validator:function(e){return r.Squarespace.Domains.DNSTable.validators.valueNotEmpty(e)||r.Squarespace.Domains.DNSTable.validators.isValidHost(e)}}},validate:["subdomain"]};t[a.GOOGLE_APPS_VERIFICATION]={fieldOrder:["verification"],fields:{verification:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"verification-id",required:true,"strings.placeholder":"google-site-verification=DUHrIFSas3fS…"})},validator:function(e){return r.Squarespace.Domains.DNSTable.validators.valueNotEmpty(e)}}},validate:["verification"]};var e=r.Squarespace.Domains.Manage.DNS.PresetForm=r.Base.create("PresetForm",r.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,destructor:function(){var e=this.get("fields");r.Object.each(e,function(e,t){t.destroy()})},bindUI:function(){this.after("templateIdChange",function(e){this.set("config",t[e.newVal]||{});this.syncUI()})},syncUI:function(){e.superclass.syncUI.call(this);var a=this.get("config");var i=this.get("boundingBox");var n=this.get("hostname");var s={};i.empty();if(!a||!a.fieldOrder)return;a.fieldOrder.forEach(function(e){var t=a.fields[e].constructor(n);t instanceof r.Node?i.append(t):t.render(i);s[e]=t});this.set("fields",s)},isValid:function(){if(!this.get("dataRequired"))return true;var i=this.get("fields");var n=this.get("config");var s=true;this.get("config").validate.forEach(function(e){var t=i[e];var a=n.fields[e].validator(t.get("data")||"");a&&(s=false);t.toggleError(a)});return s},getData:function(){var e=this.get("templateId");var t=this.get("fields");if(e===a.SQUARESPACE_APEX_FORWARDING)return{forwardingUrl:t.url.get("data")};if(e===a.SQUARESPACE_SUBDOMAIN_FORWARDING)return{subdomain:t.subdomain.get("data"),forwardingUrl:t.target.get("data")};if(e===a.SQUARESPACE_SUBDOMAIN_WEBSITE)return{subdomain:t.subdomain.get("data")};if(e===a.GOOGLE_APPS_VERIFICATION)return{subdomain:"@",value:t.verification.get("data")};return{}},reset:function(){r.Object.each(this.get("fields"),function(e){e.set("data","")})}},{CSS_PREFIX:"sqs-domains-manage-dns-preset-form",ATTRS:{templateId:{setter:function(e){return parseInt(e)}},config:{valueFn:function(){return t[this.get("templateId")]||{}}},hostname:{},dataRequired:{getter:function(){return!!this.get("config").fieldOrder}}}})},"1.0",{requires:["base","node","squarespace-dialog-text","squarespace-dialog-text-with-static","squarespace-domains-dns-table-validators","squarespace-ss-widget"]})},12086:function(e,t){YUI.add("squarespace-dialog-text-with-static",function(e){e.namespace("Squarespace.DialogFields");var i=e.Squarespace.DialogFields.TextWithStatic=e.Base.create("TextWithStatic",e.Squarespace.Widgets.DialogField2,[],{renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");e.one(".sqs-editable-text").setContent(this.get("data"));e.one(".sqs-static-text").setContent(this.get("strings.staticText"))},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox").one(".sqs-editable-text");this._registerEvent(e.on("click",this.clearPlaceholder,this),e.on("blur",function(e){this.set("data",e.target.getContent());this.set("isEditing",false);this.hideError();this.syncUI()},this),e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||e.halt()}),e.on("keyup",function(e){13===e.keyCode&&e.target.blur();this.hideError();this.toggleError()},this));this.after("dataChange",this.syncUI)},syncUI:function(){i.superclass.syncUI.call(this);var e=this.get("data");var t=!e;var a=this.get("contentBox").one(".sqs-editable-text");this.get("boundingBox").toggleClass("is-empty",t);t?a.setContent(this.get("strings.placeholder")):a.setContent(e)},clearPlaceholder:function(){var e=this.get("contentBox").one(".sqs-editable-text");if(!this.get("data")&&!this.get("isEditing")){this.get("boundingBox").removeClass("is-empty");e.setContent("")}this.set("isEditing",true)},getErrors:function(){if(!this.get("data"))return["Required"];return[]}},{CSS_PREFIX:"sqs-dialog-text-with-static",TEMPLATE:'<div class="sqs-editable-text" contenteditable></div><div class="sqs-static-text"></div><div class="shadow"></div>',ATTRS:{data:{},isEditing:{value:false},strings:{value:{staticText:"",placeholder:""}}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-text"]})},12087:function(e,t){YUI.add("squarespace-domains-manage-dns-preset-table",function(e){e.namespace("Squarespace.Domains.Manage.DNS");var t=e.clone(e.Squarespace.Domains.DNSTable.fields);t[t.length-1].editable=false;var a=45;var i=22;var n=e.Squarespace.Domains.Manage.DNS.PresetTable=e.Base.create("PresetTable",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.set("table",new e.Squarespace.Domains.DNSTable.RecordsTable({className:"bleed preset-table",locked:true,fields:t,header:null,inputRow:false,actionColumn:null,groupOrder:["CNAME","A","MX","AAAA","TXT","SRV"],groupKey:"record",data:e.clone(this.get("data"))}));this.publish("remove")},renderUI:function(){n.superclass.renderUI.call(this);this.get("table").render(this.get("contentBox"));this.get("boundingBox").addClass(this.get("key")+"-section");this.setMaxHeight()},bindUI:function(){n.superclass.bindUI.call(this);this.after("isLoadingChange",function(e){this.get("table").set("isLoading",e.newVal)});this.after("selectedChange",this.syncUI);this.after("extraDataChange",this.syncUI);this.get("boundingBox").delegate("click",function(){this.fire("remove")},".remove-button",this);this.after("dataChange",function(e){this.get("table").setData(e.newVal)})},syncUI:function(){n.superclass.syncUI.call(this);var e=this.get("contentBox");var t=this.get("boundingBox");var a=e.one(".extra-data");var i=this.get("extraData");a.toggleClass("is-empty",!i);a.setContent(i);e.one(".table-heading").setContent(this.get("name"));t.toggleClass("is-hidden",!this.get("selected"));t.toggleClass("has-missing-records",this.get("hasMissingRecords"));this.setMaxHeight()},setMaxHeight:function(){var e=this.get("table").get("boundingBox").get("scrollHeight")+i;this.get("extraData")&&(e+=a);this.get("boundingBox").setStyle("max-height",e)}},{CSS_PREFIX:"sqs-domains-preset-table",TEMPLATE:'<div class="table-heading"></div><div class="extra-data"></div><div class="remove-button"><span class="icon icon-delete"></span></div>',ATTRS:{key:{},name:{},data:{},selected:{value:false},table:{},extraData:{},isLoading:{},hasMissingRecords:{value:false}}})},"1.0",{requires:["base","node","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-ss-widget"]})},12088:function(e,t,a){var s=a(21);YUI.add("squarespace-domains-view-models-preset-list",function(i){i.namespace("Squarespace.Domains.ViewModels");var n=i.Squarespace.Domains.ViewModels.PresetList=i.Base.create("PresetList",i.Squarespace.Models.ModelList,[i.Squarespace.ModelSync.REST],{url:i.Squarespace.REST_API_ROOT+"domains/{domainId}/presets",model:i.Squarespace.Domains.ViewModels.Preset,create:function(e,t,a){if(!e)return;e.subdomain||(e.subdomain="@");e.data||(e.data={});i.Data.post({url:this.getURL("read"),json:true,data:e,success:function(e){this.add(e);t&&t(e)}.bind(this),failure:a||s})},remove:function(e,t,a){i.Data.del({url:this.getURL("read")+"/"+e.get("id"),success:t||s,failure:a||s});n.superclass.remove.call(this,e)}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","squarespace-data","squarespace-domains-view-models-preset","squarespace-model-sync-rest","squarespace-models-model-list"]})},12089:function(e,t,a){var r=a(802);YUI.add("squarespace-domains-view-models-preset",function(e){e.namespace("Squarespace.Domains.ViewModels");var s=a(5163);e.Squarespace.Domains.ViewModels.Preset=e.Base.create("Preset",e.Squarespace.Domains.Models.Preset,[],{formatExtraData:function(e){var t=this.get("data");if(!t)return;var a=this.get("templateId");var i=' <span class="icon icon-arrow"></span> ';var n="";if(a===s.SQUARESPACE_SUBDOMAIN_FORWARDING){n=this.get("subdomain")+"."+e;return n+i+t.forwardingUrl}if(a===s.SQUARESPACE_APEX_FORWARDING){n=r("{hostname}, www.{hostname}",{hostname:e});return n+i+t.forwardingUrl}}})},"1.0",{requires:["base","squarespace-domains-models-preset"]})},12090:function(e,t){YUI.add("squarespace-domains-models-preset",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Preset=e.Base.create("Preset",e.Model,[],{},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isString},templateId:{validator:e.Squarespace.AttrValidators.isNumber},type:{validator:e.Squarespace.AttrValidators.isString},subdomain:{validator:e.Squarespace.AttrValidators.isString},displayName:{validator:e.Squarespace.AttrValidators.isString},existingRecords:{validator:e.Squarespace.AttrValidators.isArray},data:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12091:function(e,t,a){var n=a(21);YUI.add("squarespace-domains-view-models-record-set",function(a){a.namespace("Squarespace.Domains.ViewModels");var i=a.Squarespace.Domains.ViewModels.RecordSet=a.Base.create("RecordSet",a.ModelList,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{domainId}/custom-record-set",model:a.Squarespace.Domains.Models.Record,parse:function(e){var t=i.superclass.parse.call(this,e);return t.records},toJSON:function(){var e=i.superclass.toJSON.call(this);return{records:e}},restoreDefaults:function(e,t){a.Data.post({url:this.getURL("read")+"/reseter",success:e||n,failure:t||n})}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","model-list","squarespace-domains-models-record","squarespace-model-sync-rest"]})},12092:function(e,t){YUI.add("squarespace-domains-models-record",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Record=e.Base.create("Record",e.Model,[],{},{ATTRS:{type:{validator:e.Squarespace.AttrValidators.isString},domainName:{validator:e.Squarespace.AttrValidators.isString},subdomain:{validator:e.Squarespace.AttrValidators.isString},ip:{validator:e.Squarespace.AttrValidators.isNullOrString},hostname:{validator:e.Squarespace.AttrValidators.isNullOrString},text:{validator:e.Squarespace.AttrValidators.isNullOrString},priority:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12093:function(e,t,a){var i=a(24).t;YUI.add("squarespace-domains-manage-dns-setup",function(s){s.namespace("Squarespace.Domains.Manage.DNS");s.Squarespace.Domains.Manage.DNS.Setup=s.Base.create("Setup",s.Squarespace.Widgets.SSWidget,[s.Squarespace.Damask.Panel.MixinPanel],{initializer:function(){this.get("model").getProvider().then(s.bind(function(e){this._updateDescriptionsWithProviderInfo(e)},this)).catch(function(e){false})},destructor:function(){this.get("headerTray").destroy(true);this.get("statusTable").destroy(true);this.get("checkButton").destroy(true);this.get("testConnectionButton").destroy(true)},renderUI:function(){var e=this.get("contentBox");this.get("headerTray").render(e);this.get("statusTable").render(e);this.get("checkButton").render(e);this.get("testConnectionButton").render(e)},bindUI:function(){this._registerEvent(this.get("checkButton").on("click",function(){this.get("model").loadLinkStatus()},this))},_updateDescriptionsWithProviderInfo:function(e){var t=e.toJSON();var a=s.Lang.isValue(e.get("providerUrl"))?this.get("strings.headerSubtitleLogin"):this.get("strings.headerSubtitleLoginNoProvider");var i=this.get("strings.headerSubtitleLead")+a+this.get("strings.headerSubtitleHelpArticle");var n=s.Lang.sub(i,t);this.get("headerTray").set("strings.subtitle",n)}},{CSS_PREFIX:"sqs-domains-panel sqs-domains-manage-dns-setup",ATTRS:{model:{validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Domains.ViewModels.Domain)},headerTray:{valueFn:function(){return new s.Squarespace.Widgets.HeaderTray({"strings.title":this.get("strings.headerTitle"),"strings.subtitle":""})}},statusTable:{valueFn:function(){return new s.Squarespace.Domains.LinkStatus.Base({linkStatusList:this.get("model").get("linkStatusList")})}},checkButton:{valueFn:function(){return new s.Squarespace.DialogFields.Button({className:"primary","strings.text":this.get("strings.checkLabel")})}},testConnectionButton:{valueFn:function(){return new s.Squarespace.DialogFields.Button({className:"minor","strings.text":this.get("strings.testConnectionButton"),newWindow:true,href:"http://"+this.get("model").get("name")})}},strings:{value:{headerTitle:i("DNS Settings"),headerSubtitleLead:i("This table shows you the DNS entries needed to connect your domain. Incorrect or missing entries are highlighted in red.")+" ",headerSubtitleLogin:i('<a href="{providerUrl}" target="_blank">Log in to your domain provider</a> to manage these settings.')+" ",headerSubtitleLoginNoProvider:i("Log in to your domain provider to manage these settings.")+" ",headerSubtitleHelpArticle:i('If you need help adding and removing DNS entries, follow our <a href="{helpArticleUrl}" target="_blank">step-by-step guide</a> that walks you through the process.'),checkLabel:i("Refresh"),testConnectionButton:i("Test Connection")}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-dialog-button","squarespace-dialog-description","squarespace-domains-link-status-base","squarespace-domains-view-models-domain","squarespace-ss-widget","squarespace-tray","squarespace-widgets-alert"]})},12094:function(e,t,a){var i=a(24).t;var n=a(1522);YUI.add("squarespace-domains-link-status-base",function(s){s.namespace("Squarespace.Domains.LinkStatus");s.Squarespace.Domains.LinkStatus.Base=s.Base.create("LinkStatusBase",s.Squarespace.Widgets.SSWidget,[],{destructor:function(){this.get("header").destroy(true);this.get("spinner").destroy(true);s.Array.invoke(this.get("rows"),"destroy",true)},renderUI:function(){var e=this.get("contentBox");var t=this.get("tableElement");var a=this.get("header");a.render(t);t.appendTo(e);this._createRows()},bindUI:function(){var e=this.get("linkStatusList");this._registerEvent(e.after("load-start",function(){this.set("loading",true)},this),e.after("load",function(){this._createRows();this.set("loading",false)},this));this.after("loadingChange",this.syncUI)},syncUI:function(){this.get("boundingBox").toggleClass("loading",this.get("loading"))},_createRow:function(e){var t=this.get("headerStrings");e.values=n(t,e.values).flat();return new s.Squarespace.Domains.LinkStatus.Row(e)},_createRows:function(){s.Array.invoke(this.get("rows"),"destroy",true);var e=this.get("linkStatusList");var t=e.map(this._parseLinkStatusData,this);var a=s.Array.map(t,this._createRow.bind(this));s.Array.invoke(a,"render",this.get("tableElement"));this.set("rows",a)},_parseLinkStatusData:function(e){var t=e.get("status");var a=s.Lang.isValue(t);var i=e.get("deprecated");var n;n=a&&"www.squarespace.com"===e.get("value")?this.get("strings.incorrect"):a?e.get("value"):e.get("deprecated")?this.get("strings.warnings.deprecated"):this.get("strings.correct");return{values:[e.get("subDomain"),e.get("expectedRecordType"),e.get("expectedValue"),n],hasErrors:a,hasWarnings:i}}},{CSS_PREFIX:"sqs-domains-link-status-table",ATTRS:{headerStrings:{valueFn:function(){return[this.get("strings.host"),this.get("strings.record"),this.get("strings.status"),this.get("strings.details")]}},header:{valueFn:function(){return new s.Squarespace.Domains.LinkStatus.Row({header:true,values:this.get("headerStrings")})}},loading:{valueFn:function(){return this.get("linkStatusList").isEmpty()}},tableElement:{valueFn:function(){return new s.Node.create("<table></table>")},validator:s.Squarespace.AttrValidators.isInstanceOf(s.Node)},linkStatusList:{validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Domains.ViewModels.LinkStatusList)},rows:{value:[],validator:s.Squarespace.AttrValidators.isArray},spinner:{valueFn:function(){return new s.Squarespace.Spinner({size:44,color:"dark",render:this.get("contentBox")})}},strings:{value:{host:i("Host"),record:i("Record"),details:i("Current Data"),status:i("Required Data"),correct:i("Correct"),incorrect:i("Incorrect"),warnings:{deprecated:i("Deprecated")},errors:{missingValue:"{value}",host:i("HOST should be <strong>{value}</strong>"),details:i("DETAILS should be <strong>{value}</strong>")}}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-attr-validators","squarespace-domains-link-status-row","squarespace-domains-view-models-link-status-list","squarespace-spinner","squarespace-ss-widget"]})},12095:function(e,t){YUI.add("squarespace-domains-link-status-row",function(i){i.namespace("Squarespace.Domains.LinkStatus");var t=i.Squarespace.Domains.LinkStatus.Row=i.Base.create("Row",i.Base,[i.Squarespace.Mixins.EventRegistrar],{initializer:function(){this.set("rows",i.Array.map(this.get("values"),function(e){return t.createColumn(e,this.get("header"))},this));this._renderRows()},destructor:function(){this.get("rowElement").remove(true)},render:function(e){var t=this.get("rowElement");t.toggleClass("has-errors",this.get("hasErrors"));t.toggleClass("has-warnings",this.get("hasWarnings"));e.append(t)},_renderRows:function(){var t=this.get("rowElement");i.Array.each(this.get("rows"),function(e){t.append(e)})}},{createColumn:function(e,t){var a="td";t&&(a="th");return new i.Node.create(i.Lang.sub("<{element}>{value}</{element}>",{element:a,value:e||""}))},CSS_PREFIX:"sqs-domains-link-status-table-row",ATTRS:{values:{value:[],validator:i.Squarespace.AttrValidators.isArray},rows:{value:[],validator:i.Squarespace.AttrValidators.isArray},rowElement:{valueFn:function(){var e=new i.Node.create("<tr></tr>");e.toggleClass("header",this.get("header"));return e},validator:i.Squarespace.AttrValidators.isInstanceOf(i.Node)},hasErrors:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},hasWarnings:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},header:{value:false,validator:i.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-mixins-event-registrar"]})},12096:function(e,t){YUI.add("squarespace-domains-view-models-link-status-list",function(t){t.namespace("Squarespace.Domains.ViewModels");var e=t.Squarespace.Domains.ViewModels.LinkStatusList=t.Base.create("LinkStatusList",t.Squarespace.Models.ModelList,[],{url:t.Squarespace.REST_API_ROOT+"domains/{domainId}/link-status",model:t.Squarespace.Domains.ViewModels.LinkStatus,load:function(){this.fire("load-start");e.superclass.load.apply(this,arguments)}},{ATTRS:{domainId:{validator:t.Squarespace.AttrValidators.isNullOrString,value:null},statuses:{getter:function(){return t.Array.filter(this.get("status"),function(e){return t.Lang.isValue(e)})}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-domains-view-models-link-status","squarespace-models-model-list"]})},12097:function(e,t,a){var i=a(24).t;YUI.add("squarespace-domains-view-models-link-status",function(e){e.namespace("Squarespace.Domains.ViewModels");var t=e.Squarespace.Domains.ViewModels.LinkStatus=e.Base.create("LinkStatus",e.Squarespace.Domains.Models.LinkStatus,[],{_getStatus:function(){if(this.get("value")===t.DEFAULTS.VALUE)return{type:"missingValue",value:this.get("expectedValue"),recordType:this.get("expectedRecordType")};if(!this.get("isCorrectType"))return{type:"host",value:this.get("expectedRecordType"),recordType:this.get("expectedRecordType")};if(!this.get("isCorrectValue")||this.get("deprecated")&&"www.squarespace.com"===this.get("value"))return{type:"details",value:this.get("expectedValue"),recordType:this.get("expectedRecordType")}}},{DEFAULTS:{VALUE:i("Record not found"),SUBDOMAIN:"@"},ATTRS:{subDomain:{getter:function(e){return e||t.DEFAULTS.SUBDOMAIN}},value:{getter:function(e){return e||t.DEFAULTS.VALUE}},isExpected:{getter:function(){return e.Lang.isValue(this.get("expectedValue"))}},isDetected:{getter:function(){return e.Lang.isValue(this.get("value"))}},isCorrectValue:{getter:function(){return this.get("isDetected")&&this.get("expectedValue")===this.get("value")}},isCorrectType:{getter:function(){return e.Lang.isValue(this.get("recordType"))&&this.get("expectedRecordType")===this.get("recordType")}},status:{getter:"_getStatus"}}})},"1.0",{requires:["base","squarespace-domains-models-link-status"]})},12098:function(e,t){YUI.add("squarespace-domains-models-link-status",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.LinkStatus=e.Base.create("LinkStatus",e.Model,[],{},{ATTRS:{subDomain:{validator:e.Squarespace.AttrValidators.isString},type:{validator:e.Squarespace.AttrValidators.isNumber},recordType:{validator:e.Squarespace.AttrValidators.isString},expectedRecordType:{validator:e.Squarespace.AttrValidators.isString},value:{validator:e.Squarespace.AttrValidators.isString},expectedValue:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12099:function(e,t,a){var s=a(24).t;var r=a(810);var o=a(13284);var l=a(13285);var c=a(1941);var d=a(24).formatMoney;var u=a(5133);var g=a(495);var p=a(5313);YUI.add("squarespace-domains-view-models-domain",function(n){n.namespace("Squarespace.Domains.ViewModels");var i="www.";var e=n.Squarespace.Domains.ViewModels.Domain=n.Base.create("domain",n.Squarespace.Domains.Models.Domain,[],{initializer:function(){if(this.get("builtIn")){this.set("statusLoaded",true);return}this.loadLinkStatus();this.get("managed")&&this.get("emailVerificationDetails").load(n.bind(function(){this.set("statusLoaded",true)},this))},toJSON:function(){return this.getAttrs(n.Object.keys(e.superclass.constructor.ATTRS))},loadCancellationPreview:function(){if(!this.get("managed")||!n.Lang.isValue(this.get("subscriptionId")))return;this.get("cancellationPreview").load()},loadLinkStatus:function(e){if(!n.Lang.isValue(this.get("id")))return;var t=n.bind(function(){this.get("managed")||this.set("statusLoaded",true);n.Squarespace.Domains.Events.fire("domain:link-status-load",{domain:this});e&&e()},this);this.get("linkStatusList").load(t)},getProvider:function(){if(!n.Lang.isValue(this.get("providerId")))return this.identifyProvider();return this.loadStoredProvider()},loadStoredProvider:function(){return n.Squarespace.Domains.ViewModels.Provider.loadFromId(this.get("providerId"))},identifyProvider:function(){return p.identifyProvider(this.get("name")).then(function(e){if(200!==e.status||!e.data)throw new Error("Failed to identify provider");return new n.Squarespace.Domains.ViewModels.Provider(e.data)}).catch(function(e){throw e})},reactivate:function(){if(!this.get("expired"))return;return n.Squarespace.Promises.create(function(e,t){t()})},_toggleWWW:function(e){if(!this.get("primary"))return;var t=this.get("name");e&&(t=i+t);var a=this.get("systemPrimaryDomain");this._postToPrimaryEndpoint(t,function e(){this.set("systemPrimaryDomain",t);this.fire("wwwToggle",{domain:this,prevVal:a,newVal:t})},function e(){this.fire("wwwToggleFailure",{domain:this});new n.Squarespace.Widgets.Information({"strings.title":this.get("strings.wwwToggleFailureTitle"),"strings.message":this.get("strings.wwwToggleFailureMessage")})})},_postToPrimaryEndpoint:function(e,t,a){n.Data.put({url:"/api/rest/websites/primary-domain",data:{primaryDomain:e},success:t,failure:a},this)}},{ATTRS:{primary:{readOnly:true,getter:function(){var e=this.get("systemPrimaryDomain");var t=this.get("name");if(!n.Lang.isValue(e))return this.get("builtIn");return e===t||this.get("linked")&&this.get("usingWWW")&&i+t===e||this.get("managed")&&l(e,"."+t)}},builtIn:{getter:function(){return this.get("type")===n.Squarespace.DomainTypes.APPLICATION},readOnly:true},certificateStatus:{getter:function(){return u.getCumulativeStatus(this.get("certificates"))}},linked:{getter:function(){var e=this.get("providerId");var t=this.get("type");return t===n.Squarespace.DomainTypes.LINKED||t===n.Squarespace.DomainTypes.GOOGLE||e===n.Squarespace.DomainProviderId.NAMECHEAP},readOnly:true},managed:{getter:function(){return this.get("type")===n.Squarespace.DomainTypes.SQUARESPACE},readOnly:true},interpretedType:{getter:function(){var e=["managed","builtIn","linked"];var t=e.find(function(e){return this.get(e)}.bind(this));false;return t},readOnly:true},expired:{getter:function(){if(!n.Lang.isValue(this.get("managed")))return false;return this.get("subscriptionState")===n.Squarespace.DomainSubscriptionState.EXPIRED}},suspended:{getter:function(){if(!this.get("managed"))return false;var e=this.get("emailVerificationDetails").get("status");return e===n.Squarespace.DomainVerificationStatus.SUSPENDED},readOnly:true},pastDue:{getter:function(){if(!this.get("managed"))return false;return this.get("subscriptionState")===n.Squarespace.DomainSubscriptionState.PASTDUE}},active:{getter:function(){return this.get("subscriptionState")===n.Squarespace.DomainSubscriptionState.ACTIVE}},daysToExpiration:{getter:function(){if(!this.get("managed")||this.get("autoRenew"))return null;var e=new Date(this.get("managedDomainExpiration"));var t=new Date;var a=o(t,e);var i=360*a.year+30*a.month+7*a.week+a.day;return e>t?i:-i}},showExpirationWarning:{getter:function(){var e=this.get("daysToExpiration");return!this.get("autoRenew")&&e>0&&e<=15}},free:{getter:function(){return this.get("planLevel")===n.Squarespace.DomainPlanLevel.FREE}},purchasedFree:{getter:function(){return this.get("free")||!!this.get("discountExpiresOn")}},context:{getter:function(){return n.Squarespace.Context.getInstance()}},emailVerificationDetails:{valueFn:function(){if(!this.get("managed"))return null;return new n.Squarespace.Domains.ViewModels.EmailVerification({domainId:this.get("id")})},validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Domains.ViewModels.EmailVerification)},emailPending:{getter:function(){var e=this.get("emailVerificationDetails");if(!n.Lang.isValue(e))return false;return e.get("status")===n.Squarespace.DomainVerificationStatus.PENDING}},systemPrimaryDomain:{getter:function(){return this.get("context").get("website").get("primaryDomain")},setter:function(e){this.get("context").get("website").set("primaryDomain",e)}},chosenPrimarySubdomain:{getter:function(){if(!this.get("primary"))return null;var e=this.get("systemPrimaryDomain");return e.substr(0,e.indexOf(this.get("name"))-1)}},isTaxCollected:{getter:function(){var e=c.getState();return e&&e.isTaxCollected&&!e.isExempt}},taxType:{getter:function(){var e=c.getState();return e&&e.taxType}},displayRenewsOn:{getter:function(){var e=this.get("renewsOn");if(!n.Lang.isValue(e))return"";var t=r(new Date(e));var a=this.get("basePrice");var i=this.get("isTaxCollected")&&this.get("taxType")===g.VAT;if(this.get("free"))return s("{date} (Free Domain)",{date:t});if(a&&i)return s("{date} for {domainPrice} excl. VAT",{date:t,domainPrice:d(a)});if(a)return s("{date} for {domainPrice}",{date:t,domainPrice:d(a)});return t}},displayCreatedOn:{valueFn:function(){return r(new Date(this.get("createdOn")))},writeOnce:true,readOnly:true},displayExpiration:{valueFn:function(){var e=this.get("managedDomainExpiration");if(!n.Lang.isValue(e))return"";return r(new Date(e))}},usingWWW:{getter:function(){var e=this.get("systemPrimaryDomain");return e&&0===e.indexOf(i)},setter:"_toggleWWW"},cancellationPreview:{valueFn:function(){return new n.Squarespace.Domains.Models.CancellationPreview({id:this.get("subscriptionId")})},validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Domains.Models.CancellationPreview)},linkStatusList:{valueFn:function(){return new n.Squarespace.Domains.ViewModels.LinkStatusList({domainId:this.get("id")})},validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Domains.ViewModels.LinkStatusList)},recentlyAdded:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},statusLoaded:{value:false,validator:n.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-context","squarespace-domains-events","squarespace-domains-models-domain","squarespace-domains-models-cancellation-preview","squarespace-domains-view-models-email-verification","squarespace-domains-view-models-link-status-list","squarespace-domains-view-models-provider","squarespace-enum","squarespace-promises"]})},12100:function(e,t,a){var i=a(96);YUI.add("squarespace-domains-models-cancellation-preview",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.CancellationPreview=e.Base.create("CancellationPreview",e.Model,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.API_ROOT+"billing/subscriptions/{id}/cancellation-preview"},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isString},refundAmount:{setter:function(e){return i.fromJson(e)}}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-attr-validators"]})},12101:function(e,t){YUI.add("squarespace-domains-view-models-email-verification",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.EmailVerification=e.Base.create("EmailVerification",e.Squarespace.Domains.Models.EmailVerification,[e.ModelSync.REST],{url:"/api/rest/domains/{domainId}/email-verification-status"},{ATTRS:{domainId:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model-sync-rest","squarespace-attr-validators","squarespace-domains-models-email-verification"]})},12102:function(e,t){YUI.add("squarespace-domains-models-email-verification",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.EmailVerification=e.Base.create("EmailVerification",e.Model,[],{},{ATTRS:{daysToSuspend:{validator:e.Squarespace.AttrValidators.isNumber},sentToEmail:{validator:e.Squarespace.AttrValidators.isString},status:{validator:e.Squarespace.AttrValidators.isNumber},verificationDeadline:{validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","model","model-sync-rest","squarespace-attr-validators"]})},12103:function(e,t,a){var i=a(207);YUI.add("squarespace-domains-view-models-provider",function(n){n.namespace("Squarespace.Domains.ViewModels");n.Squarespace.Domains.ViewModels.Provider=n.Base.create("Provider",n.Squarespace.Domains.Models.Provider,[],{},{loadFromId:function(i){return new n.Squarespace.Promises.create(function(e,t){var a=new n.Squarespace.Domains.ViewModels.Provider({id:i});a.load(function(){e(a)})})},ATTRS:{isUnknown:{getter:function(){return this.get("id")===n.Squarespace.DomainProviderId.UNKNOWN}},helpArticleUrl:{getter:function(e){if(!n.Lang.isValue(e))return i.CONNECT_DOMAIN;return e}}}})},"1.0",{requires:["base","squarespace-domains-models-provider","squarespace-enum","squarespace-promises"]})},12104:function(e,t){YUI.add("squarespace-domains-models-provider",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Provider=e.Base.create("Provider",e.Model,[e.ModelSync.REST],{root:"/api/domain-providers"},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isNullOrNumber,value:null},name:{validator:e.Squarespace.AttrValidators.isString},providerUrl:{validator:e.Squarespace.AttrValidators.isString},helpArticleUrl:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},12105:function(e,t){YUI.add("squarespace-domains-view-models-domain-list",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.DomainList=e.Base.create("domains",e.Squarespace.Models.ModelList,[],{model:e.Squarespace.Domains.ViewModels.Domain,comparator:function(e){return e.get("name").toLowerCase()},initializer:function(){this.on("*:primary",function(e){this.fire("primaryChange",e)});this.after("*:autoRenewChange",function(e){this.fire("domainAutoRenewChanged",e)});this.after("*:expiredChange",function(e){this.fire("domainExpiredChanged",e)})},getBuiltIn:function(){return this.filter({asList:true},function(e){return e.get("builtIn")})},getLinked:function(){return this.filter({asList:true},function(e){return!e.get("builtIn")&&!e.get("managed")})},getManaged:function(){return this.filter({asList:true},function(e){return e.get("managed")})},hasLinked:function(){return!this.getLinked().isEmpty()},hasManaged:function(){return!this.getManaged().isEmpty()},getByName:function(a){return this.toArray().find(function(e){var t=e.get("name");return a===t})}},{ATTRS:{purchasedGoogleApps:{getter:function(){return this.some(function(e){return e.get("purchasedGoogleApps")})}}}})},"1.0",{requires:["base","model-list","model-sync-rest","squarespace-domains-view-models-domain","squarespace-models-model-list"]})},12364:function(e,t,a){"use strict";var i=a(12983);var n=a(12991);var s=a(12992);var r=a(12993);var o=a(12994);var l=a(12366);var c=a(12995);var d=a(12367);var u=a(11883);var g=a(12996);var p=a(12997);var h=a(12998);var f=a(12999);var m=a(13011);var v=a(13012);var b=a(13015);var y=a(13017);var S=a(11884);var q=a(13018);var _=a(13019);var C=a(13020);var E=a(13021);e.exports={BlockField:i,Blog:n,BusinessInformation:s,Calendar:r,ConnectedAccounts:o,ContentItemMinimal:l,FooterSections:m,Gallery:c,Index:d,LayoutBase:u,MusicAlbum:g,Navigation:p,Page:h,PageSections:f,PageWrapper:v,PanelLink:b,Products:y,Sections:S,SiteDescription:q,SiteTitle:_,SiteHeader:C,StackedIndex:E}},12366:function(e,t,a){"use strict";var i=a(4);var h=i(a(8));var n=i(a(9));var f=i(a(6));var s=i(a(10));var r=i(a(11));var m=i(a(268));var v=i(a(7));var b=i(a(2));function o(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,v.default)(i),t;if(n()){var a=(0,v.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,r.default)(this,t)}}var l=a(24),y=l.t;var S=a(722);var q=a(43);var c=a(1432);var _=a(1030);var C=a(149);var E=a(11569);var k=a(11786);var w=a(11785);var T=a(1004);var d=a(11538);var u=a(11787);var I=a(1089);var A=a(1306);var x=a(318);var L=a(516);var D=a(869).default;var N=a(1516);var O="layout-add-block-button";var g=function(e){(0,s.default)(p,e);var g=o(p);function p(e,t){var a,i,s;var n=t.rootNode,r=t.model,o=t.collection,l=t.strings,c=t.trackingIdentifier;(0,h.default)(this,p);var d={collection:null,model:null,placeAnnotationInside:true,nodeHeaderTitle:y("Post"),strings:{label:y("Generic Item")},pageLayout:new e.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:o.get("id"),parentItemId:r.get("id")}),trackingIdentifier:"generic"};var u=S({},d,{rootNode:n,model:r,collection:o,strings:l,trackingIdentifier:c});s=g.call(this,e,u);(0,b.default)((0,f.default)(s),"destroy",function(){s.state.model&&s.state.model.destroy();(0,m.default)((a=(0,f.default)(s),(0,v.default)(p.prototype)),"destroy",a).call(a)});(0,b.default)((0,f.default)(s),"loadContentItem",function(){return new Promise(function(n,e){if(!s.state.model){e(new Error("Cannot load content item"));return}s.state.model.load({forceReload:true},function(){var e=s.state,t=e.model,a=e.pageLayout;var i=t.get("title");_(i)&&i.length>0&&s.set("nodeHeaderTitle",i);a.setAttrs(t.get("body.layout"));n()})})});(0,b.default)((0,f.default)(s),"editItem",function(){!s.state.destroyed&&s.hasResourcesToInlineEdit()?s.startInlineEditing():s.showContentItemEditor()});(0,b.default)((0,f.default)(s),"hasResourcesToInlineEdit",function(){var e=s.state.model;if(!e||e.get("recordType")!==C.TEXT)return false;return s.hasNodesForFrontendEditing()});(0,b.default)((0,f.default)(s),"startInlineEditing",function(){s.set("editable",true)});(0,b.default)((0,f.default)(s),"syncEditorOverlay",function(){if(!s.state.editable)return E.hideEditorOverlay();var e=T.isTutorialCompleted(O);var t=y("Add Block");var a=[{name:"save",label:y("Save"),handleClick:function e(){return s.props.fireRequestSaveChangesEvent(s.state.model)}},{name:"cancel",label:y("Cancel"),handleClick:function e(){return s.props.fireRequestDiscardChangesEvent()}},{name:"add",label:e?"":t,title:y("Add Block"),className:"sqs-float-right sqs-annotation-add-block-button",icon:e,handleClick:function e(t){T.markTutorialCompleted(O);s.Y.Squarespace.LayoutEngine.EditController.getInstance().showBlockMenu({align:{node:s.Y.one(t.target),points:[s.Y.WidgetPositionAlign.TC,s.Y.WidgetPositionAlign.TR]},layoutNode:s.state.rootNode.one('.sqs-layout[data-type="item"]')})}},{name:"settings",label:y("Settings"),className:"sqs-float-right",handleClick:function e(){s.showContentItemEditor({onlySetAttrsOnSave:true})}}];E.showEditorOverlay({buttons:a,className:"sqs-content-item-minimal-node-header",hostNode:s.state.rootNode.getDOMNode(),label:y("Editing &lsquo;{sub1}&rsquo;",{sub1:s.state.nodeHeaderTitle.trim()}),scrollLayoutOnEditingStart:s.state.scrollLayoutOnEditingStart,trackButtonClick:s.props.trackButtonClick,updateAfterScroll:s.clearLayoutNodeHeight.bind((0,f.default)(s))})});(0,b.default)((0,f.default)(s),"save",function(){s.syncInlineEditorsToEditingItem();return(0,m.default)((i=(0,f.default)(s),(0,v.default)(p.prototype)),"save",i).call(i)});(0,b.default)((0,f.default)(s),"onCancel",function(){s.set("dirty",false)});(0,b.default)((0,f.default)(s),"revert",function(){var e=function e(t){var a=q(t,"message",q(t,"responseJSON.message"));return new s.Y.Squarespace.Widgets.Alert({"strings.title":y("Error Saving"),"strings.message":a||y("Please try saving again.")})};var t=new Promise(function(e,t){s.state.model?s.state.model.resetToLastRead(e,t):t(new Error("No content item model to revert."))});return t.then(s.onCancel).catch(e)});(0,b.default)((0,f.default)(s),"syncInlineEditorsToEditingItem",function(){var e=s.state.model;if(!e){x.captureException(new Error("Missing item, cannot sync inline editors"));return}s.titleEditor&&e.set("title",s.titleEditor.data);s.bodyEditor&&e.set("body",{layout:s.state.pageLayout.toJSON()})});(0,b.default)((0,f.default)(s),"showContentItemEditor",function(e){var a=s.state.model;if(!a){x.captureException(new Error("Missing item, cannot show content item editor"));return}var t=s.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.ContentItemEditorFactory");s.syncInlineEditorsToEditingItem();var i=t.getEditor(a);var n=new i(s.Y.merge(e,{model:a}));n.once(["savingClose","nonSavingClose"],function e(t){if(!this.hasResourcesToInlineEdit(a)){window.setTimeout(function(){this.Y.Squarespace.Singletons.Location.requestFrameRefresh()}.bind(this),0);return}if(t.type.indexOf("savingClose")>-1){this.syncEditor();this.set("dirty",true)}n.get("autoSaveAnnotation")&&this.props.fireRequestSaveChangesEvent(this.state.model)},(0,f.default)(s));n.show()});(0,b.default)((0,f.default)(s),"syncEditor",function(){s.state.editable?s.renderInlineEditors():s.destroyInlineEditors()});(0,b.default)((0,f.default)(s),"revertPageLayout",function(){var e=s.state,t=e.model,a=e.pageLayout;var i=t.get("body.layout");a.setAttrs(i);return a});(0,b.default)((0,f.default)(s),"destroyInlineEditors",function(){if(s.titleEditor){var e=s.titleEditor.hostNode;s.state.model&&(e.innerHTML=s.state.model.get("title"));s.titleEditor.destroy();s.titleEditor=null}s.reenableLinkNavigation();s.state.model&&s.state.model.detachAll();if(s.bodyEditor){var t=s.bodyEditor.hostNode;s.bodyEditor.destroy();s.bodyEditor=null;var a=s.Y.Squarespace.LayoutEngine.EditController.getInstance();a.pluginLayoutBuilder(s.Y.one(t),s.revertPageLayout());a.destroyLayoutBuilder(s.Y.one(t))}});(0,b.default)((0,f.default)(s),"renderInlineEditors",function(){var e=s.state.rootNode;s.destroyInlineEditors();s.disableLinkNavigation();var t={editorUid:s.Y.guid()};var a=e.one('[data-content-field="title"]');if(a&&s.state.model){s.titleEditor=new k(s.Y,{hostNode:a.getDOMNode(),data:s.state.model.get("title"),placeholder:y("Enter a post title…"),multiline:false});s.titleEditor.addDataChangeHandler(function(e){s.set("dirty",true);s.state.model.set("title",e,t)})}var i=e.one('.sqs-layout[data-type="item"]');if(i){var n=e.one('.sqs-layout[data-type="promoted-block"]');n&&n.hide();s.bodyEditor=new w(s.Y,{hostNode:i.getDOMNode(),pageLayout:s.revertPageLayout(),startupBlockId:s.state.startupBlockId});s.bodyEditor.addDirtyLayoutDataHandler(function(e){if(e.editorUid)return;s.set("dirty",true);s.state.model.set("body",{layout:s.bodyEditor.pageLayout.toJSON()},t)})}if(!s.afterModelChangeHandler&&s.state.model){s.afterModelChangeHandler=s.state.model.after("change",s.afterModelChange,(0,f.default)(s),t);s.registerYUIEventListener(s.afterModelChangeHandler)}});s.isItemView=Boolean(s.preview.window.Static.SQUARESPACE_CONTEXT.itemId);s.addAfterChangeHandler("editable",s.afterEditableChange);s.registerYUIEventListener(s.state.rootNode.delegate("dblclick",s.handleDblClick,".sqs-block",(0,f.default)(s)));return s}(0,n.default)(p,[{key:"afterEditableChange",value:function e(t){this.syncScroll(t);this.setLayoutNodeHeight(t);this.syncEditor();this.syncEditorOverlay();t&&this.set("startupBlockId",null)}},{key:"handleDblClick",value:function e(t){t.halt();if(!this.state.visible||this.state.editable)return;var a=t.target;var i=a.hasClass(".sqs-block")?a:a.ancestor(".sqs-block");i&&this.set("startupBlockId",i.getAttribute("id"));this.requestEditFlowEntrance()}},{key:"getOverlayEditorAlignPoint",value:function e(){return c.TOP_RIGHT}},{key:"getActionList",value:function e(){var i=this;return[{name:"edit",label:y("Edit"),handleClick:function e(){I.annotationClickItem("item-edit",i.state.trackingIdentifier);var t=i.state.model.get("collectionId");var a=D.getCollection(t);N(a)&&L.trackClickEditProduct("cms-page-preview");i.handleEditClick()}}]}},{key:"getClassificationLabel",value:function e(){return this.state.strings.label}},{key:"requestEditFlowEntrance",value:function e(){this.handleEditClick()}},{key:"handleEditClick",value:function e(){var t=this;var a=this.state,i=a.collection,n=a.model;if(i.get("isDemoCollection")){i.cloneToNewCollectionWithItem(n.get("id"),{silent:true}).then(function(e){t.props.registerActionOnNextLoad({action:"enterPostEditFlow",options:{}});A.setUrl(e.itemFullUrl)});return}this.loadContentItem().then(this.editItem)}},{key:"hasNodesForFrontendEditing",value:function e(){var t=this.state.rootNode;var a=t.all('[data-content-field="title"]');var i=a.size()>0;var n=t.all('.sqs-layout[data-type="item"]');var s=n.size()>0;if(this.isItemView)return s;if(!this.isItemView)return i&&s;return false}},{key:"afterModelChange",value:function e(t,a){if(t.editorUid===a.editorUid||t.changed.active)return;t.changed.title&&this.titleEditor&&this.titleEditor.setData(t.changed.title.newVal,{silent:true});t.changed.body&&t.changed.body.newVal.layout&&this.bodyEditor&&this.bodyEditor.pageLayout.setAttrs(t.changed.body.newVal.layout,{editorUid:t.editorUid||a.editorUid,forceRefresh:!!t.editorUid});this.set("dirty",true)}},{key:"previewLayout",value:function e(t){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var i=this.state.rootNode.one('.sqs-layout[data-type="item"]');a.pluginLayoutBuilder(i,t);a.destroyLayoutBuilder(i)}}]);return p}(u(d));e.exports=g},12367:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=i(a(8));var n=i(a(9));var s=i(a(268));var r=i(a(10));var o=i(a(11));var l=i(a(7));var g=i(a(67));var p=i(a(722));var h=a(24);var f=i(a(1030));var m=i(a(708));var v=i(a(3476));var b=a(515);var c=i(a(11621));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var d=function(e){(0,r.default)(d,e);var c=y(d);function d(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,u.default)(this,d);var o={childAnnotationControllers:[],shimmySelector:'[data-collection-id="'.concat(s.get("id"),'"]'),showAddItemButton:false,strings:{label:(0,h.t)("Index"),edit:(0,h.t)("Edit")}};var l=(0,p.default)({},o,r,{rootNode:i,overlayRootNode:n,collection:s});a=c.call(this,e,l);a.attachHashChangeListener();a.syncChildCollectionAnnotationControllers();a.renderPlaceholder();return a}(0,n.default)(d,[{key:"destroy",value:function e(){if(this.hasPlaceholder()){this.placeholder.remove();this.placeholder.destroy();this.placeholder=null}if(this.hashChangeEvt){this.hashChangeEvt.detach();this.hashChangeEvt=null}(0,s.default)((0,l.default)(d.prototype),"destroy",this).call(this)}},{key:"attachHashChangeListener",value:function e(){var t=this;this.hashChangeEvt=this.Y.one(this.preview.window).on("hashchange",function(e){t.evaluateCollectionFromHash(e.newHash)});this.evaluateCollectionFromHash(this.preview.window.location.hash)}},{key:"_getCollectionByHash",value:function e(a,i){var n=this;this.Y.Squarespace.ContentCollectionCache.toArray().find(function(e){var t=n.Y.Squarespace.Lang.sub(a,{collection:e.toJSON()});return t===i})}},{key:"evaluateCollectionFromHash",value:function e(t){if(0===t.length)return;var a=this.state.collection.getTemplateConfiguration();var i=this.state.collection.getTemplateConfiguration().get("index");var n=a.get("indexCollectionHashUrlTemplate");if(!i||!n||!(0,f.default)(n))return;t=t.startsWith("#")?t:"#".concat(t);var s=this._getCollectionByHash(n,t);!s&&this.hasFoundCollectionsBefore?s=this.state.collection:s&&!this.hasFoundCollectionsBefore&&(this.hasFoundCollectionsBefore=true);if(!s)return;s.load();this.navigateToCollection({},s)}},{key:"renderPlaceholder",value:function e(){if(this.isEmptyIndex()&&0===this.state.rootNode.get("innerText").trim().length){this.placeholder=this.getPlaceHolder();this.state.rootNode.appendChild(this.placeholder);this.initializeEmptyIndex()}}},{key:"initializeEmptyIndex",value:function e(){}},{key:"isEmptyIndex",value:function e(){if(!this.state.collection)return false;var t=this.state.collection.get("id");var a=this.Y.Squarespace.Singletons.TemplateNavigationList;var i=a.getItemByCollectionId(t);if(!i)return false;var n=i.get("children");return n&&0===n.size()}},{key:"getPlaceHolder",value:function e(){return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><span>'+(0,h.t)("Empty Index Page")+"</span></div>")}},{key:"hasPlaceholder",value:function e(){return!!this.placeholder}},{key:"syncChildCollectionAnnotationControllers",value:function e(t,a){var i=this.state.childAnnotationControllers,n=void 0===i?[]:i;var s=[];n.forEach(function(e){!e.state.destroyed&&e.state.rootNode.inDoc()||s.push(e)});while(0!==s.length){var r=s.shift();this.props.removeAnnotationController(r);n.remove(r)}var o=this.getChildAnnotationControllerWrapperNodes(t);if(!o||this.isEmptyIndex())return;o.each(this.ensureInitializedECForNode.bind(this));a&&a()}},{key:"getAcForNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;return i.find(function(e){return e.state.rootNode===t})}},{key:"ensureInitializedECForNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;var n=this.getAcForNode(t);if(!n){n=this.props.initializeAnnotationControllerForNode(t);if(!n)return;i.push(n)}var s=this.props.isNodeVisible(t,true);n.set("visible",s)}},{key:"getChildAnnotationControllerWrapperNodes",value:function e(t){var a=this;if(!this.Y.config)return;if(t){var i=this.Y.all('[data-dynamic-href="'.concat(t,'"],[data-url="').concat(t,'"]'));return i}var n=this.state.rootNode.all('[data-collection-id],.sqs-layout[data-type="page"]');return n.filter(function(e){if(a.Y.one(e).one('.sqs-layout[data-type="page"]'))return false;return true})}},{key:"navigateToCollection",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.collection;var i=a?a.get("id"):"";var n=this.Y.Squarespace.Singletons.Location;var s="pages";this.props.contentModeControllerSet("contextCollection",a);n.getPanelPath()[0]!==s&&n.go(s,t);this.syncChildCollectionAnnotationControllers();this.ensureCollectionIsInView(i)}},{key:"handleAddContentRequest",value:function e(){return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,h.t)("Not Available Yet"),"strings.message":(0,h.t)("But it will be super cool when its available.")}).show()}},{key:"getActionList",value:function e(){if(!this.isEmptyIndex()){var t=this.getMainImageToggleAction();var a=this.getContainedMetaFields();if(!(0,g.default)(t)&&(this.state.showEditButton||0===a.size()))return[]}return(0,s.default)((0,l.default)(d.prototype),"getActionList",this).call(this)}},{key:"getAnnotationControllerForCollectionId",value:function e(a){var t=this.state.childAnnotationControllers,i=void 0===t?[]:t;return i.find(function(e){if(!e.state.visible)return;var t=e.state.collection;if(!t)return false;return t.get("id")===a})}},{key:"cleanupArtifacts",value:function e(){var t=this.preview.window.ACTIVE_LIGHTBOX;t&&t.hideAndDestroy()}},{key:"awaitContentChange",value:function e(t,a){var i;var n=[];var s=[];var r=new MutationObserver(function(e){e.forEach(function(e){i&&clearTimeout(i);s.push(e);i=setTimeout(function(){clearTimeout(i);r.disconnect();a(s)},200)})});for(var o=0;o<t.length;o++)if(!t[o].children.length||!t[o].classList.contains("sqs-dynamic-data-ready")&&!t[o].querySelectorAll(".sqs-dynamic-data-ready").length){r.observe(t[o],{childList:true,subtree:true});n.push(t[o])}n.length||r.disconnect()}},{key:"ensureCollectionIsInView",value:function e(t){var a=this;this.syncChildCollectionAnnotationControllers();this.cleanupArtifacts();var i=this.getAnnotationControllerForCollectionId(t);if(!i){if(v.default.GRID===this.state.collection.getTemplateConfiguration().get("indexType")){var n=this.Y.Squarespace.ContentCollectionCache.getById(t).get("urlId");var s=this.getChildAnnotationControllerWrapperNodes("/".concat(n,"/"));if(!s)return;var r=this.props.stack.add(function(){});this.awaitContentChange(s.getDOMNodes(),function(){return a.syncChildCollectionAnnotationControllers("/".concat(n,"/"),r)})}return}var o=i.state.rootNode;var l=o.get("region");var c=l.top;var d=10*b.GRID_PX;var u=c-d;this.Y.one((0,m.default)(this.preview.document)).anim({scroll:[0,u]}).run()}}]);return d}(c.default);t.default=d;e.exports=t.default},12368:function(e,t,a){"use strict";function i(e,t,a){var i=e.Squarespace.Navigation.ListUtils.getParentCollection(a);return a.on(a.get("id")+"|destroy",function(){i&&e.Squarespace.Singletons.Location.pointFrameToCollection(i,true);t.replace({pathname:"/pages",state:{frameUrl:"/"}})})}e.exports=i},12369:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(44));var r=i(a(52));var o=i(a(8));var l=i(a(9));var c=i(a(2));var d=i(a(21));var u=i(a(90));var m=i(a(100));var g=i(a(0));var p=i(a(60));var n=i(a(1));var h=a(24);var f=a(2877);var v=a(729);var b=i(a(1246));var y=a(53);var S=a(32);var q=i(a(114));var _=i(a(87));var C=i(a(13002));var E=i(a(13003));var k=i(a(11570));var w=i(a(2378));function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(Object(a),true).forEach(function(e){(0,c.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var A="sqs-mobile-web-catalog-visible";var x=(0,v.createLogger)("catalog","#357");var L=100;var D=516;var N=308;var O=[k.default.TEAM,k.default.MENU,w.default.PRODUCTS,w.default.MENU,w.default.TEXT,w.default.SOCIAL,w.default.CALENDAR,w.default.CHART,w.default.FAQS,w.default.LOGO_WALL,w.default.MUSIC];var R=function(){function n(e){var a=this;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,n);(0,c.default)(this,"setLoadedCategories",function(e){if(!a.selectedCategory){x("no selected category");return}var t=a.containerNode.querySelector("[class*='sqs-categories-disabled']");t.classList.remove("sqs-categories-disabled");a.selectedCategoryEntries=a.options.getEntriesForCategory(a.selectedCategory);a.categories=e;a.renderCatalog()});(0,c.default)(this,"registerImageLoadCallback",function(e,t){a.imageLoadHandlers=a.imageLoadHandlers||{};a.imageLoadHandlers[e]=t});(0,c.default)(this,"onImageLoad",function(e){var t=e.split("?")[0];a.imageLoadHandlers[t]&&a.imageLoadHandlers[t]()});false;this.rootNode=e;this.options=t;this.timeouts=[];this.refreshAllEntryCatalogNodesListener=null;this.isSingleColumnMode=false;this.leftList=[];this.rightList=[];this.centerList=[];this.selectedCategory=this.getFirstSelectedCategory();this.escManagerTarget={close:t.onCloseCatalog||d.default,ignoreBodyClicks:true};this.landscapeAttributionMessage=(0,h.t)("Landscape photography shot at Aro Ha");this.genericAttributionMessage=(0,h.t)("Images shot at Aro Ha");this.createCatalog()}(0,l.default)(n,[{key:"getFirstSelectedCategory",value:function e(){return this.options.selectedCategory||this.options.categoryOrder[0]}},{key:"createCatalog",value:function e(){var t=this.rootNode.ownerDocument.createElement("div");t.classList.add("sqs-catalog");t.classList.add(f.DISABLE_DRAG_SELECTION_CLASSNAME);t.setAttribute("data-test","catalog");t.innerHTML='\n    <div class="sqs-catalog-scrim">\n      <div class="sqs-catalog-container">\n        <div class="sqs-catalog-content">\n          <div class="sqs-catalog-sidebar .sqs-categories-disabled">\n            <div class="sqs-catalog-close-container">\n              <button class="sqs-catalog-close">'.concat((0,h.t)("Close"),'</button>\n            </div>\n            <h1 class="sqs-catalog-title">').concat(this.options.title,'</h1>\n            <div class="sqs-catalog-categories-container"></div>\n          </div>\n          <div class="sqs-catalog-item-list">\n            <div class="sqs-catalog-back">\n              <span>\n                <svg\n                  width="22"\n                  height="22"\n                  viewBox="0 0 22 22"\n                  fill="none"\n                  xmlns="http://www.w3.org/2000/svg"\n                >\n                  <rect\n                    fill="black"\n                    width="0"\n                    height="2"\n                    x="7"\n                    y="10"\n                  />\n                  <path\n                    fill="black"\n                    d="M15.75 4H13L6 11L13 18H15.75L8.75 11L15.75 4Z"\n                  />\n                </svg>\n              </span>\n              <span>').concat((0,h.t)("Back"),"</span>\n            </div>\n            ").concat(this.getCatalogListHtml(),"\n          </div>\n        </div>\n      </div>\n    </div>\n    ");this.parentContainerNode=t;this.containerNode=t.querySelector(".sqs-catalog-content");this.bindCatalog()}},{key:"getCatalog",value:function e(){return this.parentContainerNode}},{key:"isReactItems",value:function e(){return q.default.isFeatureEnabled(_.default.SEVEN_ONE_CATALOG_PERFORMANCE_IMPROVEMENTS)}},{key:"getCatalogListHtml",value:function e(){var t=this.isReactItems();if(t)return"";return'<div class="catalog-item-two-column-left-list catalog-list-column"></div>\n      <div class="catalog-item-two-column-right-list catalog-list-column"></div>\n      <div class="catalog-item-one-column-center-list catalog-list-column"></div>'}},{key:"renderCategories",value:function e(t){var n=this;var s=t.reduce(function(e,t){return I({},e,(0,c.default)({},t.category,t))},{});return this.options.categoryOrder.filter(function(e){return"-"===e||!!s[e]}).map(function(e){if("-"===e)return'<li class="sqs-catalog-divider"></li>';var t=s[e];var a=t.active?"active-link":"";var i=n.options.categoryMessageBundle[t.category];return"\n            <li>\n              ".concat(n.buildSidebarItem({category:t.category,className:a,text:i}),"\n            </li>\n          ")}).join("")}},{key:"bindCatalog",value:function e(){var a=this;var i=this.containerNode,t=this.parentContainerNode;i.querySelector(".sqs-catalog-close").addEventListener("click",function(e){e.stopPropagation();a.options.onCloseCatalog()});i.querySelector(".sqs-catalog-back").addEventListener("click",function(e){e.stopPropagation();i.classList.remove(A)});t.querySelector(".sqs-catalog-scrim").addEventListener("click",function(e){if(e.target.classList.contains("sqs-catalog-container")){e.stopPropagation();a.options.onCloseCatalog()}});i.querySelector(".sqs-catalog-item-list").addEventListener("click",function(e){var t=a.getSelectedOption(e.target);if(!t)return;a.options.onSelectItem(t,a.selectedCategory);i.classList.remove(A)});i.addEventListener("load",function(e){if("IMG"!==e.target.tagName)return;a.onImageLoad(e.target.src)},true);if(!this.escTargetAdded){window.Y.Squarespace.EscManager.addTarget(this.escManagerTarget);this.escTargetAdded=true}}},{key:"bindCatalogLinks",value:function(){var e=(0,r.default)(s.default.mark(function e(){var a=this;var i,n;return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=this.containerNode;n=Array.from(i.querySelectorAll(".sqs-catalog-link"));n.forEach(function(e){e.addEventListener("click",function(e){a.handleCategoryClick(e.target);i.classList.add(A)})});case 3:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSelectedOption",value:function e(t){var a;a=t.classList.contains("sqs-page-title")?t.parentElement.querySelector(this.options.entrySelector):t.closest(this.options.entrySelector);return a}},{key:"renderCatalog",value:function e(){var t=this.options.sidebarConfig;if(t&&t[this.selectedCategory]){(this.isMobileWeb()||this.isTabletWeb())&&this.containerNode.classList.add("single-view");this.renderSingleCategorySidebar(this.selectedCategory,t[this.selectedCategory])}else{(this.isMobileWeb()||this.isTabletWeb())&&this.containerNode.classList.remove("single-view");this.renderCategorySidebar(this.categories,this.selectedCategory)}this.renderCategory(this.selectedCategory);this.registerTimer(this.shouldSwitchColumnMode.bind(this),400)}},{key:"handleRefreshAllEntryCatalogNodes",value:function e(){var t=this;var a=this.getAllEntryNodes();if(!a)return;this.shouldSwitchColumnMode();a.forEach(function(e){t.handleRefreshEntryCatalogNode(e)})}},{key:"handleRefreshEntryCatalogNode",value:function e(t){this.scaleEntry(t)}},{key:"scaleEntry",value:function e(t){var a=this;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)return;if(i>3){console.warn("Failed to scale! Send to sentry!");return}var n=this.containerNode.ownerDocument.querySelector(".sqs-catalog-item-list");var s=t.closest('[class*="catalog-list-column"]');var r=s&&s.classList;var o=2;r&&r.contains("catalog-item-one-column-center-list")&&(o=1);var l=n&&n.offsetWidth;var c=t.offsetWidth;if(!c){x("No entry width to scale from entry");this.registerTimer(function(){return a.scaleEntry(t,i+1)},50+50*i);return}var d=t.offsetHeight;var u=Math.max(d,L)/c;var g=66;var p=33;var h=l-(g+p);var f=h/o;f<=N&&(f=N);f>D&&(f=D);var m=f/c;var v=u*f;t.parentNode.style.height="".concat(v,"px");t.parentNode.style.width="".concat(f,"px");t.style.transform="scale(".concat(m,")");t.style.transformOrigin="0% 0%";Array.from(t.children).forEach(function(e){e.style.pointerEvents="none"});t.querySelector(".sqs-block-map")&&this.registerTimer(function(){t.style.transform="";t.style.width="";t.style.transformOrigin="";a.registerTimer(function(){t.style.width="100vw";a.registerTimer(function(){t.style.transform="scale(".concat(m,")");t.style.transformOrigin="0% 0%"},10)},100)},2e3);this.registerTimer(function(){return a.updateEntryWrapperAfterScale(t)},200)}},{key:"handleCategoryClick",value:function e(t){var a=t.closest("[data-category]");if(!a){x("cannot find selected category link");return}var i=a.getAttribute("data-category");this.options.onCategoryClick(i);var n=this.options.buttons.find(function(e){var t=e.id;return t===i});if(n){n.onClick();return}this.selectCategory(i)}},{key:"selectCategory",value:function e(t){if(this.selectedCategory===t){x("category has been selected already",t);return}this.selectedCategory=t||this.getFirstSelectedCategory();this.selectedCategoryEntries=this.options.getEntriesForCategory(this.selectedCategory);var a=this.containerNode.querySelector(".sqs-catalog-item-list");a&&(a.scrollTop=0);this.renderCatalog()}},{key:"renderLoadingSpinner",value:function e(){var t=this.containerNode.querySelector(".sqs-catalog-loading-spinner");if(t)return;var a=this.containerNode.ownerDocument.createElement("div");a.classList.add("sqs-catalog-loading-spinner","size-large","color-dark","variant-circle");this.containerNode.appendChild(a)}},{key:"renderCategory",value:function e(){if((0,u.default)(this.selectedCategoryEntries)){this.renderLoadingSpinner();return}var t=this.containerNode.querySelector(".sqs-catalog-loading-spinner");t&&this.containerNode.removeChild(t);var a=!O.includes(this.selectedCategory);var i=this.selectedCategoryEntries;var n=[];var s=[];i.forEach(function(e,t){t%2===0?n.push(e):s.push(e)});this.centerList=i;this.leftList=n;this.rightList=s;var r=this.shouldBeSingleColumnMode();this.renderCategoryLists(r,a)}},{key:"getListItemHtml",value:function e(t,a){var i=a||this.selectedCategory;return this.options.shouldRenderEntryTitles?n.getPageEntryWrapper(t,i):n.getSectionEntryWrapper(t)}},{key:"getAllEntryNodes",value:function e(){return Array.from(this.containerNode.querySelectorAll(this.options.entrySelector))}},{key:"buildSidebarItem",value:function e(t){var a=t.category,i=t.className,n=t.text;return'\n      <a data-category="'.concat(a,'" data-test="category-').concat(a,'" class="sqs-catalog-link ').concat(i,'">\n        <span class="sqs-catalog-link-text">').concat(n,'<span class="sqs-add-blank"></span></span>\n      </a>\n    ')}},{key:"renderCategorySidebar",value:function e(t,a){var n=this;var i=this.containerNode.querySelector("[class*='sqs-catalog-categories-container']");var s=this.containerNode.querySelector("[class*='sqs-catalog-title']");s.textContent=this.options.title;var r=t.map(function(e){var t=e===a;return{active:t,category:e}});var o=this.options.buttons.map(function(e,t){var a=e.id,i=e.label;return n.buildSidebarItem({category:a,className:"sqs-button-category",text:i})}).join("");var l="\n    ".concat(o,'\n    <ul class="sqs-category-list">\n    ').concat(this.renderCategories(r),'\n    </ul>\n    <div class="sqs-catalog-divider"></div>\n    ');i.innerHTML=l;this.bindCatalogLinks()}},{key:"renderSingleCategorySidebar",value:function e(t,a){var i=this.containerNode.querySelector("[class*='sqs-catalog-title']");i.textContent=this.options.title;a&&a.title&&(i.textContent=a.title);var n='<p class="sqs-catalog-help-text-title">'.concat(a.helpTextTitle,"</p>");var s='<p class="sqs-catalog-help-text">'.concat(a.helpText,"</p>");var r="\n    ".concat(n,"\n    ").concat(s,"\n    ");var o=this.containerNode.querySelector("[class*='sqs-catalog-categories-container']");o.innerHTML=r;this.bindCatalogLinks()}},{key:"measureCatalogRenderTime",value:function e(t){var i=this;var a=(t.match(/data-src="([^"]+)"/g)||[]).map(function(e){return e.substring(10,e.length-1)});var n=a.map(function(a){return new Promise(function(e,t){i.registerImageLoadCallback(a,e)})});Promise.all(n).then(function(){i.options.onCategoryLoaded&&i.options.onCategoryLoaded()}).catch(function(e){console.error("Image failed to load",e)})}},{key:"renderReactCategoryLists",value:function e(t){var a=this.containerNode.querySelector(".sqs-catalog-item-list");if(t){var i={items:this.centerList};var n=g.default.createElement(C.default,i);p.default.render(n,a)}else{var s={itemListOne:this.leftList,itemListTwo:this.rightList};var r=g.default.createElement(E.default,s);p.default.render(r,a)}}},{key:"renderCategoryLists",value:function e(t,a){var i=this;this.deregisterTimers();var n=this.containerNode;var s=n.querySelector(".sqs-catalog-photo-attribution");var r=this.selectedCategory===k.default.STORE?this.landscapeAttributionMessage:this.genericAttributionMessage;if(s)if(a){s.classList.add("visible");s.innerHTML=r}else s.classList.remove("visible");else{var o=document.createElement("span");o.classList.add("sqs-catalog-photo-attribution");n.appendChild(o);o.innerHTML=r}var l=this.isReactItems();if(l)this.renderReactCategoryLists(t);else{var c=n.querySelector(".sqs-catalog-item-list .catalog-item-two-column-left-list");var d=n.querySelector(".sqs-catalog-item-list .catalog-item-two-column-right-list");var u=n.querySelector(".sqs-catalog-item-list .catalog-item-one-column-center-list");u.innerHTML="";c.innerHTML="";d.innerHTML="";if(t){var g=this.centerList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");this.measureCatalogRenderTime(g);u.innerHTML=g}else{var p=this.leftList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");var h=this.rightList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");this.measureCatalogRenderTime(p+h);c.innerHTML=p;d.innerHTML=h}}var f=this.getAllEntryNodes();f.forEach(function(e){e.style.width="100vw"});this.refreshAllEntryCatalogNodesListener||(this.refreshAllEntryCatalogNodesListener=(0,m.default)(function(){if(!f)return;i.handleRefreshAllEntryCatalogNodes()},50));window.addEventListener("resize",this.refreshAllEntryCatalogNodesListener);if(this.parentContainerNode&&this.parentContainerNode.classList.contains("visible")){f.map(function(e){i.handleRefreshEntryCatalogNode(e)});this.isMobileWeb()&&b.default.setFocusedSectionId(null)}else this.registerTimer(function(){return i.renderCategoryLists(i.shouldBeSingleColumnMode(),a)},100);this.options.initializeItems(n);this.isSingleColumnMode=t}},{key:"isMobileWeb",value:function e(){var t=(0,S.getBreakpoint)(y.breakpoints),a=t.name;return"mobile-0"===a}},{key:"isTabletWeb",value:function e(){var t=(0,S.getBreakpoint)(y.breakpoints),a=t.name;return"tablet-0"===a}},{key:"shouldBeSingleColumnMode",value:function e(){var t=window.top.innerWidth-132;return t<1025}},{key:"shouldSwitchColumnMode",value:function e(){var t=!O.includes(this.selectedCategory);var a=this.shouldBeSingleColumnMode();if(this.isSingleColumnMode&&!a){this.renderCategoryLists(false,t);return}!this.isSingleColumnMode&&a&&this.renderCategoryLists(true,t)}},{key:"updateEntryWrapperAfterScale",value:function e(t){if(!t.ownerDocument.defaultView)return;var a=t.getBoundingClientRect();if(a.height>0&&a.width>0){t.parentNode.style.height="".concat(a.height,"px");t.parentNode.style.width="".concat(a.width,"px")}}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(n)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"cleanUp",value:function e(){this.deregisterTimers();if(this.escTargetAdded){window.Y.Squarespace.EscManager.removeTarget(this.escManagerTarget);this.escTargetAdded=false}window.removeEventListener("resize",this.refreshAllEntryCatalogNodesListener);if(this.refreshAllEntryCatalogNodesListener){this.refreshAllEntryCatalogNodesListener.cancel();this.refreshAllEntryCatalogNodesListener=null}}}]);return n}();t.default=R;(0,c.default)(R,"propTypes",{buttons:n.default.arrayOf(n.default.shape({id:n.default.string.isRequired,label:n.default.string.isRequired,onClick:n.default.func.isRequired})),categoryOrder:n.default.arrayOf(n.default.string),categoryMessageBundle:n.default.object,entrySelector:n.default.string.isRequired,getEntriesForCategory:n.default.func.isRequired,initializeItems:n.default.func.isRequired,onCategoryLoaded:n.default.func,onCloseCatalog:n.default.func.isRequired,onSelectItem:n.default.func.isRequired,sidebarConfig:n.default.object,shouldRenderEntryTitles:n.default.bool,title:n.default.string.isRequired,onCategoryClick:n.default.func.isRequired});(0,c.default)(R,"getSectionEntryWrapper",function(e){return'<div class="sqs-section item-hover-wrapper" data-test="catalog-item">\n        '.concat(e,"\n      </div>")});(0,c.default)(R,"getPageEntryWrapper",function(e,t){return'<div class="item-hover-wrapper" data-test="catalog-item">\n          '.concat(e,'\n        <div class="sqs-page-title" data-test="page-title">').concat(t,"</div>\n      </div>")});e.exports=t.default},12370:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(0));var s=i(a(1));var r=function e(t){return n.default.createElement("div",{className:"item-hover-wrapper","data-test":"catalog-item"},n.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}}),n.default.createElement("div",{className:"sqs-page-title","data-test":"page-title"},t.title))};r.propTypes={title:s.default.string,html:s.default.string.isRequired};var o=r;t.default=o;e.exports=t.default},12371:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=i(a(12372));var u=i(a(11887));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var p=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return d.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return d.default.loadPreviews(t)}}]);return a}(u.default);var h=c.default.createActions(p);t.default=h;e.exports=t.default},12372:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(452));var s={load:function e(){return n.default.get("/api/section-catalog")},loadPreviews:function e(t){return n.default.post("/api/catalog-preview/sections",t)},loadBlanks:function e(){return n.default.get("/api/catalog-preview/blankSections")}};t.default=s;e.exports=t.default},12373:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.chunkWithMinimum=t.catalogEntryListToGroupingByCategory=t.catalogEntryListToCategories=void 0;var s=i(a(40));var r=i(a(4206));var n=function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;var n=Math.ceil(t.length/a);n=Math.max(n,i);return(0,r.default)(t,n)};t.chunkWithMinimum=n;var o=function e(t){var a=t.map(function(e){return e.taxonomy.categories.map(function(e){var t=e.displayName;return t}).filter(function(e){return void 0!==e})});var i=a.flat();var n=(0,s.default)(new Set(i));return n};t.catalogEntryListToCategories=o;var l=function e(t){var i={};t.forEach(function(a){a.taxonomy.categories.forEach(function(e){var t=e.displayName;i[t]=i[t]||[];i[t].push(a)})});return i};t.catalogEntryListToGroupingByCategory=l},12374:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(2));var o=function(){function a(e){var t=this;(0,n.default)(this,a);(0,r.default)(this,"initializePages",function(e){t.initializePageContent(e);t.initializeTweaks();t.initializeImages(e)});(0,r.default)(this,"initializeSections",function(e){e.querySelectorAll("img").forEach(function(e){e.setAttribute("data-size-adjustment",".25")});t.initializeImages(e);t.initializeSectionContent(e);t.initializeTweaks();t.initializeScripts(e)});this.Y=e}(0,s.default)(a,[{key:"initializePageContent",value:function e(t){t.ownerDocument.defaultView.Squarespace.initializePageContent(this.Y,this.Y.one(t))}},{key:"initializeSectionContent",value:function e(t){t.ownerDocument.defaultView.Squarespace.initializeLayoutBlocks(this.Y,this.Y.one(t))}},{key:"initializeImages",value:function e(t){t.ownerDocument.defaultView.ImageLoader.loadAll({load:true},t)}},{key:"initializeTweaks",value:function e(){this.Y.Global.fire("tweak:change",{config:{},getName:function e(){return"section-store-initialized"},getValue:function e(){return true}})}},{key:"initializeScripts",value:function e(t){var a=this.Y.config.win.top.Static.SQUARESPACE_CONTEXT.templateScriptsRootUrl;t.querySelectorAll('squarespace\\3Ascript,script[src^="'.concat(a,'"]')).forEach(function(e){if(e.hasAttribute("data-injected"))return;var t=e.ownerDocument.createElement("script");t.setAttribute("src",e.getAttribute("src"));t.setAttribute("data-injected",true);e.parentNode.insertBefore(t,e);e.remove()})}},{key:"destroy",value:function e(){this.Y=null}}]);return a}();t.default=o;e.exports=t.default},12375:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HEADER_SECTION_THEME_INDICATOR_KEY=t.SECTION_THEME_INDICATOR_KEY=void 0;var i="section-theme-indicator";t.SECTION_THEME_INDICATOR_KEY=i;var n="header-section-theme-indicator";t.HEADER_SECTION_THEME_INDICATOR_KEY=n},12376:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=l;var n=i(a(87));var s=i(a(114));var r=i(a(1698));var o=i(a(3493));function l(){var e=r.default.getState();var t=o.default.getState(),a=t.isExpanded;if(a)return false;if(!e)return false;if(s.default.isFeatureEnabled(n.default.SEVEN_ONE_THEME_MAPPER_V3)&&e.isColorPanelOpen)return false;if(!e.isColorPanelOpen&&!e.isThemeEditorOpen&&!e.isSectionThemesPanelOpen)return false;if(e.isEditing)return false;return true}e.exports=t.default},12377:function(e,t,a){"use strict";var i=a(4);var n=i(a(54));var s=a(24),r=s.t;var o=a(701);var l=12;var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return{columns:t,rows:[]}};var d=function e(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return{rows:a}};var u=function e(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return{columns:a}};var g=function e(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];if("number"!==typeof t){i.unshift(t);t=l}if(i[0]&&!i[0].type)return{span:t,rows:i};return{span:t,blocks:i}};var p=function e(t,a){return{type:t,value:"object"===(0,n.default)(a)?a:void 0}};var h=function e(t,a){return p(o.MARKDOWN,{html:a,wysiwyg:{source:t,engine:"code",mode:"markdown",isSource:false}})};var f=function e(t){return p(o.HTML,{html:t})};var m=function e(t,a){var i={};t&&"number"===typeof t&&(i.aspectRatio=t);(a||t&&"string"===typeof t)&&Object.assign(i,{description:{html:a||t}});return p(o.IMAGE,i)};var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r("Learn more");return p(o.BUTTON,{buttonSize:t,buttonAlignment:a,buttonText:i})};e.exports={EmptyLayout:c,Layout:d,Row:u,Column:g,Block:p,MarkdownBlock:h,HTMLBlock:f,ImageBlock:m,ButtonBlock:v}},12378:function(e,t,a){"use strict";var i={absolutePositionFromBoundingRect:function e(a,i){i=i||1;return["top","left","width","height"].reduce(function(e,t){e[t]=a[t]*i;return e},{})}};e.exports=i},12379:function(e,t,a){"use strict";var i={isInFlight:false,isInDragMode:false};e.exports=i},12380:function(e,t,a){"use strict";var n={BEFORE_FLIGHT_START:"sqs-stacked-items-before-drag-start",FLIGHT_START:"sqs-stacked-items-drag-start",FLIGHT_MOVE:"sqs-stacked-items-drag",BEFORE_FLIGHT_END:"sqs-stacked-items-before-drag-end",AFTER_FLIGHT_END:"sqs-stacked-items-after-drag-end",DOM_REORDER:"sqs-stacked-items-dom-reorder",BEFORE_FLIGHT_MODE_ENABLED:"sqs-stacked-items:before-flightmode-enabled",FLIGHT_MODE_ENABLED:"sqs-flight-mode-enabled",BEFORE_FLIGHT_MODE_DISABLED:"sqs-stacked-items:before-flightmode-disabled",FLIGHT_MODE_DISABLED:"sqs-flight-mode-disabled"};var i=function e(t,a,i){a.dispatchEvent(new CustomEvent(t,{detail:i}));t!==n.FLIGHT_MOVE&&t!==n.BEFORE_FLIGHT_END&&t!==n.DOM_REORDER||a.dispatchEvent(new Event("scroll"))};e.exports={events:n,dispatch:i}},12381:function(e,t,a){"use strict";var i={pxToNumber:function e(t){return parseFloat(t.replace("px",""))},getInteractionPosition:function e(t,a,i){if(!t||!a||!i){console.log("Missing options");return}i=i.toUpperCase();var n=a+i;var s=t[n];"number"!==typeof s&&t.touches&&t.touches.length&&(s=t.touches[0][n]);return s}};e.exports=i},12382:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var o=a(704);var l=a(643);function c(e){"/"===e[0]&&(e=e.substr(1));"/"===e[e.length-1]&&(e=e.substr(0,e.length-1));return e}function d(e){if(!o(e))return null;if(l(e.urlId))return e;if(!l(e.fullUrl)||e.fullUrl.length<=1)return e;return r({},e,{urlId:c(e.fullUrl)})}e.exports=d},12383:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=i(a(1699));var s=a(4156);var r=a(24);function o(){(0,s.showUpsellConfirmation)({upgradeTitle:(0,r.t)("Page Limit Reached"),upgradeDescription:(0,r.t)("This page can't be enabled because you've exceeded the number of pages allowed in your plan (20). Upgrade to the Business plan for unlimited pages."),destination:n.default.UPGRADE_PLAN})}e.exports=t.default},12384:function(e,t,a){"use strict";var i=a(1);var n=a(0);var s=a(15);var r="sqs-button-vanilla";var o=function e(){return n.createElement("div",{className:"icon"})};var l=function e(t){return n.createElement("div",{className:s(r,t.className),"data-test":t.name,onClick:t.handleClick,title:t.title||t.label},n.createElement("div",{className:r+"-content"},n.createElement("div",{className:"label"},t.label),t.icon&&n.createElement(o,null)))};l.propTypes={className:i.string,handleClick:i.func.isRequired,icon:i.bool,label:i.string.isRequired,title:i.string};e.exports=l},12385:function(e,t,a){"use strict";var s=a(1432);var i=function e(t,a){if(0===t.width&&0===t.height)return null;var i=t.top;[s.BOTTOM_LEFT,s.BOTTOM_CENTER,s.BOTTOM_RIGHT].includes(a)&&(i=t.top+t.height);var n=t.left;[s.TOP_CENTER,s.BOTTOM_CENTER].includes(a)?n=t.left+t.width/2:[s.TOP_RIGHT,s.BOTTOM_RIGHT].includes(a)&&(n=t.left+t.width);return{top:i,left:n}};e.exports=i},12386:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={COLLECTION:"COLLECTION",ITEM:"ITEM"};t.default=i;e.exports=t.default},12387:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=i(a(13069));var u=i(a(11887));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var p=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return d.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return d.default.loadPreviews(t)}}]);return a}(u.default);var h=c.default.createActions(p);t.default=h;e.exports=t.default},12388:function(e,t,a){"use strict";var i={INCOMING:{LEFT:"incomingLeft",RIGHT:"incomingRight"},OUTGOING:{LEFT:"outgoingLeft",RIGHT:"outgoingRight"},INCOMING_PANEL:"incomingPanel"};e.exports=i},12390:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".TotalSummary-container-1Udwh {\n  border-top: 1px solid #e4e4e4;\n  padding: 11px 0;\n}\n.TotalSummary-creditDescription-PEeN1, .TotalSummary-taxDescription-15qnm, .TotalSummary-discountDescription-3WmyD, .TotalSummary-totalDescription-Qy6xr {\n  clear: both;\n  float: left;\n  width: calc(100% - 66px);\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n  white-space: nowrap;\n}\n.TotalSummary-creditAmount-2_a8b, .TotalSummary-taxAmount-1Bi-D, .TotalSummary-discountAmount-3nR8_, .TotalSummary-totalAmount-1GuCn {\n  width: 66px;\n  float: right;\n  text-align: right;\n  color: #797979;\n}\n.TotalSummary-totalDescription-Qy6xr, .TotalSummary-totalAmount-1GuCn {\n  font-weight: 500;\n  text-transform: uppercase;\n}\n.TotalSummary-clear-rKid2 {\n  clear: both;\n}\n.TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh {\n  border-top: none;\n  padding: 22px 0;\n}\n.TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-creditDescription-PEeN1, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-taxDescription-15qnm, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-discountDescription-3WmyD, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-creditAmount-2_a8b, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-taxAmount-1Bi-D, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-discountAmount-3nR8_ {\n  color: #a1a1a1;\n  padding-bottom: 11px;\n}\n.TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-totalDescription-Qy6xr, .TotalSummary-midnight-I1Npk.TotalSummary-container-1Udwh .TotalSummary-totalAmount-1GuCn {\n  color: #313131;\n  font-size: 13px;\n  font-weight: 400;\n  text-transform: none;\n}\n",""]);t.locals={container:"TotalSummary-container-1Udwh",creditDescription:"TotalSummary-creditDescription-PEeN1",taxDescription:"TotalSummary-taxDescription-15qnm",discountDescription:"TotalSummary-discountDescription-3WmyD",totalDescription:"TotalSummary-totalDescription-Qy6xr",creditAmount:"TotalSummary-creditAmount-2_a8b",taxAmount:"TotalSummary-taxAmount-1Bi-D",discountAmount:"TotalSummary-discountAmount-3nR8_",totalAmount:"TotalSummary-totalAmount-1GuCn",clear:"TotalSummary-clear-rKid2",midnight:"TotalSummary-midnight-I1Npk"}},12983:function(e,t,a){"use strict";var i=a(4);var s=i(a(8));var r=i(a(9));var o=i(a(268));var l=i(a(10));var c=i(a(11));var d=i(a(7));function u(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var n=a(24),g=n.t;var p=a(11883);var h=a(1089);var f=function(e){(0,l.default)(n,e);var i=u(n);function n(e,t){var a=t.rootNode;(0,s.default)(this,n);return i.call(this,e,{rootNode:a})}(0,r.default)(n,[{key:"loadModel",value:function e(t){var a=this;var i=this.state.rootNode.getDOMNode();var n=Array.from(i.classList).find(function(e){return e.startsWith("columns-")}).substr("columns-".length);n=parseInt(n,10);this.set("columns",n);var s=new this.Y.Squarespace.Models.BlockField({widgetName:i.id,columns:n});s.load(function(){a.set("model",s);var e=a.getPageLayout();e.get("columns")!==a.state.columns&&a.Y.SQS.LayoutEngine.PageLayoutTools.convertLayoutToNewColumnCount(e,a.state.columns);t()})}},{key:"getPageLayout",value:function e(){return this.state.model.get("data").get("layout")}},{key:"getBlockFieldId",value:function e(){return this.state.rootNode.getAttribute("id")}},{key:"getClassificationLabel",value:function e(){var t=(0,o.default)((0,d.default)(n.prototype),"getClassificationLabel",this).call(this);if(!t)return g("Region #")+this.getBlockFieldId();return t}},{key:"trackEditClick",value:function e(){h.annotationClick("block-field-edit",this.getClassificationLabel())}}]);return n}(p);e.exports=f},12991:function(e,t,a){"use strict";var i=a(4);var u=i(a(8));var n=i(a(9));var s=i(a(268));var r=i(a(10));var o=i(a(11));var l=i(a(7));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var c=a(24),p=c.t;var h=a(722);var f=a(1030);var d=a(11621);var m=function(e){(0,r.default)(d,e);var c=g(d);function d(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,u.default)(this,d);var r={strings:{label:p("Blog"),nestedItemLabel:p("Post"),edit:p("Manage Posts")},trackingIdentifier:"post",shimmySelector:".sqs-content-manager-blog"};var o=h({},r,{rootNode:i,overlayRootNode:n,collection:s});a=c.call(this,e,o);a.bindNestedContentItems();var l=a.preview.window.Static.SQUARESPACE_CONTEXT.itemId;if(f(l)){a.hasItemId=true;a.set("showEditButton",true)}return a}(0,n.default)(d,[{key:"getActionList",value:function e(){if(this.hasItemId)return[];return(0,s.default)((0,l.default)(d.prototype),"getActionList",this).call(this)}}]);return d}(d);e.exports=m},12992:function(e,t,a){"use strict";var i=a(4);var s=i(a(8));var r=i(a(9));var o=i(a(10));var l=i(a(11));var c=i(a(7));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var n=a(24),u=n.t;var g=a(11538);var p=a(1089);var h=function(e){(0,o.default)(n,e);var i=d(n);function n(e,t){var a=t.rootNode;(0,s.default)(this,n);return i.call(this,e,{rootNode:a})}(0,r.default)(n,[{key:"getClassificationLabel",value:function e(){return u("Business Information")}},{key:"getActionList",value:function e(){return[{name:"edit",label:u("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){p.annotationClick("business-information");this.Y.Squarespace.Singletons.Location.go("/config/settings/business-information")}}]);return n}(g);e.exports=h},12993:function(e,t,a){"use strict";var i=a(4);var d=i(a(8));var n=i(a(10));var s=i(a(11));var r=i(a(7));function o(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,r.default)(i),t;if(n()){var a=(0,r.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var l=a(24),u=l.t;var g=a(722);var c=a(11621);var p=function(e){(0,n.default)(c,e);var l=o(c);function c(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,d.default)(this,c);var r={strings:{label:u("Events"),nestedItemLabel:u("Event"),edit:u("Manage Events")},trackingIdentifier:"event",shimmySelector:".sqs-content-manager-calendar"};var o=g({},r,{rootNode:i,overlayRootNode:n,collection:s});a=l.call(this,e,o);a.bindNestedContentItems();return a}return c}(c);e.exports=p},12994:function(e,t,a){"use strict";var i=a(4);var s=i(a(8));var r=i(a(9));var o=i(a(10));var l=i(a(11));var c=i(a(7));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var n=a(24),u=n.t;var g=a(2713);var p=a(1940),h=p.EDITOR,f=p.STORE_MANAGER;var m=a(11538);var v=a(1089);var b=function(e){(0,o.default)(n,e);var i=d(n);function n(e,t){var a=t.rootNode;(0,s.default)(this,n);return i.call(this,e,{rootNode:a})}(0,r.default)(n,[{key:"hasPermission",value:function e(){return!g.hasRole(h)&&!g.hasRole(f)}},{key:"getClassificationLabel",value:function e(){return u("Social Links")}},{key:"getActionList",value:function e(){return[{name:"edit",label:u("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){v.annotationClick("social-links");this.Y.Squarespace.Singletons.Location.go("/config/settings/social-links",{shimmy:".sqs-social-account-settings"})}}]);return n}(m);e.exports=b},12995:function(e,t,a){"use strict";var i=a(4);var c=i(a(8));var n=i(a(10));var s=i(a(11));var r=i(a(7));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,r.default)(i),t;if(n()){var a=(0,r.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var o=a(24),u=o.t;var g=a(722);var l=a(11621);var p=function(e){(0,n.default)(l,e);var o=d(l);function l(e,t){var a=t.rootNode,i=t.overlayRootNode,n=t.collection;(0,c.default)(this,l);var s={strings:{label:u("Gallery"),edit:u("Edit")},shimmySelector:".sqs-content-manager-gallery"};var r=g({},s,{rootNode:a,overlayRootNode:i,collection:n});return o.call(this,e,r)}return l}(l);e.exports=p},12996:function(e,t,a){"use strict";var i=a(4);var c=i(a(8));var n=i(a(10));var s=i(a(11));var r=i(a(7));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,r.default)(i),t;if(n()){var a=(0,r.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var o=a(24),u=o.t;var g=a(722);var l=a(11621);var p=function(e){(0,n.default)(l,e);var o=d(l);function l(e,t){var a=t.rootNode,i=t.overlayRootNode,n=t.collection;(0,c.default)(this,l);var s={strings:{label:u("Music Album"),edit:u("Edit")},shimmySelector:".sqs-content-manager-music-album"};var r=g({},s,{rootNode:a,overlayRootNode:i,collection:n});return o.call(this,e,r)}return l}(l);e.exports=p},12997:function(e,t,a){"use strict";var i=a(4);var s=i(a(8));var r=i(a(9));var o=i(a(10));var l=i(a(11));var c=i(a(7));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var n=a(24),u=n.t;var g=a(2713);var p=a(1940),h=p.EDITOR,f=p.STORE_MANAGER;var m=a(11538);var v=a(1089);var b=function(e){(0,o.default)(n,e);var i=d(n);function n(e,t){var a=t.rootNode;(0,s.default)(this,n);return i.call(this,e,{rootNode:a})}(0,r.default)(n,[{key:"hasPermission",value:function e(){return!g.hasRole(h)&&!g.hasRole(f)}},{key:"getClassificationLabel",value:function e(){return u("Navigation")}},{key:"getActionList",value:function e(){return[{name:"edit",label:u("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){v.annotationClick("navigation-edit");this.Y.Squarespace.Singletons.Location.go("/pages",{shimmy:".sqs-navigation-pages"})}}]);return n}(m);e.exports=b},12998:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var p=i(a(8));var n=i(a(9));var h=i(a(6));var s=i(a(268));var r=i(a(10));var o=i(a(11));var l=i(a(7));var f=i(a(722));var c=i(a(67));var d=a(24);var m=i(a(3065));var u=i(a(11883));var g=i(a(11787));var v=i(a(12368));var b=i(a(1089));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var S=function(e){(0,r.default)(g,e);var u=y(g);function g(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,p.default)(this,g);var r={model:null,collection:null,columns:12};var o=(0,f.default)({},r,{rootNode:i,overlayRootNode:n,collection:s});a=u.call(this,e,o);var l=a.state.rootNode.ancestor("[data-collection-id]",true);var c=a.examineAndInitializeMainImageToggle(l);a.state.collection.load(function(){var e=this;if(!this.state.collection)return;this.state.collection.get("isDemoCollection")||this.initModel(function(){e.renderEmptyMessage()});if(c){var t=this.state.collection.get("mainImageId");var a=this.mainImageToggleNodeReference;t&&a&&this.set("overlayRootNode",a)}},(0,h.default)(a));if(s.get("isDemoCollection")){var d=window.CONFIG_PANEL.get("router");a.registerYUIEventListener((0,v.default)(a.Y,d,s))}return a}(0,n.default)(g,[{key:"destroy",value:function e(){this.removeEmptyMessage(true);(0,s.default)((0,l.default)(g.prototype),"destroy",this).call(this)}},{key:"afterEditableChange",value:function e(t){t&&this.removeEmptyMessage();(0,s.default)((0,l.default)(g.prototype),"afterEditableChange",this).call(this,t);t||this.renderEmptyMessage()}},{key:"save",value:function e(){var t=this;var a=this.saveModel();return a.then(function(){t.set("dirty",false)})}},{key:"saveModel",value:function e(){var i=this;return new Promise(function(t,a){i.state.model.save(function(e){e?a(e):t()})})}},{key:"getLayoutLabel",value:function e(){var t=this.state.collection;if(this.getParentCollection(t))return t.get("navigationTitle");return(0,d.t)("Page Content")}},{key:"getClassificationLabel",value:function e(){return this.getLayoutLabel()}},{key:"getPageLayout",value:function e(){return this.state.model.get("data").get("layout")}},{key:"getActionList",value:function e(){var t=(0,s.default)((0,l.default)(g.prototype),"getActionList",this).call(this);var a=this.getMainImageToggleAction();(0,c.default)(a)&&t.push(a);var i=this.getCollectionSettingsAction();(0,c.default)(i)&&t.push(i);return t}},{key:"enterEditMode",value:function e(){var t=this;if(this.state.collection.get("isDemoCollection")){if(this.isProcessing)return;this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id")).then(function(){t.initModel(function(){var e=t.state.model;e.set("collection",t.state.collection);e.load(function(e){t.isProcessing=false;t.enterEditMode()})})});return}(0,s.default)((0,l.default)(g.prototype),"enterEditMode",this).call(this)}},{key:"trackEditClick",value:function e(){var t=this.state.collection;b.default.annotationClickCollection("page-content-edit",t.get("typeName"))}},{key:"loadModel",value:function e(t){var a=this;var i=this.Y.Squarespace,n=i.AttrValidators,s=i.Models;var r=n.isInstanceOf(s.PageCollectionData);var o=new s.PageCollectionData({collection:this.state.collection});o.load(function(){r(o,"model")&&a.set("model",o);t()})}},{key:"previewLayout",value:function e(t){var a=this.state.rootNode;var i=a.get("clientHeight");a.setStyle("height",i+"px");this.updateLayoutFromJSON(t);setTimeout(function(){a.setStyle("height",null);var e=a.getDOMNode();e&&(0,m.default)(e,true)},0)}},{key:"updateLayoutFromJSON",value:function e(t){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var i=this.getPageLayout();var n=this.state.rootNode;this.removeEmptyMessage();i.setAttrs(t);n.toggleClass("empty",i.isEmpty());a.pluginLayoutBuilder(n,i);a.destroyLayoutBuilder(n);this.renderEmptyMessage()}},{key:"getParentCollection",value:function e(t){var a=t.get("id");var i=this.Y.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(a);if(!i)return false;var n=i.getFolderItemList();if(!n)return false;var s=n.getNavigationItem();if(!s||!s.get("collectionId"))return false;return s.get("collection")}}]);return g}((0,g.default)(u.default));t.default=S;e.exports=t.default},12999:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(40));var c=i(a(44));var d=i(a(52));var s=i(a(8));var r=i(a(9));var u=i(a(6));var o=i(a(268));var g=i(a(10));var l=i(a(11));var p=i(a(7));var h=i(a(2));var f=i(a(21));var m=i(a(100));var v=i(a(149));var b=i(a(87));var y=a(24);var S=i(a(1089));var q=i(a(2575));var _=i(a(2580));var C=i(a(2206));var E=i(a(2225));var k=a(11490);var w=i(a(11884));var T=i(a(1306));var I=i(a(869));var A=i(a(1698));var x=i(a(1246));var L=a(5439);var D=i(a(5072));var N=i(a(1434));var O=i(a(4111));var R=i(a(5059));var P=i(a(13008));var B=i(a(11786));var M=i(a(11785));var F=a(318);var U=i(a(1028));var V=i(a(34));var z=i(a(5067));var H=i(a(114));var G=i(a(13009));var W=i(a(1332));var Y=i(a(596));var j=a(729);function Q(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function X(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(a),true).forEach(function(e){(0,h.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function K(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,p.default)(i),t;if(n()){var a=(0,p.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var J="pageScrim";var Z='[data-content-field="title"]';var $='.sqs-layout[data-type="item"]';var ee="/config/design/colors/section-themes/theme-editor";var te="/config/pages";var ae="POST_EDIT_REFRESH_KEY";var ie=(0,j.createLogger)("page-section-annotation-controller","#358");var ne={default:{buttonText:(0,y.t)("Manage Items"),dirtyText:(0,y.t)("Do you want to save your changes before managing the items?")},blog:{buttonText:(0,y.t)("Manage Posts"),dirtyText:(0,y.t)("Do you want to save your changes before managing the posts?")},events:{buttonText:(0,y.t)("Manage Events"),dirtyText:(0,y.t)("Do you want to save your changes before managing the events?")},portfolio:{buttonText:(0,y.t)("Manage Projects"),dirtyText:(0,y.t)("Do you want to save your changes before managing the projects?")}};var se="request";var re="save";var oe="cancel";var le="navigate";var ce="header--menu-open";var de=667;var ue=375;var ge=55;var pe=function e(t){if("location"===t)return"location";if(["source-url","author"].includes(t))return"options";return null};var he=function(e){(0,g.default)(l,e);var i=K(l);function l(e,t){var o;(0,s.default)(this,l);o=i.call(this,X({},e,{sectionsArea:D.default.PAGE_SECTIONS}),t);(0,h.default)((0,u.default)(o),"name","PageSectionsAnnotationController");(0,h.default)((0,u.default)(o),"handleHeaderHeightChange",function(e){var t=e.headerHeight;o.set("topOffset",t)});(0,h.default)((0,u.default)(o),"handleTopOffsetChange",(0,m.default)(function(){var e=O.default.getState(),t=e.view;var a=document.getElementById(J);a&&o.state.rootNode&&(t===N.default.DESKTOP?a.style.top=ge+o.state.topOffset+"px":a.style.top="calc((50% - ".concat(de/2,"px) + ").concat(ge/2+o.state.topOffset,"px)"))},60));(0,h.default)((0,u.default)(o),"afterSectionsChanged",function(){window.Y.Global.fire("section:first:change");o.firstSectionAddButton&&o.firstSectionAddButton.syncWithDOM(o.getFirstSection())});(0,h.default)((0,u.default)(o),"onMeasureEditModePerformance",function(){try{var e=o.getSectionStoreState(),t=e.collectionId;o.state.item?q.default.frameToolbarItemEdit(t):q.default.frameToolbarCollectionEdit(t)}catch(e){ie(e)}});(0,h.default)((0,u.default)(o),"finishEditingAndNavigateToPanel",function(e,t){var a=t.dirtyText,i=t.destination,n=t.trackingCallback,s=t.cancelCallback,r=t.closeCallback;if(A.default.getState().isDirty||R.default.getState().isDirty||z.default.getState().isDirty){n&&n(se);o.confirm({title:(0,y.t)("Unsaved Changes"),message:a,cancelLabel:(0,y.t)("Don't Save"),confirmLabel:(0,y.t)("Save")}).then(L.saveAllSections).then(function(){o.props.fireRequestSaveChangesEvent&&o.props.fireRequestSaveChangesEvent();n&&n(re);o.editCollectionItemsFromPristineState({destination:i,trackingCallback:n,closeCallback:r})}).catch(function(e){e?(0,F.captureException)(e):s&&s({destination:i,trackingCallback:n,closeCallback:r});n&&n(oe)})}else setTimeout(function(){return o.editCollectionItemsFromPristineState({destination:i,trackingCallback:n,closeCallback:r})})});(0,h.default)((0,u.default)(o),"editCollectionItemsFromPristineState",function(e){var t=e.destination,a=e.trackingCallback,i=e.closeCallback;var n=window.CONFIG_PANEL.get("router");n.push(t);(0,L.finishEditing)();T.default.disableEditing();a&&a(le);i&&i()});(0,h.default)((0,u.default)(o),"trackClickManageCollectionInSection",function(e){if(e!==le)return;var t=o.getSectionStoreState(),a=t.collectionId;try{q.default.clickManageCollectionInSection(a)}catch(e){console.log(e)}});(0,h.default)((0,u.default)(o),"navigateToThemeEditor",function(e){var t=e.theme;o.finishEditingAndNavigateToPanel(null,{dirtyText:(0,y.t)("You have unsaved changes"),destination:ee+"?themeId="+t,trackingCallback:function e(t){S.default.sectionThemeEditClick(t)}})});(0,h.default)((0,u.default)(o),"onUpdateFromContentBrowserSave",function(){var t=(0,d.default)(c.default.mark(function e(a){var i,n;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.item,n=a.shouldSyncInlineFields;if(o.isFrameRealAndIfNotDestroy()){t.next=3;break}return t.abrupt("return");case 3:n?x.default.setItem.defer(i):x.default.setItem.defer(X({},i,{body:{layout:o.bodyEditor.pageLayout.toJSON()},title:o.titleEditor.data}));t.next=6;return o.updateSectionDomAndStyles(o.getSectionStoreState().sections[0],i.fullUrl);case 6:o.detachMetadataClickListeners();o.addMetadataClickHandlers();n&&o.syncInlineEditors();case 9:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());x.default.setCollectionAndItemId({collectionId:o.Y.config.win.Static.SQUARESPACE_CONTEXT.collection.id,itemId:o.getItemIdFromContext()});o.appendEmptyPreviewSectionNodeIfNeeded();o.detachPageSectionsActionListener=A.default.listen(function e(){if(!this.isFrameRealAndIfNotDestroy())return;var t=this.getSectionStoreState();this.set("isFooterEditing",t.isFooterEditing);this.set("isSettingsOpen",t.isSettingsOpen);this.set("isGalleryContentEditorOpen",t.isGalleryContentEditorOpen);this.set("isUserItemsListContentEditorOpen",t.isUserItemsListContentEditorOpen);this.set("isItemDialogOpen",t.isItemDialogOpen);this.set("item",t.item);this.onSectionStoreUpdate(t)}.bind((0,u.default)(o)));o.detachDeviceViewScrimListener=O.default.listen(function(){var e=document.getElementById(J);e&&o.styleScrim(e)});o.headerHeightChangeListener=o.Y.Global.on("headerHeight",o.handleHeaderHeightChange.bind((0,u.default)(o)));o.addAfterChangeHandler("isFooterEditing",o.toggleScrim,(0,u.default)(o));o.addAfterChangeHandler("topOffset",o.handleTopOffsetChange,(0,u.default)(o));o.addAfterChangeHandler("isItemDialogOpen",o.handleItemDialogOpen,(0,u.default)(o));var a=o.getFrameWindow();a.innerWidth!==window.top.innerWidth&&(o.setTopOffsetOnAnimationEnd=window.setTimeout(function(){o.handleTopOffsetChange()},300));o.loadItem().then(function(){if(!o.isFrameRealAndIfNotDestroy())return;x.default.setControllerInitialized(true)});o.actionListener=new U.default(V.default);o.actionListener.addActionListener(x.default.NAVIGATE_TO_THEME_EDITOR,o.navigateToThemeEditor.bind((0,u.default)(o)));o.actionListener.addActionListener(x.default.UPDATE_FRAME_FROM_CONTENT_BROWSER_SAVE,o.onUpdateFromContentBrowserSave.bind((0,u.default)(o)));o.actionListener.addActionListener(x.default.DUPLICATE_BLOG_POST,o.duplicateBlogPostActionHandler.bind((0,u.default)(o)));o.metadataClickListeners=[];return o}(0,r.default)(l,[{key:"initializeEditors",value:function e(){if(!this.getFrameWindow())return;(0,o.default)((0,p.default)(l.prototype),"initializeEditors",this).call(this);this.firstSectionAddButton||this.initializeFirstAddSectionButton();this.state.rootNode.getDOMNode().setAttribute("data-test","page-sections-container");this.isInlineEditable()&&this.renderInlineEditors()}},{key:"getCollectionType",value:function e(t){var a=this.getSectionStoreState(),i=a.collectionId;var n=I.default.getCollection(i);if(!n)return null;if((0,_.default)(n))return"blog";if((0,C.default)(n))return"events";if((0,E.default)(n))return"portfolio";return null}},{key:"getItemIdFromContext",value:function e(){return this.Y.config.win.Static.SQUARESPACE_CONTEXT.itemId}},{key:"getItem",value:function e(){return this.getSectionStoreState().item}},{key:"getSectionEditingFeatures",value:function e(t){var a={};var i=this.finishEditingAndNavigateToPanel||f.default;var n=this.getCollectionType(t)||"default";if(i&&this.isSectionItemManageable(t)){var s=this.getSectionStoreState(),r=s.collectionId;a={manageItems:X({handler:i},ne[n],{destination:"/config/pages/".concat(r),trackingCallback:this.trackClickManageCollectionInSection.bind(this)})}}return X({},(0,o.default)((0,p.default)(l.prototype),"getSectionEditingFeatures",this).call(this,t),{},a)}},{key:"isInlineEditable",value:function e(){var t=this.getItem();if(!t)return false;return t.recordType===v.default.TEXT||H.default.isFeatureEnabled(b.default.BLOG_EVENT_ITEM_SETTINGS)&&t.recordType===v.default.EVENT}},{key:"isSectionAddable",value:function e(t){if(this.isInlineEditable())return false;return(0,o.default)((0,p.default)(l.prototype),"isSectionAddable",this).call(this,t)}},{key:"isSectionMoveable",value:function e(t){if(this.isInlineEditable())return false;return(0,o.default)((0,p.default)(l.prototype),"isSectionMoveable",this).call(this,t)}},{key:"initializeFirstAddSectionButton",value:function e(){var t=this;if(this.isInlineEditable())return;var a=this.state.rootNode.getDOMNode();var i=a.ownerDocument.querySelector("#siteWrapper");this.firstSectionAddButton=new P.default({currentFirstSection:this.getFirstSection(),destinationNode:i,callbacks:{onAddSection:function e(){t.showSectionCatalog(t.getFirstSection(),true)},getTopOffset:function e(){return(t.state.topOffset||0)+"px"}}});this.detachSiteHeaderFooterActionListener=R.default.listen(function e(){var t=R.default.getState();this.set("isHeaderModalOpen",t.isHeaderModalOpen);this.onHeaderFooterStoreUpdate(t)}.bind(this));this.addAfterChangeHandler("isFooterEditing",this.toggleScrim,this);this.addAfterChangeHandler("isHeaderModalOpen",this.toggleScrim,this);this.addAfterChangeHandler("isSettingsOpen",this.handleSettingsOpen,this);this.addAfterChangeHandler("isGalleryContentEditorOpen",this.handleSettingsOpen,this);this.addAfterChangeHandler("isUserItemsListContentEditorOpen",this.handleSettingsOpen,this)}},{key:"createCustomHeaderScrim",value:function e(){var t=document.createElement("div");t.id=J;this.styleScrim(t);t.className="sqs-customHeaderPageScrim";document.body.appendChild(t)}},{key:"styleScrim",value:function e(t){var a=O.default.getState(),i=a.view;if(i===N.default.DESKTOP){t.style.top="".concat(this.state.topOffset+ge,"px");t.style.left="0px";t.style.width="100%";t.style.height="100%"}else{t.style.top="calc((50% - ".concat(de/2,"px) + ").concat(ge/2+this.state.topOffset,"px)");t.style.left="calc(50% - ".concat(ue/2,"px)");t.style.width="".concat(ue,"px");t.style.height="".concat(667-this.state.topOffset,"px")}}},{key:"removeCustomHeaderScrim",value:function e(){var t=document.getElementById(J);if(t){var a=t.parentNode;a.removeChild(t)}}},{key:"onHeaderFooterStoreUpdate",value:function e(t){var a,i;if(!this.state.rootNode){console.warn("[".concat(this.constructor.name,"] still listening to store updates after rootNode removal"));return}var n=t.isHeaderModalOpen;var s=t.isOverlayDisclosureOpen;var r=null===(a=document.getElementById("sqs-site-frame"))||void 0===a?void 0:null===(i=a.contentWindow.document)||void 0===i?void 0:i.body;var o=document.getElementById(J);s&&r?r.classList.add(ce):r.classList.remove(ce);if(n&&!s){if(o)return;this.createCustomHeaderScrim()}else n&&!s||this.removeCustomHeaderScrim()}},{key:"toggleScrim",value:function e(){var t=this.state,a=t.isFooterEditing,i=t.isScrimEnabled;a&&!i?this.showScrim():i&&!a&&this.hideScrim()}},{key:"handleSettingsOpen",value:function e(){var t=this.state,a=t.isSettingsOpen,i=t.isGalleryContentEditorOpen,n=t.isUserItemsListContentEditorOpen;a||i||n?this.firstSectionAddButton.hide():this.firstSectionAddButton.show()}},{key:"getFirstSection",value:function e(){if(this.state.rootNode)return this.state.rootNode.getDOMNode().querySelector(k.SECTION_SELECTOR);return null}},{key:"getPageSectionsId",value:function e(){return this.state.rootNode.getAttribute("data-page-sections")}},{key:"loadItem",value:function e(){var n=this;var s=this.getItemIdFromContext();if(!s){x.default.setItem(null);return Promise.resolve()}return new Promise(function(t,a){var e=n.props.collectionId;var i=new window.top.Y.Squarespace.Models.ContentItem({id:s,collectionId:e});i.load(function(e){if(!n.isFrameRealAndIfNotDestroy())return;if(e)a(e);else{x.default.setItem(i.toJSON());t()}})})}},{key:"loadLatestSectionData",value:function e(){var t=x.default.load(this.getPageSectionsId());var a=this.getItemIdFromContext();if(!a)return t;return Promise.all([t,this.loadItem()])}},{key:"getSectionStoreState",value:function e(){return A.default.getState()}},{key:"getSectionActions",value:function e(){return x.default}},{key:"createPreviewEmptySectionNode",value:function e(){var t=(0,y.t)("Empty Page");var a=(0,y.t)("Create a beautiful page by adding and combining sections.");return this.buildEmptySectionNode({title:t,description:a})}},{key:"createEmptySectionNode",value:function e(){var t=(0,y.t)("Add Page Content");return this.buildEmptySectionNode({title:t,hasButton:true})}},{key:"onScrimClicked",value:function e(t){var a=this.state,i=a.isFooterEditing,n=a.isHeaderModalOpen;S.default.clickEditSiteAfterEditingHeaderOrFooter(i?"footer":n?"header":"");(0,L.switchFromFooterEditingToPageEditing)()}},{key:"onEmptySectionButtonClick",value:function e(t){this.showSectionCatalog()}},{key:"getScrimButtonText",value:function e(){return(0,y.t)("Edit Page")}},{key:"getScrimFadeOutDuration",value:function e(){return 200}},{key:"onDeviceViewChanges",value:function e(t){(0,o.default)((0,p.default)(l.prototype),"onDeviceViewChanges",this).call(this,t);this.firstSectionAddButton&&this.firstSectionAddButton.onDeviceViewChanges(t)}},{key:"destroy",value:function e(){(0,o.default)((0,p.default)(l.prototype),"destroy",this).call(this);window.clearTimeout(this.setTopOffsetOnAnimationEnd);this.handleTopOffsetChange.cancel();this.detachPageSectionsActionListener&&this.detachPageSectionsActionListener();if(this.detachDeviceViewScrimListener){this.detachDeviceViewScrimListener();this.detachDeviceViewScrimListener=null}this.detachSiteHeaderFooterActionListener&&this.detachSiteHeaderFooterActionListener();if(this.headerHeightChangeListener){this.headerHeightChangeListener.detach();this.headerHeightChangeListener=null}if(this.firstSectionAddButton){this.firstSectionAddButton.destroy();this.firstSectionAddButton=null}x.default.setControllerInitialized.defer(false);if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}this.detachMetadataClickListeners()}},{key:"getSectionAreaName",value:function e(){return"main"}},{key:"addMetadataClickHandlers",value:function e(){var t=this.state.rootNode;var a=['[data-content-field="event-date-time-range"]','[data-content-field="location"]','[data-content-field="categories"]','[data-content-field="tags"]','[data-content-field="source-url"]','[data-content-field="published-on"]','[data-content-field="author"]','[data-content-field="comments"]'].join(", ");var i=t.all(a);i.each(function(e){var a=this;var i=e.getDOMNode();i.style.zIndex=1;i.style.position="relative";i.style.cursor="pointer";this.metadataClickListeners.push(e.on("click",function(){var e=a.state.item;if(I.default.canEditItemSettings(e)){var t=i.dataset.contentField;S.default.clickMetadata(e,t);I.default.showCollectionItemSettingsEditor(e,pe(t))}else x.default.setItemDialogOpen(true)}))},this)}},{key:"detachMetadataClickListeners",value:function e(){this.metadataClickListeners.forEach(function(e){return e.detach()});this.metadataClickListeners=[]}},{key:"renderInlineEditors",value:function e(){var t=this;var a=this.state,i=a.item,n=a.rootNode;var s=n.one(Z);if(s){s.getDOMNode().classList.add(G.default.titleEditor);this.titleEditor=new B.default(this.Y,{hostNode:s.getDOMNode(),data:i.title,placeholder:i.recordType===v.default.EVENT?(0,y.t)("Enter an event title…"):(0,y.t)("Enter a post title…"),multiline:false});this.titleEditor.addDataChangeHandler(function(e){x.default.setDirty(true);x.default.setItem(X({},A.default.getState().item,{title:e}))})}var r=n.one($);if(r){this.bodyEditor=new M.default(this.Y,{hostNode:r.getDOMNode(),pageLayout:this.revertPageLayout()});this.bindMeasureEditModePerformance(r);r.getDOMNode().style.zIndex=1;this.bodyEditor.addDirtyLayoutDataHandler(function(e){if(e.editorUid)return;x.default.setDirty(true);x.default.setItem(X({},A.default.getState().item,{body:{layout:t.bodyEditor.pageLayout.toJSON()}}))});this.bodyEditors.push(this.bodyEditor)}H.default.isFeatureEnabled(b.default.BLOG_EVENT_ITEM_SETTINGS)&&this.addMetadataClickHandlers()}},{key:"revertPageLayout",value:function e(){var t=this.state.item;var a=new this.Y.Squarespace.Models.ContentItem(t);this.pageLayout||(this.pageLayout=new this.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:t.collectionid,parentItemId:t.id}));this.pageLayout.setAttrs(a.get("body.layout"));return this.pageLayout}},{key:"destroyInlineEditors",value:function e(){var t=this.state.item;if(this.titleEditor){var a=this.titleEditor.hostNode;a.innerHTML=t.title;this.titleEditor.destroy();this.titleEditor=null}this.reenableLinkNavigation();if(this.bodyEditor){var i=this.bodyEditor.hostNode;this.bodyEditor.destroy();this.bodyEditor=null;var n=this.Y.Squarespace.LayoutEngine.EditController.getInstance();n.pluginLayoutBuilder(this.Y.one(i),this.revertPageLayout());n.destroyLayoutBuilder(this.Y.one(i))}this.detachMetadataClickListeners()}},{key:"syncInlineEditors",value:function e(){this.destroyInlineEditors();this.renderInlineEditors()}},{key:"handleItemDialogOpen",value:function e(){if(!this.state.isItemDialogOpen)return;if(this.itemEditor){console.log("There is already an editor!");return}var t=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");var a=new t(this.getItem());var i=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.ContentItemEditorFactory").getEditor(a);this.itemEditor=new i({model:a,onlySetAttrsOnSave:true});this.itemEditor.once(["savingClose","nonSavingClose"],function(e){var t=this;if(e.type.includes("savingClose")){x.default.setItem.defer(a.toJSON());x.default.setDirty.defer(true);setTimeout(function(){return t.syncInlineEditors()})}this.itemEditor=null;x.default.setItemDialogOpen.defer(false);if(this.pendingDuplicateCallbackRequested){this.pendingDuplicateCallbackRequested=false;setTimeout(function(){return t._duplicateCallback()},100)}},this);this.itemEditor.show()}},{key:"getPersistantSelectors",value:function e(){if(!this.isInlineEditable())return(0,o.default)((0,p.default)(l.prototype),"getPersistantSelectors",this).call(this);return[].concat((0,n.default)((0,o.default)((0,p.default)(l.prototype),"getPersistantSelectors",this).call(this)),[Z,$])}},{key:"duplicateBlogPostActionHandler",value:function e(){var t=this.itemEditor;if(!t)return;this.pendingDuplicateCallbackRequested=true;var a=t.get("dialog");a.edited?a.saveAndClose():a.close()}},{key:"_duplicateCallback",value:function e(){var r=this;var t=this.getSectionStoreState(),a=t.collectionId;this.finishEditingAndNavigateToPanel(null,{dirtyText:(0,y.t)("You have unsaved changes"),destination:"".concat(te,"/").concat(a),cancelCallback:function(){var t=(0,d.default)(c.default.mark(function e(a){var i,n,s;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.destination,n=a.trackingCallback,s=a.closeCallback;t.next=3;return(0,L.discardAllSections)();case 3:r.editCollectionItemsFromPristineState({destination:i,trackingCallback:n,closeCallback:s});case 4:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),closeCallback:this._doDuplicateBlogPostAndEnterEditMode.bind(this)})}},{key:"_doDuplicateBlogPostAndEnterEditMode",value:function e(){var n=this;var t=this.getSectionStoreState(),a=t.collectionId;var s=this.getItem().id;S.default.duplicateCollectionItem({itemId:s,collectionType:"blog",collectionId:a});this.Y.Squarespace.ContentCollectionCache.getCollectionById(a,function(){var t=(0,d.default)(c.default.mark(function e(a){var i;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return W.default.copy(s,Y.default.DRAFT);case 2:i=t.sent;a.items.add(new n.Y.Squarespace.Models.ContentItem(i));T.default.addLoadHandler(ae,function(){setTimeout(function(){T.default.removeLoadHandler(ae);T.default.enterItemInlineEditingMode()},100)});T.default.setUrl(i.fullUrl);case 6:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}}]);return l}(w.default);t.default=he;e.exports=t.default},13e3:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getContentPreview=s;t.getSectionPreview=o;t.getFragmentFromContentPreview=c;var d=i(a(44));var n=i(a(52));var u=i(a(452));var g="/api/content-preview";function s(){return r.apply(this,arguments)}function r(){r=(0,n.default)(d.default.mark(function e(){var a,i,n,s,r,o,l,c=arguments;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=c.length>0&&void 0!==c[0]?c[0]:{},i=a.pathname,n=a.replacements;if(i){t.next=3;break}throw new Error("pathname is required");case 3:s="".concat(g,"?path=").concat(i);t.next=6;return u.default.post(s,n);case 6:r=t.sent;o=new DOMParser;l=o.parseFromString(r.data,"text/html");return t.abrupt("return",l);case 10:case"end":return t.stop()}},e)}));return r.apply(this,arguments)}function o(e,t){return l.apply(this,arguments)}function l(){l=(0,n.default)(d.default.mark(function e(a,i){var n,s,r,o,l;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n="".concat(g,"/previewSection");t.next=3;return u.default.post(n,a);case 3:s=t.sent;r=new DOMParser;o=r.parseFromString(s.data,"text/html");l=o.querySelector(i);return t.abrupt("return",l);case 8:case"end":return t.stop()}},e)}));return l.apply(this,arguments)}function c(e){var t=e.responseDoc,a=e.selector;var i=t.querySelector(a);if(!i)throw new Error("Unable to find selector in responseDoc");return i}},13001:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var n=i(a(9));var o=i(a(2));var p=i(a(87));var h=i(a(114));var f=i(a(1434));var m=a(2877);var v=a(11490);var b=i(a(4111));var y={admin:{className:"icon-page-section-control-button-admin",testAttr:"toolbar-button-admin"},galleryContent:{className:"icon-page-section-control-button-gallery-content",testAttr:"toolbar-button-gallery"},userItemsListContent:{className:"icon-page-section-control-button-gallery-content",testAttr:"toolbar-button-user-items"},manageItems:{className:"icon-page-section-control-button-manage-items",testAttr:"toolbar-button-manage-items"},settings:{className:"icon-page-section-control-button-settings",testAttr:"toolbar-button-settings"},duplicate:{className:"icon-page-section-control-button-duplicate",testAttr:"toolbar-button-duplicate"},up:{className:"icon-page-section-control-button-up",testAttr:"toolbar-button-up"},down:{className:"icon-page-section-control-button-down",testAttr:"toolbar-button-down"},delete:{className:"icon-page-section-control-button-delete",testAttr:"toolbar-button-delete"},more:{className:"icon-page-section-control-button-more",testAttr:"more"}};var S=h.default.isFeatureEnabled(p.default.MOBILE_PREVIEW_PAGE_EDITING)?"hidden-add-section":"hidden";var l="mobile-toolbar-expanded";var s=function(){function s(e){var a=this;var t=e.sectionNode,i=e.sectionPosition,n=e.features;(0,r.default)(this,s);(0,o.default)(this,"onDeviceViewChanges",function(e){var t=Array.from(a.sectionNode.querySelectorAll(".sqs-section-editing-ui"));t.length>0&&(e===f.default.DESKTOP?t.forEach(function(e){return e.classList.remove(S)}):t.forEach(function(e){return e.classList.add(S)}))});this.sectionNode=t;this.sectionPosition=i;this.features=n;this.timeouts=[];this.isFooterSection=!!this.sectionNode.closest("[data-footer-sections]");this.renderToolbar();this.bindToolbar()}(0,n.default)(s,[{key:"renderToolbar",value:function e(){var t=this;var a=b.default.getState(),i=a.view;var n=h.default.isFeatureEnabled(p.default.SECTION_ADMIN)&&!this.isFooterSection;var s=this.sectionNode.ownerDocument.createElement("div");s.classList.add("sqs-section-editing-ui");i!==f.default.DESKTOP&&s.classList.add(S);var r='<div class="sqs-section-add-button icon-page-section-add-section"></div>';var o=[v.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME,m.DISABLE_DRAG_SELECTION_CLASSNAME].join(" ");var l=this.hasFeature("add")?'<button class="'.concat(o,' top-add-hit-box">').concat(r,"</button>"):"";var c=this.hasFeature("add")?'<button\n         class="'.concat(o,' bottom-add-hit-box"\n         data-test="section-add-button">').concat(r,"</button>"):"";var d=["duplicate","up","down","delete","more"];var u=d.some(function(e){return t.hasFeature(e)});s.innerHTML='\n      <div class="shadow"></div>\n      '.concat(c,'\n      <div class="shim"></div>\n      <div data-template-getter="section-wrapper" class="sqs-section-wrapper">\n        ').concat(l,'\n        <div class="control-buttons-parent ').concat(m.DISABLE_DRAG_SELECTION_CLASSNAME,'">\n          ').concat(n?'<div class="'+y.admin.className+'"></div>':"",'\n\n          <div class="').concat(v.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME,'">\n            ').concat(this.buildManageItemsButton(this.features.manageItems),"\n            ").concat(this.buildStandaloneButton("galleryContent"),"\n            ").concat(this.buildStandaloneButton("userItemsListContent"),'\n            <div class="control-buttons" tabIndex=').concat(this.sectionPosition,'>\n              <div class="toolbar-buttons">\n              ').concat(this.buildButton("settings"),"\n              ").concat(u?'<span class="icon-page-section-control-button-divider"></span>':"","\n              ").concat(this.buildButton("duplicate"),"\n              ").concat(this.buildButton("up"),"\n              ").concat(this.buildButton("down"),"\n              ").concat(this.buildButton("delete"),"\n              ").concat(this.buildButton("more"),"\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ");var g=s.querySelector(".control-buttons");g.classList.add("toolbar-".concat(s.querySelector(".toolbar-buttons").children.length,"-buttons"));this.sectionNode.appendChild(s)}},{key:"hasFeature",value:function e(t){if("duplicate"===t&&!h.default.isFeatureEnabled(p.default.SEVEN_ONE_SECTION_DUPLICATION))return false;if("admin"===t&&(!h.default.isFeatureEnabled(p.default.SECTION_ADMIN)||this.isFooterSection))return false;return Object.keys(this.features).includes(t)}},{key:"buildButton",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var i=y[t];return this.hasFeature(t)?'<button class="'.concat(i.className,'" data-test="').concat(i.testAttr,'">').concat(a,"</button>"):""}},{key:"buildStandaloneButton",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var i=this.buildButton(t,a);return i?'<div class="'.concat(y[t].className,'-container">').concat(i,"</div>"):""}},{key:"buildManageItemsButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.buttonText;return a?this.buildStandaloneButton("manageItems",a):""}},{key:"bindToolbar",value:function e(){var r=this;if(this.hasFeature("add")){var t=".sqs-section-editing-ui .top-add-hit-box";this.sectionNode.querySelector(t).addEventListener("click",function(e){if(e.target){e.target.style.display="none";r.features.add(r.sectionNode,true);r.registerTimer(function(){e.target.style.display=""},200)}});this.sectionNode.querySelector(".sqs-section-editing-ui .sqs-section-add-button").addEventListener("click",function(e){if(e.target){e.target.style.display="none";r.features.add(r.sectionNode);r.registerTimer(function(){e.target.style.display=""},200)}})}if(this.hasFeature("settings")){var a=".sqs-section-editing-ui .toolbar-buttons ."+y.settings.className;this.sectionNode.querySelector(a).addEventListener("click",function(e){e.stopPropagation();r.features.settings(r.sectionNode)});this.sectionNode.querySelector(".sqs-section-wrapper").addEventListener("dblclick",function(e){var t=b.default.getState(),a=t.view;if(e.currentTarget!==e.target||a!==f.default.DESKTOP&&!h.default.isFeatureEnabled(p.default.MOBILE_PREVIEW_PAGE_EDITING))return;r.features.settings(r.sectionNode)},true)}var i=["delete","galleryContent","userItemsListContent","manageItems","duplicate","up","down","admin"];i.forEach(function(e){if(!r.hasFeature(e))return;var t=".sqs-section-editing-ui ."+y[e].className;var a=r.sectionNode.querySelector(t);var i=r.features[e];if(!a||!i)return;var n="function"===typeof i?i:i.handler;var s="function"===typeof i?{}:i;a.addEventListener("click",function(e){e.stopImmediatePropagation();n(r.sectionNode,s)})});if(this.hasFeature("more")){var n=".sqs-section-editing-ui .toolbar-buttons ."+y.more.className;this.sectionNode.querySelector(n).addEventListener("click",function(e){e.stopPropagation();r.handleMoreClick()});this.sectionNode.addEventListener("click",function(e){if(e.target.closest(".toolbar-buttons"))return;r.handleMoreOutClick()},true)}}},{key:"toggleToolbar",value:function e(t){var a=this.sectionNode.querySelector(".sqs-section-editing-ui .".concat(v.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME));if(!a)return;a.classList.toggle("control-button-wrapper-hidden",!t)}},{key:"toggleAddButtons",value:function e(t){if(!this.hasFeature("add"))return;var a=this.sectionNode.querySelector(".sqs-section-editing-ui .bottom-add-hit-box");var i=this.sectionNode.querySelector(".sqs-section-editing-ui .top-add-hit-box");if(t){a.classList.remove("add-hit-box-hidden");i.classList.remove("add-hit-box-hidden")}else{a.classList.add("add-hit-box-hidden");i.classList.add("add-hit-box-hidden")}}},{key:"handleMoreClick",value:function e(){var t=b.default.getState(),a=t.view;if(a!==f.default.PHONE)return;var i=this.sectionNode.querySelector(".toolbar-buttons");i.classList.add(l)}},{key:"handleMoreOutClick",value:function e(){var t=this.sectionNode.querySelector(".toolbar-buttons");t.classList.remove(l)}},{key:"show",value:function e(){this.toggleToolbar(true);this.toggleAddButtons(true)}},{key:"hide",value:function e(){this.toggleToolbar(false);this.toggleAddButtons(false)}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(n)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)});this.timeouts.length=0}},{key:"destroy",value:function e(){this.deregisterTimers()}}]);return s}();t.default=s;e.exports=t.default},13002:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(0));var s=i(a(1));var r=i(a(12370));var o=function e(t){return n.default.createElement("div",{className:"catalog-item-one-column-center-list catalog-list-column"},t.items.map(function(e,t){var a=e.html,i=e.title;return n.default.createElement(r.default,{key:"listItem"+t,html:a,title:i})}))};o.propTypes={items:s.default.arrayOf(s.default.shape({html:s.default.string.isRequired,title:s.default.string})).isRequired};var l=o;t.default=l;e.exports=t.default},13003:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(0));var s=i(a(1));var r=i(a(12370));var o=function e(t){return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"catalog-item-two-column-left-list catalog-list-column"},t.itemListOne.map(function(e,t){var a=e.html,i=e.title;return n.default.createElement(r.default,{key:"leftListItem"+t,html:a,title:i})})),n.default.createElement("div",{className:"catalog-item-two-column-right-list catalog-list-column"},t.itemListTwo.map(function(e,t){var a=e.html,i=e.title;return n.default.createElement(r.default,{key:"rightListItem"+t,html:a,title:i})})))};o.propTypes={itemListOne:s.default.arrayOf(s.default.shape({html:s.default.string.isRequired,title:s.default.string})).isRequired,itemListTwo:s.default.arrayOf(s.default.shape({html:s.default.string.isRequired,title:s.default.string})).isRequired};var l=o;t.default=l;e.exports=t.default},13004:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=a(11490);var u=i(a(12371));var g=i(a(11888));function p(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var h=function(e){(0,r.default)(a,e);var t=p(a);function a(){var e;(0,n.default)(this,a);e=t.call(this);e.bindActions(u.default);e.exportPublicMethods({getSectionsForCategory:e.getPreviewsForCategory,getCatalogEntryForSection:e.getCatalogEntryForSection,getPreviewEntryForSection:e.getPreviewEntryForSection});return e}(0,s.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.websiteId,i=e.sectionId,n=e.collectionId;var s=new DOMParser;var r=s.parseFromString(t,"text/html");var o=r.querySelector("[data-page-sections] > [".concat(d.SECTION_ID_ATTR,'="').concat(i,'"]'));var l=o.outerHTML;return{collectionId:n,html:l,id:i,websiteId:a}})}},{key:"isEntryForPreview",value:function e(t,a){return t.sectionId===a.id}},{key:"getCatalogEntryForSection",value:function e(a){var t=function e(t){return t.sectionId===a};return this.findCatalogEntry(t)}},{key:"getPreviewEntryForSection",value:function e(t){var a=this.getState(),i=a.entryPreviews;var n=i.find(function(e){return e.id===t});return void 0===n?null:n}}]);return a}(g.default);var f=c.default.createStore(h,"SectionCatalogEntryStore");t.default=f;e.exports=t.default},13005:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getTypeNameById=s;var n=i(a(2620));function s(e){if(!e)return null;var t=n.default.getState();var a=t.get(e);return a?a.get("typeName"):null}},13006:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2378));var s=[n.default.HEADLINES,n.default.LIST,n.default.GALLERY,n.default.IMAGES,n.default.QUOTE,n.default.TEXT,n.default.VIDEO,"-",n.default.APPOINTMENTS,n.default.CONTACT,n.default.DONATION,n.default.FORM,n.default.NEWSLETTER,n.default.MEMBERS,n.default.PRODUCTS,n.default.RESERVATIONS,n.default.SOCIAL,n.default.TOUR_DATES,"-",n.default.CALENDAR,n.default.CHART,n.default.FAQS,n.default.LOCATION,n.default.LOGO_WALL,n.default.MENU,n.default.MUSIC,n.default.PRICING,n.default.REGISTRY,n.default.RESUME,n.default.SUMMARY];t.default=s;e.exports=t.default},13007:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2378));var s=[n.default.FOOTER];t.default=s;e.exports=t.default},13008:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(a(8));var n=i(a(9));var l=i(a(2));var c=i(a(1434));var s=a(2877);var d=a(11490);var u=i(a(4111));var r=function(){function r(e){var t=this;var a=e.currentFirstSection,i=e.destinationNode,n=e.callbacks,s=e.visible;(0,o.default)(this,r);(0,l.default)(this,"onDeviceViewChanges",function(e){if(!t.container)return;e===c.default.DESKTOP?t.show():t.hide()});(0,l.default)(this,"getAddSectionButton",function(){return t.container.querySelector(".".concat(d.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME))});(0,l.default)(this,"handlePlusClicked",function(){t.callbacks.onAddSection()});(0,l.default)(this,"handleFirstSectionMouseEnter",function(e){t.setTop(t.callbacks.getTopOffset());t.container.classList.add("sqs-top-section-hovered")});(0,l.default)(this,"handleFirstSectionMouseLeave",function(e){t.container.classList.remove("sqs-top-section-hovered")});(0,l.default)(this,"handleResize",function(){t.resizeTimeout&&clearTimeout(t.resizeTimeout);t.resizeTimeout=setTimeout(function(){t.callbacks&&t.setTop(t.callbacks.getTopOffset())},100)});(0,l.default)(this,"removeResizeListener",function(){t.destinationNode.ownerDocument.defaultView.removeEventListener("resize",t.handleResize);t.resizeTimeout&&clearTimeout(t.resizeTimeout)});(0,l.default)(this,"bind",function(){var e=t.getAddSectionButton();e&&e.addEventListener("click",t.handlePlusClicked);t.destinationNode.ownerDocument.defaultView.addEventListener("resize",t.handleResize)});this.currentFirstSection=a;this.destinationNode=i;this.callbacks=n;this.container=this.destinationNode.ownerDocument.createElement("div");this.render();this.setTop(this.callbacks.getTopOffset());this.bind();this.syncWithDOM(this.currentFirstSection);this.destinationNode.appendChild(this.container)}(0,n.default)(r,[{key:"hide",value:function e(){this.container.classList.add("hidden")}},{key:"show",value:function e(){this.container.classList.remove("hidden")}},{key:"syncWithDOM",value:function e(t){this.removeMouseListeners();this.currentFirstSection=t;if(this.currentFirstSection){this.container.classList.remove("sqs-top-section-editing-ui-disabled");this.addMouseListeners()}else this.container.classList.add("sqs-top-section-editing-ui-disabled")}},{key:"destroy",value:function e(){var t=this.getAddSectionButton();t&&t.removeEventListener("click",this.handlePlusClicked);this.destinationNode.removeChild(this.container);this.removeResizeListener();this.removeMouseListeners();this.currentFirstSection=null;this.destinationNode=null;this.callbacks=null;this.container=null}},{key:"setTop",value:function e(t){this.container.style.top=t}},{key:"render",value:function e(){var t=u.default.getState(),a=t.view;this.container.classList.add("sqs-section-editing-ui","sqs-top-section-editing-ui");a!==c.default.DESKTOP&&this.container.classList.add("hidden");this.container.innerHTML='<div class="'.concat(d.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME," bottom-add-hit-box ").concat(s.DISABLE_DRAG_SELECTION_CLASSNAME,'" ')+'data-test="section-add-button"><div class="sqs-section-add-button icon-page-section-add-section"></div></div>'}},{key:"addMouseListeners",value:function e(){if(this.currentFirstSection){this.currentFirstSection.addEventListener("mouseenter",this.handleFirstSectionMouseEnter);this.currentFirstSection.addEventListener("mouseleave",this.handleFirstSectionMouseLeave)}}},{key:"removeMouseListeners",value:function e(){if(this.currentFirstSection){this.currentFirstSection.removeEventListener("mouseenter",this.handleFirstSectionMouseEnter);this.currentFirstSection.removeEventListener("mouseleave",this.handleFirstSectionMouseLeave)}}}]);return r}();t.default=r;e.exports=t.default},13009:function(e,t,a){var i=a(13010);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13010:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".PageSectionsAnnotationController-titleEditor-2_oHX {\n  position: relative;\n  z-index: 1;\n}\n.PageSectionsAnnotationController-titleEditor-2_oHX .rte {\n  display: inline-block;\n  min-height: 1em;\n}\n",""]);t.locals={titleEditor:"PageSectionsAnnotationController-titleEditor-2_oHX"}},13011:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(8));var r=i(a(9));var o=i(a(6));var l=i(a(268));var c=i(a(10));var d=i(a(11));var u=i(a(7));var g=i(a(2));var p=a(24);var h=i(a(1434));var f=a(2877);var m=i(a(5072));var v=i(a(1089));var b=i(a(4111));var y=i(a(5067));var S=i(a(1702));var q=i(a(1698));var _=i(a(1700));var C=a(5439);var n=i(a(11884));var E=i(a(114));var k=i(a(87));function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function T(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),true).forEach(function(e){(0,g.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function I(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,d.default)(this,t)}}var A=function(e){(0,c.default)(n,e);var i=I(n);function n(e,t){var a;(0,s.default)(this,n);a=i.call(this,T({},e,{sectionsArea:m.default.FOOTER_SECTIONS}),t);(0,g.default)((0,o.default)(a),"name","FooterSectionsAnnotationController");(0,g.default)((0,o.default)(a),"scrollFooterIntoView",function(){if(!a.isFrameRealAndIfNotDestroy())return;var e=a.state.rootNode.getDOMNode().ownerDocument;e.defaultView.innerHeight+e.defaultView.scrollY<e.body.scrollHeight-10&&e.defaultView.scrollTo(0,e.body.clientHeight)});S.default.setControllerInitialized(true);a.detachFooterSectionsActionListener=y.default.listen(function(){if(!a.isFrameRealAndIfNotDestroy())return;var e=a.getSectionStoreState();if(e.isPageEditing!==a.state.isPageEditing){a.set("isPageEditing",e.isPageEditing);e.isEditing||e.isPageEditing?a.appendEmptyPreviewSectionNodeIfNeeded():a.cleanUpEmptySectionNode()}a.onSectionStoreUpdate(e)});a.addAfterChangeHandler("isMouseOver",a.toggleScrim,(0,o.default)(a));a.addAfterChangeHandler("isEditing",a.afterEditingChange,(0,o.default)(a));a.state.rootNode.getDOMNode().setAttribute("data-test","footer");a.state.rootNode.getDOMNode().classList.add(f.DISABLE_DRAG_SELECTION_CLASSNAME);return a}(0,r.default)(n,[{key:"afterEditingChange",value:function e(){this.toggleScrim();if(this.state.isEditing){this.registerTimer(this.scrollFooterIntoView,300);this.state.rootNode.getDOMNode().classList.remove(f.DISABLE_DRAG_SELECTION_CLASSNAME)}else this.state.rootNode.getDOMNode().classList.add(f.DISABLE_DRAG_SELECTION_CLASSNAME)}},{key:"toggleScrim",value:function e(){var t=q.default.getState(),a=t.isGalleryContentEditorOpen;if(a)return;var i=this.state,n=i.isPageEditing,s=i.isEditing,r=i.isMouseOver,o=i.isScrimEnabled;var l=b.default.getState(),c=l.view;if(c!==h.default.DESKTOP&&!E.default.isFeatureEnabled(k.default.MOBILE_PREVIEW_PAGE_EDITING)){o&&this.hideScrim();return}n&&!s&&r&&!o?this.showScrim():!o||n&&r&&!s||this.hideScrim()}},{key:"cleanUp",value:function e(){(0,l.default)((0,u.default)(n.prototype),"cleanUp",this).call(this);this.cleanUpEmptySectionNode()}},{key:"loadLatestSectionData",value:function e(){return _.default.load()}},{key:"getSectionStoreState",value:function e(){return y.default.getState()}},{key:"getSectionActions",value:function e(){return S.default}},{key:"createEmptySectionNode",value:function e(){return this.createPreviewEmptySectionNode()}},{key:"createPreviewEmptySectionNode",value:function e(){return this.buildEmptySectionNode({title:(0,p.t)("Add Site Footer"),hasButton:true})}},{key:"handleCloseCatalog",value:function e(){(0,l.default)((0,u.default)(n.prototype),"handleCloseCatalog",this).call(this);if(this.isReturnToPageEditModeOnCloseEmptyCatalog){this.isReturnToPageEditModeOnCloseEmptyCatalog=false;(0,C.switchFromFooterEditingToPageEditing)()}}},{key:"onEmptySectionButtonClick",value:function e(t){this.showSectionCatalog()}},{key:"onScrimClicked",value:function e(t){this.isReturnToPageEditModeOnCloseEmptyCatalog=false;if(this.state.isEmpty){this.isReturnToPageEditModeOnCloseEmptyCatalog=true;this.showSectionCatalog()}(0,C.switchFromPageEditingToFooterEditing)();v.default.clickEditSiteFooter()}},{key:"getScrimButtonText",value:function e(){return(0,p.t)("Edit Footer")}},{key:"getScrimFadeOutDuration",value:function e(){return 100}},{key:"destroy",value:function e(){(0,l.default)((0,u.default)(n.prototype),"destroy",this).call(this);this.detachFooterSectionsActionListener();S.default.setControllerInitialized.defer(false)}},{key:"getSectionAreaName",value:function e(){return"footer"}}]);return n}(n.default);t.default=A;e.exports=t.default},13012:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=i(a(8));var n=i(a(9));var r=i(a(268));var s=i(a(10));var o=i(a(11));var u=i(a(7));var g=i(a(722));var p=a(24);var h=i(a(11890));var l=i(a(11621));var c=i(a(11787));var f=i(a(1089));function m(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var v=function(e){(0,s.default)(c,e);var l=m(c);function c(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,d.default)(this,c);var r={strings:{label:(0,p.t)("Page")},showAddItemButton:false,showEditButton:false,pageCollectionDataLoaded:false,pageCollectionData:new e.Y.Squarespace.Models.PageCollectionData({collection:s})};var o=(0,g.default)({},r,{rootNode:i,overlayRootNode:n,collection:s});a=l.call(this,e,o);a.state.pageCollectionData.load(function(){a.set("pageCollectionDataLoaded",true);a.isPageEmpty()&&a.renderEmptyMessage();a.props.annotationController&&"function"===typeof a.props.annotationController.repaintRequest&&a.props.annotationController.repaintRequest()});return a}(0,n.default)(c,[{key:"destroy",value:function e(){this.removeEmptyMessage(true);(0,r.default)((0,u.default)(c.prototype),"destroy",this).call(this)}},{key:"isPageEmpty",value:function e(){var t=this.state.pageCollectionData;return t&&t.get("data")&&t.isLayoutEmpty()}},{key:"getActionList",value:function e(){var t=this;var a=(0,r.default)((0,u.default)(c.prototype),"getActionList",this).call(this);if(!this.state.pageCollectionDataLoaded)return a;var i=this.state.collection;var n=i.get("id");var s=a.some(function(e){return e&&"Edit"===e.label});!s&&n&&this.isPageEmpty()&&a.unshift({name:"edit",label:(0,p.t)("Edit"),handleClick:function e(){f.default.annotationClickCollection("edit-addEmptyContentAndRefreshFrame",i.get("typeName"));t.addEmptyContentAndRefreshFrame(n)}});return a}},{key:"addEmptyContentAndRefreshFrame",value:function e(t){var a=this;h.default.resetPageCollectionData(t).then(function(){return a.Y.Squarespace.Singletons.Location.requestFrameRefresh()}).catch(function(e){var t=e.data&&e.data.message;return new a.Y.Squarespace.Widgets.Alert({"strings.title":(0,p.t)("Something Went Wrong"),"strings.message":t||(0,p.t)("Failed to create placeholder content and edit. Please try again.")})})}}]);return c}((0,c.default)(l.default));t.default=v;e.exports=t.default},13013:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(13014);var o=a(411);var l=a(34);var c=function(){function e(){(0,n.default)(this,e)}(0,s.default)(e,[{key:"load",value:function e(a){var i=this;return function(t){return r.loadPageCollectionData(a).then(function(e){t(e.data||{collectionId:a});return e}).catch(i.notifyError)}}},{key:"save",value:function e(a,i,n){var s=this;return function(t){var e=o.getState().id;n=Object.assign({},n,{id:a,websiteId:e});return r.updatePageCollectionData(i,n).then(function(e){t(e.data);return e}).catch(s.notifyError)}}},{key:"create",value:function e(a,i){var n=this;return function(t){var e=o.getState().id;i=Object.assign({},i,{websiteId:e});return r.createPageCollectionData(a,i).then(function(e){t(e.data);return e}).catch(n.notifyError)}}},{key:"notifyError",value:function e(t){t instanceof Error&&console.error(t);return Promise.reject(t.data&&(t.data.message||t.data.error)||t.message||t.statusText||t.error)}}]);return e}();e.exports=l.createActions(c)},13014:function(e,t,a){"use strict";var r=a(228);var o="/api/page-collection-data";var i={loadPageCollectionData:function e(t){return r.get("".concat(o,"/").concat(t))},updatePageCollectionData:function e(t,a){var i=a.id,n=a.websiteId,s=a.data;return r.put("".concat(o,"/").concat(t),{id:i,collectionId:t,websiteId:n,data:s})},createPageCollectionData:function e(t,a){var i=a.websiteId,n=a.data;return r.post("".concat(o,"/").concat(t),{collectionId:t,websiteId:i,data:n})}};e.exports=i},13015:function(e,t,a){"use strict";var i=a(4);var l=i(a(8));var n=i(a(9));var s=i(a(10));var r=i(a(11));var o=i(a(7));function c(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,o.default)(i),t;if(n()){var a=(0,o.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,r.default)(this,t)}}var d=a(24),u=d.t;var g=a(5994);var p=a(1089);var h=a(13016);var f=a(11538);var m=function(e){(0,s.default)(o,e);var r=c(o);function o(e,t){var a=t.contextCollectionId,i=t.rootNode,n=t.sliceTypeStr,s=t.visible;(0,l.default)(this,o);return r.call(this,e,{contextCollectionId:a,rootNode:i,sliceTypeStr:n,visible:s})}(0,n.default)(o,[{key:"getClassificationLabel",value:function e(){return h.getLabelForSliceType(this.getSliceType())}},{key:"getActionList",value:function e(){var t=this.getClassificationLabel();return[{name:"edit",label:u("Edit {classificationLabel}",{classificationLabel:t}),handleClick:this.handleEditClick}]}},{key:"getSliceType",value:function e(){var t=this.state.sliceTypeStr;return g[t]}},{key:"getUrl",value:function e(){var t=this.getSliceType();var a=this.Y.Squarespace.SliceTypeGroups;var i=h.getUrlForSliceTypeGroupForSliceType(t,a);var n=[];if(this.Y.Squarespace.Utils.isCoverPageOnly())n.push(i);else{n.push("config");n.push("pages");n.push(this.state.contextCollectionId);n.push(i)}return"/"+n.join("/")}},{key:"getShimmySelector",value:function e(){var t=this.state.sliceTypeStr;return'[data-shimmy-id="'.concat(t,'"]')}},{key:"handleEditClick",value:function e(){var t=this.getSliceType();var a=this.Y.Squarespace.SliceTypeGroups;var i=h.getUrlForSliceTypeGroupForSliceType(t,a);p.annotationClick("cover-page-".concat(i));this.Y.Squarespace.Singletons.Location.go(this.getUrl(),{shimmy:this.getShimmySelector(),pathParams:{collectionId:this.state.contextCollectionId}})}}]);return o}(f);e.exports=m},13016:function(e,t,a){"use strict";var i=a(24),n=i.t;var s=a(4155);var r=new Map;r.set(s.HEADING,n("Heading"));r.set(s.SUB_HEADING,n("Sub Heading"));r.set(s.BODY,n("Body"));r.set(s.IMAGE,n("Image"));r.set(s.GALLERY,n("Imagery"));r.set(s.VIDEO,n("Video"));r.set(s.SOCIAL_ICONS,n("Social Icons"));r.set(s.BUTTONS,n("Buttons"));r.set(s.NAVIGATION,n("Navigation"));r.set(s.CUSTOM_FORM,n("Custom Form"));r.set(s.NEWSLETTER,n("Newsletter"));r.set(s.ALBUM,n("Audio"));r.set(s.MAP,n("Map"));r.set(s.LOCK,n("Lock"));r.set(s.PASSWORD,n("Password"));r.set(s.TWITTER,n("Twitter"));r.set(s.LOGO,n("Logo"));r.set(s.ACTION,n("Action"));r.set(s.TEMP_LOCK_INJECT,n("temp_lock_inject"));var o=new Map;o.set("BRANDING_TEXT","branding-text");o.set("ACTION","action");o.set("MEDIA","media");o.set("VIDEO","video");o.set("AUDIO","audio");o.set("LOCATION","location");o.set("TWITTER","twitter");o.set("SOCIAL_ICONS","social-links");e.exports={getLabelForSliceType:function e(t){return r.get(t)},getUrlForSliceTypeGroupForSliceType:function e(t,a){var i=null;for(var n in a){if(!a.hasOwnProperty(n))continue;if(a[n].indexOf(t)>-1){i=n;break}}return o.get(i)}}},13017:function(e,t,a){"use strict";var i=a(4);var d=i(a(8));var n=i(a(10));var s=i(a(11));var r=i(a(7));function o(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,r.default)(i),t;if(n()){var a=(0,r.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var l=a(24),u=l.t;var g=a(722);var c=a(11621);var p=function(e){(0,n.default)(c,e);var l=o(c);function c(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,d.default)(this,c);var r={strings:{label:u("Products"),nestedItemLabel:u("Product"),edit:u("Manage Products")},trackingIdentifier:"product",shimmySelector:".sqs-content-manager-products"};var o=g({},r,{rootNode:i,overlayRootNode:n,collection:s});a=l.call(this,e,o);a.bindNestedContentItems();return a}return c}(c);e.exports=p},13018:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(268));var d=i(a(10));var s=i(a(11));var u=i(a(7));var g=i(a(2));var p=a(906);var h=a(24);var f=i(a(1432));var m=i(a(836));var v=i(a(411));var b=i(a(11569));var n=i(a(11538));var y=i(a(11786));var S=i(a(1089));var q=a(6712);var _=a(6713);function C(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var E=function(e){(0,d.default)(s,e);var n=C(s);function s(e,t){var a;var i=t.rootNode;(0,r.default)(this,s);a=n.call(this,e,{rootNode:i});(0,g.default)((0,l.default)(a),"afterEditableChange",function(){a.state.editable?a.renderEditor():a.destroyEditor();a.syncEditorOverlay()});(0,g.default)((0,l.default)(a),"finish",function(){a.set("dirty",false);a.renderActualWithSpacer()});a.editor=null;a.nodeRect=null;a.renderActualWithSpacer();a.addAfterChangeHandler("editable",a.afterEditableChange,(0,l.default)(a));return a}(0,o.default)(s,[{key:"destroy",value:function e(){this.nodeRect=null;(0,c.default)((0,u.default)(s.prototype),"destroy",this).call(this)}},{key:"getSiteDescription",value:function e(){var t=v.default.getState(),a=t.siteDescription;return a.get("html")}},{key:"getSiteDescriptionOrSpacer",value:function e(){var t=this.getSiteDescription();return"<p></p>"===t?"<p>&nbsp; &nbsp;</p>":t}},{key:"setSiteDescription",value:function e(t,a){return t!==a?v.default.save({siteDescription:t}):Promise.resolve()}},{key:"renderActualWithSpacer",value:function e(){this.state.rootNode.getDOMNode().innerHTML=this.getSiteDescriptionOrSpacer()}},{key:"destroyEditor",value:function e(){this.reenableLinkNavigation();if(!this.editor)return;this.editor.destroy();this.editor=null}},{key:"renderEditor",value:function e(){var t=this;this.disableLinkNavigation();var a=this.state.rootNode.getDOMNode();if(a){this.editor=new y.default(this.Y,{hostNode:a,data:this.getSiteDescription()||"",placeholder:(0,h.t)("Enter a site description…"),multiline:true,menuItems:(0,_.isRosettaRichTextToolbarLayoutEngineEnabled)()?(0,q.getItems)({hasLink:true}):this.Y.Squarespace.Singletons.TextEditorToolbar.getItems({hasLink:true})});this.editor.addDataChangeHandler(function(){return t.set("dirty",true)})}}},{key:"save",value:function e(){return this.setSiteDescription({html:this.editor.data,raw:false,source:this.editor.data},this.getSiteDescription()).then(this.finish)}},{key:"revert",value:function e(){this.editor&&(this.editor.hostNode.innerHTML=this.getSiteDescriptionOrSpacer());return Promise.resolve().then(this.finish)}},{key:"hasPermission",value:function e(){return m.default.hasPermission(p.CONFIG_CHANGE_STRUCTURE)}},{key:"getClassificationLabel",value:function e(){return(0,h.t)("Site Description")}},{key:"getActionList",value:function e(){var t=this;return[{name:"edit",label:(0,h.t)("Edit"),handleClick:function e(){S.default.annotationClick("site-description-inline");t.set("editable",true)}}]}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.preview.window;var a=this.nodeRect;if(!a){var i=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();if(i){a=i.getBoundingClientRect();this.nodeRect=a}}if(a&&a.x+a.width>3*t.innerWidth/4)return f.default.TOP_RIGHT;return(0,c.default)((0,u.default)(s.prototype),"getOverlayEditorAlignPoint",this).call(this)}},{key:"syncEditorOverlay",value:function e(){var t=this;if(!this.state.editable)return b.default.hideEditorOverlay();var a=[{name:"save",label:(0,h.t)("Save"),handleClick:function e(){return t.props.fireRequestSaveChangesEvent(t.state.model)}},{name:"cancel",label:(0,h.t)("Cancel"),handleClick:function e(){return t.props.fireRequestDiscardChangesEvent()}}];b.default.showEditorOverlay({buttons:a,hostNode:this.state.rootNode.getDOMNode(),label:(0,h.t)("Editing Site Description"),trackButtonClick:this.props.trackButtonClick})}}]);return s}(n.default);var k=E;t.default=k;e.exports=t.default},13019:function(e,t,a){"use strict";var i=a(4);var r=i(a(8));var o=i(a(9));var l=i(a(268));var c=i(a(10));var s=i(a(11));var d=i(a(7));function u(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=a(24),g=n.t;var p=a(1924);var h=a(836);var f=a(906),m=f.CONFIG_CHANGE_STRUCTURE;var v=a(1432);var b=a(11538);var y=a(1089);var S=a(114);var q=a(87);var _=function(e){(0,c.default)(s,e);var n=u(s);function s(e,t){var a;var i=t.rootNode;(0,r.default)(this,s);a=n.call(this,e,{rootNode:i});a.siteTitleNodes=null;a.nodeRect=null;return a}(0,o.default)(s,[{key:"destroy",value:function e(){this.siteTitleNodes=null;this.nodeRect=null;(0,l.default)((0,d.default)(s.prototype),"destroy",this).call(this)}},{key:"hasPermission",value:function e(){return h.hasPermission(m)}},{key:"getClassificationLabel",value:function e(){return g("Site Title")}},{key:"getActionList",value:function e(){return[{name:"edit",label:g("Edit"),handleClick:this.handleEditClick}]}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.preview.window;var a=this.nodeRect;if(!a){var i=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();if(i){a=i.getBoundingClientRect();this.nodeRect=a}}if(a&&a.x+a.width>3*t.innerWidth/4)return v.TOP_RIGHT;return(0,l.default)((0,d.default)(s.prototype),"getOverlayEditorAlignPoint",this).call(this)}},{key:"handleEditClick",value:function e(){y.annotationClick("site-title");var t="/design/logo-title";S.isFeatureEnabled(q.SITE_HEADER_FOOTER)&&(t="/design/site-header");this.Y.Squarespace.Singletons.Location.go(t,{shimmy:".logoSettingsPanel",focus:".logoSettingsPanel .siteTitleInput"})}},{key:"findNodesWithOriginalSiteTitle",value:function e(t){var a=this.state.rootNode.getDOMNode();var i=[].concat(Array.from(a.querySelectorAll("*")),a);this.siteTitleNodes=Array.from(i).filter(function(e){return p(e.innerHTML)===t})}},{key:"setSiteTitle",value:function e(t,a){this.siteTitleNodes||this.findNodesWithOriginalSiteTitle(a);this.siteTitleNodes.forEach(function(e){e.innerText=t})}}]);return s}(b);e.exports=_},13020:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(8));var r=i(a(9));var o=i(a(6));var l=i(a(268));var c=i(a(10));var d=i(a(11));var u=i(a(7));var g=i(a(2));var p=i(a(1028));var h=i(a(1090));var f=a(24);var m=i(a(1434));var v=a(2877);var b=i(a(1089));var y=a(757);var S=i(a(34));var q=i(a(1698));var _=i(a(1246));var C=i(a(1700));var E=a(5439);var k=i(a(1920));var w=i(a(4111));var n=i(a(11538));var T=i(a(114));var I=i(a(87));function A(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,d.default)(this,t)}}var x="sqs-scrim-enabled";var L=function(e){(0,c.default)(n,e);var i=A(n);function n(e,t){var c;(0,s.default)(this,n);c=i.call(this,e,t);(0,g.default)((0,o.default)(c),"name","SiteHeaderAnnotationController");(0,g.default)((0,o.default)(c),"handleOnClick",function(e){if(!c.state.isScrimEnabled)return;var t=q.default.getState(),a=t.isEditing,i=t.isFooterEditing;var n=k.default.getState(),s=n.tweakDefinitions;if(!c.state.isScrimEnabled||!a&&!i||0===Object.values(s).length)return;e.stopPropagation();c.hideScrim();var r=c.state.rootNode.getDOMNode().ownerDocument;var o=r.querySelector("html");var l=r.scrollingElement.scrollTop;l>0&&(0,h.default)(o,{top:0,left:0},{easing:"easeInOutSine",maxDuration:100});b.default.clickEditSiteHeader();i&&(0,E.switchFromFooterEditingToPageEditing)();C.default.setHeaderModalOpen(true)});(0,g.default)((0,o.default)(c),"hideScrim",function(){if(!c.state.rootNode||!c.state.rootNode.getDOMNode())return;c.state.rootNode.getDOMNode().classList.remove(x);c.set("isScrimEnabled",false)});c.registerEventListener(c.state.rootNode.getDOMNode(),"click",c.handleOnClick);var a=(0,y.isMobile)()?function(){return setTimeout(c.toggleScrim.bind((0,o.default)(c)))}:c.toggleScrim;c.addAfterChangeHandler("isMouseOver",a,(0,o.default)(c));c.initializeScrim(c.state.rootNode);c.state.rootNode.getDOMNode().setAttribute("data-test","header");c.state.rootNode.getDOMNode().classList.add(v.DISABLE_DRAG_SELECTION_CLASSNAME);c.actionListener=new p.default(S.default);c.actionListener.addActionListener(_.default.NAVIGATE_TO_THEME_EDITOR,c.hideScrim.bind((0,o.default)(c)));return c}(0,r.default)(n,[{key:"destroy",value:function e(){(0,l.default)((0,u.default)(n.prototype),"destroy",this).call(this);if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}}},{key:"initializeScrim",value:function e(t){t.getDOMNode().setAttribute("data-edit-button-text",this.getScrimButtonText())}},{key:"showScrim",value:function e(){if(!this.state.rootNode||!this.state.rootNode.getDOMNode())return;this.state.rootNode.getDOMNode().classList.add(x);this.set("isScrimEnabled",true)}},{key:"getScrimFadeOutDuration",value:function e(){return 100}},{key:"toggleScrim",value:function e(){var t=q.default.getState(),a=t.isGalleryContentEditorOpen,i=t.isEditing,n=t.isFooterEditing;if(a)return;var s=w.default.getState(),r=s.view;if(r!==m.default.DESKTOP&&!T.default.isFeatureEnabled(I.default.MOBILE_PREVIEW_PAGE_EDITING)){this.hideScrim();return}var o=this.state.isMouseOver;o&&(i||n)?this.showScrim():this.hideScrim()}},{key:"getScrimButtonText",value:function e(){return(0,f.t)("Edit Site Header")}}]);return n}(n.default);t.default=L;e.exports=t.default},13021:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=i(a(8));var n=i(a(9));var s=i(a(268));var r=i(a(10));var o=i(a(11));var d=i(a(7));var u=a(24);var g=i(a(0));var p=i(a(60));var h=i(a(13022));var f=i(a(229));var m=i(a(128));var v=a(515);var b=i(a(1432));var y=i(a(13033));var l=i(a(12367));var S=i(a(1089));function q(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var _=function(e){(0,r.default)(l,e);var o=q(l);function l(e,t){var a;var i=t.rootNode,n=t.overlayRootNode,s=t.collection;(0,c.default)(this,l);var r={strings:{label:(0,u.t)("Index"),edit:(0,u.t)("Edit"),emptyTitle:(0,u.t)("Empty Index Page"),emptyDescription:(0,u.t)("Click the + to get started adding sections"),addPageLabel:(0,u.t)("Add index section"),editPageAnnotation:(0,u.t)("Manage sections")},pageInsertPoints:[],alwaysShowAnnotationWhenMouseOver:true,placeAnnotationInside:true};a=o.call(this,e,{rootNode:i,overlayRootNode:n,collection:s},r);a.top={};a.top.window=a.preview.window.top;a.top.document=a.top.window.document;a.top.uiMountNode=a.renderTopMountNode();a.bindTopUI();a.bindUI();return a}(0,n.default)(l,[{key:"destroy",value:function e(){this.disableSectionManager();this.onSectionDeleteHandle.detach();this.preview.window.removeEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler);this.preview.document.documentElement.removeEventListener("dblclick",this.onDoubleClickHandler);this.unbindTopUI();this.removeTopMountNode();(0,s.default)((0,d.default)(l.prototype),"destroy",this).call(this)}},{key:"getPreviewFrame",value:function e(){return this.top.document.querySelector(".App")}},{key:"getPreviewFrameContent",value:function e(){return this.top.document.querySelector(".config-website-frame")}},{key:"removeTopMountNode",value:function e(){var t=this.top.uiMountNode;t.parentNode&&t.parentNode.removeChild(t)}},{key:"renderTopMountNode",value:function e(){var t=this.top.document.createElement("div");this.top.document.body.querySelector(".sqs-damask").appendChild(t);return t}},{key:"getActionList",value:function e(){var t=this;var a=[];var i=this.state,n=i.collection,s=i.childAnnotationControllers,r=void 0===s?[]:s;var o=this.getSectionSelectorsForCollection(n);if(!o||!r.length)return a;var l=this.Y.one(o.itemsContainerSelector);if(l&&l.all(o.itemSelector).getDOMNodes().length){var c=this.state.strings.editPageAnnotation;a.push({name:c,label:c,handleClick:function e(){S.default.annotationClickCollection("manage-sections",n.get("typeName"));t.enableSectionManager()}})}return a}},{key:"bindUI",value:function e(){window.CONFIG_PANEL.get("router").onChange(this.onRouterChange.bind(this));this.onDragStartHandler=this.onSectionDragStart.bind(this);this.preview.window.addEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler);this.onSectionDeleteHandle=this.Y.Global.on("stack:collection:deleted",this.removeSectionForCollectionId.bind(this));this.onDoubleClickHandler=this.onSectionDoubleClick.bind(this);this.preview.document.documentElement.addEventListener("dblclick",this.onDoubleClickHandler)}},{key:"isInDragMode",value:function e(){if(!this.stackedItemsController)return false;return this.stackedItemsController.isInDragMode()}},{key:"onDamaskMouseup",value:function e(){if(!this.isInDragMode())return;this.Y.one("body").simulate("mouseup",{})}},{key:"onSectionDragStart",value:function e(){var t=new Date;t.setDate(t.getDate()+14);m.default.set("recently-reordered-section",true,{expires:t});this.renderTopUI(false);this.onDamaskMouseUpHandler=this.onDamaskMouseup.bind(this);this.top.document.body.addEventListener("mouseup",this.onDamaskMouseUpHandler)}},{key:"onSectionDoubleClick",value:function e(t){if(!this.isInDragMode())return;var a=this.getSectionElementForPoint(t.clientX,t.clientY);if(!a)return;var i=this.Y.one(a);var n=a.getBoundingClientRect();var s=this.getAcForNode(i)||this.getAcForOverlayRootNode(i);if(!s)return;if(s.state.collection.get("type")===f.default.COLLECTION_TYPE_PAGE)return;this.Y.one(this.preview.document).one(this.Y.UA.gecko||this.Y.UA.ie?"html":"body").anim({scroll:[0,this.preview.window.scrollY+n.top]},{end:function(){s.state.shimmySelector?this.Y.Squarespace.Singletons.Location.go("/pages/"+s.state.collection.get("id")):s.set("editable",true);this.disableSectionManager()}.bind(this)}).run()}},{key:"initializeEmptyIndex",value:function e(){var a=this.state.strings;this.Y.all(".sqs-helper-page-insert").each(function(e,t){return new this.Y.Squarespace.Widgets.Button({render:e,strings:{text:a.addPageLabel},className:"add-section",icon:true,onClick:function(){var e=this.getPreviewFrameContent().getBoundingClientRect();this.requestNewSection(0,{left:e.left+e.width/2-v.PANEL_WIDTH_PX/2})}.bind(this)})}.bind(this))}},{key:"ensureInitializedECForNode",value:function e(t){var a=this.getAcForNode(t);if(!a){var i=this.getOverlayRootNodeForCollectionWrapper(t);a=this.props.initializeAnnotationControllerForNode(t,i);if(!a)return;this.state.childAnnotationControllers=this.state.childAnnotationControllers||[];this.state.childAnnotationControllers.push(a)}var n=this.props.isNodeVisible(t,true);a.set("visible",n)}},{key:"renderTopUI",value:function e(t){var a={active:t,annotationController:this,showInstructions:!m.default.get("recently-reordered-section"),bridgedActions:{add:this.requestNewSection.bind(this),delete:this.requestDeleteSection.bind(this),close:this.disableSectionManager.bind(this)}};if(t){a.position=this.getPreviewFrameContent().getBoundingClientRect();a.scroll={x:this.preview.window.pageXOffset,y:this.preview.window.pageYOffset};a.scaleFactor=parseFloat(this.preview.document.body.dataset.sqsScalefactor)}p.default.render(g.default.createElement(h.default,a),this.top.uiMountNode);if(t){this.topUIBound||this.bindTopUI();return}this.unbindTopUI()}},{key:"bindTopUI",value:function e(){this.onShouldRerenderTopUI=function(){if(!this.isInDragMode())return;this.renderTopUI(true)}.bind(this);this.top.window.addEventListener("resize",this.onShouldRerenderTopUI);this.preview.window.addEventListener("scroll",this.onShouldRerenderTopUI);this.topUIBound=true}},{key:"unbindTopUI",value:function e(){this.top.window.removeEventListener("resize",this.onShouldRerenderTopUI);this.preview.window&&this.preview.window.removeEventListener("scroll",this.onShouldRerenderTopUI);this.topUIBound=false}},{key:"getPlaceHolder",value:function e(){var t=this.state.strings;return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><div class="sqs-empty-index-placeholder-instructions"><h3>'+t.emptyTitle+"</h3><p>"+t.emptyDescription+'</p><span class="sqs-helper-page-insert"></span></div></div>')}},{key:"onRouterChange",value:function e(t){this.isInDragMode()&&0!==t.pathname.indexOf("/pages")&&this.disableSectionManager()}},{key:"requestNewSection",value:function e(t,a){this.Y.Squarespace.Singletons.Location.go("/pages");var i={indexCollection:this.state.collection,insertIndex:t,dialogConfig:this.Y.merge({top:window.innerHeight/3,left:window.innerWidth/2-v.PANEL_WIDTH_PX/2,anchorNode:null,overlay:true},a||{})};this.Y.Global.fire("stack:requestNewItem",i)}},{key:"requestDeleteSection",value:function e(t){var a=this.getAcForSectionIndex(t);if(!a)return;this.Y.Squarespace.Singletons.Location.go("/pages");this.Y.Global.fire("stack:collection:requestDelete",{collectionId:a.state.collection.get("id")})}},{key:"enableDragMode",value:function e(t){var a=this.state.collection.get("id");if(!this.stackedItemsController){var i=this.getSectionSelectorsForCollection(this.state.collection);this.stackedItemsController=new y.default;this.stackedItemsController.configure({previewWindow:this.preview.window,previewFrame:this.getPreviewFrameContent(),itemsContainerSelector:i.itemsContainerSelector,itemSelector:i.itemSelector})}this.stackedItemsController.enableDragMode({scaleFactor:.5,indexCollectionId:a,onDragEnd:function(){this.top.document.body.removeEventListener("mouseup",this.onDamaskMouseUpHandler)}.bind(this),onItemIndexChange:function(e){this.Y.Squarespace.Analytics.trackInternal("index_section",{action:"orderChange",from:e.dragStart.index,to:e.nextIndex});this.renderTopUI(true);this.Y.Global.fire("stack:requestReorder",{indexCollectionId:a,index:e.dragStart.index,targetIndex:e.nextIndex})}.bind(this)});if(t)return;this.awaitTransitionEnd([{node:this.getPreviewFrameContent(),transitionProperty:"transform"}],this.onSectionManagerEnterTransitionEnd.bind(this));this.Y.Global.fire("section-manager:enter",{})}},{key:"awaitTransitionEnd",value:function e(i,n){var s=0;i.forEach(function(a){var e=function e(t){if(t.srcElement!==a.node&&t.target!==a.node||t.propertyName!==a.transitionProperty)return;a.node.removeEventListener("transitionend",e);s++;a.onComplete&&a.onComplete.call(this);n&&s>=i.length&&n()};a.node.addEventListener("transitionend",e)})}},{key:"onSectionManagerEnterTransitionEnd",value:function e(){this.renderTopUI(true);var t=this.getPreviewFrame();var a="App";var i=function(e){if(!e.target.classList.contains(a))return;t.removeEventListener("click",i);this.disableSectionManager()}.bind(this);t.addEventListener("click",i);t.classList.add("zoomed")}},{key:"enableSectionManager",value:function e(){this.Y.Squarespace.Singletons.Location.go("/pages");this.enableDragMode()}},{key:"disableSectionManager",value:function e(){this.Y.Global.fire("section-manager:exit",{});this.renderTopUI(false);this.disableDragMode();if(this.top.window){var t=this.getPreviewFrame();t&&t.classList.remove("zoomed")}}},{key:"disableDragMode",value:function e(){if(!this.stackedItemsController)return;this.stackedItemsController.disableDragMode()}},{key:"getSectionForCollectionId",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;var n=i.find(function(e){return e.state.collection.get("id")===t});return this.getSectionNodeForNode(n.state.rootNode)}},{key:"removeSectionForCollectionId",value:function e(a){var i=this;var t=this.getSectionForCollectionId(a.collectionId);var n=this.getStackedItemWrapperNodes().indexOf(t.getDOMNode());t.remove(true);this.preview.window.dispatchEvent(new CustomEvent("sqs-stacked-items-dom-deleted",{detail:{oldIndex:n,collectionId:a.collectionId}}));var s=this.state.childAnnotationControllers,r=void 0===s?[]:s;var o=r.filter(function(e){var t=e.state.collection.get("id")===a.collectionId;t&&i.props.removeAnnotationController(e);return!t});this.set("childAnnotationControllers",o);this.disableDragMode();this.syncChildCollectionAnnotationControllers();this.renderPlaceholder();this.enableDragMode(true);this.renderTopUI(true)}},{key:"getAcForSectionIndex",value:function e(t){var a=this.getStackedItemWrapperNodes()[t];var i=this.Y.one(a);return this.getAcForNode(i)||this.getAcForOverlayRootNode(i)}},{key:"getAcForOverlayRootNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;return i.find(function(e){return e.state.overlayRootNode===t})}},{key:"getSectionNodeForNode",value:function e(t){var a=this.getSectionSelectorsForCollection(this.state.collection);if(!a)return;var i=t;i.getDOMNode().matches(a.itemSelector)||(i=t.ancestor(a.itemSelector));return i}},{key:"getSectionElementForPoint",value:function e(t,a){var i=this.getStackedItemWrapperNodes();var n={x:t,y:a};function s(e,t){var a=e.getBoundingClientRect();return t.x>=a.left&&t.x<=a.right&&t.y>=a.top&&t.y<=a.bottom}for(var r=0;r<i.length;r++)if(s(i[r],n))return i[r]}},{key:"getOverlayRootNodeForCollectionWrapper",value:function e(t){var a=this.getSectionNodeForNode(t);if(!this.getAcForOverlayRootNode(a))return a}},{key:"getStackedItemWrapperNodes",value:function e(){var t=this.getSectionSelectorsForCollection(this.state.collection);if(!t)return;var a=this.Y.one(t.itemsContainerSelector);var i=a.all(t.itemSelector);return i.getDOMNodes()}},{key:"getOverlayEditorAlignPoint",value:function e(){return b.default.TOP_RIGHT}},{key:"getSectionSelectorsForCollection",value:function e(t){if(!t)return;var a=this.Y.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(t);var i=this.Y.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(a);if(!i)return;var n={itemSelector:"[data-collection-id]",itemsContainerSelector:'[data-collection-id="{indexCollection.id}"]'};var s=a.getTemplateConfiguration().get("indexItemSelectors");var r=s||n;return this.substituteSelectors(this.Y.merge(r),t.toJSON(),a.toJSON())}},{key:"substituteSelectors",value:function e(t,a,i){for(var n in t){var s=this.Y.Squarespace.Lang.sub(t[n],{indexCollection:i,collection:a});t[n]=s}return t}}]);return l}(l.default);t.default=_;e.exports=t.default},13022:function(e,t,a){"use strict";var i=a(4);var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=a(1);var p=a(0);var h=a(263),f=h.CSSTransitionGroup;var m=a(24),v=m.t;var b=a(39),y=b.T;var S=a(12378);var q=a(13023);var _=a(15);var C=a(13029);var E=a(1919),k=E.default;var w={enter:{className:C["transition-enter"],from:{opacity:0},to:{opacity:1}},leave:{className:C["transition-leave"],from:{opacity:1},to:{opacity:0}}};var T=function(e){(0,c.default)(s,e);var n=g(s);function s(){var a;(0,r.default)(this,s);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a=n.call.apply(n,[this].concat(t));(0,u.default)((0,l.default)(a),"getAnnotationController",function(){return a.props.annotationController});(0,u.default)((0,l.default)(a),"getSectionNodes",function(){return a.getAnnotationController().getStackedItemWrapperNodes()});(0,u.default)((0,l.default)(a),"getSectionBoundingDOMRect",function(e){var t=e.getBoundingClientRect(),a=t.width,i=t.height,n=t.top,s=t.left;var r=e.ownerDocument.defaultView,o=r.pageYOffset,l=r.pageXOffset;return{width:a,height:i,top:n+o,left:s+l,right:s+a+l,bottom:n+i+o}});(0,u.default)((0,l.default)(a),"createActionConfig",function(e,t,a){return{location:e,targetIndex:t,action:a}});(0,u.default)((0,l.default)(a),"getActionsPointsForSection",function(e){var t=[a.createActionConfig("right",e,"delete"),a.createActionConfig("bottom",e+1,"add")];e||t.push(a.createActionConfig("top",e,"add"));return t});(0,u.default)((0,l.default)(a),"renderCloseButton",function(){return p.createElement(k,{backLabel:v("Back"),onBackClick:a.props.bridgedActions.close,onDoubleClick:a.props.bridgedActions.close})});(0,u.default)((0,l.default)(a),"renderInstructions",function(){var e=a.props.showInstructions;if(!e)return null;return p.createElement("div",{className:C.instructionsContainer},p.createElement(y,{project:"apps.App"},"To reorder a section, click and drag it into position"))});return a}(0,o.default)(s,[{key:"render",value:function e(){var a=this;var t=this.props,i=t.active,n=t.scaleFactor,s=t.position,r=t.scroll,o=t.bridgedActions;if(!i)return null;var l=this.getSectionNodes().map(function(e,t){return p.createElement(q,{key:"index-editor-panel-".concat(t),boundingDOMRect:a.getSectionBoundingDOMRect(e),scaleFactor:n,actionPoints:a.getActionsPointsForSection(t),bridgedActions:o})});var c=S.absolutePositionFromBoundingRect(s);var d={transform:"translate3d("+[-r.x*n,-r.y*n,0].join("px,")+")"};var u=0!==r.y;return p.createElement(f,{key:"index-editor",wrapChildWithTag:false,transitions:w},p.createElement("div",{className:_(C.wrapper,u&&C.isScrolled),style:c,ref:"wrapper"},this.renderCloseButton(),this.renderInstructions(),p.createElement("div",{className:C.panels,style:d},l)))}}]);return s}(p.Component);(0,u.default)(T,"propTypes",{active:n.bool,annotationController:n.object.isRequired,scaleFactor:n.number,position:n.object,scroll:n.object,bridgedActions:n.object,showInstructions:n.bool});e.exports=T},13023:function(e,t,a){"use strict";var i=a(4);var l=i(a(5));var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var c=i(a(7));var d=i(a(2));function u(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var g=a(1);var p=a(0);var h=a(13024);var f=a(12378);var m=a(13027);var v=function(e){(0,r.default)(a,e);var t=u(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.boundingDOMRect,i=t.scaleFactor,n=t.actionPoints,s=t.bridgedActions;var r=f.absolutePositionFromBoundingRect(a,i);var o=n.map(function(e,t){return p.createElement(h,(0,l.default)({},e,{bridgedActions:s,key:"".concat(e.location,"-").concat(t)}))});return p.createElement("div",{className:m.panel,style:r},p.createElement("div",{className:m.relWrapper},o))}}]);return a}(p.Component);(0,d.default)(v,"propTypes",{boundingDOMRect:g.object,scaleFactor:g.number,actionPoints:g.array,bridgedActions:g.object});e.exports=v},13024:function(e,t,a){"use strict";var i=a(4);var r=i(a(8));var s=i(a(9));var o=i(a(6));var l=i(a(10));var c=i(a(11));var d=i(a(7));var u=i(a(2));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var n=a(1);var p=a(0);var h=a(15);var f=a(13025);var m=function(e){(0,l.default)(n,e);var i=g(n);function n(){var s;(0,r.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=i.call.apply(i,[this].concat(t));(0,u.default)((0,o.default)(s),"onClick",function(e){var t=s.props,a=t.action,i=t.bridgedActions,n=t.targetIndex;i[a](n,{top:e.target.getBoundingClientRect().top,constrain:true})});return s}(0,s.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.location,i=t.action;return p.createElement("div",{"data-action":i,onClick:this.onClick,className:h(f.actionButton,f[a])},p.createElement("span",{title:i,className:f[i]}))}}]);return n}(p.Component);(0,u.default)(m,"propTypes",{location:n.string.isRequired,targetIndex:n.number.isRequired,action:n.string.isRequired,bridgedActions:n.object});e.exports=m},13025:function(e,t,a){var i=a(13026);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13026:function(e,t,a){t=e.exports=a(16)(false);t.i(a(200),"");var i=a(153);var n=i(a(913));var s=i(a(914));var r=i(a(915));var o=i(a(916));var l=i(a(917));var c=i(a(918));var d=i(a(919));var u=i(a(920));var g=i(a(921));var p=i(a(922));var h=i(a(923));var f=i(a(924));var m=i(a(925));var v=i(a(926));var b=i(a(927));var y=i(a(928));var S=i(a(929));var q=i(a(930));var _=i(a(931));var C=i(a(932));var E=i(a(933));var k=i(a(934));var w=i(a(935));var T=i(a(936));var I=i(a(937));var A=i(a(938));var x=i(a(939));var L=i(a(940));var D=i(a(941));var N=i(a(942));var O=i(a(943));var R=i(a(944));var P=i(a(945));var B=i(a(946));var M=i(a(947));var F=i(a(948));var U=i(a(949));var V=i(a(950));var z=i(a(951));var H=i(a(952));var G=i(a(953));var W=i(a(954));var Y=i(a(955));var j=i(a(956));var Q=i(a(957));var X=i(a(958));var K=i(a(959));var J=i(a(960));var Z=i(a(961));var $=i(a(962));var ee=i(a(963));var te=i(a(964));var ae=i(a(965));var ie=i(a(966));var ne=i(a(967));var se=i(a(968));var re=i(a(969));var oe=i(a(970));var le=i(a(971));t.push([e.i,'/**\n * Retina-friendly icon creator\n * @param  {string} @iconName Name of the icon image; presumes an @2x version.\n * @param  {color} [color=transparent] Background color on the icon.\n *\n * Uses named parameters: http://lesscss.org/features/#mixins-parametric-feature-named-parameters\n *\n * If your icon is interactable/clickable, set a :hover rule with opacity: 1\n */\n/**\n * For posterity:\n *\n * .myLocalClass {\n *     composes: checkAfter from "styles/utils/icons.less";\n * }\n */\n.ActionButton-search-3zmwC {\n  background: white url('+n+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-search-3zmwC {\n    background-image: url("+s+");\n    background-size: 16px;\n  }\n}\n.ActionButton-add-wVoth {\n  background: transparent url("+r+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-add-wVoth {\n    background-image: url("+o+");\n    background-size: 16px;\n  }\n}\n.ActionButton-clear-1DNjE {\n  background: transparent url("+l+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-clear-1DNjE {\n    background-image: url("+c+");\n    background-size: 16px;\n  }\n}\n.ActionButton-clearLight-SqHvQ {\n  background: transparent url("+d+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-clearLight-SqHvQ {\n    background-image: url("+u+");\n    background-size: 16px;\n  }\n}\n.ActionButton-trash-2lDbz {\n  background: transparent url("+g+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trash-2lDbz {\n    background-image: url("+p+");\n    background-size: 12px 16px;\n  }\n}\n.ActionButton-trash-2lDbz:hover {\n  background: transparent url("+h+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trash-2lDbz:hover {\n    background-image: url("+f+");\n    background-size: 12px 16px;\n  }\n}\n.ActionButton-trashLight-1esTe {\n  background: transparent url("+m+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trashLight-1esTe {\n    background-image: url("+v+");\n    background-size: 12px 16px;\n  }\n}\n.ActionButton-trashLight-1esTe:hover {\n  background: transparent url("+h+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trashLight-1esTe:hover {\n    background-image: url("+f+");\n    background-size: 12px 16px;\n  }\n}\n.ActionButton-check-2tYNm {\n  background: #3e3e3e url("+b+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-check-2tYNm {\n    background-image: url("+y+");\n    background-size: 9px;\n  }\n}\n.ActionButton-checkDark-1_a4y {\n  background: transparent url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-checkDark-1_a4y {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.ActionButton-checkAfter-1LcsT:after {\n  background: #3e3e3e url("+b+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-checkAfter-1LcsT:after {\n    background-image: url("+y+");\n    background-size: 9px;\n  }\n}\n.ActionButton-checkDarkAfter-3arrR:after {\n  background: #3e3e3e url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-checkDarkAfter-3arrR:after {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.ActionButton-checkDarkSmallAfter-AWHUl:after {\n  background: #3e3e3e url("+_+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-checkDarkSmallAfter-AWHUl:after {\n    background-image: url("+C+");\n    background-size: 9px;\n  }\n}\n.ActionButton-checkDarkBefore-mnnDn:before {\n  background: transparent url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-checkDarkBefore-mnnDn:before {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.ActionButton-aureusCheck-2WaxV {\n  background: url("+E+") center center no-repeat;\n}\n.ActionButton-upload-3qLJO {\n  background: transparent url("+k+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-upload-3qLJO {\n    background-image: url("+w+");\n    background-size: 32px;\n  }\n}\n.ActionButton-avatar-2Nm1p {\n  background: rgba(0, 0, 0, 0.06) url("+T+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-avatar-2Nm1p {\n    background-image: url("+I+");\n    background-size: 44px;\n  }\n}\n.ActionButton-gearSmall-14ZQy {\n  background: transparent url("+A+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-gearSmall-14ZQy {\n    background-image: url("+x+");\n    background-size: 16px;\n  }\n}\n.ActionButton-pencilSmall-2jyNM {\n  background: transparent url("+L+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-pencilSmall-2jyNM {\n    background-image: url("+D+");\n    background-size: 16px;\n  }\n}\n.ActionButton-trashSmall-3MClw {\n  background: transparent url("+N+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trashSmall-3MClw {\n    background-image: url("+O+");\n    background-size: 9px;\n  }\n}\n.ActionButton-trashSmall-3MClw:hover {\n  background: #f0523d url("+N+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-trashSmall-3MClw:hover {\n    background-image: url("+O+");\n    background-size: 9px;\n  }\n}\n.ActionButton-chevronLight-3R-lI {\n  background: transparent url("+R+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-chevronLight-3R-lI {\n    background-image: url("+P+");\n    background-size: 16px;\n  }\n}\n.ActionButton-chevronRight-1TVT3 {\n  background: transparent url("+B+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-chevronRight-1TVT3 {\n    background-image: url("+M+");\n    background-size: 16px;\n  }\n}\n.ActionButton-chevronDark-nGor9 {\n  background: transparent url("+F+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-chevronDark-nGor9 {\n    background-image: url("+U+");\n    background-size: 16px;\n  }\n}\n.ActionButton-circleLogoDark-3ii-s {\n  background: transparent url("+V+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-circleLogoDark-3ii-s {\n    background-image: url("+z+");\n    background-size: 16px;\n  }\n}\n.ActionButton-gettyLogo-3NO-7 {\n  background: transparent url("+H+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n  opacity: 1.0;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-gettyLogo-3NO-7 {\n    background-image: url("+G+");\n    background-size: 93px;\n  }\n}\n.ActionButton-gettyIconLight-1k3nn {\n  background: transparent url("+W+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-gettyIconLight-1k3nn {\n    background-image: url("+Y+");\n    background-size: 16px;\n  }\n}\n.ActionButton-chevronUpDark-3z-qX {\n  background: transparent url("+j+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-chevronUpDark-3z-qX {\n    background-image: url("+Q+");\n    background-size: 16px;\n  }\n}\n.ActionButton-chevronDownDark-xJJfR {\n  background: transparent url("+F+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-chevronDownDark-xJJfR {\n    background-image: url("+U+");\n    background-size: 16px;\n  }\n}\n.ActionButton-arrowDark-2Uqga {\n  background: transparent url("+X+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-arrowDark-2Uqga {\n    background-image: url("+K+");\n    background-size: 16px;\n  }\n}\n.ActionButton-file-3KDv0 {\n  background: transparent url("+J+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-file-3KDv0 {\n    background-image: url("+Z+");\n    background-size: 32px;\n  }\n}\n.ActionButton-shoppingCart-2yn3K {\n  background: transparent url("+$+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-shoppingCart-2yn3K {\n    background-image: url("+ee+");\n    background-size: 16px;\n  }\n}\n.ActionButton-squarespace-rlBhD {\n  background: transparent url("+te+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-squarespace-rlBhD {\n    background-image: url("+ae+");\n    background-size: 33px;\n  }\n}\n.ActionButton-zoomin-3AsNB {\n  background: transparent url("+ie+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-zoomin-3AsNB {\n    background-image: url("+ne+");\n    background-size: 16px;\n  }\n}\n.ActionButton-zoomout-3178O {\n  background: transparent url("+se+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-zoomout-3178O {\n    background-image: url("+re+");\n    background-size: 16px;\n  }\n}\n.ActionButton-squarespaceLight-3Qyls {\n  background: transparent url("+oe+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n  width: 24px;\n  height: 24px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .ActionButton-squarespaceLight-3Qyls {\n    background-image: url("+le+");\n    background-size: 24px;\n  }\n}\n.ActionButton-actionButton-1gB6I {\n  background: #fff;\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.1), 0px 0px 3px 0px rgba(0, 0, 0, 0.08);\n  border-radius: 33px;\n  cursor: pointer;\n  font-size: 16.5px;\n  height: 33px;\n  pointer-events: all;\n  position: absolute;\n  width: 33px;\n  text-align: center;\n  transition: all 0.1s ease-in-out;\n  z-index: 9;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.ActionButton-actionButton-1gB6I span {\n  display: block;\n  width: 33px;\n  height: 33px;\n  opacity: 1;\n}\n.ActionButton-actionButton-1gB6I span.ActionButton-delete-1znlk {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.ActionButton-actionButton-1gB6I span.ActionButton-delete-1znlk:after {\n  content: ' ';\n  width: 16.5px;\n  height: 3px;\n  background: #fff;\n  border-radius: 2px;\n  display: block;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-top-2j5SP, .ActionButton-actionButton-1gB6I.ActionButton-bottom-AOU3b {\n  left: 50%;\n  margin-left: -16.5px;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-right-3Dbq1, .ActionButton-actionButton-1gB6I.ActionButton-left-3rZTF {\n  top: 50%;\n  margin-top: -16.5px;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-top-2j5SP {\n  top: -16.5px;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-bottom-AOU3b {\n  bottom: -16.5px;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-right-3Dbq1 {\n  right: -55px;\n}\n.ActionButton-actionButton-1gB6I.ActionButton-left-3rZTF {\n  left: -55px;\n}\n.ActionButton-add-wVoth {\n}\n[data-action=\"delete\"] {\n  background-color: #f0523d;\n}\n",""]);t.locals={search:"ActionButton-search-3zmwC",add:"ActionButton-add-wVoth "+a(200).locals["plus"],clear:"ActionButton-clear-1DNjE",clearLight:"ActionButton-clearLight-SqHvQ",trash:"ActionButton-trash-2lDbz",trashLight:"ActionButton-trashLight-1esTe",check:"ActionButton-check-2tYNm",checkDark:"ActionButton-checkDark-1_a4y",checkAfter:"ActionButton-checkAfter-1LcsT",checkDarkAfter:"ActionButton-checkDarkAfter-3arrR",checkDarkSmallAfter:"ActionButton-checkDarkSmallAfter-AWHUl",checkDarkBefore:"ActionButton-checkDarkBefore-mnnDn",aureusCheck:"ActionButton-aureusCheck-2WaxV",upload:"ActionButton-upload-3qLJO",avatar:"ActionButton-avatar-2Nm1p",gearSmall:"ActionButton-gearSmall-14ZQy",pencilSmall:"ActionButton-pencilSmall-2jyNM",trashSmall:"ActionButton-trashSmall-3MClw",chevronLight:"ActionButton-chevronLight-3R-lI",chevronRight:"ActionButton-chevronRight-1TVT3",chevronDark:"ActionButton-chevronDark-nGor9",circleLogoDark:"ActionButton-circleLogoDark-3ii-s",gettyLogo:"ActionButton-gettyLogo-3NO-7",gettyIconLight:"ActionButton-gettyIconLight-1k3nn",chevronUpDark:"ActionButton-chevronUpDark-3z-qX",chevronDownDark:"ActionButton-chevronDownDark-xJJfR",arrowDark:"ActionButton-arrowDark-2Uqga",file:"ActionButton-file-3KDv0",shoppingCart:"ActionButton-shoppingCart-2yn3K",squarespace:"ActionButton-squarespace-rlBhD",zoomin:"ActionButton-zoomin-3AsNB",zoomout:"ActionButton-zoomout-3178O",squarespaceLight:"ActionButton-squarespaceLight-3Qyls",actionButton:"ActionButton-actionButton-1gB6I",delete:"ActionButton-delete-1znlk",top:"ActionButton-top-2j5SP",bottom:"ActionButton-bottom-AOU3b",right:"ActionButton-right-3Dbq1",left:"ActionButton-left-3rZTF"}},13027:function(e,t,a){var i=a(13028);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13028:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".Editor-panel-1J9yY {\n  position: absolute;\n}\n.Editor-panel-1J9yY .Editor-relWrapper-1GkZH {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n",""]);t.locals={panel:"Editor-panel-1J9yY",relWrapper:"Editor-relWrapper-1GkZH"}},13029:function(e,t,a){var i=a(13030);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13030:function(e,t,a){t=e.exports=a(16)(false);var i=a(153);var n=i(a(13031));var s=i(a(13032));t.push([e.i,".IndexEditor-wrapper-2DzsL {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: 999;\n  pointer-events: none;\n}\n.IndexEditor-wrapper-2DzsL:before, .IndexEditor-wrapper-2DzsL:after {\n  content: ' ';\n  position: fixed;\n  width: 100%;\n  height: 22px;\n  left: 0;\n  z-index: 9;\n}\n.IndexEditor-wrapper-2DzsL:before {\n  top: 0;\n  opacity: 0;\n  transition: opacity 0.4s ease-in-out;\n  background: linear-gradient(to bottom, #f2f0f2 75%, rgba(242, 242, 242, 0) 100%);\n}\n.IndexEditor-wrapper-2DzsL.IndexEditor-isScrolled-3TFlL:before {\n  opacity: 1;\n}\n.IndexEditor-wrapper-2DzsL:after {\n  bottom: 0;\n  background: linear-gradient(to top, #f2f0f2 75%, rgba(242, 242, 242, 0) 100%);\n}\n.IndexEditor-panels-2mcO6 {\n  position: relative;\n}\n.IndexEditor-backContainer-twTLi {\n  position: fixed;\n  pointer-events: all;\n}\n.IndexEditor-instructionsContainer-3NLak {\n  position: fixed;\n  left: 22px;\n  top: 50%;\n  transform: translateY(-50%);\n  display: flex;\n}\n.IndexEditor-instructionsContainer-3NLak span {\n  width: 176px;\n  display: inline-block;\n  color: #797979;\n  font-size: 11px;\n  line-height: 16px;\n}\n.IndexEditor-instructionsContainer-3NLak:before {\n  content: ' ';\n  display: inline-block;\n  width: 33px;\n  height: 33px;\n  margin-right: 11px;\n  background: url("+n+") no-repeat center center;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .IndexEditor-instructionsContainer-3NLak:before {\n    background-image: url("+s+") no-repeat center center;\n    background-size: 33px;\n  }\n}\n.IndexEditor-transition-enter-2dC-u {\n  transition: opacity 0.2s ease-in-out;\n}\n.IndexEditor-transition-leave-3kEwS {\n  transition: opacity 0.2s ease-in-out;\n}\n",""]);t.locals={wrapper:"IndexEditor-wrapper-2DzsL",isScrolled:"IndexEditor-isScrolled-3TFlL",panels:"IndexEditor-panels-2mcO6",backContainer:"IndexEditor-backContainer-twTLi",instructionsContainer:"IndexEditor-instructionsContainer-3NLak","transition-enter":"IndexEditor-transition-enter-2dC-u","transition-leave":"IndexEditor-transition-leave-3kEwS"}},13031:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAv0lEQVRYhe2XWw6DIBBFz226VhfVzd5+VIyl2vAUPzgJIWOAuQ4MjgKwzR5JC52w/drbz9SBLTh6sUdrJ7mcRiAFSQAGFG9jKrURcNRfJ0CS/9ndBdgWoOB/ta8T0IqgungPa9myoCSEaxaE+dnOJbkqDUtTb8/wMzAFTAFTwBQwXECLiggov5aHfw0/3u2vBizxs6MWph+tcTL+Z93hZ6C2JtyK0lE14andXcCKoj6bFhVRsXO480XU8w/5VrwBbWmFJBmKMXUAAAAASUVORK5CYII="},13032:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABKUlEQVR4nO2b0QqCQBBFd6Jv7aP62fHFokLXNfIeY+6BoEzozmFchZ1aM7WJzOyfEHETZTmEzLz3vr+ogpyV645zuyZPyFDnlu8AC6AD0NACcn5hkAJy5b0USsBSwYgEQkCvULkEtYCRAqUS9jwI/YL4+Jwrx2XQdwEcC6AD0ESDH0RoynfA8y6QmdhKTBAR2Zo7wAIsgA5AYwF0ABoLoAPQWAAdgMYC6AA0FkAHoLEAOgCNBdABaCyADkBjAXQAGgugA9CUF+C9QToAzfCw9NbQ8Vc/Pu/PHbEvOZq7fAdYAB2ARjol9rjmt44rZxWkHTBSmHpQQ34J9AokplSQNWCpUGpEB1sEXwsm55PUo7JvnGEwq/xt0ALoADTDa8C//4N0jfIdYKozAV7BSMkaI4zdAAAAAElFTkSuQmCC"},13033:function(e,t,a){"use strict";e.exports=a(13034)},13034:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(13035);var o=a(13036);var l=a(13037);var u=a(12379);var g=a(11791);var p=a(12380);var h=[];var c=function(){function e(){(0,n.default)(this,e);this.settings={itemsContainerSelector:null,itemSelector:null,previewWindow:null,previewFrame:null}}(0,s.default)(e,[{key:"configure",value:function e(t){for(var a in t)this.settings[a]=t[a];if(!this.settings.previewFrame||!this.settings.previewWindow){console.warn("Missing reference to preview frame or window");return}this.Dom=new r({window:t.previewWindow,previewFrame:t.previewFrame,itemsContainerSelector:t.itemsContainerSelector,itemSelector:t.itemSelector});this.Transition=new l({Dom:this.Dom});this.Dragger=new o({Dom:this.Dom,Transition:this.Transition});this.settings.previewFrame.style.transformOrigin="top center"}},{key:"isInDragMode",value:function e(){return u.isInDragMode}},{key:"addItemMarkers",value:function e(){var t=this.Dom.getItems();for(var a=0;a<t.length;a++)t[a].setAttribute("data-item","");var i=this.Dom.getItemsWrapper();i.setAttribute("data-item-wrapper","")}},{key:"enableDragMode",value:function e(t){var a=this;var i=this.settings.previewWindow;p.dispatch(p.events.BEFORE_FLIGHT_MODE_ENABLED,i);this.addItemMarkers();this.Dragger.onItemIndexChange=t.onItemIndexChange;u.isInDragMode=true;this.Dom.storeItemViewportResponsiveHeights();this.Dom.zoomOutFrame(t);this.onDragStart=function(e){a.Dragger.dragStart(e,e.target)};this.onDrag=this.Dragger.drag.bind(this.Dragger);this.onDragEnd=this.Dragger.dragEnd.bind(this.Dragger,t);i.document.addEventListener("touchstart",this.onDragStart,false);i.document.addEventListener("touchmove",this.onDrag,false);i.document.addEventListener("touchend",this.onDragEnd,false);i.document.addEventListener("mousedown",this.onDragStart,false);i.document.addEventListener("mousemove",this.onDrag,false);i.document.addEventListener("mouseup",this.onDragEnd,false);this.Dragger.initializeDraggers();p.dispatch(p.events.FLIGHT_MODE_ENABLED,i)}},{key:"disableDragMode",value:function e(){var t=this.settings.previewWindow;p.dispatch(p.events.BEFORE_FLIGHT_MODE_DISABLED,t);this.Dom.zoomInFrame();t.document.removeEventListener("touchstart",this.onDragStart,false);t.document.removeEventListener("touchmove",this.onDrag,false);t.document.removeEventListener("touchend",this.onDragEnd,false);t.document.removeEventListener("mousedown",this.onDragStart,false);t.document.removeEventListener("mousemove",this.onDrag,false);t.document.removeEventListener("mouseup",this.onDragEnd,false);this.Dragger.destroyDraggers();this.Dragger.onItemIndexChange=null;this.Dom.restoreItemViewportResponsiveHeights();t.document.documentElement.classList.remove(g.CLASS_NAME_ITEMS_REORDERING);t.document.body.classList.remove(g.CLASS_NAME_ITEMS_REORDERING);u.isInDragMode=false;p.dispatch(p.events.FLIGHT_MODE_DISABLED,t)}},{key:"moveItem",value:function e(i,n,s){var r=this;var o=this.settings.previewWindow;var l=this.Dom.getItemAtIndex(i);n=Math.min(n,this.Dom.getItems().length-1);if(!l||n<0||i===n)return;if(u.isInFlight){h.push({action:"moveItem",fromIndex:i,toIndex:n,opts:s});return}u.isInFlight=true;var c=this.Transition.getPreflightValuesForItem(l);var t=this.Transition.getDestinationValuesForItem(i,n);p.dispatch(p.events.BEFORE_FLIGHT_START,o);this.Dom.storeItemStyles();this.Transition.prepareItemForFlight(l,c,true);this.Transition.prepareSiblingsForFlight(l,i,c);o.document.body.classList.add(g.CLASS_NAME_ITEMS_REORDERING);o.document.body.classList.add(g.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);p.dispatch(p.events.FLIGHT_MODE_ENABLED,o);p.dispatch(p.events.FLIGHT_START,o);this.Transition.setDestinationForFlightItem(l,c,t);this.Transition.setDestinationForSiblings(l,i,n);function a(){p.dispatch(p.events.FLIGHT_MOVE,o);u.isInFlight&&requestAnimationFrame(a)}a();var d=function e(){if("none"!==l.style.boxShadow)r.Transition.setStylesForSimulatedPostFlight(l);else{l.removeEventListener("transitionend",e);p.dispatch(p.events.BEFORE_FLIGHT_END,o);r.Dom.switchDOMTree(l,n);r.Dom.restoreStyles();p.dispatch(p.events.DOM_REORDER,o,{item:l,oldIndex:i,newIndex:n});l.classList.remove(g.CLASS_NAME_IN_FLIGHT);if(s.onItemIndexChange){var t={dragStart:{element:c,mouse:null,index:i},dragTransform:{top:0,left:0},item:l,nextIndex:n};s.onItemIndexChange(t)}u.isInFlight=false;o.document.body.classList.remove(g.CLASS_NAME_ITEMS_REORDERING);o.document.body.classList.remove(g.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);p.dispatch(p.events.AFTER_FLIGHT_END,o);p.dispatch(p.events.FLIGHT_MODE_DISABLED,o);if(h.length){var a=h[0];r[a.action](a.fromIndex,a.toIndex,a.opts);h.shift()}}};l.addEventListener("transitionend",d)}},{key:"dragStart",value:function e(t,a){this.Dragger.dragStart(t,a,t.target)}}]);return e}();e.exports=c},13035:function(e,t,a){"use strict";var i=a(4);var r=i(a(27));var n=i(a(8));var s=i(a(9));var o=a(11791);var l=a(11891);var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);this.minScaleFactor=e.minScaleFactor||l.MIN_SCALE_FACTOR;this.window=e.window||window;this.previewFrame=e.previewFrame;this.itemsContainerSelector=e.itemsContainerSelector;this.itemSelector=e.itemSelector;this.itemsWithStoredStyles=[]}(0,s.default)(t,[{key:"storeItemStyles",value:function e(){var i=this;var t=this.getItems();t.forEach(function(e){var t=e.getAttribute(o.STYLE_STORE_DATA_ATTRIBUTE);var a=e.getAttribute("style");!t&&a&&e.setAttribute(o.STYLE_STORE_DATA_ATTRIBUTE,a);i.itemsWithStoredStyles.push(e)})}},{key:"restoreStyles",value:function e(){var t=this.itemsWithStoredStyles;t.forEach(function(e){var t=e.getAttribute(o.STYLE_STORE_DATA_ATTRIBUTE);t?e.setAttribute("style",t):e.removeAttribute("style");e.removeAttribute(o.STYLE_STORE_DATA_ATTRIBUTE)});this.itemsWithStoredStyles=[]}},{key:"switchDOMTree",value:function e(t,a){var i=this.getItems();var n=t.parentNode;var s=i.indexOf(t);var r=i[a];s<a&&(r=i[a+1]);n.insertBefore(t,r)}},{key:"getItems",value:function e(){var t=this.window.document.querySelector(this.itemsContainerSelector);var a=t.querySelectorAll(this.itemSelector);return Array.prototype.slice.call(a)}},{key:"getItemsWrapper",value:function e(){return this.window.document.querySelector(this.itemsContainerSelector)}},{key:"getItemAtIndex",value:function e(t){var a=this.getItems();return a[t]}},{key:"nodeIsValidDragTarget",value:function e(t){var a=this.window.document.querySelector(this.itemsContainerSelector);var i=a.querySelectorAll(this.itemSelector);return-1!==Array.prototype.indexOf.call(i,t)}},{key:"setAndStoreHeight",value:function e(a){var t=o.RELATIVE_HEIGHT_PROPS.reduce(function(e,t){a.style[t]&&e.push("".concat(t,":").concat(a.style[t]));a.style.setProperty(t,Math.round(a.offsetHeight)+"px","important");return e},[]).join(";");a.setAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE,t)}},{key:"resetAndRestoreHeight",value:function e(a){var t=a.getAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE);var s={};t&&t.split(";").forEach(function(e){var t=e.split(":"),a=(0,r.default)(t,2),i=a[0],n=a[1];s[i]=n});o.RELATIVE_HEIGHT_PROPS.forEach(function(e){var t=s[e]||"";a.style.setProperty(e,t)});a.removeAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE)}},{key:"storeItemViewportResponsiveHeights",value:function e(){var t=this.getItems();t.forEach(this.setAndStoreHeight)}},{key:"restoreItemViewportResponsiveHeights",value:function e(){var t=this.getItems();if(!t.length)return;t.forEach(this.resetAndRestoreHeight)}},{key:"storeItemsContainerHeight",value:function e(){var t=this.getItemsWrapper();if(!t)return;this.setAndStoreHeight(t)}},{key:"restoreItemsContainerHeight",value:function e(){var t=this.getItemsWrapper();if(!t)return;this.resetAndRestoreHeight(t)}},{key:"calculateScaleFactor",value:function e(){var t=this.window.innerHeight/this.window.document.documentElement.offsetHeight;if(t>=this.minScaleFactor)return t;return this.minScaleFactor}},{key:"zoomInFrame",value:function e(){if(!this.frameWasZoomedOut)return;var t=this.previewFrame;var a=this.window;t.style.transform="";t.style.maxHeight="";t.style.height="";t.style.transformOrigin="";a.document.body.removeAttribute("data-sqs-scalefactor");this.frameWasZoomedOut=false}},{key:"zoomOutFrame",value:function e(t){this.frameWasZoomedOut=true;var a=t.scaleFactor||this.calculateScaleFactor();var i=this.previewFrame;var n=this.window;i.style.transform="scale("+a+")";i.style.maxHeight=100/a+"%";i.style.height=100/a+"%";i.style.transformOrigin="top center";n.document.body.classList.add(o.CLASS_NAME_ITEMS_REORDERING);a<1&&n.document.body.setAttribute("data-sqs-scalefactor",a)}},{key:"getComputedStyle",value:function e(t,a){return this.window.getComputedStyle(t,null).getPropertyValue(a)}}]);return t}();e.exports=c},13036:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var h=a(12379);var r=a(11791);var o=a(12380);var l=a(11891);var c=a(12381);var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);this.Dom=e.Dom;this.Transition=e.Transition;this.scrollTriggerSize=e.scrollTriggerSize||l.SCROLL_TRIGGER_SIZE;this.useAcceleratedScroll=e.useAcceleratedScroll||l.USE_ACCELERATED_SCROLL;this.scrollBaseSpeed=e.scrollBaseSpeed||l.SCROLL_SPEED}(0,s.default)(t,[{key:"getBoundingDOMRect",value:function e(t){var a=t.getBoundingClientRect();var i=this.Dom.window.document.documentElement;var n=this.Dom.window.pageYOffset||i.scrollTop;var s=this.Dom.window.pageXOffset||i.scrollLeft;var r=a.top+n;var o=a.left+s;var l={width:a.width,height:a.height,top:r,left:o,bottom:r+a.height,right:o+a.width};return l}},{key:"getBoundingElemRect",value:function e(t){var a=this.getBoundingDOMRect(t);var i=this.getBoundingDOMRect(t.parentNode);var n=a.top-i.top;var s=a.left-i.left;return{width:a.width,height:a.height,top:n,left:s,bottom:n+a.height,right:s+a.width}}},{key:"runScrollListenerLoop",value:function e(){if(!h.isInFlight)return;var t=this.getScrollRequirementsForMousePosition(h.isInFlight.mouse.client.x,h.isInFlight.mouse.client.y);(t.x||t.y)&&this.Dom.window.scrollBy(t.x,t.y);requestAnimationFrame(this.runScrollListenerLoop.bind(this))}},{key:"runDropIndexLoop",value:function e(){if(!h.isInFlight)return;var t=0;var a=this.Dom.getItems();var i=a.length;var n=a.find(function(e){return!e.classList.contains("sqs-in-flight")});var s=parseInt(this.Dom.getComputedStyle(n,"margin-top"));var r=parseInt(this.Dom.getComputedStyle(n,"margin-bottom"));var o=s+r;for(var l=0;l<i;l++){if(l===h.isInFlight.dragStart.index)continue;var c=a[l].offsetTop+h.isInFlight.dragStart.element.height+r;var d=c+o;var u=h.isInFlight.dragStart.element.top+h.isInFlight.dragTransform.top;var g=u+h.isInFlight.dragStart.element.offsetHeight;if(g>d){t++;a[l].style.transform="translate3d(0,0,0)"}else{var p=h.isInFlight.dragStart.element.height+r;a[l].style.transform="translate3d(0,"+p+"px,0)"}}h.isInFlight.nextIndex!==t&&(h.isInFlight.nextIndex=t);requestAnimationFrame(this.runDropIndexLoop.bind(this))}},{key:"prepareDragger",value:function e(t){for(var a=0;a<t.children.length;a++){t.children[a].setAttribute("data-sqs-original-pointer-event",t.children[a].style.pointerEvents);t.children[a].style.pointerEvents="none"}}},{key:"destroyDragger",value:function e(t){for(var a=0;a<t.children.length;a++){t.children[a].style.pointerEvents=t.children[a].getAttribute("data-sqs-original-pointer-event");t.children[a].removeAttribute("data-sqs-original-pointer-event")}}},{key:"buildDragStateForEvent",value:function e(t,a){var i=this.getBoundingDOMRect(this.Dom.getItemsWrapper());var n=this.getBoundingElemRect(t);var s=this.Dom.getItems().indexOf(t);var r=this.Transition.getPreflightValuesForItem(t);var o={indexCollection:{initialHeight:this.Dom.getItemsWrapper().offsetHeight},dragStart:{element:r,mouse:{top:c.getInteractionPosition(a,"page","y"),left:c.getInteractionPosition(a,"page","x")},index:s},dragTransform:{top:0,left:0,constraints:{minTransform:-n.top,maxTransform:i.height-n.bottom}},mouse:{client:{y:c.getInteractionPosition(a,"client","y"),x:c.getInteractionPosition(a,"client","x")}},item:t,nextIndex:s};return o}},{key:"beforeDragStart",value:function e(t,a){if(!this.Dom.nodeIsValidDragTarget(t.target)&&!a)return false;if(h.isInFlight)return false;o.dispatch(o.events.BEFORE_FLIGHT_START,this.Dom.window);return true}},{key:"dragStart",value:function e(t,a,i){t.preventDefault();var n=this.beforeDragStart(t,i);if(!n)return;this.Dom.storeItemStyles();h.isInFlight=this.buildDragStateForEvent(a,t);this.Transition.prepareItemForFlight(a,h.isInFlight.dragStart.element);this.Transition.prepareSiblingsForFlight(a,h.isInFlight.dragStart.index,h.isInFlight.dragStart.element);this.runDropIndexLoop();this.runScrollListenerLoop();o.dispatch(o.events.FLIGHT_START,this.Dom.window);this.Dom.window.document.body.classList.add(r.CLASS_NAME_ITEMS_REORDERING_INFLIGHT)}},{key:"drag",value:function e(t){t.preventDefault();if(!h.isInFlight)return;var a=h.isInFlight.item;var i=c.getInteractionPosition(t,"page","y");var n=h.isInFlight.dragTransform.constraints;var s=i-h.isInFlight.dragStart.mouse.top;s<n.minTransform?s=n.minTransform:s>n.maxTransform&&(s=n.maxTransform);h.isInFlight.mouse.client={y:c.getInteractionPosition(t,"client","y"),x:c.getInteractionPosition(t,"client","x")};h.isInFlight.dragTransform.top=s;a.style.transform="translate3d(0,"+s+"px,0)";o.dispatch(o.events.FLIGHT_MOVE,this.Dom.window)}},{key:"dragEnd",value:function e(t,a){if(t.eventPhase){a=t;t=null}if(!h.isInFlight)return;o.dispatch(o.events.BEFORE_FLIGHT_END,this.Dom.window);var i=h.isInFlight.item;var n=this.Transition.getDestinationValuesForItem(h.isInFlight.dragStart.index,h.isInFlight.nextIndex);this.Transition.setDestinationForFlightItem(i,h.isInFlight.dragStart.element,n);this.Transition.setDestinationForSiblings(i,h.isInFlight.dragStart.index,h.isInFlight.nextIndex);this.Transition.setStylesForSimulatedPostFlight(i);this.Dom.switchDOMTree(i,h.isInFlight.nextIndex);this.Dom.restoreStyles();o.dispatch(o.events.DOM_REORDER,this.Dom.window,{item:i,oldIndex:h.isInFlight.dragStart.index,newIndex:h.isInFlight.nextIndex});this.onItemIndexChange&&this.onItemIndexChange(h.isInFlight);h.isInFlight=null;i.classList.remove(r.CLASS_NAME_IN_FLIGHT);this.Dom.window.document.body.classList.remove(r.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);t.onDragEnd&&t.onDragEnd();o.dispatch(o.events.AFTER_FLIGHT_END,this.Dom.window)}},{key:"getScrollRequirementsForMousePosition",value:function e(t,a){var i=0;var n=0;var s=1;var r=1;if(a<this.scrollTriggerSize){i=-this.scrollBaseSpeed;this.useAcceleratedScroll&&(s=Math.abs(a-this.scrollTriggerSize)/this.scrollTriggerSize)}else if(a>this.Dom.window.innerHeight-this.scrollTriggerSize){i=this.scrollBaseSpeed;if(this.useAcceleratedScroll){var o=this.scrollTriggerSize-(this.Dom.window.innerHeight-a);s=o/this.scrollTriggerSize}}return{x:n*r,y:i*s}}},{key:"initializeDraggers",value:function e(){var t=this;var a=this.Dom.getItems();a.forEach(function(e){t.prepareDragger(e)})}},{key:"destroyDraggers",value:function e(){var t=this;var a=this.Dom.getItems();if(!a)return;a.forEach(function(e){t.destroyDragger(e)})}}]);return t}();e.exports=d},13037:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var o=a(11891);var l=a(11791);var r=a(12381);var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);this.Dom=e.Dom}(0,s.default)(t,[{key:"getPreflightValuesForItem",value:function e(i){var n=this.Dom;function t(e){var t=0;for(var a=0;a<e.length;a++)t+=r.pxToNumber(n.window.getComputedStyle(i,null).getPropertyValue(e[a]));return t}var a={width:r.pxToNumber(n.window.getComputedStyle(i,null).getPropertyValue("width")),height:r.pxToNumber(n.window.getComputedStyle(i,null).getPropertyValue("height")),offsetHeight:t(["height","margin-top","margin-bottom"]),top:i.offsetTop,left:i.offsetLeft};return a}},{key:"getDestinationValuesForItem",value:function e(t,a){var i=this.Dom.getItems();var n=i[a].offsetTop;a>t&&(n=n-i[t].offsetHeight+i[a].offsetHeight);return{top:n,left:0}}},{key:"prepareItemForFlight",value:function e(t,a,i){t.classList.add(l.CLASS_NAME_IN_FLIGHT);for(var n in o.IN_FLIGHT)t.style[n]=o.IN_FLIGHT[n];for(var s in a)t.style[s]=a[s]+"px";if(i){var r=o.TRANSITION_DURATION+"s ease-in-out";t.style.transition=["transform","box-shadow"].map(function(e){return e+" "+r}).join(",")}}},{key:"prepareSiblingsForFlight",value:function e(t,a,i){var n=this.Dom.getItems();for(var s=a+1;s<n.length;s++)n[s].style.transform="translate3d(0,"+i.offsetHeight+"px, 0)"}},{key:"setDestinationForFlightItem",value:function e(t,a,i){var n=i.top-a.top;var s=i.left-a.left;t.style.transform="translate3d("+s+"px,"+n+"px,0)"}},{key:"setDestinationForSiblings",value:function e(t,a,i){var n=this.Dom.getItems();for(var s=0;s<n.length;s++){if(s===a)continue;n[s].style.transform=s===i&&a<i?"translate3d(0,0,0)":s>=i?"translate3d(0,"+t.offsetHeight+"px,0)":"translate3d(0,0,0)"}}},{key:"setStylesForSimulatedPostFlight",value:function e(t){for(var a in o.SIMULATED_POST_FLIGHT)t.style[a]=o.SIMULATED_POST_FLIGHT[a]}}]);return t}();e.exports=c},13038:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a(8));var o=n(a(9));var l=n(a(6));var c=n(a(10));var s=n(a(11));var d=n(a(7));var u=n(a(2));var g=i(a(0));var p=n(a(713));var h=n(a(207));var f=a(24);var m=a(39);function v(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var b=function(e){(0,c.default)(s,e);var n=v(s);function s(){var e;(0,r.default)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(e),"handleDismiss",function(){window.location.href="https://account.squarespace.com"});return e}(0,o.default)(s,[{key:"render",value:function e(){return g.default.createElement(p.default,{isOpen:true,anchor:"window",title:(0,f.t)("Safari Private Mode"),theme:"damask",dismissText:(0,f.t)("Back to Account"),onDismiss:this.handleDismiss},g.default.createElement(m.T,{supportedBrowserLink:g.default.createElement("a",{href:h.default.SUMMARY_EDITOR},g.default.createElement(m.T,{project:"src.shared"},"supported browser")),project:"src.shared"},"You're using Safari Private Browsing, which isn't supported. To log in, open this page in a new window without private browsing, or use a different {supportedBrowserLink}."))}}]);return s}(g.Component);var y=b;t.default=y;e.exports=t.default},13039:function(e,t,a){"use strict";var i={CHANGE:"tweak:change",CLOSE:"tweak:close",SAVE:"tweak:save",RESET:"tweak:reset",AFTER_SHOW:"tweak:aftershow",AFTER_CLOSE:"tweak:afterclose",BEFORE_OPEN:"tweak:beforeopen"};e.exports=i},13040:function(e,t,a){t=e.exports=a(16)(false);var i=a(153);var n=i(a(13041));t.push([e.i,"@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}@keyframes bounceOut{0%{transform:scale(1)}25%{transform:scale(.95)}50%{opacity:1;transform:scale(1.1)}100%{opacity:0;transform:scale(.3)}}@media screen and (max-width: 432px){.mobile-hidden{display:none}}@media screen and (max-width: 432px){.subDesktop-hidden{display:none}}@media screen and (min-width: 433px){.desktop-hidden{display:none}}@keyframes rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.sqs-jacquard .sqs-catalog{position:fixed;top:0px;left:0px;height:100vh;width:100vw;z-index:40002;display:none}.sqs-jacquard .sqs-catalog.visible{display:block}.sqs-jacquard .sqs-catalog-scrim{position:fixed;top:0px;left:0px;height:100vh;width:100vw;z-index:40002;background:rgba(0,0,0,.4);opacity:0;transition:opacity .8s cubic-bezier(.645,.045,.355,1) .1s}.sqs-jacquard .sqs-catalog-scrim.visible{opacity:1}.sqs-jacquard .sqs-catalog-container{display:flex;justify-content:center;height:calc(100vh);width:calc(100vw -  132px);z-index:40002;padding-left:66px;padding-right:66px;margin-top:66px;transition:transform .4s cubic-bezier(.645,.045,.355,1) .2s,opacity .8s cubic-bezier(.645,.045,.355,1) .1s;opacity:0}.sqs-jacquard .sqs-catalog-container.visible{opacity:1;transform:translatey(-66px)}.sqs-jacquard .sqs-catalog-content{display:flex;max-width:1462px;height:calc(100vh -  132px);width:calc(100vw -  132px);margin-top:66px;background:#fff;align-items:center;position:relative}.sqs-jacquard .sqs-catalog-content .sqs-catalog-photo-attribution{visibility:hidden;position:absolute;right:21px;bottom:10px;transform:rotate(90deg);z-index:1;transform-origin:right bottom;font-family:'Clarkson','sans-serif';color:#a1a1a1 !important;font-size:11px !important;line-height:11px !important;font-style:normal;font-weight:500 !important;letter-spacing:normal !important;text-transform:none !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-photo-attribution.visible{visibility:visible}.sqs-jacquard .sqs-catalog-content .sqs-catalog-categories-container{height:calc(100vh -  219px);overflow-x:auto;overflow-y:auto}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar{display:flex;flex:1;flex-direction:column;padding-left:33px;min-width:298px;height:calc(98vh -  132px);overflow-x:auto;overflow-y:auto;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-category-list{list-style-type:none;padding:0;margin-top:11px;margin-left:0;margin-right:0;margin-bottom:0}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar li{margin:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-divider{padding:11px}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close-container{display:flex;padding-top:32px;margin-bottom:33px}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close{font-family:'Clarkson','sans-serif';color:#313131 !important;font-size:14px;line-height:22px;letter-spacing:normal !important;text-transform:none !important;cursor:pointer;font-style:normal;font-weight:500;transform:scale(1,1);min-height:33px;width:auto;height:auto;outline:none;border:none;background:none;overflow:hidden;box-sizing:border-box}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close::before{content:\"\";background-color:#ebebeb;display:block;position:absolute;width:100%;height:100%;left:0px;pointer-events:none;top:0px;transform:translate(-130%,0px) skew(-30deg);z-index:-1;transition:transform 500ms cubic-bezier(.66,0,.34,1) 0s;will-change:transform}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close:hover::before,.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close:focus::before,.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close:active::before{background-color:#ebebeb;transform:translate(0,0) skew(0deg);z-index:-1}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-close:active{border-style:solid;border-width:1px;border-color:#fff}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-title{font-family:'Clarkson','sans-serif';margin-top:0;margin-bottom:33px !important;color:#313131 !important;font-size:22px !important;line-height:28px !important;font-style:normal;font-weight:500 !important;letter-spacing:normal !important;text-transform:none !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-help-text{font-family:'Clarkson','sans-serif';color:#a1a1a1 !important;font-size:16px !important;line-height:22px !important;font-style:normal;font-weight:500 !important;letter-spacing:normal !important;text-transform:none !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-help-text a{text-decoration:underline;color:#a1a1a1 !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-help-text-title{font-family:'Clarkson','sans-serif';color:#a1a1a1 !important;font-size:16px !important;line-height:22px !important;font-style:normal;font-weight:500 !important;letter-spacing:normal !important;text-transform:none !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-help-text-title a{text-decoration:underline;color:#a1a1a1 !important}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar .sqs-catalog-help-text-title-title{margin-bottom:15px}.sqs-jacquard .sqs-catalog-content .sqs-catalog-sidebar.sqs-categories-disabled a{pointer-events:none;cursor:default}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list{display:flex;justify-content:center;overflow-x:hidden;overflow-y:auto;margin-top:33px;margin-left:33px;margin-right:33px;width:calc(100vw -  298px );height:calc(100vh -  165px);will-change:transform}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .sqs-catalog-back{display:none}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-list-column{display:flex;flex-direction:column}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-two-column-left-list{margin-right:16.5px}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-two-column-right-list{margin-left:16.5px}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-one-column-center-list{display:none}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .sqs-section{margin-bottom:33px;box-shadow:0px 4px 16px -4px rgba(0,0,0,.12),0px 0px 1px rgba(0,0,0,.04)}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .sqs-section img{width:100%;height:100%}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .sqs-section:hover{cursor:pointer}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .article-wrapper{max-height:512px;overflow-x:hidden;overflow-y:hidden}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .article-wrapper img{width:100%;height:100%}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .article-wrapper:hover{cursor:pointer}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .item-hover-wrapper{max-height:688px;margin-bottom:33px;transition:.3s cubic-bezier(.455,.03,.515,.955) 0s;transition-property:transform,box-shadow;box-shadow:0px 4px 16px -4px rgba(0,0,0,.12),0px 0px 1px rgba(0,0,0,.04)}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .item-hover-wrapper:hover{cursor:pointer;box-shadow:0 15px 20px 0 rgba(0,0,0,.08);transform:translatey(-5px)}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .sqs-page-title{display:flex;justify-content:center;align-items:center;font-family:'Clarkson','sans-serif';color:#313131 !important;background-color:#fff;font-size:19px;font-style:normal;font-weight:500;border-top:1px solid rgba(0,0,0,.06);height:88px;letter-spacing:normal !important;text-transform:none !important}@media only screen and (max-width:1156px){.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-two-column-left-list{display:none}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-two-column-right-list{display:none}.sqs-jacquard .sqs-catalog-content>.sqs-catalog-item-list .catalog-item-one-column-center-list{display:flex}}.sqs-jacquard .sqs-catalog-link{display:block;color:#313131;text-decoration:none;padding-top:7px;padding-bottom:5px;line-height:22px;font-weight:500;font-size:17px;font-family:'Clarkson','sans-serif';font-style:normal;letter-spacing:normal !important;text-transform:none !important}.sqs-jacquard .sqs-catalog-link .sqs-catalog-link-text{display:inline-block}.sqs-jacquard .sqs-catalog-link .sqs-catalog-link-text::after{content:'';display:block;transform:scalex(0);transform-origin:left;height:2px;background:#313131;transition:transform 500ms cubic-bezier(.4,0,.68,.06)}.sqs-jacquard .sqs-catalog-link:hover .sqs-catalog-link-text::after{transform:scalex(1);transition:transform 500ms cubic-bezier(.32,.94,.6,1)}.sqs-jacquard .sqs-catalog-link.active-link .sqs-catalog-link-text::after{transform:scalex(1)}.sqs-jacquard .sqs-catalog-link.active-link:hover .sqs-catalog-link-text::after{transition:none}.sqs-jacquard .sqs-add-blank{display:none;height:11px;width:11px;margin-left:6px;background-position:center center;margin-bottom:1px;background-repeat:no-repeat;background-image:url('//assets.squarespace.com/universal/images-v6/catalog/black-plus.svg')}.sqs-jacquard .sqs-button-category .sqs-add-blank{display:inline-block}.sqs-jacquard .sqs-catalog-loading-spinner{position:absolute;left:50%;top:45%;transform:translatex(-50%,-50%)}.sqs-jacquard .size-small{width:22px;height:22px}.sqs-jacquard .size-large{width:55px;height:55px}.sqs-jacquard .variant-circle{border:2px solid transparent;border-radius:50%;animation:rotate 800ms linear infinite}.sqs-jacquard .color-dark.variant-circle{border-right-color:#313131;border-bottom-color:#313131}@media only screen and (pointer: coarse) and (orientation: portrait) and (max-device-width: 414px),only screen and (pointer: coarse) and (orientation: landscape) and (max-device-height: 414px){.sqs-jacquard .sqs-catalog-container{padding:0;margin:0;width:100vw;position:fixed;height:100vh;top:0;left:0;transform:none !important}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content.single-view{display:flex;flex-wrap:wrap;height:100vh;margin-top:0;width:100vw}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content.single-view .sqs-catalog-sidebar{height:unset;padding-right:33px}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content.single-view .sqs-catalog-sidebar .sqs-catalog-categories-container{height:unset}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content.single-view .sqs-catalog-item-list{width:100vw}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view){max-width:none;height:100vh;width:100vw;margin:0;padding-left:44px}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-categories-container{height:auto}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-categories-container .sqs-catalog-link .sqs-catalog-link-text::after{transform:scalex(0)}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-categories-container .sqs-catalog-link.active-link .sqs-catalog-link-text::after{transform:scalex(0)}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-sidebar{opacity:1;transform:translate(0,0);transition:transform .4s cubic-bezier(.645,.045,.355,1) .2s;height:100vh;width:100%;flex:none;padding:0}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view).sqs-mobile-web-catalog-visible .sqs-catalog-sidebar{transform:translate(-100%,0);padding:0}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-item-list{transform:translate(100%,0);transition:transform .4s cubic-bezier(.645,.045,.355,1) .2s;flex-direction:column;justify-content:start;width:100%;margin:0;height:100vh;flex:none;margin-left:-22px}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-item-list .catalog-list-column{overflow-y:auto;align-items:center}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view) .sqs-catalog-item-list .sqs-catalog-back{margin-left:22px;display:flex;font-family:'Clarkson','sans-serif';padding-top:32px;margin-bottom:33px;color:#313131 !important;font-size:14px;font-style:normal;line-height:22px;letter-spacing:normal !important;text-transform:none !important;cursor:pointer}.sqs-jacquard .sqs-catalog-container .sqs-catalog-content:not(.single-view).sqs-mobile-web-catalog-visible .sqs-catalog-item-list{transform:translate(-100%,0)}}.sqs-customHeaderPageScrim{pointer-events:all;cursor:pointer;opacity:.4;position:absolute;background:#000;z-index:2000;width:100%;height:100%;transition:all cubic-bezier(.77,0,.175,1) 500ms;transition-property:width,height,left}.sqs-jacquard.sqs-edit-mode-active #page{display:flex;flex-direction:column;flex-grow:1}.sqs-jacquard.sqs-edit-mode-active #page .sections{flex-grow:1}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled{position:relative}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled section{cursor:default}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled section .sqs-section-editing-ui{display:none}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host::before{background:#000;content:'';position:absolute;top:0;left:0;bottom:0;width:100%;z-index:1003;pointer-events:none;opacity:0}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#footer-sections::before{transition:opacity 200ms ease-out}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#footer-sections.sqs-empty-section-list::before{transition:opacity 150ms ease-out}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#sections::before{transition:opacity 300ms ease-out}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled::before{pointer-events:all;cursor:pointer}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections::before{opacity:.4;transition:opacity 100ms ease-in,transform 100ms ease-in}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections.sqs-empty-section-list::before{opacity:.1}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections.sqs-empty-section-list.sqs-scrim-fading::before{opacity:0}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections.sqs-scrim-fading::before{opacity:0}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#sections::before{opacity:.4;transition:opacity 200ms ease-in}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#sections.sqs-scrim-fading::before{opacity:0}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host::after{font:500 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;text-transform:uppercase;content:attr(data-edit-button-text);position:absolute;left:50%;z-index:1004;padding:16px 33px 17px 33px;background:#fff;color:#313131;letter-spacing:normal;pointer-events:none;opacity:0}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#footer-sections::after{top:22px;transition:opacity 200ms ease-out,transform 200ms ease-out;transform:translate(-50%,-20px)}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#footer-sections.sqs-empty-section-list::after{display:none}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host#sections::after{bottom:22px;transform:translate(-50%,20px);transition:opacity 200ms ease-out,transform 200ms ease-out}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled::after{cursor:pointer;pointer-events:auto;opacity:1}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections::after{transform:translate(-50%,0);transition:opacity 100ms ease-in,transform 100ms ease-in}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#footer-sections.sqs-scrim-fading::after{opacity:0;transform:translate(-50%,-20px)}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#sections::after{transform:translate(-50%,0);transition:opacity 100ms ease-in,transform 100ms ease-in}.sqs-jacquard .sections.sqs-frontend-overlay-editor-widget-host.sqs-scrim-enabled#sections.sqs-scrim-fading::after{opacity:0;transform:translate(-50%,20px)}.sqs-jacquard .header::before{background:#000;content:'';position:absolute;top:0;left:0;bottom:0;width:100%;z-index:1003;opacity:0;pointer-events:none;transition:opacity 200ms ease-out}.sqs-jacquard .header.sqs-scrim-enabled::before{opacity:.4;transition:opacity 100ms ease-in,transform 100ms ease-in;pointer-events:auto;cursor:pointer}.sqs-jacquard .header::after{font:500 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;text-transform:uppercase;content:attr(data-edit-button-text);position:absolute;left:50%;z-index:1004;padding:16px 33px 17px 33px;background:#fff;color:#313131;letter-spacing:normal;bottom:22px;transform:translate(-50%,20px);opacity:0;transition:opacity 200ms ease-out,transform 200ms ease-out;pointer-events:none}.sqs-jacquard .header.sqs-scrim-enabled::after{transform:translate(-50%,0px);opacity:1;transition:opacity 100ms ease-in,transform 100ms ease-in;cursor:pointer;pointer-events:auto}html:not(.manage) .sqs-jacquard .editable-section.focused>.sqs-section-editing-ui>.focusui{outline:4px solid #0888c8;outline-offset:-4px}html:not(.manage) .sqs-jacquard [data-page-sections] :not(.editable-section).focused{outline:2px solid #0888c8;outline-offset:-2px}.sqs-edit-mode-active.sqs-jacquard .sqs-top-section-editing-ui .add-hit-box:hover .sqs-section-add-button,.sqs-edit-mode-active.sqs-jacquard .sqs-top-section-editing-ui.sqs-top-section-hovered .sqs-section-add-button{visibility:visible}@media screen and (pointer:coarse){.sqs-edit-mode-active.sqs-jacquard section[data-section-id] .sqs-block{pointer-events:none}.sqs-edit-mode-active.sqs-jacquard section[data-section-id][data-focused-section] .sqs-block{pointer-events:initial}.sqs-edit-mode-active.sqs-jacquard section[data-section-id][data-focused-section] .sqs-section-wrapper{outline:2px solid #0888c8;outline-offset:-2px}.sqs-edit-mode-active.sqs-jacquard section[data-section-id][data-focused-section] .sqs-section-editing-ui .sqs-section-add-button{visibility:visible}}@media not all and (hover:none){.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .sqs-section-wrapper{outline:2px solid #0888c8;outline-offset:-2px}.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .control-buttons,.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .icon-page-section-control-button-admin,.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .icon-page-section-control-button-gallery-content-container,.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .icon-page-section-control-button-manage-items-container,.sqs-edit-mode-active.sqs-jacquard section[data-section-id]:hover .sqs-section-editing-ui .sqs-section-add-button{visibility:visible}}.sqs-edit-mode-active.sqs-jacquard #footer-sections section:only-child .content .empty:only-child{min-height:100px}.sqs-jacquard .sqs-top-section-editing-ui{position:absolute;width:100%}.sqs-jacquard .sqs-top-section-editing-ui.sqs-top-section-editing-ui-disabled,.sqs-jacquard .sqs-top-section-editing-ui.hidden,.sqs-jacquard .sqs-top-section-editing-ui.hidden-add-section{display:none}.sqs-jacquard .sqs-top-section-editing-ui .sqs-section-add-button{visibility:hidden}.sqs-jacquard #sections [data-section-id]:first-of-type .top-add-hit-box{display:none}.sqs-jacquard #footer-sections[data-is-editing=\"false\"] .sqs-section-editing-ui{display:none}.sqs-jacquard .sqs-empty-section{font:400 normal 14px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;padding:60px;margin:auto;text-align:center}.sqs-jacquard .sqs-empty-section .sqs-empty-title{color:#000;font-size:17px;font-weight:500;line-height:24px;margin-bottom:5px;letter-spacing:normal;text-transform:none}.sqs-jacquard .sqs-empty-section .sqs-empty-description{color:#767676;padding-top:11px;font-weight:initial;font-size:14px;letter-spacing:normal;text-transform:none}.sqs-jacquard .sqs-loading-section{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spinner@2x.gif');background-size:22px;background-repeat:no-repeat;background-position:center}.sqs-jacquard #sections .sqs-empty-section{margin-top:150px;margin-bottom:50px}.sqs-jacquard #sections.sqs-layout-dark .sqs-empty-section .sqs-empty-title{color:#fff}.sqs-jacquard #sections.sqs-layout-dark .sqs-empty-section .sqs-empty-description{color:#a1a1a1}.sqs-jacquard #footer-sections .sqs-empty-section{min-height:176px;background:#f6f6f6}.sqs-jacquard .add-hit-box{position:absolute;margin:0 auto;left:0;right:0;width:45px;height:45px;cursor:pointer;transition:visibility .5s linear,opacity 200ms ease-in-out;background-color:transparent;border:none}.sqs-jacquard .bottom-add-hit-box{bottom:-25px;z-index:8952}.sqs-jacquard .top-add-hit-box{top:-20px;z-index:8951}.sqs-jacquard section[data-section-id]{position:relative;transition:opacity .5s cubic-bezier(.445,.05,.55,.95),filter .5s cubic-bezier(.445,.05,.55,.95)}html.manage .sqs-jacquard section[data-section-id].header *{cursor:not-allowed !important}html.manage .sqs-jacquard section[data-section-id].header{opacity:.5;filter:blur(4px)}.sqs-jacquard section[data-section-id].header.navigation{cursor:auto}.sqs-jacquard section[data-section-id].header.navigation .shadow,.sqs-jacquard section[data-section-id].header.navigation .remove,.sqs-jacquard section[data-section-id].header.navigation .group{display:none}.sqs-jacquard section[data-section-id] .sqs-section-editing-ui.hidden{display:none}.sqs-jacquard section[data-section-id] .sqs-section-editing-ui.hidden-add-section .add-hit-box{display:none}.sqs-jacquard section[data-section-id] .sqs-section-editing-ui .sqs-section-add-button{visibility:hidden;cursor:pointer;z-index:8951}.sqs-jacquard section[data-section-id] .sqs-section-editing-ui .add-hit-box-hidden .sqs-section-add-button{display:none}.sqs-jacquard section[data-section-id] .sqs-section-wrapper{position:absolute;top:0px;left:0px;outline:2px solid transparent;outline-offset:-2px;transition:outline .5s linear;height:100%;width:100%}.sqs-jacquard section[data-section-id] .control-buttons-parent{position:-webkit-sticky;position:sticky;top:0px;z-index:40001;transition:opacity 200ms ease-in-out}@media only screen and (any-pointer:coarse) and (max-device-width:896px){.sqs-jacquard section[data-section-id] .control-buttons-parent{display:none}}.sqs-jacquard section[data-section-id] .control-button-wrapper{position:absolute;top:22px;right:22px;height:44px;display:flex}.sqs-jacquard section[data-section-id] .control-button-wrapper.control-button-wrapper-hidden{display:none}.sqs-jacquard section[data-section-id] .control-buttons{visibility:hidden;display:flex;justify-content:space-around;align-items:center;transform:scale(var(--inverse-viewport-scale)) translatex(-50%);box-shadow:0 4px 16px rgba(0,0,0,.12),0 0 0 1px rgba(0,0,0,.02);background-color:#fff;border-radius:8px;overflow-x:hidden;overflow-y:hidden;outline:none;padding:4px}.sqs-jacquard section[data-section-id] .control-buttons button{background-color:inherit;border:inherit;border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer}.sqs-jacquard section[data-section-id] .control-buttons button:hover{background-color:#f6f6f6}.sqs-jacquard section[data-section-id] .control-buttons button:last-child{margin-right:0}.sqs-jacquard section[data-section-id] .toolbar-buttons{display:flex}.sqs-jacquard section[data-section-id] .shadow{content:\"\";position:absolute;top:0px;left:0px;right:0px;bottom:0;z-index:-1;transition:box-shadow 0s linear}.sqs-jacquard .sqs-section-moving section[data-section-id]:hover .sqs-section-wrapper{outline:2px solid transparent;outline-offset:-2px}.sqs-jacquard .sqs-section-moving .add-hit-box{opacity:0}.sqs-jacquard .sqs-section-moving .control-buttons-parent{opacity:0}.sqs-jacquard #site-shims{height:100%;opacity:1;position:relative;z-index:999999999}@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,0,0,.4)}70%{box-shadow:0 0 0 10px rgba(0,0,0,0)}100%{box-shadow:0 0 0 0 rgba(0,0,0,0)}}.sqs-jacquard .icon-page-section-control-button-divider{align-self:center;background-color:#f6f6f6;height:20px;margin-right:4px;width:1px}.sqs-jacquard .icon-page-section-control-button-divider:first-child,.sqs-jacquard .icon-page-section-control-button-divider:last-child{display:none}.sqs-jacquard .icon-page-section-control-button-admin{border-radius:4px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;width:36px;background-color:#fff;background-image:url('//assets.squarespace.com/universal/images-v6/damask/logo-dark.svg');padding:0 11px;box-shadow:0 4px 16px rgba(0,0,0,.12),0 0 0 1px rgba(0,0,0,.02);position:absolute;left:22px;top:22px;visibility:hidden}.sqs-jacquard .icon-page-section-control-button-admin:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-admin:last-child{margin-right:0}.sqs-jacquard .icon-page-section-control-button-gallery-content-container,.sqs-jacquard .icon-page-section-control-button-manage-items-container{visibility:hidden;margin-right:11px;height:44px;display:flex;justify-content:space-around;align-items:center;z-index:40001;box-shadow:0 4px 16px rgba(0,0,0,.12),0 0 0 1px rgba(0,0,0,.02);background-color:#fff;border-radius:8px;overflow-x:hidden;overflow-y:hidden;outline:none}.sqs-jacquard .icon-page-section-control-button-gallery-content-container button,.sqs-jacquard .icon-page-section-control-button-manage-items-container button{background-color:inherit;border:inherit}.sqs-jacquard .icon-page-section-control-button-gallery-content-container{width:44px}.sqs-jacquard .icon-page-section-control-button-gallery-content,.sqs-jacquard .icon-page-section-control-button-manage-items{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;animation:none;cursor:pointer}.sqs-jacquard .icon-page-section-control-button-gallery-content:hover,.sqs-jacquard .icon-page-section-control-button-manage-items:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-gallery-content:last-child,.sqs-jacquard .icon-page-section-control-button-manage-items:last-child{margin-right:0}.sqs-jacquard .icon-page-section-control-button-gallery-content{background-position:center center;background-repeat:no-repeat;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-gallery.svg')}.sqs-jacquard .icon-page-section-control-button-manage-items{color:#313131;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:14px;font-style:normal;font-weight:500;letter-spacing:0;line-height:36px;margin:4px;padding:0 14.666666666666666px;width:auto}.sqs-jacquard .icon-page-section-control-button-manage-items:last-child{margin:4px}.sqs-jacquard .icon-page-section-control-button-duplicate{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-duplicate.svg');opacity:1}.sqs-jacquard .icon-page-section-control-button-duplicate:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-duplicate:last-child{margin-right:0}.sqs-jacquard .icon-page-section-control-button-up{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-arrow-up.svg');opacity:1}.sqs-jacquard .icon-page-section-control-button-up:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-up:last-child{margin-right:0}.sqs-jacquard article section:first-of-type .icon-page-section-control-button-up{cursor:default;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-arrow-up.svg');opacity:.1176}.sqs-jacquard article section:first-of-type .icon-page-section-control-button-up:hover{background-color:transparent}.sqs-jacquard .icon-page-section-control-button-down{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-arrow-down.svg');opacity:1}.sqs-jacquard .icon-page-section-control-button-down:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-down:last-child{margin-right:0}.sqs-jacquard article section:last-of-type .icon-page-section-control-button-down{cursor:default;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-arrow-down.svg');opacity:.1176}.sqs-jacquard article section:last-of-type .icon-page-section-control-button-down:hover{background-color:transparent}.sqs-jacquard .icon-page-section-control-button-delete{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-delete.svg');opacity:1}.sqs-jacquard .icon-page-section-control-button-delete:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-delete:last-child{margin-right:0}.sqs-jacquard .icon-page-section-control-button-settings{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-pencil.svg')}.sqs-jacquard .icon-page-section-control-button-settings:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-settings:last-child{margin-right:0}.sqs-jacquard .icon-page-section-control-button-more{border-radius:4px;width:36px;height:36px;margin-right:4px;background-position:center center;background-repeat:no-repeat;cursor:pointer;background-image:url("+n+");display:none}.sqs-jacquard .icon-page-section-control-button-more:hover{background-color:#f6f6f6}.sqs-jacquard .icon-page-section-control-button-more:last-child{margin-right:0}.sqs-jacquard .icon-page-section-add-section{height:45px;background-position:center center;background-repeat:no-repeat;background-image:url('//assets.squarespace.com/universal/images-v6/page-sections/section-editing-plus.svg')}body.mobile-preview-editing .sqs-top-section-editing-ui{display:none}body.mobile-preview-editing .icon-page-section-control-button-more{display:block}body.mobile-preview-editing .toolbar-buttons .icon-page-section-control-button-divider,body.mobile-preview-editing .toolbar-buttons .icon-page-section-control-button-up,body.mobile-preview-editing .toolbar-buttons .icon-page-section-control-button-down,body.mobile-preview-editing .toolbar-buttons .icon-page-section-control-button-duplicate,body.mobile-preview-editing .toolbar-buttons .icon-page-section-control-button-delete{display:none}body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-more{display:none}body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-divider,body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-up,body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-down,body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-duplicate,body.mobile-preview-editing .toolbar-buttons.mobile-toolbar-expanded .icon-page-section-control-button-delete{display:block}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content{opacity:0;transition:opacity 0.3s ease-out}body.squarespace-editable div#sqs-edit-mode-controller.visible .sqs-edit-mode-controller-content{opacity:1}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content{position:fixed;bottom:10px;right:10px;left:10px;z-index:20000;white-space:nowrap}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome{font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;-webkit-user-select:none;background-color:#222;border-radius:30px;height:52px;line-height:normal;white-space:nowrap;text-align:left !important}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-avatar{height:50px;width:50px;border-radius:100%;display:inline-block;background-image:url('//assets.squarespace.com/universal/images-v6/default-avatar.png');background-size:cover;margin-top:1px;margin-left:1px;cursor:pointer;position:relative}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-avatar .avatar-network{position:absolute;height:16px;width:16px;bottom:0;right:0}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-avatar .avatar-network-twitter{background:transparent url('//assets.squarespace.com/universal/images-v6/social/twitter_16.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-avatar .avatar-network-facebook{background:transparent url('//assets.squarespace.com/universal/images-v6/social/facebook_16.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-avatar .avatar-network-google{background:transparent url('//assets.squarespace.com/universal/images-v6/social/google_16.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-about{display:inline-block;padding:9px 18px 0 16px;position:relative;top:-12px;text-align:left}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-about-name a{text-decoration:none;color:#ddd;cursor:pointer;font-weight:bold;font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:13px;letter-spacing:normal;transition:color 0.3s ease-out}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-about-name a:hover{color:#fff}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-about-logout a{text-decoration:none;font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:10px;letter-spacing:normal;color:#999;transition:color 0.3s ease-out}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-about-logout a:hover{color:#fff}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons{display:inline-block;padding:17px 10px 0 0;position:relative;top:-20px}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-content,body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-style,body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-config{display:inline-block;width:16px;height:16px;text-indent:-9999px !important;color:transparent !important;margin-right:14px;opacity:.5;transition:opacity 0.2s ease-out}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-content:hover,body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-style:hover,body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-config:hover{opacity:1}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-content{background:transparent url('//assets.squarespace.com/universal/images-v6/icons/icon-edit-16-light.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-style{background:transparent url('//assets.squarespace.com/universal/images-v6/icons/icon-brush-16-light.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome .sqs-chrome-badge-buttons-config{background:transparent url('//assets.squarespace.com/universal/images-v6/icons/icon-settings-15-light.png') center center no-repeat}body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome,body.squarespace-editable div#sqs-edit-mode-controller .sqs-edit-mode-controller-content .secondary-pill{position:absolute;bottom:0px;right:0px;white-space:nowrap;transition:opacity 0.3s ease-out, visibility 0.3s ease-out}body.squarespace-editable div#sqs-edit-mode-controller.secondary-pill-visible .sqs-chrome{opacity:0;visibility:hidden}body.squarespace-editable div#sqs-edit-mode-controller.secondary-pill-visible .secondary-pill{opacity:1}@media (max-width:620px){body.squarespace-editable div#sqs-edit-mode-controller.preview-indicators .sqs-edit-mode-controller-content .sqs-chrome-badge{bottom:70px}}body.sqs-frame-interaction-locked{pointer-events:none !important}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller .sqs-edit-mode-controller-content{-webkit-perspective:1000;-moz-perspective:1000}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome{transform:rotatex(0deg)}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller .sqs-edit-mode-controller-content .secondary-pill{transform:rotatex(-180deg)}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller .sqs-edit-mode-controller-content .sqs-chrome,html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller .sqs-edit-mode-controller-content .secondary-pill{-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;transform-origin:100% 50%;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller.secondary-pill-visible .sqs-chrome{opacity:1;visibility:visible;transform:rotatex(180deg)}html.csstransforms3d body.squarespace-editable #sqs-edit-mode-controller.secondary-pill-visible .secondary-pill{opacity:1;transform:rotatex(0deg)}body.squarespace-editable div#sqs-template-preview{font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;-webkit-user-select:none;background-color:#222;border-radius:30px;height:52px;line-height:normal;white-space:nowrap;text-align:left !important;position:fixed;bottom:0px;left:0px;z-index:20000}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-body{display:inline-block;padding-left:30px;padding-top:10px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-body-title{font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:bold;letter-spacing:normal;color:#fff;font-size:13px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-body-description{color:#999;font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;letter-spacing:normal}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons{display:inline-block;padding-top:11px;padding-right:10px;padding-left:30px;position:relative;top:-5px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-manage{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;margin-right:5px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-manage a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-manage:hover a{color:#fff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-manage:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;background-color:#e5e5e5;color:#111;margin-left:1px;margin-right:3px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save a,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save:hover a,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel:hover a{color:#fff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save:focus,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save:hover a,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel:hover a{color:#111}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save a,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel a{color:#222}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-save:focus,body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-cancel:focus{outline:none;color:#111;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-done{background:transparent url('//assets.squarespace.com/universal/images-v6/icons/icon-close-8-light.png') center center no-repeat;width:36px;height:36px;display:inline-block;text-indent:-9999px;opacity:.5;transition:opacity 0.3s ease-out}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons-done:hover{opacity:1}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-body{background:transparent url('/universal/images-v6/icons/icon-view-14-light.png') center center no-repeat;background-position:20px 11px;padding-bottom:10px;padding-left:45px}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-body-title{font-size:12px;color:#fff}body.squarespace-editable div#sqs-template-preview .sqs-template-preview-buttons{top:0}div[data-block-state=\"unpaid\"]{box-shadow:inset 0 0 0 1px rgba(128,128,128,.2)}.sqs-feature-gated-wrapper{border:1px solid #224ba2;margin:11px 0;transition:border-color .4s cubic-bezier(.645,.045,.355,1)}.sqs-feature-gated-wrapper:hover{border-color:#183677}.sqs-feature-gated-wrapper .sqs-feature-gated-logo-container{z-index:2000;position:absolute;top:5px;right:5px}html.squarespace-damask .sqs-blockStatus[data-state=\"unpaid\"]{display:none}html.squarespace-damask.is-expanded.squarespace-page-in-trial .sqs-feature-gated-wrapper{border:none;margin:inherit}html.squarespace-damask.is-expanded.squarespace-page-in-trial .sqs-feature-gated-wrapper .sqs-feature-gated-logo-container{display:none}html.squarespace-damask.is-expanded:not(.squarespace-page-in-trial) .sqs-block[data-block-state=\"unpaid\"]{display:none}html.squarespace-damask .sqs-edit-mode-active .sqs-feature-gated-logo-container{cursor:default;pointer-events:none}.squarespace-selection{background:rgba(0,0,0,.08);border:solid 1px #fff;position:absolute;z-index:99999999999}body.drag-selecting,body.drag-selection-dragging{-webkit-user-select:none;-moz-user-select:none}body.drag-selecting *,body.drag-selection-dragging *{cursor:default !important}.sqs-block.vsize-1 .sqs-block-content{height:34px}.sqs-block.vsize-2 .sqs-block-content{height:68px}.sqs-block.vsize-3 .sqs-block-content{height:102px}.sqs-block.vsize-4 .sqs-block-content{height:136px}.sqs-block.vsize-5 .sqs-block-content{height:170px}.sqs-block.vsize-6 .sqs-block-content{height:204px}.sqs-block.vsize-7 .sqs-block-content{height:238px}.sqs-block.vsize-8 .sqs-block-content{height:272px}.sqs-block.vsize-9 .sqs-block-content{height:306px}.sqs-block.vsize-10 .sqs-block-content{height:340px}.sqs-block.vsize-11 .sqs-block-content{height:374px}.sqs-block.vsize-12 .sqs-block-content{height:408px}.sqs-block.vsize-13 .sqs-block-content{height:442px}.sqs-block.vsize-14 .sqs-block-content{height:476px}.sqs-block.vsize-15 .sqs-block-content{height:510px}.sqs-block.vsize-16 .sqs-block-content{height:544px}.sqs-block.vsize-17 .sqs-block-content{height:578px}.sqs-block.vsize-18 .sqs-block-content{height:612px}.sqs-block.vsize-19 .sqs-block-content{height:646px}.sqs-block.vsize-20 .sqs-block-content{height:680px}.sqs-block.vsize-21 .sqs-block-content{height:714px}.sqs-block.vsize-22 .sqs-block-content{height:748px}.sqs-block.vsize-23 .sqs-block-content{height:782px}.sqs-block.vsize-24 .sqs-block-content{height:816px}.sqs-block.vsize-25 .sqs-block-content{height:850px}.sqs-block.vsize-26 .sqs-block-content{height:884px}.sqs-block.vsize-27 .sqs-block-content{height:918px}.sqs-block.vsize-28 .sqs-block-content{height:952px}.sqs-block.vsize-29 .sqs-block-content{height:986px}.sqs-block.vsize-30 .sqs-block-content{height:1020px}.sqs-row{width:auto !important}.sqs-row:before,.sqs-row:after{content:\"\";display:table}.sqs-row:after{clear:both}[class*=sqs-col]{float:left}[class*=sqs-col] .sqs-block{padding-left:17px;padding-right:17px}[class*=sqs-col]:last-child{padding-right:0}.sqs-col-12{width:100%}.sqs-col-12 .sqs-col-12{width:100%}.sqs-col-12 .sqs-col-11{width:91.6667%}.sqs-col-12 .sqs-col-10{width:83.3333%}.sqs-col-12 .sqs-col-9{width:75%}.sqs-col-12 .sqs-col-8{width:66.6667%}.sqs-col-12 .sqs-col-7{width:58.3333%}.sqs-col-12 .sqs-col-6{width:50%}.sqs-col-12 .sqs-col-5{width:41.6667%}.sqs-col-12 .sqs-col-4{width:33.3333%}.sqs-col-12 .sqs-col-3{width:25%}.sqs-col-12 .sqs-col-2{width:16.6667%}.sqs-col-12 .sqs-col-1{width:8.3333%}.sqs-col-11{width:91.6667%}.sqs-col-11 .sqs-col-11{width:100%}.sqs-col-11 .sqs-col-10{width:90.9091%}.sqs-col-11 .sqs-col-9{width:81.8182%}.sqs-col-11 .sqs-col-8{width:72.7273%}.sqs-col-11 .sqs-col-7{width:63.6364%}.sqs-col-11 .sqs-col-6{width:54.5455%}.sqs-col-11 .sqs-col-5{width:45.4545%}.sqs-col-11 .sqs-col-4{width:36.3636%}.sqs-col-11 .sqs-col-3{width:27.2727%}.sqs-col-11 .sqs-col-2{width:18.1818%}.sqs-col-11 .sqs-col-1{width:9.0909%}.sqs-col-10{width:83.3333%}.sqs-col-10 .sqs-col-10{width:100%}.sqs-col-10 .sqs-col-9{width:90%}.sqs-col-10 .sqs-col-8{width:80%}.sqs-col-10 .sqs-col-7{width:70%}.sqs-col-10 .sqs-col-6{width:60%}.sqs-col-10 .sqs-col-5{width:50%}.sqs-col-10 .sqs-col-4{width:40%}.sqs-col-10 .sqs-col-3{width:30%}.sqs-col-10 .sqs-col-2{width:20%}.sqs-col-10 .sqs-col-1{width:10%}.sqs-col-9{width:75%}.sqs-col-9 .sqs-col-9{width:100%}.sqs-col-9 .sqs-col-8{width:88.8889%}.sqs-col-9 .sqs-col-7{width:77.7778%}.sqs-col-9 .sqs-col-6{width:66.6667%}.sqs-col-9 .sqs-col-5{width:55.5556%}.sqs-col-9 .sqs-col-4{width:44.4444%}.sqs-col-9 .sqs-col-3{width:33.3333%}.sqs-col-9 .sqs-col-2{width:22.2222%}.sqs-col-9 .sqs-col-1{width:11.1111%}.sqs-col-8{width:66.6667%}.sqs-col-8 .sqs-col-8{width:100%}.sqs-col-8 .sqs-col-7{width:87.5%}.sqs-col-8 .sqs-col-6{width:75%}.sqs-col-8 .sqs-col-5{width:62.5%}.sqs-col-8 .sqs-col-4{width:50%}.sqs-col-8 .sqs-col-3{width:37.5%}.sqs-col-8 .sqs-col-2{width:25%}.sqs-col-8 .sqs-col-1{width:12.5%}.sqs-col-7{width:58.3333%}.sqs-col-7 .sqs-col-7{width:100%}.sqs-col-7 .sqs-col-6{width:85.7143%}.sqs-col-7 .sqs-col-5{width:71.4286%}.sqs-col-7 .sqs-col-4{width:57.1429%}.sqs-col-7 .sqs-col-3{width:42.8571%}.sqs-col-7 .sqs-col-2{width:28.5714%}.sqs-col-7 .sqs-col-1{width:14.2857%}.sqs-col-6{width:50%}.sqs-col-6 .sqs-col-6{width:100%}.sqs-col-6 .sqs-col-5{width:83.3333%}.sqs-col-6 .sqs-col-4{width:66.6667%}.sqs-col-6 .sqs-col-3{width:50%}.sqs-col-6 .sqs-col-2{width:33.3333%}.sqs-col-6 .sqs-col-1{width:16.6667%}.sqs-col-5{width:41.6667%}.sqs-col-5 .sqs-col-5{width:100%}.sqs-col-5 .sqs-col-4{width:80%}.sqs-col-5 .sqs-col-3{width:60%}.sqs-col-5 .sqs-col-2{width:40%}.sqs-col-5 .sqs-col-1{width:20%}.sqs-col-4{width:33.3333%}.sqs-col-4 .sqs-col-4{width:100%}.sqs-col-4 .sqs-col-3{width:75%}.sqs-col-4 .sqs-col-2{width:50%}.sqs-col-4 .sqs-col-1{width:25%}.sqs-col-3{width:25%}.sqs-col-3 .sqs-col-3{width:100%}.sqs-col-3 .sqs-col-2{width:66.6667%}.sqs-col-3 .sqs-col-1{width:33.3333%}.sqs-col-2{width:16.6667%}.sqs-col-2 .sqs-col-2{width:100%}.sqs-col-2 .sqs-col-1{width:50%}.sqs-col-1{width:8.3333%}.sqs-col-1 .sqs-col-1{width:100%}.sqs-layout > .sqs-row{margin-left:-17px;margin-right:-17px}.sqs-layout:not(.sqs-editing) .sqs-row .sqs-block:not(.float):not(.sqs-feature-gated-wrapper):first-child{padding-top:0}.sqs-layout:not(.sqs-editing) .sqs-block+.sqs-row .sqs-block:not(.float):first-child{padding-top:17px}.sqs-layout:not(.sqs-editing) .sqs-row+.sqs-row .sqs-block:not(.float):first-child{padding-top:17px}.sqs-layout:not(.sqs-editing)>.sqs-row:first-child>[class*=sqs-col]:first-child>.sqs-block:last-child,.sqs-layout:not(.sqs-editing) .sqs-block+.sqs-row .sqs-block:not(.float):last-child{padding-bottom:17px}.sqs-layout:not(.sqs-editing) .sqs-row+.sqs-row:not(:last-child) .sqs-block:last-child{padding-bottom:17px}.sqs-block.sized .sqs-block-content{overflow:hidden}.text-align-center{text-align:center}.text-align-right{text-align:right}.columns-1 [class*=sqs-col-]{width:100% !important}.sqs-block .state-message,.sqs-state-message{font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;padding:19px;padding-left:60px;color:#3e3e3e;position:relative;background-color:rgba(128,128,128,.15000000000000002)}.sqs-block .state-message:after,.sqs-state-message:after{content:\" \";position:absolute;top:0;left:0;height:60px;width:60px;background:transparent url(/universal/images-v6/icons/block-indicator-dark.png) no-repeat center}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-block .state-message:after,.sqs-state-message:after{background-image:url('/universal/images-v6/icons/block-indicator-dark@2x.png');background-size:22px}}.sqs-block .state-message.information,.sqs-state-message.information{background:#222;padding:30px 20px;text-align:center;color:#999;font-size:11px}.sqs-block .state-message .title,.sqs-state-message .title{padding-bottom:8px;font-size:14px}html.cameron .sqs-block .state-message .title,html.cameron .sqs-state-message .title{color:#eee}.sqs-block .state-message>.sqs-state-message-button,.sqs-state-message>.sqs-state-message-button,.sqs-block .state-message .sqs-state-message-buttons-wrapper,.sqs-state-message .sqs-state-message-buttons-wrapper{margin-top:19px;margin-left:-41px;display:block !important;position:relative}.sqs-block .state-message .sqs-state-message-button,.sqs-state-message .sqs-state-message-button{cursor:pointer;outline:none;background:#3e3e3e;padding:11px;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;line-height:22px;text-align:center;display:inline-block;position:relative}.sqs-block .state-message .sqs-state-message-button,.sqs-state-message .sqs-state-message-button,.sqs-block .state-message .sqs-state-message-button>*,.sqs-state-message .sqs-state-message-button>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-block .state-message .sqs-state-message-button:hover,.sqs-state-message .sqs-state-message-button:hover{background-color:#000;box-shadow:none}.sqs-block .state-message .sqs-state-message-button.disabled,.sqs-state-message .sqs-state-message-button.disabled{opacity:.3;cursor:default}.sqs-block .state-message .sqs-state-message-button.disabled>*,.sqs-state-message .sqs-state-message-button.disabled>*{opacity:.5}.sqs-block .state-message .sqs-state-message-button.disabled:hover,.sqs-state-message .sqs-state-message-button.disabled:hover{background-color:#3e3e3e !important}.sqs-layout.sqs-editing .sqs-block .sqs-block .state-message .sqs-state-message-button,.sqs-layout.sqs-editing .sqs-block .sqs-state-message .sqs-state-message-button{z-index:1001}.sqs-col-0{width:0;display:none}html.squarespace-damask.is-expanded .sqs-block [data-block-state=\"invalid\"]{display:none}html.squarespace-damask.is-expanded .sqs-jacquard.sqs-layout-editing .sqs-block [data-block-state=\"invalid\"],html.squarespace-damask.is-expanded .sqs-jacquard .sqs-catalog .sqs-block [data-block-state=\"invalid\"]{display:block}.sqs-blockStatus{display:none;position:relative;z-index:1001}html.squarespace-damask .sqs-blockStatus,html.blogapp .sqs-blockStatus{display:block}html.squarespace-damask.is-expanded .sqs-blockStatus{display:none}.sqs-blockStatus-box{padding:22px 56px 22px 22px;background:#fff;border:1px solid #d0d0d0;border-radius:4px;color:#3e3e3e;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;line-height:1em;font-weight:normal;letter-spacing:normal;text-align:left;cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none;box-shadow:-2px 1px 6px 1px rgba(0,0,0,.1);box-sizing:border-box}[data-state=\"invalid\"] .sqs-blockStatus-box{border:1px solid #f0523d}.sqs-blockStatus-box-title{margin:0 0 11px 0;font-size:12px;line-height:1.65em;font-weight:500;letter-spacing:.06em;text-transform:uppercase}.sqs-blockStatus-box-message,.sqs-blockStatus-box-kbArticleLink{font-size:11px;line-height:1.65em}.sqs-blockStatus-box-message a:link,.sqs-blockStatus-box-kbArticleLink a:link,.sqs-blockStatus-box-message a:hover,.sqs-blockStatus-box-kbArticleLink a:hover,.sqs-blockStatus-box-message a:visited,.sqs-blockStatus-box-kbArticleLink a:visited,.sqs-blockStatus-box-message a:active,.sqs-blockStatus-box-kbArticleLink a:active{color:#3e3e3e !important;border-bottom:1px solid #3e3e3e !important;text-decoration:none !important}.sqs-blockStatus-box-message a:link:hover,.sqs-blockStatus-box-kbArticleLink a:link:hover,.sqs-blockStatus-box-message a:hover:hover,.sqs-blockStatus-box-kbArticleLink a:hover:hover,.sqs-blockStatus-box-message a:visited:hover,.sqs-blockStatus-box-kbArticleLink a:visited:hover,.sqs-blockStatus-box-message a:active:hover,.sqs-blockStatus-box-kbArticleLink a:active:hover{color:#797979 !important;border-color:#797979 !important}.sqs-blockStatus-box-kbArticleLink{display:inline-block}.sqs-editing .sqs-blockStatus-box-kbArticleLink{display:none}.sqs-blockStatus-box-button{display:inline-block;margin-top:11px;cursor:pointer;outline:none;background:#3e3e3e;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-blockStatus-box-button,.sqs-blockStatus-box-button>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;font-size:11px;font-weight:500}.sqs-blockStatus-box-button:hover{background-color:#000;box-shadow:none}.sqs-blockStatus-box-button.disabled{opacity:.3;cursor:default}.sqs-blockStatus-box-button.disabled>*{opacity:.5}.sqs-blockStatus-box-button.disabled:hover{background-color:#3e3e3e !important}.sqs-blockStatus--overlayMode{opacity:0;visibility:hidden;position:absolute;top:0;left:0;right:0;bottom:0;width:auto;height:auto;background:transparent;border:1px solid #ededed;z-index:1002;pointer-events:none;box-sizing:border-box}.sqs-blockStatus--overlayMode[data-state=\"invalid\"]{opacity:1;visibility:visible;border:1px solid #f0523d}.sqs-layout:not(.sqs-editing)>.sqs-row:first-child .sqs-block:not(.float):first-child .sqs-blockStatus--overlayMode{top:-17px}.sqs-blockStatus--overlayMode .sqs-blockStatus-box{position:absolute;top:-8.5px;right:-8.5px;width:380px;border:1px solid #d0d0d0 !important;z-index:1000;pointer-events:all;transition:opacity 0.2s ease-in;opacity:0;visibility:hidden}@media only screen and (pointer: coarse) and (orientation: portrait) and (max-device-width: 414px),only screen and (pointer: coarse) and (orientation: landscape) and (max-device-height: 414px){.sqs-blockStatus--overlayMode .sqs-blockStatus-box{right:0}}html.blogapp .sqs-blockStatus--overlayMode .sqs-blockStatus-box{display:none}.sqs-blockStatus[data-state=\"invalid\"] .sqs-blockStatus-disclosure:after{content:\"!\";position:absolute;top:11px;right:11px;height:22px;width:22px;background:#f0523d;border-radius:100%;color:#fff;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:11px;line-height:22px;font-weight:700;letter-spacing:normal;text-align:center;z-index:1001;pointer-events:all}.sqs-editing .sqs-blockStatus--overlayMode .sqs-blockStatus-disclosure:after{opacity:0;visibility:hidden}html.squarespace-damask .sqs-blockStatus--overlayMode .sqs-blockStatus-disclosure:after{cursor:pointer}html.squarespace-damask .sqs-blockStatus--overlayMode .sqs-blockStatus-disclosure:hover+.sqs-blockStatus-box,html.squarespace-damask .sqs-blockStatus--overlayMode .sqs-blockStatus-box:hover,html.blogapp .sqs-blockStatus--overlayMode .sqs-blockStatus-disclosure:hover+.sqs-blockStatus-box,html.blogapp .sqs-blockStatus--overlayMode .sqs-blockStatus-box:hover{opacity:1;visibility:visible}.sqs-block-audio .sqs-audio-embed.sqs-block-is-placeholder .sqs-widgets-audio-player .action{cursor:default;pointer-events:none}.sqs-block-audio .sqs-audio-embed.sqs-block-is-placeholder .sqs-widgets-audio-player .action .play{opacity:.1}.sqs-block-newsletter.sqs-block-editing .sqs-blockStatus,.sqs-block-opentable.sqs-block-editing .sqs-blockStatus{opacity:0;visibility:hidden}.sqs-block-summary-v2:hover .sqs-block-is-placeholder[data-block-state=\"invalid\"] .summary-heading{width:calc(100% -  80px);width:-moz-calc(100% -  80px)}.sqs-block-summary-v2:hover .sqs-block-is-placeholder[data-block-state=\"invalid\"] .summary-carousel-pager{width:80px;padding-right:30px}.sqs-block-twitter .tweet-list.sqs-block-is-placeholder .tweet-avatar{width:48px;height:48px}.sqs-block-video .sqsVideoBlockPlaceholder{position:relative;width:100%;height:auto;padding-bottom:65%;background:#f6f6f6}.sqs-block-video .sqsVideoBlockPlaceholder[data-block-state=\"invalid\"]{display:none}html.squarespace-damask .sqs-block-video .sqsVideoBlockPlaceholder[data-block-state=\"invalid\"],html.blogapp .sqs-block-video .sqsVideoBlockPlaceholder[data-block-state=\"invalid\"]{display:block}html.squarespace-damask.is-expanded .sqs-block-video .sqsVideoBlockPlaceholder[data-block-state=\"invalid\"]{display:none}.sqs-block-video .sqsVideoBlockPlaceholder-play{position:absolute;top:50%;left:50%;margin-top:-41px;margin-left:-31px}.sqs-block-video .sqsVideoBlockPlaceholder-timeline{position:absolute;left:0;bottom:0;height:50px;width:100%;border-width:23px 75px;border-style:solid;border-color:#e9e9e9;background:#b4b4b4;box-sizing:border-box}.sqs-block-video .sqsVideoBlockPlaceholder-timeline:before,.sqs-block-video .sqsVideoBlockPlaceholder-timeline:after{content:'';position:absolute;background:#fff}.sqs-block-video .sqsVideoBlockPlaceholder-timeline:before{top:0;left:0;width:50px;height:100%}.sqs-block-video .sqsVideoBlockPlaceholder-timeline:after{top:50%;left:48px;margin-top:-6px;height:12px;width:12px;border-radius:100%}.sqs-block-video .sqsVideoBlockPlaceholder+iframe{display:none}.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-selected,.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-confirmation-open,.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-block-editable:hover{box-shadow:inset 0 0 0 2px rgba(8,136,200,.4)}.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-block-editing,.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-block-editing:hover,.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-block-focused,.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.sqs-block-focused:hover{box-shadow:inset 0 0 0 2px #0888c8}.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.yui3-dd-dragging{box-shadow:inset 0 0 0 2px #0888c8;opacity:1}.sqs-jacquard.sqs-jacquard-outline-beta .sqs-layout.sqs-editing .sqs-block.yui3-dd-dragging>*{opacity:.3}.sqs-block{position:relative;height:auto;padding-top:17px;padding-bottom:17px;outline:none;box-shadow:inset 0 0 0 1px rgba(128,128,128,0);transition:box-shadow .2s ease-in-out}.sqs-block:not(.sqs-block-html):not(.sqs-block-markdown){clear:both}.sqs-layout.sqs-editing .sqs-block{-webkit-backface-visibility:hidden;backface-visibility:hidden}.sqs-layout.sqs-editing .sqs-block.sqs-block-editable:hover{box-shadow:inset 0 0 0 1px rgba(128,128,128,.2)}.sqs-layout.sqs-editing .sqs-block.sqs-block-focused,.sqs-layout.sqs-editing .sqs-block.sqs-block-editing,.sqs-layout.sqs-editing .sqs-block.sqs-block-focused:hover,.sqs-layout.sqs-editing .sqs-block.sqs-block-editing:hover,.sqs-layout.sqs-editing .sqs-block.sqs-selected,.sqs-layout.sqs-editing .sqs-block.sqs-confirmation-open{box-shadow:inset 0 0 0 1px rgba(128,128,128,.85)}.sqs-layout.sqs-editing .sqs-block.sqs-block-html.sqs-block-editing{box-shadow:inset 0 0 0 1px rgba(128,128,128,0) !important}.sqs-layout.sqs-editing .sqs-block.sqs-dd-dragging,.sqs-layout.sqs-editing .sqs-block.yui3-dd-dragging{z-index:9995 !important;opacity:.3;transition:opacity .15s ease-in-out;box-sizing:border-box}.sqs-block iframe.embedded-scripts-preview{display:block;position:relative;border:0}.sqs-block .removed-script{display:block;opacity:.6}.sqs-block .removed-script::before{content:'Script Disabled';font-style:italic}html .sqs-block.sqs-block-editable:not(.sqs-block-editing){cursor:url(/universal/images-v6/icons/grab.cur) 8 8,move;cursor:-moz-grab}html .sqs-block.sqs-block-editable:not(.sqs-block-editing) .sqs-dd-invalid-handle{cursor:default}html.sqs-dragging-block *{cursor:url(/universal/images-v6/icons/grabbing.cur) 8 8,move;cursor:-moz-grabbing}html .sqs-locked-layout .sqs-block{cursor:default !important}.sqs-block-code img{max-width:100%}.sqs-block-code .gm-style img{max-width:none}.sqs-block-hidden{height:0;overflow:hidden}.yui3-overlay-hidden{display:none}.sqs-editing-overlay{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sqs-locked-height .sqs-editing-overlay{background-color:rgba(255,255,255,.5)}html.browser-msie .sqs-editing-overlay{background-color:rgba(128,128,128,.05)}body.sqs-dragging .sqs-layout .sqs-content-overlay{display:block !important}.sqs-content-overlay{position:absolute;left:0;width:100%}[class*=aspect-overlay]{padding-bottom:20px;position:absolute}[class*=aspect-overlay] .yui3-overlay-content{background:rgba(0,0,0,.9);color:#fff;font:12px/24px 'Helvetica Neue',Helvetica,Arial,sans-serif;text-align:center;width:50px;border-radius:5px}.sqs-block .yui3-resize-handle{display:none;position:absolute;height:50px;width:50px}.sqs-block .yui3-resize-handles-wrapper{z-index:10}.sqs-block .yui3-resize-handle-inner{position:absolute;top:50%;left:50%;margin-top:-7px;margin-left:-7px;height:13px;width:13px;border-radius:100px;background-color:grey}.sqs-block .yui3-resize-handle-b{margin-bottom:-25px;margin-left:-25px;bottom:-1px;left:50%;cursor:row-resize}.sqs-block .yui3-resize-handle-l{left:0;top:0;bottom:0;width:10px;cursor:col-resize}.sqs-block .yui3-resize-handle-r{right:0;top:0;bottom:0;width:10px;cursor:col-resize}.sqs-block .yui3-resize-handle.sqs-dd-dragging .yui3-resize-handle,.sqs-block .yui3-resize-handle.yui3-dd-dragging .yui3-resize-handle{display:none}.sqs-block[class*=focused] .yui3-resize-handle,.sqs-block.sqs-block-editing .yui3-resize-handle{display:block;z-index:9999}.sqs-block[class*=float]{z-index:10 !important;box-sizing:border-box;clear:none}.sqs-block[class*=float-left]{float:left;margin-right:17px}.sqs-block[class*=float-left]+.sqs-block[class*=float-left]{clear:left}.sqs-block[class*=float-right]{float:right;margin-left:17px}.sqs-block[class*=float-right]+.sqs-block[class*=float-right]{clear:right}.sqs-block .sqs-intrinsic{position:relative !important}.sqs-block .sqs-intrinsic .sqs-intrinsic-content{position:absolute !important;top:0;left:0;height:100%;max-width:none;width:100%}.dd-drag-hidden{display:none}.dd-drag-grouped-item{position:absolute !important;top:0;left:0}.yui3-dd-dragging{z-index:1}.dd-reorder-items-count{width:22px;height:22px;position:absolute;top:0;right:0;background:#d0d0d0;border-radius:50%;text-align:center;font-size:12px;line-height:22px;color:#fff}@font-face{font-family:'squarespace-ui-font';src:url('https://assets.squarespace.com/universal/fonts/squarespace-ui-font.eot');src:url('https://assets.squarespace.com/universal/fonts/squarespace-ui-font.eot?#iefix') format('embedded-opentype'),url('https://assets.squarespace.com/universal/fonts/squarespace-ui-font.svg#squarespace-ui-font') format('svg'),url('https://assets.squarespace.com/universal/fonts/squarespace-ui-font.woff') format('woff'),url('https://assets.squarespace.com/universal/fonts/squarespace-ui-font.ttf') format('truetype');font-weight:normal;font-style:normal}.sqs-ui-font-family{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased}[class^=\"sqs-ui-font-\"]:before,[class*=\" sqs-ui-font-\"]:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased}[data-icon]:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:attr(data-icon)}.sqs-gallery-container iframe{width:100%;height:100%;background:transparent;display:block}.sqs-gallery-controls .previous,.sqs-gallery-controls .next{position:absolute;top:50%;color:#fff !important;z-index:999;font-size:14px;line-height:40px;margin-top:-30px;background-color:rgba(0,0,0,.12);display:inline-block;padding:10px;transition:background-color 200ms cubic-bezier(.25,.46,.45,.94)}.sqs-gallery-controls .previous:hover,.sqs-gallery-controls .next:hover{background-color:rgba(0,0,0,.2)}.sqs-gallery-controls .previous{left:0px}.sqs-gallery-controls .previous:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02C\";text-align:center;display:inline-block;vertical-align:middle}.sqs-gallery-controls .previous:before{font-size:32px;width:32px;height:32px;line-height:32px}.sqs-gallery-controls .next{right:0px}.sqs-gallery-controls .next:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02D\";text-align:center;display:inline-block;vertical-align:middle}.sqs-gallery-controls .next:before{font-size:32px;width:32px;height:32px;line-height:32px}.sqs-gallery-controls .next:before,.sqs-gallery-controls .previous:before{font-size:24px;width:24px;height:24px;line-height:24px}.sqs-gallery-design-stacked{position:relative;text-align:left}.sqs-gallery-design-stacked-slide{position:absolute;top:0;left:0;width:100%;height:100%}.sqs-gallery-design-stacked-slide img{box-shadow:#000 0em 0em 0em}.sqs-gallery-design-stacked-slide.normal img{height:100%}.sqs-gallery-design-stacked-slide:only-child{cursor:default}.sqs-gallery-design-stacked-scrollHorz,.sqs-gallery-design-stacked-swipe{overflow:hidden}.sqs-gallery-design-stacked-scrollHorz .sqs-gallery-design-stacked-slide,.sqs-gallery-design-stacked-swipe .sqs-gallery-design-stacked-slide{position:relative;float:left}.sqs-gallery-design-stacked-swipe-wrapper{overflow-x:scroll;-webkit-transform:translatez(0);-ms-overflow-style:none;-ms-scroll-chaining:none;-ms-scroll-snap-type:mandatory;-ms-scroll-snap-points-x:snapinterval(0%,100%)}.sqs-gallery-design-strip{position:relative;overflow:hidden;height:100%}.sqs-gallery-design-strip .sqs-wrapper{position:relative;height:100%}.sqs-gallery-design-strip-slide{float:left;height:100% !important;max-width:none !important;width:auto !important;cursor:pointer;position:relative}.sqs-gallery-design-strip-slide img,.sqs-gallery-design-strip-slide .sqs-video-wrapper{height:100% !important}.sqs-gallery-design-strip-slide:only-child{cursor:default}.sqs-gallery-design-autocolumns{position:relative}.sqs-gallery-design-autocolumns-slide{position:absolute}.sqs-gallery-design-autocolumns-slide img{width:100%;display:inline-block;transition:opacity .2s;opacity:1}.sqs-gallery-design-autocolumns-slide img.loading{opacity:0}.sqs-gallery-design-autocolumns-slide.content-fit img,.sqs-gallery-design-autocolumns-slide .content-fit img{width:auto}.sqs-gallery-design-autocolumns-slide.slide-stretched img{height:100%}.sqs-gallery-design-carousel .sqs-gallery-controls{overflow:hidden}.sqs-gallery-design-carousel .sqs-gallery-controls .next,.sqs-gallery-design-carousel .sqs-gallery-controls .previous{display:block;float:right;position:relative;top:auto;left:auto;right:auto;bottom:auto;margin:0 0 15px 0;padding:0;background-color:transparent;color:inherit !important;font-size:16px;line-height:16px;cursor:pointer}.sqs-gallery-design-carousel .sqs-gallery-controls .next:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02D\";text-align:center;display:inline-block;vertical-align:middle}.sqs-gallery-design-carousel .sqs-gallery-controls .next:before{font-size:32px;width:32px;height:32px;line-height:32px}.sqs-gallery-design-carousel .sqs-gallery-controls .next:before{font-size:16px;width:16px;height:16px;line-height:16px}.sqs-gallery-design-carousel .sqs-gallery-controls .previous{margin-right:10px}.sqs-gallery-design-carousel .sqs-gallery-controls .previous:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02C\";text-align:center;display:inline-block;vertical-align:middle}.sqs-gallery-design-carousel .sqs-gallery-controls .previous:before{font-size:32px;width:32px;height:32px;line-height:32px}.sqs-gallery-design-carousel .sqs-gallery-controls .previous:before{font-size:16px;width:16px;height:16px;line-height:16px}.sqs-gallery-design-carousel .sqs-gallery-controls .sqs-disabled{cursor:default;opacity:.4}.sqs-gallery-design-carousel .sqs-gallery-controls .sqs-hidden{display:none}.sqs-gallery-design-carousel .sqs-gallery-container{width:100%;overflow:hidden}.sqs-gallery-design-carousel .sqs-gallery{margin:0 0 0 -1%;white-space:nowrap;vertical-align:top;font-size:0;transition:transform ease .4s}.sqs-gallery-design-carousel .sqs-gallery-design-carousel-slide{display:inline-block;width:33.66666667%;padding:0 1%;white-space:nowrap;vertical-align:top;font-size:0}.sqs-gallery-design-carousel .sqs-gallery-design-carousel-slide img{width:100%;height:auto}.sqs-gallery-design-carousel .sqs-gallery-design-carousel-slide *{white-space:normal}.sqs-gallery-design-list .sqs-gallery-design-list-slide{overflow:hidden;margin-bottom:17px !important;padding-bottom:17px !important}.sqs-gallery-design-list .sqs-gallery-image-container{float:left;width:25%;padding-right:20px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.sqs-gallery-design-list .sqs-gallery-meta-container{float:left;width:75%;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}.sqs-gallery-design-list .sqs-gallery-design-list-slide.no-image .sqs-gallery-image-container{width:0 !important}.sqs-gallery-design-list .sqs-gallery-design-list-slide.no-image .sqs-gallery-meta-container{width:100% !important}@media screen and (max-width:480px){.sqs-gallery-design-list .sqs-gallery-design-list-slide:not(.no-image) .sqs-gallery-image-container{width:35% !important}.sqs-gallery-design-list .sqs-gallery-design-list-slide:not(.no-image) .sqs-gallery-meta-container{width:65% !important}}.sqs-gallery-design-autorows .sqs-gallery-design-autorows-slide{float:left;cursor:pointer;overflow:hidden}.sqs-gallery-design-autorows .sqs-gallery-design-autorows-slide img{height:100%}.sqs-gallery-design-autorows .sqs-gallery-design-autorows-slide .meta{display:none}.sqs-gallery-design-autogrid{zoom:1}.sqs-gallery-design-autogrid:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-gallery-design-autogrid-slide{position:relative;float:left}.sqs-gallery-design-autogrid-slide .img-wrapper{height:0}.sqs-gallery-design-autogrid-slide img{width:100%}.yui3-lightbox2{-webkit-user-select:text;-ms-user-select:text;user-select:text}.yui3-lightbox2 .yui3-lightbox2-content{height:100%;left:0;position:absolute;width:100%;overflow:hidden}.yui3-lightbox2 .sqs-lightbox-slideshow{height:100%;opacity:0;z-index:100000001}.yui3-lightbox2 .sqs-lightbox-slideshow .sqs-lightbox-padder{position:absolute;text-align:left;top:2%;left:2%;bottom:2%;right:2%}.yui3-lightbox2 .sqs-lightbox-overlay{position:absolute;opacity:0;top:0;left:0;background:#000;height:100%;width:100%}.yui3-lightbox2 .sqs-lightbox-meta{position:absolute;padding:20px;color:#fff;z-index:100000001;margin:20px auto 0;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";opacity:0;transition:opacity ease-out .2s}.yui3-lightbox2 .sqs-lightbox-meta.overlay-description-visible{background:#000;-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)\";background:rgba(0,0,0,.7);opacity:1 !important}.yui3-lightbox2 .sqs-lightbox-meta p:first-child{margin-top:0}.yui3-lightbox2 .sqs-lightbox-meta p:last-child{margin-bottom:0}.yui3-lightbox2 .sqs-lightbox-meta h1{font-size:1em;color:#fff;margin:0 0 10px}.yui3-lightbox2 .sqs-lightbox-meta p a{color:#fff;text-decoration:underline}.yui3-lightbox2 .sqs-lightbox-close,.yui3-lightbox2 .sqs-lightbox-previous,.yui3-lightbox2 .sqs-lightbox-next,.yui3-lightbox2 .sqs-lightbox-meta-trigger{position:absolute;z-index:100000002;display:flex;align-items:center;justify-content:center;color:#ccc;height:20px;width:20px;font-size:26px;cursor:pointer;outline-color:currentColor}.yui3-lightbox2 .sqs-lightbox-next,.yui3-lightbox2 .sqs-lightbox-previous{padding:12px;opacity:0;top:50%;margin-top:-22px;transition:opacity .2s}.yui3-lightbox2 .sqs-lightbox-next.mouseover,.yui3-lightbox2 .sqs-lightbox-previous.mouseover,.yui3-lightbox2 .sqs-lightbox-next:focus,.yui3-lightbox2 .sqs-lightbox-previous:focus{opacity:1}.yui3-lightbox2 .sqs-lightbox-next{right:2%}.yui3-lightbox2 .sqs-lightbox-next:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02D\";text-align:center;display:inline-block;vertical-align:middle}.yui3-lightbox2 .sqs-lightbox-next:before{font-size:32px;width:32px;height:32px;line-height:32px}.yui3-lightbox2 .sqs-lightbox-previous{left:2%}.yui3-lightbox2 .sqs-lightbox-previous:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02C\";text-align:center;display:inline-block;vertical-align:middle}.yui3-lightbox2 .sqs-lightbox-previous:before{font-size:32px;width:32px;height:32px;line-height:32px}.yui3-lightbox2 .sqs-lightbox-next::before,.yui3-lightbox2 .sqs-lightbox-previous::before{font-size:22px}.yui3-lightbox2 .sqs-lightbox-close{padding:2px;right:2%;top:2%;text-align:right}.yui3-lightbox2 .sqs-lightbox-close:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\E02E\";text-align:center;display:inline-block;vertical-align:middle}.yui3-lightbox2 .sqs-lightbox-close:before{font-size:32px;width:32px;height:32px;line-height:32px}.yui3-lightbox2 .sqs-lightbox-meta-trigger{bottom:0;right:0;padding:2%;text-align:center;font-size:26px;line-height:.5;text-align:right}body.sqs-lightbox-open{position:static !important;overflow-y:hidden}.sqs-gallery img:not([src]){opacity:0}.sqs-row{position:relative}.sqs-layout.sqs-editing .sqs-gallery-design-stacked-slide{z-index:auto !important}body.dragging .sqs-layout.sqs-editing .sqs-row,.sqs-layout.dragging.sqs-editing .sqs-row,body.dragging .sqs-layout.sqs-editing [class*=sqs-col-],.sqs-layout.dragging.sqs-editing [class*=sqs-col-],body.dragging .sqs-layout.sqs-editing .sqs-block,.sqs-layout.dragging.sqs-editing .sqs-block{box-shadow:inset 0 0 3px rgba(20,170,255,.19999999999999996)}body.dragging .sqs-layout .sqs-marker-helper,.sqs-layout.dragging .sqs-marker-helper{display:block !important}body.dragging .sqs-layout .sqs-content-overlay,.sqs-layout.dragging .sqs-content-overlay{display:block !important}body.layout-mode .wysiwyg-inline-toolbar{display:none}.sqs-dd-shim,.yui3-dd-shim{z-index:999999 !important}.sqs-empty-grid-add-container{position:absolute;height:26px;margin-top:2px;margin-left:-2px;display:none;cursor:pointer}.sqs-empty-grid-add-container .sqs-empty-grid-add{position:absolute;right:-3px;top:-33px;height:28px;width:28px;z-index:25000;padding:2px;background:rgba(51,51,51,.15000000000000002) url('/universal/images-v6/icons/icon-plus-11-light.png') center center no-repeat;transition:background-color .2s ease-out;border-radius:3px;background-color:#222;background-image:linear-gradient(#3c3c3c,#080808);box-shadow:0 0 0 1px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.15), inset 1px 0 0 0 rgba(255,255,255,0.1), inset -1px 0 0 0 rgba(255,255,255,0.1), 0 2px 10px rgba(0,0,0,0.2);background-image:url('/universal/images-v6/icons/icon-plus-11-light.png')}.sqs-empty-grid-add-container .sqs-empty-grid-add:hover{background-color:#333}body.dragging .sqs-layout.empty,.dragging.sqs-layout.empty{background:rgba(20,170,255,.3)}.sqs-layout-empty-message{display:none}body.sqs-edit-mode .sqs-empty-grid-add-container{display:block}body.sqs-edit-mode .sqs-layout.empty{margin:0;top:0;left:0}body.sqs-edit-mode .sqs-layout.empty[data-type=\"page\"]{position:relative;min-height:44px}body.sqs-edit-mode .sqs-layout .sqs-layout-empty-message{display:inline-block;position:relative;padding-top:30%;padding-bottom:30%;width:100%;margin:auto;border:1px dashed rgba(0,0,0,.12);text-align:center;font-size:12px;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:500;opacity:.5;color:#000;box-sizing:border-box}body.sqs-edit-mode .sqs-layout.sqs-layout-dark .sqs-layout-empty-message{color:#fff;font-weight:normal;border:1px dashed rgba(255,255,255,.3)}body.sqs-edit-mode .sqs-layout.sqs-editing{position:relative}body.dragging .sqs-block.sqs-selected,.sqs-layout.dragging .sqs-block.sqs-selected{opacity:.3}.sqs-layout.sqs-editing .sqs-block{min-height:22px}.sqs-layout.sqs-editing .sqs-block .sqs-draghandle{position:absolute;top:0;left:0;right:0;bottom:0;z-index:101;cursor:move;background-color:rgba(255,255,255,.01)}.sqs-layout.sqs-editing .sqs-block.html-block .sqs-block-content:focus,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-block-content:focus{outline:none}.sqs-layout.sqs-editing .sqs-block.html-block .sqs-marker-helper,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-marker-helper{width:100%;z-index:30;display:none}.sqs-layout.sqs-editing .sqs-block.html-block.focused .sqs-draghandle,.sqs-layout.sqs-editing .sqs-block.markdown-block.focused .sqs-draghandle{display:none !important}.sqs-layout.sqs-editing .sqs-block.html-block .sqs-handle,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-handle{display:none}.sqs-layout.sqs-editing .sqs-block:hover .sqs-handle,.sqs-layout.sqs-editing .sqs-block.resizing .sqs-handle{opacity:1}.sqs-layout.sqs-editing .sqs-block .sqs-handle{opacity:0;z-index:109;position:absolute;transition:opacity .1s easein-out}.sqs-layout.sqs-editing .sqs-block .sqs-handle-grip{position:absolute;height:20px;width:5px;background:#3e3e3e;transition:background-color .1s easein-out;border-radius:2px}.sqs-layout.sqs-editing .sqs-block .sqs-handle:hover .sqs-handle-grip{background:#222}.sqs-layout.sqs-editing .sqs-block.sqs-selected .sqs-handle-grip{background:#666}.sqs-layout.sqs-editing .sqs-block .sqs-handle-left .sqs-handle-grip{right:-3px;top:50%;margin-top:-10px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-right .sqs-handle-grip{left:-3px;top:50%;margin-top:-10px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-bottom .sqs-handle-grip{bottom:-3px;height:5px;width:20px;left:50%;margin-left:-10px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-leftcorner .sqs-handle-grip,.sqs-layout.sqs-editing .sqs-block .sqs-handle-rightcorner .sqs-handle-grip{display:none;bottom:-1px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-leftcorner .sqs-handle-grip{right:-1px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-rightcorner .sqs-handle-grip{left:-1px}.sqs-layout.sqs-editing .sqs-block .sqs-handle-left,.sqs-layout.sqs-editing .sqs-block .sqs-handle-right{top:0;bottom:0;right:-15px;width:30px;cursor:col-resize}.sqs-layout.sqs-editing .sqs-block .sqs-handle-right{left:0}.sqs-layout.sqs-editing .sqs-block .sqs-handle-left{right:0}.sqs-layout.sqs-editing .sqs-block .sqs-handle-bottom{bottom:0;left:0;right:0;height:20px;cursor:row-resize}.sqs-layout.sqs-editing .sqs-block .sqs-handle-leftcorner{bottom:0;right:0;height:30px;width:30px;cursor:se-resize}.sqs-layout.sqs-editing .sqs-block .sqs-handle-rightcorner{bottom:0;left:0;height:30px;width:30px;cursor:sw-resize}.sqs-layout.sqs-editing .sqs-block.resizing .sqs-handle{opacity:0}.sqs-layout.sqs-editing .sqs-block.float-left .sqs-handle-left{display:block !important}.sqs-layout.sqs-editing .sqs-block.float-right .sqs-handle-right{display:block !important}.sqs-layout.sqs-editing .sqs-block.float-right+.html-block .sqs-draghandle,.sqs-layout.sqs-editing .sqs-block.float-right+.markdown-block .sqs-draghandle{left:10px;right:none}.sqs-layout.sqs-editing .sqs-block.float-right .sqs-handle-leftcorner{display:none !important}.sqs-layout.sqs-editing .sqs-block.html-block .sqs-handle-bottom,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-handle-bottom,.sqs-layout.sqs-editing .sqs-block.html-block .sqs-handle-leftcorner,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-handle-leftcorner,.sqs-layout.sqs-editing .sqs-block.html-block .sqs-handle-rightcorner,.sqs-layout.sqs-editing .sqs-block.markdown-block .sqs-handle-rightcorner{display:none}.sqs-layout.sqs-editing .sqs-block.embed-block .sqs-handle-bottom,.sqs-layout.sqs-editing .sqs-block.embed-block .sqs-handle-leftcorner,.sqs-layout.sqs-editing .sqs-block.embed-block .sqs-handle-rightcorner{display:none}.sqs-layout.sqs-editing .sqs-block.spacer-block .sqs-toolbar,.sqs-layout.sqs-editing .sqs-block.spacer-block .sqs-handle-left,.sqs-layout.sqs-editing .sqs-block.spacer-block .sqs-handle-right,.sqs-layout.sqs-editing .sqs-block.spacer-block .sqs-handle-leftcorner,.sqs-layout.sqs-editing .sqs-block.spacer-block .sqs-handle-rightcorner{display:none}.sqs-layout.sqs-editing .sqs-block.float.float-right .sqs-handle-right,.sqs-layout.sqs-editing .sqs-block.float.float-right .sqs-handle-rightcorner{display:block}.sqs-layout.sqs-editing .sqs-block.float.float-right:hover .sqs-handle-right,.sqs-layout.sqs-editing .sqs-block.float.float-right.sqs-selected .sqs-handle-right{opacity:1}.sqs-layout.sqs-editing .sqs-block.float.float-left .sqs-handle-left,.sqs-layout.sqs-editing .sqs-block.float.float-left .sqs-handle-leftcorner{display:block}.sqs-layout.sqs-editing .sqs-block.float.float-left:hover .sqs-handle-left,.sqs-layout.sqs-editing .sqs-block.float.float-left.sqs-selected .sqs-handle-left{opacity:1}body.layout-mode .sqs-helper{display:block}.sqs-insertion-marker{z-index:9989;position:fixed;background:rgba(20,170,255,.8);background-color:#14aaff;background-image:linear-gradient(#47bcff,#008fe0);border-radius:10px}.sqs-insertion-marker.sqs-marker-horizontal .sqs-insertion-marker-label{margin-top:-7px}.sqs-insertion-marker-label{position:absolute;top:0;left:0;font:bold 9px/16px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;padding:0 16px 0 8px;text-shadow:0 0 1px rgba(0,0,0,.6);color:#fff;background:#14aaff;background-color:#14aaff;background-image:linear-gradient(#47bcff,#008fe0);border-radius:0 10px 10px 0}.sqs-layout .sqs-col .sqs-helper{position:absolute;top:0;width:0;height:100%}.sqs-layout .sqs-col .sqs-helper .sqs-resizer{position:absolute;top:0;bottom:0;left:-17px;width:34px;cursor:col-resize;z-index:1001}.sqs-layout .sqs-col .sqs-helper .sqs-line{position:absolute;left:50%;width:1px;height:100%;border-left:1px solid rgba(0,0,0,.1);opacity:0;transition:opacity .15s ease-in-out}.sqs-layout .sqs-col .sqs-helper:hover .sqs-line{opacity:1}.sqs-layout .sqs-col:last-child>.sqs-helper{display:none}.sqs-layout .sqs-col.resizing-left .sqs-helper .sqs-line{opacity:0}.sqs-layout .sqs-col .sqs-block[class*=sqs-float-] .sqs-helper .sqs-resizer{left:-11px;width:22px}.sqs-col-12 .sqs-helper{margin-left:100%}.sqs-col-12 .sqs-col-12 .sqs-helper{margin-left:100%}.sqs-col-12 .sqs-col-11 .sqs-helper{margin-left:91.6667%}.sqs-col-12 .sqs-col-10 .sqs-helper{margin-left:83.3333%}.sqs-col-12 .sqs-col-9 .sqs-helper{margin-left:75%}.sqs-col-12 .sqs-col-8 .sqs-helper{margin-left:66.6667%}.sqs-col-12 .sqs-col-7 .sqs-helper{margin-left:58.3333%}.sqs-col-12 .sqs-col-6 .sqs-helper{margin-left:50%}.sqs-col-12 .sqs-col-5 .sqs-helper{margin-left:41.6667%}.sqs-col-12 .sqs-col-4 .sqs-helper{margin-left:33.3333%}.sqs-col-12 .sqs-col-3 .sqs-helper{margin-left:25%}.sqs-col-12 .sqs-col-2 .sqs-helper{margin-left:16.6667%}.sqs-col-12 .sqs-col-1 .sqs-helper{margin-left:8.3333%}.sqs-col-11 .sqs-helper{margin-left:91.6667%}.sqs-col-11 .sqs-col-11 .sqs-helper{margin-left:100%}.sqs-col-11 .sqs-col-10 .sqs-helper{margin-left:90.9091%}.sqs-col-11 .sqs-col-9 .sqs-helper{margin-left:81.8182%}.sqs-col-11 .sqs-col-8 .sqs-helper{margin-left:72.7273%}.sqs-col-11 .sqs-col-7 .sqs-helper{margin-left:63.6364%}.sqs-col-11 .sqs-col-6 .sqs-helper{margin-left:54.5455%}.sqs-col-11 .sqs-col-5 .sqs-helper{margin-left:45.4545%}.sqs-col-11 .sqs-col-4 .sqs-helper{margin-left:36.3636%}.sqs-col-11 .sqs-col-3 .sqs-helper{margin-left:27.2727%}.sqs-col-11 .sqs-col-2 .sqs-helper{margin-left:18.1818%}.sqs-col-11 .sqs-col-1 .sqs-helper{margin-left:9.0909%}.sqs-col-10 .sqs-helper{margin-left:83.3333%}.sqs-col-10 .sqs-col-10 .sqs-helper{margin-left:100%}.sqs-col-10 .sqs-col-9 .sqs-helper{margin-left:90%}.sqs-col-10 .sqs-col-8 .sqs-helper{margin-left:80%}.sqs-col-10 .sqs-col-7 .sqs-helper{margin-left:70%}.sqs-col-10 .sqs-col-6 .sqs-helper{margin-left:60%}.sqs-col-10 .sqs-col-5 .sqs-helper{margin-left:50%}.sqs-col-10 .sqs-col-4 .sqs-helper{margin-left:40%}.sqs-col-10 .sqs-col-3 .sqs-helper{margin-left:30%}.sqs-col-10 .sqs-col-2 .sqs-helper{margin-left:20%}.sqs-col-10 .sqs-col-1 .sqs-helper{margin-left:10%}.sqs-col-9 .sqs-helper{margin-left:75%}.sqs-col-9 .sqs-col-9 .sqs-helper{margin-left:100%}.sqs-col-9 .sqs-col-8 .sqs-helper{margin-left:88.8889%}.sqs-col-9 .sqs-col-7 .sqs-helper{margin-left:77.7778%}.sqs-col-9 .sqs-col-6 .sqs-helper{margin-left:66.6667%}.sqs-col-9 .sqs-col-5 .sqs-helper{margin-left:55.5556%}.sqs-col-9 .sqs-col-4 .sqs-helper{margin-left:44.4444%}.sqs-col-9 .sqs-col-3 .sqs-helper{margin-left:33.3333%}.sqs-col-9 .sqs-col-2 .sqs-helper{margin-left:22.2222%}.sqs-col-9 .sqs-col-1 .sqs-helper{margin-left:11.1111%}.sqs-col-8 .sqs-helper{margin-left:66.6667%}.sqs-col-8 .sqs-col-8 .sqs-helper{margin-left:100%}.sqs-col-8 .sqs-col-7 .sqs-helper{margin-left:87.5%}.sqs-col-8 .sqs-col-6 .sqs-helper{margin-left:75%}.sqs-col-8 .sqs-col-5 .sqs-helper{margin-left:62.5%}.sqs-col-8 .sqs-col-4 .sqs-helper{margin-left:50%}.sqs-col-8 .sqs-col-3 .sqs-helper{margin-left:37.5%}.sqs-col-8 .sqs-col-2 .sqs-helper{margin-left:25%}.sqs-col-8 .sqs-col-1 .sqs-helper{margin-left:12.5%}.sqs-col-7 .sqs-helper{margin-left:58.3333%}.sqs-col-7 .sqs-col-7 .sqs-helper{margin-left:100%}.sqs-col-7 .sqs-col-6 .sqs-helper{margin-left:85.7143%}.sqs-col-7 .sqs-col-5 .sqs-helper{margin-left:71.4286%}.sqs-col-7 .sqs-col-4 .sqs-helper{margin-left:57.1429%}.sqs-col-7 .sqs-col-3 .sqs-helper{margin-left:42.8571%}.sqs-col-7 .sqs-col-2 .sqs-helper{margin-left:28.5714%}.sqs-col-7 .sqs-col-1 .sqs-helper{margin-left:14.2857%}.sqs-col-6 .sqs-helper{margin-left:50%}.sqs-col-6 .sqs-col-6 .sqs-helper{margin-left:100%}.sqs-col-6 .sqs-col-5 .sqs-helper{margin-left:83.3333%}.sqs-col-6 .sqs-col-4 .sqs-helper{margin-left:66.6667%}.sqs-col-6 .sqs-col-3 .sqs-helper{margin-left:50%}.sqs-col-6 .sqs-col-2 .sqs-helper{margin-left:33.3333%}.sqs-col-6 .sqs-col-1 .sqs-helper{margin-left:16.6667%}.sqs-col-5 .sqs-helper{margin-left:41.6667%}.sqs-col-5 .sqs-col-5 .sqs-helper{margin-left:100%}.sqs-col-5 .sqs-col-4 .sqs-helper{margin-left:80%}.sqs-col-5 .sqs-col-3 .sqs-helper{margin-left:60%}.sqs-col-5 .sqs-col-2 .sqs-helper{margin-left:40%}.sqs-col-5 .sqs-col-1 .sqs-helper{margin-left:20%}.sqs-col-4 .sqs-helper{margin-left:33.3333%}.sqs-col-4 .sqs-col-4 .sqs-helper{margin-left:100%}.sqs-col-4 .sqs-col-3 .sqs-helper{margin-left:75%}.sqs-col-4 .sqs-col-2 .sqs-helper{margin-left:50%}.sqs-col-4 .sqs-col-1 .sqs-helper{margin-left:25%}.sqs-col-3 .sqs-helper{margin-left:25%}.sqs-col-3 .sqs-col-3 .sqs-helper{margin-left:100%}.sqs-col-3 .sqs-col-2 .sqs-helper{margin-left:66.6667%}.sqs-col-3 .sqs-col-1 .sqs-helper{margin-left:33.3333%}.sqs-col-2 .sqs-helper{margin-left:16.6667%}.sqs-col-2 .sqs-col-2 .sqs-helper{margin-left:100%}.sqs-col-2 .sqs-col-1 .sqs-helper{margin-left:50%}.sqs-col-1 .sqs-helper{margin-left:8.3333%}.sqs-col-1 .sqs-col-1 .sqs-helper{margin-left:100%}.sqs-layout .sqs-col .sqs-float-left .sqs-helper{margin-left:0;right:0}.sqs-layout .sqs-col .sqs-float-right .sqs-helper{margin-left:0;left:0}.standard-dialog-wrapper .sqs-layout{top:0;left:0}.markdown-block .CodeMirror-scroll{height:auto;overflow-y:hidden;overflow-x:auto}.sqs-blocktrash{height:50px;width:50px;position:fixed;bottom:20px;left:50%;margin-left:-25px;z-index:-1;transition:z-index .15s ease-in-out}.sqs-blocktrash-hidden{display:none !important}html.sqs-dragging-block .sqs-blocktrash{z-index:9990}.sqs-blocktrash-content{box-shadow:0 0 1px 1px rgba(255,255,255,.3);opacity:0;background:#000 url('/universal/images-v6/icons/skelecon-trash-16-light.png') center center no-repeat;border-radius:100px;height:50px;width:50px;transform:translate3d(0,70px,0);transition:all .15s ease-in-out}html.sqs-dragging-block .sqs-blocktrash-content{transform:translate3d(0,0,0);opacity:1}html.blogapp .sqs-blocktrash-content{background-image:url('/universal/images-v6/icons/mobile-trash@2x.png') !important;background-size:18px 22px !important}html.sqs-dragging-block .sqs-blocktrash.sqs-dd-drop-over .sqs-blocktrash-content,html.sqs-dragging-block .sqs-blocktrash.yui3-dd-drop-over .sqs-blocktrash-content{transform:scale3d(1.2,1.2,1);transition:transform .1s ease-in-out;border:2px solid #14aaff;box-shadow:0 0 3px #14aaff}html.blogapp.sqs-dragging-block .sqs-blocktrash{display:block}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:192),(min-resolution:192dppx){.sqs-blocktrash-content{background-image:url('/universal/images-v6/icons/skelecon-trash-32-light.png');background-size:16px}}.sqs-dialog-layout-wrapper .sqs-blocktrash{position:absolute;left:50%}body.squarespace-config .sqs-blocktrash{left:750px}body.squarespace-config .standard-dialog-wrapper .sqs-blocktrash{position:absolute;left:50%;transform:translate3d(0,0,0)}html.blogapp body.squarespace-config .standard-dialog-wrapper .sqs-blocktrash{transform:translate3d(0,140px,0)}html.sqs-dragging-block body.squarespace-config .standard-dialog-wrapper .sqs-blocktrash{transform:translate3d(0,0,0)}body.squarespace-config .standard-dialog-wrapper.sqs-node-expander-active .sqs-blocktrash{position:fixed}body.squarespace-config.squarespace-editnewsletter .sqs-blocktrash{left:690px;position:absolute;z-index:31000}html.sqs-dragging-block body.squarespace-config.squarespace-editnewsletter .sqs-blocktrash{transform:translate3d(0,-80px,0)}.sqs-layout-insert-marker{background-color:#3e3e3e;border-radius:2px;margin-top:1px;position:absolute}.sqs-layout-insert-marker-float{border:2px solid #3e3e3e;background-color:rgba(62,62,62,.29999999999999993)}.sqs-layout-insert-marker-shine{box-shadow:0 0 25px 3px #3e3e3e}.sqs-layout-insert-marker-hidden{display:none;visibility:hidden !important}html.scrolling .sqs-layout-insert-marker{visibility:hidden !important}.sqs-layout-insert-marker-constrain{position:fixed;top:0;left:0;right:0;height:100%;display:none}html.blogapp .sqs-layout-insert-marker-constrain{top:0 !important;left:0 !important;right:0 !important}html.scrolling .sqs-layout-insert-marker-constrain{display:block;height:20px !important;overflow:hidden}html.scrolling .sqs-layout-insert-marker-constrain::before{content:'';display:block;left:0;width:100%;height:1px;position:absolute;box-shadow:0 0 18px 2px rgba(62,62,62,.38)}html.scrolling-up .sqs-layout-insert-marker-constrain{bottom:auto !important}html.scrolling-up .sqs-layout-insert-marker-constrain::before{top:-1px}html.scrolling-down .sqs-layout-insert-marker-constrain{top:auto !important}html.scrolling-down .sqs-layout-insert-marker-constrain::before{bottom:-1px}.sqs-layout-insert-point{position:absolute;height:22px;width:22px;cursor:pointer;display:block;z-index:8950;transition:opacity .1s ease-out}@keyframes insertpoint-appear{0%{opacity:0;transform:rotate(-45deg) scale(0);background-color:#3e3e3e}100%{opacity:.7;transform:rotate(-45deg) scale(.7);background-color:#3e3e3e}}@keyframes insertpoint-pulse{0%{opacity:.7;transform:rotate(-45deg) scale(.7);background-color:#3e3e3e}100%{opacity:1;transform:rotate(-45deg) scale(1.1);background-color:#3e3e3e}}@keyframes insertpoint-disappear{0%{opacity:1;transform:rotate(-45deg) scale(1.1);background-color:#3e3e3e}100%{opacity:0;transform:rotate(-45deg) scale(0);background-color:#3e3e3e}}.sqs-layout-insert-point::before{content:'';display:block;position:absolute;width:100%;height:100%;top:0;left:0;background-color:#797979;border-radius:100px 100px 0;transform:rotate(-45deg) scale(0);transform-origin:center center;transition:transform , background-color, opacity;transition-duration:.1s;transition-timing-function:ease-out}.sqs-layout.sqs-editing.le-guide-on .sqs-layout-insert-point:first-child::before{animation-name:insertpoint-appear, insertpoint-pulse, insertpoint-disappear;animation-duration:0.1s, 0.9s, 0.3s;animation-iteration-count:1, 7, 1;animation-direction:alternate;animation-timing-function:ease;animation-delay:0s, 0.1s, 6.4s}.sqs-layout-insert-point.sqs-layout-insert-point-topmost{z-index:8951}.sqs-layout-insert-point.sqs-fullsize::before,.sqs-layout-insert-point.sqs-layout-insert-point-always-show::before,.sqs-layout-insert-point.sqs-layout-insert-point-active::before{opacity:1;transform:rotate(-45deg) scale(1)}.sqs-layout-insert-point.sqs-fullsize:hover,.sqs-layout-insert-point.sqs-layout-insert-point-active{z-index:8952 !important}.sqs-layout-insert-point.sqs-fullsize:hover::before,.sqs-layout-insert-point.sqs-layout-insert-point-active::before{animation-name:none !important;background-color:#3e3e3e}.sqs-layout-insert-point.sqs-layout-insert-point-hidden{display:none}.squarespace-config .sqs-layout-insert-point::before{background-color:#ccc}.squarespace-config .sqs-layout-insert-point:hover::before{background-color:#222}html.sqs-hide-insert-points .sqs-layout-insert-point:not(.sqs-layout-insert-point-active){visibility:hidden;opacity:0 !important}html.sqs-dragging-block .sqs-layout-insert-point.sqs-layout-insert-point-active{visibility:hidden !important;opacity:0 !important}.sqs-search{position:relative}.sqs-search input{background:#fff url('/universal/images-v6/damask/search-dark.png') center center no-repeat;cursor:pointer;cursor:auto;background-position:11px center;padding-left:44px;padding-right:44px;box-sizing:border-box;position:relative;background-color:#fff;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-search input{background-image:url('/universal/images-v6/damask/search-dark@2x.png');background-size:16px}}.sqs-search input:focus{outline:none}.sqs-search .btn-clear{position:absolute;right:0;top:0;height:44px;width:44px;text-indent:-9000px;background:transparent url('/universal/images-v6/damask/clear-dark.png') center center no-repeat;cursor:pointer;transition:opacity .3s ease-in-out}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-search .btn-clear{background-image:url('/universal/images-v6/damask/clear-dark@2x.png');background-size:16px}}.sqs-search .btn-clear.hidden{opacity:0}.sqs-html-hidden{display:none}.sqs-html .sqs-textarea-editor{position:absolute;top:0;left:0;width:100%;height:100%;word-wrap:break-word;margin:0;padding:0;border:none;outline:none;background:transparent;opacity:1;resize:none;overflow:hidden}.sqs-html .sqs-html-content{min-height:24px}.sqs-html .sqs-html-content>*,.sqs-html .sqs-html-content .sqs-rte>*{word-wrap:break-word}.sqs-html .sqs-html-content>*:first-child,.sqs-html .sqs-html-content .sqs-rte>*:first-child{margin-top:0}.sqs-html .sqs-html-content>*:last-child,.sqs-html .sqs-html-content .sqs-rte>*:last-child{margin-bottom:0}.sqs-image-content{position:relative !important}.sqs-image-content img,.sqs-image-content embed,.sqs-image-content object,.sqs-image-content video,.sqs-image-content iframe{position:absolute;top:0;left:0;height:100%;max-width:none;width:100%}.sqs-image-content img,.sqs-image-content embed,.sqs-image-content object,.sqs-image-content video,.sqs-image-content iframe{position:absolute;top:0;left:0;height:100%;max-width:none;width:100%}.sqs-image{overflow:hidden;position:relative}.sqs-image.stretch{margin:auto !important}.sqs-image .sqs-image-content{position:relative !important}.sqs-image .sqs-image-content img,.sqs-image .sqs-image-content embed,.sqs-image .sqs-image-content object,.sqs-image .sqs-image-content video,.sqs-image .sqs-image-content iframe{position:absolute;top:0;left:0;height:100%;max-width:none;width:100%}.sqs-image .sqs-image-content img,.sqs-image .sqs-image-content embed,.sqs-image .sqs-image-content object,.sqs-image .sqs-image-content video,.sqs-image .sqs-image-content iframe{position:absolute;top:0;left:0;height:100%;max-width:none;width:100%}.sqs-image .sqs-image-content a{border:none}.sqs-image,.sqs-image *{-webkit-user-select:none}.sqs-image.sqs-editing{outline:none !important;cursor:move}.sqs-layout.sqs-layout-dark .sqs-image.sqs-empty .sqs-image-content{background:rgba(255,255,255,.1)}.sqs-layout.sqs-layout-dark .sqs-image.sqs-empty .sqs-image-content:empty::before{background-image:url('/universal/images-v6/damask/image-inside-64-light.png');opacity:.4}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-layout.sqs-layout-dark .sqs-image.sqs-empty .sqs-image-content:empty::before{background-image:url('/universal/images-v6/damask/image-inside-128-light.png');background-size:64px}}.sqs-image.sqs-error .error-wrapper{width:60%;margin:auto;position:absolute;left:20%;top:30%;text-align:center}.sqs-image.sqs-error .error-wrapper a{font:400 normal 12px / 30px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;cursor:pointer !important;color:#fff !important;background-color:#222 !important;float:none !important;display:inline-block !important;position:static !important;width:auto !important;height:30px !important;top:auto !important;left:auto !important;right:auto !important;bottom:auto !important;margin:0 !important;padding:0 22px !important;opacity:1 !important;letter-spacing:0 !important;z-index:1000 !important;border-radius:100px;width:100px;height:30px;margin-top:20px !important;display:inline-block}.sqs-image.sqs-error .sqs-editing-overlay{display:none}.sqs-image .sqs-image-uploader,.sqs-image .sqs-image-uploader .sqs-image-uploader-content{position:absolute;height:100%;width:100%;text-align:center}.sqs-image .sqs-image-uploader input{display:block}.sqs-image .sqs-image-uploader .upload-indicator{border:0;cursor:pointer;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;outline:none;position:absolute !important;margin-top:-11px !important;top:50% !important;left:50% !important;height:auto !important;width:150px !important;margin-left:-75px !important;z-index:1300 !important}.sqs-image .sqs-image-uploader .upload-indicator,.sqs-image .sqs-image-uploader .upload-indicator>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;font-size:11px;font-weight:500}.sqs-image .sqs-image-uploader .upload-indicator:hover{background-color:#d0d0d0;box-shadow:none}.sqs-image .sqs-image-uploader .upload-indicator.disabled{opacity:.3;cursor:default}.sqs-image .sqs-image-uploader .upload-indicator.disabled>*{opacity:.5}.sqs-image .sqs-image-uploader .upload-indicator.disabled:hover{background-color:#e4e4e4 !important}.sqs-image .sqs-image-uploader .upload-indicator.disabled{opacity:.5}.sqs-image .sqs-image-uploader .icon{display:none}.sqs-image .progress-show-meter .sqs-image-uploader{display:none}.sqs-image .progress-container{z-index:2;position:absolute;top:50%;left:50%;margin-top:-22px;margin-left:-22px;text-align:center;font:normal normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif !important}.sqs-image .progress-container .progress .spinner{margin-bottom:11px}body.squarespace-config .sqs-block-image .sqs-image-caption{color:#999}body.squarespace-config .sqs-block-image .sqs-image-caption p{margin-bottom:0}body.squarespace-config .sqs-block-image .sqs-image-caption.sqs-placeholder-show{margin-top:1em}body.squarespace-config .sqs-block-image .sqs-image-caption .sqs-html-content{min-height:23px}.sqs-block-image .sqs-html{transition:max-height .3s ease-in-out, min-height .3s ease-in-out;margin:auto}.sqs-block-image .sqs-html.sqs-empty{min-height:0;max-height:0;overflow:hidden}.sqs-block-image.sqs-block-focused .sqs-html.sqs-empty{max-height:none;overflow:visible}.sqs-block-image .sqs-editing-overlay{z-index:1}.sqs-block-image:not(.sqs-block-focused) .image-block-outer-wrapper.layout-caption-below .image-caption-wrapper.sqs-empty{padding-top:0px}.sqs-block-image .layout-caption-overlay,.sqs-block-image .layout-caption-overlay-hover{z-index:2}.sqs-block-image .layout-caption-overlay-hover .image-caption-wrapper.sqs-html-focused{visibility:visible !important;opacity:1 !important}body.sqs-items-reordering *{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}body.sqs-items-reordering .sqs-blockStatus--overlayMode[data-state=\"invalid\"]{display:none !important}body.sqs-items-reordering .sqs-frontend-overlay-editor-widget{display:none !important}body.sqs-items-reordering [data-item-wrapper]{pointer-events:all;cursor:url(/universal/images-v6/icons/grab.cur) 8 8,move;cursor:-moz-grab}body.sqs-items-reordering [data-item-wrapper] [data-item]{pointer-events:all;opacity:1 !important;z-index:2;cursor:url(/universal/images-v6/icons/grab.cur) 8 8,move;cursor:-moz-grab}body.sqs-items-reordering [data-item-wrapper] [data-item]:hover{cursor:url(/universal/images-v6/icons/grab.cur) 8 8,move;cursor:-moz-grab}body.sqs-items-reordering.sqs-index-drag-reordering-ready{cursor:grabbing;cursor:-webkit-grabbing}body.sqs-items-reordering.sqs-index-drag-reordering-ready *{cursor:grabbing;cursor:-webkit-grabbing}body.sqs-index-drag-reordering-ready [data-item-wrapper] [data-item]{transition:transform .4s cubic-bezier(.645,.045,.355,1)}body.sqs-index-drag-reordering-ready [data-item-wrapper] [data-item].sqs-in-flight{transition:none}.sqs-frontend-overlay-editor-widget{font:12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif !important;background-color:transparent !important;letter-spacing:0 !important;display:block !important;float:none !important;color:#000 !important;height:auto !important;width:auto !important;margin:0 !important;padding:0 !important;text-transform:none !important;position:fixed;z-index:11000;transition:opacity .25s ease-in-out, visibility .25s ease-in-out;-webkit-user-select:none;-ms-user-select:none;user-select:none;opacity:0;white-space:nowrap;visibility:hidden;border-radius:0}.sqs-frontend-overlay-editor-widget,.sqs-frontend-overlay-editor-widget *,.sqs-frontend-overlay-editor-widget .sqs-frontend-overlay-editor-widget-label,.sqs-frontend-overlay-editor-widget .sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla{font-size:11px !important}.sqs-frontend-overlay-editor-widget-content{color:#3e3e3e;position:relative;border-radius:0;display:flex}.sqs-frontend-overlay-editor-widget-hidden,.sqs-frontend-overlay-editor-widget-resizing{display:none !important}.sqs-frontend-overlay-editor-widget-label,.sqs-frontend-overlay-editor-widget-buttons-wrapper{background:#3e3e3e !important}.sqs-frontend-overlay-editor-widget-label,.sqs-frontend-overlay-editor-widget-buttons-wrapper,.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla{display:inline-block !important}.sqs-frontend-overlay-editor-widget-label,.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla{font-size:11px !important;line-height:44px !important;color:#ddd !important;background:#3e3e3e !important;transition:all .1s ease-in-out;white-space:nowrap;margin:0 !important}.sqs-frontend-overlay-editor-widget-label .sqs-button-vanilla-content,.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla .sqs-button-vanilla-content{padding-left:22px !important;padding-right:22px !important}.sqs-frontend-overlay-editor-widget-label:first-child .sqs-button-vanilla-content,.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla:first-child .sqs-button-vanilla-content{border:0}.sqs-frontend-overlay-editor-widget-label{padding-left:22px !important;padding-right:22px !important}.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla{letter-spacing:.5px;text-transform:uppercase !important;font-weight:500 !important;cursor:pointer !important;color:#fff !important;text-decoration:none !important}.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla a{color:#fff !important;text-decoration:none !important}.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla a:hover{color:#fff !important}.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla:hover{background-color:#222 !important}.sqs-frontend-overlay-editor-widget-buttons-wrapper .sqs-button-vanilla:hover a{color:#fff !important}.sqs-frontend-overlay-editor-widget:hover{z-index:11001}.sqs-frontend-overlay-editor-widget-over,.sqs-frontend-overlay-editor-widget:hover,.sqs-frontend-overlay-editor-widget-nearby,.sqs-frontend-overlay-editor-widget-visible,.sqs-frontend-overlay-editor-widget.is-main-content-annotation{opacity:1;visibility:visible}.sqs-frontend-overlay-editor-widget.sqs-cover-page-overlay .sqs-frontend-overlay-editor-widget-label{display:none !important}.sqs-frontend-overlay-editor-widget.disabled,body.sqs-frame-interaction-locked .sqs-frontend-overlay-editor-widget,body.sqs-hide-overlay-widgets .sqs-frontend-overlay-editor-widget,html.sqs-modal-lightbox-open .sqs-frontend-overlay-editor-widget{display:none !important;visibility:hidden !important}body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host.sqs-layout.empty .sqs-row,body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host .sqs-layout.empty .sqs-row{position:absolute}body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host-over:not(.sqs-layout):not(.main-content),body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host-over .sqs-row:first-of-type{background-color:rgba(0,0,0,.08);transition:background-color .1s ease-in-out}body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host-over.sqs-frontend-overlay-editor-widget-host-light:not(.sqs-layout):not(.main-content),body:not(.sqs-hide-overlay-widgets) .sqs-frontend-overlay-editor-widget-host-over.sqs-frontend-overlay-editor-widget-host-light .sqs-row:first-of-type{background-color:rgba(255,255,255,.16)}html.sqs-device-view-tablet .sqs-frontend-overlay-editor-widget-index-stacked,html.sqs-device-view-phone .sqs-frontend-overlay-editor-widget-index-stacked{display:none !important}.sqs-frontend-node-header-widget{position:absolute;z-index:29901;height:44px;min-width:330px;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:normal;overflow:hidden}@keyframes moveupfadein{0%{opacity:0;transform:translatey(44px)}100%{opacity:1;transform:translatey(0)}}.sqs-frontend-node-header-widget-hidden{display:none}.sqs-frontend-node-header-widget-fixed-top{position:fixed;top:0 !important}.sqs-frontend-node-header-widget-fixed-bottom{position:fixed;bottom:0 !important;top:auto !important}.sqs-frontend-node-header-widget-content{background-color:#3e3e3e;position:relative;height:100%;animation-name:moveupfadein;animation-iteration-count:once;animation-timing-function:cubic-bezier(.19,1,.22,1);animation-duration:.5s;animation-delay:.3s;animation-fill-mode:both}.sqs-frontend-node-header-widget-label{position:relative;padding:0 22px;color:#797979;text-align:center;line-height:44px}.sqs-frontend-node-header-widget-narrow .sqs-frontend-node-header-widget-label{text-align:right}.sqs-frontend-node-header-widget-narrow.sqs-content-item-minimal-node-header .sqs-frontend-node-header-widget-label{display:none}.sqs-frontend-node-header-widget-buttons-wrapper{position:absolute;top:0;left:0;width:100%;height:100%;line-height:44px !important}.sqs-frontend-node-header-widget .sqs-button-vanilla{cursor:pointer;outline:none;background:#3e3e3e;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:inline-block;position:relative;margin:0 !important;padding:0 22px;line-height:44px}.sqs-frontend-node-header-widget .sqs-button-vanilla,.sqs-frontend-node-header-widget .sqs-button-vanilla>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-frontend-node-header-widget .sqs-button-vanilla:hover{background-color:#000;box-shadow:none}.sqs-frontend-node-header-widget .sqs-button-vanilla.disabled{opacity:.3;cursor:default}.sqs-frontend-node-header-widget .sqs-button-vanilla.disabled>*{opacity:.5}.sqs-frontend-node-header-widget .sqs-button-vanilla.disabled:hover{background-color:#3e3e3e !important}.sqs-frontend-node-header-widget .sqs-button-vanilla.sqs-float-right{float:right}.sqs-frontend-node-header-widget .sqs-button-vanilla.sqs-annotation-add-block-button .icon{width:44px;height:44px;margin:0 -22px;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/add-light.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-frontend-node-header-widget .sqs-button-vanilla.sqs-annotation-add-block-button .icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-light@2x.png');background-size:14px}}.sqs-frontend-node-header-widget .sqs-button-vanilla .label:empty{display:none}.sqs-empty-index-placeholder{position:relative;text-align:center;height:440px;width:100%;display:table}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions{display:table-cell;vertical-align:middle;text-align:center}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert{line-height:inherit;display:inline-block;width:44px;height:44px}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button{width:44px;height:44px}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button .label{display:none}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button .sqs-button-content,.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button .icon{height:100%;width:100%;background:#fff;background-position:center center;background-repeat:no-repeat;border-radius:22px;box-shadow:0px 2px 4px 0px rgba(0,0,0,.1),0px 0px 3px 0px rgba(0,0,0,.08);transition:all .4s}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button.add-section .icon{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/add-dark.png') center center no-repeat;cursor:pointer;background-color:#fff}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button.add-section .icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-dark@2x.png');background-size:16px}}.sqs-empty-index-placeholder .sqs-empty-index-placeholder-instructions .sqs-helper-page-insert .sqs-button.add-section .icon:hover{box-shadow:0 0 26px rgba(0,0,0,.13)}body.sqs-edit-mode .sqs-layout[data-type=\"block-field\"].empty{min-height:33px}.is-expanded .pageAnnotationEmptyMessage{display:none}.pageAnnotationEmptyMessage{display:inline-block;position:relative;padding-top:30%;padding-bottom:30%;width:100%;margin:auto;border:1px dashed rgba(0,0,0,.12);text-align:center;font-size:12px;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:500;opacity:1;box-sizing:border-box}.Index-page--has-image .pageAnnotationEmptyMessage,.index-page.has-banner-image .pageAnnotationEmptyMessage{padding-top:0;padding-bottom:0}.Index-page--has-image .banner-thumbnail-wrapper~.index-section-wrapper .pageAnnotationEmptyMessage,.index-page.has-banner-image .banner-thumbnail-wrapper~.index-section-wrapper .pageAnnotationEmptyMessage{visibility:hidden}.pageAnnotationEmptyMessageDark{color:#181818;font-weight:normal}.pageAnnotationEmptyMessageLight{color:#f7f7f7;font-weight:normal;border:1px dashed rgba(255,255,255,.3)}.sqs-surrounding-overlay-container-enter{bottom:0;left:0;position:absolute;right:0;top:0;z-index:29900;transition:opacity .5s ease-in-out .5s}.sqs-surrounding-overlay-container-leave{bottom:0;left:0;position:absolute;right:0;top:0;z-index:29900;transition:opacity .5s ease-in-out}.sqs-surrounding-overlay{position:absolute !important;background:rgba(62,62,62,.19999999999999996) !important;z-index:29900}.rte{white-space:pre-wrap;word-wrap:break-word;cursor:text}.rte:focus{outline:none}.rte .rte-placeholder{color:#999;min-height:1em}.rte .rte-placeholder::before{content:attr(data-placeholder);float:left;pointer-events:none;height:0}.rte blockquote{padding:1px 10px 1px 20px;border-left:5px solid #dadada}.rte pre{overflow:unset}h1[data-rte-preserve-empty]:empty::before,h2[data-rte-preserve-empty]:empty::before,h3[data-rte-preserve-empty]:empty::before,h4[data-rte-preserve-empty]:empty::before,h5[data-rte-preserve-empty]:empty::before,h6[data-rte-preserve-empty]:empty::before,p[data-rte-preserve-empty]:empty::before{content:'';display:inline-block}ol[data-rte-list] li{counter-increment:rte-list}ol[data-rte-list] li:first-child{counter-reset:rte-list}ul[data-rte-list] li,ol[data-rte-list] li{list-style-type:none}ul[data-rte-list] li>*,ol[data-rte-list] li>*{margin-top:.5em;margin-bottom:.5em}ul[data-rte-list] li>*:first-child::before,ol[data-rte-list] li>*:first-child::before{display:inline-block;margin-left:-40px;min-width:40px;text-align:right;box-sizing:border-box}li>*:first-child::before{white-space:pre}ol[data-rte-list] li>*:first-child::before{content:\"  \" counter(rte-list) \". \"}ol[data-rte-list=\"upper-roman\"] li>*:first-child::before{content:\"  \" counter(rte-list,upper-roman) \". \"}ol[data-rte-list=\"upper-alpha\"] li>*:first-child::before{content:\"  \" counter(rte-list,upper-alpha) \". \"}ol[data-rte-list=\"lower-alpha\"] li>*:first-child::before{content:\"  \" counter(rte-list,lower-alpha) \". \"}ol[data-rte-list=\"lower-roman\"] li>*:first-child::before{content:\"  \" counter(rte-list,lower-roman) \". \"}ol[data-rte-list=\"decimal\"] li>*:first-child::before{content:\"  \" counter(rte-list,decimal) \". \"}ul[data-rte-list] li>*:first-child::before{padding-right:10px;content:\"\\2022\"}ul[data-rte-list=\"disc\"] li>*:first-child::before{content:\"\\2022\"}ul[data-rte-list=\"circle\"] li>*:first-child::before,ul[data-rte-list] ul[data-rte-list=\"default\"] li>*:first-child::before{content:\"\\25CB\"}ul[data-rte-list=\"square\"] li>*:first-child::before,ul[data-rte-list] ul[data-rte-list] ul[data-rte-list=\"default\"] li>*:first-child::before{content:\"\\25A0\"}ul[data-rte-list=\"dash\"] li>*:first-child::before{content:\"-\"}.sqs-rte-toolbar{position:fixed;top:-11px;left:0;margin:0 !important;white-space:nowrap;background-color:#3e3e3e;height:33px;z-index:99999}.sqs-rte-toolbar-hidden{display:none}.sqs-rte-toolbar .sqs-rte-toolbar-divider{display:inline-block;width:11px;vertical-align:top}.sqs-rte-toolbar button,.sqs-rte-toolbar select{appearance:none;-moz-appearance:none;-webkit-appearance:none;-ms-appearance:none;cursor:pointer;outline:0}.sqs-rte-toolbar .sqs-rte-toolbar-button,.sqs-rte-toolbar .sqs-rte-toolbar-select{display:inline-block;position:relative;height:33px;border:0;vertical-align:top}.sqs-rte-toolbar .sqs-rte-toolbar-button:disabled,.sqs-rte-toolbar .sqs-rte-toolbar-select:disabled{cursor:default !important}.sqs-rte-toolbar .sqs-rte-toolbar-button,.sqs-rte-toolbar .sqs-rte-toolbar-select-facade{line-height:33px !important;font-family:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif !important;font-size:12px !important;letter-spacing:normal !important;color:#fff !important}.sqs-rte-toolbar .sqs-rte-toolbar-select-facade{background-color:#3e3e3e}.sqs-rte-toolbar .sqs-rte-toolbar-button{width:33px;text-indent:33px;overflow:hidden;white-space:nowrap;background-color:transparent;background-repeat:no-repeat;background-position:center center;opacity:.7}.sqs-rte-toolbar .sqs-rte-toolbar-button:hover{opacity:1}.sqs-rte-toolbar .sqs-rte-toolbar-button-active{opacity:1;background-color:#797979}.sqs-rte-toolbar .sqs-rte-toolbar-button:disabled{opacity:.3 !important}.sqs-rte-toolbar .sqs-rte-toolbar-button-undo{background-image:url(/universal/images-v6/damask/wysiwyg/undo-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-redo{background-image:url(/universal/images-v6/damask/wysiwyg/redo-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-bold{background-image:url(/universal/images-v6/damask/wysiwyg/bold-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-italic{background-image:url(/universal/images-v6/damask/wysiwyg/italic-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-link{background-image:url(/universal/images-v6/damask/wysiwyg/link-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-link.sqs-rte-toolbar-button-active{background-color:transparent !important}.sqs-rte-toolbar .sqs-rte-toolbar-button-alignLeft{background-image:url(/universal/images-v6/damask/wysiwyg/align-left-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-alignCenter{background-image:url(/universal/images-v6/damask/wysiwyg/align-center-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-alignRight{background-image:url(/universal/images-v6/damask/wysiwyg/align-right-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-orderedList{background-image:url(/universal/images-v6/damask/wysiwyg/ol-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-unorderedList{background-image:url(/universal/images-v6/damask/wysiwyg/ul-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-outdent{background-image:url(/universal/images-v6/damask/wysiwyg/indent-less-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-indent{background-image:url(/universal/images-v6/damask/wysiwyg/indent-more-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-clear{background-image:url(/universal/images-v6/damask/wysiwyg/remove-formatting-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-clipboard{background-image:url(/universal/images-v6/damask/wysiwyg/paste-plain-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-trashcan{background-image:url(/universal/images-v6/damask/wysiwyg/delete-light@2x-v2.png);background-size:16px}.sqs-rte-toolbar .sqs-rte-toolbar-button-maximize{background-image:url(/universal/images-v6/damask/wysiwyg/full-screen-light@2x-v2.png);background-size:22px}.sqs-rte-toolbar .sqs-rte-toolbar-button-minimize{background-image:url(/universal/images-v6/damask/wysiwyg/full-screen-light@2x-v2.png);background-size:22px;opacity:1;background-color:#797979}.sqs-rte-toolbar .sqs-rte-toolbar-button-quote{background-image:url(/universal/images-v6/damask/wysiwyg/quote-light@2x-v2.png);background-size:16px;background-image:url('/universal/images-v6/damask/wysiwyg/quote-light@2x.png')}.sqs-rte-toolbar .sqs-rte-toolbar-select{border:1px solid #797979;border-width:0 1px;width:150px;cursor:pointer}.sqs-rte-toolbar .sqs-rte-toolbar-select select{display:block;position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;opacity:0;font-size:initial}.sqs-rte-toolbar .sqs-rte-toolbar-select-facade{display:inline-block;height:100%;vertical-align:top;line-height:33px;margin-left:11px}.sqs-rte-toolbar .sqs-rte-toolbar-select-placeholder{font-style:italic;opacity:.7}.sqs-rte-toolbar .sqs-rte-toolbar-select:hover .sqs-rte-toolbar .sqs-rte-toolbar-select-placeholder{opacity:1}.sqs-rte-toolbar .sqs-rte-toolbar-select::before{content:'';display:inline-block;position:absolute;top:0;right:0;width:33px;height:33px;background-color:transparent;background-repeat:no-repeat;background-position:center center;background-image:url(/universal/images-v6/damask/wysiwyg/dropdown-arrow-light@2x-v2.png);background-size:16px;opacity:.7}.sqs-rte-toolbar .sqs-rte-toolbar-select:hover::before{opacity:1}.sqs-rte-toolbar-paste-modal{width:770px}.sqs-rte-toolbar-paste-modal .title{margin:0 -33px;padding:0 33px 17px;border-bottom:1px solid #e4e4e4;text-align:left}.sqs-rte-toolbar-paste-modal .message{margin-top:22px;text-align:left}.sqs-rte-toolbar-paste-modal iframe{display:block;margin-top:22px;height:330px;width:100%;border:none;box-sizing:border-box;background:#fff;overflow-y:auto;outline:none;resize:none}.sqs-rte-toolbar-paste-modal .buttons{height:44px}@media only screen and (max-width:375px){.sqs-rte-toolbar{white-space:normal;height:auto !important;max-width:331px !important}.sqs-rte-toolbar .sqs-rte-toolbar-button{display:none}.sqs-rte-toolbar .sqs-rte-toolbar-button-bold,.sqs-rte-toolbar .sqs-rte-toolbar-button-italic,.sqs-rte-toolbar .sqs-rte-toolbar-button-link,.sqs-rte-toolbar .sqs-rte-toolbar-button-alignLeft,.sqs-rte-toolbar .sqs-rte-toolbar-button-alignCenter,.sqs-rte-toolbar .sqs-rte-toolbar-button-alignRight{display:inline-block}.sqs-rte-toolbar .sqs-rte-toolbar-select{border:0;border-top:1px solid #797979;display:block;width:100%}.sqs-rte-toolbar .sqs-rte-toolbar-select~.sqs-rte-toolbar-divider{display:none}}.sqs-check .check-element{padding-left:33px;cursor:pointer;position:relative}.sqs-check .check-element:before{z-index:1;display:block;content:' ';height:22px;width:22px;position:absolute;left:0;top:0;border-radius:50%;border:2px solid rgba(121,121,121,.19999999999999996);box-sizing:border-box;transition:border-color .1s ease-in-out}.sqs-check .check-element:hover:before{border-color:rgba(121,121,121,.5)}.sqs-check .check-element.active:before{border-color:#3e3e3e}.sqs-check .check-element.active:before{opacity:0}.sqs-check .check-element:after{z-index:2;display:block;content:' ';height:22px;width:22px;position:absolute;left:0;top:0;border-radius:50%;box-sizing:border-box;background:#3e3e3e url('//assets.squarespace.com/universal/images-v6/damask/checkmark-light.png') center center no-repeat;background-size:9px;transform:scale(0);animation-fill-mode:both}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-check .check-element:after{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkmark-light@2x.png');background-size:9px}}.sqs-check .check-element.active:after{opacity:1;animation-name:bounceIn;animation-duration:.4s;animation-iteration-count:once;animation-fill-mode:both;transition:background-color .2s ease-in-out}.sqs-check .check-element.active:hover:after{background-color:#000}.sqs-check-hidden{display:none}.sqs-check-hidden-link .title a,.sqs-check-hidden-link .title span{display:none}.sqs-content-item-grid-field{position:relative}.multi-frame-wrapper .sqs-content-item-grid-field.sqs-dialog-field{margin:0}.sqs-content-item-grid-field .loading-state{display:none;margin-top:300px}.sqs-content-item-grid-field .loading-state .sqs-spin{display:block;margin:0 auto}.sqs-content-item-grid-field.content-loading .loading-state{display:block}.sqs-content-item-grid-field-content{background-color:#fff;overflow-x:hidden;position:relative;height:100%}.sqs-content-item-grid-field .sqs-content-item-grid{position:relative;height:100%;box-sizing:border-box;width:100%}.sqs-content-item-grid{border-radius:5px}.sqs-content-item-grid .sqs-uploader{float:left;position:relative}.sqs-content-item-grid .sqs-uploader-content{position:absolute;top:0;left:0;bottom:0;right:0}.sqs-content-item-grid .sqs-uploader-content button{height:170px;width:170px;border:2px dashed #ccc;float:left;text-align:center;position:relative;display:inline-block;background-color:transparent;background-image:none;box-shadow:none;color:#797979;cursor:pointer;border-radius:4px}.sqs-content-item-grid .sqs-uploader-content button.module{height:196px;width:196px}.sqs-content-item-grid .sqs-uploader-content button.module .icon{margin-top:48px}.sqs-content-item-grid .sqs-uploader-content input{position:absolute;top:0;left:0}.sqs-content-item-grid.drop-active{background:rgba(0,0,0,.045);position:relative}.sqs-content-item-grid.drop-active:after{content:' ';background:rgba(0,0,0,.045);position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none}.sqs-content-item-grid .add-item{background:#e4e4e4 url('//assets.squarespace.com/universal/images-v6/damask/add-dark.png') center center no-repeat;border:0;border-radius:50%;height:34px;width:34px;position:absolute;z-index:8000;bottom:11px;right:11px;cursor:pointer}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-item-grid .add-item{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-dark@2x.png');background-size:16px}}.sqs-content-item-grid .sqs-action-tray:not(.sqs-action-tray-hidden)~.add-item{display:none}.sqs-content-item-grid-content{zoom:1;width:100%;height:100%;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch}.sqs-content-item-grid-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-content-item-grid-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-damask-panel .sqs-content-item-grid-content{overflow-y:visible}.sqs-content-item-grid-content.empty .sqs-uploader button{border-radius:3px}.sqs-content-item-grid-content.empty.show-empty-state{width:100%;height:400px;margin-top:11px}.sqs-content-item-grid-content.empty.show-empty-state .sqs-uploader{float:none}.sqs-content-item-grid-content.empty.show-empty-state .sqs-uploader button{border:2px dashed rgba(0,0,0,.1);border-radius:22px}.sqs-content-item-grid-content.empty.show-empty-state .sqs-uploader button .icon{display:none}.sqs-content-item-grid-content.empty.show-empty-state .empty-state{cursor:pointer;text-align:center;margin-top:50%;padding:0 22px;font-size:16px;line-height:33px;color:#a1a1a1;transition:color .1s ease-in-out}.sqs-content-item-grid-content.empty.show-empty-state .empty-state img,.sqs-content-item-grid-content.empty.show-empty-state .empty-state .icon{display:none}.sqs-content-item-grid-content.empty.show-empty-state .empty-state .title{display:none}.sqs-content-item-grid-content.empty.show-empty-state .empty-state .desc,.sqs-content-item-grid-content.empty.show-empty-state .empty-state .empty-text,.sqs-content-item-grid-content.empty.show-empty-state .empty-state .description{margin:0 auto}.sqs-content-item-grid-content.empty.show-empty-state .empty-state:hover{color:#3e3e3e}.sqs-content-item-grid-content.empty.show-empty-state.collection-type-products .icon{background:transparent url('/universal/images-v6/configuration/no-products.png') center center no-repeat}.sqs-content-item-grid-content.empty.show-empty-state.collection-type-gallery .icon{background:transparent url('/universal/images-v6/configuration/empty-gallery-collection-circle.png') center center no-repeat}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button{cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button,.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button:hover{background-color:#d0d0d0;box-shadow:none}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button.disabled{opacity:.3;cursor:default}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button.disabled>*{opacity:.5}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button.disabled:hover{background-color:#e4e4e4 !important}.sqs-tray:not(.sqs-library-manager-header-tray) .buttons .sqs-button.disabled{opacity:.5}.sqs-tray{position:relative;z-index:1}.sqs-tray .title{font-size:21px;font-weight:500;display:block;flex-grow:1;line-height:22px;padding-top:11px;padding-bottom:11px;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-overflow:ellipsis;overflow:hidden}@media screen and (min-width: 433px){.sqs-tray .title{white-space:nowrap}}.sqs-tray .spinner-wrapper{display:none}.sqs-tray .sqs-spinner{line-height:44px}.sqs-action-tray .sqs-button{margin-top:0;margin-bottom:0}.sqs-tabbed-header-tray .tabs .sqs-tab-button+.sqs-tab-button{margin-left:22px}.sqs-action-tray{background:#f6f6f6;box-shadow:0 4px 33px rgba(0,0,0,.22), 0 0 0 1px rgba(0,0,0,.04);border-radius:4px;overflow:hidden;min-width:330px;z-index:2;position:absolute;left:16.5px;right:16.5px;bottom:16.5px;transform:translatey(0);opacity:1;visibility:visible;transition:transform , opacity, visibility;transition-duration:0.12s, 0.12s, 0s;transition-delay:0s;transition-timing-function:ease-in}.sqs-action-tray.sqs-action-tray-hidden{display:block;transform:translatey(11px);opacity:0;visibility:hidden;transition-delay:0.1s, 0.1s, 0.22s;transition-timing-function:ease-out}.sqs-action-tray .description{padding:22px 33px;text-align:center;display:none}.sqs-action-tray .action-tray .top{text-transform:uppercase;font-weight:500;letter-spacing:.5px}.sqs-action-tray .action-tray .buttons{border-top:1px solid #e4e4e4;display:flex;border-top-width:0}.sqs-action-tray .action-tray .buttons:empty{border-top:0}.sqs-action-tray .action-tray .buttons>*{flex:1;display:flex;align-items:center;justify-content:center;border-left:1px solid #e4e4e4 !important}.sqs-action-tray .action-tray .buttons>*:first-child{border-left:none !important}.sqs-action-tray .action-tray .buttons input,.sqs-action-tray .action-tray .buttons button{background:transparent}.sqs-action-tray .action-tray .buttons a{border-bottom:none}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete){cursor:pointer;outline:none;background:#f6f6f6;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete),.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete)>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete):hover{background-color:#fff;box-shadow:none}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete).disabled{opacity:.3;cursor:default}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete).disabled>*{opacity:.5}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete).disabled:hover{background-color:#f6f6f6 !important}.sqs-action-tray .action-tray .buttons .sqs-button:not(.label-delete).disabled{opacity:.5}.sqs-action-tray .action-tray .buttons .label-delete{cursor:pointer;outline:none;background:#f6f6f6;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-action-tray .action-tray .buttons .label-delete,.sqs-action-tray .action-tray .buttons .label-delete>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-action-tray .action-tray .buttons .label-delete:hover{background-color:#000;box-shadow:none}.sqs-action-tray .action-tray .buttons .label-delete.disabled{opacity:.3;cursor:default}.sqs-action-tray .action-tray .buttons .label-delete.disabled>*{opacity:.5}.sqs-action-tray .action-tray .buttons .label-delete.disabled:hover{background-color:#f6f6f6 !important}.sqs-action-tray .action-tray .buttons .label-delete:hover{background-color:#f0523d}.sqs-action-tray .action-tray .buttons .label-delete:hover,.sqs-action-tray .action-tray .buttons .label-delete:hover *{color:#fff !important}.sqs-action-tray .action-tray .buttons [title=\"Clear Selection\"]{display:none}.sqs-action-tray.dialog-tray .description{display:block}.sqs-action-tray.dialog-tray .action-tray .buttons{border-top-width:1px}.sqs-blog-list-manager .sqs-action-tray{min-width:330px}.sqs-product-grid-action-tray{transition:all .1s ease-in-out;padding:11px;box-shadow:none;left:0;right:0;bottom:0;overflow:visible}.sqs-product-grid-action-tray-hidden{transform:translatey(77px);opacity:0}.sqs-product-grid-action-tray .sqs-button-vanilla{margin-top:0;display:inline-block;text-transform:uppercase;cursor:pointer;white-space:nowrap;line-height:33px;padding-left:11px;padding-right:11px;transition:all .1s ease-in-out;font-weight:500;color:#3e3e3e !important;border-bottom:none;outline:none}.sqs-product-grid-action-tray .sqs-button-vanilla:hover,.sqs-product-grid-action-tray .sqs-button-vanilla:hover a{color:#000 !important}.sqs-product-grid-action-tray .sqs-button-vanilla a{border:none;display:inline-block;outline:none}.sqs-product-grid-action-tray:after{height:22px;content:' ';background:linear-gradient(0deg,rgba(0,0,0,.22),rgba(0,0,0,0) 75%,transparent);width:100%;position:absolute;bottom:100%;left:0;z-index:1;opacity:.4;pointer-events:none}.sqs-product-grid-action-tray .product-grid-action-tray{position:relative}.sqs-product-grid-action-tray .product-grid-action-tray .description{display:block;position:absolute;top:0;right:0;padding:0;padding-right:11px}.sqs-product-grid-action-tray .product-grid-action-tray .description .top{line-height:33px;color:#a1a1a1}.sqs-product-grid-action-tray .product-grid-action-tray .description .bottom{display:none}.sqs-quick-search{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:all .2s ease-out;text-indent:0;padding-left:44px;padding-right:88px;box-sizing:border-box;cursor:auto}.sqs-quick-search.show{opacity:1}.sqs-quick-search input[type=\"text\"]{padding-top:11px;padding-bottom:11px}.sqs-quick-search input[type=\"text\"]::-ms-clear{display:none}.sqs-quick-search .thumb{position:absolute;top:0;right:11px;height:44px;z-index:1000;display:flex;align-items:center;opacity:1;transition:all .3s ease-out;transform:translatex(0);-webkit-user-select:none;-ms-user-select:none;user-select:none}.sqs-quick-search .thumb.hidden{opacity:0;transform:translatex(7.333333333333333px)}.sqs-quick-search .thumb>div{display:inline-block;height:44px;width:22px;opacity:.3;transition:all .2s ease-out;white-space:nowrap}.sqs-quick-search .thumb>div:hover{opacity:1}.sqs-quick-search .thumb>div.message{position:relative;transition:right .2s ease-out;right:0;width:auto;line-height:44px;vertical-align:top}.sqs-quick-search .thumb>div.message.no-results{right:-22px}.sqs-quick-search .thumb>div.message:hover{opacity:.3}.sqs-quick-search .thumb>div.prev{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chevron-left-dark.png') center center no-repeat;margin-left:11px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-quick-search .thumb>div.prev{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-left-dark@2x.png');background-size:16px}}.sqs-quick-search .thumb>div.next{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chevron-right-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-quick-search .thumb>div.next{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-right-dark@2x.png');background-size:16px}}.sqs-quick-search .thumb>div.prev,.sqs-quick-search .thumb>div.next{cursor:pointer}.sqs-quick-search .thumb>div.prev.hidden,.sqs-quick-search .thumb>div.next.hidden{opacity:0}.settings-panel-fields .sqs-button:not(.no-frame),.tab-wrapper .sqs-button:not(.no-frame),.sqs-slice-content-editor-base .sqs-button:not(.no-frame){width:auto}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame),.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame),.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame){cursor:pointer;outline:none;background:#3e3e3e;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame),.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame),.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame),.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame)>*,.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame)>*,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame)>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame):hover,.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame):hover,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame):hover{background-color:#000;box-shadow:none}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled,.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled{opacity:.3;cursor:default}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled>*,.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled>*,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled>*{opacity:.5}.settings-panel-fields .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled:hover,.tab-wrapper .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled:hover,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) .sqs-button-content:not(.no-frame).disabled:hover{background-color:#3e3e3e !important}.settings-panel-fields .sqs-button:not(.no-frame) button,.tab-wrapper .sqs-button:not(.no-frame) button,.sqs-slice-content-editor-base .sqs-button:not(.no-frame) button{background:none;font-weight:400;letter-spacing:.5px;text-transform:uppercase}.settings-panel-fields .sqs-button.sqs-button-hidden,.tab-wrapper .sqs-button.sqs-button-hidden,.sqs-slice-content-editor-base .sqs-button.sqs-button-hidden{display:none !important}.settings-panel-fields .sqs-button.no-frame,.tab-wrapper .sqs-button.no-frame,.sqs-slice-content-editor-base .sqs-button.no-frame{display:inline-block;text-transform:uppercase;cursor:pointer;white-space:nowrap;line-height:33px;padding-left:11px;padding-right:11px;transition:all .1s ease-in-out;font-weight:500;color:#3e3e3e !important;border-bottom:none;outline:none}.settings-panel-fields .sqs-button.no-frame:hover,.tab-wrapper .sqs-button.no-frame:hover,.sqs-slice-content-editor-base .sqs-button.no-frame:hover,.settings-panel-fields .sqs-button.no-frame:hover a,.tab-wrapper .sqs-button.no-frame:hover a,.sqs-slice-content-editor-base .sqs-button.no-frame:hover a{color:#000 !important}.settings-panel-fields .sqs-button.no-frame a,.tab-wrapper .sqs-button.no-frame a,.sqs-slice-content-editor-base .sqs-button.no-frame a{border:none;display:inline-block;outline:none}.sqs-button.primary .sqs-button-content{cursor:pointer;outline:none;background:#3e3e3e;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-button.primary .sqs-button-content,.sqs-button.primary .sqs-button-content>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-button.primary .sqs-button-content:hover{background-color:#000;box-shadow:none}.sqs-button.primary .sqs-button-content.disabled{opacity:.3;cursor:default}.sqs-button.primary .sqs-button-content.disabled>*{opacity:.5}.sqs-button.primary .sqs-button-content.disabled:hover{background-color:#3e3e3e !important}.sqs-button.minor .sqs-button-content{cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-button.minor .sqs-button-content,.sqs-button.minor .sqs-button-content>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-button.minor .sqs-button-content:hover{background-color:#d0d0d0;box-shadow:none}.sqs-button.minor .sqs-button-content.disabled{opacity:.3;cursor:default}.sqs-button.minor .sqs-button-content.disabled>*{opacity:.5}.sqs-button.minor .sqs-button-content.disabled:hover{background-color:#e4e4e4 !important}.sqs-button.minor .sqs-button-content.disabled{opacity:.5}.sqs-button.caution .sqs-button-content{cursor:pointer;outline:none;background:#f6f6f6;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-button.caution .sqs-button-content,.sqs-button.caution .sqs-button-content>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-button.caution .sqs-button-content:hover{background-color:#000;box-shadow:none}.sqs-button.caution .sqs-button-content.disabled{opacity:.3;cursor:default}.sqs-button.caution .sqs-button-content.disabled>*{opacity:.5}.sqs-button.caution .sqs-button-content.disabled:hover{background-color:#f6f6f6 !important}.sqs-button.caution .sqs-button-content:hover{background-color:#f0523d}.sqs-button.caution .sqs-button-content:hover,.sqs-button.caution .sqs-button-content:hover *{color:#fff !important}.sqs-button.text .sqs-button-content{display:inline-block;text-transform:uppercase;cursor:pointer;white-space:nowrap;line-height:33px;padding-left:11px;padding-right:11px;transition:all .1s ease-in-out;font-weight:500;color:#3e3e3e !important;border-bottom:none;outline:none}.sqs-button.text .sqs-button-content:hover,.sqs-button.text .sqs-button-content:hover a{color:#000 !important}.sqs-button.text .sqs-button-content a{border:none;display:inline-block;outline:none}.sqs-button.is-loading .sqs-button-content{position:relative}.sqs-button.is-loading .sqs-button-content .label{visibility:hidden}.sqs-button.is-loading .sqs-button-content .sqs-spin{position:absolute;top:50%;left:50%;margin:-8px}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame){cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame),.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame)>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame):hover{background-color:#d0d0d0;box-shadow:none}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame).disabled{opacity:.3;cursor:default}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame).disabled>*{opacity:.5}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame).disabled:hover{background-color:#e4e4e4 !important}.settings-panel-fields .sqs-button:not(.primary):not(.caution):not(.text) .sqs-button-content:not(.no-frame).disabled{opacity:.5}.sqs-tab{display:inline-block;padding:0 22px;cursor:pointer;text-transform:uppercase;font-weight:500;font-size:11px;letter-spacing:.5px;border-left:1px solid #f6f6f6;border-bottom:2px solid #e4e4e4;text-align:center;border-radius:4px 4px 0 0}.sqs-tab.selected,.sqs-tab.active{background-color:#e4e4e4}.sqs-tab:hover{background-color:#e4e4e4}.sqs-tab a{border:none}.sqs-tab:last-child{margin-right:-11px}.sqs-tab-hidden{display:none}.sqs-content-item-image{width:20%;float:left;position:relative}.sqs-content-item-image .index,.sqs-content-item-image .itemId{position:absolute;z-index:1}.sqs-content-item-image .index.itemId,.sqs-content-item-image .itemId.itemId{bottom:0;max-width:90%;overflow:hidden}.sqs-content-item-image.yui3-dd-dragging .image-focal-point,.sqs-content-item-image.out-of-region .image-focal-point{visibility:hidden}.sqs-content-item-image.selected .inside img,.sqs-content-item-image.selected .inside.plain-display,.sqs-content-item-image.selected .inside.processing,.sqs-content-item-image.selected .inside .image-processing-error{box-shadow:0 0 0 2px #14aaff}.sqs-content-item-image.selected .sqs-action-overlay{visibility:hidden}.sqs-content-item-image .licensed-asset-preview-bar{text-align:center;cursor:pointer}.sqs-content-item-image .type-icon{position:absolute;height:29px;width:29px;background-position:center center;background-repeat:no-repeat;background-size:65%;border-radius:14.5px;content:' ';background-color:#3e3e3e}.sqs-content-item-image .item-type-video .type-icon{background-image:url('/universal/images-v6/content/post-type-video.png')}.sqs-content-item-image .item-type-text .type-icon{background-image:url('/universal/images-v6/content/post-type-text.png')}.sqs-content-item-image .item-type-gallery .type-icon{background-image:url('/universal/images-v6/content/post-type-gallery.png')}.sqs-content-item-image-content{margin:22px auto;cursor:move}.sqs-content-item-image-content.fadeable-plugged.display-status-hidden{display:block}.sqs-content-item-image-content .inside{display:block;position:relative}.sqs-content-item-image-content .inside img{border-radius:4px}.sqs-content-item-image-content .inside .flag-wrapper{position:absolute;overflow:hidden;pointer-events:none}.sqs-content-item-image-content .inside .flag-wrapper .flag-text{position:absolute;top:58px;right:-30px;width:100px;text-align:center;transform:rotate(45deg);transform-origin:100% 0%;padding:12px 12px;color:#fff;font-weight:bold;background:rgba(0,0,0,.85);font-size:10px;font-weight:normal;right:-33px;background:#a90725;top:70px;width:120px}.sqs-content-item-image-content .inside .information{position:absolute;bottom:0;color:#eee;font-size:12px;line-height:32px;background:#333;opacity:.9;zoom:1;width:100%}.sqs-content-item-image-content .inside .information:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-content-item-image-content .inside .information:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-content-item-image-content .inside .information .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px}.sqs-content-item-image-content .inside .information .price{max-width:93px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;letter-spacing:1px;position:absolute;right:0;bottom:0}.sqs-content-item-image-content .inside .information .price .original-price{text-decoration:line-through}.sqs-content-item-image-content .inside.plain-display{background:#222;position:relative}.sqs-content-item-image-content .inside.plain-display .meta{position:absolute;left:10px;bottom:10px}.sqs-content-item-image-content .inside.plain-display .meta h1,.sqs-content-item-image-content .inside.plain-display .meta h2{font-size:11px;font-weight:normal;margin:0}.sqs-content-item-image-content .inside.plain-display .meta h1{color:#fff}.sqs-content-item-image-content .inside.plain-display .meta h2{color:#aaa}.sqs-content-item-image-content .inside.processing{background:#f6f6f6;border-radius:4px}.sqs-content-item-image-content .inside .image-processing-error{position:absolute;top:0;left:0;bottom:0;right:0;font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;background:#222;border:solid 1px #fff}.sqs-content-item-image-content .inside .image-processing-error p{position:absolute;top:23%;left:10%;right:10%;text-align:center;line-height:1.68em;font-size:12px}.sqs-content-item-image-content .inside .image-processing-error p strong{font-size:16px}.sqs-content-item-image-content .inside .image-processing-error p a{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;background-color:#e5e5e5;color:#111;padding:5px 10px;margin-top:12px;text-decoration:none}.sqs-content-item-image-content .inside .image-processing-error p a a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}.sqs-content-item-image-content .inside .image-processing-error p a:hover a{color:#fff}.sqs-content-item-image-content .inside .image-processing-error p a:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-content-item-image-content .inside .image-processing-error p a:hover a{color:#111}.sqs-content-item-image-content .inside .image-processing-error p a a{color:#222}.sqs-content-item-image-content .inside .image-processing-error p a:focus{outline:none;color:#111;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-content-item-image-content .inside .image-processing-error .icon.icon-processing-failed{background:url('/universal/images-v6/settings/warning-icon-gray.png') center center;width:18px;height:18px;position:absolute;top:30%;left:50%;margin-left:-9px}.sqs-content-item-image-content .inside .image-processing-error p{color:#fff;top:10%;font-weight:300;line-height:normal}.sqs-content-item-image-content .inside .image-processing-error a.remove{margin-top:10px}.sqs-content-item-image-content .inside img{transition:box-shadow .2s cubic-bezier(.645,.045,.355,1)}.sqs-description-hidden{display:none}.sqs-description .title{text-transform:uppercase;font-weight:500;letter-spacing:.5px}.sqs-description .text a:hover{color:#3e3e3e}.sqs-description .title+.text{font-size:11px;color:#797979}.sqs-description .bookmarklet{background:#e4e4e4;border-bottom:none;padding:5.5px 0;margin-left:auto;margin-right:auto;margin-top:11px;display:block;width:160px;border-radius:100px;color:#3e3e3e;font-size:11px;font-weight:500;text-align:center}.sqs-dialog-wysiwyg .field-rte-wrapper{margin-top:-11px}.sqs-dialog-wysiwyg-hidden{display:none}.sqs-dialog-wysiwyg .rte-select{min-width:160px;white-space:pre}.sqs-content-selector[class$='-hidden']{display:none}.sqs-content-selector .collection-group{margin-bottom:22px}.sqs-content-selector .collection-group-title{text-transform:uppercase;font-weight:500;letter-spacing:.5px;margin-bottom:11px}.sqs-content-selector .collection-wrapper{cursor:pointer;background-color:#e7e7e7;margin-bottom:5.5px}.sqs-content-selector .collection-wrapper .collection{padding:11px;position:relative}.sqs-content-selector .collection-wrapper .collection-filter,.sqs-content-selector .collection-wrapper .collection-title{display:inline-block;line-height:100%;vertical-align:middle}.sqs-content-selector .collection-wrapper .collection-title{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-content-selector .collection-wrapper .collection-filter{max-width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-content-selector .collection-wrapper .dropdown-button{position:absolute;right:11px;top:11px;height:22px;width:22px;border-radius:100%;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-dark.png') center center no-repeat;background-color:rgba(0,0,0,.025)}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-dark@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper .dropdown-button:hover{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-light.png') center center no-repeat;background-color:#3e3e3e}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper .dropdown-button:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-light@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper .dropdown{display:none;padding:0 22px 22px}.sqs-content-selector .collection-wrapper .dropdown.content-stats .tags{margin-top:3px}.sqs-content-selector .collection-wrapper .dropdown .categories,.sqs-content-selector .collection-wrapper .dropdown .tags{position:relative;height:16px;cursor:pointer}.sqs-content-selector .collection-wrapper .dropdown .categories .icon-title,.sqs-content-selector .collection-wrapper .dropdown .tags .icon-title{position:absolute}.sqs-content-selector .collection-wrapper .dropdown .categories select,.sqs-content-selector .collection-wrapper .dropdown .tags select{width:100%;position:absolute;opacity:0;height:100%;cursor:pointer;z-index:5000000}.sqs-content-selector .collection-wrapper.open .dropdown{display:block}.sqs-content-selector .collection-wrapper.open .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper.open .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-dark@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper.open .dropdown-button:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-light.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper.open .dropdown-button:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-light@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper.selected{background-color:#3e3e3e;color:#fff}.sqs-content-selector .collection-wrapper.selected .dropdown-button{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-light.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper.selected .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-down-light@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper.selected.open .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-light.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-content-selector .collection-wrapper.selected.open .dropdown-button{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chevron-up-light@2x.png');background-size:16px}}.sqs-content-selector .collection-wrapper .collection-filter-wrapper{padding-left:10px}.sqs-content-selector .collection-wrapper .collection-filter-wrapper:before{content:' ('}.sqs-content-selector .collection-wrapper .collection-filter-wrapper:after{content:')'}.sqs-content-selector .titles-hidden .collection-group-title{display:none}.sqs-content-selector .empty-message{padding:22px;border:2px dashed rgba(0,0,0,.1);border-radius:11px;color:#a1a1a1;text-align:center}@media screen and (max-width: 432px){.sqs-multi-option-content{height:auto !important}}.sqs-multi-option-content .option{display:inline-block;vertical-align:bottom;/* WARNING[1] raised evaluating next rule: ExecuteError INCOMPATIBLE_UNITS: No conversion is possible from % (percentage) to PX (pixels).. stripping unit. */\nbackground-position:center calc(41%);background-repeat:no-repeat;margin:0;cursor:pointer}.sqs-multi-option-content .option-content{position:relative;padding-bottom:100%;height:0}.sqs-multi-option-content .option:hover{background-color:rgba(0,0,0,.025)}.sqs-multi-option-content .option.selected{background-color:rgba(0,0,0,.045)}.sqs-multi-option-content .option.locked{opacity:.5}.sqs-multi-option-content .option.upsell-locked .option-title,.sqs-multi-option-content .option.upsell-locked .option-description{opacity:.5}.sqs-multi-option-content .option.upsell-locked .option-title,.sqs-multi-option-content .option.upsell-locked .sqs-featuregate-logo{display:inline}.sqs-multi-option-content .option .option-title{position:absolute;bottom:0;width:100%;text-align:center;line-height:1.5}.sqs-multi-option-content .option[class*=\"icon-\"] .option-title{min-height:44px;display:flex;flex-direction:column;justify-content:center;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;word-wrap:break-word}.sqs-multi-option-hidden{display:none}.sqs-multi-option-columns-1 .option{width:100%}.sqs-multi-option-columns-2 .option{width:50%}.sqs-multi-option-columns-3 .option{width:33.333333333333336%}.sqs-multi-option-columns-4 .option{width:25%}.sqs-multi-option-columns-5 .option{width:20%}.sqs-multi-option-columns-6 .option{width:16.666666666666668%}.sqs-multi-option-columns-7 .option{width:14.285714285714286%}.sqs-multi-option-columns-8 .option{width:12.5%}.name-newNavigationItemType .icon-page{background-image:url('//assets.squarespace.com/universal/images-v6/damask/page-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-page{background-image:url('//assets.squarespace.com/universal/images-v6/damask/page-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-products{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dollars-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-products{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dollars-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-splash-page{background-image:url('//assets.squarespace.com/universal/images-v6/damask/splash-page-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-splash-page{background-image:url('//assets.squarespace.com/universal/images-v6/damask/splash-page-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-folder{background-image:url('//assets.squarespace.com/universal/images-v6/damask/folder-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-folder{background-image:url('//assets.squarespace.com/universal/images-v6/damask/folder-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-projects{background-image:url('//assets.squarespace.com/universal/images-v6/damask/index-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-projects{background-image:url('//assets.squarespace.com/universal/images-v6/damask/index-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-stacked{background-image:url('//assets.squarespace.com/universal/images-v6/damask/index-stack-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-stacked{background-image:url('//assets.squarespace.com/universal/images-v6/damask/index-stack-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-project{background-image:url('//assets.squarespace.com/universal/images-v6/damask/project-32-dark.png?v=1')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-project{background-image:url('//assets.squarespace.com/universal/images-v6/damask/project-64-dark.png?v=1');background-size:32px}}.name-newNavigationItemType .icon-gallery{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-gallery{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-calendar{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-calendar{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-album{background-image:url('//assets.squarespace.com/universal/images-v6/damask/album-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-album{background-image:url('//assets.squarespace.com/universal/images-v6/damask/album-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-blog{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blog-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-blog{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blog-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-link{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-link{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-chownow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chownow-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-chownow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chownow-64-dark.png');background-size:32px}}.name-newNavigationItemType .icon-variation{background-image:url('//assets.squarespace.com/universal/images-v6/damask/icon-chart-bar-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-newNavigationItemType .icon-variation{background-image:url('//assets.squarespace.com/universal/images-v6/damask/icon-chart-bar-64-dark.png');background-size:32px}}.option.icon-facebook{background-image:url('//assets.squarespace.com/universal/images-v6/damask/facebook-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-facebook{background-image:url('//assets.squarespace.com/universal/images-v6/damask/facebook-64-dark.png');background-size:32px}}.option.icon-twitter{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-twitter{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-64-dark.png');background-size:32px}}.option.icon-google{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplus-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-google{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplus-64-dark.png');background-size:32px}}.option.icon-googlesearchconsole{background-image:url('//assets.squarespace.com/universal/images-v6/damask/google-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-googlesearchconsole{background-image:url('//assets.squarespace.com/universal/images-v6/damask/google-64.png');background-size:32px}}.option.icon-tumblr{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tumblr-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-tumblr{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tumblr-64-dark.png');background-size:32px}}.option.icon-squarespace{background-image:url('//assets.squarespace.com/universal/images-v6/damask/v5-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-squarespace{background-image:url('//assets.squarespace.com/universal/images-v6/damask/v5-64-dark.png');background-size:32px}}.option.icon-wordpress{background-image:url('//assets.squarespace.com/universal/images-v6/damask/wordpress-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-wordpress{background-image:url('//assets.squarespace.com/universal/images-v6/damask/wordpress-64-dark.png');background-size:32px}}.option.icon-blogger{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blogger-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-blogger{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blogger-64-dark.png');background-size:32px}}.option.icon-etsy{background-image:url('//assets.squarespace.com/universal/images-v6/damask/etsy-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-etsy{background-image:url('//assets.squarespace.com/universal/images-v6/damask/etsy-64-dark.png');background-size:32px}}.option.icon-shopify{background-image:url('//assets.squarespace.com/universal/images-v6/damask/shopify-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-shopify{background-image:url('//assets.squarespace.com/universal/images-v6/damask/shopify-64-dark.png');background-size:32px}}.option.icon-bigcartel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bigcartel-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-bigcartel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bigcartel-64-dark.png');background-size:32px}}.option.icon-product-import{background-image:url('//assets.squarespace.com/universal/images-v6/damask/CSV-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-product-import{background-image:url('//assets.squarespace.com/universal/images-v6/damask/CSV-64.png');background-size:32px}}.option.icon-dropbox2017{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropbox-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-dropbox2017{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropbox-64.png');background-size:32px}}.option.icon-foursquare{background-image:url('//assets.squarespace.com/universal/images-v6/damask/foursquare-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-foursquare{background-image:url('//assets.squarespace.com/universal/images-v6/damask/foursquare-64-dark.png');background-size:32px}}.option.icon-instagram{background-image:url('//assets.squarespace.com/universal/images-v6/damask/instagram-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-instagram{background-image:url('//assets.squarespace.com/universal/images-v6/damask/instagram-64-dark.png');background-size:32px}}.option.icon-flickr{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-flickr{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-64-dark.png');background-size:32px}}.option.icon-youtube{background-image:url('//assets.squarespace.com/universal/images-v6/damask/youtube-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-youtube{background-image:url('//assets.squarespace.com/universal/images-v6/damask/youtube-64-dark.png');background-size:32px}}.option.icon-vimeo{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vimeo-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-vimeo{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vimeo-64-dark.png');background-size:32px}}.option.icon-linkedin{background-image:url('//assets.squarespace.com/universal/images-v6/damask/linkedin-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-linkedin{background-image:url('//assets.squarespace.com/universal/images-v6/damask/linkedin-64-dark.png');background-size:32px}}.option.icon-dribbble{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dribbble-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-dribbble{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dribbble-64-dark.png');background-size:32px}}.option.icon-pinterest{background-image:url('//assets.squarespace.com/universal/images-v6/damask/pinterest-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-pinterest{background-image:url('//assets.squarespace.com/universal/images-v6/damask/pinterest-64-dark.png');background-size:32px}}.option.icon-smugmug{background-image:url('//assets.squarespace.com/universal/images-v6/damask/smugmug-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-smugmug{background-image:url('//assets.squarespace.com/universal/images-v6/damask/smugmug-64-dark.png');background-size:32px}}.option.icon-fivehundredpix{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-fivehundredpix{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-64-dark.png');background-size:32px}}.option.icon-email{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-email{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-64-dark.png');background-size:32px}}.option.icon-github{background-image:url('//assets.squarespace.com/universal/images-v6/damask/github-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-github{background-image:url('//assets.squarespace.com/universal/images-v6/damask/github-64-dark.png');background-size:32px}}.option.icon-soundcloud{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-soundcloud{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-64-dark.png');background-size:32px}}.option.icon-spotify{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spotify-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-spotify{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spotify-64-dark.png');background-size:32px}}.option.icon-itunes{background-image:url('//assets.squarespace.com/universal/images-v6/damask/itunes-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-itunes{background-image:url('//assets.squarespace.com/universal/images-v6/damask/itunes-64-dark.png');background-size:32px}}.option.icon-googleplay{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplay-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-googleplay{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplay-64-dark.png');background-size:32px}}.option.icon-bandsintown{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-bandsintown{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-64-dark.png');background-size:32px}}.option.icon-behance{background-image:url('//assets.squarespace.com/universal/images-v6/damask/behance-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-behance{background-image:url('//assets.squarespace.com/universal/images-v6/damask/behance-32@2x.png');background-size:32px}}.option.icon-codepen{background-image:url('//assets.squarespace.com/universal/images-v6/damask/codepen-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-codepen{background-image:url('//assets.squarespace.com/universal/images-v6/damask/codepen-32@2x.png');background-size:32px}}.option.icon-medium{background-image:url('//assets.squarespace.com/universal/images-v6/damask/medium-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-medium{background-image:url('//assets.squarespace.com/universal/images-v6/damask/medium-64-dark.png');background-size:32px}}.option.icon-meetup{background-image:url('//assets.squarespace.com/universal/images-v6/damask/meetup-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-meetup{background-image:url('//assets.squarespace.com/universal/images-v6/damask/meetup-32@2x.png');background-size:32px}}.option.icon-rdio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/rdio-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-rdio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/rdio-32@2x.png');background-size:32px}}.option.icon-twitch{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitch-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-twitch{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitch-32@2x.png');background-size:32px}}.option.icon-vevo{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vevo-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-vevo{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vevo-32@2x.png');background-size:32px}}.option.icon-vine{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vine-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-vine{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vine-32@2x.png');background-size:32px}}.option.icon-vsco{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vsco-32-dark.png?3')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-vsco{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vsco-64-dark.png?3');background-size:32px}}.option.icon-yelp{background-image:url('//assets.squarespace.com/universal/images-v6/damask/yelp-32.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-yelp{background-image:url('//assets.squarespace.com/universal/images-v6/damask/yelp-32@2x.png');background-size:32px}}.option.icon-external-domain{background-image:url('//assets.squarespace.com/universal/images-v6/damask/domain-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-external-domain{background-image:url('//assets.squarespace.com/universal/images-v6/damask/domain-64-dark.png');background-size:32px}}.option.icon-houzz{background-image:url('//assets.squarespace.com/universal/images-v6/damask/houzz-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-houzz{background-image:url('//assets.squarespace.com/universal/images-v6/damask/houzz-64-dark.png');background-size:32px}}.option.icon-reddit{background-image:url('//assets.squarespace.com/universal/images-v6/damask/reddit-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-reddit{background-image:url('//assets.squarespace.com/universal/images-v6/damask/reddit-64-dark.png');background-size:32px}}.option.icon-stumbleupon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stumbleupon-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-stumbleupon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stumbleupon-64-dark.png');background-size:32px}}.option.icon-chownow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chownow-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-chownow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chownow-64-dark.png');background-size:32px}}.option.icon-snapchat{background-image:url('//assets.squarespace.com/universal/images-v6/damask/snapchat-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-snapchat{background-image:url('//assets.squarespace.com/universal/images-v6/damask/snapchat-64-dark.png');background-size:32px}}.option.icon-imdb{background-image:url('//assets.squarespace.com/universal/images-v6/damask/imdb-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-imdb{background-image:url('//assets.squarespace.com/universal/images-v6/damask/imdb-64-dark.png');background-size:32px}}.option.icon-goodreads{background-image:url('//assets.squarespace.com/universal/images-v6/damask/goodreads-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-goodreads{background-image:url('//assets.squarespace.com/universal/images-v6/damask/goodreads-64-dark.png');background-size:32px}}.option.icon-stitcher{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stitcher-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-stitcher{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stitcher-64-dark.png');background-size:32px}}.option.icon-tidal{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tidal-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-tidal{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tidal-64-dark.png');background-size:32px}}.option.icon-applepodcast{background-image:url('//assets.squarespace.com/universal/images-v6/damask/applepodcast-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-applepodcast{background-image:url('//assets.squarespace.com/universal/images-v6/damask/applepodcast-64-dark.png');background-size:32px}}.option.icon-thedots{background-image:url('//assets.squarespace.com/universal/images-v6/damask/thedots-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-thedots{background-image:url('//assets.squarespace.com/universal/images-v6/damask/thedots-64-dark.png');background-size:32px}}.option.icon-tripadvisor{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tripadvisor-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.option.icon-tripadvisor{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tripadvisor-64-dark.png');background-size:32px}}.dialog-content-type .option{background-position-y:52px}.dialog-content-type .icon-getty{background-image:url('//assets.squarespace.com/universal/images-v6/damask/getty-image-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-content-type .icon-getty{background-image:url('//assets.squarespace.com/universal/images-v6/damask/getty-image-64-dark.png');background-size:32px}}.dialog-content-type .icon-licensed{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-content-type .icon-licensed{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-64-dark.png');background-size:32px}}.dialog-content-type .icon-image{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-content-type .icon-image{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-64-dark.png');background-size:32px}}.dialog-content-type .icon-video{background-image:url('//assets.squarespace.com/universal/images-v6/damask/video-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-content-type .icon-video{background-image:url('//assets.squarespace.com/universal/images-v6/damask/video-64-dark.png');background-size:32px}}.dialog-content-type .icon-text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blog-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-content-type .icon-text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/blog-64-dark.png');background-size:32px}}.name-fieldOptions .option{background-position:center 22px}.name-fieldOptions .icon-text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textbox-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textbox-64-dark.png');background-size:32px}}.name-fieldOptions .icon-textarea{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textarea-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-textarea{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textarea-64-dark.png');background-size:32px}}.name-fieldOptions .icon-select{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropdown-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-select{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropdown-64-dark.png');background-size:32px}}.name-fieldOptions .icon-checkbox{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkbox-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-checkbox{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkbox-64-dark.png');background-size:32px}}.name-fieldOptions .icon-radio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/radio-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-radio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/radio-64-dark.png');background-size:32px}}.name-fieldOptions .icon-likert{background-image:url('//assets.squarespace.com/universal/images-v6/damask/scale-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-likert{background-image:url('//assets.squarespace.com/universal/images-v6/damask/scale-64-dark.png');background-size:32px}}.name-fieldOptions .icon-name{background-image:url('//assets.squarespace.com/universal/images-v6/damask/person-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-name{background-image:url('//assets.squarespace.com/universal/images-v6/damask/person-64-dark.png');background-size:32px}}.name-fieldOptions .icon-password{background-image:url('//assets.squarespace.com/universal/images-v6/damask/password-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-password{background-image:url('//assets.squarespace.com/universal/images-v6/damask/password-64-dark.png');background-size:32px}}.name-fieldOptions .icon-address{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-address{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-64-dark.png');background-size:32px}}.name-fieldOptions .icon-website{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-website{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-64-dark.png');background-size:32px}}.name-fieldOptions .icon-date{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-date{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-64-dark.png');background-size:32px}}.name-fieldOptions .icon-time{background-image:url('//assets.squarespace.com/universal/images-v6/damask/clock-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-time{background-image:url('//assets.squarespace.com/universal/images-v6/damask/clock-64-dark.png');background-size:32px}}.name-fieldOptions .icon-phone{background-image:url('//assets.squarespace.com/universal/images-v6/damask/phone-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-phone{background-image:url('//assets.squarespace.com/universal/images-v6/damask/phone-64-dark.png');background-size:32px}}.name-fieldOptions .icon-number{background-image:url('//assets.squarespace.com/universal/images-v6/damask/number-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-number{background-image:url('//assets.squarespace.com/universal/images-v6/damask/number-64-dark.png');background-size:32px}}.name-fieldOptions .icon-currency{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dollars-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-currency{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dollars-64-dark.png');background-size:32px}}.name-fieldOptions .icon-sectionbreak{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-sectionbreak{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-64-dark.png');background-size:32px}}.name-fieldOptions .icon-hidden{background-image:url('//assets.squarespace.com/universal/images-v6/damask/eye-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.name-fieldOptions .icon-hidden{background-image:url('//assets.squarespace.com/universal/images-v6/damask/eye-64-dark.png');background-size:32px}}.dialog-producttype .sqs-multi-option .option-content,.dialog-discounttype .sqs-multi-option .option-content,.dialog-ratetype .sqs-multi-option .option-content,.dialog-zipmatchtype .sqs-multi-option .option-content,.dialog-type .sqs-multi-option .option-content{padding-bottom:0;height:100%}.dialog-producttype .sqs-multi-option .option,.dialog-discounttype .sqs-multi-option .option,.dialog-ratetype .sqs-multi-option .option,.dialog-zipmatchtype .sqs-multi-option .option,.dialog-type .sqs-multi-option .option{background-position:20px 15px;padding:15px 0}.dialog-producttype .sqs-multi-option .option-title,.dialog-discounttype .sqs-multi-option .option-title,.dialog-ratetype .sqs-multi-option .option-title,.dialog-zipmatchtype .sqs-multi-option .option-title,.dialog-type .sqs-multi-option .option-title{position:relative;font-size:16px;text-align:left;padding-left:70px;bottom:initial;line-height:22px}.dialog-producttype .sqs-multi-option .option-description,.dialog-discounttype .sqs-multi-option .option-description,.dialog-ratetype .sqs-multi-option .option-description,.dialog-zipmatchtype .sqs-multi-option .option-description,.dialog-type .sqs-multi-option .option-description{font-size:11px;padding-left:70px;color:#797979}@media screen and (max-width: 432px){.dialog-ratetype .sqs-multi-option-content{height:auto;display:flex;flex-direction:column}.dialog-ratetype .sqs-multi-option-content .option{width:100% !important}.dialog-addeditrule .title-block .configuration-container-tabs{position:static;font-size:11px}.dialog-addeditrule .title-block .configuration-container-tabs .configuration-container-tab{line-height:normal;padding-left:0;padding-right:11px}.dialog-addeditrule .title-block .configuration-container-tabs .configuration-container-tab:last-child{padding-right:0}.dialog-addeditrule .sqs-shipping-system-container-table td{white-space:normal}.dialog-addeditrule .split-field{width:100% !important;margin-top:0}.dialog-addeditrule .split-field .sqs-text{width:100% !important;margin-bottom:22px}}.dialog-producttype .sqs-multi-option .option-title,.dialog-discounttype .sqs-multi-option .option-title,.dialog-ratetype .sqs-multi-option .option-title,.dialog-type .sqs-multi-option .option-title,.dialog-zipmatchtype .sqs-multi-option .option-title,.dialog-producttype .sqs-multi-option .option-description,.dialog-discounttype .sqs-multi-option .option-description,.dialog-ratetype .sqs-multi-option .option-description,.dialog-type .sqs-multi-option .option-description,.dialog-zipmatchtype .sqs-multi-option .option-description{padding-left:15px}.sqs-create-link .option-content{padding-bottom:120px}.sqs-multi-option.name-file-location{border-bottom:2px solid rgba(0,0,0,.045)}.sqs-multi-option.name-file-location .option{height:44px}.sqs-multi-option.name-file-location .option-content{height:100% !important;padding-bottom:0 !important}.sqs-multi-option-columns-1 .option.icon-wordpress{background-position-y:80px}.standard-dialog-wrapper.dialog-content-type .body-block>.tab-wrapper{padding:0}.standard-dialog-wrapper.dialog-content-type .sqs-dialog-field{margin:0}.standard-dialog-wrapper.dialog-content-type .sqs-multi-option-columns-3 .option{background-position-y:36px}.standard-dialog-wrapper.dialog-content-type .sqs-multi-option-columns-3 .option .option-title{min-height:66px}.browser-msie .standard-dialog-wrapper.dialog-content-type .sqs-multi-option-columns-3 .option .option-title{min-height:44px}.sqs-uploader .upload-indicator{border:none;text-align:center;position:relative;display:inline-block;background-color:transparent;background-image:none;box-shadow:none;color:inherit;cursor:pointer}.sqs-uploader .upload-indicator .icon{height:40px;width:40px;position:absolute;top:50%;left:50%;transform:translatex(-50%) translatey(-50%);margin:0;opacity:.15;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/upload-dark.png') center center no-repeat;cursor:pointer;transition:opacity cubic-bezier(.645,.045,.355,1) .4s}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-uploader .upload-indicator .icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/upload-dark@2x.png');background-size:32px}}.sqs-uploader .upload-indicator:hover .icon{opacity:.5}.sqs-uploader .upload-indicator .text{display:none;transition:color cubic-bezier(.645,.045,.355,1) .4s}.sqs-uploader .upload-indicator:focus{outline:none}.sqs-uploader .upload-indicator{font-family:inherit;font-weight:inherit;font-size:inherit}.sqs-uploader .upload-indicator .icon{transform:translate(0);position:static;top:auto;left:auto;margin:auto}.sqs-uploader .upload-indicator .text{display:block;line-height:inherit;margin:auto;color:#797979}.sqs-uploader .upload-indicator:hover .text{color:#3e3e3e}.sqs-node-expander{position:relative}.sqs-node-expander-wrapper{position:absolute;top:0;right:0;height:44px;width:44px;overflow:hidden;pointer-events:none;cursor:pointer;z-index:1001;transform:rotate(90deg);transition:all .3s ease-in-out}.sqs-node-expander-wrapper:after{content:' ';height:10px;width:10px;position:absolute;left:7px;top:7px;background:transparent url('/universal/images-v6/damask/arrow-up-left-dark.png') center center no-repeat;transition:transform .4s cubic-bezier(.645,.045,.355,1),top 2s ease-in-out,left 2s ease-in-out}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-node-expander-wrapper:after{background-image:url('/universal/images-v6/damask/arrow-up-left-dark@2x.png');background-size:10px}}.sqs-node-expander-wrapper:hover{opacity:1 !important}.sqs-node-expander-wrapper:hover :after{transform:translateX( -2px ) translateY( -2px )}.sqs-node-expander-wrapper.sqs-node-expander-active:after{transform:rotate(180deg)}.sqs-node-expander-wrapper-hidden{display:none}.sqs-node-expander-button{height:66px;width:66px;position:absolute;left:-37px;top:-37px;transform:rotate(45deg);transition:background .2s ease-in-out;background:#f6f6f6;pointer-events:auto}.sqs-node-expander-button:hover{/* WARNING[2] raised evaluating next rule: ExecuteError ARG_COUNT: Function rgb requires at least 3 args, found 4 .. ignoring additional args */\nbackground:#f3f3f3}html.editing-page .preview-viewport>.sqs-node-expander-wrapper,body.sqs-style-mode .preview-viewport>.sqs-node-expander-wrapper{display:none}.standard-dialog-wrapper.sqs-node-expander-active .main-container,.standard-dialog-wrapper.sqs-node-expander-active .body-block{overflow:visible}.standard-dialog-wrapper.sqs-node-expander-active,.dialog-screen-overlay.sqs-node-expander-active{-webkit-transform:none;overflow:visible}.sqs-create-link{color:#3e3e3e}.sqs-create-link-hidden{display:none}.sqs-create-link .inner{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;padding-right:55px;background:#3e3e3e;color:#fff;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:padding .1s ease-in-out}.sqs-create-link .inner:focus{outline:none}.sqs-create-link .editing-window{background-color:#f6f6f6;height:auto !important;padding:11px 22px 11px;box-shadow:0 4px 33px rgba(0,0,0,.22), 0 0 0 1px rgba(0,0,0,.04)}.sqs-create-link .editing-window.hidden{display:none}.sqs-create-link .placeholder{position:relative}.sqs-create-link .clear{position:absolute;top:0;right:0;height:44px;width:44px;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light.png') center center no-repeat;cursor:pointer}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-create-link .clear{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light@2x.png');background-size:9px 11px}}.sqs-create-link .clear:hover{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-create-link .clear:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red@2x.png');background-size:9px 11px}}.dialog-navigationlinkconfig .body-block,.dialog-configure-collection .body-block{height:auto !important;position:static}.dialog-navigationlinkconfig .body-block .tab-wrapper,.dialog-configure-collection .body-block .tab-wrapper{position:static}.sqs-text-hidden{display:none}.sqs-text .sqs-input-wrapper{margin-top:5px}.sqs-text input{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none}.sqs-text input:focus{outline:none}.sqs-text.large input{font-size:16px}.sqs-text.copy-paste input[type]{background:#e4e4e4;color:#797979;font-style:italic}.sqs-text.has-errors input{box-shadow:inset 0 0 0 2px #f0523d}.sqs-numeric-text-hidden{display:none}.sqs-url-text .sqs-input-wrapper{display:table;width:100%;margin-top:0}.sqs-url-text .sqs-input-wrapper-content{display:table-row;background:#fff}.sqs-url-text .prefix{display:table-cell;padding-left:11px;white-space:nowrap;padding-right:2px;width:1px;color:#797979;-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:default;vertical-align:middle}.sqs-url-text input{display:table-cell;padding-left:0;background:transparent}.sqs-offscreen{position:absolute !important;overflow:hidden;width:1px !important;height:1px !important;left:-9999px;top:-9999px}.sqs-create-link-content .existing-content-link-tab{height:261px;overflow:auto;margin:0 -22px;padding:0 22px}.sqs-create-link-content.condensed .existing-content-link-tab{height:185px}body.squarespace-config .sqs-dialog-field-html-hidden{display:none}body.squarespace-config .sqs-dialog-field-html-content>*{margin:22px 0}body.squarespace-config .sqs-dialog-field-html-content>*:first-child{margin-top:0}body.squarespace-config .sqs-dialog-field-html-content>*:last-child{margin-bottom:0}.external-link-tab button{-webkit-appearance:none;background:none;border:none;cursor:pointer}.external-link-tab button.visit{position:absolute;right:0;height:44px;width:44px;padding:0;z-index:1;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/link-16-dark.png') center center no-repeat;outline:none}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.external-link-tab button.visit{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-32-dark.png');background-size:16px}}.external-link-tab .link{position:relative}.external-link-tab .sqs-text{margin-top:0;margin-bottom:11px}.external-link-tab .sqs-text input{padding:5.5px;padding-right:44px}.file-manager-tab .sqs-multi-option{margin-bottom:0}.file-manager-tab .option.icon-new{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-dark@2x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.file-manager-tab .option.icon-new{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-dark@4x.png');background-size:32px}}.file-manager-tab .option.icon-existing{background-image:url('//assets.squarespace.com/universal/images-v6/damask/folder-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.file-manager-tab .option.icon-existing{background-image:url('//assets.squarespace.com/universal/images-v6/damask/folder-64-dark.png');background-size:32px}}.file-manager-tab .frames{margin-bottom:11px}.file-manager-tab .frames .sqs-dialog-field.sqs-multi-frame{margin:0}.file-manager-tab .frames .sqs-multi-frame-content{height:178px}.file-manager-tab .frames .sqs-uploader{height:100%}.file-manager-tab .frames .sqs-uploader-content{height:100%}.file-manager-tab .frames .upload-indicator{border:none;background:#fff;border-radius:3px}.file-manager-tab .frames .icon.loading{background-image:none}.file-manager-tab .frames .spinner{width:100%;height:100%;margin-top:18px}.file-manager-tab .frames .text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.file-manager-tab .frames .sqs-dialog-field.sqs-file-manager{padding:0}.file-manager-tab .frames .attachments{height:136px;overflow-x:hidden;overflow-y:auto}.multi-frame-wrapper .sqs-file-manager.sqs-dialog-field{margin:0}.sqs-file-manager-content{background:#fff;border-radius:3px}.sqs-file-manager-content .search{position:relative}.sqs-file-manager-content .search .sqs-dialog-field.sqs-text{margin:0;padding:0}.sqs-file-manager-content .search .sqs-dialog-field.sqs-text input{padding:10px;font-size:14px;border:none;border-bottom:1px solid #eee;border-radius:0;border-top-left-radius:3px;border-top-right-radius:3px}.sqs-file-manager-content .search .sqs-dialog-field.sqs-text input:focus{border-color:#eee;box-shadow:none}.sqs-file-manager-content .attachments .attachment{height:34px;line-height:34px;width:100%;position:relative;font-size:13px}.sqs-file-manager-content .attachments .attachment .filename{position:absolute;left:10px;max-width:75%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#222}.sqs-file-manager-content .attachments .attachment .filename input.filename-editable{width:75%;border:1px solid #ddd;border-radius:3px;padding:0;font-size:13px}.sqs-file-manager-content .attachments .attachment .filename .filename-editable{display:none}.sqs-file-manager-content .attachments .attachment.editing .filename .filename-text{display:none}.sqs-file-manager-content .attachments .attachment.editing .filename .filename-editable{display:inline-block}.sqs-file-manager-content .attachments .attachment .edit{position:absolute;right:0;top:1px;padding-right:40px;visibility:hidden}.sqs-file-manager-content .attachments .attachment.editing .edit{visibility:hidden !important}.sqs-file-manager-content .attachments .attachment .remove{position:absolute;right:0;padding-right:15px;visibility:hidden}.sqs-file-manager-content .attachments .attachment.active{background:#eee;cursor:pointer}.sqs-file-manager-content .attachments .attachment.active .edit{visibility:visible;opacity:.5}.sqs-file-manager-content .attachments .attachment.active .edit:hover{opacity:1}.sqs-file-manager-content .attachments .attachment.active .remove{visibility:visible;opacity:.5}.sqs-file-manager-content .attachments .attachment.active .remove:hover{opacity:1}.sqs-file-manager-content .attachments .attachment.selected{font-weight:bold}.sqs-file-manager-content .attachments .empty-files{width:100%;height:100%;position:relative}.sqs-file-manager-content .attachments .empty-files .icon{position:absolute;height:56px;width:76px;top:50%;left:50%;margin:-50px 0 0 -38px;background-image:url('/universal/images-v6/icons/no-content.png');background-position:center center;background-repeat:no-repeat}.sqs-file-manager-content .attachments .empty-files .text{position:absolute;width:100%;top:50%;margin:13px 0 0;text-align:center;font-size:12px;font-weight:300;color:#ccc}.sqs-file-manager-content .attachments .empty-search{margin:7px 0 0 10px}.sqs-file-manager-content .attachments .empty-search .text{color:#ccc;font-size:14px}.dialog-galleryblockimageedit .sqs-file-manager-content .attachments .attachment .filename{max-width:185px}.dialog-editor-block-image .sqs-file-manager-content .attachments .attachment .filename{max-width:245px}.dialog-imagepostconfig .sqs-file-manager-content .attachments .attachment .filename{max-width:185px}.sqs-dialog-field.sqs-multi-frame{margin:0}.sqs-dialog-field.sqs-multi-frame.variable-height .sqs-multi-frame-content .multi-frame-wrapper .frame{height:auto !important}.sqs-multi-frame-content{zoom:1;height:100%;width:100%;position:relative;overflow:hidden}.sqs-multi-frame-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-multi-frame-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-multi-frame-content .multi-frame-wrapper{height:100%;position:absolute}.sqs-multi-frame-content .multi-frame-wrapper .frame{float:left;height:100% !important;overflow-x:hidden;overflow-y:auto}.sqs-multi-frame-content .multi-frame-wrapper.animate-switch{transition:transform .25s cubic-bezier(0,0,.13,1)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"1\"]{width:100%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"1\"] .frame{width:100%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"2\"]{width:200%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"2\"] .frame{width:50%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"3\"]{width:300%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"3\"] .frame{width:33.333333333333336%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"]{width:400%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"] .frame{width:25%}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"1\"][data-frame-visible-index=\"0\"]{transform:translatex(0%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"2\"][data-frame-visible-index=\"0\"]{transform:translatex(0%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"2\"][data-frame-visible-index=\"1\"]{transform:translatex(-50%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"3\"][data-frame-visible-index=\"0\"]{transform:translatex(0%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"3\"][data-frame-visible-index=\"1\"]{transform:translatex(-33.333333333333336%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"3\"][data-frame-visible-index=\"2\"]{transform:translatex(-66.66666666666667%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"][data-frame-visible-index=\"0\"]{transform:translatex(0%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"][data-frame-visible-index=\"1\"]{transform:translatex(-25%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"][data-frame-visible-index=\"2\"]{transform:translatex(-50%)}.sqs-multi-frame-content .multi-frame-wrapper[data-frame-size=\"4\"][data-frame-visible-index=\"3\"]{transform:translatex(-75%)}.sqs-tab-view-self{zoom:1}.sqs-tab-view-self:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-tab-view-self:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.tab-view-tab{float:right;cursor:pointer}.tab-view-tab:not(.active){opacity:.5}.tab-view-tab:not(:last-child){margin-left:11px}.sqs-tab-view-children{clear:both;margin-top:11px}.sqs-datetime-picker-content .sqs-datetime-picker-date{border-bottom:1px solid #999;cursor:pointer}.sqs-datetime-picker-hidden{display:none}.sqs-datetime-picker .sqs-scheduler{margin:0;display:block}.sqs-datetime-picker .sqs-scheduler-hidden{display:none}.sqs-scheduler .workflow-flyout{position:absolute;opacity:1}.sqs-scheduler-hidden{display:none}.sqs-slider-hidden{display:none}.sqs-slider .slider-container{width:auto !important}.sqs-slider .yui3-slider{width:100%}.sqs-slider .yui3-slider-content{height:22px}.sqs-slider .yui3-slider-rail{position:absolute;top:50%;transform:translatey(-50%);height:2px;background-color:#dfdfdf;width:100% !important}.sqs-slider .yui3-slider-thumb{z-index:10;position:absolute;top:-21px !important;height:44px;width:44px;cursor:col-resize;outline:none}.sqs-slider .yui3-slider-thumb:after{content:' ';position:absolute;top:50%;left:50%;transform:translatex(-50%) translatey(-50%);height:22px;width:22px;border-radius:50%;cursor:col-resize;background-color:#3e3e3e;transition:all .1s ease-in-out}.sqs-slider .yui3-slider-thumb:hover:after,.sqs-slider .yui3-slider-thumb.yui3-dd-dragging:after{height:27.5px;width:27.5px}.sqs-slider .yui3-slider-thumb img{display:none}.sqs-slider .sqs-slider-with-numeric-label .numeric-display{position:absolute}.calendar-inset-container{-webkit-user-select:none;-ms-user-select:none;user-select:none}.calendar-inset-container .calendar-wrapper{margin-top:0}.calendar-inset-container .header{position:relative;margin-bottom:22px;margin-top:11px}.calendar-inset-container .next,.calendar-inset-container .prev{position:absolute;left:0;top:0;height:22px;width:22px;background:transparent url('/universal/images-v6/damask/chevron-left-dark.png') center center no-repeat;cursor:pointer}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.calendar-inset-container .next,.calendar-inset-container .prev{background-image:url('/universal/images-v6/damask/chevron-left-dark.png');background-size:16}}.calendar-inset-container .next:hover,.calendar-inset-container .prev:hover{opacity:1}.calendar-inset-container .next{background-image:url('/universal/images-v6/damask/chevron-right-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.calendar-inset-container .next{background-image:url('/universal/images-v6/damask/chevron-right-dark.png');background-size:16}}.calendar-inset-container .next{left:auto;right:0}.calendar-inset-container .month{display:block;text-align:center;text-transform:uppercase;font-weight:500;letter-spacing:.5px}.calendar-inset-container table{width:100%;min-width:240px;text-align:center;line-height:33px}.calendar-inset-container thead{font-weight:bold}.calendar-inset-container td{width:14.285714285714285%}.calendar-inset-container td.fade{opacity:.3}.calendar-inset-container td.active{cursor:pointer}.calendar-inset-container td.selected{background:#e4e4e4;color:#111}.calendar-inset-container td.active:not(.selected):hover{background:#e4e4e4}.calendar-inset-container .body-row:last-child{display:none}.time-wrapper .time-control.hidden{display:none}.sqs-pricing-placeholder-content .field-lhs,.sqs-variants-pricing-placeholder-content .field-lhs,.sqs-digital-pricing-placeholder-content .field-lhs,.sqs-giftcard-pricing-placeholder-content .field-lhs{font-weight:500}.sqs-pricing-placeholder-content .placeholder,.sqs-variants-pricing-placeholder-content .placeholder,.sqs-digital-pricing-placeholder-content .placeholder,.sqs-giftcard-pricing-placeholder-content .placeholder{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;zoom:1;cursor:pointer;margin-top:5px}.sqs-pricing-placeholder-content .placeholder:focus,.sqs-variants-pricing-placeholder-content .placeholder:focus,.sqs-digital-pricing-placeholder-content .placeholder:focus,.sqs-giftcard-pricing-placeholder-content .placeholder:focus{outline:none}.sqs-pricing-placeholder-content .placeholder:after,.sqs-variants-pricing-placeholder-content .placeholder:after,.sqs-digital-pricing-placeholder-content .placeholder:after,.sqs-giftcard-pricing-placeholder-content .placeholder:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-pricing-placeholder-content .placeholder:after,.sqs-variants-pricing-placeholder-content .placeholder:after,.sqs-digital-pricing-placeholder-content .placeholder:after,.sqs-giftcard-pricing-placeholder-content .placeholder:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-pricing-placeholder-content .placeholder .pricing,.sqs-variants-pricing-placeholder-content .placeholder .pricing,.sqs-digital-pricing-placeholder-content .placeholder .pricing,.sqs-giftcard-pricing-placeholder-content .placeholder .pricing{float:left}.sqs-pricing-placeholder-content .placeholder .pricing .original-price,.sqs-variants-pricing-placeholder-content .placeholder .pricing .original-price,.sqs-digital-pricing-placeholder-content .placeholder .pricing .original-price,.sqs-giftcard-pricing-placeholder-content .placeholder .pricing .original-price{text-decoration:line-through;color:#797979}.sqs-pricing-placeholder-content .placeholder .variant-count,.sqs-variants-pricing-placeholder-content .placeholder .variant-count,.sqs-digital-pricing-placeholder-content .placeholder .variant-count,.sqs-giftcard-pricing-placeholder-content .placeholder .variant-count{float:left}.sqs-pricing-placeholder-content .placeholder .variant-count .separator,.sqs-variants-pricing-placeholder-content .placeholder .variant-count .separator,.sqs-digital-pricing-placeholder-content .placeholder .variant-count .separator,.sqs-giftcard-pricing-placeholder-content .placeholder .variant-count .separator{margin:0 .3em}.sqs-pricing-placeholder-content .placeholder .pricing-option,.sqs-variants-pricing-placeholder-content .placeholder .pricing-option,.sqs-digital-pricing-placeholder-content .placeholder .pricing-option,.sqs-giftcard-pricing-placeholder-content .placeholder .pricing-option{float:right}.sqs-pricing-placeholder-content .placeholder .prompt,.sqs-variants-pricing-placeholder-content .placeholder .prompt,.sqs-digital-pricing-placeholder-content .placeholder .prompt,.sqs-giftcard-pricing-placeholder-content .placeholder .prompt{position:absolute;right:0;top:0;padding:11px 22px;background-color:#e4e4e4;font-size:11px;letter-spacing:.5px;text-transform:uppercase;cursor:pointer;font-weight:500;transition:background-color .1s ease-in-out}.sqs-pricing-placeholder-content .placeholder .prompt:hover,.sqs-variants-pricing-placeholder-content .placeholder .prompt:hover,.sqs-digital-pricing-placeholder-content .placeholder .prompt:hover,.sqs-giftcard-pricing-placeholder-content .placeholder .prompt:hover{background-color:#d0d0d0}.sqs-subscription-details-placeholder-hidden{display:none}.sqs-subscription-details-placeholder-content{margin-top:-11px;padding-left:33px;padding-bottom:22px}.sqs-subscription-details-placeholder-content .placeholder{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;zoom:1;cursor:pointer;margin-top:5px}.sqs-subscription-details-placeholder-content .placeholder:focus{outline:none}.sqs-subscription-details-placeholder-content .placeholder:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-subscription-details-placeholder-content .placeholder:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-subscription-details-placeholder-content .placeholder .details-text{float:left}.sqs-subscription-details-placeholder-content .placeholder .details-text::first-letter{text-transform:uppercase}.sqs-subscription-details-placeholder-content .placeholder .prompt{position:absolute;right:0;top:0;padding:11px 22px;background-color:#e4e4e4;font-size:11px;letter-spacing:.5px;text-transform:uppercase;cursor:pointer;font-weight:500;transition:background-color .1s ease-in-out}.sqs-subscription-details-placeholder-content .placeholder .prompt:hover{background-color:#d0d0d0}.sqs-file{height:auto;width:auto;transition:height .4s cubic-bezier(.645,.045,.355,1)}.sqs-file-hidden{display:none}.sqs-file.sqs-dialog-field-label-plugged label.sqs-dialog-field-label{display:block}.sqs-file .sqs-dialog-field-label{font-weight:500}.sqs-file .sqs-uploader,.sqs-file .sqs-uploader-content{position:absolute !important;top:0;left:0;bottom:0;right:0}.sqs-file.has-file .sqs-uploader,.sqs-file.has-preview .sqs-uploader,.sqs-file.has-error .sqs-uploader,.sqs-file .progress-show-meter .sqs-uploader{visibility:hidden}.sqs-file .progress-show-meter .sqs-file-preview{visibility:hidden}.sqs-file-content,.sqs-file-image .sqs-file-image-content,.sqs-file-audio-processing .sqs-file-audio-processing-content{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;height:100%;width:100% !important}.sqs-file-content.drop-active,.sqs-file-image .sqs-file-image-content.drop-active,.sqs-file-audio-processing .sqs-file-audio-processing-content.drop-active{background:rgba(0,0,0,.045);position:relative}.sqs-file-content.drop-active:after,.sqs-file-image .sqs-file-image-content.drop-active:after,.sqs-file-audio-processing .sqs-file-audio-processing-content.drop-active:after{content:' ';background:rgba(0,0,0,.045);position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none}.sqs-file-content:focus,.sqs-file-image .sqs-file-image-content:focus,.sqs-file-audio-processing .sqs-file-audio-processing-content:focus{outline:none}.sqs-file-content.data-loading,.sqs-file-image .sqs-file-image-content.data-loading,.sqs-file-audio-processing .sqs-file-audio-processing-content.data-loading{border-color:transparent;background-color:transparent}.sqs-file .sqs-file-preview{text-align:center}.sqs-file .sqs-file-preview .file-meta{display:block}.sqs-file .sqs-file-preview .file-meta-icon{height:32px;width:32px;margin:0 auto 22px;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/file-32-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-file .sqs-file-preview .file-meta-icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/file-64-dark.png');background-size:32px}}.sqs-file .sqs-file-preview .file-meta-icon-audio-processing{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/audio-32-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-file .sqs-file-preview .file-meta-icon-audio-processing{background-image:url('//assets.squarespace.com/universal/images-v6/damask/audio-64-dark.png');background-size:32px}}.sqs-file .sqs-file-preview .file-meta-name{overflow:hidden;max-height:66px}.sqs-file .sqs-file-preview .file-meta-size{color:#a1a1a1}.sqs-file .progress-container,.sqs-content-item-image-content .progress-container{height:100%;width:100%;position:absolute;top:0;left:0}@media screen and (min-width: 433px){.sqs-file .progress-container,.sqs-content-item-image-content .progress-container{display:table}}@media screen and (max-width: 432px){.sqs-file .progress-container,.sqs-content-item-image-content .progress-container{display:flex;align-items:center;justify-content:center}}@media screen and (min-width: 433px){.sqs-file .progress-container .progress,.sqs-content-item-image-content .progress-container .progress{display:table-cell;vertical-align:middle;text-align:center}}@media screen and (max-width: 432px){.sqs-file .progress-container .progress,.sqs-content-item-image-content .progress-container .progress{width:100%}}.sqs-file .progress-container .spinner,.sqs-content-item-image-content .progress-container .spinner,.sqs-file .progress-container .bar,.sqs-content-item-image-content .progress-container .bar{display:none}.sqs-file .progress-container .spinner.visible,.sqs-content-item-image-content .progress-container .spinner.visible,.sqs-file .progress-container .bar.visible,.sqs-content-item-image-content .progress-container .bar.visible{display:inline-block}@media screen and (max-width: 432px){.sqs-file .progress-container .spinner,.sqs-content-item-image-content .progress-container .spinner{text-align:center}}.sqs-file .progress-container .bar,.sqs-content-item-image-content .progress-container .bar{height:8px;border:1px solid #666;border-radius:5px;margin:0 auto;transition:opacity .35s ease-in;position:relative;width:65%;background:#666;display:none;overflow:hidden}.sqs-file .progress-container .bar.visible,.sqs-content-item-image-content .progress-container .bar.visible{display:block}.sqs-file .progress-container .bar-inner,.sqs-content-item-image-content .progress-container .bar-inner{width:0;background:#eee;height:8px;border-radius:5px;position:relative;top:0;left:-5%}.sqs-file .progress-container .cancel-process,.sqs-content-item-image-content .progress-container .cancel-process{display:none;font-size:11px;line-height:1em;color:#888;margin-top:16px;cursor:pointer}.sqs-file .progress-container .cancel-process:hover,.sqs-content-item-image-content .progress-container .cancel-process:hover{color:#555}.sqs-file .progress-container .cancel-process.visible,.sqs-content-item-image-content .progress-container .cancel-process.visible{display:block}.sqs-block-image-content .cancel-process{cursor:pointer}.sqs-file-image-hidden,.sqs-file-audio-processing-hidden{display:none}.sqs-file-image .sqs-file-image-external-image-picker,.sqs-file-audio-processing .sqs-file-image-external-image-picker{display:none}.sqs-file-image .progress .container.sync,.sqs-file-audio-processing .progress .container.sync{background:transparent}.sqs-file-image-preview,.sqs-file-audio-processing-preview{position:absolute;top:0;left:0;bottom:0;right:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sqs-file-image-preview img,.sqs-file-audio-processing-preview img{max-height:100%;max-width:100%}.sqs-file-image .processing-failed,.sqs-file-audio-processing .processing-failed{position:absolute;top:0;left:0;bottom:0;right:0;font-family:'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif}.sqs-file-image .processing-failed p,.sqs-file-audio-processing .processing-failed p{position:absolute;top:23%;left:10%;right:10%;text-align:center;line-height:1.68em;font-size:12px}.sqs-file-image .processing-failed p strong,.sqs-file-audio-processing .processing-failed p strong{font-size:16px}.sqs-file-image .processing-failed p a,.sqs-file-audio-processing .processing-failed p a{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;background-color:#e5e5e5;color:#111;padding:5px 10px;margin-top:12px;text-decoration:none}.sqs-file-image .processing-failed p a a,.sqs-file-audio-processing .processing-failed p a a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}.sqs-file-image .processing-failed p a:hover a,.sqs-file-audio-processing .processing-failed p a:hover a{color:#fff}.sqs-file-image .processing-failed p a:focus,.sqs-file-audio-processing .processing-failed p a:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-file-image .processing-failed p a:hover a,.sqs-file-audio-processing .processing-failed p a:hover a{color:#111}.sqs-file-image .processing-failed p a a,.sqs-file-audio-processing .processing-failed p a a{color:#222}.sqs-file-image .processing-failed p a:focus,.sqs-file-audio-processing .processing-failed p a:focus{outline:none;color:#111;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-file-image .processing-failed .icon.icon-processing-failed,.sqs-file-audio-processing .processing-failed .icon.icon-processing-failed{background:url('/universal/images-v6/settings/warning-icon-gray.png') center center;width:18px;height:18px;position:absolute;top:30%;left:50%;margin-left:-9px}.sqs-file-image .processing-longer-than-expected,.sqs-file-audio-processing .processing-longer-than-expected{position:absolute;top:50%;left:0;margin-top:0px;width:100%}.sqs-file-image .processing-longer-than-expected a,.sqs-file-audio-processing .processing-longer-than-expected a{cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:5px 10px;margin-top:12px;text-decoration:none;display:inline-block;border-radius:2px;color:#fff !important}.sqs-file-image .processing-longer-than-expected a,.sqs-file-audio-processing .processing-longer-than-expected a,.sqs-file-image .processing-longer-than-expected a>*,.sqs-file-audio-processing .processing-longer-than-expected a>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-file-image .processing-longer-than-expected a:hover,.sqs-file-audio-processing .processing-longer-than-expected a:hover{background-color:#d0d0d0;box-shadow:none}.sqs-file-image .processing-longer-than-expected a.disabled,.sqs-file-audio-processing .processing-longer-than-expected a.disabled{opacity:.3;cursor:default}.sqs-file-image .processing-longer-than-expected a.disabled>*,.sqs-file-audio-processing .processing-longer-than-expected a.disabled>*{opacity:.5}.sqs-file-image .processing-longer-than-expected a.disabled:hover,.sqs-file-audio-processing .processing-longer-than-expected a.disabled:hover{background-color:#e4e4e4 !important}.sqs-file-image .processing-longer-than-expected a.disabled,.sqs-file-audio-processing .processing-longer-than-expected a.disabled{opacity:.5}.sqs-file-image .processing-longer-than-expected p,.sqs-file-audio-processing .processing-longer-than-expected p{margin:0;line-height:1.68em;font-size:12px;text-align:center}.sqs-file-image.processing-taking-longer .progress-container,.sqs-file-audio-processing.processing-taking-longer .progress-container{position:absolute;display:block;width:auto;height:auto;margin-bottom:10px;top:50%;margin-top:-45px;left:50%;margin-left:-15px}.sqs-file-image.processing-taking-longer .progress-container .progress,.sqs-file-audio-processing.processing-taking-longer .progress-container .progress{display:block;margin:auto}.sqs-file-image-content.loaded,.sqs-file-audio-processing-content.loaded,.sqs-file-image-content.data-loading,.sqs-file-audio-processing-content.data-loading,.sqs-file-image-content.image-loading,.sqs-file-audio-processing-content.image-loading{border-color:transparent;background-color:transparent}.sqs-file-image-external-image-picker,.sqs-file-audio-processing-external-image-picker{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/search-dark.png') center center no-repeat;opacity:.2;height:44px;width:44px;position:absolute;bottom:0;right:0;transition:opacity .2s ease-in-out;cursor:pointer}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-file-image-external-image-picker,.sqs-file-audio-processing-external-image-picker{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-dark@2x.png');background-size:16px}}.sqs-file-image-external-image-picker:hover,.sqs-file-audio-processing-external-image-picker:hover{opacity:1}.dialog-editor-block-image .sqs-file-image-getty.processing-longer-than-expected,.dialog-editor-block-image .sqs-file-image-getty.processing-taking-longer{padding-bottom:0}.sqs-file-audio-processing .sqs-file-audio-processing-content.progress-show-meter .sqs-file-audio-processing-preview{visibility:hidden}.sqs-file-audio-processing .sqs-file-audio-processing-content .sqs-file-audio-processing-preview{margin-top:5px}.sqs-file-audio-processing .sqs-file-audio-processing-content:hover .sqs-file-audio-processing-preview{margin-right:50px}.standard-dialog-wrapper .split-field>.sqs-file{padding-right:0}.sqs-settings-panel .sqs-file-image-content,.dialog-taxonomy .sqs-file-image-content,.sqs-dialog-field-tweak-image-dialog .sqs-file-image-content{border:none;background:#fff}.sqs-settings-panel .sqs-file-image-content.loaded,.dialog-taxonomy .sqs-file-image-content.loaded,.sqs-dialog-field-tweak-image-dialog .sqs-file-image-content.loaded{background:none}.sqs-settings-panel .sqs-file-image-content.loaded img,.dialog-taxonomy .sqs-file-image-content.loaded img,.sqs-dialog-field-tweak-image-dialog .sqs-file-image-content.loaded img{border:solid 1px #fff;box-shadow:#d3d3d3 0px 0px 14px}.sqs-settings-panel .sqs-file-image-preview,.dialog-taxonomy .sqs-file-image-preview,.sqs-dialog-field-tweak-image-dialog .sqs-file-image-preview{top:10px;left:10px;bottom:10px;right:10px}.sqs-settings-panel .sqs-file-image-preview img,.dialog-taxonomy .sqs-file-image-preview img,.sqs-dialog-field-tweak-image-dialog .sqs-file-image-preview img{border:solid 1px #fff;border-radius:0px}.dialog-field-feature-gate-menu{margin-left:-33px;margin-right:-33px;margin-top:-22px}.sqs-image-picker{position:fixed;top:0;left:0;bottom:0;right:0;overflow-y:scroll;background:#222 url('/universal/images-v6/configuration/blk-noise.png');padding:40px;z-index:100000;font-family:\"HelveticaNeue-Light\",\"Helvetica Neue Light\",\"Helvetica Neue\",Helvetica,Arial,\"Lucida Grande\",sans-serif;font-size:18px;line-height:24px;color:#fff}.sqs-image-picker-content:not(.has-size-info) .size-visualizer,.sqs-image-picker-content:not(.has-size-info) .dimensions{display:none}.sqs-image-picker.data-state-loading{cursor:wait}.sqs-image-picker.data-state-loading .sqs-spin{display:block}.sqs-image-picker.sqs-image-picker-hidden{display:none}.sqs-image-picker .sqs-spin{display:none;margin:60px auto}.sqs-image-picker .size-visualizer{position:fixed;top:0;left:0;border-radius:2px 0 0 0;z-index:100055}.sqs-image-picker .size-visualizer .ruler{position:absolute;z-index:100058;top:0;left:0;transition:all .5s ease-in-out;background-color:#fff;height:0;width:0}.sqs-image-picker .size-visualizer .ruler.width{border-top:2px solid #fff}.sqs-image-picker .size-visualizer .ruler.height{border-left:2px solid #fff}.sqs-image-picker .size-visualizer .label{position:fixed;font-size:12px;z-index:100060;transition:all .5s ease-in-out;text-shadow:1px 1px rgba(0,0,0,.9)}.sqs-image-picker .size-visualizer .label.width{top:2px;left:0}.sqs-image-picker .size-visualizer .label.height{top:0;left:10px}.sqs-image-picker .header{position:relative;text-align:center;color:#ccc;height:52px}.sqs-image-picker .header:hover{color:#fff}.sqs-image-picker .header:after{content:' '}.sqs-image-picker .header .instructions{display:inline;padding-right:5px}.sqs-image-picker .header .controls{position:absolute;right:0;top:0}.sqs-image-picker .header .controls .cancel,.sqs-image-picker .header .controls .confirm{padding:5px 10px;font-size:14px !important}.sqs-image-picker .header .controls .cancel{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;margin-right:10px}.sqs-image-picker .header .controls .cancel a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}.sqs-image-picker .header .controls .cancel:hover a{color:#fff}.sqs-image-picker .header .controls .cancel:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-image-picker .header .controls .confirm{display:inline-block;cursor:pointer;border-radius:20px;border:0;background-color:#272727;color:#eee;font:400 11px / 14px 'proxima-nova','Helvetica Neue',Helvetica,Arial,sans-serif;background-color:#e5e5e5;color:#111}.sqs-image-picker .header .controls .confirm a{padding:7px 15px 7px;display:inline-block;color:#eee;text-decoration:none;border-bottom:0}.sqs-image-picker .header .controls .confirm:hover a{color:#fff}.sqs-image-picker .header .controls .confirm:focus{outline:none;color:#ddd;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-image-picker .header .controls .confirm:hover a{color:#111}.sqs-image-picker .header .controls .confirm a{color:#222}.sqs-image-picker .header .controls .confirm:focus{outline:none;color:#111;box-shadow:0 0 0 1px rgba(0, 0, 0, .1), 0 0 0 2px  #42b1ff}.sqs-image-picker .information{text-align:center}.sqs-image-picker .information .error{margin-top:20px;opacity:.8;font-size:14px}.sqs-image-picker .images{position:relative;margin:auto;line-height:0;zoom:1;z-index:100050}.sqs-image-picker .images:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-image-picker .images:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-image-picker .preview{position:relative;cursor:pointer;float:left;padding:15px;z-index:100150}.sqs-image-picker .preview:hover{background-color:#333}.sqs-image-picker .preview.selected{background-color:#000}.sqs-image-picker .preview:hover,.sqs-image-picker .preview.selected{padding:14px;border-radius:3px;border:1px solid #ddd}.sqs-image-picker .preview:hover .select-button,.sqs-image-picker .preview.selected .select-button{display:block}.sqs-image-picker .preview:hover .dimensions,.sqs-image-picker .preview.selected .dimensions{opacity:0}.sqs-image-picker .preview .dimensions{transition:opacity .3s ease-in-out;position:absolute;bottom:6px;left:56px;z-index:100250;text-align:center;white-space:nowrap;border-radius:4px;background-color:#080808;background-image:linear-gradient(#3c3c3c,#080808);box-shadow:0 0 0 1px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.15), inset 1px 0 0 0 rgba(255,255,255,0.1), inset -1px 0 0 0 rgba(255,255,255,0.1), 0 2px 10px rgba(0,0,0,0.2);padding:6px 8px 4px 8px;overflow:hidden;color:#eee;font-size:12px;height:12px;opacity:.8}.sqs-image-picker .preview .dimensions.loading{display:none}.sqs-image-picker .preview .dimensions span{position:relative;top:4px;font-size:12px}.sqs-image-picker .preview .image-wrapper{position:relative;cursor:pointer;height:182px;width:182px;overflow:hidden;box-sizing:border-box}.sqs-image-picker .preview .image-underlay{width:182px;height:182px;position:relative}.sqs-image-picker .preview img{opacity:1;transition:opacity .3s ease-in-out}.sqs-image-picker .preview img.loading{opacity:0}.sqs-image-picker .pagination{margin-top:40px}.sqs-image-picker .pagination .prev.hidden,.sqs-image-picker .pagination .next.hidden{display:none}.sqs-form-builder .add-field-button{cursor:pointer;position:relative;background-color:#e4e4e4;transition:all .2s ease-in-out;padding:11px;text-align:center}.sqs-form-builder .add-field-button:hover{background-color:#d0d0d0}.sqs-form-builder .type-icon{position:absolute;top:0;left:0;width:100%;height:100%;background:url(\"/universal/images-v6/damask/add-dark.png\") center no-repeat;opacity:.3;transition:all .2s ease-in-out}.sqs-form-builder-field{margin-bottom:5.5px}.sqs-form-builder-field-content{position:relative}.sqs-form-builder-field-content .field-control-bar{align-items:center;display:flex;background:#e4e4e4}.sqs-form-builder-field-content .field-control-bar input{padding:5.5px;height:33px;background:transparent;transition:background .1s ease-in-out}.sqs-form-builder-field-content .field-control-bar input:hover{background:rgba(255,255,255,.5)}.sqs-form-builder-field-content .field-control-bar input:focus{background:#fff}.sqs-form-builder-field-content .editor-wrapper{padding:11px;border:1px solid #e4e4e4;background:#f6f6f6}.sqs-form-builder-field-content .sqs-dialog-field:first-child{margin-top:0}.sqs-form-builder-field-content .sqs-dialog-field:last-child{margin-bottom:0}.sqs-form-builder-field-content .edit-field{background:rgba(0,0,0,.1);text-align:center;cursor:pointer;text-transform:uppercase;font-size:11px;letter-spacing:.5px;font-weight:500;border-radius:3px;padding:0 8px}.sqs-form-builder-field-content .remove-field{height:44px;width:44px;text-indent:-9000px;overflow:hidden;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-dark.png') center center no-repeat;cursor:pointer}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .remove-field{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-dark@2x.png');background-size:9px 11px}}.sqs-form-builder-field-content .remove-field:hover{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .remove-field:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red@2x.png');background-size:9px 11px}}.sqs-form-builder-field-content .field-drag-handle{height:44px;width:22px;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/handle.png') center center no-repeat;opacity:.2;cursor:ns-resize}.sqs-form-builder-field-content .field-type-icon{height:33px;width:8%;background-position:center;background-repeat:no-repeat;background-size:16px;opacity:.8}.sqs-form-builder-field-content .field-type-icon.text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textbox-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.text{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textbox-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.email{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.email{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.textarea{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textarea-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.textarea{background-image:url('//assets.squarespace.com/universal/images-v6/damask/textarea-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.select{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropdown-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.select{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropdown-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.checkbox{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkbox-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.checkbox{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkbox-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.radio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/radio-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.radio{background-image:url('//assets.squarespace.com/universal/images-v6/damask/radio-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.likert{background-image:url('//assets.squarespace.com/universal/images-v6/damask/scale-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.likert{background-image:url('//assets.squarespace.com/universal/images-v6/damask/scale-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.name{background-image:url('//assets.squarespace.com/universal/images-v6/damask/person-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.name{background-image:url('//assets.squarespace.com/universal/images-v6/damask/person-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.password{background-image:url('//assets.squarespace.com/universal/images-v6/damask/password-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.password{background-image:url('//assets.squarespace.com/universal/images-v6/damask/password-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.address{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.address{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.website{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.website{background-image:url('//assets.squarespace.com/universal/images-v6/damask/link-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.date{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.date{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.time{background-image:url('//assets.squarespace.com/universal/images-v6/damask/clock-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.time{background-image:url('//assets.squarespace.com/universal/images-v6/damask/clock-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.phone{background-image:url('//assets.squarespace.com/universal/images-v6/damask/phone-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.phone{background-image:url('//assets.squarespace.com/universal/images-v6/damask/phone-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.number{background-image:url('//assets.squarespace.com/universal/images-v6/damask/number-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.number{background-image:url('//assets.squarespace.com/universal/images-v6/damask/number-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.currency{background-image:url('//assets.squarespace.com/universal/images-v6/damask/currency-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.currency{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dollars-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.section{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.section{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.hidden{background-image:url('//assets.squarespace.com/universal/images-v6/damask/eye-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.hidden{background-image:url('//assets.squarespace.com/universal/images-v6/damask/eye-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-type-icon.twitter{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-16-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-form-builder-field-content .field-type-icon.twitter{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-32-dark.png');background-size:16px}}.sqs-form-builder-field-content .field-title{flex:1 1 auto;padding:0 8px 0 0}.sqs-form-builder-field-content .field-controls{align-items:center;display:flex}.sqs-text-area textarea{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;height:100%;resize:vertical}.sqs-text-area textarea:focus{outline:none}.sqs-form-selector .loading-state{margin-top:22px !important;text-align:center;display:none}.sqs-form-selector .loading-state .spinner,.sqs-form-selector .loading-state .text{display:inline-block;vertical-align:top}.sqs-form-selector .loading-state .text{line-height:24px;margin-left:11px}.sqs-form-selector.content-loading .loading-state{display:block}.sqs-form-selector.content-loading .no-form,.sqs-form-selector.content-loading .form,.sqs-form-selector.content-loading .add-form{display:none}.sqs-form-selector .no-form,.sqs-form-selector .form{cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:block;margin-bottom:11px;text-align:left;position:relative}.sqs-form-selector .no-form,.sqs-form-selector .form,.sqs-form-selector .no-form>*,.sqs-form-selector .form>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-form-selector .no-form:hover,.sqs-form-selector .form:hover{background-color:#d0d0d0;box-shadow:none}.sqs-form-selector .no-form.disabled,.sqs-form-selector .form.disabled{opacity:.3;cursor:default}.sqs-form-selector .no-form.disabled>*,.sqs-form-selector .form.disabled>*{opacity:.5}.sqs-form-selector .no-form.disabled:hover,.sqs-form-selector .form.disabled:hover{background-color:#e4e4e4 !important}.sqs-form-selector .no-form.disabled,.sqs-form-selector .form.disabled{opacity:.5}.sqs-form-selector .no-form.selected,.sqs-form-selector .form.selected{background-color:rgba(0,0,0,.15)}.sqs-form-selector .no-form .edit,.sqs-form-selector .form .edit{position:absolute;right:11px;top:11px;font-size:10px;background:#3e3e3e;color:#fff !important;padding:0 11px}.sqs-form-selector .form{cursor:pointer}.add-form{cursor:pointer;outline:none;background:#3e3e3e;padding:11px;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-align:center}.add-form,.add-form>*{color:#fff !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.add-form:hover{background-color:#000;box-shadow:none}.add-form.disabled{opacity:.3;cursor:default}.add-form.disabled>*{opacity:.5}.add-form.disabled:hover{background-color:#3e3e3e !important}.add-form .title,.add-form .title-text{text-transform:inherit;font-weight:inherit;letter-spacing:inherit}.dialog-editor-block-form .sqs-dialog-field{width:auto !important}.sqs-email-service-connect-content .text,.sqs-email-service-connect-content .icon{display:none}.sqs-email-service-connect-content .fields{position:absolute;width:65%;height:100%;left:18px}.sqs-email-service-connect-content .fields .sqs-dialog-field.sqs-text.name-address{position:relative;top:15px;margin-top:0}.sqs-email-service-connect-content .fields .sqs-dialog-field.sqs-text.name-address .title{font-weight:bold;font-size:11px}.sqs-email-service-connect-content .fields .sqs-dialog-field.sqs-text.name-address input,.sqs-email-service-connect-content .fields .sqs-dialog-field.sqs-text.name-address input:focus{background:#fff;border-color:transparent;color:#3e3e3e;height:31px;font-size:13px}.sqs-email-service-connect-content .connect,.sqs-email-service-connect-content .icon{cursor:pointer}.sqs-email-service-connect-content .connect{position:absolute;right:22px;top:35px;padding:5.5px 22px;color:#3e3e3e;background:#d0d0d0}.sqs-email-service-connect-content.connected .text,.sqs-email-service-connect-content.connected .icon{display:block}.sqs-email-service-connect-content.connected .fields,.sqs-email-service-connect-content.connected .connect{display:none}.sqs-service-connect-content{border-left:solid 3px transparent;position:relative;height:88px;margin:0 auto;-webkit-perspective:1000;-moz-perspective:1000;transition-duration:.3s}.sqs-service-connect-content .sqs-content-inner{height:100%}.sqs-service-connect-content .sqs-content-inner .text{position:absolute;top:22px;left:20px;max-width:80%}.sqs-service-connect-content .sqs-content-inner .text .title{color:#3e3e3e;font-size:12px;font-weight:500;text-transform:uppercase;word-break:break-all}.sqs-service-connect-content .sqs-content-inner .text .message{font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-service-connect-content .sqs-content-inner .icon{position:absolute;right:13px;top:34px;background-repeat:no-repeat;background-position:center center;border-radius:20px;height:23px;width:23px}.sqs-service-connect-content.connected,.sqs-service-connect-content.not-connected,.sqs-service-connect-content.in-progress{color:#a1a1a1;background-color:#e4e4e4}.sqs-service-connect-content.not-connected .icon{background-image:url(/universal/images-v6/settings/connect-icon.png)}.sqs-service-connect-content.in-progress{border-left-color:#fce713}.sqs-service-connect-content.in-progress .icon{background-image:url(/universal/images-v6/icons/icon_close_7_light.png);background-color:#3e3e3e}.sqs-service-connect-content.connected{border-left-color:#35d297}.sqs-service-connect-content.connected .icon{background-image:url(/universal/images-v6/icons/icon_close_7_light.png);background-color:#3e3e3e}.sqs-zapier-service-connect-content .icon{cursor:pointer}.sqs-zapier-service-connect-content.not-connected{cursor:pointer}.sqs-zapier-service-connect-content.not-connected .message{display:none}.sqs-zapier-service-connect-content.not-connected .icon{filter:invert(100%)}.sqs-zapier-service-connect-content.connected .connect{display:none}.sqs-dialog-item-push{padding-right:33px;width:100% !important}.sqs-dialog-item-push-content{margin-top:22px;position:relative}.sqs-dialog-item-push-content .accounts{display:table;table-layout:fixed;width:100%}.sqs-dialog-item-push .instructions{margin-left:auto;margin-right:auto}.sqs-dialog-item-push .instructions .add-account{cursor:pointer;outline:none;background:#e4e4e4;padding:11px;text-align:center;transition:background-color .1s ease-in-out, opacity .1s ease-in-out;line-height:22px;-webkit-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none}.sqs-dialog-item-push .instructions .add-account,.sqs-dialog-item-push .instructions .add-account>*{color:#3e3e3e !important;-webkit-appearance:none;border:0;text-transform:uppercase;outline:none;letter-spacing:.5px;font-size:11px;font-weight:500}.sqs-dialog-item-push .instructions .add-account:hover{background-color:#d0d0d0;box-shadow:none}.sqs-dialog-item-push .instructions .add-account.disabled{opacity:.3;cursor:default}.sqs-dialog-item-push .instructions .add-account.disabled>*{opacity:.5}.sqs-dialog-item-push .instructions .add-account.disabled:hover{background-color:#e4e4e4 !important}.sqs-dialog-item-push .already-pushed-msg{cursor:pointer;position:absolute;padding:12px 0 0 20px}.sqs-dialog-item-push .already-pushed-msg .service-name{text-transform:capitalize}.sqs-dialog-item-push .account{display:table-row;width:100%}.sqs-dialog-item-push .account .u-structured-input-preview{margin-top:5.5px;max-width:450px;max-height:0px;opacity:0;overflow-y:hidden;transition:all .4s cubic-bezier(.645,.045,.355,1);word-break:break-all}.sqs-dialog-item-push .account.pushing .u-structured-input-preview{max-height:176px;opacity:1}.sqs-dialog-item-push .account.pushed .yui3-togglebutton{visibility:hidden}.sqs-dialog-item-push .account.pushed .format{display:none}.sqs-dialog-item-push .account.pushed .desc{display:none}.sqs-dialog-item-push .account:not(.pushed) .already-pushed-msg{display:none}.sqs-dialog-item-push .account:not(.pushing) .format{opacity:0}.sqs-dialog-item-push .account .format,.sqs-dialog-item-push .account .desc{display:table-cell;padding-left:20px;vertical-align:middle}.sqs-dialog-item-push .account .sqs-connected-account,.sqs-dialog-item-push .account .sqs-toggle-button{display:inline-block;padding-top:11px;padding-left:0;vertical-align:top}.sqs-dialog-item-push .account .sqs-toggle-button-content{padding-top:5.5px}.sqs-dialog-item-push .account .desc{max-width:200px;padding-right:0;line-height:22px}.sqs-dialog-item-push .account .format{width:60%;padding-left:40px;transition:opacity .3s ease-out}.sqs-dialog-item-push .account .format .sqs-structured-input-field{margin-top:-11px;margin-bottom:0}.sqs-dialog-item-push .account .sqs-toggle-button{padding-left:44px}.sqs-dialog-item-push .account .sqs-connected-account{border:none;margin-left:0;position:relative;width:250px}.sqs-dialog-item-push .account .sqs-connected-account:hover{background-color:transparent}.sqs-dialog-item-push .account .sqs-connected-account .names{overflow:hidden;max-width:240px;text-overflow:ellipsis;white-space:nowrap}.sqs-dialog-item-push .account .sqs-connected-account .user,.sqs-dialog-item-push .account .sqs-connected-account .service{margin-left:55px}.sqs-dialog-item-push .account .sqs-connected-account .icon{top:auto}.sqs-connected-account{padding:22px 33px;margin-left:-33px;margin-right:-33px;position:relative;cursor:pointer;box-sizing:border-box;border-top:1px solid #e4e4e4}.sqs-connected-account:hover{background-color:#e4e4e4}.sqs-connected-account:last-child{border-bottom:1px solid #e4e4e4}.sqs-connected-account .user{font-size:16px}.sqs-connected-account .service{font-size:11px;color:#797979;padding-left:27.5px}.sqs-connected-account .service:before{content:' ';height:22px;width:22px;position:absolute;margin-left:-27.5px}.sqs-connected-account .service.facebook:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/facebook-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.facebook:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/facebook-64-dark.png');background-size:16px}}.sqs-connected-account .service.twitter:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/twitter-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.twitter:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-64-dark.png');background-size:16px}}.sqs-connected-account .service.google:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/googleplus-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.google:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplus-64-dark.png');background-size:16px}}.sqs-connected-account .service.googlesearchconsole:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/google-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.googlesearchconsole:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/google-64.png');background-size:16px}}.sqs-connected-account .service.tumblr:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/tumblr-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.tumblr:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tumblr-64-dark.png');background-size:16px}}.sqs-connected-account .service.dropbox2017:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/dropbox-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.dropbox2017:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dropbox-64.png');background-size:16px}}.sqs-connected-account .service.foursquare:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/foursquare-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.foursquare:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/foursquare-64-dark.png');background-size:16px}}.sqs-connected-account .service.instagram:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/instagram-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.instagram:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/instagram-64-dark.png');background-size:16px}}.sqs-connected-account .service.flickr:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/flickr-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.flickr:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-64-dark.png');background-size:16px}}.sqs-connected-account .service.youtube:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/youtube-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.youtube:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/youtube-64-dark.png');background-size:16px}}.sqs-connected-account .service.vimeo:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/vimeo-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.vimeo:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vimeo-64-dark.png');background-size:16px}}.sqs-connected-account .service.linkedin:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/linkedin-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.linkedin:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/linkedin-64-dark.png');background-size:16px}}.sqs-connected-account .service.dribbble:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/dribbble-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.dribbble:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dribbble-64-dark.png');background-size:16px}}.sqs-connected-account .service.pinterest:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/pinterest-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.pinterest:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/pinterest-64-dark.png');background-size:16px}}.sqs-connected-account .service.smugmug:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/smugmug-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.smugmug:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/smugmug-64-dark.png');background-size:16px}}.sqs-connected-account .service.fivehundredpix:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/500px-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.fivehundredpix:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-64-dark.png');background-size:16px}}.sqs-connected-account .service.email:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/email-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.email:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-64-dark.png');background-size:16px}}.sqs-connected-account .service.github:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/github-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.github:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/github-64-dark.png');background-size:16px}}.sqs-connected-account .service.soundcloud:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.soundcloud:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-64-dark.png');background-size:16px}}.sqs-connected-account .service.spotify:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/spotify-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.spotify:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spotify-64-dark.png');background-size:16px}}.sqs-connected-account .service.googleplay:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/googleplay-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.googleplay:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplay-64-dark.png');background-size:16px}}.sqs-connected-account .service.itunes:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/itunes-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.itunes:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/itunes-64-dark.png');background-size:16px}}.sqs-connected-account .service.bandsintown:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.bandsintown:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-64-dark.png');background-size:16px}}.sqs-connected-account .service.behance:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/behance-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.behance:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/behance-32@2x.png');background-size:16px}}.sqs-connected-account .service.codepen:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/codepen-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.codepen:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/codepen-32@2x.png');background-size:16px}}.sqs-connected-account .service.medium:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/medium-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.medium:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/medium-64-dark.png');background-size:16px}}.sqs-connected-account .service.meetup:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/meetup-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.meetup:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/meetup-32@2x.png');background-size:16px}}.sqs-connected-account .service.rdio:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/rdio-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.rdio:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/rdio-32@2x.png');background-size:16px}}.sqs-connected-account .service.twitch:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/twitch-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.twitch:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitch-32@2x.png');background-size:16px}}.sqs-connected-account .service.vevo:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/vevo-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.vevo:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vevo-32@2x.png');background-size:16px}}.sqs-connected-account .service.vine:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/vine-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.vine:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vine-32@2x.png');background-size:16px}}.sqs-connected-account .service.vsco:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/vsco-32-dark.png?3') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.vsco:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vsco-64-dark.png?3');background-size:16px}}.sqs-connected-account .service.yelp:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/yelp-32.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.yelp:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/yelp-32@2x.png');background-size:16px}}.sqs-connected-account .service.flickr:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/flickr-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.flickr:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-64-dark.png');background-size:16px}}.sqs-connected-account .service.youtube:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/youtube-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.youtube:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/youtube-64-dark.png');background-size:16px}}.sqs-connected-account .service.vimeo:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/vimeo-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.vimeo:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/vimeo-64-dark.png');background-size:16px}}.sqs-connected-account .service.linkedin:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/linkedin-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.linkedin:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/linkedin-64-dark.png');background-size:16px}}.sqs-connected-account .service.dribbble:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/dribbble-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.dribbble:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/dribbble-64-dark.png');background-size:16px}}.sqs-connected-account .service.pinterest:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/pinterest-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.pinterest:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/pinterest-64-dark.png');background-size:16px}}.sqs-connected-account .service.smugmug:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/smugmug-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.smugmug:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/smugmug-64-dark.png');background-size:16px}}.sqs-connected-account .service.fivehundredpix:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/500px-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.fivehundredpix:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-64-dark.png');background-size:16px}}.sqs-connected-account .service.email:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/email-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.email:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/email-64-dark.png');background-size:16px}}.sqs-connected-account .service.github:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/github-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.github:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/github-64-dark.png');background-size:16px}}.sqs-connected-account .service.soundcloud:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.soundcloud:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-64-dark.png');background-size:16px}}.sqs-connected-account .service.spotify:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/spotify-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.spotify:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spotify-64-dark.png');background-size:16px}}.sqs-connected-account .service.googleplay:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/googleplay-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.googleplay:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/googleplay-64-dark.png');background-size:16px}}.sqs-connected-account .service.itunes:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/itunes-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.itunes:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/itunes-64-dark.png');background-size:16px}}.sqs-connected-account .service.houzz:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/houzz-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.houzz:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/houzz-64-dark.png');background-size:16px}}.sqs-connected-account .service.reddit:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/reddit-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.reddit:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/reddit-64-dark.png');background-size:16px}}.sqs-connected-account .service.stumbleupon:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/stumbleupon-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.stumbleupon:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stumbleupon-64-dark.png');background-size:16px}}.sqs-connected-account .service.chownow:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/chownow-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.chownow:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chownow-64-dark.png');background-size:16px}}.sqs-connected-account .service.snapchat:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/snapchat-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.snapchat:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/snapchat-64-dark.png');background-size:16px}}.sqs-connected-account .service.imdb:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/imdb-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.imdb:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/imdb-64-dark.png');background-size:16px}}.sqs-connected-account .service.goodreads:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/goodreads-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.goodreads:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/goodreads-64-dark.png');background-size:16px}}.sqs-connected-account .service.stitcher:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/stitcher-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.stitcher:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stitcher-64-dark.png');background-size:16px}}.sqs-connected-account .service.tidal:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/tidal-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.tidal:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tidal-64-dark.png');background-size:16px}}.sqs-connected-account .service.applepodcast:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/applepodcast-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.applepodcast:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/applepodcast-64-dark.png');background-size:16px}}.sqs-connected-account .service.thedots:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/thedots-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.thedots:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/thedots-64-dark.png');background-size:16px}}.sqs-connected-account .service.tripadvisor:before{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/tripadvisor-32-dark.png') center center no-repeat;background-size:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .service.tripadvisor:before{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tripadvisor-64-dark.png');background-size:16px}}.sqs-connected-account .user,.sqs-connected-account .service{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-connected-account .service{margin-left:66px;font-size:11px}.sqs-connected-account .user{margin-left:66px}.sqs-connected-account .icon{height:44px;width:44px;overflow:hidden;position:absolute;top:22px;background-color:rgba(0,0,0,.045)}.sqs-connected-account .icon.default{background:#e4e4e4 url('//assets.squarespace.com/universal/images-v6/damask/avatar-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-connected-account .icon.default{background-image:url('//assets.squarespace.com/universal/images-v6/damask/avatar-dark@2x.png');background-size:44px}}.sqs-connected-account .icon img{width:100%}.sqs-connected-account:hover .icon{background-color:#d0d0d0}.sqs-connected-account .icon,.sqs-connected-account img{border-radius:100%}.sqs-connected-account-hidden{display:none}.sqs-connected-account.yui3-dd-super-proxy-clone{left:0 !important;padding-left:33px;margin-left:0px;background-color:rgba(246,246,246,.5)}.sqs-connected-account .unauthorized-message{margin-top:22px;margin-left:66px;color:#f0523d}.sqs-connected-account .unauthorized-message a{border-color:#f0523d !important}@media screen and (max-width: 432px){.dialog-social-account-settings .button-block:nth-child(2){display:none}}.dialog-social-account-settings .button-block>input,.dialog-social-account-settings .cancel-block>a{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;line-height:20px;overflow-wrap:break-word;word-wrap:break-word}@media screen and (min-width: 433px){.dialog-social-account-settings #connectedAccountsDialogDisconnectButton{display:none}}.dialog-social-account-settings #connectedAccountsDialogDisconnectButton .sqs-button-content,.dialog-social-account-settings #connectedAccountsDialogDisconnectButton .label{color:#3e3e3e !important;background-color:#e4e4e4 !important}.sqs-error-hidden{display:none}.sqs-error .text{font-size:11px;background-color:#f0523d;color:#fff;padding:22px}.sqs-select-hidden{display:none}.sqs-select .select-facade{box-sizing:border-box;position:relative;background-color:#e4e4e4;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;transition:background-color .2s ease-in-out}.sqs-select .select-facade:focus{outline:none}.sqs-select .select-facade:hover{background-color:#d0d0d0}.sqs-select .select-facade:after{content:'';display:block;position:absolute;top:0;right:0;width:44px;height:100%;cursor:pointer;background:transparent url('/universal/images-v6/damask/chevron-down-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-select .select-facade:after{background-image:url('/universal/images-v6/damask/chevron-down-dark@2x.png');background-size:16px}}.sqs-select select{position:absolute;left:0;top:0;background:#fff;opacity:0;height:100%;width:100%;border-radius:0;cursor:pointer;z-index:2}.sqs-select .label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;padding-right:33px;width:100%}.sqs-select-disabled select,.sqs-select-disabled .select-facade:after{cursor:default}.sqs-select.sqs-select-light .select-facade{background-color:#fff;color:inherit}.sqs-select.sqs-select-light .select-facade:hover{background-color:#fff}.sqs-select.sqs-select-light .select-facade:after{background:transparent url('/universal/images-v6/damask/chevron-down-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-select.sqs-select-light .select-facade:after{background-image:url('/universal/images-v6/damask/chevron-down-dark@2x.png');background-size:16px}}.standard-dialog-wrapper .sqs-structured-input-field{padding-right:0}.sqs-structured-input-field-focus{outline:none}.sqs-structured-input-field-hidden{display:none}.switch-box{width:66px;height:33px;overflow:hidden;border-radius:100px;background-color:#a1a1a1;-webkit-user-select:none}.switch-box-container{cursor:pointer;margin-left:auto;width:66px;height:33px;-webkit-user-select:none;text-align:left}.switch-box-container .switch-shadow{height:33px;position:relative;top:-33px;border-radius:100px}.switch-box-container.active .switch-box{background-color:#35d297}.switch-box-container.active .togglebg{margin-left:33px}.switch-box-container.active .handle-wrapper .handle{left:34px}.switch-box-container.inactive .togglebg{margin-left:0}.switch-box-container .dragger{height:33px;width:100px;position:relative;top:-97px;cursor:pointer;background-color:red}.switch-box-container .handle-wrapper{cursor:pointer;height:33px;top:-65px;position:relative}.switch-box-container .handle-wrapper .handle{width:31px;height:31px;position:relative;left:1px;background-color:#eee;border-radius:100px}.switch-box-container .handle-wrapper .handle.sqs-dd-draggable{cursor:pointer}.switch-box-container.animate .toggleBackground{transition:margin-left ease-out .1s}.switch-box-container.animate .handle{transition:left ease-out .1s}.switch-box .toggle-box{margin-left:-33px;width:132px;height:33px}.switch-box .togglebg{width:132px;height:33px}.sqs-dialog-layout-wrapper{position:relative}.sqs-dialog-layout-wrapper .sqs-layout-wrapper{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;position:absolute;top:0;left:0;bottom:15px;height:100%}.sqs-dialog-layout-wrapper .sqs-layout-wrapper:focus{outline:none}.sqs-dialog-layout-wrapper .sqs-layout-wrapper.sqs-node-expander-active .sqs-layout{max-width:900px;margin:auto}.sqs-dialog-layout-wrapper .sqs-layout-wrapper .sqs-layout-scroll{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto}.sqs-dialog-layout-wrapper .sqs-layout-wrapper .sqs-layout-scroll .sqs-layout{padding:22px 33px}.sqs-dialog-layout-wrapper .sqs-loading-overlay-node{background:transparent}.sqs-dialog-layout-wrapper .add-block{background:#e4e4e4 url('//assets.squarespace.com/universal/images-v6/damask/add-dark.png') center center no-repeat;border:0;border-radius:50%;position:absolute;z-index:8000;cursor:pointer;transition:all .4s cubic-bezier(.645,.045,.355,1)}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-dialog-layout-wrapper .add-block{background-image:url('//assets.squarespace.com/universal/images-v6/damask/add-dark@2x.png');background-size:16px}}.sqs-dialog-layout-wrapper .add-block,.sqs-dialog-layout-wrapper .sqs-node-expander-active.sqs-node-expander-contracting .add-block{height:34px;width:34px;bottom:11px;right:11px}.sqs-dialog-layout-wrapper .sqs-node-expander-active .add-block{height:45px;width:45px;bottom:33px;right:33px}.sqs-dialog-layout-wrapper .sqs-recovery-bar{opacity:0;display:none;transition:.2s opacity ease;z-index:100;background-color:#f0523d;padding:11px 22px;position:absolute;width:100%;box-sizing:border-box;color:#fff}.sqs-dialog-layout-wrapper .sqs-recovery-bar .recovery-button-holder{position:absolute;top:0;right:0}.sqs-dialog-layout-wrapper .sqs-recovery-bar .recovery-button-holder .sqs-button{color:#fff !important;margin:0;line-height:44px;padding:0 22px}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown h1,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html h1{font-size:2em;margin:.67em 0}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown h2,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html h2{font-size:1.5em;margin:.83em 0}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown h3,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html h3{font-size:1.17em;margin:1em 0}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown ol,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html ol,.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown ul,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html ul{padding:0 40px}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown a,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html a,.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown a:hover,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html a:hover{color:#14aaff;border-bottom:1px solid #14aaff;text-decoration:none}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown strong,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html strong{font-weight:bold}.sqs-dialog-layout-wrapper .sqs-layout .sqs-block-markdown blockquote,.sqs-dialog-layout-wrapper .sqs-layout .sqs-html blockquote{font-style:italic;font-family:Georgia,Times,\"Times New Roman\",serif;padding-left:22px}.standard-dialog-wrapper.sqs-recovery-bar-active .sqs-recovery-bar{opacity:1;display:block}.standard-dialog-wrapper.sqs-recovery-bar-active .sqs-node-expander-wrapper{display:none}.standard-dialog-wrapper.sqs-recovery-bar-active .sqs-layout-wrapper{margin-top:44px;height:calc(100% -  44px )}.sqs-layout-insert-block-menu{outline:none;position:absolute;height:auto;opacity:1;padding:15px 5px;transform-origin:0% 50%;transition:opacity 0.15s ease-in-out}.sqs-layout-insert-block-menu:focus{outline:none}.sqs-layout-insert-block-menu-content{height:100%;width:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.08);transform:scale(1) translatez(0);transform-origin:0% 50%;transition:all .2s cubic-bezier(0.175, 0.885, 0.32, 1.15);margin-right:-1px}.sqs-layout-insert-block-menu *{font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;color:#000;font-weight:300}.sqs-layout-insert-block-menu .sqs-search input{font-weight:300;letter-spacing:.02em}.sqs-layout-insert-block-menu .sqs-dialog-field.sqs-text.name-search{margin-top:0px}.sqs-layout-insert-block-menu .sqs-dialog-field.sqs-text.name-search input{background:#fff url('//assets.squarespace.com/universal/images-v6/damask/search-dark.png') center center no-repeat;cursor:pointer;background-position:11px center;padding-left:44px;cursor:text}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-layout-insert-block-menu .sqs-dialog-field.sqs-text.name-search input{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-dark@2x.png');background-size:16px}}.sqs-layout-insert-block-menu .sqs-no-results-block{padding:10px;text-align:center;font:'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:11px !important;text-transform:uppercase;letter-spacing:.5px;font-weight:500;color:#3e3e3e;padding:22px}.sqs-layout-insert-block-menu .yui3-parent-hidden{display:none}.sqs-layout-insert-block-menu .sqs-blocklabel{height:22px;z-index:1000;margin:0 -33px;background:#e4e4e4;cursor:default;letter-spacing:1px;text-transform:uppercase;font-size:9px;font-weight:500;text-align:center;clear:both;margin:0;position:relative;padding:2px 0;background:#f0f0f0;display:flex;align-items:center;justify-content:center}.sqs-layout-insert-block-menu .sqs-blocklabel *{font-size:10px;letter-spacing:2px}.sqs-layout-insert-block-menu .sqs-blocklabel-hidden{display:none}.sqs-layout-insert-block-menu :not(.sqs-searching) .sqs-block-icon-container{padding:1%}.sqs-layout-insert-block-menu :not(.sqs-searching) .sqs-block-icon-container:after{content:\"\";display:block;clear:both}.sqs-layout-insert-block-menu .sqs-blockicon{display:inline-block;float:none;vertical-align:top;width:20%;height:auto;transition:box-shadow .4s cubic-bezier(.645,.045,.355,1)}.sqs-layout-insert-block-menu .sqs-blockicon-hidden{display:none}.sqs-layout-insert-block-menu .sqs-blockicon .sqs-blockicon-content{background-position:center 10px;opacity:.76;padding-bottom:0}.sqs-layout-insert-block-menu .sqs-blockicon .sqs-blockicon-content:hover{opacity:1}.sqs-layout-insert-block-menu .sqs-blockicon .label{margin-left:5.5px;margin-right:5.5px;margin-bottom:11px;max-height:calc(48px);overflow:hidden;padding-top:44px;position:static;line-height:16px}.sqs-layout-insert-block-menu .sqs-blockicon:hover{box-shadow:0 0 10px rgba(0,0,0,.08);z-index:1;transition:box-shadow .4s cubic-bezier(.645,.045,.355,1) .1s}.sqs-layout-insert-block-menu-hidden{opacity:0;height:0 !important;padding:0 !important;transition:opacity 0.1s ease, height 0 linear 0.1s}.sqs-layout-insert-block-menu-hidden .sqs-layout-insert-block-menu-content{transform:scale(0.6, 0)}.sqs-layout-insert-block-menu .sqs-searching .sqs-dialog-field.sqs-text.name-search{border-bottom:1px solid #e4e4e4}.sqs-layout-insert-block-menu .sqs-searching .sqs-block-icon-container{display:inline}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu{bottom:0;height:auto !important;left:auto !important;padding:0;position:fixed;right:0 !important;top:0 !important;transform:translateX(0);transition:transform .2s ease-in-out;width:300px !important}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-hidden{height:auto !important;opacity:1 !important;transform:translateX(100%);transition:transform .2s ease-in-out}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-hidden .sqs-layout-insert-block-menu-content{transform:none}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu.is-dragging{transform:translateX(85%)}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-content{overflow-y:visible;-webkit-overflow-scrolling:auto;transform:none;transform-origin:50% 50% 0;transition:all 0s ease 0s}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-icons-box{height:calc(100% - 44px);width:100%;overflow-y:auto;transition:all .2s cubic-bezier(0.175, 0.885, 0.32, 1.15);-webkit-overflow-scrolling:touch}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-header{align-items:center;background:#e4e4e4;display:flex;height:44px;justify-content:space-between}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-header-button{cursor:pointer;padding:12px}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu-header-button:hover{text-decoration:underline}html.sqs-beta-remove-insert-points .sqs-layout-insert-block-menu .sqs-blockicon{width:33.333333333333336%}html.sqs-beta-remove-insert-points .sqs-blockicon.yui3-dd-dragging{z-index:40000}.sqs-product-chooser-content .product-preview{display:none;background:#3e3e3e;height:67px;position:relative}.sqs-product-chooser-content .product-preview .thumbnail-wrapper{height:66px;width:66px;display:inline-block;vertical-align:top;overflow:hidden}.sqs-product-chooser-content .product-preview .thumbnail-wrapper img{height:100%}.sqs-product-chooser-content .product-preview .description{box-sizing:border-box;display:inline-block;padding-left:11px;vertical-align:top;width:64%;position:absolute;top:50%;transform:translatey(-50%)}.sqs-product-chooser-content .product-preview .description .text{color:#eee}.sqs-product-chooser-content .product-preview .clear-selected-wrapper{width:14%;height:100%;float:right}.sqs-product-chooser-content .product-preview .clear-selected-wrapper .clear-selected-product{height:20px;width:20px;margin:25px auto 0;cursor:pointer;background:transparent url('/universal/images-v6/icons/icon-close-9-light.png') center center no-repeat;transition:opacity .2s ease-out;opacity:.7}.sqs-product-chooser-content .product-preview .clear-selected-wrapper .clear-selected-product:hover{opacity:1}.sqs-product-chooser-content.has-data .product-preview{display:block}.sqs-product-chooser-content.no-data .product-search{display:block}.sqs-product-chooser-content .hint{font-weight:500}.sqs-product-chooser-content .product-search{position:relative;display:none}.sqs-product-chooser-content .product-search.has-icon .search-icon{display:block}.sqs-product-chooser-content .product-search.has-icon .product-search-auto-complete{margin-left:67px}.sqs-product-chooser-content .product-search.has-icon .product-search-auto-complete input{padding-left:0}.sqs-product-chooser-content .product-search.has-icon .product-search-auto-complete .sqs-scroll-ac-content{margin-left:-67px}.sqs-product-chooser-content .product-search .search-icon{display:none;background:transparent url('/universal/images-v6/damask/search-dark.png') center center no-repeat;height:67px;width:67px;position:absolute;top:0}.sqs-product-chooser-content .product-search .sqs-text{margin-top:0}.sqs-product-chooser-content .product-search .sqs-auto-complete{padding:0px}.sqs-product-chooser-content .product-search .sqs-auto-complete .ac-product{height:80px;box-sizing:border-box}.sqs-product-chooser-content .product-search .sqs-auto-complete .ac-product .thumbnail-wrapper{height:66px;width:66px;display:inline-block;vertical-align:top;overflow:hidden}.sqs-product-chooser-content .product-search .sqs-auto-complete .ac-product .thumbnail-wrapper img{height:100%}.sqs-product-chooser-content .product-search .sqs-auto-complete .ac-product .description{box-sizing:border-box;display:inline-block;padding-left:11px;vertical-align:top;width:78%}.sqs-product-chooser-content .product-search .sqs-auto-complete .ac-product .description .text{color:#222}.product-search-result-notice{position:absolute;top:44px;width:100%;z-index:3;background:#fff;box-shadow:0 4px 33px rgba(0,0,0,.22),0 0 1px rgba(0,0,0,.04)}.product-search-result-notice .notice-text{padding:11px;color:#797979;font-size:11px}.sqs-product-chooser-hidden{display:none}.sqs-dialog-field.sqs-text.sqs-auto-complete{position:relative}.sqs-dialog-field.sqs-text.sqs-auto-complete .sqs-spin{position:absolute;top:11px;right:12px;display:none}.sqs-dialog-field.sqs-text.sqs-auto-complete.querying .sqs-spin{display:block}.sqs-dialog-field.sqs-text.sqs-auto-complete .sqs-scroll-ac-aria{display:none}.sqs-dialog-field.sqs-text.sqs-auto-complete.sqs-auto-complete-hidden{display:none}.sqs-scroll-ac{z-index:3;width:100%}.sqs-scroll-ac .sqs-scroll-ac-scroll-container{z-index:1;max-height:297px;overflow-y:auto;overflow-x:hidden;background:#fff;box-shadow:0 4px 33px rgba(0,0,0,.22), 0 0 0 1px rgba(0,0,0,.04)}.sqs-scroll-ac .sqs-scroll-ac-scroll-container::-webkit-scrollbar{background:#ccc;color:grey;width:4px}.sqs-scroll-ac .sqs-scroll-ac-list{padding:0px;margin:0px;list-style-type:none}.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item{border-bottom:1px solid #e4e4e4;padding:11px;cursor:pointer;transition:color .2s ease-out}.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item:last-child{border:none}.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item-hover{background-color:#e4e4e4}.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item-active,.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item-active.sqs-scroll-ac .sqs-scroll-ac-list .sqs-scroll-ac-item-hover{background-color:#e4e4e4}.sqs-scroll-ac-content.coupon-editor .sqs-scroll-ac-scroll-container{max-height:280px}.sqs-scroll-ac .sqs-scroll-ac-aria{display:none}.dialog-editor-block-archive .disabled{opacity:.3;pointer-events:none}.dialog-editor-block-audio .sqs-multi-frame.name-file-location-frame{padding:0;margin-bottom:22px}.dialog-editor-block-audio .sqs-file.name-audioAsset{width:100% !important;padding:0;margin:0}.dialog-editor-block-audio .sqs-file.name-audioAsset .sqs-file-audio-processing-content{height:198px !important}.dialog-editor-block-audio .sqs-multi-option.name-file-location{margin-bottom:0}.sqs-audio-player{position:relative;height:32px;width:100%;background-color:#111;background-image:linear-gradient(#444,#111);border:1px solid #333;border-radius:30px;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:11px;line-height:12px;color:#6b6b6b;-webkit-user-select:none}.sqs-audio-player.download .sqs-audio-player-content{padding-right:189px}.sqs-audio-player.download .volume{right:75px}.sqs-audio-player.download .duration{right:113px}.sqs-audio-player.download .download{position:absolute;right:15px;top:10px}.sqs-audio-player.download .download a{color:#ccc}.sqs-audio-player.download .download a:hover{color:#fff}.sqs-audio-player.sqs-audio-player-hidden{display:none}.sqs-audio-player.sqs-audio-player-disabled{opacity:.85}.sqs-audio-player.sqs-audio-player-focused{box-shadow:0 0 8px rgba(0,0,0,.8)}.sqs-audio-player .controls{transition:opacity .2s ease-out;background-repeat:no-repeat;background-position:12px 8px;opacity:.6;position:absolute;height:100%;width:32px;top:0;left:0;cursor:pointer}.sqs-audio-player .controls:hover{opacity:1}.sqs-audio-player.error .placeholder{color:#eee;margin-left:18px}.sqs-audio-player.error .controls,.sqs-audio-player.error .volume{display:none}.sqs-audio-player.play-state-stopped .progress,.sqs-audio-player.play-state-stopped .duration{display:none}.sqs-audio-player.play-state-stopped .placeholder{display:block}.sqs-audio-player.play-state-paused .controls:after,.sqs-audio-player.play-state-stopped .controls:after{content:' ';display:block;width:0;height:0;position:absolute;top:10px;left:15px;border-left:solid 8px #a9a9a9;border-top:solid 6px transparent;border-right:solid 6px transparent;border-bottom:solid 6px transparent}.sqs-audio-player.play-state-playing .controls:before,.sqs-audio-player.play-state-playing .controls:after{content:' ';display:block;position:absolute;width:3px;height:10px;top:11px;left:16px;background-color:#a9a9a9}.sqs-audio-player.play-state-playing .controls:after{left:22px}.sqs-audio-player .sqs-audio-player-content{padding:10px 119px 10px 36px}.sqs-audio-player .placeholder{position:absolute;cursor:pointer;top:10px;left:0;color:#aaa;display:none;width:100%}.sqs-audio-player .placeholder .wrapper{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:35px;margin-right:75px}.sqs-audio-player .placeholder .wrapper .audio-author{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;padding-right:8px;max-width:30%;color:#ccc}.sqs-audio-player .placeholder .wrapper .audio-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:50%}.sqs-audio-player .progress{height:2px;margin-top:5px;background:#444;width:100%;cursor:pointer}.sqs-audio-player .progress .progress-inner{position:relative;background:#bbb;border-right:1px solid #9d9d9d;transition:width .15s linear, background-color .2s ease-out;height:100%;overflow:visible}.sqs-audio-player .progress .progress-inner .scrubber{transition:background-color .2s ease-out;display:none;position:absolute;right:-6px;top:-3px;background-color:#aaa;height:8px;width:8px;border-radius:10px;cursor:pointer}.sqs-audio-player .progress .progress-inner .scrubber:hover{background-color:#eee}.sqs-audio-player .duration{transition:color .2s ease-out;position:absolute;top:10px;right:53px;color:#999}.sqs-audio-player .volume{position:absolute;top:11px;right:15px}.sqs-audio-player .volume .bar{height:10px;width:2px;border-right:3px solid #444;float:left;cursor:pointer;transition:background .2s ease-out, height .2s ease-out, margin .2s ease-out}.sqs-audio-player .volume .bar.active{border-right-color:#aaa}.sqs-audio-player .volume .bar:hover{border-right-color:#eee;height:13px;margin-top:-3px}.sqs-audio-player.tiny .placeholder .wrapper .audio-title{max-width:70%}.sqs-audio-player.tiny .placeholder .wrapper .audio-author{display:none}.sqs-widgets-audio-player{padding:0;letter-spacing:0;text-transform:none;font-style:normal;font-weight:normal;background:#f6f6f6;background:rgba(0,0,0,.05);color:#111;color:rgba(0,0,0,.95)}.sqs-widgets-audio-player .artistName{color:#999;color:rgba(0,0,0,.5)}.sqs-widgets-audio-player a{color:#999 !important;color:rgba(0,0,0,.5) !important}.sqs-widgets-audio-player a:hover{color:#111;color:rgba(0,0,0,.95)}.sqs-widgets-audio-player .player{-webkit-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;font-size:13px;position:relative;display:table;width:100%;overflow:hidden}.sqs-widgets-audio-player .action{cursor:pointer;z-index:99;display:table-cell;width:15px;vertical-align:middle;position:relative;padding:20px 22px;border-right:1px solid rgba(0,0,0,.08);transition:all 0.3s ease-out}.sqs-widgets-audio-player .action:hover{background-color:rgba(255,255,255,.4)}.sqs-widgets-audio-player .action .play{height:100%}.sqs-widgets-audio-player .action .play-button{position:relative;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-left:15px solid #111;border-left-color:rgba(0,0,0,.95);-moz-transform:scale(.999)}.sqs-widgets-audio-player .action .pause{cursor:pointer;height:20px;width:5px;position:relative;display:none;border:0px solid #111;border-width:0 5px}.sqs-widgets-audio-player .labels{line-height:1.4em;display:table-cell;vertical-align:middle;padding:15px;min-width:150px}.sqs-widgets-audio-player .title-wrapper{max-width:100%}.sqs-widgets-audio-player .title-wrapper .title{transform:translateX(0%);cursor:default;font-size:1.2em}.sqs-widgets-audio-player .title-wrapper .title.marquee-mark:after{content:attr(data-title);padding-left:.5em}.sqs-widgets-audio-player .title-wrapper .title.marquee-mark:hover{animation-name:marquee-out;animation-duration:8s;animation-timing-function:linear;animation-iteration-count:infinite}.sqs-widgets-audio-player .artistName{line-height:1.4em}.sqs-widgets-audio-player .track{position:absolute;top:0;left:0;height:100%;width:calc(100% - 60px) !important;z-index:5;margin-left:60px}.sqs-widgets-audio-player .played{position:absolute;top:0;left:0;background:rgba(0,0,0,.03);height:100%}.sqs-widgets-audio-player .played .icon{width:1px;height:100%;position:absolute;right:0;top:0;transition:all .2s ease-out;background-color:rgba(0,0,0,.03);cursor:ew-resize}.sqs-widgets-audio-player:hover .played .icon{background-color:rgba(0,0,0,.1)}.sqs-widgets-audio-player .secondary-controls{line-height:1.2em;text-align:right;display:table-cell;vertical-align:middle;padding:15px;padding-left:0}.sqs-widgets-audio-player .time{white-space:nowrap}.sqs-widgets-audio-player .time .progress{display:inline-block;text-align:right;margin-right:2px}.sqs-widgets-audio-player .time .total:before{content:' / ';visibility:hidden}.sqs-widgets-audio-player .time .progress.loaded+.total.loaded:before{visibility:visible}.sqs-widgets-audio-player .download{cursor:pointer;margin-top:4px;position:relative;z-index:99}.sqs-widgets-audio-player.playing .action .play{display:none}.sqs-widgets-audio-player.playing .action .pause{display:block}.sqs-widgets-audio-player.dark{background:#181818;color:#fff;color:rgba(255,255,255,.95)}.sqs-widgets-audio-player.dark .artistName{color:#aaa;color:rgba(255,255,255,.5)}.sqs-widgets-audio-player.dark a{color:#aaa !important;color:rgba(255,255,255,.5) !important}.sqs-widgets-audio-player.dark a:hover{color:#fff;color:rgba(255,255,255,.95)}.sqs-widgets-audio-player.dark .action{border-right-color:rgba(255,255,255,.15)}.sqs-widgets-audio-player.dark .action:hover{background-color:rgba(0,0,0,.4)}.sqs-widgets-audio-player.dark .pause{border-color:rgba(255,255,255,.95)}.sqs-widgets-audio-player.dark .play .play-button{border-left-color:rgba(255,255,255,.95)}.sqs-widgets-audio-player.dark .played{background:rgba(255,255,255,.05)}.sqs-widgets-audio-player.dark .played .icon{background:rgba(255,255,255,.1)}.sqs-widgets-audio-player.dark:hover .played .icon{background-color:rgba(255,255,255,.2)}.sqs-widgets-audio-player.tiny .secondary-controls{display:none}.sqs-widgets-audio-player.first-play .sqs-widgets-audio-player-content{cursor:pointer}.scrubber-shim{-webkit-user-select:none;-ms-user-select:none;user-select:none}@keyframes marquee-out{from{transform:translateX(0%)}to{transform:translateX(-200%)}}.yui3-calendar-column-hidden,.yui3-calendar-hidden{display:none}.yui3-calendar-day{cursor:pointer}.yui3-calendar-selection-disabled{cursor:default}.yui3-calendar-prevmonth-day{cursor:default}.yui3-calendar-nextmonth-day{cursor:default}.yui3-calendar-content:hover .yui3-calendar-day,.yui3-calendar-content:hover .yui3-calendar-prevmonth-day,.yui3-calendar-content:hover .yui3-calendar-nextmonth-day{-moz-user-select:none}@font-face{font-family:'squarespace-ui-font';src:url('//assets.squarespace.com/universal/fonts/squarespace-ui-font.eot');src:url('//assets.squarespace.com/universal/fonts/squarespace-ui-font.eot?#iefix') format('embedded-opentype'),url('//assets.squarespace.com/universal/fonts/squarespace-ui-font.svg#squarespace-ui-font') format('svg'),url('//assets.squarespace.com/universal/fonts/squarespace-ui-font.woff') format('woff'),url('//assets.squarespace.com/universal/fonts/squarespace-ui-font.ttf') format('truetype');font-weight:normal;font-style:normal}.sqs-ui-font-family{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased}[class^=\"sqs-ui-font-\"]:before,[class*=\" sqs-ui-font-\"]:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased}[data-icon]:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:attr(data-icon)}.yui3-squarespacecalendar{position:relative;outline:none}.yui3-squarespacecalendar .yui3-calendar-pane{width:100%}.yui3-squarespacecalendar:not(.loaded) .yui3-calendar-pane{height:0;padding-bottom:100%}.yui3-squarespacecalendar:not(.loaded) .yui3-calendar-pane .yui3-calendar-header{opacity:0}.yui3-squarespacecalendar .yui3-calendar-header{margin:0 0 34px 0;padding:0;display:flex;transition:opacity .3s ease-in}.yui3-squarespacecalendar .yui3-calendar-header>.yui3-calendar-header-label{opacity:0}.yui3-squarespacecalendar .yui3-calendar-header h1{width:72%;margin:0 !important;padding:0;font-size:28px !important;line-height:36px !important;text-align:center;box-sizing:border-box}.yui3-squarespacecalendar .yui3-calendarnav-prevmonth,.yui3-squarespacecalendar .yui3-calendarnav-nextmonth{width:14%;padding:0 0 0 4px;color:inherit !important;font-weight:normal;text-align:left;cursor:pointer;box-sizing:border-box}.yui3-squarespacecalendar .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\e02c\";text-align:center;display:inline-block;vertical-align:middle}.yui3-squarespacecalendar .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-size:32px;width:32px;height:32px;line-height:32px}.yui3-squarespacecalendar .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-size:18px;width:36px;height:36px;line-height:36px}.yui3-squarespacecalendar .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{color:inherit !important;width:auto !important}.yui3-squarespacecalendar .yui3-calendarnav-nextmonth{padding:0 4px 0 0;text-align:right}.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-family:'squarespace-ui-font';font-style:normal;speak:none;font-weight:normal;-webkit-font-smoothing:antialiased;content:\"\\e02d\";text-align:center;display:inline-block;vertical-align:middle}.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-size:32px;width:32px;height:32px;line-height:32px}.yui3-squarespacecalendar .yui3-calendarnav-nextmonth:before{font-size:18px;width:36px;height:36px;line-height:36px}.yui3-squarespacecalendar .yui3-calendar-grid{table-layout:fixed;width:100%;margin:0 auto;border-collapse:separate;border-spacing:4px;outline:0;transition:opacity .3s ease-in}.yui3-squarespacecalendar:not(.loaded) .yui3-calendar-grid{opacity:0}.yui3-squarespacecalendar .yui3-calendar-weekday{opacity:.7;padding-bottom:10px;color:inherit;font-size:12px;line-height:12px;font-weight:normal;text-align:center;letter-spacing:.5px;text-transform:uppercase}.yui3-squarespacecalendar .yui3-calendar-day,.yui3-squarespacecalendar .yui3-calendar-prevmonth-day,.yui3-squarespacecalendar .yui3-calendar-nextmonth-day{position:relative;width:14%;height:100%;background:rgba(110,110,110,.05);color:inherit;vertical-align:top;outline:none;cursor:default;box-sizing:border-box}.yui3-squarespacecalendar .yui3-calendar-day.today,.yui3-squarespacecalendar .yui3-calendar-prevmonth-day.today,.yui3-squarespacecalendar .yui3-calendar-nextmonth-day.today{background:rgba(110,110,110,.1)}.yui3-squarespacecalendar .yui3-calendar-nextmonth-day{height:0 !important;padding:0;line-height:0}.yui3-squarespacecalendar .background{position:static;width:100%;height:100%}.yui3-squarespacecalendar .background-image-link{display:block;position:absolute;top:0px;left:0px;width:100%;height:100%}.event-disable-item-pages .yui3-squarespacecalendar .background--iseventscollection .background-image-link{cursor:default;pointer-events:none}.yui3-squarespacecalendar .background-image{opacity:1 !important}.yui3-squarespacecalendar .marker{display:table;position:absolute;top:5px;right:5px;height:30px;width:30px;background:transparent}.yui3-squarespacecalendar .marker-dayname,.yui3-squarespacecalendar .marker-daynum{display:table-cell;vertical-align:middle;opacity:.7;color:inherit;font-size:12px;line-height:12px;text-align:center}.yui3-squarespacecalendar .background+.marker{background:#fafafa}.yui3-squarespacecalendar .background+.marker .marker-dayname,.yui3-squarespacecalendar .background+.marker .marker-daynum{color:#333}.yui3-squarespacecalendar .marker-dayname{display:none}.yui3-squarespacecalendar .itemlist{list-style-type:none;margin:0;padding:35px 0 8px 0;box-sizing:border-box}.yui3-squarespacecalendar .background~.itemlist{display:none}.yui3-squarespacecalendar .item{margin:0 10px 7px;padding:0;font-size:12px;line-height:14px}.yui3-squarespacecalendar .item-link{display:inline-block;color:inherit !important;text-decoration:none}.event-disable-item-pages .yui3-squarespacecalendar .itemlist--iseventscollection .item-link{cursor:default;pointer-events:none}.yui3-squarespacecalendar .item-time{display:inline;font-weight:bold}body.event-time-format .yui3-squarespacecalendar .item-time.item-time--12hr,body:not(.event-time-format) .yui3-squarespacecalendar .item-time.item-time--24hr{display:none}.yui3-squarespacecalendar .item-enddate{display:none}.yui3-squarespacecalendar .item--multiday .item-enddate{display:inline}.yui3-squarespacecalendar .item--multiday .item-enddate:before{content:\"(ends \"}.yui3-squarespacecalendar .item--multiday .item-enddate:after{content:\")\"}.yui3-squarespacecalendar .item--ongoing .item-link>.item-title{opacity:.5}.yui3-squarespacecalendar .item--ongoing .item-time,.yui3-squarespacecalendar .item--ongoing .item-enddate{display:none}.yui3-squarespacecalendar .flyoutitemlist{opacity:0;pointer-events:none;list-style-type:none;position:absolute;top:0;left:100%;width:200%;width:calc(200% +  8px);width:-moz-calc(200% +  8px);height:auto;min-height:100%;margin:0;padding:17px;border-left:4px solid transparent;background:#eee;overflow-y:scroll;overflow-x:hidden;cursor:default;z-index:5;background-clip:padding-box;box-sizing:border-box}.yui3-squarespacecalendar .yui3-calendar-day.has-event:hover .flyoutitemlist,.yui3-squarespacecalendar .yui3-calendar-day.has-event.focus-within .flyoutitemlist,.yui3-squarespacecalendar .flyoutitemlist:hover{opacity:1;pointer-events:auto;z-index:999}.yui3-squarespacecalendar .yui3-calendar-day.has-event:focus-within .flyoutitemlist{opacity:1;pointer-events:auto;z-index:999}.yui3-squarespacecalendar .friday .flyoutitemlist,.yui3-squarespacecalendar .saturday .flyoutitemlist{left:auto;right:100%;border-left:none;border-right:4px solid transparent}.yui3-squarespacecalendar .yui3-calendar-row:nth-child(4) .flyoutitemlist,.yui3-squarespacecalendar .yui3-calendar-row:nth-child(5) .flyoutitemlist,.yui3-squarespacecalendar .yui3-calendar-row:nth-child(6) .flyoutitemlist{top:auto;bottom:0}.yui3-squarespacecalendar .flyoutitem{margin:0 0 17px 0;padding:0}.yui3-squarespacecalendar .flyoutitem:last-child{margin-bottom:0 !important}.yui3-squarespacecalendar .flyoutitem+.flyoutitem{border-top:1px solid rgba(110,110,110,.1);padding:17px 0 0 0}.yui3-squarespacecalendar .flyoutitem a{color:#333 !important}.yui3-squarespacecalendar .flyoutitem>*,.yui3-squarespacecalendar .flyoutitem p,.yui3-squarespacecalendar .flyoutitem ol,.yui3-squarespacecalendar .flyoutitem ul,.yui3-squarespacecalendar .flyoutitem span{color:#333;font-size:12px !important;line-height:15px !important}.yui3-squarespacecalendar .flyoutitem .flyoutitem-datetime,.yui3-squarespacecalendar .flyoutitem .flyoutitem-location>div:first-child,.yui3-squarespacecalendar .flyoutitem .flyoutitem-excerpt,.yui3-squarespacecalendar .flyoutitem p,.yui3-squarespacecalendar .flyoutitem ol,.yui3-squarespacecalendar .flyoutitem ul,.yui3-squarespacecalendar .flyoutitem span{margin:11.333333333333334px 0 0 0}.yui3-squarespacecalendar .flyoutitem-title{margin:0 !important;padding:0;color:#333;font-size:16px !important;line-height:18px !important;letter-spacing:normal}.yui3-squarespacecalendar .flyoutitem-link{text-decoration:none}.yui3-squarespacecalendar .flyoutitem-enddate{display:none;font-size:12px;line-height:18px}.yui3-squarespacecalendar .flyoutitem-link-arrow:before{content:\"\\2192\";font-size:10px}body.event-disable-item-pages .yui3-squarespacecalendar .flyoutitemlist--iseventscollection .flyoutitem-link{cursor:default;pointer-events:none}body.event-disable-item-pages .yui3-squarespacecalendar .flyoutitemlist--iseventscollection .flyoutitem-link .flyoutitem-link-arrow{display:none}body.event-time-format .yui3-squarespacecalendar .flyoutitem-datetime--12hr,body:not(.event-time-format) .yui3-squarespacecalendar .flyoutitem-datetime--24hr{display:none}.yui3-squarespacecalendar .itemlist:not(.itemlist--iseventscollection) .item-time,.yui3-squarespacecalendar .flyoutitemlist:not(.flyoutitemlist--iseventscollection) .item-time,.yui3-squarespacecalendar .itemlist:not(.itemlist--iseventscollection) .item-enddate,.yui3-squarespacecalendar .flyoutitemlist:not(.flyoutitemlist--iseventscollection) .item-enddate,.yui3-squarespacecalendar .itemlist:not(.itemlist--iseventscollection) .flyoutitem-datetime,.yui3-squarespacecalendar .flyoutitemlist:not(.flyoutitemlist--iseventscollection) .flyoutitem-datetime{display:none !important}.yui3-squarespacecalendar .itemcount{display:none}.yui3-squarespacecalendar .sqs-spin{position:absolute;left:50%;margin-left:-22px;top:100px}.yui3-squarespacecalendar .small-layout .yui3-calendar-header h1{font-size:24px !important;line-height:32px !important}.yui3-squarespacecalendar .small-layout .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .small-layout .yui3-calendarnav-nextmonth:before{font-size:16px;width:32px;height:32px;line-height:32px}.yui3-squarespacecalendar .small-layout .marker{top:5px;right:5px;height:20px;width:20px}.yui3-squarespacecalendar .small-layout .marker-dayname,.yui3-squarespacecalendar .small-layout .marker-daynum{font-size:11px;line-height:11px}.yui3-squarespacecalendar .small-layout .itemlist{padding:28px 0 6px 0}.yui3-squarespacecalendar .small-layout .item{margin:0 8px 7px}.yui3-squarespacecalendar .small-layout .item-link{font-size:11px;line-height:13px}.yui3-squarespacecalendar .small-layout .flyoutitemlist{padding:15px}.yui3-squarespacecalendar .small-layout .flyoutitem{margin:0 0 15px 0}.yui3-squarespacecalendar .small-layout .flyoutitem+.flyoutitem{padding:15px 0 0 0}.yui3-squarespacecalendar .small-layout .flyoutitem .flyoutitem-datetime,.yui3-squarespacecalendar .small-layout .flyoutitem .flyoutitem-location>div:first-child,.yui3-squarespacecalendar .small-layout .flyoutitem .flyoutitem-excerpt,.yui3-squarespacecalendar .small-layout .flyoutitem p,.yui3-squarespacecalendar .small-layout .flyoutitem ol,.yui3-squarespacecalendar .small-layout .flyoutitem ul,.yui3-squarespacecalendar .small-layout .flyoutitem span{margin:10px 0 0 0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-header{margin:0 0 34px 0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-header h1{font-size:20px !important;line-height:26px !important}.yui3-squarespacecalendar .compact-layout .yui3-calendarnav-prevmonth,.yui3-squarespacecalendar .compact-layout .yui3-calendarnav-nextmonth{padding-left:10px}.yui3-squarespacecalendar .compact-layout .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .compact-layout .yui3-calendarnav-nextmonth:before{font-size:15px;width:26px;height:26px;line-height:26px}.yui3-squarespacecalendar .compact-layout .yui3-calendarnav-nextmonth{padding-right:10px}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid{min-width:200px !important;border-spacing:8px}.yui3-squarespacecalendar .compact-layout .yui3-calendar-weekday{font-size:12px;line-height:12px;letter-spacing:1px}.yui3-squarespacecalendar .compact-layout .yui3-calendar-day,.yui3-squarespacecalendar .compact-layout .yui3-calendar-prevmonth-day,.yui3-squarespacecalendar .compact-layout .yui3-calendar-nextmonth-day{background:transparent;vertical-align:middle;text-align:center}.yui3-squarespacecalendar .compact-layout .yui3-calendar-day.today,.yui3-squarespacecalendar .compact-layout .yui3-calendar-prevmonth-day.today,.yui3-squarespacecalendar .compact-layout .yui3-calendar-nextmonth-day.today{background:transparent;border:1px solid rgba(110,110,110,.2)}.yui3-squarespacecalendar .compact-layout .yui3-calendar-day.has-event,.yui3-squarespacecalendar .compact-layout .yui3-calendar-prevmonth-day.has-event,.yui3-squarespacecalendar .compact-layout .yui3-calendar-nextmonth-day.has-event{background:rgba(110,110,110,.1)}.yui3-squarespacecalendar .compact-layout .background{display:none}.yui3-squarespacecalendar .compact-layout .marker{position:relative;display:inline-block;height:auto;width:auto;top:auto;right:auto;background:transparent;font-weight:normal}.yui3-squarespacecalendar .compact-layout .marker .marker-daynum{opacity:1;display:inline;vertical-align:baseline;font-weight:normal}.yui3-squarespacecalendar .compact-layout .itemlist{display:none}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .flyoutitemlist{top:100%;left:50%;bottom:auto;right:auto;width:350%;height:auto !important;min-height:0;margin-left:-175%;background:#ddd;border:none;border-top:8px solid transparent;text-align:left;overflow:visible;background-clip:padding-box}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .flyoutitemlist.flyoutitemlist--hasmorecontent{width:450%;margin-left:-225%}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .flyoutitemlist:before{content:\"\";position:absolute;top:-6px;left:50%;width:0;height:0;margin-left:-6px;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #ddd}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .sunday .flyoutitemlist,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .monday .flyoutitemlist{left:0;margin-left:0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .sunday .flyoutitemlist:before,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .monday .flyoutitemlist:before{left:7%;margin-left:0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .friday .flyoutitemlist,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .saturday .flyoutitemlist{left:auto;right:0;margin-left:0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .friday .flyoutitemlist:before,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .saturday .flyoutitemlist:before{left:auto;right:7%;margin-left:0}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(4) .flyoutitemlist,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(5) .flyoutitemlist,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(6) .flyoutitemlist{top:auto;bottom:100%;border-top:none;border-bottom:8px solid transparent}.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(4) .flyoutitemlist:before,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(5) .flyoutitemlist:before,.yui3-squarespacecalendar .compact-layout .yui3-calendar-grid .yui3-calendar-row:nth-child(6) .flyoutitemlist:before{top:auto;bottom:-6px;border-bottom:0;border-top:6px solid #ddd}.yui3-squarespacecalendar .tiny-layout{min-width:200px}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-header{margin:0 0 10px 0}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-header h1{padding-top:0;font-family:inherit !important;font-size:16px !important;font-weight:inherit !important;line-height:20px !important}.yui3-squarespacecalendar .tiny-layout .yui3-calendarnav-prevmonth,.yui3-squarespacecalendar .tiny-layout .yui3-calendarnav-nextmonth{padding-left:6px;font-size:0}.yui3-squarespacecalendar .tiny-layout .yui3-calendarnav-prevmonth:before,.yui3-squarespacecalendar .tiny-layout .yui3-calendarnav-nextmonth:before{font-size:11px;width:20px;height:20px;line-height:20px}.yui3-squarespacecalendar .tiny-layout .yui3-calendarnav-nextmonth{padding-right:6px}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-grid{min-width:200px;border-spacing:4px}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-weekday{padding-bottom:5px;font-size:10px;line-height:10px;letter-spacing:1px}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-grid .flyoutitemlist{top:auto;bottom:100%;width:400%;margin-left:-200%;padding:12px;border-bottom:4px solid transparent}.yui3-squarespacecalendar .tiny-layout .yui3-calendar-grid .flyoutitemlist:before{top:auto;bottom:-6px;border-bottom:0;border-top:6px solid #ddd}.yui3-squarespacecalendar .tiny-layout .flyoutitem{margin:0 0 12px 0}.yui3-squarespacecalendar .tiny-layout .flyoutitem+.flyoutitem{padding:12px 0 0 0}.yui3-squarespacecalendar .tiny-layout .flyoutitem>*{margin:8px 0 0 0;line-height:normal !important}.yui3-squarespacecalendar .tiny-layout .flyoutitem-title{font-size:12px !important;line-height:normal !important;font-weight:normal !important}.yui3-squarespacecalendar .tiny-layout .flyoutitem--multiday .flyoutitem-enddate{display:inline}.yui3-squarespacecalendar .tiny-layout .flyoutitem--multiday .flyoutitem-enddate:before{content:\"(ends \"}.yui3-squarespacecalendar .tiny-layout .flyoutitem--multiday .flyoutitem-enddate:after{content:\")\"}.yui3-squarespacecalendar .tiny-layout .flyoutitem-datetime,.yui3-squarespacecalendar .tiny-layout .flyoutitem-location,.yui3-squarespacecalendar .tiny-layout .flyoutitem-excerpt{display:none}.sqs-block-code .sqs-block-content{position:relative}.sqs-block-code .sqs-block-content *:first-child{margin-top:0}.sqs-block-code .sqs-block-content *:last-child{margin-bottom:0}.sqs-block-code hr{border:none;border-bottom:1px solid #ccc;width:75%}.dialog-editor-block-code .name-premiumPlanError .text{background-color:#224ba2}html.blogapp .sqs-block-code textarea{position:absolute;top:12px;bottom:0;left:12px;right:12px;padding:0;margin:0 -3px;border:none;background:transparent;outline:none;resize:none;overflow:hidden;color:#333}html.blogapp .sqs-block-code .textarea-clone{margin:0 12px;min-height:18px;visibility:hidden}html.blogapp .sqs-block-code textarea,html.blogapp .sqs-block-code .textarea-clone{font:15px/18px 'Courier New';white-space:pre-wrap;word-wrap:break-word}body.fullscreenEditor .standard-dialog-wrapper .controls-block .autosave-state{position:fixed;top:10px;right:200px;padding:0;z-index:200001}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor{width:100% !important;height:100%;overflow:hidden;position:fixed !important;top:0 !important;left:0 !important;padding:0 0 0 0 !important;background:#fff}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-wysiwyg-control .field-wysiwyg-tool-fullscreen .icon{background:transparent url('/universal/images-v6/icons/icon-fullscreen-close-14-dark.png') center center no-repeat}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor.inverted{background:#111}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor.inverted .field-wysiwyg-control .field-wysiwyg-tool-fullscreen .icon{background:transparent url('/universal/images-v6/icons/icon-fullscreen-close-14-light.png') center center no-repeat}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor.inverted .field-wysiwyg{background:#111;color:#ddd}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor.inverted .field-wysiwyg-control-wrapper .field-wysiwyg-control{background:transparent}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-wysiwyg-control-wrapper{top:0;z-index:200010;position:fixed;width:100%;background:transparent}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-wysiwyg-control-wrapper .field-wysiwyg-control{background:#fff;margin-right:20px;height:40px}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-rhs{height:100%}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-wysiwyg{height:100%;overflow:auto;position:relative;top:-34px}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-lhs{display:none}body.fullscreenEditor .wysiwyg-field-wrapper.fullscreenEditor .field-description-wrapper{display:none}.fullscreenEditor{overflow:hidden}body.fullscreenEditor .fullscreen-options{display:inline}body.fullscreenEditor .sqs-visual-edit{padding-top:80px;padding-left:30px;box-sizing:border-box}body.fullscreenEditor div::-webkit-scrollbar{width:6px}body.fullscreenEditor div::-webkit-scrollbar-track-piece{background-color:transparent}body.fullscreenEditor div::-webkit-scrollbar-thumb{background:rgba(0,0,0,.05)}body.fullscreenEditor div::-webkit-scrollbar-thumb:hover{background:#000}body.fullscreenEditor div:hover::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)}.field-wrapper.wysiwyg-field-wrapper .field-wysiwyg{resize:none;background:#fff;z-index:4}.field-wrapper.wysiwyg-field-wrapper .field-wysiwyg .sqs-visual-edit{overflow:auto;outline:none;padding:12px 17px;border:0;font-size:13px;line-height:21px;color:#555;box-sizing:border-box;height:100%;width:100%}.field-wrapper.wysiwyg-field-wrapper .field-wysiwyg .sqs-visual-edit p:first-child{margin-top:0px}.field-wrapper.wysiwyg-field-wrapper .field-wysiwyg .sqs-text-edit{resize:none}.wysiwyg-field-wrapper .field-rhs{position:relative}.wysiwyg-field-wrapper .field-wysiwyg-control{border-radius:2px 2px 0 0;background:#eee;padding-left:5px;height:27px}.wysiwyg-field-wrapper .field-wysiwyg-control a{padding:0;margin-top:3px;display:block;float:left;outline:0}.wysiwyg-field-wrapper .field-wysiwyg-control .separator{display:inline-block;margin-left:10px;border-left:1px solid #ddd;width:10px;height:27px}.wysiwyg-field-wrapper .field-wysiwyg-control button{display:inline-block;vertical-align:top}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool{height:27px;width:27px;border:1px solid transparent;border-radius:3px;margin:0;padding:0;cursor:pointer;background-color:transparent}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool:hover{border-color:#ccc}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool.contains-cursor{background-color:#222;background-image:linear-gradient(#555,#222);border-radius:0px}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool .icon{display:block;opacity:.8;width:100%}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-bold .icon{background:transparent url('/universal/images-v6/icons/icon-bold-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-italic .icon{background:transparent url('/universal/images-v6/icons/icon-italic-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-h1 .icon{background:transparent url('/universal/images-v6/icons/icon-h1-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-h2 .icon{background:transparent url('/universal/images-v6/icons/icon-h2-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-h3 .icon{background:transparent url('/universal/images-v6/icons/icon-h3-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-link .icon{background:transparent url('/universal/images-v6/icons/icon-link-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-blockquote .icon{background:transparent url('/universal/images-v6/icons/icon-quote-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-removeformat .icon{background:transparent url('/universal/images-v6/icons/icon-removeformating-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-unorderedlist .icon{background:transparent url('/universal/images-v6/icons/icon-unsortedlist-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-orderedlist .icon{background:transparent url('/universal/images-v6/icons/icon-sortedlist-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-outdent .icon{background:transparent url('/universal/images-v6/icons/icon-outdent-17-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-indent .icon{background:transparent url('/universal/images-v6/icons/icon-indent-16-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-insertimage .icon{background:transparent url('/universal/images-v6/icons/icon-image-9-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-inverted .icon{background:transparent url('/universal/images-v6/icons/icon-editor-scheme-16-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-widthsmall .icon{background:transparent url('/universal/images-v6/icons/icon-editor-width-small-16-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-widthmedium .icon{background:transparent url('/universal/images-v6/icons/icon-editor-width-medium-16-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-widthlarge .icon{background:transparent url('/universal/images-v6/icons/icon-editor-width-full-16-dark.png') center center no-repeat}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-fullscreen .icon{background:transparent url('/universal/images-v6/icons/icon-fullscreen-open-14-dark.png') center center no-repeat;height:100%}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-undo{display:none}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-redo{display:none}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-sourcecode{width:auto;padding-left:24px;padding-right:10px;background:url(\"/universal/images-v6/dialog/checkbox-inactive-14-dark.png\") no-repeat 6px center}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-sourcecode.active{background:url(\"/universal/images-v6/dialog/checkbox-active-14-dark.png\") no-repeat 6px center}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-sourcecode[disabled]{color:#000;opacity:.5}.wysiwyg-field-wrapper .field-wysiwyg-control button.field-wysiwyg-tool-sourcecode:hover{border-color:transparent}.wysiwyg-field-wrapper .field-wysiwyg-control .container{height:27px;display:inline-block}.wysiwyg-field-wrapper .field-wysiwyg-control .container .field-wysiwyg-select{margin:4px}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option{background-position-y:22px;height:110px}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option .option-content{padding-bottom:0;height:100px}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-upload-media{background-image:url('//assets.squarespace.com/universal/images-v6/damask/upload-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-upload-media{background-image:url('//assets.squarespace.com/universal/images-v6/damask/upload-dark@2x.png');background-size:32px}}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-existing-gallery{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-existing-gallery{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-64-dark.png');background-size:32px}}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-slideshow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/slideshow-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-slideshow{background-image:url('//assets.squarespace.com/universal/images-v6/damask/slideshow-64-dark.png');background-size:32px}}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-carousel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/carousel-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-carousel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/carousel-64-dark.png');background-size:32px}}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-grid{background-image:url('//assets.squarespace.com/universal/images-v6/damask/grid-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-grid{background-image:url('//assets.squarespace.com/universal/images-v6/damask/grid-64-dark.png');background-size:32px}}.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-stacked{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stack-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-gallery-options.sqs-dialog-field .sqs-multi-option .option.icon-stacked{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stack-64-dark.png');background-size:32px}}.dialog-editor-block-donation .sqs-dialog-field-html.description{font-size:11px;color:#797979}.dialog-editor-block-donation .sqs-dialog-field-html.description .description-label{text-transform:uppercase;font-weight:500;letter-spacing:.5px;font-size:12px;color:#3e3e3e}.dialog-editor-block-donation .sqs-dialog-field-html.description .title{margin:0}.dialog-editor-block-donation .sqs-select.thin .title{font-size:12px !important}.dialog-editor-block-donation textarea{height:90px}.sqs-labelled-value-table{zoom:1}.sqs-labelled-value-table:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-labelled-value-table:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-labelled-value-table table{border-collapse:separate;border-spacing:2px}.sqs-labelled-value-table .sqs-labelled-value-table-content .field-lhs{text-transform:uppercase;font-weight:500;letter-spacing:.5px;font-size:12px;color:#3e3e3e}.sqs-labelled-value-table .sqs-labelled-value-table-content .field-description{font-size:11px;color:#797979;padding-top:5px;padding-bottom:3px}.sqs-labelled-value-table .sqs-labelled-value-table-content .empty-message{display:none}.sqs-labelled-value-table .sqs-labelled-value-table-content.empty thead{display:none}.sqs-labelled-value-table .sqs-labelled-value-table-content.empty .empty-message{display:block}.sqs-labelled-value-table thead th{font-weight:500;padding:4px 4px;border-bottom:1px solid #e4e4e4}.sqs-labelled-value-table tbody.table-body tr.empty-message td{padding:15px 30px;border:2px dashed #333}.sqs-labelled-value-table tbody.table-body tr.row td{background:transparent}.sqs-labelled-value-table tbody.table-body tr.row td.right{width:200px}.sqs-labelled-value-table tbody.table-body tr.row td.right input{width:195px}.sqs-labelled-value-table tbody.table-body tr.row:hover td{background:transparent}.sqs-labelled-value-table tbody.table-body tr.row:hover input{background:#fff}.sqs-labelled-value-table tbody.table-body tr.row:hover .remove-row{visibility:visible}.sqs-labelled-value-table tbody.table-body tr.row td{padding:4px 4px}.sqs-labelled-value-table tbody.table-body tr.row td.remove{background:transparent}.sqs-labelled-value-table tbody.table-body tr.row .remove-row{height:28px;width:44px;display:inline-block;background:transparent url('/universal/images-v6/damask/trash-15-dark.png') center center no-repeat;cursor:pointer;visibility:hidden;vertical-align:bottom;opacity:.7}.sqs-labelled-value-table tbody.table-body tr.row .remove-row:hover{opacity:1;cursor:pointer}.sqs-labelled-value-table tbody.table-body tr.row .remove-row:hover input{color:#fff}.sqs-labelled-value-table tbody.table-body tr.row input{background:#f6f6f6;width:70px;padding:4px}.sqs-labelled-value-table tbody.table-body tr.row input:focus{outline:0;background:#fff}.sqs-labelled-value-table tbody.table-body tr.row input:disabled{color:#999}.sqs-labelled-value-table .add-row{height:44px;width:44px;cursor:pointer;display:inline-block;vertical-align:top;background:#f6f6f6 url('/universal/images-v6/damask/add-dark.png') center center no-repeat;float:left;clear:both}.sqs-labelled-value-table .add-row img{display:none}.sqs-block-editor-button-container-hidden{display:none}.sqs-block-editor-button-container{position:absolute;top:0;left:50%;max-width:100%;display:flex;justify-content:flex-end;align-items:flex-start;font:400 normal 12px / 44px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;color:#ddd !important;white-space:nowrap;text-align:center;line-height:44px !important;overflow:visible;transform:translatex(-50%);z-index:1010}.sqs-block-editor-button-container .sqs-block-editor-button-container-content{display:inline-block;height:44px;margin:auto;position:relative;background:#3e3e3e !important;transition:opacity .2s ease-in-out;opacity:0;pointer-events:none}.sqs-block:hover .sqs-block-editor-button-container .sqs-block-editor-button-container-content,.sqs-block-focused .sqs-block-editor-button-container .sqs-block-editor-button-container-content{opacity:1;pointer-events:auto}.sqs-block.sqs-edit-dialog-open .sqs-block-editor-button-container .sqs-block-editor-button-container-content,.sqs-block-editing.sqs-block-html .sqs-block-editor-button-container .sqs-block-editor-button-container-content{display:none}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-label{font-size:11px !important}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-featuregate{padding-left:22px}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-label,.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla,.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-featuregate{height:100%;overflow:hidden;vertical-align:top;display:inline-block !important;transition:all .1s ease-in-out;margin:0 !important}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-label>div,.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla>div{padding:0 22px !important}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla,.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla *{color:#fff !important;cursor:pointer !important;font-size:11px;font-weight:500 !important;letter-spacing:.5px;text-transform:uppercase !important}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla:hover{background-color:#222 !important}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light.png') center center no-repeat;cursor:pointer;text-indent:-9999px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light@2x.png');background-size:9px 11px}}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove:hover{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-red@2x.png');background-size:9px 11px}}.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove:hover{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light.png') center center no-repeat;background-color:#f0523d !important}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove:hover{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-9-light@2x.png');background-size:9px 11px}}.sqs-jacquard .sqs-block-editor-button-container{line-height:1 !important;top:11px}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content{background:#fff !important;border-radius:8px;border:1px solid rgba(0,0,0,.01);box-shadow:0 4px 16px rgba(0,0,0,.12),0 0 0 1px rgba(0,0,0,.02);box-sizing:border-box;padding:3px 0}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-label>div,.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla>div{padding:0 !important}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-label{color:#313131;font-size:14px !important;font-weight:500;line-height:36px;margin-left:16px !important;margin-right:11px !important}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla{border-radius:4px;height:36px;width:36px;margin-left:4px !important}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla:hover{background-color:#ebebeb !important}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla:last-child{margin-right:3px !important}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--edit{background:transparent url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-pencil.svg') center center no-repeat;text-indent:-9999px}.sqs-jacquard .sqs-block-editor-button-container .sqs-block-editor-button-container-content .sqs-button-vanilla.sqs-dialog-button--remove{background:transparent url('//assets.squarespace.com/universal/images-v6/page-sections/toolbar-delete.svg') center center no-repeat;text-indent:-9999px}.sqs-oembed{position:relative}.sqs-oembed .input{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none}.sqs-oembed .input:focus{outline:none}.sqs-oembed .input.has-manual{padding-right:44px !important}.sqs-oembed .manual{position:absolute;right:0;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/code-18-dark.png') center center no-repeat;height:44px;width:44px;cursor:pointer;opacity:.35;transition:opacity .1s ease-in-out;z-index:1}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-oembed .manual{background-image:url('//assets.squarespace.com/universal/images-v6/damask/code-32-dark.png');background-size:18px}}.sqs-oembed .manual:hover{opacity:1}.sqs-oembed .status .sqs-spin{margin-top:3px;float:left;margin-right:9px}.social-summary-block .state-message.synchronizing{background-image:none;padding-left:15px}.social-summary-block .state-message.synchronizing .sync-text{float:left;margin-left:10px}.social-summary-block .state-message.synchronizing .spinner{float:left;background:transparent url('//assets.squarespace.com/universal/images-v6/icons/icon-settings-16-light.png') center center no-repeat;height:19px;width:19px;animation-duration:2s;animation-iteration-count:infinite;animation-name:spin-frames}.dialog-editor-block-gallery .tab-wrapper.dialog-tab-content{padding:0 !important}.dialog-editor-block-gallery .custom-field-description{padding:0 33px}.dialog-editor-block-gallery .sqs-multi-option.name-methodOption{margin-top:0;margin-bottom:0}.dialog-editor-block-gallery .sqs-multi-frame.name-methodFrame{margin-top:0}.dialog-editor-block-gallery .sqs-multi-frame-content{height:520px}.dialog-editor-block-gallery .sqs-multi-frame-content .frame>.sqs-dialog-field{height:100% !important}.dialog-editor-block-gallery .sqs-content-item-grid .sqs-uploader-content button{border:none}.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery{padding:0 33px;margin-top:22px !important}.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message{text-align:center;margin-top:50%;padding:0 22px;font-size:16px;line-height:33px;color:#a1a1a1;border:none}.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message img,.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message .icon{display:none}.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message .title{display:none}.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message .desc,.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message .empty-text,.dialog-editor-block-gallery .sqs-content-selector.name-existingGallery .empty-message .description{margin:0 auto}.dialog-editor-block-gallery .sqs-content-item-grid-content:not(.empty){padding:11px}.dialog-editor-block-gallery .option{height:44px}.dialog-editor-block-gallery .option .option-content{padding-bottom:0;height:100%}.sqs-dialog-field.sqs-code .CodeMirror,.sqs-dialog-field.sqs-html-code .CodeMirror{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;height:auto;padding:0}.sqs-dialog-field.sqs-code .CodeMirror:focus,.sqs-dialog-field.sqs-html-code .CodeMirror:focus{outline:none}.sqs-dialog-field.sqs-code .CodeMirror .CodeMirror-scroll,.sqs-dialog-field.sqs-html-code .CodeMirror .CodeMirror-scroll{height:auto;min-height:270px}.sqs-dialog-field.sqs-code .CodeMirror .CodeMirror-lines *,.sqs-dialog-field.sqs-html-code .CodeMirror .CodeMirror-lines *{font-family:Courier,\"Courier New\",monospace;margin:0}.image-editor-web-design-layout .option{background-position-y:22px;height:120px}.image-editor-web-design-layout .option .option-content{padding-bottom:0}.image-editor-web-design-layout .option .option-title{line-height:1.4;max-height:49.5px;overflow:hidden;padding-top:66px;position:static}.image-editor-web-design-layout .option.icon-inline{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-inline_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-inline{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-inline_icon_2x.png');background-size:32px}}.image-editor-web-design-layout .option.icon-poster{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-poster_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-poster{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-poster_icon_2x.png');background-size:32px}}.image-editor-web-design-layout .option.icon-card{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-card_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-card{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-card_icon_2x.png');background-size:32px}}.image-editor-web-design-layout .option.icon-overlap{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-overlap_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-overlap{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-overlap_icon_2x.png');background-size:32px}}.image-editor-web-design-layout .option.icon-collage{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-collage_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-collage{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-collage_icon_2x.png');background-size:32px}}.image-editor-web-design-layout .option.icon-stack{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-stack_icon_1x.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.image-editor-web-design-layout .option.icon-stack{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-layout-stack_icon_1x.png');background-size:32px}}.sqs-block-image .layout-caption-overlay .image-caption-wrapper,.sqs-block-image .layout-caption-overlay-hover .image-caption-wrapper{z-index:1}.sqs-block-image.sqs-block-focused .image-block-outer-wrapper.layout-caption-overlay-hover .image-caption-wrapper{visibility:visible;opacity:1}.sqs-block-image.sqs-block-focused .image-block-outer-wrapper.layout-caption-overlay-hover .image-caption{margin-bottom:0}.cc-link-editor-image-block{margin-top:-22px !important}.cc-link-editor-image-block label{border-radius:0;background-color:#fff !important}.cc-link-editor-image-block label input{font-size:inherit}.sqs-file-image-licensed .sqs-file-image-external-image-picker,.sqs-file-image-licensed .sqs-action-overlay{display:none}.sqs-file-image-licensed .sqs-actions-inline{margin-top:1px}.sqs-file-image-licensed .sqs-actions-inline .search-images button span.button-icon{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/search-dark.png') center center no-repeat;width:16px;height:16px;margin-right:11px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-file-image-licensed .sqs-actions-inline .search-images button span.button-icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-dark@2x.png');background-size:16px 16px}}.sqs-file-image-licensed .sqs-actions-inline .remove{max-width:44px}.sqs-file-image-licensed .sqs-actions-inline .remove button span.button-icon{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/trash-15-dark.png') center center no-repeat;width:16px;height:16px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-file-image-licensed .sqs-actions-inline .remove button span.button-icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/trash-15-dark@2x.png');background-size:12px 16px}}.sqs-file-image-licensed .sqs-actions-inline .remove button span.button-label{display:none}.sqs-actions-inline-content{position:relative}.sqs-actions-inline-buttons{border-top:1px solid #e4e4e4;display:flex;border-color:transparent !important}.sqs-actions-inline-buttons:empty{border-top:0}.sqs-actions-inline-buttons>*{flex:1;display:flex;align-items:center;justify-content:center;border-left:1px solid #e4e4e4 !important}.sqs-actions-inline-buttons>*:first-child{border-left:none !important}.sqs-actions-inline-buttons input,.sqs-actions-inline-buttons button{background:transparent}.sqs-actions-inline-buttons a{border-bottom:none}.sqs-actions-inline-buttons .button-block{background-color:#e4e4e4 !important}.sqs-actions-inline-buttons .button-block:hover{background-color:#d0d0d0 !important}.sqs-actions-inline-buttons .button-block:not(:first-child){border-left:1px solid #f6f6f6 !important}.sqs-actions-inline.disabled .sqs-actions-inline-buttons .button-block:hover{background-color:#e4e4e4 !important}.sqs-actions-inline.disabled button{cursor:default;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sqs-actions-inline .button-label-container{display:flex;align-items:center;justify-content:center;align-self:stretch}.sqs-actions-inline .progress-container{top:0;background:#f6f6f6;padding:15px 0}.sqs-actions-inline-hidden{display:none}.standard-dialog-wrapper .tab-wrapper .button-holder{border-top:none}.sqs-licensed-asset-preview-alert-content{padding:11px 0 0;color:#797979}.sqs-licensed-asset-preview-alert .copy{display:inline-block;vertical-align:middle;margin-bottom:22px}.sqs-licensed-asset-preview-alert .copy a{cursor:pointer}.sqs-licensed-asset-preview-alert-hidden{display:none}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper{padding-bottom:22px}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-text.name-searchTerm{display:inline-block;margin-top:-11px;margin-left:33px;margin-bottom:0;width:calc(100% -  77px ) !important;padding-right:0}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-text.name-searchTerm.sqs-text-hidden{display:none}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh{display:inline-block;margin-top:-11px;margin-bottom:0;width:44px !important}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .sqs-button-content{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/refresh-dark.png') center center no-repeat;cursor:pointer;background-color:#fff}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .sqs-button-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/refresh-dark@2x.png');background-size:16px 16px}}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .label{visibility:hidden}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .name-enable-search-disabled{padding:11px;background:#fce713;box-sizing:border-box}.standard-dialog-wrapper.dialog-instagram-block-editor .body-block>.tab-wrapper .name-search-deprecated-warning{box-sizing:border-box}.sqs-warning-banner{transition:all .2s ease-out;margin-bottom:22px;background:#fce713;padding:22px}.sqs-warning-banner-hidden{height:0;opacity:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;visibility:hidden}.sqs-warning-banner img{display:none}.sqs-block-map .sqs-block-map-content{position:relative}.sqs-block-map .sqs-block-map-content .sqs-map-wrapper{position:absolute !important;top:0;left:0;height:100%;max-width:none;width:100%}.sqs-block-map.sqs-edit-dialog-open .sqs-editing-overlay{display:none}.sqs-block-map.sqs-edit-dialog-open .sqs-scroll-ac-aria{font-size:9px;color:#797979}.sqs-google-places-autocomplete-mixin .google-required-elements{padding:5px;min-height:0px}.sqs-google-places-autocomplete-mixin .google-required-elements .powered-by-google{background:url(\"/universal/images-v6/google/powered-by-google-on-white.png\") 5px center no-repeat;width:100%;height:24px}.sqs-google-places-autocomplete-mixin .google-required-elements .google-attributions{display:none}.sqs-google-places-autocomplete-mixin .google-ac-address,.sqs-google-places-autocomplete-mixin .google-ac-trailing{display:inline-block}.sqs-google-places-autocomplete-mixin .google-ac-address{margin-right:.25em}.sqs-google-places-autocomplete-mixin .google-ac-trailing{color:grey}.sqs-google-places-autocomplete-mixin .google-ac-matched-character{font-weight:bold}.dialog-editor-block-newsletter .sqs-dialog-field.name-buttonAlignment{display:none}.dialog-editor-block-newsletter .sqs-dialog-field.name-submissionHTML{margin-top:-11px}.dialog-editor-block-newsletter .showOtherStorageOptionsLink{display:none}.dialog-editor-block-newsletter .body-block:not(.showOtherStorageOptions) .showOtherStorageOptionsLink{display:block;cursor:pointer;text-decoration:underline}.dialog-editor-block-newsletter .body-block:not(.showOtherStorageOptions) .name-zapierConnect,.dialog-editor-block-newsletter .body-block:not(.showOtherStorageOptions) .yui3-googledocsserviceconnect,.dialog-editor-block-newsletter .body-block:not(.showOtherStorageOptions) .yui3-mailchimpserviceconnect,.dialog-editor-block-newsletter .body-block:not(.showOtherStorageOptions) .name-mailchimpAccountCreation{display:none}.squarespace-config .product-block .sqs-amazon-button{display:inline-block;width:auto;height:auto;padding:1em 2.5em;color:#fff;background-color:#272727;border-width:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;line-height:1em;font-weight:normal;font-style:normal;text-transform:uppercase;letter-spacing:0px;text-align:center;text-decoration:none;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;box-shadow:none;text-transform:none}.dialog-editor-block-product .hidden{display:none}.sqs-search-container-waiting{background:#fff;height:100%;width:100%;position:absolute;opacity:.5}.sqs-search-container a{color:#999;text-decoration:none}.sqs-search-container input{background:none;border:none;outline:none;font-size:30px}.sqs-search-container input::-webkit-input-placeholder{color:#eee}.sqs-search-container input:-moz-placeholder{color:#eee}.sqs-search-container input::selection{color:#fff;background-color:#000}.sqs-search-container input:focus{box-shadow:none;border:none}.sqs-search-container-list{overflow-y:auto;overflow-x:hidden}.sqs-search-container-list .search-results{border-top:1px solid rgba(200,200,200,.35);border-bottom:1px solid rgba(200,200,200,.35)}.sqs-search-container-list .search-results.empty{border:none}.search-result:first-child .sqs-search-container-item{border-top:none}.sqs-search-container-item{position:relative;border-top:1px solid rgba(200,200,200,.35);zoom:1;cursor:pointer}.sqs-search-container-item:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-search-container-item:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-search-container-item:first-child{margin-top:0}.sqs-search-container-item mark{font-weight:bold}.sqs-search-container-item em{font-style:italic}.sqs-search-container-item .sqs-title{font-size:1.5em;font-weight:400;line-height:1.3em;margin-bottom:.5em}.sqs-search-container-item .sqs-content{font-weight:400;font-size:1em;line-height:1.4em}.sqs-search-container-item .sqs-content span{margin:2px 0}.sqs-search-container .loading{opacity:.75}.sqs-search-container .loading .desc{display:block;float:left;padding-top:4px;padding-left:12px}.sqs-search-container .loading .spinner-wrapper{display:block;float:left}@media screen and (max-width:600px){.sqs-search-container-list{top:160px}.sqs-search-container-list .search-results{margin-right:0px}.sqs-search-container input{font-size:24px !important}}.social-icons-style-regular .sqs-svg-icon--wrapper{border-bottom:none}.dialog-editor-block-social-account-links .switch-box-container .switch-shadow{box-shadow:inset 0 1px 0 rgba(0, 0, 0, 0.3), inset 0 1px 1px rgba(0, 0, 0, 0.5), 0 0 0 1px #222}.sqs-tiny-social-account{height:33px;line-height:33px}.sqs-tiny-social-account-content{zoom:1}.sqs-tiny-social-account-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-tiny-social-account-content:after{display:block;visibility:hidden;font-size:0;height:0;clear:both;content:\".\"}.sqs-tiny-social-account-content .name,.sqs-tiny-social-account-content .icon{float:left}.sqs-tiny-social-account-content .name{font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-tiny-social-account-content .icon{margin:5px 10px 0 0}.sqs-layout.sqs-editing .sqs-block.sqs-block-spacer{outline-offset:-1px}.sqs-layout.sqs-editing .sqs-block.sqs-block-spacer:not(.sqs-block-focused){outline:1px dashed rgba(0,0,0,.1)}.sqs-layout.sqs-editing .sqs-block.sqs-block-spacer:not(.sqs-block-focused):hover{outline:1px dotted rgba(0,0,0,.1)}.sqs-layout.sqs-editing .sqs-block.sqs-block-spacer:not(.sqs-block-focused).sqs-selected{outline-offset:0px;outline:1px solid rgba(0,0,0,.08)}.dialog-editor-block-summary-v-2 .hidden,.dialog-editor-block-summary-v-2 .sqs-summary-filter-hidden{display:none}.dialog-editor-block-summary-v-2 .option.icon-grid{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-grid-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-editor-block-summary-v-2 .option.icon-grid{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-grid-64-dark.png');background-size:32px}}.dialog-editor-block-summary-v-2 .option.icon-carousel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-carousel-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-editor-block-summary-v-2 .option.icon-carousel{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-carousel-64-dark.png');background-size:32px}}.dialog-editor-block-summary-v-2 .option.icon-wall{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-wall-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-editor-block-summary-v-2 .option.icon-wall{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-wall-64-dark.png');background-size:32px}}.dialog-editor-block-summary-v-2 .option.icon-list{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-list-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.dialog-editor-block-summary-v-2 .option.icon-list{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-list-64-dark.png');background-size:32px}}.dialog-editor-block-tourdates .split-field .sqs-dialog-field{float:left;margin-right:0;white-space:nowrap;box-sizing:border-box}.dialog-editor-block-tourdates .split-field .sqs-datetime-picker-title{display:inline-block}.dialog-editor-block-tourdates .split-field .sqs-datetime-picker-description{display:inline-block;margin-left:6px}.dialog-editor-block-tourdates .split-field{margin:22px 0}.dialog-editor-block-tourdates .split-field .sqs-datetime-picker-hidden{display:none !important}.dialog-editor-block-tourdates .split-field .sqs-dialog-field{margin-right:0}.dialog-editor-block-tourdates .split-field .sqs-dialog-field:first-of-type{margin-right:10px}.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-text.name-searchTerm{display:inline-block;margin-top:-11px;margin-left:33px;margin-bottom:0;width:calc(100% -  77px ) !important;padding-right:0}.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-text.name-searchTerm.sqs-text-hidden{display:none}.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh{display:inline-block;margin-top:-11px;margin-bottom:0;width:44px !important}.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .sqs-button-content{background:transparent url('//assets.squarespace.com/universal/images-v6/damask/refresh-dark.png') center center no-repeat;cursor:pointer;background-color:#fff}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .sqs-button-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/refresh-dark@2x.png');background-size:16px 16px}}.standard-dialog-wrapper.dialog-twitter-block-editor .body-block>.tab-wrapper .sqs-dialog-field.sqs-button.name-refresh .label{visibility:hidden}.sqs-data-table .data-table-cell,.sqs-data-table .data-table-header{display:inline-block}.sqs-data-table .data-table-cell.insert-after,.sqs-data-table .data-table-header.insert-after{border-right:2px solid #000}.sqs-data-table .data-table-cell.dragging,.sqs-data-table .data-table-header.dragging{opacity:.5}.sqs-data-table .data-table-row{position:relative}.sqs-data-table .data-table-row.border-spacer .data-table-cell,.sqs-data-table .data-table-row.border-spacer .data-table-header{padding-bottom:2px}.sqs-data-table .data-table-row.insert-after{border-bottom:2px solid #000}.sqs-data-table .data-table-row.dragging{opacity:.5}.sqs-data-table .odd-row input{background:#e4e4e4}.sqs-data-table input{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;background:#f6f6f6;width:110px}.sqs-data-table input:focus{outline:none}.sqs-data-table input:hover+.col-select>.drag-handle{visibility:visible}.sqs-data-table input:focus{background:#fff}.sqs-data-table input:disabled{color:#a1a1a1}.sqs-data-table .skinny-col input{width:44px}.sqs-data-table .first-row input{border-bottom:1px solid #d0d0d0}.sqs-data-table .fill-row input{width:220px}.sqs-data-table .corner-spacer{display:inline-block}.sqs-data-table .corner-spacer input{width:132px}.sqs-data-table .row-select-spacer{width:22px;display:inline-block}.sqs-data-table .drag-handle{position:absolute;height:44px;width:22px;background:transparent url('//assets.squarespace.com/universal/images-v6/damask/handle.png') center center no-repeat;opacity:.2;cursor:move}.sqs-data-table .row-select{position:absolute;z-index:20;height:44px;width:22px}.sqs-data-table .col-select{position:relative;float:right;z-index:20;height:44px}.sqs-data-table .col-select .drag-handle{left:-22px;visibility:hidden}.sqs-data-table .col-select .drag-handle:hover,.sqs-data-table .col-select .drag-handle:active{visibility:visible}.sqs-data-table .drop-target-wrapper{position:relative;display:inline;vertical-align:top}.sqs-data-table .drop-target-wrapper .col-drop-target{position:absolute;height:44px;top:-3px;width:55px;left:-27.5px;z-index:-1}.sqs-data-table .drop-target-wrapper .row-drop-target{position:absolute;height:22px;width:110px;top:-11px;z-index:-1}.sqs-data-table .col-drag-proxy{left:-110px;position:absolute;opacity:.5}.sqs-data-table .row-drag-proxy{width:508px;white-space:nowrap;overflow:hidden;position:absolute;opacity:.5}.sqs-data-table div.inner-table{width:508px;height:354px;overflow:auto;white-space:nowrap;position:relative}.sqs-data-table .new-col-button,.sqs-data-table .new-row-button{position:absolute;padding:11px;font-size:24px;cursor:pointer;bottom:0}.sqs-data-table .new-col-button.disabled,.sqs-data-table .new-row-button.disabled{color:#a1a1a1;cursor:not-allowed}.sqs-data-table .trash-wrapper{position:relative}.sqs-data-table .chart-trash{height:50px;width:50px;left:50%;margin-left:-25px;z-index:90000;position:absolute;bottom:0px}.sqs-data-table .chart-trash-content{box-shadow:0 0 1px 1px rgba(255,255,255,.3);opacity:0;background:#000 url('/universal/images-v6/icons/skelecon-trash-16-light.png') center center no-repeat;border-radius:100px;height:50px;width:50px;transition:all .15s ease-in-out;transform:translate3d(0,25px,0);visibility:hidden}.sqs-data-table .chart-trash.yui3-dd-drop-over .chart-trash-content{transform:scale3d(1.2,1.2,1);transition:transform .1s ease-in-out;border:2px solid #14aaff;box-shadow:0 0 3px #14aaff}.sqs-data-table .table-wrapper.dragging .chart-trash-content{opacity:1;visibility:visible;transform:translate3d(0,0,0)}.sqs-table-import .option{display:inline-block;margin-right:22px}.sqs-table-import textarea{height:12em}.sqs-radio .option{position:relative}.sqs-radio .option:not(:first-child){margin-top:20px}.sqs-radio .option input[type=\"radio\"]{position:absolute;left:0;top:0;height:22px;width:22px;opacity:0}.sqs-radio .option input[type=\"radio\"]+label{padding-left:33px;cursor:pointer;font-weight:500}.sqs-radio .option input[type=\"radio\"]+label:before{content:' ';display:block;position:absolute;left:0;top:0;height:22px;width:22px;border:2px solid rgba(0,0,0,.045);border-radius:50%;box-sizing:border-box;transition:border-color .1s ease-in-out}.sqs-radio .option input[type=\"radio\"]+label:hover:before{border-color:rgba(121,121,121,.5)}.sqs-radio .option input[type=\"radio\"]:checked+label:before{border:8px solid #3e3e3e;animation-name:bounceIn;animation-duration:.4s;animation-iteration-count:once;animation-fill-mode:both}.sqs-radio .option input[type=\"radio\"]:checked+label:hover:before{border-color:#000}.sqs-radio-hidden{display:none}.chart-block-container h2{text-align:center;margin:0 0 15px 0}.chart-block-container .chart-block-caption figcaption{font-style:italic;display:block;border:1px solid rgba(0,0,0,.1);padding:7.5px;margin:15px 0 0 0}.chart-block-container .chart-block-content{overflow:hidden}.chart-block-container .chart-block-legend{display:none}.chart-block-container .chart-block-legend ul{margin:15px 15px 0 15px;padding:0;font-family:inherit;font-size:100%;font-weight:inherit}.chart-block-container .chart-block-legend li{display:inline-block;list-style-type:none;margin-right:15px;text-align:left;white-space:nowrap;overflow:hidden}.chart-block-container .chart-block-legend li span{display:inline-block;width:15px;height:15px;margin-right:7.5px;margin-bottom:-2px}.chart-type-1010 .chart-block-body.legend-visible .chart-block-legend.attach2,.chart-type-1009 .chart-block-body.legend-visible .chart-block-legend.attach2{display:block;text-align:center}.chart-type-1010 .chart-block-body.legend-visible .chart-block-legend.attach2 .legend-content,.chart-type-1009 .chart-block-body.legend-visible .chart-block-legend.attach2 .legend-content{display:inline-block}.chart-type-1011 .chart-block-body.legend-visible .chart-block-legend.attach1{display:block;position:relative}.chart-type-1011 .chart-block-body.legend-visible .chart-block-legend.attach1 ul{position:absolute;top:0;left:0}.chart-type-1011 .chart-block-body.legend-visible .chart-block-legend.attach1 li{display:block}.chart-type-1011.narrow-chart .chart-block-body.legend-visible .chart-block-legend.attach2{display:block;text-align:center}.chart-type-1011.narrow-chart .chart-block-body.legend-visible .chart-block-legend.attach2 .legend-content{display:inline-block}.chart-type-1011.narrow-chart .chart-block-body.legend-visible .chart-block-legend.attach1{display:none}.sqs-blockicon{position:relative;float:left;cursor:pointer !important;color:#3e3e3e;box-sizing:border-box;background-color:#fff}.sqs-blockicon-content{background-position:center 30%;background-repeat:no-repeat}html.blogapp .sqs-blockicon-content{background-size:28px;background-position:center 17px}.sqs-blockicon.yui3-dd-dragging,.sqs-blockicon.sqs-dd-dragging{opacity:.6;box-shadow:0 1px 8px rgba(0,0,0,.2);z-index:40000}.sqs-blockicon.yui3-dd-dragging .sqs-blockicon-content,.sqs-blockicon.sqs-dd-dragging .sqs-blockicon-content{position:absolute;height:100%;width:100%;background-color:#fff;padding-bottom:0}.sqs-blockicon .label{position:absolute;bottom:19%;left:0;right:0;text-align:center;font:400 normal 12px / 22px 'Clarkson','Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing:normal;font-weight:300;font-size:10px;letter-spacing:.02em}html.blogapp .sqs-blockicon .label{font-weight:500;bottom:9px;font-family:'Clarkson','Arial',sans-serif;font-size:9px;letter-spacing:1px;text-transform:uppercase;font-weight:600}.sqs-blockicon-hidden{display:none}html:not(.blogapp) .sqs-blockicon-html .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/text-24.png')}html:not(.blogapp) .sqs-blockicon-markdown .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/markdown-24.png')}html:not(.blogapp) .sqs-blockicon-image .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-24.png')}html:not(.blogapp) .sqs-blockicon-image-poster .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-poster-24.png')}html:not(.blogapp) .sqs-blockicon-image-card .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-card-24.png')}html:not(.blogapp) .sqs-blockicon-image-overlap .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-overlap-24.png')}html:not(.blogapp) .sqs-blockicon-image-collage .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-collage-24.png')}html:not(.blogapp) .sqs-blockicon-image-stack .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-stack-24.png')}html:not(.blogapp) .sqs-blockicon-quote .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/quote-24.png')}html:not(.blogapp) .sqs-blockicon-code .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/code-24.png')}html:not(.blogapp) .sqs-blockicon-menu .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/menu-24.png')}html:not(.blogapp) .sqs-blockicon-map .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-24.png')}html:not(.blogapp) .sqs-blockicon-rss .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/rss-24.png')}html:not(.blogapp) .sqs-blockicon-gallery .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-24.png')}html:not(.blogapp) .sqs-blockicon-calendar .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-24.png')}html:not(.blogapp) .sqs-blockicon-spacer .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spacer-24.png')}html:not(.blogapp) .sqs-blockicon-horizontal-rule .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-24.png')}html:not(.blogapp) .sqs-blockicon-search .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-24.png')}html:not(.blogapp) .sqs-blockicon-embed .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/embed-24.png')}html:not(.blogapp) .sqs-blockicon-twitter .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-24.png')}html:not(.blogapp) .sqs-blockicon-foursquare .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/foursquare-24.png')}html:not(.blogapp) .sqs-blockicon-flickr .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-24.png')}html:not(.blogapp) .sqs-blockicon-fivehundredpix .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-24.png')}html:not(.blogapp) .sqs-blockicon-instagram .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/instagram-24.png')}html:not(.blogapp) .sqs-blockicon-summary .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/summary-24.png')}html:not(.blogapp) .sqs-blockicon-summary-v2 .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/summary-24.png')}html:not(.blogapp) .sqs-blockicon-posts-by-author .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/author-24.png')}html:not(.blogapp) .sqs-blockicon-posts-by-tag .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tag-index-24.png')}html:not(.blogapp) .sqs-blockicon-posts-by-category .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/collection-index-24.png')}html:not(.blogapp) .sqs-blockicon-posts-by-month .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/month-24.png')}html:not(.blogapp) .sqs-blockicon-archive .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/month-24.png')}html:not(.blogapp) .sqs-blockicon-tagcloud .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tag-cloud-24.png')}html:not(.blogapp) .sqs-blockicon-collection-link .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-link-24.png')}html:not(.blogapp) .sqs-blockicon-button .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/button-24.png')}html:not(.blogapp) .sqs-blockicon-amazon .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/amazon-24.png')}html:not(.blogapp) .sqs-blockicon-audio .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/audio-24.png')}html:not(.blogapp) .sqs-blockicon-opentable .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/opentable-24.png')}html:not(.blogapp) .sqs-blockicon-social-links .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/social-links-24.png')}html:not(.blogapp) .sqs-blockicon-product .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/product-24.png')}html:not(.blogapp) .sqs-blockicon-form .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/form-24.png')}html:not(.blogapp) .sqs-blockicon-newsletter .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/newsletter-24.png')}html:not(.blogapp) .sqs-blockicon-video .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/video-24.png')}html:not(.blogapp) .sqs-blockicon-donation .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/donation-24.png')}html:not(.blogapp) .sqs-blockicon-member-area .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/member-area-24.png')}html:not(.blogapp) .sqs-blockicon-soundcloud .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-24.png')}html:not(.blogapp) .sqs-blockicon-tourdates .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-24.png')}html:not(.blogapp) .sqs-blockicon-album .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/album-24.png')}html:not(.blogapp) .sqs-blockicon-gallery-slideshow .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/slideshow-24.png')}html:not(.blogapp) .sqs-blockicon-gallery-carousel .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/carousel-24.png')}html:not(.blogapp) .sqs-blockicon-gallery-grid .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/grid-24.png')}html:not(.blogapp) .sqs-blockicon-gallery-stack .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stack-24.png')}html:not(.blogapp) .sqs-blockicon-summary-wall .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-wall-24.png')}html:not(.blogapp) .sqs-blockicon-summary-carousel .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-carousel-24.png')}html:not(.blogapp) .sqs-blockicon-summary-list .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-list-24.png')}html:not(.blogapp) .sqs-blockicon-summary-grid .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-grid-24.png')}html:not(.blogapp) .sqs-blockicon-chart-line .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-line-24.png')}html:not(.blogapp) .sqs-blockicon-chart-bar .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-bar-24.png')}html:not(.blogapp) .sqs-blockicon-chart-pie .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-pie-24.png')}html:not(.blogapp) .sqs-blockicon-zola .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/zola-24.png')}html:not(.blogapp) .sqs-blockicon-acuity .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/acuity-24.png')}html.blogapp .sqs-blockicon-html .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-text-32-dark.png')}html.blogapp .sqs-blockicon-markdown .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-markdown-32-dark.png')}html.blogapp .sqs-blockicon-image .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-image-32-dark.png')}html.blogapp .sqs-blockicon-video .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-video-32-dark.png')}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:192),(min-resolution:192dppx){html:not(.blogapp) .sqs-blockicon-content{background-size:24px}html:not(.blogapp) .sqs-blockicon-html .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/text-48.png')}html:not(.blogapp) .sqs-blockicon-markdown .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/markdown-48.png')}html:not(.blogapp) .sqs-blockicon-image .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-48.png')}html:not(.blogapp) .sqs-blockicon-image-poster .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-poster-48.png')}html:not(.blogapp) .sqs-blockicon-image-card .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-card-48.png')}html:not(.blogapp) .sqs-blockicon-image-overlap .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-overlap-48.png')}html:not(.blogapp) .sqs-blockicon-image-collage .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-collage-48.png')}html:not(.blogapp) .sqs-blockicon-image-stack .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/image-block-stack-48.png')}html:not(.blogapp) .sqs-blockicon-quote .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/quote-48.png')}html:not(.blogapp) .sqs-blockicon-code .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/code-48.png')}html:not(.blogapp) .sqs-blockicon-menu .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/menu-48.png')}html:not(.blogapp) .sqs-blockicon-map .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/map-48.png')}html:not(.blogapp) .sqs-blockicon-rss .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/rss-48.png')}html:not(.blogapp) .sqs-blockicon-gallery .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/gallery-48.png')}html:not(.blogapp) .sqs-blockicon-calendar .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/calendar-48.png')}html:not(.blogapp) .sqs-blockicon-spacer .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/spacer-48.png')}html:not(.blogapp) .sqs-blockicon-horizontal-rule .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/line-48.png')}html:not(.blogapp) .sqs-blockicon-search .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/search-48.png')}html:not(.blogapp) .sqs-blockicon-embed .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/embed-48.png')}html:not(.blogapp) .sqs-blockicon-twitter .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/twitter-48.png')}html:not(.blogapp) .sqs-blockicon-foursquare .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/foursquare-48.png')}html:not(.blogapp) .sqs-blockicon-flickr .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/flickr-48.png')}html:not(.blogapp) .sqs-blockicon-fivehundredpix .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/500px-48.png')}html:not(.blogapp) .sqs-blockicon-instagram .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/instagram-48.png')}html:not(.blogapp) .sqs-blockicon-summary .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/summary-48.png')}html:not(.blogapp) .sqs-blockicon-summary-v2 .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/summary-48.png')}html:not(.blogapp) .sqs-blockicon-posts-by-author .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/author-48.png')}html:not(.blogapp) .sqs-blockicon-posts-by-tag .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tag-index-48.png')}html:not(.blogapp) .sqs-blockicon-posts-by-category .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/collection-index-48.png')}html:not(.blogapp) .sqs-blockicon-posts-by-month .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/month-48.png')}html:not(.blogapp) .sqs-blockicon-archive .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/month-48.png')}html:not(.blogapp) .sqs-blockicon-tagcloud .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/tag-cloud-48.png')}html:not(.blogapp) .sqs-blockicon-collection-link .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-link-48.png')}html:not(.blogapp) .sqs-blockicon-button .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/button-48.png')}html:not(.blogapp) .sqs-blockicon-amazon .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/amazon-48.png')}html:not(.blogapp) .sqs-blockicon-audio .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/audio-48.png')}html:not(.blogapp) .sqs-blockicon-opentable .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/opentable-48.png')}html:not(.blogapp) .sqs-blockicon-social-links .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/social-links-48.png')}html:not(.blogapp) .sqs-blockicon-product .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/product-48.png')}html:not(.blogapp) .sqs-blockicon-form .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/form-48.png')}html:not(.blogapp) .sqs-blockicon-newsletter .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/newsletter-48.png')}html:not(.blogapp) .sqs-blockicon-video .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/video-48.png')}html:not(.blogapp) .sqs-blockicon-donation .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/donation-48.png')}html:not(.blogapp) .sqs-blockicon-member-area .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/member-area-48.png')}html:not(.blogapp) .sqs-blockicon-soundcloud .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/soundcloud-48.png')}html:not(.blogapp) .sqs-blockicon-tourdates .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/bandsintown-48.png')}html:not(.blogapp) .sqs-blockicon-album .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/album-48.png')}html:not(.blogapp) .sqs-blockicon-gallery-slideshow .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/slideshow-48.png')}html:not(.blogapp) .sqs-blockicon-gallery-carousel .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/carousel-48.png')}html:not(.blogapp) .sqs-blockicon-gallery-grid .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/grid-48.png')}html:not(.blogapp) .sqs-blockicon-gallery-stack .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/stack-48.png')}html:not(.blogapp) .sqs-blockicon-summary-wall .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-wall-48.png')}html:not(.blogapp) .sqs-blockicon-summary-carousel .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-carousel-48.png')}html:not(.blogapp) .sqs-blockicon-summary-list .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-list-48.png')}html:not(.blogapp) .sqs-blockicon-summary-grid .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/content-grid-48.png')}html:not(.blogapp) .sqs-blockicon-chart-line .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-line-48.png')}html:not(.blogapp) .sqs-blockicon-chart-bar .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-bar-48.png')}html:not(.blogapp) .sqs-blockicon-chart-pie .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/chart-pie-48.png')}html:not(.blogapp) .sqs-blockicon-zola .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/zola-48.png')}html:not(.blogapp) .sqs-blockicon-acuity .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/damask/acuity-48.png')}html.blogapp .sqs-blockicon-html .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-text-64-dark.png')}html.blogapp .sqs-blockicon-markdown .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-markdown-64-dark.png')}html.blogapp .sqs-blockicon-image .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-image-64-dark.png')}html.blogapp .sqs-blockicon-video .sqs-blockicon-content{background-image:url('//assets.squarespace.com/universal/images-v6/icon/skelecon-video-64-dark.png')}}.sqs-legacy-stateflow{cursor:pointer}.sqs-legacy-stateflow .field-workflow-title{font-size:16px}.sqs-legacy-stateflow .field-workflow-description{font-size:11px;color:#797979}.sqs-legacy-stateflow .date-wrapper,.sqs-legacy-stateflow .duration-wrapper{border-bottom:1px solid #797979;transition:border-color .1s ease-in-out}.sqs-legacy-stateflow .date-wrapper:hover,.sqs-legacy-stateflow .duration-wrapper:hover{color:#3e3e3e;border-color:#3e3e3e}.sqs-scheduler,.sqs-statepicker{margin:0;position:absolute;z-index:40000}.sqs-scheduler .sqs-statepicker-content .workflow-flyout,.sqs-statepicker .sqs-statepicker-content .workflow-flyout,.sqs-scheduler .sqs-scheduler-content .workflow-flyout,.sqs-statepicker .sqs-scheduler-content .workflow-flyout{position:static;display:block}.sqs-scheduler-hidden,.sqs-statepicker-hidden{display:none}.sqs-statepicker{position:absolute}.sqs-statepicker-hidden{display:none}.sqs-datetime-picker-time-disabled .time-wrapper.sqs-dialog-field{display:none}.sqs-dialog-field.sqs-stringset{margin-top:0;margin-bottom:0;transition:opacity .1s ease-in-out}.sqs-dialog-field.sqs-stringset-hidden{opacity:0}.sqs-dialog-field.sqs-stringset .field-input-wrapper{box-sizing:border-box;position:relative;background-color:#fff;padding:11px;line-height:22px;height:44px;width:100%;color:#3e3e3e;border:none;background-color:transparent;padding:0 5.5px;height:auto;cursor:pointer}.sqs-dialog-field.sqs-stringset .field-input-wrapper:focus{outline:none}.sqs-dialog-field.sqs-stringset .add-header{color:#797979}.sqs-dialog-field.sqs-stringset .field-description-wrapper{display:none}.sqs-dialog-field.sqs-stringset.name-countries .field-description-wrapper{display:block;font-size:11px;color:#797979}.sqs-dialog-field.sqs-stringset-input-editor-hidden{margin:0}.sqs-stringset .tag-field{overflow:hidden}.sqs-stringset .tag-field-container{position:relative;display:inline-block;white-space:nowrap;padding-right:15px}.sqs-variants-table .viewport{position:relative;overflow-x:auto}.sqs-variants-table .shipping-warning{transition-property:all;transition-duration:.3s;max-height:0;overflow-y:hidden;opacity:0}.sqs-variants-table .shipping-warning.visible{max-height:100px;opacity:1}.sqs-variants-table .shipping-warning .warning-icon{display:inline-block;margin:-10px 8px -8px 0;width:24px;height:24px;opacity:.76;background:url('//assets.squarespace.com/universal/images-v6/damask/alert-32-dark.png');background-size:24px}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-variants-table .shipping-warning .warning-icon{background-image:url('//assets.squarespace.com/universal/images-v6/damask/alert-64-dark.png');background-size:24px}}.sqs-variants-table .shipping-warning .violation{margin-left:44px}.sqs-variants-table .shipping-warning-content{padding:11px;margin:11px 0;background:#e4e4e4}.sqs-variants-table .header{white-space:nowrap;border-bottom:1px solid #e4e4e4;font-weight:500;height:44px}.sqs-variants-table .header .option{line-height:44px}.sqs-variants-table .body{white-space:nowrap}.sqs-variants-table .variant-row{height:74px;border-bottom:1px solid #e4e4e4;cursor:move}.sqs-variants-table .original-price{text-decoration:line-through}.sqs-variants-table .attributes{display:inline-block;vertical-align:top}.sqs-variants-table .option{cursor:pointer}.sqs-variants-table .option .label{display:inline-block}.sqs-variants-table .attribute input{background-color:transparent;width:100%;text-align:center;line-height:22px;padding-top:11px;padding-bottom:11px}.sqs-variants-table .attribute input:hover,.sqs-variants-table .attribute input:active{background:#fff}.sqs-variants-table .option,.sqs-variants-table .attribute{display:inline-block;line-height:74px;width:120px;text-align:center;vertical-align:top;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sqs-variants-table .option .label,.sqs-variants-table .attribute .label{display:inline-block}.sqs-variants-table .option-image,.sqs-variants-table .attribute-image{text-align:left;width:94px}.sqs-variants-table .sqs-variant-image-input{background-color:#fff;width:52px;height:52px;margin:11px 0;border:1px solid #e1e1e1;box-sizing:border-box;border-radius:2px;overflow:hidden;cursor:pointer}.sqs-variants-table .variant-image{width:52px;height:52px;object-fit:cover}.sqs-variants-table .variant-image-placeholder{margin-left:auto;margin-right:auto;display:block;position:relative;top:18px}.sqs-variants-table .option-sku,.sqs-variants-table .attribute-sku input{padding-left:5.5px;text-align:left;box-sizing:border-box}.sqs-variants-table .option-pricing,.sqs-variants-table .attribute-pricing{width:145px;text-align:right;margin-right:25px}.sqs-variants-table .option-denominations{width:145px;text-align:right;margin-right:25px;padding-right:11px}.sqs-variants-table .attribute-sku,.sqs-variants-table .option-sku{width:100px}.sqs-variants-table .option-stock,.sqs-variants-table .attribute-stock{width:90px}.sqs-variants-table .attribute-pricing,.sqs-variants-table .attribute-stock,.sqs-variants-table .attribute-dimensions{cursor:pointer}.sqs-variants-table .question{height:22px;width:22px;background:#e4e4e4;border-radius:100%;line-height:22px;font-size:11px;display:inline-block;margin-left:5.5px}.sqs-variants-table .add-option,.sqs-variants-table .add-variant{height:44px;width:44px;cursor:pointer;display:inline-block;vertical-align:top;background:#f6f6f6 url('/universal/images-v6/damask/add-dark.png') center center no-repeat}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-variants-table .add-option,.sqs-variants-table .add-variant{background-image:url('/universal/images-v6/damask/add-dark@2x.png');background-size:16px}}.sqs-variants-table .add-option img,.sqs-variants-table .add-variant img{display:none}.sqs-variants-table .hidden{display:none}.sqs-variants-table .remove-variant{height:44px;width:44px;display:inline-block;background:transparent url('/universal/images-v6/damask/trash-15-dark.png') center center no-repeat;cursor:pointer;margin:15px 0}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.sqs-variants-table .remove-variant{background-image:url('/universal/images-v6/damask/trash-15-dark@2x.png');background-size:15px}}.sqs-variants-table .gift-card-amount-input{text-align:right !important;padding-right:11px}.sqs-variants-table .sqs-variant-cell-money-input-trim-cents{padding-right:11px}.flyout-variant-edit{padding:10px}.flyout-variant-edit .fields{background:#f6f6f6;border:1px solid #e4e4e4;padding:11px;position:relative;z-index:10;box-shadow:0 4px 10px rgba(0,0,0,.22), 0 0 0 1px rgba(0,0,0,.04)}.flyout-variant-edit .notch{height:5px}.flyout-variant-edit .notch:after{content:' ';height:8px;width:8px;position:absolute;bottom:12px;left:50%;background:#e4e4e4;-webkit-transform:rotate(45deg)}.flyout-variant-edit .fields .sqs-widget{display:inline-block;width:80px;margin-right:11px}.flyout-variant-edit .fields .sqs-widget:last-child{margin-right:0}.flyout-variant-edit .fields .sqs-widget .title{margin-bottom:5.5px;font-size:11px;line-height:11px;text-align:center}.flyout-variant-edit .fields .sqs-widget input{width:100%;padding:5.5px 0;box-sizing:border-box;text-align:center}.flyout-variant-edit .fields .sqs-widget input:disabled{color:#999}.flyout-variant-edit.stock .sqs-widget{width:120px}.flyout-variant-edit.stock .sqs-basic-check{width:80px}.flyout-variant-edit .sqs-basic-check{vertical-align:top}.flyout-variant-edit .sqs-basic-check .title{cursor:pointer}.flyout-variant-edit .sqs-basic-check .check-element{padding-left:33px;cursor:pointer;position:relative;margin-top:11px;margin-left:-11px;left:50%}.flyout-variant-edit .sqs-basic-check .check-element:before{z-index:1;display:block;content:' ';height:22px;width:22px;position:absolute;left:0;top:0;border-radius:50%;border:2px solid rgba(121,121,121,.19999999999999996);box-sizing:border-box;transition:border-color .1s ease-in-out}.flyout-variant-edit .sqs-basic-check .check-element:hover:before{border-color:rgba(121,121,121,.5)}.flyout-variant-edit .sqs-basic-check .check-element.active:before{border-color:#3e3e3e}.flyout-variant-edit .sqs-basic-check .check-element.active:before{opacity:0}.flyout-variant-edit .sqs-basic-check .check-element:after{z-index:2;display:block;content:' ';height:22px;width:22px;position:absolute;left:0;top:0;border-radius:50%;box-sizing:border-box;background:#3e3e3e url('//assets.squarespace.com/universal/images-v6/damask/checkmark-light.png') center center no-repeat;background-size:9px;transform:scale(0);animation-fill-mode:both}@media (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx){.flyout-variant-edit .sqs-basic-check .check-element:after{background-image:url('//assets.squarespace.com/universal/images-v6/damask/checkmark-light@2x.png');background-size:9px}}.flyout-variant-edit .sqs-basic-check .check-element.active:after{opacity:1;animation-name:bounceIn;animation-duration:.4s;animation-iteration-count:once;animation-fill-mode:both;transition:background-color .2s ease-in-out}.flyout-variant-edit .sqs-basic-check .check-element.active:hover:after{background-color:#000}.standard-dialog-wrapper.dialog-event-post-editor .split-field{margin-top:22px}.standard-dialog-wrapper.dialog-event-post-editor .sqs-datetime-picker{margin-bottom:22px}.dialog-editproduct .sqs-dialog-field.name-customAddButtonText{margin-left:33px}.dialog-editproduct .sqs-dialog-field.name-customAddButtonText input[type=\"text\"]{width:461px}.dialog-editproduct .main-container{position:relative}.standard-dialog-wrapper.dialog-subscription-settings .split-field{margin-top:inherit;margin-bottom:11px}.standard-dialog-wrapper.dialog-subscription-settings .split-field>:first-child{margin-right:22px}.standard-dialog-wrapper.dialog-subscription-settings .split-field>.name-period-unit{vertical-align:bottom}.standard-dialog-wrapper.dialog-subscription-settings .warning-text{margin-top:22px;color:#797979}.dialog-text-post-editor .sqs-dialog-item-push .sqs-connected-account{padding:11px 0}.dialog-text-post-editor .sqs-dialog-item-push .sqs-connected-account .names{max-width:240px}.dialog-text-post-editor .sqs-dialog-item-push .sqs-connected-account .icon{top:auto}.sqs-slide{position:absolute;top:0;left:0;width:100%;height:100%;text-rendering:optimizeLegibility;opacity:0;box-sizing:border-box}html.browser-safari .sqs-slide{-webkit-font-smoothing:antialiased}.sqs-slide.sqs-slide-ready{opacity:1;transition:opacity .5s cubic-bezier(.33,0,.2,1)}.captcha-container.rendered{margin-bottom:24px;width:304px}.captcha-container.rendered.align-center{margin-left:auto;margin-right:auto}.captcha-container.rendered.align-right{margin-left:auto}.sqs-async-form-content .field-error{border-radius:2px;background:#cc3b3b url('//assets.squarespace.com/universal/images-v6/standard/icon_close_7_light.png') no-repeat 9px 50%;color:#fff;display:inline-block;font-size:13px;line-height:23px;margin:12px 0;padding:5px 15px 3px 25px}.sqs-async-form-content .form-wrapper .field-list{line-height:normal}.sqs-async-form-content .form-wrapper .field-list fieldset,.sqs-async-form-content .form-wrapper .field-list legend{margin:0;padding:0;border:0}.sqs-async-form-content .form-wrapper .field-list textarea{min-height:100px;resize:vertical}.sqs-async-form-content .form-wrapper .field-list textarea.medium{min-height:200px}.sqs-async-form-content .form-wrapper .field-list textarea.large{min-height:300px}.sqs-async-form-content .form-wrapper .field-list .section{margin:2em 0;padding-bottom:.3em;font-size:.9em}.sqs-async-form-content .form-wrapper .field-list .section.underline{border-bottom:1px solid #999}.sqs-async-form-content .form-wrapper .field-list .section:nth-child(1){margin:0 0 2em 0}.sqs-async-form-content .form-wrapper .field-list .title{display:block}.sqs-async-form-content .form-wrapper .field-list .description{padding:.5em 0 .5em;font-size:12px;opacity:.7;display:block;white-space:pre-wrap}.sqs-async-form-content .form-wrapper .field-list .field{position:relative;margin:0 0 24px}.sqs-async-form-content .form-wrapper .field-list .field .caption{font-size:12px}.sqs-async-form-content .form-wrapper .field-list .field .caption .field-element{font-size:14px}.sqs-async-form-content .form-wrapper .field-list .field .field-element{width:100%;padding:12px;margin:6px 0 4px;border:1px solid #ccc;background:#fafafa;color:#000;font-family:sans-serif;font-size:12px;line-height:normal;box-sizing:border-box;border-radius:2px}.sqs-async-form-content .form-wrapper .field-list .field .field-element:focus{background:#fff;transition:background .1s ease-in}.sqs-async-form-content .form-wrapper .field-list .field select{margin:6px 0 4px;max-width:100%}.sqs-async-form-content .form-wrapper .field-list .field .prefix{position:absolute;bottom:16px;left:8px;color:#aaa;font-family:sans-serif;font-size:13px;line-height:16px}.sqs-async-form-content .form-wrapper .field-list .field.twitter .field-element{padding-left:22px}.sqs-async-form-content .form-wrapper .field-list .field.currency.hassymbol .field-element{padding-left:20px}.sqs-async-form-content .form-wrapper .field-list .field.website .field-element{padding-left:45px}.sqs-async-form-content .form-wrapper .field-list .field.checkbox label,.sqs-async-form-content .form-wrapper .field-list .field.radio label{cursor:pointer}.sqs-async-form-content .form-wrapper .field-list .field.checkbox input,.sqs-async-form-content .form-wrapper .field-list .field.radio input{margin-right:5px}.sqs-async-form-content .form-wrapper .field-list .field .option{margin:6px 0 4px;font-size:13px}.sqs-async-form-content .form-wrapper .field-list .field.likert .item{overflow:hidden;margin:1.6em 0 1.6em 0}.sqs-async-form-content .form-wrapper .field-list .field.likert .question{margin:0 0 .5em 0;font-size:.9em}.sqs-async-form-content .form-wrapper .field-list .field.likert .option{width:20%;float:left;text-align:left;border-top:1px solid #ddd}.sqs-async-form-content .form-wrapper .field-list .field.likert .option label{margin:0;padding:0 0 0 1px;font-size:.9em;display:block;cursor:pointer}.sqs-async-form-content .form-wrapper .field-list .field.likert .option input{margin:10px 0;display:block}.sqs-async-form-content .form-wrapper .field-list .field.likert .option:last-of-type{border-right:none}.sqs-async-form-content .form-wrapper .field-list .fields{margin:0 0 0 -2%}.sqs-async-form-content .form-wrapper .field-list .fields .title,.sqs-async-form-content .form-wrapper .field-list .fields .description,.sqs-async-form-content .form-wrapper .field-list .fields .field,.sqs-async-form-content .form-wrapper .field-list .fields .field-error{margin-left:2%}.sqs-async-form-content .form-wrapper .field-list .fields .field{float:left}.sqs-async-form-content .form-wrapper .field-list .fields .field.two-digits{width:3.5em}.sqs-async-form-content .form-wrapper .field-list .fields .field.three-digits{width:4.2em}.sqs-async-form-content .form-wrapper .field-list .fields .field.four-digits{width:4.8em}.sqs-async-form-content .form-wrapper .field-list .fields .field.ampm{width:4.5em}.sqs-async-form-content .form-wrapper .field-list .fields.name .field{width:48%}.sqs-async-form-content .form-wrapper .field-list .fields.address .field.address1,.sqs-async-form-content .form-wrapper .field-list .fields.address .field.address2{width:98%}.sqs-async-form-content .form-wrapper .field-list .fields.address .field.city{width:70%}.sqs-async-form-content .form-wrapper .field-list .fields.address .field.state-province{width:26%}.sqs-async-form-content .form-wrapper .field-list .fields.address .field.zip{width:36%}.sqs-async-form-content .form-wrapper .field-list .fields.address .field.country{width:98%}.sqs-async-form-content .form-wrapper .field-list .fields.payment .field.card-expiry-month{width:40%}.sqs-async-form-content .form-wrapper .field-list .fields.payment .field.card-expiry-year{width:40%}.sqs-async-form-content .form-wrapper .field-list .form-item.error,.sqs-async-form-content .form-wrapper .field-list .form-item.error .caption,.sqs-async-form-content .form-wrapper .field-list .form-item.error .title,.sqs-async-form-content .form-wrapper .field-list .form-item.error .description{color:#bd0000}.sqs-async-form-content .form-wrapper .field-list .form-item.error input,.sqs-async-form-content .form-wrapper .field-list .form-item.error textarea{border:1px solid #e99292}.sqs-async-form-content .form-wrapper .form-button-wrapper--align-left{text-align:left}.sqs-async-form-content .form-wrapper .form-button-wrapper--align-center{text-align:center}.sqs-async-form-content .form-wrapper .form-button-wrapper--align-right{text-align:right}.sqs-async-form-content .form-wrapper input[type=submit]{display:inline-block;width:auto;height:auto;padding:1em 2.5em;color:#fff;background-color:#272727;border-width:0;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:12px;line-height:1em;font-weight:normal;font-style:normal;text-transform:uppercase;letter-spacing:0px;text-align:center;text-decoration:none;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:14px;text-transform:none}.sqs-async-form-content .form-wrapper .form-submission-text{margin-top:20px}.sqs-async-form-content .form-wrapper .field .field-error{margin-bottom:.5em}.sqs-async-form-content .form-wrapper .submitting .field-list{opacity:.7}.sqs-async-form-content .form-wrapper .hidden,.sqs-async-form-content .form-wrapper.hidden{display:none}.sqs-async-form-content.saving{opacity:.5}",""])},13041:function(e,t){e.exports="data:image/svg+xml,%3Csvg width='22' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.8 11a1.8 1.8 0 11-3.6 0 1.8 1.8 0 013.6 0zM4.8 11a1.8 1.8 0 11-3.6 0 1.8 1.8 0 013.6 0zM19 12.8a1.8 1.8 0 100-3.6 1.8 1.8 0 000 3.6z' fill='%23313131'/%3E%3C/svg%3E"},13042:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));var c=i(a(8));var s=i(a(9));function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var o=a(0);var u=a(60);var g=a(13043);var p=a(11569);var h=a(11792);var f=a(13054);var m=a(13057);var v=a(13058);var b=a(13059);var y=a(13062);var S=a(8151);var q=a(13063);var _=a(13064);var l=function(){function l(e){var t=this;var a=e.contentModeController,i=e.placeLastClassifications,n=e.overlayEditorClassName,s=e.win,r=e.mouse,o=e.allocateTopLeftCorner;(0,c.default)(this,l);this.contentModeController=a;this.placeLastClassifications=i;this.overlayEditorClassName=n;this.win=s;this.mouse=r;this.allocateTopLeftCorner=o;this.mouseMoving=false;this.clearBoundingClientRectCache();this.renderAnnotations();this.repaintRequest=S(function(){return t.evaluateAnnotations()});this.handleMouseMove=function(){t.mouseMoved();t.repaintRequest()};this.win.addEventListener("mousemove",this.handleMouseMove);this.invalidateAndRequestRepaint=function(){t.clearBoundingClientRectCache();t.repaintRequest()};this.win.addEventListener("scroll",this.invalidateAndRequestRepaint);this.win.addEventListener("resize",this.invalidateAndRequestRepaint);this.repaintRequest()}(0,s.default)(l,[{key:"destroy",value:function e(){this.destroyAnnotations();this.win.removeEventListener("mousemove",this.handleMouseMove);this.win.removeEventListener("scroll",this.invalidateAndRequestRepaint);this.win.removeEventListener("resize",this.invalidateAndRequestRepaint);this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer);this.repaint=null;this.handleScroll=null;this.win=null;this.invalidateAndRequestRepaint=null;this.repaintRequest=null}},{key:"evaluateAnnotations",value:function e(){var t=this;var a=this.contentModeController,i=this.placeLastClassifications,n=this.overlayEditorClassName,s=this.win,r=this.mouse;if(null===s){console.warn("repaint called after destroy!");return}if(!h.getState().visible)return;var o=_({contentModeController:a,placeLastClassifications:i}).map(function(e){return m(e,n)}).filter(function(e){return e&&e.hasPermission&&e.referenceNode&&e.visible}).map(function(e){return d({},e,{referenceNodeRect:t.getBoundingClientRect(e.referenceNode)})}).filter(function(e){var t=e.referenceNodeRect,a=e.referenceNode;return q(t,a)&&y(s,t)});f(o,this.allocateTopLeftCorner);o=o.map(function(e){return d({},e,{isNearby:t.mouseMoving&&b(e.referenceNodeRect,r,s),test:true,positionStyles:v(e.referenceNodeRect,e.alignPoint,s,e.placeInside)})});p.setOverlayEditors.defer(o)}},{key:"mouseMoved",value:function e(){var t=this;this.mouseMoving=true;this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer);this.mouseMoveTimer=this.win.setTimeout(function(){t.mouseMoving=false;t.mouseMoveTimer=null;t.repaintRequest()},3500)}},{key:"renderAnnotations",value:function e(){this.annotationMountNode=this.win.document.createElement("div");this.win.document.body.appendChild(this.annotationMountNode);u.render(o.createElement(g),this.annotationMountNode)}},{key:"destroyAnnotations",value:function e(){u.unmountComponentAtNode(this.annotationMountNode);this.annotationMountNode.parentNode&&this.annotationMountNode.parentNode.removeChild(this.annotationMountNode)}},{key:"getBoundingClientRect",value:function e(t){var a=this._cache.find(function(e){return e.node===t});if(a)return a.rect;var i=t.getBoundingClientRect();this._cache.push({node:t,rect:i});return i}},{key:"clearBoundingClientRectCache",value:function e(){this._cache=[]}}]);return l}();e.exports=l},13043:function(e,t,a){"use strict";var i=a(74);var n=a(13044);var o=a(11792);var s=i({getStores:function e(){return[o]},getPropsFromStores:function e(){var t=o.getState(),a=t.overlayEditors,i=t.editorOverlay,n=t.visible,s=t.mouseOverNode,r=t.pageSectionNodes;return{overlayEditors:a,editorOverlay:i,visible:n,mouseOverNode:s,pageSectionNodes:r}}},n);e.exports=s},13044:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var u=a(1);var p=a(0);var g=a(263),h=g.CSSTransitionGroup;var f=a(13045);var m=a(13046);var v=a(13047);var b=a(13048);var y=a(11569);var S=a(13049);var q=a(522);var _="sqs-frontend-overlay-editor-widget-host-over";var C=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.overlayEditors,i=t.editorOverlay,n=t.visible,g=t.mouseOverNode;if(q.isSevenOne())return p.createElement(S,null);if(0===a.length)return null;if(!n)return null;return p.createElement("div",null,a.map(function(e){var t=e.label,a=e.positionStyles,i=e.isMouseOver,n=e.referenceNode,s=e.buttons,r=e.isNearby,o=e.key,l=e.instrumentationDescription,c=e.classNames,d=e.trackButtonClick;var u=i||n===g||r;return p.createElement(m,{key:o,isActive:u,label:t,positionStyles:a,classNames:c,onMouseOverOverlayChange:function e(t){n.classList.toggle(_,t);y.setMouseOver({referenceNode:n,isOver:t})},instrumentationDescription:l,buttons:s,trackButtonClick:d})}),p.createElement(h,{transitions:f.surroundingOverlay},i&&p.createElement(b,{hostNode:i.hostNode})),i&&p.createElement(v,i))}}]);return a}(p.Component);(0,c.default)(C,"propTypes",{overlayEditors:u.arrayOf(u.shape({label:u.string,buttons:u.arrayOf(u.object),positionStyles:u.object,referenceNode:u.object,isNearby:u.bool,isMouseOver:u.bool,instrumentationDescription:u.string,classNames:u.arrayOf(u.string),trackButtonClick:u.func})),editorOverlay:u.object,visible:u.bool,mouseOverNode:u.object});e.exports=C},13045:function(e,t,a){"use strict";var i={enter:{className:"sqs-surrounding-overlay-container-enter",from:{opacity:0},to:{opacity:1}},leave:{className:"sqs-surrounding-overlay-container-leave",from:{opacity:1},to:{opacity:0}}};var n={surroundingOverlay:i};e.exports=n},13046:function(e,t,a){"use strict";var i=a(4);var l=i(a(5));var c=i(a(19));var r=i(a(8));var o=i(a(9));var d=i(a(6));var u=i(a(10));var s=i(a(11));var g=i(a(7));var p=i(a(2));function h(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,g.default)(i),t;if(n()){var a=(0,g.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=a(1);var f=a(0);var m=a(15);var v=a(12384);var b="sqs-frontend-overlay-editor-widget";var y=function(e){(0,u.default)(s,e);var n=h(s);function s(){var e;(0,r.default)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=n.call.apply(n,[this].concat(a));(0,p.default)((0,d.default)(e),"handleOnMouseEnter",function(){e.props.onMouseOverOverlayChange(true)});(0,p.default)((0,d.default)(e),"handleOnMouseLeave",function(){e.props.onMouseOverOverlayChange(false)});return e}(0,o.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.label,i=t.positionStyles,n=t.buttons,s=t.className,r=t.isActive,o=t.classNames;return f.createElement("div",{className:m(b,s,(0,p.default)({},b+"-visible",r),o),style:i},f.createElement("div",{className:b+"-content",onMouseEnter:this.handleOnMouseEnter,onMouseLeave:this.handleOnMouseLeave},f.createElement("div",{className:b+"-label"},a),f.createElement("div",{className:b+"-buttons-wrapper"},n.map(function(e){var t=e.handleClick,a=(0,c.default)(e,["handleClick"]);return f.createElement(v,(0,l.default)({handleClick:t,key:a.name},a))}))))}}]);return s}(f.Component);(0,p.default)(y,"propTypes",{label:n.string,positionStyles:n.object,isActive:n.bool,onMouseOverOverlayChange:n.func,buttons:n.array,classNames:n.array});e.exports=y},13047:function(e,t,a){"use strict";var i=a(4);var h=i(a(5));var f=i(a(19));var n=i(a(8));var s=i(a(9));var r=i(a(6));var o=i(a(10));var l=i(a(11));var c=i(a(7));var m=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var u=a(1);var v=a(0);var b=a(15);var g=a(425);var p=a(100);var y=a(1090);var S=a(2204);var q=a(524);var _=a(2877),C=_.DISABLE_DRAG_SELECTION_CLASSNAME;var E=a(12384);var k="sqs-frontend-node-header-widget";var w=k+"-host";var T=150;var I=500;var A=450;var x=100;var L=100;var D=function(e){(0,o.default)(i,e);var a=d(i);function i(e,t){var u;(0,n.default)(this,i);u=a.call(this,e,t);(0,m.default)((0,r.default)(u),"hideHeader",function(){u.setState({isVisible:false})});(0,m.default)((0,r.default)(u),"ensureAnchorNodeIsOnScreen",function(){var e=u.props.hostNode;var t=S(e);if(!t)return;var a=u.props.scrollLayoutOnEditingStart;var i=q(t);var n=a&&a.anchorNodeId;if(!n)return;var s=e.querySelector("#"+n);if(!s)return;var r=u.state.nodeHeaderHeight;var o=i.scrollTop;var l=s.getBoundingClientRect().top;var c=a.anchorNodeOffsetTop||0;var d=o+l-c-r;if(Math.abs(o-d)>T){y(i,d,{minDuration:I,maxDuration:I,easing:"easeOutQuart"});u.updateAfterScrollTimeoutId=setTimeout(I,u.props.updateAfterScroll)}else u.props.updateAfterScroll()});(0,m.default)((0,r.default)(u),"setHeaderPosition",function(){var e=u.state.previewDocument.documentElement.getBoundingClientRect();var t=u.props.hostNode.getBoundingClientRect();var a=u.state.nodeHeaderHeight;var i=a;var n=Math.max(0,Math.round(t.left-e.left-i));var s=Math.round(t.top-e.top-i-a);var r=Math.min(u.state.previewWindow.innerWidth,Math.round(t.width+2*i));var o=r<A;var l=true;u.setState({isNarrow:o,isVisible:l,left:n,top:s,width:r},u.setHeaderFixed)});(0,m.default)((0,r.default)(u),"setHeaderFixed",function(){var e=u.state,t=e.previewWindow,a=e.top;var i=t.document;var n=i.documentElement&&i.documentElement.scrollTop||i.body.scrollTop;u.setState({isFixedBottom:a>n+t.innerHeight,isFixedTop:a<n})});(0,m.default)((0,r.default)(u),"handleHeaderClick",function(e){e.target.classList.contains(k+"-buttons-wrapper")&&u.ensureAnchorNodeIsOnScreen()});u.throttledScrollHandler=g(u.setHeaderFixed,L);u.debouncedLeadingHideHeader=p(u.hideHeader,x,{leading:true,trailing:false});u.debouncedTrailingSetHeaderPosition=p(u.setHeaderPosition,x);u.debouncedResizeHandler=function(){u.debouncedLeadingHideHeader();u.debouncedTrailingSetHeaderPosition()};u.state={previewWindow:e.hostNode.ownerDocument.defaultView,previewDocument:e.hostNode.ownerDocument,isFixedBottom:false,isFixedTop:false,isNarrow:false,isVisible:false,nodeHeaderHeight:44,left:0,top:0,width:0};return u}(0,s.default)(i,[{key:"componentDidMount",value:function e(){this.props.hostNode.classList.add(w);this.state.previewWindow.addEventListener("scroll",this.throttledScrollHandler);this.state.previewWindow.addEventListener("resize",this.debouncedResizeHandler);this.debouncedResizeHandler();this.ensureAnchorNodeIsOnScreen()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(){this.debouncedTrailingSetHeaderPosition()}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.updateAfterScrollTimeoutId);this.props.hostNode.classList.remove(w);this.state.previewWindow.removeEventListener("scroll",this.throttledScrollHandler);this.state.previewWindow.removeEventListener("resize",this.debouncedResizeHandler);this.throttledScrollHandler.cancel();this.debouncedTrailingSetHeaderPosition.cancel();this.debouncedLeadingHideHeader.cancel()}},{key:"render",value:function e(){if(!this.state.isVisible)return null;var t=this.props,a=t.buttons,i=t.className,n=t.instrumentationDescription,s=t.label,r=t.trackButtonClick;var o=this.state,l=o.isFixedBottom,c=o.isFixedTop,d=o.isNarrow,u=o.left,g=o.top,p=o.width;return v.createElement("div",{className:b(i,C,k,(0,m.default)({},k+"-narrow",d),(0,m.default)({},k+"-fixed-top",c),(0,m.default)({},k+"-fixed-bottom",l)),style:{left:u,top:g,width:p}},v.createElement("div",{className:k+"-content",onClick:this.handleHeaderClick},v.createElement("div",{className:k+"-label",dangerouslySetInnerHTML:{__html:s}}),v.createElement("div",{className:k+"-buttons-wrapper"},a.map(function(e){var a=e.handleClick,i=(0,f.default)(e,["handleClick"]);return v.createElement(E,(0,h.default)({handleClick:function e(t){r({label:i.label,instrumentationDescription:n});a(t)},key:i.name},i))}))))}}]);return i}(v.Component);(0,m.default)(D,"propTypes",{buttons:u.arrayOf(u.object).isRequired,className:u.string,label:u.string.isRequired,instrumentationDescription:u.string,hostNode:u.any.isRequired,scrollLayoutOnEditingStart:u.shape({anchorNodeId:u.string,anchorNodeOffsetTop:u.number}),trackButtonClick:u.func.isRequired,updateAfterScroll:u.func});(0,m.default)(D,"defaultProps",{instrumentationDescription:"",scrollLayoutOnEditingStart:{anchorNodeId:null,anchorNodeOffsetTop:0},updateAfterScroll:function e(){}});e.exports=D},13048:function(e,t,a){"use strict";var i=a(4);var n=i(a(19));var s=i(a(8));var r=i(a(9));var l=i(a(6));var o=i(a(10));var c=i(a(11));var d=i(a(7));var u=i(a(2));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var p=a(1);var h=a(0);var f=a(15);var m=a(100);var v=100;var b="sqs-surrounding-overlay";var y=function(e){(0,o.default)(a,e);var t=g(a);function a(e){var o;(0,s.default)(this,a);o=t.call(this,e);(0,u.default)((0,l.default)(o),"getRectOffsets",function(){var e=o.state.previewDocument.documentElement.getBoundingClientRect();var t=o.props.hostNode.getBoundingClientRect();return{left:t.left-e.left,top:t.top-e.top,height:t.height,width:t.width}});(0,u.default)((0,l.default)(o),"setSectionsPositions",function(){var e=o.state,t=e.previewDocument,a=e.previewWindow;var i=o.getRectOffsets();var n=44;var s=Math.max(t.body.scrollHeight,a.innerHeight);var r=[{name:"top",height:i.top-n,left:0,right:0,top:0},{name:"bottom",height:s-(i.top+i.height+n),left:0,right:0,top:i.top+i.height+n},{name:"left",height:i.height+2*n,left:0,top:i.top-n,width:i.left-n},{name:"right",height:i.height+2*n,left:i.left+i.width+n,right:0,top:i.top-n}];o.setState({sections:r})});(0,u.default)((0,l.default)(o),"renderSection",function(e,t){return h.createElement("div",{key:e,className:f(b,"".concat(b,"-").concat(e)),style:t})});o.debouncedSetSectionsPositions=m(o.setSectionsPositions,v,{maxWait:2*v});o.state={previewWindow:e.hostNode.ownerDocument.defaultView,previewDocument:e.hostNode.ownerDocument,sections:[]};return o}(0,r.default)(a,[{key:"componentDidMount",value:function e(){this.state.previewWindow.addEventListener("resize",this.debouncedSetSectionsPositions);this.debouncedSetSectionsPositions()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(){this.debouncedSetSectionsPositions()}},{key:"componentWillUnmount",value:function e(){this.state.previewWindow&&this.state.previewWindow.removeEventListener("resize",this.debouncedSetSectionsPositions);this.debouncedSetSectionsPositions.cancel()}},{key:"render",value:function e(){var i=this;var t=this.state.sections;return h.createElement("div",null,t.map(function(e){var t=e.name,a=(0,n.default)(e,["name"]);return i.renderSection(t,a)}))}}]);return a}(h.Component);(0,u.default)(y,"propTypes",{hostNode:p.any.isRequired});e.exports=y},13049:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=a(1571);var n=i(a(74));var o=i(a(11792));var s=i(a(1698));var l=i(a(3493));var c=i(a(1920));var d=i(a(13050));var u=i(a(12376));var g=(0,n.default)({getStores:function e(){return[o.default,l.default,s.default,c.default]},getPropsFromStores:function e(){var t=o.default.getState(),a=t.pageSectionNodes;var i=c.default.getState();var n=i.loaded,s=i.tweakValuesCurrent;return{pageSectionNodes:a,isSectionThemeIndicatorsVisible:(0,u.default)()&&n,activePalette:n?(0,r.getActivePalette)(i):null,isHeaderTransparent:n&&s&&"true"===s["tweak-transparent-header"]}}},d.default);var p=g;t.default=p;e.exports=t.default},13050:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a(0));var c=i(a(13051));var d=a(12375);var n=function e(t){var r=t.activePalette,a=t.isHeaderTransparent,i=t.isSectionThemeIndicatorsVisible,o=t.pageSectionNodes;if(!r||!i||!o)return null;var n=o.header.indicator;a&&o.sections.length>0&&(n=o.sections[0].indicator);return o&&l.default.createElement(l.default.Fragment,null,l.default.createElement(c.default,{dataAttrKey:d.HEADER_SECTION_THEME_INDICATOR_KEY,palette:r,config:n,container:o.header.node,top:o.offsets.header}),o.sections.map(function(e,t){var a=e.node,i=e.indicator,n=e.top;var s="".concat(d.SECTION_THEME_INDICATOR_KEY,"-").concat(t);0===t&&(n=o.offsets.firstSection);return l.default.createElement(c.default,{key:s,dataAttrKey:s,palette:r,config:i,container:a,top:n})}))};t.default=n;e.exports=t.default},13051:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var f=n(a(87));var m=n(a(114));var v=n(a(2450));var b=a(24);var s=n(a(1433));var r=n(a(1));var y=i(a(0));var S=n(a(60));var q=a(5131);var _=n(a(13052));var C=m.default.isFeatureEnabled(f.default.SEVEN_ONE_THEME_MAPPER_V3)?"/design/colors/section-themes/theme-editor":"/design/colors/theme-editor";var o=(0,s.default)(function(e){var t=e.palette,a=e.config,i=e.container,n=e.dataAttrKey,s=e.top;var r=a.id,o=a.label,l=a.cardMappings,c=a.isDefault;var d=r.startsWith("dark")||r.startsWith("black");var u=d?"rgba(255,255, 255, 0.4)":"rgba(0, 0, 0, 0.06)";var g={borderColor:u};s&&(g.top="".concat(s,"px"));var p=!c||m.default.isFeatureEnabled(f.default.SEVEN_ONE_THEME_MAPPER_V3)?o:(0,b.t)("{label} (Default)",{label:o});var h=(0,y.useCallback)(function(){v.default.setAdvancedEditingThemeId(r);var e=window.CONFIG_PANEL;var t=null===e||void 0===e?void 0:e.get("router");null===t||void 0===t?void 0:t.push(C)},[r]);return S.default.createPortal(y.default.createElement("div",{className:_.default.indicatorWrapper,style:g,"data-key":n},y.default.createElement(q.ThemeCard,{capture:true,cardMappings:l,palette:t,value:r,text:p,onClick:h})),i)});o.propTypes={palette:r.default.object.isRequired,config:r.default.shape({id:r.default.string.isRequired,label:r.default.string,cardMappings:r.default.object.isRequired,isDefault:r.default.bool}).isRequired,container:r.default.object.isRequired};o.defaultProps={top:0};var l=o;t.default=l;e.exports=t.default},13052:function(e,t,a){var i=a(13053);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13053:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".SevenOneAnnotations-indicatorWrapper-2qPFq {\n  position: absolute;\n  top: 11px;\n  left: 11px;\n  text-align: left;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.02);\n  border-radius: 11px;\n  z-index: 1004;\n  pointer-events: auto;\n}\n.SevenOneAnnotations-indicatorWrapper-2qPFq button {\n  border: 0;\n}\n",""]);t.locals={indicatorWrapper:"SevenOneAnnotations-indicatorWrapper-2qPFq"}},13054:function(e,t,a){"use strict";var s=a(12385);var r=a(13055);var o=a(13056);var l=a(1432);var i=function e(t,a){var n=[];a&&n.push({top:0,left:0});t.filter(function(e){var t=e.alignPoint;return t}).forEach(function(e){var t=e.alignPoint,a=e.referenceNodeRect;var i=s(a,t);n.push(i)});t.filter(function(e){var t=e.alignPoint;return!t}).forEach(function(e){var t=l.TOP_LEFT;var a=s(e.referenceNodeRect,t);if(null===a){console.warn("No valid point on node!");return}var i=0;while(i<5&&r(n,a)){t=o(t);a=s(e.referenceNodeRect,t);i+=1}n.push(a);e.alignPoint=t})};e.exports=i},13055:function(e,t,a){"use strict";var c=50;var i=function e(t,a){var i=null;var n;for(var s=0;s<t.length;s++){var r=t[s].top-a.top;var o=t[s].left-a.left;var l=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));if(null===i||l<n){i=t[s];n=l}}if(null===i)return false;return n<c};e.exports=i},13056:function(e,t,a){"use strict";var i=a(1432);var n=[i.TOP_LEFT,i.TOP_RIGHT,i.TOP_CENTER,i.BOTTOM_LEFT,i.BOTTOM_RIGHT,i.BOTTOM_CENTER];var s=function e(t){return n[(n.indexOf(t)+1)%n.length]};e.exports=s},13057:function(e,t,a){"use strict";var m=function e(n){return n.getActionList().map(function(e){var t=e.label,a=e.handleClick,i=e.name;return{name:i,label:t,handleClick:a.bind(n)}})};var i=function e(t,a){var i=t.getActionList();if(0===i.length)return null;var n=[];i.filter(function(e){var t=e.className;return t}).forEach(function(e){var t=e.className;return n.push(t)});n.push(a);var s=t.getOverlayEditorAlignPoint();var r=t.getId();var o=t.hasPermission();var l=t.getClassificationLabel();var c=t.getClassificationLabel();var d=m(t);var u=t.state.overlayRootNode.getDOMNode();var g=t.state.placeAnnotationInside;var p=t.state.isMouseOver;var h=t.state.visible;var f=t.props.trackButtonClick;return{key:r,hasPermission:o,label:l,instrumentationDescription:c,buttons:d,classNames:n,visible:h,referenceNode:u,alignPoint:s,placeInside:g,isMouseOver:p,trackButtonClick:f}};e.exports=i},13058:function(e,t,a){"use strict";var i=a(4);var h=i(a(2));var f=a(1432);var m=a(12385);var v=44;var b=a(639);var y=a(675);var n=function e(t,a,i,n){var s={transform:[]};var r=m(t,a);if(!r)return s;var o=i.innerWidth;var l=i.innerHeight;if([f.TOP_LEFT,f.TOP_CENTER,f.TOP_RIGHT].includes(a)){var c=l-r.top;var d=l-v;if(n){c-=v;d=Math.max(d,l-t.bottom)}c=b(c,v,d);s.bottom=0;s.transform.push("translateY(".concat(-1*Math.round(c),"px)"))}else if([f.BOTTOM_LEFT,f.BOTTOM_CENTER,f.BOTTOM_RIGHT].includes(a)){var u=r.top;u=b(u,0,l-v);s.top=0;s.transform.push("translateY(".concat(Math.round(u),"px)"))}if([f.TOP_LEFT,f.BOTTOM_LEFT].includes(a)){var g=r.left;g=b(g,0,o);s.left=0;s.transform.push("translateX(".concat(Math.round(g),"px)"))}else if([f.TOP_CENTER,f.BOTTOM_CENTER].includes(a)){s.left=Math.round(r.left);s.transform.push("translateX(-50%)")}else if([f.TOP_RIGHT,f.BOTTOM_RIGHT].includes(a)){var p=o-r.left;p=b(p,0,o);s.right=0;s.transform.push("translateX(".concat(-1*Math.round(p),"px)"))}return Object.assign({},s,(0,h.default)({},y("transform"),s.transform.join(" ")))};e.exports=n},13059:function(e,t,a){"use strict";var u=a(639);var g=a(13060);var p=a(13061);var h=50;var i=function e(t,a,i){if(g(t,a))return p(t,i);var n=a.client.lastY;var s=a.client.lastX;var r=u(n,t.top,t.bottom);var o=u(s,t.left,t.right);var l=n-r;var c=s-o;var d=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));return d<=h};e.exports=i},13060:function(e,t,a){"use strict";var i=function e(t,a){var i=a.client.lastX;var n=a.client.lastY;if(t.top>n||t.left>i)return false;if(t.top+t.height<n)return false;if(t.left+t.width<i)return false;return true};e.exports=i},13061:function(e,t,a){"use strict";var i=function e(t,a){return t.width>=a.innerWidth&&t.height>=a.innerHeight&&t.top<=0&&t.left<=0};e.exports=i},13062:function(e,t,a){"use strict";var i=function e(t,a){var i=t.innerWidth;var n=t.innerHeight;if(a.top+a.height<0||a.top>n)return false;if(a.left+a.width<0||a.left>i)return false;return true};e.exports=i},13063:function(e,t,a){"use strict";var i="data-content-field";var n="main-content";var s=function e(t,a){if((0===t.width||0===t.height)&&a.getAttribute(i)!==n)return false;return true};e.exports=s},13064:function(e,t,a){"use strict";var o=function e(t){var a=0;while(t.parentNode){a++;t=t.parentNode}return a};var i=function e(t){var a=t.contentModeController,i=t.placeLastClassifications;var n=a.getHotAnnotationControllers();n.filter(function(e){return e.state.overlayRootNode&&e.state.overlayRootNode.getDOMNode()}).sort(function(e,t){var a=e.state.overlayRootNode.getDOMNode();var i=t.state.overlayRootNode.getDOMNode();var n;var s;if(a.parentNode===i.parentNode){var r=Array.from(a.parentNode.children);n=r.indexOf(a);s=r.indexOf(i)}else{n=o(a);s=o(i)}return s-n});if(i.length>0){var s=[];n=n.filter(function(e){if(i.includes(e.CLASSIFICATION)){s.push(e);return false}return true});n=n.concat(s)}return n};e.exports=i},13065:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(2));var o=i(a(12369));var l=i(a(1246));var c=i(a(11906));var d=i(a(11907));var u=i(a(13067));var g=i(a(13068));var p=i(a(11908));var h=i(a(11909));var f=i(a(1306));var m=a(729);var v=i(a(2470));var b=a(24);var y=i(a(1089));var S=i(a(12386));var q=i(a(12387));var _=i(a(13070));var C=i(a(114));var E=i(a(87));var k=i(a(1595));var w=a(13071);var T=i(a(229));var I=a(1714);var A=a(11889);var x=a(11790);function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var N=false;var O=(0,m.createLogger)("page-catalog","#357",N);var R=function(){function t(e){var i=this;(0,n.default)(this,t);(0,r.default)(this,"showCatalog",function(e){i.categorySelected=e;var t=150;i.hasMeasuredRenderTime=false;i.hasMeasuredLoadTime=false;i.getOrCreateAndShowPageCatalog(e);var a=i.pageCatalogNode.ownerDocument.body;a.style.overflowY="hidden";if(i.isItemCatalogMode()){if(!_.default.getState().isLoaded){(0,I.mark)(x.ITEM_CATALOG_PRELOAD_EFFECTIVENESS);q.default.loadCatalog()}}else d.default.getState().isLoaded||c.default.loadCatalog();v.default.forceHideToolbar(true);i.registerTimer(function(){var e=i.pageCatalogNode.querySelector(".sqs-catalog-container");var t=i.pageCatalogNode.querySelector(".sqs-catalog-scrim ");e&&e.classList.add("visible");t&&t.classList.add("visible");i.pageCatalogNode.classList.add("visible")},t)});(0,r.default)(this,"handleSelectItem",function(e,t){var a=i.isItemCatalogMode()?x.ITEM_CATALOG_ENTRY_ADDED:x.PAGE_CATALOG_ENTRY_ADDED;(0,I.measure)(a,{detail:(0,A.getGuid)()});i.handleSelectedNode({selectedNode:e,catalogName:t})});this.options=e;this.timeouts=[];this.options.catalogType===S.default.COLLECTION?this.detachCatalogActionListener=d.default.listen(function e(){var t=this.getPageCatalogStoreState();this.onCatalogStoreUpdate(t)}.bind(this)):this.detachCatalogActionListener=_.default.listen(function e(){var t=this.getPageCatalogStoreState();this.onCatalogStoreUpdate(t)}.bind(this));this.registerTimer(function(){i.onCatalogStoreUpdate(i.getPageCatalogStoreState())},0)}(0,s.default)(t,[{key:"onCatalogStoreUpdate",value:function e(t){var a=t.categories,i=t.entryPreviews;if(this.pageCatalog){this.pageCatalog.setLoadedCategories(a);if(!this.hasMeasuredRenderTime&&i&&i.length){this.hasMeasuredRenderTime=true;var n=this.isItemCatalogMode()?x.ITEM_CATALOG_RENDERED:x.PAGE_CATALOG_RENDERED;(0,I.measure)(n,{detail:(0,A.getGuid)()})}}}},{key:"isSelectedNodeValid",value:function e(t){if(t)return true;O("Cannot find selected node");return false}},{key:"getDataFromSelectedNode",value:function e(t){var a=this.isItemCatalogMode()?_.default.getCatalogEntryForItem(t.getAttribute("data-item-id")):d.default.getCatalogEntryForCollection(t.getAttribute("data-collection-id"));if(a)return D({},a,{isFolder:t.hasAttribute("data-is-folder")});return null}},{key:"getEventForCategory",value:function e(){return this.isItemCatalogMode()?"start-portfolios":"starter-page-add-collection"}},{key:"handleSelectedNode",value:function e(t){var a=t.selectedNode,i=t.catalogName;if(!this.isSelectedNodeValid(a))return;var n=this.getDataFromSelectedNode(a);if(n){i&&(n.catalogName=i);var s=this.getEventForCategory();this.options.onSelectItem(s,n);this.options.catalogType===S.default.ITEM&&y.default.addItemToCollection(n.taxonomy.categories[0].displayName,n.itemId,n.collectionId)}else O("Cannot find selected collection");this.hideCatalog()}},{key:"handleAddCollectionByTypeName",value:function e(t){this.isItemCatalogMode()?this.options.onSelectItem(this.getEventForCategory()):this.options.onSelectItem(this.getEventForCategory(),{typeName:t});this.hideCatalog()}},{key:"setCatalogOpenState",value:function e(t){l.default.setIsCatalogOpen(t)}},{key:"getPageCatalogStoreState",value:function e(){if(this.isItemCatalogMode())return _.default.getState();return d.default.getState()}},{key:"hideCatalog",value:function e(){if(!this.pageCatalogNode||!this.pageCatalog)return;f.default.toggleExpanded();var t=this.pageCatalogNode.ownerDocument.body;t.style.overflowY="";this.setCatalogOpenState(false);this.pageCatalog.cleanUp();this.detachCatalogActionListener();var a=this.pageCatalogNode.querySelector(".sqs-catalog-container");var i=this.pageCatalogNode.querySelector(".sqs-catalog-scrim");a&&a.classList.remove("visible");i&&i.classList.remove("visible");this.pageCatalogNode.classList.remove("visible")}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(n)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"getBottomButtons",value:function e(){var r=this;var o=[{id:"blank_page",label:(0,b.t)("Add Blank"),onClick:function e(){r.handleAddCollectionByTypeName("page")}}];if(C.default.isFeatureEnabled(E.default.SECTION_ADMIN)&&!this.isItemCatalogMode()){var t=k.default.getState(),l=t.collectionConfigs;var a=function e(t){var a=l[t],i=a.collectionType,n=a.folder,s=a.title;if(n)return"continue";if(i!==T.default.COLLECTION_TYPE_GENERIC&&i!==T.default.PORTFOLIO&&i!==T.default.PRODUCTS)return"continue";o.push({id:t,label:s,onClick:function e(){r.handleAddCollectionByTypeName(t)}})};for(var i in l){var n=a(i);if("continue"===n)continue}}return o}},{key:"isItemCatalogMode",value:function e(){return this.options.catalogType===S.default.ITEM}},{key:"getSideBarConfig",value:function e(){return w.SIDEBAR_CONFIG}},{key:"getCategoryOrder",value:function e(){return this.isItemCatalogMode()?g.default:u.default}},{key:"getOrCreateAndShowPageCatalog",value:function e(t){var a=this;f.default.toggleExpanded();if(this.pageCatalog){this.pageCatalog.selectCategory(t);this.pageCatalogNode=this.pageCatalog.getCatalog();return this.pageCatalogNode}this.setCatalogOpenState(true);if(this.pageCatalogNode)return this.pageCatalogNode;var i=this.options.getDestinationNode();var n={buttons:this.getBottomButtons(),categoryMessageBundle:this.isItemCatalogMode()?h.default:p.default,categoryOrder:this.getCategoryOrder(),entrySelector:this.isItemCatalogMode()?".sections[data-item-id]":".sections[data-collection-id]",getEntriesForCategory:function e(t){if(a.isItemCatalogMode())return _.default.getItemsForCategory(t);return d.default.getPagesForCategory(t)},initializeItems:this.options.onInitializeContent,onCategoryClick:function e(t){a.hasMeasuredLoadTime=true;y.default.categoryClick(t,a.options.catalogType===S.default.ITEM?"item-catalog":"page-catalog")},onCategoryLoaded:function e(){if(!a.hasMeasuredLoadTime){a.hasMeasuredLoadTime=true;var t=a.isItemCatalogMode()?x.ITEM_CATALOG_FULLY_LOADED:x.PAGE_CATALOG_FULLY_LOADED;(0,I.measure)(t,{detail:(0,A.getGuid)()})}},onCloseCatalog:function e(){a.hideCatalog()},onSelectItem:this.handleSelectItem,selectedCategory:t,shouldRenderEntryTitles:true,sidebarConfig:this.getSideBarConfig(),title:this.isItemCatalogMode()?(0,b.t)("Add a Project"):(0,b.t)("Add a Page")};var s=new o.default(i,n);var r=s.getCatalog();i.ownerDocument.body.appendChild(r);this.pageCatalog=s;this.pageCatalogNode=r;return r}}]);return t}();var P=R;t.default=P;e.exports=t.default},13066:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(452));var s={load:function e(){return n.default.get("/api/page-catalog")},loadPreviews:function e(t){return n.default.post("/api/catalog-preview/pages",t)}};t.default=s;e.exports=t.default},13067:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(11570));var s=[n.default.GENERAL,n.default.APPOINTMENTS,n.default.ABOUT,n.default.CONTACT,n.default.SERVICES,n.default.GALLERY,n.default.TEAM,n.default.REVIEWS,n.default.MENU,n.default.MUSIC,n.default.RSVP,n.default.FAQS,n.default.PRIVACY_POLICY,n.default.TOS];t.default=s;e.exports=t.default},13068:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(11702));var s=[n.default.PROJECTS];t.default=s;e.exports=t.default},13069:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(452));var s={load:function e(){return n.default.get("/api/item-catalog")},loadPreviews:function e(t){return n.default.post("/api/catalog-preview/items",t)}};t.default=s;e.exports=t.default},13070:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(34));var d=i(a(12387));var u=i(a(11888));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var p=function(e){(0,r.default)(a,e);var t=g(a);function a(){var e;(0,n.default)(this,a);e=t.call(this);e.bindActions(d.default);e.exportPublicMethods({getItemsForCategory:e.getPreviewsForCategory,getCatalogEntryForItem:e.getCatalogEntryForItem});return e}(0,s.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.itemId,i=e.title,n=e.websiteId,s=e.isFolder;var r=new DOMParser;var o=r.parseFromString(t,"text/html");var l=o.createElement("div");var c=o.body.querySelector("[data-page-sections]");l.classList.add("article-wrapper");c.setAttribute("data-item-id",a);c.setAttribute("data-website-id",n);s&&c.setAttribute("data-is-folder",true);l.innerHTML=c.outerHTML;return{itemId:a,html:l.outerHTML,title:i}})}},{key:"isEntryForPreview",value:function e(t,a){return t.itemId===a.itemId}},{key:"getCatalogEntryForItem",value:function e(a){var t=function e(t){return t.itemId===a};return this.findCatalogEntry(t)}}]);return a}(u.default);var h=c.default.createStore(p,"ItemCatalogEntryStore");t.default=h;e.exports=t.default},13071:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.SIDEBAR_CONFIG=t.COLLECTION_TYPES=void 0;var n=i(a(2));var s=i(a(11570));var r=a(24);var o;var l=s.default.BLOG,c=s.default.EVENTS,d=s.default.PORTFOLIO,u=s.default.STORE;var g={BLOG:l,EVENTS:c,PORTFOLIO:d,STORE:u};t.COLLECTION_TYPES=g;var p=(0,r.t)("Share thoughts, stories, ideas.");var h=(0,r.t)("Blogs are organized into Blog Page and individual blog posts. The Blog Page is the first page users see when they visit your blog.");var f=(0,r.t)("Highlight individual events or show a calendar of upcoming events.");var m=(0,r.t)("Each event has its own detailed post to share additional, event-related details.");var v=(0,r.t)("Showcase projects, portfolios, and galleries.");var b=(0,r.t)("A Portfolio Page links to other pages, for example your projects, portfolios, and galleries.");var y=(0,r.t)("Sell your physical and digital goods, and services online.");var S=(0,r.t)("Each product has their individual product page to show variants and options.");var q=(o={},(0,n.default)(o,g.BLOG,{title:(0,r.t)("Add Blog"),helpTextTitle:p,helpText:h}),(0,n.default)(o,g.EVENTS,{title:(0,r.t)("Add Events"),helpTextTitle:f,helpText:m}),(0,n.default)(o,g.PORTFOLIO,{title:(0,r.t)("Add Portfolio"),helpTextTitle:v,helpText:b}),(0,n.default)(o,g.STORE,{title:(0,r.t)("Add Store"),helpTextTitle:y,helpText:S}),o);t.SIDEBAR_CONFIG=q},13072:function(e,t,a){"use strict";var i=a(74);var n=a(13073);var s=a(411);var r=a(794);var o=i({getStores:function e(){return[s,r]},getPropsFromStores:function e(){var t=s.getState(),a=t.createdOn,i=t.siteTitle;return{createdOn:a,siteTitle:i}}},n);e.exports=o},13073:function(e,t,a){"use strict";var i=a(4);var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=a(1);var p=a(0);var h=a(157),f=h.Button;var m=a(1235);var v=a(713);var b=a(11467);var y=a(13074);var S=a(12389);var q=a(213);var _=a(24),C=_.formatDateTime;var E=function(e){(0,c.default)(s,e);var n=g(s);function s(){var t;(0,r.default)(this,s);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(t),"state",{confirmationOpen:false,hasError:false,isUpdating:false});(0,u.default)((0,l.default)(t),"handleDismissError",function(){t.setState({hasError:false})});(0,u.default)((0,l.default)(t),"handleReactivateClick",function(){t.trackEvent("reactivate-site");t.setState({confirmationOpen:true})});(0,u.default)((0,l.default)(t),"handleConfirmReactivate",function(){var e="classic";t.trackEvent("reactivate-site-confirmation");t.setState({confirmationOpen:false,isUpdating:true});S.transition(e).then(t.handleReactivateSuccess,t.handleReactivateError)});(0,u.default)((0,l.default)(t),"handleReactivateSuccess",function(){window.location=window.location.origin+"/config"});(0,u.default)((0,l.default)(t),"handleReactivateError",function(){t.setState({confirmationOpen:false,hasError:true,isUpdating:false})});(0,u.default)((0,l.default)(t),"handleCancel",function(){t.setState({confirmationOpen:false})});(0,u.default)((0,l.default)(t),"trackEvent",function(e){q("interface_click",{identifier:e})});(0,u.default)((0,l.default)(t),"renderErrorModal",function(){var e=t.state.hasError;return p.createElement(v,{anchor:"window",isOpen:e,onDismiss:t.handleDismissError,title:""},"We were unable to reactivate your site. Please try again.")});(0,u.default)((0,l.default)(t),"renderReactivateConfirmation",function(){var e=t.state.confirmationOpen;return p.createElement(m,{anchor:"window",isOpen:e,onCancel:t.handleCancel,onConfirm:t.handleConfirmReactivate,title:"",confirmText:"Reactivate Site",cancelText:"Cancel"},"Your previous site and content will be reactivated. Enjoy a free 14 day trial and upgrade when you are ready.")});return t}(0,o.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.createdOn,i=t.siteTitle;var n=this.state.isUpdating;var s=C(a);return p.createElement("div",{className:y.container},p.createElement("p",{className:y.reactivateTitle},"Reactivate Site"),p.createElement("p",{className:y.description},"Restore the contents of a previous site."),p.createElement("p",{className:y.createdOnTitle},i),p.createElement("p",{className:y.description},"Created ",s),p.createElement(f,{onClick:this.handleReactivateClick},"Reactivate Site"),this.renderErrorModal(),this.renderReactivateConfirmation(),p.createElement(b,{visible:n}))}}]);return s}(p.Component);(0,u.default)(E,"propTypes",{createdOn:n.number,siteTitle:n.string});e.exports=E},13074:function(e,t,a){var i=a(13075);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13075:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".ReactivateSite-container-EKWQA {\n  margin-top: 44px;\n}\n.ReactivateSite-reactivateTitle-26Icz {\n  margin-bottom: 0;\n  text-transform: uppercase;\n}\n.ReactivateSite-description-1kXCN {\n  color: #797979;\n  margin-top: 0;\n}\n.ReactivateSite-createdOnTitle-1D4cf {\n  margin-bottom: 0;\n}\n",""]);t.locals={container:"ReactivateSite-container-EKWQA",reactivateTitle:"ReactivateSite-reactivateTitle-26Icz",description:"ReactivateSite-description-1kXCN",createdOnTitle:"ReactivateSite-createdOnTitle-1D4cf"}},13077:function(e,t,a){"use strict";var i=a(74);var o=a(1179);var n=a(13078);var s=a(4160),l=s.getTaxingEntity;e.exports=i({getStores:function e(){return[o]},getPropsFromStores:function e(t){var a=t.preview;var i=o.getState(),n=i.customer;var s=n?{name:n.name,number:n.maskedCardNumber,cardType:n.cardType}:{};var r=a&&n?l({taxType:a.taxType,taxRateLines:a.taxRateLines}):{};return{customer:n,card:s,taxingEntity:r}}},n)},13078:function(e,t,a){"use strict";var i=a(4);var r=i(a(8));var s=i(a(9));var o=i(a(6));var l=i(a(10));var c=i(a(11));var d=i(a(7));var u=i(a(2));function g(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var n=a(24),p=n.t;var h=a(39),f=h.T;var m=a(3479);var v=a(360);var b=a(558);var y=a(1114);var S=a(1);var q=a(0);var _=a(13079);var C=a(495);var E=a(5315);var k=a(5053).invoice;var w=function(e){(0,l.default)(n,e);var i=g(n);function n(){var s;(0,r.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=i.call.apply(i,[this].concat(t));(0,u.default)((0,o.default)(s),"getTotalSummaryLabel",function(e){if(e.isZero())return p("Nothing due today");if(e.isNegative())return p("You will be refunded");return p("Total Due Today")});(0,u.default)((0,o.default)(s),"renderTaxedOrderSummary",function(){var e=s.props.invoice;if(!e)return null;return q.createElement(E,{previewInvoice:e})});(0,u.default)((0,o.default)(s),"renderCartFooter",function(){return q.createElement("div",{className:_.cartFooter},q.createElement("div",{className:_.divider}),s.renderTaxedOrderSummary())});(0,u.default)((0,o.default)(s),"renderContents",function(){var e=s.props,t=e.card,a=e.selectedProductName,i=e.toProductLine;var n=y.getLabelForProductLine(i);return q.createElement("div",null,q.createElement(m,{name:t.name,number:t.number,type:t.cardType}),q.createElement("div",null,q.createElement("div",{className:_.heading},q.createElement(f,{project:"apps.App"},"Product Change")),q.createElement("div",null,q.createElement(f,{toProductLineLabel:n,selectedProductName:a,project:"apps.App"},"Squarespace {toProductLineLabel} - {selectedProductName} Plan"))),q.createElement("div",null,s.renderCartFooter()))});(0,u.default)((0,o.default)(s),"renderLoading",function(){return q.createElement(v,{horizontalAlign:"center",className:_.spinner})});return s}(0,s.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.onCancel,i=t.onConfirmProductChange,n=t.loading;return q.createElement(b,{isOpen:true,anchor:"window",width:"450px",onRequestClose:a},q.createElement("div",{"data-test":"switch-product-checkout-summary"},q.createElement(b.Header,{className:_.modalHeader},q.createElement("h1",null,q.createElement(f,{project:"apps.App"},"Order Summary"))),q.createElement(b.Body,{className:_.container},n?this.renderLoading():this.renderContents()),q.createElement(b.Footer,null,q.createElement(b.Button,{onClick:a},q.createElement(f,{project:"apps.App"},"Cancel")),q.createElement(b.Button,{"data-test":"confirm-product-change-button",onClick:n?null:i,disabled:n},q.createElement(f,{project:"apps.App"},"Confirm Product Change")))))}}]);return n}(q.Component);(0,u.default)(w,"propTypes",{card:S.object,fromProductLine:S.string,toProductLine:S.string,invoice:k,currentProductName:S.string,selectedProductName:S.string,loading:S.bool,onCancel:S.func.isRequired,onConfirmProductChange:S.func.isRequired});(0,u.default)(w,"defaultProps",{taxType:C.VAT});e.exports=w},13079:function(e,t,a){var i=a(13080);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},13080:function(e,t,a){t=e.exports=a(16)(false);t.i(a(247),"");t.i(a(12390),"");var i=a(153);var n=i(a(13081));var s=i(a(13082));var r=i(a(13083));var o=i(a(13084));var l=i(a(13085));var c=i(a(13086));var d=i(a(13087));var u=i(a(13088));t.push([e.i,".SwitchProductCheckoutSummary-cartHeader-qmuEq {\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  font-size: 11px;\n}\n.SwitchProductCheckoutSummary-cartFooterRow-3HH0T {\n  padding-top: 11px;\n  display: flex;\n}\n.SwitchProductCheckoutSummary-totalLabel-1i1aU {\n  text-transform: uppercase;\n  width: 100%;\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-totalPrice-3TWTD {\n  width: 44px;\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-domainWrapper-3ky78 {\n  display: flex;\n}\n.SwitchProductCheckoutSummary-domainCancel-3BeHL {\n  width: 22px;\n  cursor: pointer;\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-domainName-19sE4 {\n  width: 100%;\n}\n.SwitchProductCheckoutSummary-domainPrice-2g2Oz {\n  width: 44px;\n}\n.SwitchProductCheckoutSummary-spinner-2ykCj {\n  padding: 22px 0;\n}\n.SwitchProductCheckoutSummary-offerCodeLabel-17Cmd {\n  width: 100%;\n}\n.SwitchProductCheckoutSummary-offerCodeDiscount-2Be8u {\n  width: 44px;\n}\n.SwitchProductCheckoutSummary-visa-1_TvR {\n  padding-left: 40px;\n  background: transparent url("+n+") left center no-repeat;\n  background-size: 32px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .SwitchProductCheckoutSummary-visa-1_TvR {\n    background-image: url("+s+");\n    background-size: 32px;\n  }\n}\n.SwitchProductCheckoutSummary-americanExpress-LKQTZ {\n  padding-left: 40px;\n  background: transparent url("+r+") left center no-repeat;\n  background-size: 32px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .SwitchProductCheckoutSummary-americanExpress-LKQTZ {\n    background-image: url("+o+");\n    background-size: 32px;\n  }\n}\n.SwitchProductCheckoutSummary-masterCard-2lWZQ {\n  padding-left: 40px;\n  background: transparent url("+l+") left center no-repeat;\n  background-size: 32px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .SwitchProductCheckoutSummary-masterCard-2lWZQ {\n    background-image: url("+c+");\n    background-size: 32px;\n  }\n}\n.SwitchProductCheckoutSummary-discover-2GFPC {\n  padding-left: 40px;\n  background: transparent url("+d+") left center no-repeat;\n  background-size: 32px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .SwitchProductCheckoutSummary-discover-2GFPC {\n    background-image: url("+u+");\n    background-size: 32px;\n  }\n}\n.SwitchProductCheckoutSummary-modalHeader-1VmdX {\n  font-size: 13px;\n  margin-bottom: 33px;\n  margin-top: 22px;\n  text-align: center;\n  text-transform: uppercase;\n}\n.SwitchProductCheckoutSummary-card-7dyeL {\n  pointer-events: none;\n  background-image: none !important;\n  padding: 22px 16.5px;\n  margin-top: 11px;\n}\n.SwitchProductCheckoutSummary-card-7dyeL .u-headline {\n  margin-bottom: 5.5px;\n  font-size: 12px;\n}\n.SwitchProductCheckoutSummary-spinner-2ykCj {\n  margin-top: 33px;\n}\n.SwitchProductCheckoutSummary-transactionWrapper-Rd2oh {\n  line-height: 1.618em;\n}\n.SwitchProductCheckoutSummary-transactionHeader-2F8x9 {\n  padding-bottom: 11px;\n}\n.SwitchProductCheckoutSummary-transactionValue-3yXj- {\n  padding-bottom: 22px;\n}\n.SwitchProductCheckoutSummary-money-3RigZ {\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-heading-Hj9RL {\n  margin-top: 33px;\n  text-transform: uppercase;\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-cardHeading-12Vbn {\n  margin-top: 11px;\n}\n.SwitchProductCheckoutSummary-divider-1XIFR {\n  width: 100%;\n  border-bottom: 1px solid #e4e4e4;\n  padding-top: 33px;\n  margin-bottom: 11px;\n}\n.SwitchProductCheckoutSummary-lineItem-15cEY {\n  color: #797979;\n  font-size: 11px;\n  margin: 0 0 5.5px 0;\n  padding: 0;\n}\n.SwitchProductCheckoutSummary-totalSummary-1Wox7 {\n  color: #3e3e3e;\n  padding: 5.5px 0 11px 0;\n  border-top-width: 0;\n  border-top-color: transparent;\n  border-top: none;\n  font-weight: 500;\n}\n.SwitchProductCheckoutSummary-totalSummary-1Wox7 > div {\n  color: #3e3e3e;\n}\n.SwitchProductCheckoutSummary-totalSummary-1Wox7 .u-taxLineItem, .SwitchProductCheckoutSummary-totalSummary-1Wox7 .SwitchProductCheckoutSummary-lineItem-15cEY {\n  color: #797979;\n  font-weight: normal;\n}\n.SwitchProductCheckoutSummary-container-3LcOb .u-taxLineItem {\n  margin-bottom: 11px;\n  height: 22px;\n  font-size: 11px;\n}\n.SwitchProductCheckoutSummary-container-3LcOb .u-taxLineItem a {\n  color: #797979;\n}\n",""]);t.locals={cartHeader:"SwitchProductCheckoutSummary-cartHeader-qmuEq",cartFooterRow:"SwitchProductCheckoutSummary-cartFooterRow-3HH0T",totalLabel:"SwitchProductCheckoutSummary-totalLabel-1i1aU",totalPrice:"SwitchProductCheckoutSummary-totalPrice-3TWTD",domainWrapper:"SwitchProductCheckoutSummary-domainWrapper-3ky78",domainCancel:"SwitchProductCheckoutSummary-domainCancel-3BeHL",domainName:"SwitchProductCheckoutSummary-domainName-19sE4 "+a(247).locals["ellipsis"],domainPrice:"SwitchProductCheckoutSummary-domainPrice-2g2Oz",spinner:"SwitchProductCheckoutSummary-spinner-2ykCj",offerCodeLabel:"SwitchProductCheckoutSummary-offerCodeLabel-17Cmd",offerCodeDiscount:"SwitchProductCheckoutSummary-offerCodeDiscount-2Be8u",visa:"SwitchProductCheckoutSummary-visa-1_TvR",americanExpress:"SwitchProductCheckoutSummary-americanExpress-LKQTZ",masterCard:"SwitchProductCheckoutSummary-masterCard-2lWZQ",discover:"SwitchProductCheckoutSummary-discover-2GFPC",modalHeader:"SwitchProductCheckoutSummary-modalHeader-1VmdX",card:"SwitchProductCheckoutSummary-card-7dyeL",transactionWrapper:"SwitchProductCheckoutSummary-transactionWrapper-Rd2oh",transactionHeader:"SwitchProductCheckoutSummary-transactionHeader-2F8x9 "+a(247).locals["headline"],transactionValue:"SwitchProductCheckoutSummary-transactionValue-3yXj-",money:"SwitchProductCheckoutSummary-money-3RigZ",heading:"SwitchProductCheckoutSummary-heading-Hj9RL",cardHeading:"SwitchProductCheckoutSummary-cardHeading-12Vbn",divider:"SwitchProductCheckoutSummary-divider-1XIFR",lineItem:"SwitchProductCheckoutSummary-lineItem-15cEY",totalSummary:"SwitchProductCheckoutSummary-totalSummary-1Wox7 "+a(12390).locals["container"],container:"SwitchProductCheckoutSummary-container-3LcOb"}},13081:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAhCAMAAAC/dEhCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABCFBMVEX19fXz8/Pu7u7v7+/o6Ojc3NzX19by8vK1tbWysrLGxsa6urrMzMz09PTW1ta5ubmqqqqpqamsrKzDw8Pg4OC3t7e9vb3t7ezb29rT09Lo6OfZ2dne3t7x8fHT09O7u7uxsbG/v77U1NPh4eC8vLyzs7Pk5OTLy8u2trbExMTCwsKwsLDb29vh4eG4uLiysrHV1dTa2tnr6+vS0tLY2Njs7OzR0dHNzc3Ozs7w8PCtra2vr6/l5eXIyMjAwMDi4uLt7e2+vr7Hx8fFxcXf39/n5+fBwcHPz8/j4+O0tLTm5ubU1NTJycnV1dWurq7Kysrp6end3d3a2trX19e/v7+rq6vq6uoAAAAWphngAAAAAWJLR0RXfQrZHwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAXVJREFUOMvtUttWwjAQ3IKIAStdBKRKpV5QbioiqESEAoKoKCLq/3+KuwF8Ch587zyke5KZ7M6kAD58/BNGIPg3YS20TggZVIY3hIhAVIhNAHMrZiHGt5mSSAqR0op30rZt71Kxh4gZh5Z9cLKoEKNt06XCcrTa4MGhfUTfY8SceUK8BJzSmi8USxHaLqtLzvRDn19ULgGqRLiCGq11cOcN2W2UeiJe66U3mKuYcEveGtxPAtxRXTPVYZPKe8SWXtpGLHpsiebrqH5dnjHZ5sMCYi+EWFryDHHE9AOR+wBCXRAeKIOPAB4NO/Soruq1LeITOQswC5jDeWLtM9vIAZQQy3rpC6Kw1OksYIY5ovLVINdiMHhDHOul72o8l3LhgD2YGPNH+ZjiAtEl/5SYO4MxB9xA+dnr0Biykf+Vfhl6KSdqBahI8fXDBTtD2SuTDt3T1EsnUkr+cyAv5Qj6Hcnzd7+hIKWrusWknMJqcOrOikwfPuAHWUwsHPGs5eYAAAAASUVORK5CYII="},13082:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABBCAMAAAA383ALAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABHVBMVEX19fX09PTz8/Py8vLw8PDm5uba2trV1dXQ0NDS0tLg4ODt7e3n5+bX19bT09LW1tXk5OO1tbWpqanBwcHj4+Pc3Ny/v7+rq6uysrLOzs7e3t64uLiqqqrKysrv7+/k5OTo6Ofu7u6zs7O9vb25ubnq6urb29vd3dzGxsbFxcWxsbHAwMDZ2dnU1NPx8fGsrKy+vr7X19fY2NjIyMfW1ta6urrLy8u0tLS3t7fJycm4uLfq6unMzMytra3Pz8/CwsLIyMiwsLDj4+Ln5+fl5eW7u7vd3d2vr67c3NvR0dHExMTV1dS2tra/v77w8O/o6Oi8vLzNzc2urq7e3t2vr6/r6+vT09Pi4uLU1NTDw8PHx8ff39/s7Ozp6ekAAAB4gyxGAAAAAWJLR0ReBNZhuwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAzBJREFUWMPtVmtbEkEU3lVuQlkuohQrxHoJb4sYhpYrkEhpFEpi2uX//43OzDlz2fDDzrd6nnk/vecwc96ZORfWcSwsLCwsLCws/ie4cwq6fz7FMS+Zq7akM9ncQjZfiEfiq+YSiT55uijx7LnyL3kcOccpIlsmxdLKqkcov5DLX1Z87lpLeNdqTem+Es4ahl2tO06ANMX9+cDTsC6Wp33ybCR/480tEn0tPA2MsQ2vi2yHuxe8GOS9doXHT/a+iL19fGAywybGSMMlkB0wdyuu6R2KQytXzUB003/DVUM02xjhCOgh0rdA601xn85x2dcUTpTogoEoZO4du+x7tCoYYQvoqbpUDmnUgpqGGj4L6IipphLtmoj2PK8Pqh+4cU55ZG2ygnwA9AJpVuwRXaRnesdEdAgbPu4vftKf65LxMvJQ0b9f0N3h7iv8tWAgGrIcBfufGZ+LsF+qzI+hAuYfUUazbmxrBh+9oFKSGPztvix+BbqH2xvMTQ27y3hDvGElr++s0OqOrLjEuMQJNAZ6LftFdskN43IEwBBQssuiV7ZlxScG9uPkm+y6C+5eQyPDjTOtYrop2tjl5kj02arJeHBu+Z5T2SQl7l1H4xzX5DTVDpbMFK9/J2t+YCJ6RW3i9jkpY7X049Pt+5JSrbjqKXwoOhfb9d5ENEOZHGr94lTRWJKr3L1AqrbADiM1E7AWHkxE6xipvaL6BW6GzqK2zm1NSPQArDukvK4wL2UTUSr9A8zRD/RlMeZZbGGhQ1mFE9C9R8cAHBJe3UT0RqsSb4y+nl5UEm356CVvFkMT0WVt4zX5LtQRhqFceSInxtEjoqcmom40e1pMn8/qNGo2hjzRdeopmPyDRzSpwZOiKPdRvzg0T6HznSlnk2DUF4tuQ+fhMdGmayLalvvEH0nek13wcyZ4ySlg0UWHBJpYaRPRqTyrGHH3aMM3Ic1mBb8lZ1dPBJj36dlNQK2gojRUhrfjmiP4JA0x49rg2+D2lZGo+NYZx4N4U6CDnpqAUXHI8pZVGY8FCIxEwynHL+kooIMqI1WDT/vL9tZvsqv4a3UmgJGohYWFhYWFhcU/gD/u6ojH37V9DAAAAABJRU5ErkJggg=="},13083:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAhCAMAAAC/dEhCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA5FBMVEX19fXi4uK8vLzFxcXMzMzz8/O+vr7IyMjJycnDw8PHx8fR0dG/v7/AwMDY2NjGxsapqam4uLjS0tKqqqrQ0NCvr6+srKzV1dW1tbXX19erq6vKysrW1tbPz8+zs7PU1NStra3q6urn5+fg4ODv7+/BwcHx8fG7u7vu7u7w8PCxsbHd3d3T09Ourq7t7e3e3t7r6+vb29uwsLDy8vLCwsK9vb3Z2dno6Ojm5ub09PTf39+3t7fk5OTa2trh4eGysrK5ubm0tLS2trbLy8vc3Ny6urrOzs7j4+PExMTp6ens7OwAAACRbgMMAAAAAWJLR0RLaQuFUAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAghJREFUOMvtkmFzojAURROU1rUaHiIqUiRCIyBuAbVKipbWuq3b//+DNmG6Oztav22/7PTOvJNwh8NkmCD0lf85WFGUmpi6eqH8lUsxjW/Vtvk+V8dqq0000EnH6JqE9PqEkEGdEEuDvj60r50RcQGIRcG5qB2ZY/D8myFTJwHUQ0Qjy7anOLZnSI8YGTuXM6wGgCYd8Oxj1Q4m3281FrkJpI5QM8eZY4s1FvOIhUvoRXerDJCtDk5VlqXuOmfRiNdT/bc6xik2IrZoQZO793yKisw/VRu843R5J4KE24VQrxgzsT3syQMnG20dO444TTGd8BN1uzJqPTdOIHigI9xLMMaFu2SAiyQwZz42Lwa1DI+giZfHarPUUL0sy8eiDMo/aVZkylO5UxO5tcU8f8LVSNwqOe/LxbqX3MZVt90LZOKF/ccqGzCRH+bSrFaYM9bWQZaPMGgL7Nrs5YzqROIXLRj19ijHoc9U/Kp2ZNk9qJ43qwmMz6l5UUwPi9w3UAEHzlKAJJNl6eZ6CdcbvVTOqWqavhi58NBPL8oYjxaqLsvO4CHk8e415G/nVAwA1tgam6ipPAF7o3PfqsohpfaNQB2dUyVvR0a8QcVhpYkDB24sy9hGSHUk/DOq+Cylw7uZQalBkGNQYMOeLCUMKtH6WE29Kgu0FoxQKPheyYTVM/+E+/SVf5tfIGtQj0LBK60AAAAASUVORK5CYII="},13084:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABBCAMAAAA383ALAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA5FBMVEX19fXb29u8vLzT09PHx8fo6OjIyMi+vr7j4+PDw8PR0dHExMTi4uK/v7/q6uq1tbWpqamsrKyysrLFxcXp6em6urq2tratra3n5+fg4ODNzc3U1NSurq6qqqru7u6vr6/Ozs7BwcHPz8+rq6vGxsbQ0NC3t7fLy8vY2Njw8PDJycnr6+vd3d3z8/PZ2dny8vLX19fk5OT09PTt7e3x8fHMzMywsLDc3Nze3t67u7vm5ubl5eXKysrCwsLa2trAwMDs7OzS0tLh4eHW1tbV1dW5ubnv7++xsbGzs7Pf39+4uLgAAABGBx+HAAAAAWJLR0RLaQuFUAAAAAlwSFlzAAALEgAACxIB0t1+/AAABKZJREFUWMPtl31T6joQh/cgb0dAFhCKQnlppVJpbS0ICohcRfT6/T/Q3U3SFs94B3DuP3emvxnJJl3y0OxmEwESJUqUKFGiRP+1fqWETtKyTWUAsql/US6dl8bvzGkhF4+r0VSxJNuzfdAyClWqssUanOOxqqu2ocm2uYd5gXjZarXa5FqgtoB6J4vdlhjqtaT62BftifHbRBq9IudubcDeDRrmrkntgHlXrd5+aAktbq7Jf0itreFNBS95qIoj5dPCVuh+3qVRBzHtcm+It/Tp0S/WuHtDkzgw2gulpfShcwcjnaFeIOj6GFwJPRuyCgSdUHs7BrgX0HoAbtFxbqYuzMQvFlC7exg0i20PBgWAPkNHDzAmeh/Al9ChClaLp0J8BDgR0Bm4DR4wwO3O+RlBHX7zQ6B2Be8hqJodKApoCqCGWISLtIQuliwrhF4DPAloh5eYlqQDK7wCeGbokpa6fgh0hfoaHhD/AmgwFOeQwQZArrYb0yVBA9u2RRQFlN+YUw/gEU0bXgR0OoGmfgB0yEv5YBi0mr6A0jSlV4q0gq4d1nOUSF5WQl3YMPQOPMMwaGc3GIo3lEsHQYuh6bUZSjk09yAdQuOYji3Lqv8CSAnoOcxp9C2a51VA9TlM7g6A0lIu+GVeKC8ZKnbL1gyhsyqrHcb0nTOVoae0j+rWDDyxEmvwPhiKdZ5zP9Sn9BPvMoLRLftTMsMAsfbnPqVH1xw5Q0Db6pGPKrQDARVbfS/0waNcQssyKYmhI17nFdzp91AnhuJ0s+YnFnatD6Tk70ho1z4AutI0E1NcS3SNhRobWBGfqCmZaHLX4RGT/iri/fgbvC8n5C+93qS1P5FIM4hrfErs+fS3Zd2JzW5aBgWrARcYpf4JHlLw7SaJvgeZptTZmD/t5neaxCbtko4w1uEkrFGgDA8Sfa/1cFd5GnmJequ8G3Wckbvr2Nz+HVqTi1tuM0dAnS+5oxdhpu/0tffY/tx1/Ii8ymZYxI6CWpFoC2102opKYuYPaVfZDh9wKk8j611Yq+OgcWfOO/J9BIHqe36FNqaUfR97LrExD63PY9Z1F+raQnSD0rGdgYBOV08ebT5B+ZTj20ou8szq0SlI1emHUEOGhU7Z28oCIK2pIncGHkGb/KwH0Is9PwE2MpZU3k71H8SUviZrIlJcxLVIQbl2mQr6RL8l8tTpcvc6NcMbzVT/CVSqivoFNafiBrShO/SNS9XcgS1dN1dbOK9Enn26f5CC9UarbKV14v8UivzNkrrrickKUSJNyrFnHz/zMtl8rC+U60+Xl85qF7w6Q7km5/1HPlY6hjHwtzBux8vLW7hslcbQUdb2COTXRKLL30t5C9tyGFNx1siY5vj9Ik+lPGwPOme+hY6KLKqBCw0/PVg3FNR8NCXUwipfVkPPJ8yrI2cmrfFRzK/FIcMFphTAGUMf7QmAJqFOCJVaoq2+UA2t+ew46DLSO2p0nufkhTvFjzV8XhbEzWW5LEeeFma5uaKQS6v2duyW2ZH5Iv4rCrc9Q/+8RHzRNDY3R0Azy13RPg0MZYtZLqX91StUb+aF1mZxXFQTJUqUKFGi/5f+AQ/H2PB0aajNAAAAAElFTkSuQmCC"},13085:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAhCAMAAAC/dEhCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABtlBMVEX19fXz8/Pg4ODPz8/FxcXBwcHJycnW1tbr6+vw8O/p6ejk5OPi4uDo6Ofv7+7u7u7Kysqtra2pqam5ubnc3Nz09PTp6end3dvZ2dfc3NrV1dW7u7vs7OzDw8Pe3t3n5+a8vLvY2Nbm5uXNzc2urq2vr6+xsbDU1NLr6+rl5eW+vr6+vr3Jycjb29ny8vK8vLy6urrT09HW1tS3t7ba2tiysrLHx8bq6um2trbk5OTq6ura2trExMTKysng4N/6+vrz8/Lv7+/s7Ovj4+Gqqqqurq7///+/v7/f39/Ly8vd3d3Y2NixsbG3t7fAwMCsrKzR0dGrq6vU1NTGxsbV1dT9/f38/Pvx8fHu7u3e3tzj4+Lf393l5eT8/Pz5+fnMzMzQ0NDo6Oj7+/v4+Pjw8PDe3t7t7e3+/v7j4+P29vb19fTy8vH09PP9/fz+/v3a2tnX19e0tLTn5+f39/fl5ePt7ez4+Pf6+vnh4eDZ2dnx8fDb29rm5ubT09Pn5+Xi4uLOzs7b29vS0tLNzczk5OK4uLe5ubjV1dPS0tDOzszBwcDExMOzs7LQ0M/Q0M7S0tHCwsIAAACCZAF5AAAAAWJLR0SRDw2+mgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAipJREFUOMvVlO1XEkEUh2dRBERcXF0aCcWiF4SCLAp3NQ3Sq4CGZIuQgYHQkpWURqVZVr5U9PontwTSaWZJjn2p55z9Muc8587svfeH0P8Oo2lp1WrbdPr6iaHd2NFhNHUeIrLmLq5Gd0/lgLccwzV6TcwfTGtdrHBcjzrr4k/Z1vCufdzvdPVjAru6yWsJkxs4Qar4pKrqIE3u1OkzZ0nXqWIOUqbL7XafI9XzHlr1kuaFoQoXSdfYRNEql0jVR7XITDqXr1Sh/pSfVIc5Qex2iCMH5ujo1SpDY2j82i8xELxO9nRiEmDKA9OhcGRmNhK+AYPRufBU7Ob8LSm+wNgNieRtk38xcSeVSBKqjfNCemkc7rKZrIZfFkOQy6fvpbwgF2AR4/srEvMAHqYerYK9SKgZzizrLSL0tT5mBMn2xAEz8poOWmDJtq5c82kpvfLsuRP62+EFpqpueCzyCOhSYWnDnF3uQbMQEEWdHGUV1SQbpNxqYjOOnfCySL11SxB4q7TFzsMrVwRE3iXnXW2aBa4AJT+TNkIJXpfAmc1i8q1oGFkF63bgDeQgDzD9FubepWCNLXA76yBnIC0HYSyZleIouNuor9HKxsSUb2Jv37un8B73+rDvYB7U+kpP0wesCj1N9AzHohU+Hj7DKmX3y+XyJ2pz/HwT+/r5y9dv1H2dmyoLS6cEF9tpLiVUsqnoI8wG2YT+IhEV2NDkEXMY1dL/+xHS/9/nB9Hul4oy7ltCAAAAAElFTkSuQmCC"},13086:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABBCAMAAAA383ALAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB41BMVEX19fX09PTr6+ve3t7Y2NjU1NTS0tLf39/q6urz8/Pv7+/q6uno6Ojo6Ofp6enr6+ru7u7z8/Lm5ubQ0NC8vLyrq6upqam7u7vOzs7s7Ovk5OPd3dzZ2dfb29nj4+Hy8vLx8fHT09O2tra0tLTw8PDh4eDt7ezPz8+urq6tra3x8fDi4uDe3t3s7Ozd3d2ysrKwsLDb29vl5eTh4d/FxcXExMTd3dva2ti1tbWxsbHDw8O/v7/Y2Nbt7e25ubnX19XKysq8vLvj4+OysrHR0c+3t7ezs7Ln5+bNzcyqqqrBwcDm5uXJycjAwMC2trW6urrKysnLy8vIyMjh4eHR0dHU1NPf393+/v7////8/Pzw8O/p6ef6+vru7u329vbBwcGxsbDk5OL+/v3i4uLMzMysrKza2trGxsbc3Nr9/f339/f4+Pfn5+Xy8vHp6ejj4+Lg4N7v7+69vb35+fnk5OT6+vnc3Nv09PP7+/rf3974+PjCwsL8/Pv19fTg4OC4uLjn5+fm5uTg4N/W1tbX19f7+/vJycnc3Nzq6ujV1dXi4uGvr6+zs7PHx8f5+fi+vr729vXl5eXNzc27u7re3tzIyMe1tbTV1dPW1tS+vr3Dw8LExMPNzcvT09HS0tHPz84AAAC+tAGHAAAAAWJLR0SgXtO+oAAAAAlwSFlzAAALEgAACxIB0t1+/AAABWdJREFUWMPtmPtXU0cQx5NAghAgMSErxIUAAQIoAoFLeEit9EFTSimPkm9o0FIIBqwgpFYNFRHxUbHFUlrt+1/t7L0+EEN2g/pDe/ieA0n27NnP7szs3LljMh3qUP9rmS05uVabNTfviHm/KfkFFnthUbHDefSNEF3uEg97Js+xUtereyrzHufPVV5h970esbKqmu2V31a5e0qNt5zvVW3dwZG+QD1Lp4bS59jGEzytTjYdkHmqme2nllbDsEG+r9oqD4D0tbNM0mjNgg6eQSFH1kxLNcusTosjxDPLmyWzsIvJ1M2lOmHOilkvZfaclkN5WxbUXvk5j6kwOa9QZua/I2Ua6jojpRapQt9VZDJ2Vn5WpxqzT+GI7xlqfl8K7VByq/kDKfNDNYca6leB5soP+lEWTB7KVzioX8oMf7xL8kMPyKGnlKPI0CdSaLncq4NZQj+VG9giY9aEpZihz16SHForg7bKzzacLlpOZnjihGT2HaFVR00iQXhq6GMsDfTzV1YdPxoBohPpgF/EYkE+KYGKJ9o5AAF2nv5jb3IKR2HeM/Qln/pKTMW5dNBGoE2WC81UhNVDh+aIjxL/cOt0zkyckpA7b3T2gh/wBTysOrfvFEVcOBDoGbIm5mji/MVIY8fXzkuNdiqZFuyLl8t4wrHUz+eBcr6YGWqhrS8Lms2TBNms/oh+iKbwUFJ8znbTvxgbERiMsU7gm2jeJHBlnPNvL1/S514p7wCuRnxtUfpxdQ7XOL+eGeoSgQIUwHoeNYCJpSIpgVsheCSGmTH63jsUQSQfmOsSW4BGO7ismzKFqAAVVYjh/u9g6Abl38zQaYLOAqOw5iAPKAwvk70DwEyEGMzjWQWGb7qAQeYG2sUW1lb0dYVOkGVvAXULNGyi819cD9I3J6WHzFCRjwoRrcLtZIRYsyzevtFKkPY7wAaVE06ggXxu0rQq4C5t6x4rBcqeXg1v3ZIPuL8ENPJrwHXOKSaLpNBpPXidAfRi7Xs6Vck5w0YlIqzmeyh4TYbPhVaagGVmBezGxUkaw8EbwNRx8j2NmYEHUqhLD95VOiTu9pEVU4i4cikCN+OCmqoGXEyj9fTJD2OYizPbs5MmhVGvkIPJKuW1xhWisYTUpxY9eMcolqINFEgjgJWFU0iK7Ee7ngFyxQXe0G9oMwUVYz8AP4pilDATIpiQAJLiV5IKM1qHS6OX7ikBu+8C0+E5zNOJSxmFy5GhTeYpBm4DfTfposxveeLHhnuAPELTzTJPeSfLgEkRRzEi+TiR4RiIAY8IKrmnlJEoeP0E1Wjt4gt0UYRXcwoQpZuRcgufbf5k+G51G3BTRloyfvaLK0x/5n7d3qanjp9IPJBWZyMieMMakh5y3WycTAwLpQo9G9xZoRuKFGtp0pcbayWbMPZzyEgKoUfC61Es1QEDFFZ3ROgBC8HGHVnubWWD2iDr0paZX9M6Wf22rTusaf7ubdvYBboyy1bbFnlzy211rzSUaBoN/UKuc0w6FnmoyHErNBUcXw8GKXh4ov/++k4w2JFYlD5lFJ6n8V9f0uPXf54qVA7xJ/LndnaVg0qNpFAs7JZCjaRQDXb99kK/y6EK1aBK3btLf0iZKnWvSoX/Qi2npdA1BabSu8zZP5/qLymzY9KrclSFt7bw38phtFQwoARVeD99+PgJSW5b9fdTlTdxoQa5cWWpfrcUeg6UJP6RMrPpOSh1V+rlzOy6K0p9JMub7iOpdcyOZ0IeoGNmytwbvKfPyNQbrK08CFN0QTfTR+1b7IKa0vd7O99uv1fXy53tknSd7SbvzgtgosL+RlrqZkuerId/daLMvlBkdziVUt6hDvWf1b8nVGZask5GFQAAAABJRU5ErkJggg=="},13087:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAhCAMAAAC/dEhCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABL1BMVEX19fXz8/PPz8/Z2dnx8fHb29vS0tLHx8fU1NTw8PDCwsLFxcX09PTq6unk5OPm5uXu7u7c3Nzr6+vf39/W1tbY2NjQ0NDg4OCpqamwsLDj4+PBwcG+vr6qqqrp6emxsbGsrKyrq6uysrLd3dvZ2dfj4+Kvr6/Ly8u3t7e8vLzi4uLKysrv7+/a2tqurq7AwMDo6Oi2trby8vLV1dXe3tzo6Oezs7O0tLTR0dGtra3T09Pu7u3c3Nrt7e25ubm6urrs7OzGxsbm5ubp6ei4uLjNzc3l5eXe3t7r6+ra2tjd3d3Dw8Pz8/Li4uG1tbW7u7vExMTb29nOzs7n5+fs7Ove3t3MzMzh4eHk5OTIyMjJycnt7ezf397f393v7+7l5eTb29rg4N/h4eDw8O8AAABXTQl2AAAAAWJLR0Rkwtq4CQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAhNJREFUOMvtkltb2kAQhichEJCFBggyNAQS3cI2EI4iCtZSWm2BUsFae6Dn/v//0EFoBUUFr32v9pl8b3Z2dwAeeOAakizLHgXAK4PiU/20Cvg2gl4AFgo/0kCTIxSKyjGdcvGoLG8m/qsBJJKPwUBIYdIMQjqDlr0FyjYnnrBMVgLIYUJQ7KmDton5SzVfcItFzcAClqBcYBUrwqo12OEX1GX0gJTdZWKLwg76lYY9pwK4uGdg1d5vBuhrc1JuTU1+8Mw8hAj6QCQdJ00qPLcW1Da+oIbdLO7HdexMyi9nKmcGdlKmBpOGgw5WXuHRgnqMOVJBihRtD76elN/MzC4kMIUbACLb63UczKAK82o1hccGsjhAH8uWCFAbb7tTdQBsF9EhdXpWn7DLl+q7fhJlumEPnqhWA3RMqsPGrOMRPdYeNignLMM4pbO+NyvSTFWEECV6q7yAzax5SL/sVdCkDs8+8O6ATNDMycX1Kad2hAs+UVs2H2w2JmyhqjBYBba4XE2aMmRy1HCck8K58/G8reZivdInfzNxNdZaoqqfT0mFPLjDYdztQK4n2v7Slc2lMF+i6mlfm27tCKq1mqKpX5yY7tUT/oVMaMSXqXczvpjue4itr9NRWVs8+/ZvtNfzqvVtzu+hsvGAz7Oy+P3HT87XV9k4fMCvcbdXqP/q8mXcvlur/nvEb+JG608ovMNv5S81sVghw7tsHQAAAABJRU5ErkJggg=="},13088:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABBCAMAAAA383ALAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABSlBMVEX19fX09PTi4uLj4+Pr6+vu7u7x8fHb29vPz8/c3Nzy8vLd3d3MzMzFxcXGxsbR0dHl5eXw8O/q6uno6Ofu7u3s7Ozz8/Pq6urt7e3w8PCpqamzs7PY2Nitra3Z2dmvr6/U1NTQ0NDExMTc3NvZ2dfb29nm5uXHx8fKysqqqqrDw8O0tLTm5ubT09O3t7e8vLzg4N7c3Nq2tra5ubnJycmxsbG+vr6/v7+1tbWsrKzk5OTOzs7a2tq7u7ve3t3x8fDV1dXX19fo6OjBwcGwsLDNzc3g4ODCwsLl5eTf393y8vHa2tjIyMirq6vv7+/n5+eurq7h4eDe3t7h4d+6urqysrLp6ene3ty9vb3W1tbf39/h4eHAwMC4uLjS0tLp6ejLy8vg4N/d3dzz8/Ln5+bj4+Ln5+Xs7Ovm5uTk5OPv7+7i4uDd3dsAAAAqmiGIAAAAAWJLR0RtuwYArQAAAAlwSFlzAAALEgAACxIB0t1+/AAABLRJREFUWMPtl+tb2kgUxk8gTDEmUHVJkwEF3SioGBRUvGBbLkp3raJ2sbVa3W51L939/z/vmZkEvCSAiu5+4H1U5np+cznnDAIMNNBAAw000EAD3VdSgCkoO9UQltkneREODynuIDKsapHoS7c6Mjo2+oPESjGcq7enBsirgCMZDGGZeEBNKhSPckSC0nH8mBhnbckUt6xMjosxU3zG6I8W0/QM0oLYOuFYSuNUknHM0TCkRGF2zvCFUjqfbUGH3LYFbDJst5bDmr5ouVoaAchTWhCGFFzZMtyFUroS8oKuFtdY5/qGC53Hv5ulyOwWbobk2Z4jUbXAoNJrq63pN/AWO8Wxl7FUYdBklekFg9bC2wVsTntB8UINdRaXZAqogW3D2BdgS2RrX+YXs1MHeGdd109AcH8aN4TWt/jonGMZoTauModsHyjAMBa2BbSCxYDTb+BiVKeswM+7N6CWDO8p3dvHvgbOKXlAoYQdvlCYYkviUIKggwXiTo3rrdFjN5nWIYdFsWcZz1X3guIFHPhDj1hJ3GmEXfF4pIKtVeYTLX24Bd0F+IXSpsTdSBWXsW4zZR2o0aS07g89xlJQQJWq8LuMxK5quD364y2opcMEd4AJx0zLewMMumfbe7iK456g6ENTPDZVtpGhjlA9Sekn2KK0CHegIgMEwR/KjtdwoRiQCcSuK3XmXp2OF1S2Vfw9cqAFmUln0IMapWs6dICiI81DGyr8rnGC7tVKhx6OBPCKhTi/WLjjSJ8dN+sUMikHetoAJwoaIbQXcccCuRMyqFV+ipPgAQUN8+CGH5QnB1sX0NP1FZYSN3ECYX9pnSeyibO7ycFdLp0NeUIJOm+ceEGdNNiMiTQo4cDZonqGTVW8W3Qlure6rDW90iCTtIIj5sCFipA5cUJmp913EypUZGvlO91wXhWaZMdHPnVI+Fzhdga7mfBZcsCURcve0PHqDq+KO5WLvPFLReykvCIGLfPq9adNCFPlGvhBSdwjUk2m1qkTWY6xTzkxudCOL2kjpW4nYm61/Yg7KodPXWuyI5OZMtwmEwb6nwgfSDhXwMhkMoqiaVoQSlmQj6GRAKi8r7/Fey1lztEhzs2QSh6NE6InALYJjXggIEmBeDkEpSnYVCFdhmytvHOGb5a2XcUnza58SXQ3d9ETNDmf4tBmIoHxYWNyVGpmfp7UCNRTGLO1CmgL6V+xqzDZ1Rj5avUEbRr5KIPWwmEHCumIlp7C76K5z1gpnIJ2kMNvK3Y+3MWU1MC03RsU9vN7CLV5jUODNJilmEg25yTIHpigncQx8u1s86ijJeM3llB6hIJZQOh6LkccKGDWP0MHUoprxRqCtOGdvAK2/DJ57G+HHIrE2ROUZRQigY45BTkGz3uYXISfHvP/GPbRufFHgpBv1vn2zn0Qe4L2Q9Jl+w1+LuTY9LW38D9APgtUmbmJfAaoeXXr+9TTQ2NfLQ89JZH8vmRZzwqV/vhg+emJkOaf05b1rFBl7LXVUX0nksqi1U39Je5ffuxK7CtUj/211Auxf9Dvl90Pta/QkYu/p+9BfDx0f+zwnsDHQb/FZhZ37w98MFT6fnH1z8N4D4LqoYurnsKik/4FGBElce1LCRMAAAAASUVORK5CYII="},13238:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0};t.default=i;e.exports=t.default},13284:function(e,t,a){"use strict";var i=function e(t,a){if(a<t)return e(a,t);var i=a.getFullYear()-t.getFullYear();a.getMonth()<t.getMonth()&&i--;var n=(a.getMonth()-t.getMonth()+12)%12;var s;if(a.getDate()<t.getDate()){n--;var r=new Date(t.getYear(),t.getMonth()+1,0).getDate();s=r-t.getDate()+a.getDate()}else s=a.getDate()-t.getDate();var o=Math.floor(s/7);s-=7*o;return{year:i,month:n,week:o,day:s}};e.exports=i},1347:function(e,t){YUI.add("squarespace-ui-templates",function(a){var e=a.Base.create("UITemplates",a.Base,[],{render:function(e,t){var a=this.getCompiledTemplate(e);if(!a)throw new Error(this.name+": Could not find UITemplate by the name of: "+e+". Recompile templates?");return a(t||{})},renderAsNodeOrDocFrag:function(e,t){return a.Node.create(this.render(e,t))},getCompiledTemplate:function(e){var t=this.get("compiledTemplates")[e];if(!t)throw new Error(this.name+": A template by the name "+e+" does not exist.");return t}},{ATTRS:{compiledTemplates:{readOnly:true,getter:function(){var e=a.Handlebars.templates;if(!a.Lang.isObject(e))throw new Error(this.name+": No templates are available. Have you loaded your template module?");return e}}}});a.namespace("Squarespace").UITemplates=new e},"1.0",{requires:["base","handlebars-base"]})},1520:function(e,t,a){"use strict";var i=a(24),n=i.t;var s={design:{title:n("Gallery Design"),description:n("Gallery designs give you a variety of ways to display images."),type:"multiOption",defaultValue:"grid",options:{slideshow:{title:n("Slideshow"),values:{thumbnails:true},icon:"slideshow"},slider:{title:n("Carousel"),values:{thumbnails:false},icon:"carousel"},grid:{title:n("Grid"),values:{thumbnails:false,autoplay:false},icon:"grid"},stacked:{title:n("Stacked"),values:{thumbnails:false,autoplay:false},icon:"stacked"}}},autoplay:{type:"boolean",title:n("Automatically Transition Between Slides"),defaultValue:false,onlyFor:["design:slideshow","design:slider","design:standard"]},"autoplay-duration":{type:"slider",title:n("Autoplay Delay (Seconds)"),description:n("Seconds between autoplay transitions."),min:1,max:10,defaultValue:5,onlyFor:["autoplay:true"]},controls:{type:"boolean",defaultValue:false,title:n("Show Next and Previous Controls"),onlyFor:["design:slideshow","design:slider","design:standard"]},"auto-crop":{type:"boolean",title:n("Automatically Crop Images"),defaultValue:true,onlyFor:["design:slideshow","design:standard"]},"aspect-ratio":{title:n("Aspect Ratio"),type:"select",defaultValue:"square",options:{square:{title:n("1:1 Square")},standard:{title:n("3:2 Standard")},"standard-vertical":{title:n("2:3 Standard (Vertical)")},"four-three":{title:n("4:3 Four-Three")},"three-four-vertical":{title:n("3:4 Three-Four (Vertical)")},widescreen:{title:n("16:9 Widescreen")},"anamorphic-widescreen":{title:n("2.40 Anamorphic Widescreen")}},onlyFor:["design:grid"]},"square-thumbs":{type:"boolean",title:n("Crop Images"),description:n("Crop images to the aspect ratio."),defaultValue:true,onlyFor:["design:grid","design:standard"]},thumbnails:{type:"boolean",defaultValue:false,title:n("Show Thumbnails"),onlyFor:["design:slideshow"]},"thumbnail-strip-height":{type:"slider",title:n("Thumbnail Strip Height"),description:n("Select the thumbnail strip height."),min:0,max:200,defaultValue:80,onlyFor:["thumbnails:true"]},"thumbnail-strip-margin":{type:"slider",title:n("Thumbnail Strip Margin"),description:n("Select the distance between the main image and the thumbnail strip."),min:0,max:60,defaultValue:20,onlyFor:["thumbnails:true"]},"show-meta-basic":{type:"boolean",title:n("Show Title and Description"),defaultValue:true,onlyFor:["design:stacked"]},"show-meta":{type:"boolean",title:n("Show Title and Description"),defaultValue:true,onlyFor:["design:slideshow"]},"show-meta-only-title":{type:"boolean",title:n("Show Title"),description:n("Show the title below the image"),defaultValue:false,onlyFor:["design:grid"]},"meta-position":{title:n("Title and Description Position"),description:n("Control the location of the Image's Title and Description."),type:"select",padding:[10,0],defaultValue:"bottom",options:{top:{title:n("Top")},"top-left":{title:n("Top Left")},"top-right":{title:n("Top Right")},center:{title:n("Center")},bottom:{title:n("Bottom")},"bottom-left":{title:n("Bottom Left")},"bottom-right":{title:n("Bottom Right")}},onlyFor:["show-meta:true"]},"show-meta-on-hover":{type:"boolean",title:n("Show on Hover"),defaultValue:false,description:n("Show the title and description only on hover."),onlyFor:["show-meta:true"]},"active-alignment":{title:n("Active Alignment"),description:n("Where does the active image align to in the slider."),type:"select",defaultValue:"center",options:{left:{title:n("Left")},center:{title:n("Center")},right:{title:n("Right")}},onlyFor:["design:slider"]},"thumbnails-per-row":{type:"slider",title:n("Thumbnails Per Row"),description:n("Choose the thumbnails per row."),min:1,max:10,defaultValue:4,labelWidth:33,onlyFor:["design:grid","design:standard"]},padding:{type:"slider",title:n("Padding"),description:n("Padding around the gridded images."),min:0,max:50,defaultValue:20,labelWidth:33,onlyFor:["design:grid","design:autocolumns","design:standard"]},lightbox:{type:"boolean",defaultValue:false,title:n("Lightbox"),description:n("Clicking on the images will pop the image up in a lightbox."),onlyFor:["design:grid","design:autocolumns"]},lightboxTheme:{type:"select",defaultValue:"dark",title:n("Lightbox Theme"),options:{dark:{title:n("Dark Overlay")},light:{title:n("Light Overlay")}},onlyFor:["lightbox:true"]},"max-width":{type:"slider",title:n("Max Width"),description:n("Maximum width for each column"),min:100,max:300,defaultValue:300,onlyFor:["design:autocolumns"]},newWindow:{type:"boolean",defaultValue:false,title:n("Open Links in New Window"),description:n("Images with links will open in a new window.")},transparentBackground:{type:"boolean",defaultValue:false,title:n("Transparent Background"),description:n("Remove the color behind uncropped or transparent images."),onlyFor:["auto-crop:false","design:slideshow"],matchAllOnlyFor:true}};e.exports=s},1572:function(e,t){var a={MAIN_CONTENT:1,CONTENT_COLLECTION:1,PAGE:2,SPLASH_PAGE:3,CONTENT_ITEM:50,NOT_FOUND:100,ERROR:101,SEARCH:102,LOCK_SCREEN:103,POPUP_OVERLAY:104,PROTECTED_CONTENT:105,MEMBER_AREA_ACCESS_DENIED:106,SHOW_CART:200,CHECKOUT:201,ORDER_CONFIRMED:202,DONATE:203,CONTRIBUTION_CONFIRMED:204,COMMERCE_CART_V2:205,SUBSCRIPTION_CONFIRMED:206,ORDER_RECEIVED:207,MEMBERSHIP_CONFIRMED:208,NEWSLETTER_UNSUBSCRIBE:300,COMMERCE_EMAIL_PREVIEW:301};e.exports=a},1574:function(e,t){YUI.add("squarespace-ss-widget",function(l){l.namespace("Squarespace.Widgets");var c=l.Squarespace.Widgets.SSWidget=l.Squarespace.SSWidget=l.Base.create("ssWidget",l.Widget,[],{delegatedEvents:{},initializer:function(e){this.LOG=new l.Squarespace.Debugger({name:this.name,output:false});this._anims=new l.Squarespace.Anims;this.on("classNameChange",function(e){var t=this.get("boundingBox");t&&t.removeClass(e.prevVal).addClass(e.newVal)},this);this._events=[];this._timers=[]},destroy:function(e){if(!l.Lang.isBoolean(e)&&!this.get("destroyed")){var t=this.get("boundingBox");var a=this.get("contentBox");t&&t._node&&a&&a._node?e=true:this.LOG.error("This widget's elements was improperly cleaned up!")}c.superclass.destroy.call(this,e)},destructor:function(){this._anims.destroy();l.detach(this.get("id")+"|*");this.detach(this.get("id")+"|*");while(0!==this._events.length)this._events.shift().detach();while(0!==this._timers.length)this._timers.shift().cancel();this._anims=null;this._timers=[];this._events=[];this.LOG=null},_registerEvent:function(){if(l.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)l.Lang.isValue(arguments[e])&&this._events.push(arguments[e])},_registerPointerEvent:function(e,t,a,i){var n=l.Squarespace.Utils._attachPointerAction(e,t,a,i);this._registerEvent(n)},_registerAnim:function(e){this._anims.add(e)},_registerCallback:function(e,t){return l.bind(function(){if(this.get("destroyed"))return;e.apply(t||this,arguments)},this)},_registerTimer:function(e){this._timers.push(e);return e},renderUI:function(){var e=this.get("className");this.get("boundingBox").addClass(e);this.get("preventRenderTemplate")||this.get("contentBox").prepend(this.renderTemplate())},bindUI:function(){var i=this.get("id");this.after(i+"|stringsChange",function(e){e.noSyncUI||this.syncUI()},this);var n=this.get("boundingBox");l.Object.each(this.delegatedEvents,function(e,a){l.Object.each(e,function(e,t){n.delegate(i+"|"+t,this[e],a,this)},this)},this)},syncUI:function(){},_getTemplateInfo:function(){var e=c.TEMPLATE_TYPES;var t=false;var a=this.constructor;var i;var n;var s;var r;var o=function(){s=a.HANDLEBARS_TEMPLATE;n=a.TEMPLATE;t=l.Lang.isValue(s);r=t?e.HANDLEBARS:e.HTML};o();while(l.Lang.isUndefined(s)&&l.Lang.isUndefined(n)){a=a.superclass.constructor;o()}i=t?l.Squarespace.UITemplates.getCompiledTemplate(s):function(){return l.Node.create(n)};return{type:r,template:i}},renderTemplate:function(){var e=c.TEMPLATE_TYPES;var t=this._getTemplateInfo();if(t.type===e.HANDLEBARS){var a=this._getHBTemplateContext();return t.template(a)}return t.template()},getProperty:function(e){var t=this.constructor,a=this.constructor[e];while(l.Lang.isUndefined(a)){if(!t.superclass)break;t=t.superclass.constructor;if(l.Lang.isUndefined(t))break;a=t[e]}return a},_getHBTemplateContext:function(){return this.getAttrs()}},{CSS_PREFIX:"sqs-widget",HANDLEBARS_TEMPLATE:null,TEMPLATE:"",TEMPLATE_TYPES:{HANDLEBARS:"handlebars",HTML:"html"},ATTRS:{className:{value:null},preventRenderTemplate:{value:false,validator:l.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-anims","squarespace-attr-validators","squarespace-debugger","squarespace-template-helpers","squarespace-ui-templates","squarespace-util","widget"]})},1575:function(e,t,a){var n=a(517);var s=a(1578);YUI.add("squarespace-debugger",function(i){i.namespace("Squarespace");var e=i.Squarespace.Legacy.Class;i.Squarespace.Debugger=e.create({defaultOpts:{output:true,ignore:[],name:"GenericComponent"},initialize:function(e){this.params=i.merge(this.defaultOpts,e);s.isProductionEnvironment()&&(this.params.output=false);this.params.uid&&(this.params.name+=" #"+this.getUID());if(this.params.logEvents){var t=this;this.params.logEvents.fire=function(e){t.log("Firing",e);i.EventTarget.prototype.fire.apply(t.params.logEvents,arguments)}}this.logEnabled=this.params.output},enable:function(){this.params.output=true},disable:function(){this.params.output=false},isInfoEnabled:function(){if(i.Lang.isBoolean(this.params.output))return this.params.output;return false},info:function(){return this.log.apply(this,arguments)},log:function(){if(!this.params.output)return;if(this.params.ignore.indexOf(arguments[0])>=0)return;var e=Array.prototype.slice.call(arguments);var t="["+this.params.name+"]";"string"===typeof e[0]?e[0]=t+" "+e[0]:e.unshift(t);console.log&&(i.UA.ios?console.log(e.join(" ")):console.log.apply?console.log.apply(console,e):console.log(e))},error:function(){var e=Array.prototype.slice.call(arguments);var t=e[e.length-1];t instanceof Error&&e.pop();e.unshift(this.params.name);i.UA.ios&&(e=[e.join(" ")]);console.error&&(i.UA.ios?console.error(e.join(" ")):console.error.apply?console.error.apply(console,e):console.error(e));var a;if(t&&t instanceof Error){a=t.stack;console.error("Stack: "+a)}else console.trace&&console.trace();n.trackCaughtError("damask",e[0],a)},warn:function(){var e=Array.prototype.slice.call(arguments);var t="["+this.params.name+"]";"string"===typeof e[0]?e[0]=t+" "+e[0]:e.unshift(t);console.warn&&(i.UA.ios?console.warn(e.join(" ")):console.warn.apply?console.warn.apply(console,e):console.warn(e))},isTimingEnabled:function(){return!!this.params.output},getUID:function(){void 0===i.Squarespace.Debugger.lastUID[this.params.name]&&(i.Squarespace.Debugger.lastUID[this.params.name]=0);return i.Squarespace.Debugger.lastUID[this.params.name]++},time:function(e){if(!this.params.output)return;console.time&&console.time("["+this.params.name+"] "+e)},timeEnd:function(e){if(!this.params.output)return;console.timeEnd&&console.timeEnd("["+this.params.name+"] "+e)}});i.Squarespace.Debugger.lastUID={}},"1.0",{requires:["squarespace-legacy-class","squarespace-util"]})},1576:function(e,t,a){var v=a(802);var b=a(810);var y=a(229);var S=a(149);var q=a(837);var _=a(1520);var C=a(1393);var E=a(24).formatDateTime;var k=a(1078);var w=a(24).t;var T=a(24).pluralize;var I=a(1581);YUI.add("squarespace-template-helpers",function(c){var d={get:function(e,t){if("function"===typeof e.get)return e.get(t);return e[t]}};var u={html:c.Squarespace.Escaping.escapeForHtml,htmltag:c.Squarespace.Escaping.escapeForHtmlTag,htmlattr:c.Squarespace.Escaping.escapeForHtmlTag,str:function(t){if(null===t||"undefined"===typeof t)return"";try{return t.toString()}catch(e){return"[JSONT: Can't format variable as string (typeof: "+typeof t+").]"}},raw:function(e){return e},capitalize:function(e){return e.toUpperCase()},safe:function(e){if(!e)return"";return e.replace(/<.*?>/g,"")},json:function(e){return c.JSON.stringify(e).replace(/<\/script>/g,'</scr"+"ipt>')},"json-pretty":function(e){return c.JSON.stringify(e,null,2).replace(/<\/script>/g,'</scr"+"ipt>')},smartypants:function(e){e=e.replace(/(^|[-\u2014\s(\["])'/g,"$1‘");e=e.replace(/'/g,"’");e=e.replace(/(^|[-\u2014/\[(\u2018\s])"/g,"$1“");e=e.replace(/"/g,"”");e=e.replace(/--/g,"—");return e},slugify:function(e){return e?e.replace(/[^\-a-zA-Z0-9\s]+/gi,"").replace(/\s/g,"-").toLowerCase():""},"url-encode":function(e){return encodeURIComponent(e)},"activate-twitter-links":function(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;var a=/(^| )@([a-zA-Z0-9_]+)/gi;var i=/(^| )#([a-zA-Z0-9_]+)/gi;return e.replace(t,'<a target="new" href="$1">$1</a>').replace(a,'$1<a target="new" href="http://www.twitter.com/$2/">@$2</a>').replace(i,function(e){return'<a target="new" href="http://www.twitter.com/search/'+encodeURIComponent(e)+'">'+e+"</a>"})},count:function e(t){var a=t.length;if(!c.Lang.isValue(a)&&"object"===typeof t){a=0;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&a++}return a||0},"audio-player":function(e){return'<script>Y.use(\'squarespace-audio-player-frontend\');<\/script><div class="squarespace-audio-player" data-audio-asset-url="'+e.structuredContent.audioAssetUrl+'" data-item-id="'+e.id+'" id="audio-player-'+e.id+'"></div>'},"social-button":function(e,t){var a=t._LookUpStack("website");var i=e.systemDataId||e.mainImageId||"";var n=e.assetUrl||(e.mainImage?e.mainImage.assetUrl:"")||"";if(a&&a.shareButtonOptions&&0!==Object.keys(a.shareButtonOptions).length)return'<script>Y.use(\'squarespace-social-buttons\');<\/script><div class="squarespace-social-buttons button-style" data-system-data-id="'+i+'" data-asset-url="'+n+'" data-record-type="'+e.recordType+'" data-full-url="'+e.fullUrl+'" data-title="'+c.Squarespace.Escaping.escapeForHtmlTag(e.title)+'"></div>'},"social-button-inline":function(e,t){var a=t._LookUpStack("website");var i=e.systemDataId||e.mainImageId||"";var n=e.assetUrl||(e.mainImage?e.mainImage.assetUrl:"")||"";if(a&&a.shareButtonOptions&&0!==Object.keys(a.shareButtonOptions).length)return'<script>Y.use(\'squarespace-social-buttons\');<\/script><span class="squarespace-social-buttons inline-style" data-system-data-id="'+i+'" data-asset-url="'+n+'" data-record-type="'+e.recordType+'" data-full-url="'+e.fullUrl+'" data-title="'+c.Squarespace.Escaping.escapeForHtmlTag(e.title)+'"></span>'},"twitter-follow-button":function(e){var t=e.userName||e.profileUrl.split("/").pop();return v("<script>Y.use('squarespace-follow-buttons', function(Y) { Y.on('domready', function() { Y.Squarespace.FollowButtonUtils.renderAll(); }); });<\/script><div class=\"squarespace-follow-button\" data-username=\"{userName}\"></div>",{userName:t})},comments:function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.disqusShortname)return'<div class="squarespace-comments" id="disqus_thread"></div>';return'<div class="squarespace-comments" id="comments-'+e.id+'"></div>'},"comment-link":function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.disqusShortname)return'<a href="'+e.fullUrl+'" class="sqs-comment-link sqs-disqus-comment-link" data-id="'+e.id+'"></a>';return'<a href="'+e.fullUrl+"#comments-"+e.id+'" class="sqs-comment-link" data-id="'+e.id+'">'+e.publicCommentCount===0?w("No"):T({one:"{%n} Comment",other:"{%n} Comments"},e.publicCommentCount)+"</a>"},"like-button":function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.simpleLikingEnabled)return'<span class="sqs-simple-like" data-item-id="'+e.id+'" data-like-count="'+e.likeCount+'"><span class="like-icon"></span><span class="like-count"></span></span>'},"comment-count":function(e){var t=e.publicCommentCount;return 0===t?w("No Comment"):T({one:"{%n} Comment",other:"{%n} Comments"},t)},"image-meta":function(e){if(!e)return;var t="0.5,0.5";e.mediaFocalPoint&&(t=e.mediaFocalPoint.x+","+e.mediaFocalPoint.y);var a=I.getImageAlt(e);a=a&&c.Squarespace.Escaping.escapeForHtmlTag(a);return'data-image="'+e.assetUrl+'" data-src="'+e.assetUrl+'" data-image-dimensions="'+(e.originalSize||"")+'" data-image-focal-point="'+t+'" alt="'+a+'" '},height:function(e){var t=e.split("x");if(2!==t.length)return"Invalid source parameter.  Pass in 'originalSize'.";var a=parseInt(t[1],10);return a},width:function(e){var t=e.split("x");if(2!==t.length)return"Invalid source parameter.  Pass in 'originalSize'.";var a=parseInt(t[0],10);return a},"percentage-format":function(e){var t=e.toFixed(3);var a=t.length;if("0"===t.charAt(a-1))return t.substring(0,a-1);return t},"google-calendar-url":function(e){var t="http://www.google.com/calendar/event?action=TEMPLATE";var a="YYYYMMDD[T]HHMMSS[Z]";var i=new Date(e.startDate);i.setHours(i.getHours()+i.getTimezoneOffset()/60);var n=E(i,a);var s=new Date(e.endDate);s.setHours(s.getHours()+s.getTimezoneOffset()/60);var r=E(s,a);var o;e.location&&(o=e.location.addressLine1+", "+e.location.addressLine2+", "+e.location.addressCountry);t+="&text="+encodeURI(e.title);t+="&dates="+n+"/"+r;o&&(t+="&location="+o);return t},AbsUrl:function(e,t){return d.get("base-url")+"/"+e},"item-classes":function(e,t){t.hash&&(t=this);var a=["hentry"];var i=d.get(t,"promotedBlockType");if(i){a.push("promoted");a.push(u.slugify("promoted-block-"+i))}var n=d.get(t,"categories");if(n)for(var s=0;s<n.length;s++)a.push(u.slugify("category-"+n[s]));var r=d.get(t,"tags");if(r)for(var o=0;o<r.length;o++)a.push(u.slugify("tag-"+r[o]));var l=d.get(t,"author");!l||!l.displayName||a.push(u.slugify("author-"+l.displayName));a.push("post-type-"+d.get(t,"recordTypeLabel"));a.push("article-index-"+d.get(t,"@index"));d.get(t,"starred")&&a.push("featured");e.recordType===S.STORE_ITEM&&c.Squarespace.Commerce.onSale(e)&&a.push("on-sale");return a.join(" ")},round:function(e,t,a){return Math.round(parseFloat(e))},iter:function(e){return d.get(e,"@index")},"product-status":function(e){if(c.Squarespace.Commerce.soldOut(e))return'<div class="product-mark sold-out">sold out</div>';if(c.Squarespace.Commerce.onSale(e))return'<div class="product-mark sale">sale</div>'},"money-string":function(e){return c.Squarespace.Commerce.moneyString(e)},"product-price":function(e){return'<div class="product-price">'+c.Squarespace.Commerce.priceString(e)+"</div>"},"from-price":function(e){return c.Squarespace.Commerce.fromPrice(e)},"normal-price":function(e){return c.Squarespace.Commerce.normalPrice(e)},"sale-price":function(e){return c.Squarespace.Commerce.salePrice(e)},"variant-descriptor":function(e){return c.Squarespace.Commerce.variantFormat(e)},"color-weight":function(e){if(e&&e.length>0&&e.length<=7){e=e.replace("#","");return parseInt(e,16)>8388607.5?"light":"dark"}return""},"summary-form-field":function(e){return c.Squarespace.Commerce.summaryFormFieldString(e)},timesince:function(e){if(!c.Lang.isNumber(e))return"Invalid date.";var t=k(e).capitalize();return'<span class="timesince" data-date="'+e+'">'+t+"</span>"},pluralize:function(e,t){var a;var i;switch(t.length){case 0:a="";i="s";break;case 1:a="";i=t[0];break;case 2:a=t[0];i=t[1];break;default:throw new Error("pluralize got too many args")}return 1===e?a:i}};var e=[{name:"collectionTypeNameEquals?",func:function(e,t,a){return t.get("typeName")===a[0]}}];var t={"has-multiple?":function(e){return e.length>1},"main-image?":function(e){return!!e.mainImageId||!!e.systemDataId},"child-images?":function(e){if(!!e.items&&e.items.length>0){var t=e.items[0];if(!!t.mainImageId||!!t.systemDataId)return true}return false},"location?":function(e){return e.location&&e.location.mapLat&&e.location.mapLng},"excerpt?":function(e){var t=e.excerpt&&(e.excerpt.html||e.excerpt)||"";return!C(t)},"comments?":function(e,t){var a=t._LookUpStack("websiteSettings");var i=1===e.commentState;!i&&e.publicCommentCount>0&&(i=true);a&&!a.commentsEnabled&&(i=false);return i},"collection?":function(e){return e.collection},"collection-page?":function(e){return e.collection&&e.collection.type===y.COLLECTION_TYPE_PAGE},"passthrough?":function(e){return e.passthrough&&e.sourceUrl&&""!==e.sourceUrl},"event?":function(e){return e.recordType===S.EVENT},"same-day?":function(e,t){try{var a=new window.TimezoneJS.Date(e.startDate,t.get("website.timeZone"));var i=new window.TimezoneJS.Date(e.endDate,t.get("website.timeZone"));return a.getYear()===i.getYear()&&a.getMonth()===i.getMonth()&&a.getDate()===i.getDate()}catch(e){return false}},"external-link?":function(e){return!!e.externalLink},"folder?":function(e){return e.collection&&e.collection.folder},"index?":function(e){var t=c.Object.getValue(e,["collection","folder","folderBehavior"]);return t===q.INDEX},"variation?":function(e){var t=c.Object.getValue(e,["collection","folder","folderBehavior"]);return t===q.VARIATION},"singular?":function(e){return 1===e},"plural?":function(e){return 1!==e},"disqus?":function(e,t){var a=t._LookUpStack("websiteSettings");return a&&a.disqusShortname},"serviceNameEmail?":function(e,t){return"email"===e.serviceName},"debug?":function(e,t){try{return t.get("debug")}catch(e){if("UndefinedVariable"===e.name)return false;throw e}},"calendar-view?":function(e,t){var a=t._LookUpStack("calendarView");return true===a},"has-variants?":function(e){return c.Squarespace.Commerce.hasVariants(e)},"varied-prices?":function(e){return c.Squarespace.Commerce.variedPrices(e)},"on-sale?":function(e){return c.Squarespace.Commerce.onSale(e)},"sold-out?":function(e){return c.Squarespace.Commerce.soldOut(e)}};var a=[{name:"output",func:function(e,t,a){return a.join(" ")}},I.prefixFormatters.video(c),{name:"image-color",func:function(e,t,a){var i="";if(e.colorData)if(a.length>0){var n=e.colorData[a[0]+"Average"];i=n?2===a.length?a[1]+": #"+n:"#"+n:v("{sub1} not found: valid position-- topLeft, topRight, bottomLeft, bottomRight, center",{sub1:a[0]})}else i=I.colorDataToDataAttrs(e.colorData);return i}},{name:"child-image-meta",func:function(e,t,a){var i=e.items[a&&a[0]?a[0]:0];var n="0.5,0.5";i.mediaFocalPoint&&(n=i.mediaFocalPoint.x+","+i.mediaFocalPoint.y);var s=I.getImageAlt(i);s=s&&c.Squarespace.Escaping.escapeForHtmlTag(s);return'data-image="'+i.assetUrl+'" data-src="'+i.assetUrl+'" data-image-dimensions="'+(i.originalSize||"")+'" data-image-focal-point="'+n+'" alt="'+s+'" '}}];function i(t,a){if(a)return function(e){return e.recordType===t||e.promotedBlockType===a};return function(e){return e.recordType===t}}var n={text:S.TEXT,image:S.IMAGE,quote:S.QUOTE,gallery:S.GALLERY,link:S.LINK,chat:S.CHAT,audio:S.AUDIO,video:S.VIDEO,review:S.REVIEW,store_item:S.STORE_ITEM,event:S.EVENT,thread:S.THREAD,tweet:S.TWEET,rss:S.RSS,geo:S.CHECKIN,delicious:S.DELICIOUS,kbarticle:S.KBARTICLE};Object.keys(n).forEach(function(e){t[e+"?"]=i(n[e])});t["external-video?"]=i(S.VIDEO,"video");t["video?"]=i(S.VIDEO,"video");t["image?"]=i(S.IMAGE,"image");t["quote?"]=i(S.QUOTE,"quote");t["link?"]=i(S.LINK,"link");t["quote?"]=i(S.QUOTE,"quote");t["gallery?"]=i(S.GALLERY,"gallery");function s(t){return function(e){return e.promotedBlockType===t}}var r=["map","embed","image","code","quote","twitter","link","video","foursquare","instagram","form"];for(var o=0;o<r.length;o++){var l=r[o];t["promoted"+l.capitalize()+"?"]=s(l)}t["redirect?"]=function(e){return e.folderBehavior===q.REDIRECT};t["clickable?"]=function(e,t,a){var i=t._LookUpStack("folderBehavior");if("undefined"===typeof i)return true;return i===q.INDEX||i===q.REDIRECT};function g(i,n){return function(e,t,a){return t._LookUpStack("options")[i]===n}}for(var p in _){var h=_[p];switch(h.type){case"select":for(var f in h.options)t["gallery-"+p+"-"+f+"?"]=g(p,f);break;case"boolean":t["gallery-"+p+"?"]=g(p,true);break;case"slider":case"multiOption":break;default:false;break}}t["gallery-meta?"]=function(e,t,a){return t._LookUpStack("options").controls||t._LookUpStack("options").indicators};var m={debug:function(){return function(e){var t="DEBUG:\n========================\n";t+=JSON.stringify(this||e,null,2);t+="END DEBUG:\n========================\n";return t}}};c.namespace("Squarespace");c.Squarespace.HANDLEBARS_HELPERS=m;c.Squarespace.TEMPLATE_PREDICATES=t;c.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES=e;c.Squarespace.TEMPLATE_FORMATTERS=u;c.Squarespace.TEMPLATE_PREFIX_FORMATTERS=a;c.Squarespace.TEMPLATE_FORMATTERS.date=function(e,t,a){if(!c.Lang.isNumber(t))return"Invalid date.";return b(new Date(t),a)};Object.keys(c.Squarespace.TEMPLATE_FORMATTERS).forEach(function(t){c.Handlebars.registerHelper(t,function(e){return c.Squarespace.TEMPLATE_FORMATTERS[t].apply(this,[this].concat(Array.prototype.slice.call(arguments)))})});Object.keys(c.Squarespace.TEMPLATE_PREDICATES).forEach(function(t){c.Handlebars.registerHelper("if-"+t.replace("?",""),function(e){return c.Handlebars.helpers.if.call(this,function(){return c.Squarespace.TEMPLATE_PREDICATES[t](this)},e)})});Object.keys(c.Squarespace.HANDLEBARS_HELPERS).forEach(function(e){c.Handlebars.registerHelper(e,c.Squarespace.HANDLEBARS_HELPERS[e])})},"1.0",{requires:["handlebars-base","json","squarespace-commerce-utils","squarespace-escaping-utils","substitute"]})},1578:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(43));var s=function e(){var t=(0,n.default)(window,"Static.SQUARESPACE_CONTEXT.appDomain","");return t&&(-1!==t.indexOf("sqsp.com")||-1!==t.indexOf("squarespace.com"))};var r={isProductionEnvironment:s};t.default=r;e.exports=t.default},1581:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.prefixFormatters=t.getImageAlt=t.stripTags=t.colorDataToDataAttrs=void 0;var v=function e(t){return t.topLeftAverage&&t.topRightAverage&&t.bottomLeftAverage&&t.bottomRightAverage&&t.centerAverage?' data-color-topleft="#'.concat(t.topLeftAverage,'"\n  data-color-topright="#').concat(t.topRightAverage,'"\n  data-color-bottomleft="#').concat(t.bottomLeftAverage,'"\n  data-color-bottomright="#').concat(t.bottomRightAverage,'"\n  data-color-center="#').concat(t.centerAverage,'" '):""};t.colorDataToDataAttrs=v;var i=function e(t){return t.replace(/<(?:.|\n)*?>/gm,"")};t.stripTags=i;var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.title&&t.title.length>0)return t.title;if(t.body&&t.body.length>0)return i(t.body);if(t.filename&&t.filename.length>0)return t.filename;return""};t.getImageAlt=n;var s={};t.prefixFormatters=s;s.video=function(m){return{name:"video",func:function e(t,a,i){var n=t.oembed||{};var s=t.assetUrl,r=t.colorData,o=t.mediaFocalPoint;var l=false;var c=false;if(i)for(var d=0;d<i.length;d++){var u=i[d];"load-false"===u?l=true:"color-data"===u&&(c=true)}var g=l?'data-load="false" ':"";var p=m.Squarespace.Escaping.escapeForHtmlTag(n.html);var h='<div class="sqs-video-wrapper"\n      '.concat(g,'\n      data-html="').concat(p,'"\n      data-provider-name="').concat(n.providerName,'">');if(t.overlay){var f='<div class="sqs-video-overlay';if(!t.mainImageId&&!t.systemDataId)f+=' no-thumb" style="opacity: 0;">';else{f+='" style="opacity: 0;">';f+='<img data-load="false" data-image="'+s+'" data-src="'+s+'" data-image-dimensions="'+(t.originalSize||"")+'" data-image-focal-point="'+(o?o.x+","+o.y:"0.5,0.5")+'" ';c&&r&&(f+=v(r));f+="/>"}f+='<div class="sqs-video-opaque"></div><div class="sqs-video-icon"></div>';f+="</div>";h+=f}h+="</div>";return h}}}},1596:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.trackInventoryPanelClickNextPage=t.trackInventoryPanelClickRow=t.trackInventoryPanelClickRowExpander=t.trackInventoryPanelSortOnPrice=t.trackInventoryPanelSortOnStock=t.trackInventoryPanelSortOnName=t.trackInventoryPanelSearchProducts=t.trackFacebookPixelSaveId=t.trackDynamicAdsProductsFeedUrlCopy=t.trackInstagramProductsFeedUrlCopy=t.trackApiKeyCreationModalComplete=t.trackApiKeyCreationModalCancel=t.trackApiKeyCreationModalNext=t.trackApiKeyCreationModalCopy=t.trackApiKeysPanelDeleteKeyConfirm=t.trackApiKeysPanelDeleteKey=t.trackApiKeysPanelCreateKey=t.trackApiKeysPanelTermsOfUse=t.trackApiKeysPanelLearnMore=t.trackCheckoutPageExtraPaymentAuthenticationRequiredApplePay=t.trackCheckoutPageExtraPaymentAuthenticationSuccess=t.trackCheckoutPageExtraPaymentAuthenticationFailure=t.trackCheckoutPageExtraPaymentAuthenticationRequired=t.trackCheckoutPageLoaded=t.trackCheckoutPageProductFormSubmit=t.trackCheckoutPageProductFormClose=t.trackPurchase=t.trackViewProductPage=t.trackSubscribeNewsletter=t.trackSearch=t.trackAddToCart=t.trackCreateCustomerAccount=t.trackCheckoutPageAddPaymentInfo=t.trackInitiateCheckout=t.trackCheckoutPageProductFormOpen=t.trackCartPageProductFormSubmit=t.trackCartPageProductFormClose=t.trackCartPageProductFormOpen=void 0;var n=i(a(2));var s=i(a(2219));var r=i(a(2220));var o=i(a(2221));var l=i(a(2222));var c=i(a(213));function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var g=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_OPEN)};t.trackCartPageProductFormOpen=g;var p=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_CLOSE)};t.trackCartPageProductFormClose=p;var h=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_SUBMIT)};t.trackCartPageProductFormSubmit=h;var f=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_OPEN)};t.trackCheckoutPageProductFormOpen=f;var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.INITIATE_CHECKOUT,t)};t.trackInitiateCheckout=m;var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.CHECKOUT_PAGE_ADD_PAYMENT,t)};t.trackCheckoutPageAddPaymentInfo=v;var b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.CREATE_CUSTOMER_ACCOUNT,t)};t.trackCreateCustomerAccount=b;var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.ADD_TO_CART,t)};t.trackAddToCart=y;var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.SEARCH,t)};t.trackSearch=S;var q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.SUBSCRIBE_NEWSLETTER,t)};t.trackSubscribeNewsletter=q;var _=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.VIEW_PRODUCT_PAGE,t)};t.trackViewProductPage=_;var C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.PURCHASE,t)};t.trackPurchase=C;var E=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_CLOSE)};t.trackCheckoutPageProductFormClose=E;var k=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_SUBMIT)};t.trackCheckoutPageProductFormSubmit=k;var w=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_LOADED,s.default.collect())};t.trackCheckoutPageLoaded=w;var T=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED)};t.trackCheckoutPageExtraPaymentAuthenticationRequired=T;var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE)};t.trackCheckoutPageExtraPaymentAuthenticationFailure=I;var A=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS)};t.trackCheckoutPageExtraPaymentAuthenticationSuccess=A;var x=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_APPLE_PAY)};t.trackCheckoutPageExtraPaymentAuthenticationRequiredApplePay=x;var L=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_LEARN_MORE})};t.trackApiKeysPanelLearnMore=L;var D=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_TERMS_OF_USE})};t.trackApiKeysPanelTermsOfUse=D;var N=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_CREATE_KEY})};t.trackApiKeysPanelCreateKey=N;var O=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEYS_PANEL_DELETE_KEY},t))};t.trackApiKeysPanelDeleteKey=O;var R=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEYS_PANEL_DELETE_KEY_CONFIRM},t))};t.trackApiKeysPanelDeleteKeyConfirm=R;var P=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEY_CREATION_MODAL_COPY},t))};t.trackApiKeyCreationModalCopy=P;var B=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEY_CREATION_MODAL_NEXT},t))};t.trackApiKeyCreationModalNext=B;var M=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEY_CREATION_MODAL_CANCEL},t))};t.trackApiKeyCreationModalCancel=M;var F=function e(t){return(0,c.default)("interface_click",u({identifier:o.default.API_KEY_CREATION_MODAL_COMPLETE},t))};t.trackApiKeyCreationModalComplete=F;var U=function e(){return(0,c.default)(r.default.INSTAGRAM_PRODUCTS_FEED_URL_COPY)};t.trackInstagramProductsFeedUrlCopy=U;var V=function e(){return(0,c.default)(r.default.FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY)};t.trackDynamicAdsProductsFeedUrlCopy=V;var z=function e(){return(0,c.default)(r.default.FACEBOOK_PIXEL_SAVE_ID)};t.trackFacebookPixelSaveId=z;var H=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SEARCH_PRODUCTS)};t.trackInventoryPanelSearchProducts=H;var G=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_NAME)};t.trackInventoryPanelSortOnName=G;var W=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_STOCK)};t.trackInventoryPanelSortOnStock=W;var Y=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_PRICE)};t.trackInventoryPanelSortOnPrice=Y;var j=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_ROW_EXPANDER)};t.trackInventoryPanelClickRowExpander=j;var Q=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_ROW)};t.trackInventoryPanelClickRow=Q;var X=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_NEXT_PAGE)};t.trackInventoryPanelClickNextPage=X},1622:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.addIntraPageEventFields=b;t.manageCookies=I;t.track=A;t.trackFormRender=D;t.trackOverlayEvent=N;t.trackPageview=O;t.trackProductQuickView=R;t.trackButtonView=t.trackButtonClick=void 0;var n=i(a(54));var s=i(a(2629));var r=i(a(128));var o=i(a(1572));var l=i(a(1944));var c=a(276);var d=i(a(228));var u=i(a(368));var g=["ss_cid","ss_cpvisit","ss_cvisit","ss_cvr","ss_cvt"];var p=function e(){return Promise.resolve()};var h={headers:{"Content-type":"application/x-www-form-urlencoded; charset=utf-8"}};function f(){return window.Static.SQUARESPACE_CONTEXT}function m(){return window.__WE_ARE_SQUARESPACE_DISABLING_CENSUS__}function v(){try{window.localStorage.setItem("test","1");return true}catch(e){return false}}function b(e){var t=f(),a=t.itemId,i=t.item,n=t.collectionId,s=t.collection;if(a&&i){e.pageTitle=i.title;e.pageId=a;e.contentSource="i"}else if(n&&s){e.pageTitle=s.title;e.pageId=n;e.contentSource="c"}e.pagePath=window.location.pathname}function y(){var e=f(),t=e.authenticatedAccount,a=e.pageType;return!t&&a!==o.default.NOT_FOUND&&a!==o.default.LOCK_SCREEN&&a!==o.default.MEMBER_AREA_ACCESS_DENIED&&true!==m()}function S(){var e=f(),t=e.website;if(null===t||void 0===t?void 0:t.cloneable)return true;return false}function q(){var e=f(),t=e.cookieSettings;if(S())return true;return t&&t.isRestrictiveCookiePolicyEnabled&&(t.isRestrictiveCookiePolicyAbsolute||!t.isCookieBannerEnabled||!r.default.get("ss_cookieAllowed"))}function _(a){return function(e){if(y()){var t=s.default.hit(q());e.visitorCookie=t;b(e);return d.default.post(a,e,{timeout:2500}).catch(p)}return Promise.resolve()}}function C(e){e.userAgent=navigator.userAgent;e.clientDate=(new Date).getTime();e.viewportInnerHeight=window.innerHeight;e.viewportInnerWidth=window.innerWidth;e.screenHeight=window.screen.height;e.screenWidth=window.screen.width;return e}function E(e){var t=f(),a=t.website,i=t.templateId;a&&(e.websiteId=a.id);i&&(e.templateId=i);e.website_locale=(0,c.getResolvedWebsiteLocale)();return e}function k(e){e.url=window.location.pathname;var t=f(),a=t.itemId,i=t.item,n=t.collectionId,s=t.collection;if(a&&i){e.title=i.title;e.itemId=a;e.recordType=i.recordType}else if(n&&s){e.title=s.title;e.collectionId=n}return e}function w(){return{localStorageSupported:v(),queryString:window.location.search,referrer:window.document.referrer}}function T(){return"/search"===window.location.pathname}function I(){if(q())for(var e=0;e<g.length;e++)r.default.get(g[e])&&r.default.set(g[e],"",{path:"/",expires:new Date(0).toUTCString()})}function A(e,t){if(!y())return;"object"===(0,n.default)(t)&&null!==t||(t={});E(t);C(t);k(t);var a=s.default.hit(q());d.default.post("/api/census/RecordHit",u.default.stringify({event:e,data:JSON.stringify(t),ss_cvr:a}),h).catch(p)}var x=_("/api/census/button-click");t.trackButtonClick=x;var L=_("/api/census/button-render");t.trackButtonView=L;function D(e){if(y()){var t=s.default.hit(q());var a={formId:e,visitorCookie:t};b(a);return d.default.post("/api/census/form-render",a).catch(p)}return Promise.resolve()}function N(e){if(y()){var t=s.default.hit(q());e.visitorCookie=t;b(e);return d.default.post("/api/census/overlay",e).catch(p)}}function O(){if(T())return;var e=w();A(l.default.PAGE_VIEW,e)}function R(e){y()&&d.default.post("/api/census/RecordQuickView/".concat(e))}},1937:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.loadReCaptcha=g;t.render=p;t.renderAll=h;t.validate=f;t.executeFirst=m;t.execute=v;t.reset=b;t.resetFirst=y;t.getCaptchaContainer=S;t.destroy=q;t.RECAPTCHA_RENDER_TYPE=void 0;var n=i(a(2));var r=i(a(43));var s=i(a(1577));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var c="https://www.google.com/recaptcha/api.js?onload=__grecaptchaOnLoadCallback&render=";var d="data-id";var u={EXPLICIT:"explicit",ONLOAD:"onload"};t.RECAPTCHA_RENDER_TYPE=u;function g(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.EXPLICIT;a.__grecaptchaOnLoadPromise=a.__grecaptchaOnLoadPromise||new Promise(function(e,t){a.__grecaptchaOnLoadCallback=function(){return e()};if(a.document){false;(0,s.default)(c+i,{doc:a.document}).catch(t)}else t("[GoogleReCaptchaAPI] Document was destroyed")});return a.__grecaptchaOnLoadPromise}function p(a,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s=(0,r.default)(a,"Static.SQUARESPACE_CONTEXT.website.captchaSettings.siteKey");if(!s)return;return g(a).then(function(){if(!i||i.getAttribute(d)||a.document!==i.ownerDocument||!(0,r.default)(i,"ownerDocument.defaultView")){console.error("Error rendering captcha into node",{node:i});return}var e=i.clientWidth<320?"compact":"normal";var t=a.grecaptcha.render(i,l({sitekey:s,size:e},n),true);i.setAttribute(d,t);i.classList.add("rendered")})}function h(t){if(!t.document)return;var e=t.document.querySelectorAll(".captcha-container:not('.rendered')");Array.from(e).forEach(function(e){return p(t,e)})}function f(e,t){var a=t.getAttribute(d);if(!a)return;return e.grecaptcha.getResponse(a)}function m(e){if(e.grecaptcha)return Promise.resolve(e.grecaptcha.execute());return Promise.reject({error:"ReCaptcha has not been set up!"})}function v(e,t){var a=t.getAttribute(d);if(!a)return Promise.resolve();if(e.grecaptcha)return Promise.resolve(e.grecaptcha.execute(a));return Promise.reject({error:"ReCaptcha has not been set up!"})}function b(e,t){var a=t.getAttribute(d);if(!a)return;e.grecaptcha.reset(a)}function y(e){e&&e.grecaptcha&&e.grecaptcha.reset()}function S(e,t){var a=t.querySelector(".captcha-container");var i=(0,r.default)(e,"Static.SQUARESPACE_CONTEXT.website.captchaSettings.siteKey");return i?a:null}function q(e){while(e.firstChild)e.removeChild(e.firstChild);e.removeAttribute(d)}},1944:function(e,t){var a={PAGE_VIEW:1,SITE_SEARCH:2,HEARTBEAT:10,AUDIO:20,VIDEO:21};e.exports=a},2220:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i;(function(e){e["CART_PAGE_PRODUCT_FORM_OPEN"]="commerce_cart_page_product_form_open";e["CART_PAGE_PRODUCT_FORM_CLOSE"]="commerce_cart_page_product_form_close";e["CART_PAGE_PRODUCT_FORM_SUBMIT"]="commerce_cart_page_product_form_submit";e["CART_PAGE_LOADED"]="commerce_cart_page_loaded";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED"]="commerce_checkout_page_extra_payment_authentication_required";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE"]="commerce_checkout_page_extra_payment_authentication_failure";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS"]="commerce_checkout_page_extra_payment_authentication_success";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_required_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_failure_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_success_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_APPLE_PAY"]="commerce_checkout_page_extra_payment_authentication_required_apple_pay";e["CHECKOUT_PAGE_PRODUCT_FORM_OPEN"]="commerce_checkout_page_product_form_open";e["CHECKOUT_PAGE_PRODUCT_FORM_CLOSE"]="commerce_checkout_page_product_form_close";e["CHECKOUT_PAGE_PRODUCT_FORM_SUBMIT"]="commerce_checkout_page_product_form_submit";e["CHECKOUT_PAGE_LOADED"]="commerce_checkout_page_loaded";e["INITIATE_CHECKOUT"]="InitiateCheckout";e["CHECKOUT_PAGE_ADD_PAYMENT"]="AddPaymentInfo";e["CREATE_CUSTOMER_ACCOUNT"]="CompleteRegistration";e["ADD_TO_CART"]="AddToCart";e["SEARCH"]="Search";e["SUBSCRIBE_NEWSLETTER"]="Lead";e["VIEW_PRODUCT_PAGE"]="ViewContent";e["PURCHASE"]="Purchase";e["INVENTORY_PANEL_SEARCH_PRODUCTS"]="commerce_inventory_panel_search_products";e["INVENTORY_PANEL_SORT_ON_NAME"]="commerce_inventory_panel_sort_on_name";e["INVENTORY_PANEL_SORT_ON_STOCK"]="commerce_inventory_panel_sort_on_stock";e["INVENTORY_PANEL_SORT_ON_PRICE"]="commerce_inventory_panel_sort_on_price";e["INVENTORY_PANEL_CLICK_ROW_EXPANDER"]="commerce_inventory_panel_click_row_expander";e["INVENTORY_PANEL_CLICK_ROW"]="commerce_inventory_panel_click_row";e["INVENTORY_PANEL_CLICK_NEXT_PAGE"]="commerce_inventory_panel_click_next_page";e["INVENTORY_PANEL_SETTINGS_OPEN"]="commerce_inventory_panel_settings_open";e["INVENTORY_PANEL_SETTINGS_CLOSE"]="commerce_inventory_panel_settings_close";e["INVENTORY_PANEL_SETTINGS_SAVE"]="commerce_inventory_panel_settings_save";e["INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_PDP"]="commerce_inventory_panel_settings_toggle_scarcity_pdp";e["INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_BLOCKS"]="commerce_inventory_panel_settings_toggle_scarcity_blocks";e["INVENTORY_PANEL_SETTINGS_CHANGE_SCARCITY_THRESHOLD"]="commerce_inventory_panel_settings_change_scarcity_threshold";e["INSTAGRAM_PRODUCTS_FEED_URL_COPY"]="commerce_instagram_products_feed_url_copy";e["FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY"]="commerce_facebook_ads_feed_url_copy";e["FACEBOOK_PIXEL_SAVE_ID"]="commerce_facebook_pixel_save_id"})(i=i||{});var n=i;t.default=n;e.exports=t.default},2221:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i;(function(e){e["API_KEY_CREATION_MODAL_COPY"]="api_key_creation_modal_copy";e["API_KEY_CREATION_MODAL_CANCEL"]="api_key_creation_modal_cancel";e["API_KEY_CREATION_MODAL_NEXT"]="api_key_creation_modal_next";e["API_KEY_CREATION_MODAL_COMPLETE"]="api_key_creation_modal_complete";e["API_KEYS_PANEL_CREATE_KEY"]="api_keys_panel_create_key";e["API_KEYS_PANEL_LEARN_MORE"]="api_keys_panel_learn_more";e["API_KEYS_PANEL_TERMS_OF_USE"]="api_keys_panel_terms_of_use";e["API_KEYS_PANEL_DELETE_KEY"]="api_keys_panel_delete_key";e["API_KEYS_PANEL_DELETE_KEY_CONFIRM"]="api_keys_panel_delete_key_confirm"})(i=i||{});var n=i;t.default=n;e.exports=t.default},2222:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=window.top;a.fbq&&a.fbq("track",e,t)}var n=i;t.default=n;e.exports=t.default},2223:function(e,t){var a={AUTHENTICATED:"authenticated",REDIRECT:"redirect"};e.exports=a},2710:function(e,t){var a={NONE:1,LIGHT:2,DARK:3};e.exports=a},2712:function(e,t){var a={NONE:1,BLACK:2,WHITE:3};e.exports=a},2738:function(e,t){var a={COVER_PAGE:1,LOCK_SCREEN:2,POPUP_OVERLAY:3};e.exports=a},2745:function(e,t){var a={NONE:1,CUSTOM:2};e.exports=a},2751:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;var s=function e(t,a,i,n){var s=a.value.length;i.innerText="".concat(s," / ").concat(n);t.classList.toggle("error",s>n)};var i=function e(t){var a=t.querySelector("textarea");if(!a||a.dataset.characterCounter)return;a.dataset.characterCounter=true;var i;i=parseInt(t.dataset.maxLength,10);i=isNaN(i)?0:Math.max(i,0);if(0===i)return;var n=document.createElement("div");n.style.textAlign="right";t.appendChild(n);s(t,a,n,i);a.addEventListener("input",function(e){s(t,a,n,i)})};function n(e){Array.from(e.querySelectorAll(".textarea[data-max-length]")).forEach(i)}e.exports=t.default},2886:function(e,t,a){"use strict";var i=a(2223);var n={AUTHENTICATED:i.AUTHENTICATED,REDIRECT:i.REDIRECT,CLOSE:"close",STEP_CHANGE:"step-change",CART_UPDATE:"cart"};e.exports=n},2887:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=f;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=a(3082);var d=i(a(1078));var u=i(a(3062));var g=i(a(761));function p(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var h=function(e){(0,r.default)(a,e);var t=p(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"apply",value:function e(t,a,i){var n=a[0];var s=n.node.asNumber();if(!(0,g.default)(s))return"Invalid date.";var r=(0,u.default)((0,d.default)(s));n.set('<span class="timesince" data-date="'.concat(s,'">').concat(r,"</span>"))}}]);return a}(c.Formatter);function f(e,t){var a=new c.Compiler({predicates:c.Predicates,formatters:Object.assign({},c.Formatters,{timesince:new h})});var i=a.execute({code:e,json:t}),n=i.ctx,s=i.errors;s.length>0&&console.log("JSONT compilation error messages:",s);return n.render()}e.exports=t.default},3053:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={WEEK:"WEEK",MONTH:"MONTH",YEAR:"YEAR"};var n=i;t.default=n;e.exports=t.default},3062:function(e,t,a){"use strict";var i=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};e.exports=i},3063:function(e,t){YUI.add("squarespace-model-sync-rest",function(o){function e(){this._ioConfigCache={}}e.prototype={sync:function(e,t,a){o.Lang.isValue(t.timeout)||(t.timeout=1e7);o.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(e,t){this._ioConfigCache[e.id]=o.merge(t,{})},_retrieveAndEvict:function(e){var t=this._ioConfigCache[e];this._ioConfigCache[e]=null;return t},_isCrumbFailure:function(e){return e&&e.crumbFail&&e.crumb},_sendSyncIORequest:function(e){var t=o.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(t,e);return t},_onSyncIOEnd:function(e,t){this._retrieveAndEvict(e);o.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(e,t,a){var i=this._retrieveAndEvict(e);var n={};var s=t.responseText;o.Lang.isValue(s)&&s.trim()&&(n=o.JSON.parse(s));if(this._isCrumbFailure(n)){var r=n.crumb;o.ModelSync.REST.CSRF_TOKEN=r;o.Env.CSRF_TOKEN=r;i.headers["X-CSRF-Token"]=r;this._sendSyncIORequest(i)}else o.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(e,t,a){var i=a.callback;if(i){var n={};var s=t.responseText;o.Lang.isValue(s)&&s.trim()&&(n=o.JSON.parse(s));i({code:t.status,msg:t.statusText,responseJSON:n},t)}}};o.mix(e,o.ModelSync.REST,false,null,1);o.namespace("Squarespace.ModelSync").REST=e},"1.0",{requires:["model-sync-rest"]})},3069:function(e,t){var a={DEFAULT:1,DOMAIN_FIRST:2,GOOGLE_DOMAINS:3,DOMAIN_TRANSFER:4};e.exports=a},3418:function(e,t){var a={ENABLED:1,DISABLED:2};e.exports=a},3442:function(e,t){var a={ACTIVE:"active",CANCELED:"canceled",PAST_DUE:"pastDue",TRIAL:"trial",UNPAID:"unpaid",EXPIRED:"expired",PENDING:"pending",PENDING_CANCELED:"pending_canceled",TRANSFERRING:"transferring"};e.exports=a},3443:function(e,t){var a={TIME:1,USES:2,TIME_AND_USES:3};e.exports=a},3476:function(e,t){var a={STACKED:"stacked",GRID:"grid",FULL_URL:"full-url"};e.exports=a},3500:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a(27));var r=n(a(40));var l=n(a(8));var c=n(a(9));var d=n(a(2));var o=n(a(643));var u=n(a(67));var g=n(a(1485));var p=a(24);var h=n(a(504));var f=a(3070);var m=n(a(3436));var v=a(1596);var b=i(a(1937));var y=a(1336);var S=n(a(228));var q=a(1622);function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),true).forEach(function(e){(0,d.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var E=function(){function o(e,t){var a=this;(0,l.default)(this,o);(0,d.default)(this,"success",function(e){a.isNewsletterForm()&&(0,v.trackSubscribeNewsletter)();(0,g.default)(a.win,"Y.Global.fire","form:submitSuccess");if(!a.redirectToSuccessRedirect()){a.unlock();a.renderSuccess()}});(0,d.default)(this,"createErrorNode",function(e){var t=a.win.document.createElement("div");t.className="field-error";t.innerHTML=e;return t});(0,d.default)(this,"fail",function(e){a.renderErrors(e);a.isNewsletterForm()||a.renderSurroundingErrors();var t=b.getCaptchaContainer(a.win,a.formEl);if(t){a.submitEl&&a.submitEl.getAttribute("data-captcha-bound")&&(a.submitEl.disabled=true);b.reset(a.win,t)}a.unlock()});if(!e||!t)throw new Error("Invalid FormHandler construction.");this.win=e;t instanceof Element?this.formEl=t:t.formNode&&(this.formEl=t.formNode.getDOMNode());if(!this.formEl)throw new Error("FormHandler needs a valid <form> for formEl.");this.submitEl=this.formEl.querySelector('[type="submit"]')||document.createElement("div");this.submitText=this.submitEl.value}(0,c.default)(o,[{key:"clearErrors",value:function e(){(0,r.default)(this.formEl.querySelectorAll(".field-error")).forEach(function(e){return e.remove()});(0,r.default)(this.formEl.querySelectorAll(".form-item.error")).forEach(function(e){return e.classList.remove("error")})}},{key:"isLocked",value:function e(){this.formEl.classList.contains("submitting")}},{key:"lock",value:function e(){this.submitEl.classList.add("submitting");this.submitEl.value=o.strings.SUBMIT_TEXT_IN_PROGRESS}},{key:"unlock",value:function e(){this.submitEl.classList.remove("submitting");this.submitEl.value=this.submitText}},{key:"validate",value:function e(){return(0,r.default)(this.formEl.querySelectorAll(".form-item")).reduce(function(e,t){var a=o.validateField(t),i=a.isValid,n=a.message;if(!i){e.isValid=false;e.errors.push({fieldId:t.id,message:n})}return e},{isValid:true,errors:[]})}},{key:"withCaptcha",value:function e(t){var a=b.getCaptchaContainer(this.win,this.formEl);if(!a)return t;var i=b.validate(this.win,a);return i?C({},t,{captchaKey:i}):null}},{key:"submit",value:function e(t){var a=this;if(this.isLocked())return false;this.lock();if(!t.disableValidation){this.clearErrors();var i=this.validate(),n=i.isValid,s=i.errors;if(!n){this.fail(o.strings.FIELD_VALIDATION_ERROR);this.renderFieldClientErrors(s);return false}}var r;try{r=this.withCaptcha(t)}catch(e){this.fail(o.strings.CAPTCHA_INCOMPLETE_ERROR);return false}o.getFormKey().catch(function(e){a.fail(o.strings.FORM_KEY_ERROR)}).then(function(e){r.key=e;try{var t=a.getSanitizedFieldValues();r.form=JSON.stringify(t)}catch(e){throw new Error(o.strings.FIELD_SANITIZATION_ERROR)}try{a.save(r)}catch(e){throw new Error(o.strings.SUBMIT_ERROR)}}).catch(function(e){a.fail(e.message)});return false}},{key:"getSanitizedFieldValues",value:function e(){return(0,r.default)(this.formEl.querySelectorAll(".form-item")).reduce(function(e,t){e[t.id]=o.getSanitizedFieldValue(t);return e},{})}},{key:"save",value:function e(t){var a=C({},t);(0,q.addIntraPageEventFields)(a);return S.default.post(o.endpoints.SAVE,a,o.NETWORK_OPTIONS).then(this.success).catch(this.fail)}},{key:"isNewsletterForm",value:function e(){return Boolean(this.formEl.classList.contains("newsletter-form")||this.formEl.querySelector(m.default.NEWSLETTER_OVERLAY_NODE_ID))}},{key:"renderFieldError",value:function e(t,a){var i=this.formEl.querySelector("#".concat(t));if(!i)return;i.classList.add("error");var n=i.querySelector(".title");a&&n&&n.parentNode&&n.parentNode.insertBefore(this.createErrorNode(a),n)}},{key:"renderFieldClientErrors",value:function e(t){var i=this;t.forEach(function(e){var t=e.fieldId,a=e.message;return i.renderFieldError(t,a)})}},{key:"renderFieldServerErrors",value:function e(t){var n=this;Object.entries(t).forEach(function(e){var t=(0,s.default)(e,2),a=t[0],i=t[1];n.renderFieldError(a,i)})}},{key:"renderErrorMessage",value:function e(t){this.formEl.insertBefore(this.createErrorNode(t),this.isNewsletterForm()?this.formEl.querySelector(".newsletter-form-body"):this.formEl.firstChild)}},{key:"renderSurroundingErrors",value:function e(){var t=this.formEl;t.insertBefore(this.createErrorNode(o.strings.ERROR_ABOVE),t.firstChild);this.formEl.appendChild(this.createErrorNode(o.strings.ERROR_BELOW))}},{key:"renderErrors",value:function e(t){if(o.isFieldErrors(t))this.renderFieldServerErrors(t.data.errors);else{var a=o.getErrorMessage(t)||o.strings.UNKNOWN_ERROR;this.renderErrorMessage(a)}}},{key:"showSubmissionText",value:function e(){var t=this.formEl.querySelector(".form-submission-text");if(!t)return;t.classList.remove("hidden");(0,r.default)(t.querySelectorAll("*")).forEach(function(e){return e.classList.remove("hidden")})}},{key:"hideForm",value:function e(){(0,r.default)(this.formEl.querySelectorAll("*")).forEach(function(e){return e.classList.add("hidden")})}},{key:"redirectToSuccessRedirect",value:function e(){var t=this.formEl.dataset.successRedirect;if(t){window.history.replaceState&&window.history.replaceState({},document.title,window.location.href);window.location.href=t;return true}return false}},{key:"getPostSubmitHtml",value:function e(){var t=this.formEl.querySelector(".form-submission-html");return t?t.dataset.submissionHtml:""}},{key:"appendAndRunPostSubmitHtml",value:function e(){var a=this;var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var i=this.formEl.querySelector(".form-submission-html");i.innerHTML=this.getPostSubmitHtml();i.classList.remove("hidden");(0,r.default)(i.querySelectorAll("script")).forEach(function(e){try{if(e.src){var t=document.createElement("script");(0,r.default)(e.attributes).forEach(function(e){t[e.name]=e.value});e.parentNode.insertBefore(t,e)}else a.win.eval(e.innerText)}catch(e){false}})}},{key:"renderSuccess",value:function e(){this.hideForm();this.showSubmissionText();(0,f.scrollIntoView)(this.formEl,true);this.appendAndRunPostSubmitHtml(this.getPostSubmitHtml())}}]);return o}();t.default=E;(0,d.default)(E,"initialQuery",h.default.parse(window.location.search.replace(/^\?/,"")));(0,d.default)(E,"endpoints",{SAVE:"/api/form/SaveFormSubmission",FORM_KEY:"/api/form/FormSubmissionKey"});(0,d.default)(E,"NETWORK_OPTIONS",{withCredentials:true});(0,d.default)(E,"strings",{SUBMIT_TEXT_IN_PROGRESS:(0,p.t)("Submitting…"),SUBMIT_ERROR:(0,p.t)("Error processing form submission. Please reload and try again."),UNKNOWN_ERROR:(0,p.t)("Unknown error, please try again later."),CAPTCHA_INCOMPLETE_ERROR:(0,p.t)("Complete CAPTCHA before submitting."),FORM_KEY_ERROR:(0,p.t)("Could not get a form submission key, please try again later."),FIELD_SANITIZATION_ERROR:(0,p.t)("Could not parse the form fields, please check your entries."),FIELD_VALIDATION_ERROR:(0,p.t)("One or more fields is invalid, please check your entries."),ERROR_ABOVE:(0,p.t)("Your form has encountered a problem. Please scroll down to review."),ERROR_BELOW:(0,p.t)("Your form has encountered a problem. Please scroll up to review."),FAIL_MAX_LENGTH:(0,p.t)("You have exceeded the character limit."),FAIL_EMAIL:(0,p.t)("Email is not valid. Email addresses should follow the format user@domain.com.")});(0,d.default)(E,"errorCodes",{401:(0,p.t)("Unable to submit form. Please try again later."),404:(0,p.t)("This form has not been configured yet."),429:(0,p.t)("Unable to submit form. Submission rate limit exceeded. Please try again later."),500:(0,p.t)("Unable to send form. Please try again later.")});(0,d.default)(E,"getFormKey",function(){return S.default.post(E.endpoints.FORM_KEY,{},E.NETWORK_OPTIONS).then(function(e){var t=e.data.key;return t})});(0,d.default)(E,"isFieldErrors",function(e){return(0,u.default)(e)&&400===e.status&&e.data&&e.data.errors&&Object.keys(e.data.errors).length>0});(0,d.default)(E,"getErrorMessage",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((0,o.default)(e))return e;if(!(0,u.default)(e))return"";if(e.status&&E.errorCodes[e.status])return E.errorCodes[e.status];if(e.data&&e.data.error)return e.data.error;return""});(0,d.default)(E,"sanitizeValue",function(e){var t=e.querySelector(".field-element");return t?t.value:null});(0,d.default)(E,"sanitizeChildValuesToArray",function(e){return e?(0,r.default)(e.querySelectorAll(".field-element")).map(function(e){var t=e.value;return t}):[]});(0,d.default)(E,"sanitizePhone",function(e){var t=E.sanitizeChildValuesToArray(e);return 3===t.length?[""].concat((0,r.default)(t)):t});(0,d.default)(E,"sanitizeCheckbox",function(e){return(0,r.default)(e.querySelectorAll("input")).reduce(function(e,t){t.checked&&e.push(t.value);return e},[])});(0,d.default)(E,"sanitizeRadio",function(e){return E.sanitizeCheckbox(e)[0]});(0,d.default)(E,"sanitizeSelect",function(e){var t=e.querySelector("select");return t?t.value:null});(0,d.default)(E,"sanitizeLike",function(e){return(0,r.default)(e.querySelectorAll(".item")).reduce(function(e,t){var a=E.sanitizeCheckbox(t);var i=t.dataset.question;i&&a.length>0&&(e[i]=a);return e},{})});(0,d.default)(E,"sanitizeHidden",function(e){var t=E.initialQuery||h.default.parse(window.location.search.replace(/^\?/,""));return(e.name&&t[e.name]?t[e.name]:e.value).toString()});(0,d.default)(E,"sanitizersHash",{address:E.sanitizeChildValuesToArray,checkbox:E.sanitizeCheckbox,date:E.sanitizeChildValuesToArray,hidden:E.sanitizeHidden,likert:E.sanitizeLike,name:E.sanitizeChildValuesToArray,phone:E.sanitizePhone,radio:E.sanitizeRadio,select:E.sanitizeSelect,time:E.sanitizeChildValuesToArray,default:E.sanitizeValue});(0,d.default)(E,"getSanitizedFieldValue",function(e){if(e.classList.contains("section"))return;var t=(0,r.default)(e.classList).find(function(e){return E.sanitizersHash[e]})||"default";var a=E.sanitizersHash[t];return a(e)});(0,d.default)(E,"validateField",function(e){if(e.classList.contains("section"))return{isValid:true};var t=e.classList.contains("required");if(e.dataset.maxLength){var a=e.querySelector("textarea");var i=a.value.trim();var n=!t&&0===i.length;var s=parseInt(e.dataset.maxLength,10);var r=Boolean(s&&!isNaN(s));var o=n||!r||a.value.length<=s;return{isValid:o,message:E.strings.FAIL_MAX_LENGTH}}if(e.classList.contains("email")){var l=e.querySelector("input");var c=l.value.trim();var d=!t&&0===c.length;var u=d||(0,y.isValidEmail)(c);return{isValid:u,message:E.strings.FAIL_EMAIL}}return{isValid:true}});e.exports=t.default},3503:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=new Promise(function(t){var e=document,a=e.readyState;if("complete"===a||"interactive"===a){t();return}var i=function e(){document.removeEventListener("DOMContentLoaded",e,false);t()};document.addEventListener("DOMContentLoaded",i,false)});var n=i;t.default=n;e.exports=t.default},3518:function(e,t){var a={CREATE_CHECKOUT_ERROR_GENERIC:"create-checkout-error-generic",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_STATE:"create-checkout-shipping-address-missing-state",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_POSTAL_CODE:"create-checkout-shipping-address-missing-postal-code",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_CITY:"create-checkout-shipping-address-missing-city",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_COUNTRY:"create-checkout-shipping-address-missing-country",CREATE_CHECKOUT_ERROR_ADDRESS_INVALID:"create-checkout-shipping-address-invalid",GET_CHECKOUT_ERROR:"get-checkout-error",BUILD_REDIRECT_URL_ERROR:"build-redirect-url-error",PAYPAL_NOT_AVAILABLE_ERROR:"paypal-not-available-error",DISCONNECTED_ACCOUNT:"disconnect-account",CHECKOUT_AMOUNT_ZERO:"checkout-amount-zero"};e.exports=a},4119:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getSubscriptionPriceString=t.isSubscriptionIndefinite=t.shouldSeeUpsell=t.isSubscribableProductTypeForMerchant=void 0;var I=i(a(2));var n=i(a(801));var s=i(a(728));var A=a(24);var x=i(a(43));var L=i(a(3053));var r=a(309);var o;var l=function e(t){return t===r.PHYSICAL||t===r.SERVICE};t.isSubscribableProductTypeForMerchant=l;var c=function e(){return!n.default.isFeatureEnabled(s.default.COMMERCE_SUBSCRIPTIONS)};t.shouldSeeUpsell=c;var D=function e(t){var a=t.numBillingCycles;return 0===a};t.isSubscriptionIndefinite=D;var N=Object.freeze((o={},(0,I.default)(o,L.default.WEEK,52),(0,I.default)(o,L.default.MONTH,12),(0,I.default)(o,L.default.YEAR,1),o));var d=function e(t){var a,i,n,s,r,o,l,c,d,u,g,p,h,f,m,v,b;var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var S=t.billingPeriod,q=S.value,_=S.unit,C=t.numBillingCycles;var E=q*C;var k=!D(t);var w=E%N[_]===0?L.default.YEAR:_;w!==_&&(E/=N[_]);var T=[q>1,_,k];if(k){T.push(w);w===L.default.YEAR&&T.push(E>1)}return(0,x.default)((b={},(0,I.default)(b,false,(c={},(0,I.default)(c,L.default.WEEK,(n={},(0,I.default)(n,false,(0,A.t)("{priceString} every week",{priceString:y})),(0,I.default)(n,true,(i={},(0,I.default)(i,L.default.WEEK,(0,A.t)("{priceString} every week for {durationValue} weeks",{priceString:y,durationValue:E})),(0,I.default)(i,L.default.YEAR,(a={},(0,I.default)(a,false,(0,A.t)("{priceString} every week for 1 year",{priceString:y})),(0,I.default)(a,true,(0,A.t)("{priceString} every week for {durationValue} years",{priceString:y,durationValue:E})),a)),i)),n)),(0,I.default)(c,L.default.MONTH,(o={},(0,I.default)(o,false,(0,A.t)("{priceString} every month",{priceString:y})),(0,I.default)(o,true,(r={},(0,I.default)(r,L.default.MONTH,(0,A.t)("{priceString} every month for {durationValue} months",{priceString:y,durationValue:E})),(0,I.default)(r,L.default.YEAR,(s={},(0,I.default)(s,false,(0,A.t)("{priceString} every month for 1 year",{priceString:y})),(0,I.default)(s,true,(0,A.t)("{priceString} every month for {durationValue} years",{priceString:y,durationValue:E})),s)),r)),o)),(0,I.default)(c,L.default.YEAR,(l={},(0,I.default)(l,false,(0,A.t)("{priceString} every year",{priceString:y})),(0,I.default)(l,true,(0,A.t)("{priceString} every year for {durationValue} years",{priceString:y,durationValue:E})),l)),c)),(0,I.default)(b,true,(v={},(0,I.default)(v,L.default.WEEK,(g={},(0,I.default)(g,false,(0,A.t)("{priceString} every {billingPeriodValue} weeks",{priceString:y,billingPeriodValue:q})),(0,I.default)(g,true,(u={},(0,I.default)(u,L.default.WEEK,(0,A.t)("{priceString} every {billingPeriodValue} weeks for {durationValue} weeks",{priceString:y,billingPeriodValue:q,durationValue:E})),(0,I.default)(u,L.default.YEAR,(d={},(0,I.default)(d,false,(0,A.t)("{priceString} every {billingPeriodValue} weeks for 1 year",{priceString:y,billingPeriodValue:q})),(0,I.default)(d,true,(0,A.t)("{priceString} every {billingPeriodValue} weeks for {durationValue} years",{priceString:y,billingPeriodValue:q,durationValue:E})),d)),u)),g)),(0,I.default)(v,L.default.MONTH,(f={},(0,I.default)(f,false,(0,A.t)("{priceString} every {billingPeriodValue} months",{priceString:y,billingPeriodValue:q})),(0,I.default)(f,true,(h={},(0,I.default)(h,L.default.MONTH,(0,A.t)("{priceString} every {billingPeriodValue} months for {durationValue} months",{priceString:y,billingPeriodValue:q,durationValue:E})),(0,I.default)(h,L.default.YEAR,(p={},(0,I.default)(p,false,(0,A.t)("{priceString} every {billingPeriodValue} months for 1 year",{priceString:y,billingPeriodValue:q})),(0,I.default)(p,true,(0,A.t)("{priceString} every {billingPeriodValue} months for {durationValue} years",{priceString:y,billingPeriodValue:q,durationValue:E})),p)),h)),f)),(0,I.default)(v,L.default.YEAR,(m={},(0,I.default)(m,false,(0,A.t)("{priceString} every {billingPeriodValue} years",{priceString:y,billingPeriodValue:q})),(0,I.default)(m,true,(0,A.t)("{priceString} every {billingPeriodValue} years for {durationValue} years",{priceString:y,billingPeriodValue:q,durationValue:E})),m)),v)),b),T,(0,A.t)("Unavailable"))};t.getSubscriptionPriceString=d},4126:function(e,t){var a={NAME:"name",FIRSTNAME:"firstName",LASTNAME:"lastName",DATE:"date",COUNT:"count",ACTIVITY:"activity"};e.exports=a},4127:function(e,t){var a={AUTHOR:"author",YEAR:"year",MONTH:"month",DAY:"day",CATEGORY:"category",TAG:"tag"};e.exports=a},4129:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getWidthForHeight=n;t.getHeightForWidth=s;t.getDimensionsFromNode=o;t.getSquarespaceSizeForWidth=l;t.getIconUrl=c;var r=i(a(27));function n(e,t,a){return e/t*a}function s(e,t,a){return t/e*a}function o(e){var t=e.getAttribute("data-image-dimensions");if("string"===typeof t){var a=t.split("x").map(function(e){return Number(e)}),i=(0,r.default)(a,2),n=i[0],s=i[1];return{width:n,height:s}}return{width:null,height:null}}function l(e){window.devicePixelRatio&&(e*=window.devicePixelRatio);if(e>1500)return"2500w";if(e>1e3)return"1500w";if(e>750)return"1000w";if(e>500)return"750w";if(e>300)return"500w";if(e>100)return"300w";return"100w"}function c(e,t,a){return"/universal/images-v6/icons/icon-".concat(e,"-").concat(t,"-").concat(a,".png")}},4130:function(e,t){var a={APPROVED:1,AWAITING_MODERATION:2,DELETED:3,SPAM:4,POSSIBLY_SPAM:5};e.exports=a},4133:function(e,t){var a={ABANDONED_CART:1,ACCOUNT_VERIFICATION_EMAIL:2,BATCH_DOMAIN_REGISTRATION_SUCCESSFUL_EMAIL:3,BILLING_FAILURE_EMAIL:4,BILLING_FAILURE_FINAL_EMAIL:5,BILLING_RENEWAL_REMINDER:6,BILLING_SUSPENDED:7,CHANGED_IDENTIFIER_EMAIL:8,COMMENT_EMAIL:9,COMPED_STATUS_ENDED:10,CONTRIBUTION_ARRIVED:11,CONTRIBUTION_CONFIRMED:12,CREATIVE_NEW_WEBSITE_EMAIL:13,CIRCLE_SIGNUP_CONFIRMATION_EMAIL:14,CREATIVE_WELCOME_DAY_1:15,CREATIVE_WELCOME_DAY_2:16,CREATIVE_WELCOME_DAY_3:17,DOMAIN_EXPIRATION_NOTICE:18,DOMAIN_EXPIRATION_REMINDER:19,DOMAIN_RENEWAL_FAILURE_NOTICE:20,DOMAIN_RENEWAL_REMINDER:21,DOMAIN_SUBSCRIPTION_SUCCESSFUL_EMAIL:22,EMAIL_RECOVERY:24,FORM_SUBMISSION_EMAIL:25,FORM_SUBMISSION_ERROR:26,G_SUITE_ADMIN_CREATION_FAILURE:27,G_SUITE_BILLING_FAILURE_FINAL:28,G_SUITE_BILLING_FAILURE:29,DEPRECATED_G_SUITE_FREE_INBOX_REMINDER:30,G_SUITE_INVITATION:31,G_SUITE_PASSWORD_RESET:32,G_SUITE_SUSPENDED:33,G_SUITE_TOTAL_FAILURE:34,G_SUITE_WELCOME:35,LINKED_G_SUITE_WELCOME:36,LOGO_GENERATED_EMAIL:37,MARKETING_RELATIONSHIP_VERIFICATION_EMAIL:38,MEMBER_ACCOUNT_ACTIVATION_EMAIL:39,MEMBER_INVITE_EMAIL:40,NEW_ORDER_ALERT:41,NEWSLETTER_OPT_IN:42,STORE_LIVE:43,DEPRECATED_ONBOARDING_ONE_WEEK_LEFT:44,DEPRECATED_24_HOURS_LEFT:45,DEPRECATED_TRIAL_EXPIRED:46,ONBOARDING_TRIAL_EXTENSION:47,ORDER_CONFIRMED:48,ORDER_DIGITAL_GOODS:49,ORDER_REFUNDED:51,ORDER_SHIPPED:52,PASSWORD_RESET_EMAIL:53,PLAN_CHANGE_EMAIL:54,REFERRAL_RECEIVED:55,REFERRAL_SAVED_SEARCH_MATCH:56,SECURITY_NOTIFICATION_EMAIL:57,OLD_SIGNUP_CONFIRMATION_EMAIL:58,SIGNUP_FAILED_EMAIL:59,STOCK_LEVEL_ALERT:60,DEPRECATED_SUBSCRIPTION_SUCCESSFUL_EMAIL:61,XERO_EXPORT_FAILURE_EMAIL:62,NEW_TRIAL_ONBOARDING_1:63,NEW_TRIAL_ONBOARDING_2:64,NEW_TRIAL_ONBOARDING_3:65,NEW_TRIAL_ONBOARDING_4:66,NEW_TRIAL_ONBOARDING_DAY_BEFORE:67,NEW_TRIAL_ONBOARDING_DAY_AFTER:68,TRIAL_3X_EXTENSION_CHECKIN:69,SIGNUP_CONFIRMATION_EMAIL:70,COMMERCE_COMMON_MOCK_EMAIL:71,SUBSCRIPTION_SUCCESSFUL:72,SUBSCRIPTION_WELCOME:73,EMAIL_ENDPOINT_SOURCED:74,PARKED_PAGE_ONBOARDING:75,G_SUITE_RENEWAL_REMINDER:76,G_SUITE_EXPIRATION_REMINDER:77,G_SUITE_RENEWAL_FAILURE_NOTICE:78,G_SUITE_EXPIRATION_NOTICE:79,G_SUITE_RESELLER_ACCESS_DISABLED_REMINDER:80,G_SUITE_RESELLER_ACCESS_DISABLED_FAILURE:81,G_SUITE_RESELLER_ACCESS_DISABLED_EXPIRATION_REMINDER:82,SALES_TAX_NOTIFICATION:83,BILLING_EXPIRATION_REMINDER:84,BILLING_EXPIRED_NATURALLY:85,BILLING_CANCELLATION_CONFIRMATION:86,G_SUITE_CANCELLATION_CONFIRMATION:87,BILLING_CARD_EXPIRING:88,BILLING_AUTORENEW_DISABLED_CONFIRMATION:89,DOMAIN_AUTORENEW_DISABLED_CONFIRMATION:90,G_SUITE_AUTORENEW_DISABLED_CONFIRMATION:91,DOMAIN_TRANSFER_INITIATED:92,DOMAIN_TRANSFER_SUCCESS:93,DOMAIN_TRANSFER_CANCELLED:94,DOMAIN_TRANSFER_FAILED:95,BATCH_DOMAIN_REGISTRATION_FAILURE_EMAIL:96,G_SUITE_NAME_IN_USE:97,G_SUITE_PURGE_REMINDER:98,GIFT_CARD_DELIVERY:99,BILLING_WEBSITE_CHARGEBACK_CANCELLATION:100,CUSTOMER_ACCOUNT_RESET_PASSWORD:101,GST_REMINDER:102,ADVANCED_COMMERCE_CALLBACKS:103,OLD_SHARE_REFERRAL_CODE:104,CUSTOMER_ACCOUNT_WELCOME:105,CUSTOMER_ACCOUNT_PASSWORD_UPDATED:106,DOMAIN_SSL_RENEWAL_FAILED:107,G_SUITE_CHANGE_PLAN_TO_ANNUAL:108,GIFT_CARD_CANCELED:109,COMMERCE_PAYMENT_ACCOUNT_CHANGED:110,TWO_FACTOR_UPDATED:111,DOMAIN_WITH_CNAME_TO_WWW:112,SOCIAL_ACCOUNT_CONFIRMATION:113,COMMERCE_MERCHANT_SUBSCRIBER_PAYMENT_DECLINED:114,COMMERCE_SUBSCRIBER_PAYMENT_DECLINED:115,TAX_CHANGE:116,COMMERCE_MERCHANT_SUBSCRIPTION_CANCELLED:117,REGISTRAR_EMAIL_VERIFICATION:118,COMMERCE_SUBSCRIBER_SUBSCRIPTION_CANCELLED:119,G_SUITE_TOS_SUSPENSION_30DAY_REMINDER:120,G_SUITE_TOS_SUSPENSION_15DAY_REMINDER:121,COMMERCE_MERCHANT_SUBSCRIPTION_PAYMENT_MERCHANT_ERROR:122,CAMPAIGNS_SUBSCRIPTION_SUCCESSFUL:123,CAMPAIGNS_BILLING_FAILURE_EMAIL:124,CAMPAIGNS_BILLING_FAILURE_FINAL_EMAIL:125,CAMPAIGNS_BILLING_EXPIRATION_REMINDER:126,CAMPAIGNS_BILLING_EXPIRED_NATURALLY:127,CAMPAIGNS_BILLING_RENEWAL_REMINDER:128,CAMPAIGNS_SUBSCRIPTION_SUSPENDED:129,CAMPAIGNS_AUTORENEW_DISABLED_CONFIRMATION:130,CAMPAIGNS_SUBSCRIPTION_CANCELED:131,CAMPAIGNS_PLAN_CHANGE_EMAIL:132,MEMBER_AREA_INVITATION:133,MEMBER_AREA_WELCOME:134,OPENSRS_DE_DOMAIN_DELETION:135,COUNTRY_TAX_CHANGE:136,VAT_TAX_CHANGE:137,GST_TAX_CHANGE:138,ORDER_NOT_PLACED:139,TRIAL_DATA_DELETION:140,COMMERCE_PRODUCT_RESTOCK_NOTIFICATION:141,NEW_ORDER_ALERT_POS:142,POS_ORDER_CONFIRMED:143,THIRD_PARTY_CONNECTED:144,THIRD_PARTY_DISCONNECTED:145,POS_ORDER_REFUNDED:146,COMMERCE_SUBSCRIBER_AUTH_REQUIRED:147,STRONG_AUTH_BILLING_FAILURE_EMAIL:148,MERCHANT_NEW_MEMBER_JOINED:149,BILLING_RESOLD_EXPIRATION_REMINDER:150,MEMBER_AREA_MEMBERSHIP_CANCELLED:151,MERCHANT_MEMBERSHIP_CANCELLED:152,BILLING_RESOLD_GRACE_PERIOD_REMINDER:153,STRONG_AUTH_BILLING_FAILURE_FINAL_EMAIL:154,SCHEDULING_BILLING_FAILURE:155,BATCH_DOMAIN_REGISTRATION_PAYMENT_AUTHENTICATION_EMAIL:156,SCHEDULING_SUBSCRIPTION_SUCCESSFUL:157,SCHEDULING_BILLING_FAILURE_FINAL:158,SCHEDULING_BILLING_EXPIRATION_REMINDER:159,SCHEDULING_PLAN_CHANGE:160,SCHEDULING_BILLING_EXPIRED_NATURALLY:161,SCHEDULING_SUBSCRIPTION_SUSPENDED:162,SCHEDULING_SUBSCRIPTION_CANCELLED:163,SCHEDULING_BILLING_RENEWAL_REMINDER:164,SCHEDULING_AUTORENEW_DISABLED_CONFIRMATION:165,DOMAIN_TRANSFER_LOCKED:166,DOMAIN_TRANSFER_AUTH_CODE_NEEDED:167,COMMERCE_TRANSACTIONAL_EMAIL:168,G_SUITE_SUBSCRIPTION_EXISTS_ON_DOMAIN:169,DOMAIN_TRANSFER_LOCKED_REMINDER:170,DOMAIN_TRANSFER_AUTH_CODE_NEEDED_REMINDER:171,REGISTRAR_EMAIL_AUTH_CODE:172,ACCOUNT_RECOVERY_CHANGED:173,ACCOUNT_PHONE_NUMBER_CHANGED:174,FRAUD_DETECTION_ACCOUNT_VERIFICATION:175,DOMAIN_TRANSFER_EXPIRED:176,CUSTOMER_RECIPIENT_EMAIL_NOTIFICATION:177,WHOIS_PRIVACY_VERIFICATION_EMAIL:178,BILLING_CARD_DELETED:179,DOMAIN_SUSPENDED_EMAIL:180};e.exports=a},4165:function(e,t){var a={PENDING:"PENDING",COMPLETED:"COMPLETED",CANCELLED:"CANCELLED"};e.exports=a},4172:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));var s;var r=a(2738);var o=(s={},(0,n.default)(s,r.COVER_PAGE,"cover-page"),(0,n.default)(s,r.LOCK_SCREEN,"lock-screen"),(0,n.default)(s,r.POPUP_OVERLAY,"popup-overlay"),s);e.exports=o},4187:function(e,t){var a={ALL:1,DESKTOP_ONLY:2};e.exports=a},4188:function(e,t){var a={TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,BOTTOM_LEFT:4,BOTTOM_CENTER:5,BOTTOM_RIGHT:6};e.exports=a},4189:function(e,t){var a={ALWAYS:1,SCROLL:2};e.exports=a},4193:function(e,t){var a={IMPERIAL:1,METRIC:2};e.exports=a},4197:function(e,t,a){var o=a(87);var l=a(114);var c=a(24).t;var i=a(2887);var d=a(2751);var u=a(3500);var g=a(1622);YUI.add("squarespace-async-form",function(r){r.namespace("Squarespace.Widgets");var s=r.Squarespace.Widgets.AsyncForm=r.Base.create("AsyncForm",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("submission");this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getLikertFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal};this._typeSetterMap={date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,checkbox:this._setOptionFieldVal,likert:this._setLikertFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal};this._defaultGetter=this._getSingleFieldVal;this._defaultSetter=this._setSingleFieldVal},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("form");var t=e.fields;r.Lang.isString(t[0])&&(t=r.Array.map(t,r.JSON.parse));g.trackFormRender(e.id);var a={showTitle:this.get("showTitle"),preventSubmit:this.get("preventDefaultSubmit")||this.get("preventAllSubmits"),hideSubmitButton:this.get("hideSubmitButton"),formId:e.id,formName:this.get("formName"),formFields:t,formSubmitButtonText:this.get("formSubmitButtonText"),formSubmissionMessage:e.parsedSubmissionMessage,formSubmissionHTML:e.submissionHTML,successRedirect:e.successRedirect,disclaimerMessage:e.parsedDisclaimerMessage,captchaEnabled:e.captchaEnabled,captchaTheme:e.captchaTheme,captchaAlignment:e.captchaAlignment};var i=this.get("contentBox");var n=this.evaluateTemplate(a);i.append(n);this._formEl=i.one("form");this._setFormData();d(this._formEl.getDOMNode())},_onSubmit:function e(t){if(this.get("preventDefaultSubmit")&&!this.get("preventAllSubmits")){this._clearErrors();var a=null;var i;if(l.isFeatureEnabled(o.VANILLA_FORM_HANDLER)){var n=this._formEl.getDOMNode();a=new u(r.config.win,n);i=a.validate()}else i=this._validateForm();if(i.errors.length>0)this._renderErrors(i.errors);else{var s=a?a.getSanitizedFieldValues():i.data;this.fetchValidatedFormSubmission(a,this.get("form").id,r.bind(function(){this.fire("submission",{data:s})},this),r.bind(function(e){var a=[];r.Object.each(e.errors,function(e,t){a.push({fieldId:t,message:e})});this._renderErrors(a)},this))}}t.halt()},bindUI:function(){this._formEl.on("submit",this._onSubmit,this);this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var e=this.get("contentBox");e.addClass("saving");e.one('input[type="submit"]').set("value",c("Saving…"))},setStateEditing:function(){var e=this.get("contentBox");var t=this.get("formSubmitButtonText");e.one('input[type="submit"]').set("value",t);e.removeClass("saving")},fetchValidatedFormSubmission:function(e,t,a,i){var n=e?e.getSanitizedFieldValues():this.getFormData();var s=JSON.stringify(n);r.Data.post({url:"/api/rest/forms/validate/"+t,headers:{"Content-Type":"application/json"},data:s,success:a,failure:i})},getFormData:function(){return this._validateForm().data},_renderErrors:function(e){r.Array.each(e,function(e){this.get("contentBox").one("#"+e.fieldId).one(".title").insert('<div class="field-error">'+e.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(true)},_validateForm:function(){var n={};var s=[];this._formEl.all(".form-item").each(function(e){var t=e.getAttribute("id");var a=this._getFieldData(e);if(!a)return;var i=a.error;i&&s.push({fieldId:t,message:i});n[t]=a.data},this);return{data:n,errors:s}},_getFieldData:function(e){var t=e.get("className").split(" ");var a=null;var i;var n=false;r.Array.each(t,function(e){if(r.Object.hasKey(this._typeGetterMap,e)){a=e;i=this._typeGetterMap[a]}else"section"===e&&(n=true)},this);if(n)return;null===a&&(i=this._defaultGetter);return i.call(this,e)},_getSingleFieldVal:function(e){var t=e.one(".field-element");if(t){var a=t.get("value");var i;var n=!r.Lang.isValue(a)||""===a;e.hasClass("required")&&n&&(i=c("Required"));return{data:t.get("value"),error:i}}return null},_getMultiFieldVal:function(e){var a=[];var t;var i=false;e.all(".field-element").each(function(e){var t=e.get("value");r.Lang.isValue(t)&&""!==t&&(i=true);a.push(e.get("value"))});e.hasClass("required")&&!i&&(t=c("Required"));return{data:a,error:t}},_getOptionFieldVal:function(e){var t=[];var a;e.all("input").each(function(e){e.get("checked")&&t.push(e.get("value"))},this);e.hasClass("required")&&0===t.length&&(a="Required");return{data:t,error:a}},_getLikertFieldVal:function(e){var a={};var t;e.all(".item").each(function(e){var t;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))});r.Lang.isValue(t)&&(a[e.getAttribute("data-question")]=t)});return{data:a,error:t}},_getRadioFieldVal:function(e){var t;var a;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))},this);e.hasClass("required")&&!r.Lang.isValue(t)&&(a=c("Required"));return{data:t,error:a}},_getSelectVal:function(e){var t=e.one("select").get("value");var a;var i=!r.Lang.isValue(t)||""===t;e.hasClass("required")&&i&&(a=c("Required"));return{data:t,error:a}},_getPhoneFieldVal:function(e){var t=this._getMultiFieldVal(e);var a=t.data;a&&3===a.length&&a.unshift("");return t},_setFormData:function(){var n=this.get("formData");if(null===n)return;this._formEl.all(".form-item").each(function(e){var t=n[e.getAttribute("id")];if(t){var a=t.value;var i=r.Lang.isValue(a)?a:t.values||[];this._setFieldData(e,i)}},this)},_setFieldData:function(t,a){var e=t.get("className").split(" ");var i=null;var n;var s;r.Array.each(e,function(e){if(r.Object.hasKey(this._typeSetterMap,e)){i=e;n=this._typeSetterMap[i]}else"section"===e&&(s=true);if(s)return;null===i&&(n=this._defaultSetter);return n.call(this,t,a)},this)},_setSingleFieldVal:function(e,t){var a=e.one(".field-element");if(a)return a.set("value",t)},_setMultiFieldVal:function(e,t){var a=e.all(".field-element");a.each(function(e){e.set("value",t[e.getData("title")])})},_setOptionFieldVal:function(e,t){var a=e.all("input");a.each(function(e){-1!==t.indexOf(e.get("value"))&&e.setAttribute("checked","checked")},this)},_setLikertFieldVal:function(e,n){var t=e.all(".item");t.each(function(e){var t=e.getAttribute("data-question");var a=n[t];if(!r.Lang.isValue(a)||""===a)return;var i=parseInt(a,10)+2;e.all("input").item(i).setAttribute("checked","checked")})},_setRadioFieldVal:function(e,t){var a=e.all("input");a.each(function(e){e.get("value")===t&&e.setAttribute("checked","checked")},this)},_setSelectVal:function(e,t){e.one("select").set("value",t)},_setPhoneFieldVal:function(e,t){3===e.all(".field").size()&&4===t.length&&t.shift();this._setMultiFieldVal(e,t)},evaluateTemplate:function(e){var t=this.get("formTemplate");try{return i(t.html,r.merge({},e,{localizedStrings:t.localizedStrings}))}catch(e){return e.message}}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:r.Lang.isValue},formTemplate:{value:null},hideSubmitButton:{value:false},formSubmitButtonText:{value:c("Add to Cart")},formName:{value:c("My Form Name")},formData:{value:null},showTitle:{value:true},preventDefaultSubmit:{value:true},preventAllSubmits:{value:false}}})},"1.0",{requires:["base","json","node","squarespace-ss-widget"]})},4198:function(e,t,a){var i=a(24).t;var n=a(3055).containFocus;YUI.add("squarespace-modal-lightbox",function(s){var e="sqs-modal-lightbox";s.namespace("Squarespace.Widgets");var t=s.Squarespace.Widgets.ModalLightbox=s.Base.create("modalLightbox",s.Squarespace.Widgets.SSWidget,[],{initializer:function(){var e=this.get("contentBox");e.set("role","dialog");e.set("aria-label",this.get("title"));this.publish("open");this.publish("close");this._resizeEmitter=new s.Squarespace.ResizeEmitter({timeout:100})},destructor:function(){this._resizeEmitter.destroy();s.Squarespace.EscManager.removeTarget(this)},renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").hide();var e=this._innerEl=s.Node.create('<div class="lightbox-inner"></div>');e.append('<div class="lightbox-content"></div>');this.get("contentBox").append('<div class="lightbox-background"></div>').append(e);this._renderContent();this.get("openOnRender")&&this.open()},bindUI:function(){t.superclass.bindUI.call(this);this.after("contentChange",function(){this._renderContent();this.syncUI()},this);this._resizeEmitter.on("resize",this.syncUI,this);this.get("contentBox").delegate("click",function(){this.close()},".lightbox-close",this);this.get("contentBox").delegate("keydown",function(e){if(13===e.keyCode||32===e.keyCode){e.preventDefault();this.close()}},".lightbox-close",this);this._innerEl.plug(s.Squarespace.Plugin.ScrollLock)},syncUI:function(){t.superclass.syncUI.call(this);this._setContentMarginTop()},open:function(){s.one("html").addClass("sqs-modal-lightbox-open");this.get("openClassNode")&&this.get("openClassNode").addClass("sqs-modal-lightbox-open");this.get("boundingBox").show();this._setContentBoxTop();this.syncUI();s.Squarespace.EscManager.addTarget(this);this.fire("open");this.revertFocusContainment=n({container:this.get("boundingBox")._node})},close:function(){s.one("html").removeClass("sqs-modal-lightbox-open");this.get("openClassNode")&&this.get("openClassNode").removeClass("sqs-modal-lightbox-open");this.get("boundingBox").hide();this.fire("close");s.Squarespace.EscManager.removeTarget(this);this.revertFocusContainment&&this.revertFocusContainment()},_renderContent:function(){var e=this._innerEl.one(".lightbox-content");var t=this.get("content");e.empty();s.instanceOf(t,s.Widget)?t.render(e):e.setContent(t);var a=i("Close");e.prepend('<div role="button" tabindex="0" class="lightbox-close" aria-label="'+a+'">&times;</div>')},_setContentBoxTop:function(){this.get("contentBox").setStyle("top",s.one(s.config.doc).get("scrollTop"))},_setContentMarginTop:function(){var e=this._innerEl.one(".lightbox-content");var t=s.one(s.config.win).get("winHeight");var a=e.get("offsetHeight");var i=a>t;var n;n=i?50:t/2-a/2;e.setStyles({marginTop:n,marginBottom:n})}},{CSS_PREFIX:e,ATTRS:{content:{value:null},animDuration:{value:.3},openOnRender:{value:false},openClassNode:{value:null},title:{value:""}}})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-ss-widget","squarespace-util"]})},4207:function(e,t){var a={OLDEST_FIRST:1,NEWEST_FIRST:2,MOST_LIKED:3,LEAST_LIKED:4,MOST_FLAGGED:5};e.exports=a},4208:function(e,t){var a={ITEM:1,COLLECTION:2};e.exports=a},4209:function(e,t){var a={EDITABLE:1,TWEAKABLE:2,FULL_PAGE_CART:3,OVERLAYS:4,ECOMMERCE_GOOGLE_ANALYTICS_TRACKED:5};e.exports=a},4220:function(e,t){var a={AWAITING_MATCH:"AWAITING_MATCH",APPLIED_TO_REFEREE:"APPLIED_TO_REFEREE",APPLIED_TO_BOTH:"APPLIED_TO_BOTH",REMOVED:"REMOVED"};e.exports=a},4221:function(e,t){var a={HIDDEN:1,QUARANTINED:2};e.exports=a},4222:function(e,t){var a={IN_DIRECTORY:1,FEATURED:2,INCLUDE_IN_LOGO_WALL:3,NOTABLE:4,IN_STORE:5,INVALIDATED_ENTRIES:6,MISSING_THUMBNAIL:7,COVER_PAGE:8};e.exports=a},5055:function(e,t){var a={NONE:1,SHOW:2};e.exports=a},5060:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.googleTrackingContextProp=t.DETAILS_URL=t.AUTOCOMPLETE_URL=void 0;var i=a(1);var n="/api/google-maps/places/autocomplete";t.AUTOCOMPLETE_URL=n;var s="/api/google-maps/places/details";t.DETAILS_URL=s;var r=(0,i.shape)({productPage:i.string.isRequired,productSection:i.string.isRequired});t.googleTrackingContextProp=r},5065:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(34));var o=function(){function e(){(0,n.default)(this,e);this.generateActions("fetchDataSuccess")}(0,s.default)(e,[{key:"clearEditingState",value:function e(){var t=this;return function(e){e();t.updateFieldNoEdit("isDirty",false)}}},{key:"setAsHomepage",value:function e(){var t=this;return function(e){e();t.updateFieldNoEdit("isHomepage",true)}}},{key:"updateField",value:function e(t,a){return{field:t,value:a}}},{key:"updateFieldNoEdit",value:function e(t,a){return{field:t,value:a}}},{key:"fetchData",value:function e(d,u){var g=this;return function(e){var t=d&&d.toJS();var a=false;t&&e(t.id);if(u&&!t){a=true;t={}}var i=t,n=i.categoryPagesSeoHidden,s=i.homepage,r=i.seoData,o=i.tagPagesSeoHidden,l=i.title,c=i.urlId;g.fetchDataSuccess({categoryPagesSeoHidden:n,isHomepage:s,isContentItem:u,isNewContentItem:a,seoData:r,tagPagesSeoHidden:o,title:l,urlId:c})}}}]);return e}();var l=r.default.createActions(o);t.default=l;e.exports=t.default},5070:function(e,t,a){"use strict";var c=a(2745);var u=a(5055);var g=a(229);var p=a(1572);var r=a(2710);var i=a(2712);var o=a(761);var n=a(5079),l=n.getLocalStorageData;var d=a(5080);var h=a(90);var s=a(522);function f(e){var t=e.settings,a=void 0===t?{}:t,i=e.context,n=void 0===i?{}:i;var s=n.pageType===p.NOT_FOUND&&n.collection&&n.collection.type===g.SPLASH_PAGE;var r=s||n.pageType===p.SPLASH_PAGE||n.pageType===p.LOCK_SCREEN;var o=n.pageType===p.COMMERCE_EMAIL_PREVIEW;var l=a.style!==c.NONE&&a.text;return l&&!r&&!o}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=l(d.KEY);if(t&&!h(t)){var a=t[d.VERSION];if(a&&a<e.version)return true;var i=t[d.SUBMITTED];if(i&&e.showUntilSignup)return false;var n=Date.now();var s=t[d.CLOSED_DATE];if(s){var r=new Date(s);r.setDate(r.getDate()+e.displayFrequency);if(r<n&&-1!==e.displayFrequency)return true}return false}return true}function v(e){var t=e.settings,a=void 0===t?{}:t,i=e.context,n=void 0===i?{}:i,s=e.isMobile,r=void 0!==s&&s,o=e.urlSearch,l=void 0===o?"":o;var c=n.pageType===p.NOT_FOUND&&n.collection&&n.collection.type===g.SPLASH_PAGE;var d=c||n.pageType===p.LOCK_SCREEN;if(false===a.enableMobile&&r||!a.style||a.style===u.NONE||d||l.includes("sqsscreenshot=true"))return false;return m(a)}function b(e){var t=e.websiteSettings;if(s.isSevenOne())return false;if(!t.hasOwnProperty("ssBadgeType"))return false;return t.ssBadgeType!==i.NONE}function y(e){var t=e.win,a=e.isMobile,i=e.settings;if(!a)return false;var n=t.innerWidth;var s=n<=1024;if(!s)return false;if(!i||!o(i.style))return false;if(i.style===r.NONE)return false;return true}function S(e){var t=e.YNodeBody;var a=t.all('img[data-licensed-asset-preview="true"]');var i=t.hasClass("has-preview-getty-imgs");return!a.isEmpty()||i}function q(e){var t=e.settings,a=void 0===t?{}:t,i=e.urlSearch,n=void 0===i?"":i;if(n.includes("sqsscreenshot=true"))return false;return a.isCookieBannerEnabled}e.exports={shouldShowAnnouncementBar:f,shouldShowPopupOverlay:v,shouldShowMobileInformationBar:y,shouldShowLicensedAssetsBar:S,shouldShowSSBadge:b,shouldShowCookieBanner:q}},5071:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.calculateRemoved=n;t.getFromModel=s;var l=i(a(683));var c=i(a(211));function n(e,t){if(!Array.isArray(e)||!e.length)return[];var a=t.map(function(e){return e.backendType});return e.reduce(function(e,t){a.includes(t.backendType)||e.push(t.backendType);return e},[])}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formId,a=e.connections,i=void 0===a?[]:a,n=e.legacyDefaults,o=void 0===n?{}:n;var s=i.reduce(function(e,t){var a=t.backendId,i=t.backendType,n=t.config,s=t.connectionState,r=t.socialConfig;if(!a&&i!==l.default.ZAPIER){false;return e}switch(i){case l.default.CAMPAIGNS:e.campaignsConnect={connectionState:c.default.CONNECTED,useSingleOptIn:!!(n&&"true"===n.useSingleOptIn),listId:a};break;case l.default.EMAIL:e.emailConnect={connectionState:s,email:a};break;case l.default.ZAPIER:e.zapierConnect={connectionState:s,url:a};break;case l.default.GOOGLE:e.googleDocsConnect={connectionState:s,username:r.profileUserName,spreadsheetName:n.spreadsheetName||o.googleSpreadsheetName,socialConfig:r};break;case l.default.MAILCHIMP:e.mailchimpConnect={connectionState:s,list:a,username:r.profileUserName||o.mailchimpUsername,useSingleOptIn:!!(n&&"true"===n.useSingleOptIn),socialConfig:r};break;default:e.errors=e.errors||[];e.errors.push(t);break}return e},{});if(!t){var r=window.Static.SQUARESPACE_CONTEXT.authenticatedAccount.email;r&&!s.emailConnect&&(s.emailConnect={connectionState:c.default.CONNECTED,email:r})}return s}},5074:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={create:function e(t){false;var a=function e(){};a.prototype=t;var i=new a;i.ready&&i.ready();return i}};var n=i;t.default=n;e.exports=t.default},5077:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PRODUCT_PRICE_SELECTORS=t.PRODUCT_TITLE_SELECTORS=t.DIGITAL_PRODUCT_DETAIL_PAGE_SELECTORS=t.PRODUCT_LIST_PAGE_SELECTORS=t.PRODUCT_DETAIL_PAGE_SELECTORS=t.TEMPLATE_CART_SUBTOTAL_CLASS=t.TEMPLATE_CART_QUANTITY_CLASS=t.TEMPLATE_CART_INITIALIZED_CLASS=t.TEMPLATE_CART_CLASS=t.TEMPLATE_CART_CONTAINER_CLASS=t.TEMPLATE_CART_INDICATOR_CLASS=t.FULL_PAGE_CART_CONTAINER_ID=t.FULL_PAGE_CART_ROOT_ID=t.CART_PILL_CLASS=t.CART_PILL_DEFAULT_CONTAINER_CLASS=t.CART_PILL_TEMPLATE_CONTAINER_CLASS=t.ADD_TO_CART_BUTTON_CONTAINER_CLASS=void 0;var i="sqs-add-to-cart-button-wrapper";t.ADD_TO_CART_BUTTON_CONTAINER_CLASS=i;var n="sqs-cart-dropzone";t.CART_PILL_TEMPLATE_CONTAINER_CLASS=n;var s="absolute-cart-box";t.CART_PILL_DEFAULT_CONTAINER_CLASS=s;var r="sqs-pill-shopping-cart";t.CART_PILL_CLASS=r;var o="sqs-cart-root";t.FULL_PAGE_CART_ROOT_ID=o;var l="sqs-cart-container";t.FULL_PAGE_CART_CONTAINER_ID=l;var c="sqs-has-custom-cart";t.TEMPLATE_CART_INDICATOR_CLASS=c;var d="sqs-custom-cart";t.TEMPLATE_CART_CONTAINER_CLASS=d;var u="sqs-template-integrated-shopping-cart";t.TEMPLATE_CART_CLASS=u;var g="sqs-cart-initialized";t.TEMPLATE_CART_INITIALIZED_CLASS=g;var p="sqs-cart-quantity";t.TEMPLATE_CART_QUANTITY_CLASS=p;var h="sqs-cart-subtotal";t.TEMPLATE_CART_SUBTOTAL_CLASS=h;var f=["#productDetails",".product-variants",".ProductItem"];t.PRODUCT_DETAIL_PAGE_SELECTORS=f;var m=["#productList",".ProductList-grid"];t.PRODUCT_LIST_PAGE_SELECTORS=m;var v=["#productWrapper",".ProductItem"];t.DIGITAL_PRODUCT_DETAIL_PAGE_SELECTORS=v;var b=[".product-title",".ProductItem-details-title"];t.PRODUCT_TITLE_SELECTORS=b;var y=[".product-price"];t.PRODUCT_PRICE_SELECTORS=y},5078:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WEEKDAYS_SHORT=t.EN_MONTHS=void 0;var i=a(24);var n=["January","February","March","April","May","June","July","August","September","October","November","December"];t.EN_MONTHS=n;var s=[(0,i.t)("Su"),(0,i.t)("Mo"),(0,i.t)("Tu"),(0,i.t)("We"),(0,i.t)("Th"),(0,i.t)("Fr"),(0,i.t)("Sa")];t.WEEKDAYS_SHORT=s},5079:function(e,t,a){"use strict";function i(e,t){if(localStorage){"string"!==typeof t&&(t=JSON.stringify(t));try{localStorage.setItem(e,t)}catch(e){console.warn(e)}}}function n(e){var t=null;if(localStorage)try{var a=localStorage.getItem(e);t=JSON.parse(a)}catch(e){t=null}return t}e.exports={getLocalStorageData:n,saveToLocalStorage:i}},5080:function(e,t,a){"use strict";e.exports={CLOSED_DATE:"date-closed",KEY:"squarespace-popup-overlay",VERSION:"version",SUBMITTED:"submitted"}},5086:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var u=a(1);var g=a(0);var p=a(360);var h=a(5204);var f=a(15);var m=a(24),v=m.t;var b=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.waitingText,i=t.isVisible,n=t.color;return g.createElement("div",{className:f(h.overlay,(0,c.default)({},h.shown,i))},g.createElement(p,{horizontalAlign:"center",color:n,size:"extra-large"}),g.createElement("p",null,a))}}]);return a}(g.Component);(0,c.default)(b,"propTypes",{waitingText:u.string.isRequired,isVisible:u.bool,color:u.string});(0,c.default)(b,"defaultProps",{color:"light",isVisible:false,waitingText:v("Please wait…")});e.exports=b},5087:function(e,t){var a={OPEN_SRS:1,NS1:2};e.exports=a},5128:function(e,t){var a={UPLOAD:1,INSTAGRAM:2,VIDEO:3,NONE:4};e.exports=a},5132:function(e,t){var a={LANDING:1,PROFILE:2,AUDIO:3,VIDEO:4,LOCATION:5,LOCK:6,TWITTER:7,OVERLAY_NEWSLETTER:8,OVERLAY_PROMOTION:9};e.exports=a},5135:function(e,t){var a={MINIMUM_CART_TOTAL_GREATER_THAN_ZERO:"MINIMUM_CART_TOTAL_GREATER_THAN_ZERO",AT_LEAST_ONE_CATEGORY:"AT_LEAST_ONE_CATEGORY",NON_EXISTING_CATEGORY:"NON_EXISTING_CATEGORY",PRODUCT_ID_REQUIRED:"PRODUCT_ID_REQUIRED",DISCOUNT_DISABLED:"DISCOUNT_DISABLED",NON_EXISTING_PRODUCT:"NON_EXISTING_PRODUCT",PRODUCT_QUANTITY_REQUIRED:"PRODUCT_QUANTITY_REQUIRED",FIXED_AMOUNT_GREATER_THAN_ZERO:"FIXED_AMOUNT_GREATER_THAN_ZERO",PERCENTAGE_INVALID:"PERCENTAGE_INVALID",TRIGGER_REQUIRED:"TRIGGER_REQUIRED",PROMO_CODE_REQUIRED:"PROMO_CODE_REQUIRED",PROMO_CODE_ALREADY_EXISTS:"PROMO_CODE_ALREADY_EXISTS",PROMO_CODE_RESERVED:"PROMO_CODE_RESERVED",START_DATE_REQUIRED:"START_DATE_REQUIRED",TEMPLATE_REQUIRED:"TEMPLATE_REQUIRED",NON_EXISTING_SHIPPING_OPTION:"NON_EXISTING_SHIPPING_OPTION",CRITERIA_REQUIRED:"CRITERIA_REQUIRED",MAX_ALLOWED_AUTO_TRIGGER_REACHED:"MAX_ALLOWED_AUTO_TRIGGER_REACHED",AUTO_TRIGGER_NOT_SUPPORTED:"AUTO_TRIGGER_NOT_SUPPORTED",NAME_REQUIRED:"NAME_REQUIRED",DISCOUNT_LIMIT_GREATER_THAN_ZERO:"DISCOUNT_LIMIT_GREATER_THAN_ZERO",LIMITED_USE_NOT_SUPPPORTED:"LIMITED_USE_NOT_SUPPPORTED",INVALID_SUBSCRIPTION_OPTIONS:"INVALID_SUBSCRIPTION_OPTIONS"};e.exports=a},5137:function(e,t){var a={FIXED_AMOUNT:"FIXED_AMOUNT",FREE_SHIPPING:"FREE_SHIPPING",PERCENTAGE:"PERCENTAGE"};e.exports=a},5138:function(e,t){var a={ANY_ORDER:"ANY_ORDER",PRODUCT:"PRODUCT",CART_TOTAL:"CART_TOTAL",CATEGORY:"CATEGORY"};e.exports=a},5142:function(e,t){var a={CODE:"CODE",AUTO:"AUTO",EPHEMERAL:"EPHEMERAL"};e.exports=a},5151:function(e,t){var a={ALPHA:1,BETA:2,RELEASED:3};e.exports=a},5152:function(e,t,a){var i=a(8712);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},5155:function(e,t){var a={COUNTRY:1,STATE:2,LOCAL:3};e.exports=a},5158:function(e,t,a){"use strict";var i=a(1180),c=i.getAppDomain;var r={isOriginValid:function e(t,a){if(a&&t===a)return true;var i=c();var n="https://oauth.".concat(i);var s="dev.squarespace.net"===i?":8448":"";var r="https://login.".concat(i).concat(s);var o=window.location.host;var l=["http://"+o,"https://"+o,n,r];return l.indexOf(t)>=0},subscribe:function e(n,s){var t=function e(t){var a=t.data,i=t.origin;r.isOriginValid(i,s)?n(a):console.info("Invalid origin on postMessage: ".concat(i))};window.addEventListener("message",t);return function(){window.removeEventListener("message",t)}}};e.exports=r},5161:function(e,t){var a={NAME:"name",EMAIL:"email",ACCOUNT:"account",ORDER_NUM:"orderNum",LAST_ORDER_ON:"lastOrderOn",TOTAL_SPENT:"totalSpent"};e.exports=a},5162:function(e,t){var a={ALL:"ALL",ACTIVE:"ACTIVE",SCHEDULED:"SCHEDULED",EXPIRED:"EXPIRED"};e.exports=a},5163:function(e,t){var a={GOOGLE_APPS_MAIL_OLD:1,GOOGLE_APPS_MAIL:2,ZOHO_MAIL:3,SQUARESPACE_APEX_FORWARDING:4,SQUARESPACE_SUBDOMAIN_FORWARDING:5,SQUARESPACE_WEBSITE:6,SQUARESPACE_WEBSITE_LEGACY_WILDCARD:7,SQUARESPACE_SUBDOMAIN_WEBSITE:8,GOOGLE_APPS_VERIFICATION:9,NEWSLETTERS_EMAIL:10};e.exports=a},5164:function(e,t){var a={TAX_INCLUSIVE:"TAX_INCLUSIVE",TAX_EXCLUSIVE:"TAX_EXCLUSIVE"};e.exports=a},5165:function(e,t){var a={FULL:"full",EXCERPT:"excerpt"};e.exports=a},5166:function(e,t,a){"use strict";var i=function e(){var t=window.navigator.userAgent.toLowerCase();var a=t.indexOf("safari/");var i="ontouchstart"in window;if(a<=-1||!i)return false;if(window.screen.width<700)return false;var n="undefined"!==typeof window&&"PointerEvent"in window&&1===window.PointerEvent.prototype.constructor.length;return n};e.exports=i},5179:function(e,t,a){var i=a(4129);YUI.add("squarespace-image-zoom",function(s){s.namespace("Squarespace");var r=s.Squarespace.ImageZoom=s.Base.create("image-zoom",s.Base,[],{initializer:function(){if(!this._shouldInitialize())return;if(!this.get("host")){false;return}this._initializeZoom()},destructor:function(){if(!this._shouldInitialize())return;var e=this.get("zoomedNode");e&&e.remove(true);this.get("host").removeClass(r.CSS_PREFIX).removeClass(r.CSS_PREFIX+"--behavior-"+this.get("behavior"));this.get("dropzone").setStyle("position","").removeClass(r.CSS_PREFIX+"-dropzone");this._zoomTriggerEvent&&this._zoomTriggerEvent.detach();this._mouseMoveEvent&&this._mouseMoveEvent.detach();this._mouseOutEvent&&this._mouseOutEvent.detach();this._resizeEvent&&this._resizeEvent.detach();this._zoomTriggerEvent=null;this._mouseMoveEvent=null;this._mouseOutEvent=null;this._resizeEvent=null},_bindUI:function(){var e=this.get("host");this._zoomTriggerEvent=e.on(this.get("behavior"),this._toggleZoom,this);this._mouseMoveEvent=e.on("mousemove",this._trackMovement,this);this._mouseOutEvent=e.on("mouseout",this._zoomOut,this);this._resizeEvent=s.one(window).on("resize",this._refresh,this)},_shouldInitialize:function(){return!s.UA.mobile&&window.Modernizr.csstransforms},_initializeZoom:function(){var e=this.get("host");var t=e.one("img");var a=this.get("dropzone");e.addClass(r.CSS_PREFIX);e.addClass(r.CSS_PREFIX+"--behavior-"+this.get("behavior"));a.addClass(r.CSS_PREFIX+"-dropzone");"static"===a.getStyle("position")&&a.setStyle("position","relative");if(t.getAttribute("src")){this._appendZoomedNode();this._bindUI()}else t.once("load",function(){this._appendZoomedNode();this._bindUI()},this)},_appendZoomedNode:function(){var e=this.get("host").one("img");var t=e.getAttribute("data-src");if(!t){false;return null}var a=e.getAttribute("data-image-dimensions");a=a||e.get("clientWidth")+"x"+e.get("clientHeight");var i=e.getAttribute("data-image-focal-point");i=i||"0.5,0.5";var n=s.Node.create('<div class="'+r.CSS_PREFIX+'-duplicate"><img src="'+t+"?format="+this._getSquarespaceSizeForWidth()+'" data-image-dimensions="'+a+'" data-image-focal-point="'+i+'"></div>');n.setStyle("transform","scale("+this.get("zoom")+")");n.one("img").plug(s.Squarespace.Loader2,{load:true,mode:"fill"});this.set("zoomedNode",n);this.get("dropzone").append(n)},_refresh:function(){var e=this.get("host").one("img").getAttribute("data-src");var t=this.get("zoomedNode").one("img");t.setAttribute("src",e+"?format="+this._getSquarespaceSizeForWidth());t.fire("refresh")},_toggleZoom:function(e){this.get("_isZoomedIn")?this._zoomOut():this._zoomIn(e);e.stopPropagation()},_zoomIn:function(e){this.get("host").addClass("is-zoomed");this.set("_isZoomedIn",true);this._trackMovement(e)},_zoomOut:function(){this.get("host").removeClass("is-zoomed");this.set("_isZoomedIn",false)},_trackMovement:function(e){if(!this.get("_isZoomedIn"))return;var t=Math.max((e.pageX-this.get("host").getX())/this.get("host").get("clientWidth")*100,0);var a=Math.max((e.pageY-this.get("host").getY())/this.get("host").get("clientHeight")*100,0);this.get("zoomedNode").setStyle("transformOrigin",t+"% "+a+"%")},_getSquarespaceSizeForWidth:function(){var e=this.get("host").one("img").get("clientWidth");return i.getSquarespaceSizeForWidth(e*this.get("zoom"))}},{CSS_PREFIX:"sqs-image-zoom",ATTRS:{host:{value:null,validator:function(e){var t=s.one(e);return s.instanceOf(t,s.Node)&&t.one("img")&&t.all("img").size()<2},writeOnce:true},dropzone:{valueFn:function(){return this.get("host")},validator:function(e){return s.instanceOf(s.one(e),s.Node)},writeOnce:true},behavior:{value:"hover",validator:function(e){if("hover"!==e&&"click"!==e){false;return false}return true},writeOnce:true},zoom:{value:1.5,validator:function(e){("number"!==typeof e||e<=1||e>5)&&false;return true},writeOnce:true},_isZoomedIn:{value:false}}})},"1.0",{requires:["base","event","node","squarespace-image-loader","yui-base"]})},5180:function(e,t,a){YUI.add("squarespace-enum",function(e){var t=e.namespace("Squarespace");t.AccessPermissions=a(906);t.AccountStates=a(5081);t.AchievementType=a(1430);t.AdvertisingProviderType=a(5181);t.AgeTypes=a(5214);t.AggregationGroupSortByTypes=a(4126);t.AggregationTypes=a(4127);t.AnnouncementBarStyle=a(2745);t.ApplicationSettingType=a(5215);t.AuthenticationFrameMessageType=a(2223);t.BackgroundSource=a(5128);t.BillingError=a(1392);t.BillingProductTypes=a(57);t.BillingStatus=a(1605);t.BillingSubscriptionStatus=a(3442);t.BillingTaxType=a(495);t.BlockForeignKeyFieldNames=a(5216);t.BlockType=a(701);t.CanadianProvinces=a(5193);t.CardBrands=a(1947);t.CensusDataMetric=a(5217);t.CensusDataType=a(5218);t.CensusEventType=a(1944);t.CensusGranularity=a(5219);t.CertificateStatus=a(2739);t.ChannelMappingState=a(2034);t.CollectionOrdering=a(523);t.CollectionTypes=a(229);t.CommentSortTypes=a(4207);t.CommentStates=a(3418);t.CommentStatuses=a(4130);t.CommentTargetTypes=a(4208);t.CommerceCouponType=a(5220);t.CommerceDiscountType=a(5221);t.CommerceEmailTypes=a(5194);t.Compositions=a(1638);t.ConfigurationMenuItemType=a(5222);t.CurrencySymbol=a(5223);t.CustomerField=a(5161);t.CustomerSortDirection=a(5224);t.DeviceCategory=a(5225);t.DiscountCriteriaType=a(5138);t.DiscountStatus=a(5162);t.DiscountTemplateType=a(5137);t.DiscountTriggerType=a(5142);t.DiscountValidationErrorType=a(5135);t.DNSProviderIdentifier=a(5087);t.DomainAvailability=a(4122);t.DomainNameStatus=a(4115);t.DomainPlanLevel=a(1626);t.DomainPresetTemplateId=a(5163);t.DomainProviderId=a(2363);t.DomainSubscriptionState=a(1390);t.DomainTransferStatus=a(2882);t.DomainTypes=a(870);t.DomainVerificationStatus=a(2881);t.EmailTypes=a(4133);t.EventView=a(5182);t.ExternalServiceProviders=a(404);t.ExternalServiceProvidersOnlyOneAllowed=a(2590);t.FeatureLevels=a(319);t.Features=a(728);t.FeatureSetIdentifiers=a(5226);t.Flag=a(87);t.FocalPointSources=a(5227);t.FormType=a(5073);t.GettyError=a(5228);t.GoogleAppsPlanType=a(3424);t.GoogleAppsSubscriptionState=a(5229);t.GoogleAppsSubscriptionStatus=a(5230);t.GraphicalStyles=a(5231);t.GroupSizes=a(5232);t.ImageFamilies=a(1635);t.ImportingSources=a(5183);t.IndexType=a(3476);t.InvoiceProvider=a(5233);t.InvoiceStatuses=a(2584);t.JobStatuses=a(664);t.JobTypes=a(2035);t.LicensedAssetSource=a(598);t.LinkStatusType=a(5234);t.MarketingCouponExpirationTypes=a(3443);t.MeasurementStandard=a(4193);t.MediaProcessingState=a(851);t.MemberAccountGuild=a(4113);t.MemberAccountStatus=a(5235);t.MemberAccountRole=a(5236);t.MobileInfoBarStyle=a(2710);t.OrderDirection=a(697);t.OrderEventType=a(5237);t.OrderFulfillmentStates=a(4165);t.OrderPaymentStates=a(5238);t.OrderStates=a(5195);t.Orientations=a(1637);t.PageAction=a(665);t.PageFeatures=a(4209);t.PageTypes=a(1572);t.PaymentProviderType=a(1344);t.PaymentSettingsErrorType=a(5239);t.PayPalCheckoutErrorTypes=a(3518);t.PinterestDomainVerificationState=a(5082);t.PlanGenus=a(1240);t.PlanViolationErrors=a(5240);t.PriceTaxInterpretations=a(5164);t.ProductLines=a(323);t.ProductTypes=a(309);t.ProtectedSiteIdentifiers=a(5241);t.RecordType=a(149);t.ReferralMatchType=a(5242);t.ReferralSearchResultStatus=a(5243);t.ReferralSource=a(5244);t.ReferralState=a(4220);t.ShippingRateTypes=a(5196);t.SliceType=a(4155);t.SlideLayoutCategory=a(5132);t.SlideLayoutStatus=a(5151);t.SlideType=a(2738);t.SocialIconAlignments=a(5245);t.SocialIconColors=a(5246);t.SocialIconSizes=a(5247);t.SocialIconStyles=a(5248);t.SocialSearchReferenceType=a(5249);t.SocialSearchStatus=a(5250);t.SocialServices=a(1927);t.SortOrders=a(1636);t.SSBadgeDevices=a(4187);t.SSBadgePosition=a(4188);t.SSBadgeType=a(2712);t.SSBadgeVisibility=a(4189);t.SslSetting=a(4118);t.StatusConstants=a(568);t.StoreStates=a(5251);t.SubscriptionEventRecordTypes=a(5252);t.SubscriptionLineItemType=a(1118);t.SuspensionState=a(4221);t.SystemBlogCollectionPostDisplay=a(5165);t.SystemWebsiteSubjects=a(5253);t.TaxCategoryTypes=a(5254);t.TaxJurisdictionType=a(1922);t.TaxScopes=a(5155);t.TemplateErrorType=a(5184);t.TermsAcceptanceRequirement=a(3085);t.TermTypes=a(5255);t.TransferAvailability=a(1348);t.TweakTypes=a(2462);t.VideoFilterOption=a(1936);t.WebsiteCompRecordType=a(5256);t.WebsiteContentCategory=a(5257);t.WebsiteContentSubcategory=a(5258);t.WebsiteDisambiguationType=a(3069);t.WebsiteGoal=a(5259);t.WebsiteRole=a(1940);t.WebsiteTaxonomyFilterFlag=a(4222);t.WebsiteType=a(514);t.WorkflowStates=a(596)},"1.0",{requires:[]})},5181:function(e,t){var a={GOOGLE_ADS:1};e.exports=a},5182:function(e,t){var a={CALENDAR:0,LIST:1};e.exports=a},5183:function(e,t){var a={V5:1,WORDPRESS:2,TUMBLR:3,BLOGGER:5,ETSY:7,SHOPIFY:8,BIG_CARTEL:9};e.exports=a},5184:function(e,t){var a={JSON_DESERIALIZE:1,JSON_PROPERTY_MAP:2,CSS_COMPILE:3,JSON_TEMPLATE:4,CSS_TWEAK_PARSE:5,LOCALIZE_STRING_PARSE:6};e.exports=a},5188:function(e,t,a){var n=a(96);var s=a(1390);var r=a(1626);YUI.add("squarespace-domains-models-domain",function(a){a.namespace("Squarespace.Domains.Models");var i=a.Squarespace.Domains.Models.Domain=a.Base.create("Domain",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"domains",serialize:function(){var e=i.superclass.toJSON.apply(this,arguments);delete e.discountExpiresOn;delete e.planLevel;delete e.certificates;e.basePrice instanceof n&&(e.basePrice=e.basePrice.toJson());var t=a.JSON.stringify(e);return t}},{ATTRS:{id:{validator:a.Squarespace.AttrValidators.isString},autoRenew:{validator:a.Squarespace.AttrValidators.isBoolean},renewsOn:{validator:a.Squarespace.AttrValidators.isNullOrNumber},createdOn:{validator:a.Squarespace.AttrValidators.isNumber},certificates:{validator:a.Squarespace.AttrValidators.isArray},discountExpiresOn:{setter:function(e){if(e instanceof Date)return e;if(a.Lang.isNumber(e))return new Date(e);return null}},isVerified:{validator:a.Squarespace.AttrValidators.isBoolean},locked:{validator:a.Squarespace.AttrValidators.isBoolean},managedDomainExpiration:{validator:a.Squarespace.AttrValidators.isNullOrNumber},name:{validator:a.Squarespace.AttrValidators.isString},planLevel:{validator:a.Squarespace.AttrValidators.isValueIn(r)},basePrice:{value:null,setter:function(e){!a.Lang.isObject(e)||e instanceof n||(e=n.fromJson(e));if(null!==e&&!(e instanceof n))return a.Attribute.INVALID_VALUE;return e}},providerId:{validator:a.Squarespace.AttrValidators.isNumber},purchasedGoogleApps:{validator:a.Squarespace.AttrValidators.isBoolean},revocable:{validator:a.Squarespace.AttrValidators.isBoolean},subscriptionId:{validator:a.Squarespace.AttrValidators.isString},subscriptionState:{validator:a.Squarespace.AttrValidators.isValueIn(s)},type:{validator:a.Squarespace.AttrValidators.isNumber},verficationCode:{validator:a.Squarespace.AttrValidators.isNullOrString},withinPropagationWindow:{validator:a.Squarespace.AttrValidators.isBoolean},whoisPrivacy:{validator:a.Squarespace.AttrValidators.isNullOrBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},5189:function(e,t){YUI.add("squarespace-dialog-description",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.Description=i.Base.create("DescriptionField",i.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){t.superclass.renderUI.call(this);this._descEl=this.get("contentBox").one(".custom-field-description");var e=this.get("padding");i.Lang.isArray(e)&&e.length>0&&this._descEl.setStyles({paddingTop:e[0],paddingBottom:e[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){t.superclass.bindUI.call(this);this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},_attachNode:function(e){var t=this.get(e);if(i.Lang.isString(t)&&t.length>0){var a=i.Node.create('<div class="'+e+'">'+t+"</div>");this._descEl.append(a)}},_getAsString:function(e){return i.Lang.isValue(e)?e+"":""},setTitle:function(e){this.set("title",e)},setText:function(e){this.set("text",e)}},{CSS_PREFIX:"sqs-description",TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:i.Lang.isString},padding:{value:[],validator:i.Lang.isArray},focusable:{value:false},testAttribute:{value:"description"}}});i.Squarespace.DialogFields.DescriptionField=i.Squarespace.DialogFields.Description},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},5190:function(e,t,a){"use strict";var i=a(34);e.exports=i.generateActions("show","loadInBackground","frameLoaded","closeFrame","showLoading")},5193:function(e,t){var a={ON:"ON",QC:"QC",NS:"NS",NB:"NB",MB:"MB",BC:"BC",PE:"PE",SK:"SK",AB:"AB",NL:"NL",NT:"NT",YT:"YT",NU:"NU"};e.exports=a},5194:function(e,t){var a={ORDER_CONFIRMED:1,ORDER_SHIPPED:2,ORDER_REFUNDED:3,DIGITAL_GOODS_DELIVERY:4,CONTRIBUTION_CONFIRMED:5,ABANDONED_CART:6,RESET_PASSWORD:7,CUSTOMER_WELCOME:8,PASSWORD_UPDATED:10,GIFT_CARD_DELIVERY:11,MEMBER_WELCOME:13,RESTOCK_NOTIFICATION:14,CUSTOM_MESSAGE:50,BASE_TEMPLATE:51};e.exports=a},5195:function(e,t){var a={PENDING:1,FULFILLED:2,REFUNDED:3,CANCELLED:4};e.exports=a},5196:function(e,t){var a={OTHER:0,FLAT:1,WEIGHT_RANGE:3,USPS:6,UPS:7,FEDEX:8};e.exports=a},5197:function(e,t,a){"use strict";var i={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};e.exports=i},5204:function(e,t,a){var i=a(5205);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},5205:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,"div.LoadingPage-overlay-3UaiY {\n  background: transparent;\n  color: #313131;\n  opacity: 0;\n  transition: opacity 0.4s cubic-bezier(0.645, 0.045, 0.355, 1);\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\ndiv.LoadingPage-overlay-3UaiY.LoadingPage-shown-3rPKJ {\n  display: block;\n  opacity: 1.0;\n}\ndiv.LoadingPage-overlay-3UaiY p {\n  text-align: center;\n  font: 400 normal 16px / 22px 'Clarkson', 'Proxima Nova', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  letter-spacing: normal;\n}\n",""]);t.locals={overlay:"LoadingPage-overlay-3UaiY",shown:"LoadingPage-shown-3rPKJ"}},5214:function(e,t){var a={NEWBORN:"newborn",BABY:"baby",CHILD:"child",TEENAGER:"teenager",YOUNG_ADULT:"young_adult",ADULT:"adult",ADULTS_ONLY:"adults_only",MATURE_ADULT:"mature_adult",SENIOR_ADULT:"senior_adult"};e.exports=a},5215:function(e,t){var a={STRING:"str",NUMERIC:"num",BOOLEAN:"bool"};e.exports=a},5216:function(e,t){var a={GALLERY_BLOCK_TRANSIENT_GALLERY_ID:"transientGalleryId",ALBUM_BLOCK_TRANSIENT_COLLECTION_ID:"transientCollectionId",FORM_BLOCK_FORM_ID:"formId",IMAGE_BLOCK_IMAGE_ID:"imageId",TWITTER_BLOCK_SEARCH_COLLECTION_ID:"socialCollectionId",CHART_BLOCK_DATA_TABLE_ID:"dataTableId"};e.exports=a},5217:function(e,t){var a={VIEWS:1,VISITS:2,VISITORS:3,COUNT:4,SUBS:5,BOTS:6,REVENUE:7,QUANTITY:8,QUERIES:9,OS:10,BROWSER:11,DEVICE_TYPE:12,VERSIONS:13};e.exports=a},5218:function(e,t){var a={TOTAL:1,PAGE_URL:2,PAGE_TITLE:3,BROWSER:4,OS:5,COUNTRY:6,REFERRER:7,SEARCH_TERM:8,SEARCH_ENGINE:9,SUBSCRIBER:10,DEVICE:11,CATEGORY_PURCHASE:30,PRODUCT_PURCHASE:31,SITE_SEARCH:32,ACTIVE_TIME:33};e.exports=a},5219:function(e,t){var a={HOURLY:1,DAILY:2,WEEKLY:3,MONTHLY:4,YEARLY:5};e.exports=a},5220:function(e,t){var a={THIRD_PARTY:5,SINGLE_PRODUCT:4,CATEGORIES:3,ORDERS_OVER:2,ALL_ORDERS:1};e.exports=a},5221:function(e,t){var a={FLAT:1,PERCENTAGE:2,FREE_SHIPPING:3};e.exports=a},5222:function(e,t){var a={HOME:1,CONTENT:2,DASHBOARD:3,SETTINGS:4,COMMERCE:5,FOLDER:6,HELP:7,NEWSLETTERS:8,NOTIFICATIONS:9};e.exports=a},5223:function(e,t){var a={USD:"$",CAD:"$",GBP:"£",AUD:"$",EUR:"€",CHF:"CHF",NOK:"kr",SEK:"kr",DKK:"kr",NZD:"$",SGD:"S$",MXN:"$",HKD:"HK$",CZK:"Kč",ILS:"₪",MYR:"RM",RUB:"р.",PHP:"Php",PLN:"zł",THB:"฿",BRL:"R$",ARS:"$",COP:"COL$",IDR:"Rp",INR:"₹",JPY:"¥",ZAR:"R"};e.exports=a},5224:function(e,t){var a={ASCENDING:"asc",DESCENDING:"desc"};e.exports=a},5225:function(e,t){var a={DESKTOP:1,MOBILE:2,TABLET:3,UNKNOWN:4,ALL:200};e.exports=a},5226:function(e,t){var a={WEBSITE_CLASSIC_TRIAL:"website-classic-trial",WEBSITE_CLASSIC_PERSONAL:"website-classic-personal",WEBSITE_CLASSIC_PERSONAL_GATED_TEST:"website-classic-personal-gated",WEBSITE_CLASSIC_PERSONAL_RESOLD:"website-classic-personal-resold",WEBSITE_CLASSIC_PROFESSIONAL:"website-classic-professional",WEBSITE_BUSINESS_RESOLD:"website-classic-professional-resold",WEBSITE_CLASSIC_COMPED:"website-classic-comped",WEBSITE_LEGACY_COMPED:"website-legacy-comped",WEBSITE_LEGACY_PROFESSIONAL:"website-legacy-professional",WEBSITE_LEGACY_PERSONAL:"website-legacy-personal",WEBSITE_LEGACY_COMMERCE:"website-legacy-commerce",WEBSITE_BUSINESS_PRICE_TEST_AUG_2017:"website-business-price-test-aug-2017",WEBSITE_COVER_PAGE:"website-starter",WEBSITE_COVER_PAGE_TRIAL:"website-starter-trial",WEBSITE_COMMERCE_TRIAL:"website-commerce-trial",WEBSITE_COMMERCE_BASIC:"website-commerce-basic",WEBSITE_COMMERCE_BASIC_RESOLD:"website-commerce-basic-resold",WEBSITE_COMMERCE_ADVANCED:"website-commerce-advanced",WEBSITE_COMMERCE_ADVANCED_RESOLD:"website-commerce-advanced-resold",WEBSITE_COMMERCE_ADVANCED_WITH_CALLBACKS:"website-commerce-advanced-callbacks",WEBSITE_ENTERPRISE_TRIAL:"website-enterprise-trial",WEBSITE_ENTERPRISE_SELECT:"website-enterprise-select",PARKING_PAGE_REMOVED:"parking-page-removed",WEBSITE_V5_LINKED_LOW:"website-v5-linked-low",WEBSITE_V5_LINKED_HIGH:"website-v5-linked-high",WEBSITE_PARKING_PAGE:"website-parking-page"};e.exports=a},5227:function(e,t){var a={HUMAN:1,MACHINE:2,DEFAULT:3};e.exports=a},5228:function(e,t){var a={IMAGE_NOT_AVAILABLE:"This image is no longer available to license. Your card was not charged."};e.exports=a},5229:function(e,t){var a={PENDING:1,ACTIVE:2,PASTDUE:3,SUSPENDED:4,PROCESSING:5};e.exports=a},5230:function(e,t){var a={ACTIVE:1,PENDING:2,CANCELLED:3,SUSPENDED:4};e.exports=a},5231:function(e,t){var a={FINE_ART:"fine_art",ILLUSTRATION:"illustration",PHOTOGRAPHY:"photography"};e.exports=a},5232:function(e,t){var a={NONE:"none",ONE:"one",TWO:"two",GROUP:"group"};e.exports=a},5233:function(e,t){var a={STRIPE:1,ZUORA:2,BILLING_SERVICE:3,BILLING_SERVICE_DEBT:4};e.exports=a},5234:function(e,t){var a={MAPPING:1,VERIFICATION:2};e.exports=a},5235:function(e,t){var a={ACTIVE:"ACTIVE",SUSPENDED:"SUSPENDED",TERMINATED:"TERMINATED"};e.exports=a},5236:function(e,t){var a={SUPERADMIN:1,BILLING:2,SUPPORT:3,DEV:4,MARKETING:5,SUPPORT_SUPERVISOR:6,INTERNAL_REPORTING:7,EXTERNAL_BETA_ACCESS:8,ADVISOR_BILLING:9,TRUST_AND_SAFETY:10,SQSP_PUBLIC_IMPERSONATION:11,CAMPAIGNS_EMAIL_REVIEWER:12,ENTERPRISE_ADMIN:13,FRAUD_DETECTION_REVIEWER:14,INTERNAL_CAMPAIGNS_SENDER:15,SITEL_USER:16};e.exports=a},5237:function(e,t){var a={STATE_CHANGE:1,PAYMENT_STATE_CHANGE:2,ORDER_CANCELED:3,PAYMENT_REFUND:4,ORDER_MARKED_PENDING:5,ORDER_FULFILLED:6};e.exports=a},5238:function(e,t){var a={NOT_CHARGED:1,AUTHORIZED:2,PAID:3,REFUNDED:4};e.exports=a},5239:function(e,t){var a={PAYMENT_PROVIDER_NOT_SUPPORTED:"payment-provider-not-supported",CURRENCY_REQUIRED:"currency-required",COULD_NOT_REVOKE_ACCESS_TOKEN:"could-not-revoke-access-token",COUNTRY_NOT_SUPPORTED:"country-not-supported",INVALID_TOKEN:"invalid-token",UNKNOWN:"unknown",CURRENCY_NOT_SUPPORTED:"currency-not-supported",COULD_NOT_CHANGE_CURRENCY:"could-not-change-currency"};e.exports=a},5240:function(e,t){var a={PAGE_LIMIT_EXCEEDED:1,STORAGE_LIMIT_EXCEEDED:2};e.exports=a},5241:function(e,t){var a={ACCOUNT:"account",ADMIN:"admin",API:"api",AUTH:"auth",BLOG:"blog",NEWSROOM:"newsroom",CDN:"cdn",CHECKOUT_ASSETS:"checkout-assets",CIRCLE:"circle",COMMERCE:"commerce",CUSTOMERCARE:"customercare",CUSTOMERSUPPORT:"customersupport",DE:"de",DEVELOPERS:"developers",DOMAIN_VERIFICATION:"domain-verification",ES:"es",FR:"fr",INSTAGRAM:"instagram",IT:"it",LOGIN:"login",MASTER:"master",MEDIA_API:"media-api",MOBILE:"mobile",MAIL:"mail",NEW:"new",NEWS_LAYOUTS:"news-layouts",OAUTH:"oauth",PT:"pt",SECURE:"secure",SPECIALISTS:"specialists",STATIC:"static",STATIC1:"static1",STORE:"store",SYSTEM:"system",TEMPLATE_MASTER:"template-master",VERIFY:"verify",WEB_HOOKS:"web-hooks",WW:"ww",WWW:"www",WWWW:"wwww",WWWWW:"wwwww",WWW_STAGING:"www-staging",ZULI_SEGURA_MILLER01:"zuli-segura-miller01",IMAGE_UPLOADS:"image-uploads",AUDIO_UPLOADS:"audio-uploads",VIDEO_UPLOADS:"video-uploads",DOCUMENT_UPLOADS:"document-uploads",DIGITAL_PRODUCT_UPLOADS:"digital-product-uploads"};e.exports=a},5242:function(e,t){var a={WEBSITE:1,EMAIL_ADDRESS:2,FACEBOOK:3,TWITTER:4,LINKEDIN:5,FACEBOOK_ID:6};e.exports=a},5243:function(e,t){var a={NO_MATCH:0,SINGLE_MATCH:1,MULTI_MATCH:2};e.exports=a},5244:function(e,t){var a={GOOGLE:1};e.exports=a},5245:function(e,t){var a={LEFT:"left",RIGHT:"right",CENTER:"center"};e.exports=a},5246:function(e,t){var a={BLACK:"black",WHITE:"white",STANDARD:"standard"};e.exports=a},5247:function(e,t){var a={XSMALL:"extra-small",SMALL:"small",DEFAULT:"default",LARGE:"large",XLARGE:"extra-large"};e.exports=a},5248:function(e,t){var a={ICON_ONLY:"icon-only",ROUND:"round",ROUND_BORDER:"round-border",ROUND_SOLID:"round-solid",REAL_SQUARE:"real-square",REAL_SQUARE_BORDER:"real-square-border",REAL_SQUARE_SOLID:"real-square-solid",SQUARE:"square",SQUARE_BORDER:"square-border",SQUARE_SOLID:"square-solid"};e.exports=a},5249:function(e,t){var a={PAGE:1,BLOG_POST:2,TEMPLATE_INSTALLATION:3,SLIDE:4};e.exports=a},5250:function(e,t){var a={UNDEFINED:1,PREVIEW:2,BLOCK_SAVED:3,BLOCK_REMOVED:4,SAVED:5,REMOVED:6};e.exports=a},5251:function(e,t){var a={LIVE:1,TEST_MODE:2,NOT_CONNECTED:3};e.exports=a},5252:function(e,t){var a={PURCHASE:"PURCHASE",CANCEL:"CANCEL",MOVE:"MOVE",RESUBSCRIBE:"RESUBSCRIBE",UPDATE:"UPDATE",RENEW:"RENEW",ADMIN_RETROACTIVE_REFUND:"ADMIN_RETROACTIVE_REFUND"};e.exports=a},5253:function(e,t){var a={FAITH:"faith",FASHION:"fashion",FINE_ART:"fine_art",FITNESS:"fitness",FOOD:"food",GRAPHIC_DESIGN:"design",HEALTH_CARE:"health",MUSIC:"music",PHOTOGRAPHY:"photo",TECHNOLOGY:"tech",VIDEOGRAPHY:"video",WEDDING_COUPLE:"wedding_couple",WEDDING_SERVICES:"wedding_services",OTHER:"other"};e.exports=a},5254:function(e,t){var a={CUSTOM:1,GENERAL:2,EXEMPT:10,CLOTHING:11,FOOD_GROCERIES:12,NON_PRESCRIPTION_DRUGS:13,PRESCRIPTION_DRUGS:14,DIGITAL_GOODS:15,SPECIAL_DIGITAL_PRODUCTS:16};e.exports=a},5255:function(e,t){var a={WEBSITE_TERMS_OF_SERVICE:1,PRIVACY_POLICY:2,DOMAIN_FIRST_TERMS_OF_SERVICE:3,IMAGE_TERMS_OF_SERVICE:4,TEMPLATES_LICENSE:5,LOGO_TERMS_OF_SERVICE:7,TRADEMARK_USAGE:8,COMBINED_TOS_AND_PRIVACY_POLICY:9};e.exports=a},5256:function(e,t){var a={EMPLOYEE:1,PRESS:2,BRAND_PARTNER:3,EVENT_PARTNER:4,INFLUENCER:5,FACULTY:6,GIVEAWAY:7,BULK_INVOICE:8,RECRUITING_PARTNER:9,BRAND_MARKETING:10,ENTERPRISE_CONCIERGE:11,EXTENSION_DEVELOPER:12};e.exports=a},5257:function(e,t){var a={MUSIC:1,FOOD_DRINK:2,PORTFOLIO:3,PUBLISHING_CONTENT:4,WEDDING:5,PROFESSIONAL_SERVICES:6,BUSINESS:7,OTHER:8,CLASSES_SERVICES:9,JEWELRY_ACCESSORIES:10,FASHION_APPAREL:11,HOME_DECOR:12,HEALTH_BEAUTY:13,BOOKS:14,ART_PHOTOGRAPHY:15,TICKETS:16,ELECTRONICS:17,TOYS_GAMES:18,MUSIC_VIDEOS_CONTENT:19,SPORTS_OUTDOORS:20,PAPER_GOODS:21,AUTOMOTIVE:22};e.exports=a},5258:function(e,t){var a={MUSICIAN:1,RECORD_LABEL:2,BAND:3,VENUE:4,EVENT:5,RESTAURANT:6,BAR:7,CAFE_BAKERY:8,GOODS:9,PHOTOGRAPHER:10,ARTIST:11,CREATIVE_AGENCY:12,ARCHITECT:13,INTERIOR_DESIGNER:14,PODCAST:15,MAGAZINE:16,BLOG:17,BOOK:18,PERSONAL_WEDDING:19,WEDDING_PROFESSIONAL:20,WEDDING_VENDOR:21,LAWYER:22,CONSULTANT:23,ARCHITECTURE:24,HEALTHCARE:25,MARKETING:26,TECHNOLOGY:27,DESIGN:28,REAL_ESTATE:29,CORPORATE:30,HOME_LIVING:31,FASHION:32,HEALTH_BEAUTY:33,ART_PHOTOGRAPHY:34};e.exports=a},5259:function(e,t){var a={PORTFOLIO:1,EMPLOYMENT:2,ONLINE_SALES:3,BUSINESS_PROMOTION:4,ANNOUNCEMENT:5,COLLECT_INFO:6,CAPTURE_IDEAS:7,OTHER:8};e.exports=a},5320:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(87));var s=a(24);var r=i(a(114));var o={};o.TEXT={type:"text",id:null,locked:false,title:(0,s.t)("Text"),description:"",placeholder:"",required:false,text:true};o.TEXT_AREA={type:"textarea",id:null,locked:false,title:(0,s.t)("Text Area"),description:"",placeholder:"",required:false,textarea:true};r.default.isFeatureEnabled(n.default.VANILLA_FORM_HANDLER)&&(o.TEXT_AREA.maxLength="");o.EMAIL={type:"email",id:null,locked:false,title:(0,s.t)("Email"),description:"",placeholder:"",required:false,email:true};o.CURRENCY={type:"currency",id:null,locked:false,title:(0,s.t)("Currency"),description:"",currencySymbol:"$",required:false,currency:true};o.NUMBER={type:"number",id:null,locked:false,title:(0,s.t)("Number"),description:"",placeholder:"",required:false,number:true};o.WEBSITE={type:"website",id:null,locked:false,title:(0,s.t)("Website"),description:"",placeholder:"",required:false,website:true};o.PASSWORD={type:"password",id:null,locked:false,title:(0,s.t)("Password"),description:"",required:false,password:true};o.TWITTER={type:"twitter",id:null,locked:false,title:(0,s.t)("Twitter"),description:"",required:false,twitter:true};o.DATE={type:"date",id:null,locked:false,title:(0,s.t)("Date"),description:"",required:false,date:true};o.TIME={type:"time",id:null,locked:false,title:(0,s.t)("Time"),description:"",required:false,time:true};o.NAME={type:"name",id:null,locked:false,title:(0,s.t)("Name"),description:"",required:false,name:true};o.ADDRESS={type:"address",id:null,locked:false,title:(0,s.t)("Address"),description:"",required:false,address:true};o.PHONE={type:"phone",id:null,locked:false,title:(0,s.t)("Phone"),description:"",showCountryCode:false,required:false,phone:true};o.SECTION={type:"section",id:null,locked:false,title:(0,s.t)("Section"),description:"",underline:true,section:true};o.RADIO={type:"radio",id:null,locked:false,title:(0,s.t)("Radio"),description:"",options:[(0,s.t)("Option One"),(0,s.t)("Option Two")],required:false,radio:true};o.CHECKBOX={type:"checkbox",id:null,locked:false,title:(0,s.t)("Checkbox"),description:"",options:[(0,s.t)("Option One"),(0,s.t)("Option Two")],required:false,checkbox:true};o.SELECT={type:"select",id:null,locked:false,title:(0,s.t)("Select"),description:"",options:[(0,s.t)("Option One"),(0,s.t)("Option Two")],required:false,select:true};o.LIKERT={type:"likert",id:null,locked:false,title:(0,s.t)("Survey"),description:"",options:[(0,s.t)("Option One"),(0,s.t)("Option Two")],required:false,likert:true};o.HIDDEN={type:"hidden",id:null,locked:false,title:(0,s.t)("Hidden"),description:"",required:false,hidden:true};var l=o;t.default=l;e.exports=t.default},5328:function(e,t,a){var i=a(853);var n=a(731);var s=a(1007);var r=a(895);var o=a(1048);var l=a(701);var c=i(l);var d=n(c,s);var u=n(c,r);var g=n(c,o);e.exports={BlockTypeKeys:c,BlockTypeName:d,BlockTypeLabels:g,BlockTypeKebab:u}},5331:function(e,t){var a={ALL:"all",CALENDARS:"calendars",CATEGORIES:"categories",CLASSES:"classes",APPOINTMENT_TYPES:"appointment_types",CUSTOM:"custom"};e.exports=a},5333:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(40));var s=i(a(8));var r=i(a(2));var o=i(a(1600));var l=i(a(228));var c=function e(){(0,s.default)(this,e)};t.default=c;(0,r.default)(c,"SVG_NAMESPACE_URI","http://www.w3.org/2000/svg");(0,r.default)(c,"SVG_NAMESPACE_QUALIFIED_NAME","g");(0,r.default)(c,"SVG_USE_SELECTOR","use");(0,r.default)(c,"spritesheetPromises",{});(0,r.default)(c,"isNeeded",function(){return"IE"===o.default.name});(0,r.default)(c,"logError",function(e){var t=e.message;"undefined"!==typeof console&&console.error("[SvgCompatibility] ".concat(t))});(0,r.default)(c,"getEls",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return(0,n.default)(e.querySelectorAll(c.SVG_USE_SELECTOR))});(0,r.default)(c,"parse",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(!c.isNeeded())return;c.getEls(e).forEach(function(a){var e=c.elToUrlId(a),t=e.url,i=e.id;if(!t||!i){false;return}c.getSpritesheet(t).then(function(e){false;var t=c.getIconFromSpritesheet(i,e);c.swapElWithIcon(a,t)}).catch(c.logError)})});(0,r.default)(c,"elToUrlId",function(e){var t=e.getAttribute("xlink:href").split("#");return{url:t[0],id:t[1]}});(0,r.default)(c,"getSpritesheet",function(e){return c.spritesheetPromises[e]?c.spritesheetPromises[e]:c.loadSpritesheet(e)});(0,r.default)(c,"loadSpritesheet",function(e){false;c.spritesheetPromises[e]=l.default.get(e).then(function(e){var t=e.data;var a=document.createElement("div");a.innerHTML=t;return a}).catch(function(e){return document.createElement("div")});return c.spritesheetPromises[e]});(0,r.default)(c,"getIconFromSpritesheet",function(e,t){if(!e||!t)throw new Error("id and spritesheet are required");var a=t.querySelector("#".concat(e));if(!a)throw new Error('Could not find icon "'.concat(e,'"'));return a.cloneNode(true)});(0,r.default)(c,"swapElWithIcon",function(e,t){if(!e||!e.parentNode||!t||!t.childNodes)throw new Error("Non-orphan el and non-empty icon are required");var a=document.createElementNS(c.SVG_NAMESPACE_URI,c.SVG_NAMESPACE_QUALIFIED_NAME);(0,n.default)(t.childNodes).forEach(function(e){return a.appendChild(e)});a.setAttribute("class",e.getAttribute("class"));e.parentNode.replaceChild(a,e)});e.exports=t.default},5336:function(e,t,a){"use strict";var i={UPLOAD:1,PROCESSING:2};e.exports=i},5415:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isCaptchaEnabled=void 0;var n=i(a(411));var s=function e(){var t=n.default.getState().toJS(),a=t.captchaSettings;return!!a&&!!a.siteKey&&!!a.secretKey};t.isCaptchaEnabled=s},5446:function(e,t,a){var o=a(58);var l=a(24).formatDateTime;var c=a(810);var d=a(845);var u=a(149);YUI.add("squarespace-calendar-core-renderer",function(n){n.namespace("Squarespace");var a="MM-YYYY";var t="MMMM YYYY";var s=function(e){return e.recordType===u.EVENT?e.structuredContent.startDate:e.addedOn};var i="/api/open/GetItemsByMonth";n.Squarespace.SquarespaceCalendar=n.Base.create("SquarespaceCalendar",n.Calendar,[],{initializer:function(){this._fetchEvents()},bindUI:function(){n.Calendar.superclass.bindUI.call(this);this.before("dateChange",this._clearEvents,this);this.after("dateChange",this._fetchEvents,this);this.after("collectionIdChange",this._fetchEvents,this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var e=this.get("date");var t=o(e).locale("en").format(a);n.Data.get({url:this._getFetchUrl(t),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(e){this.set("events",e)},_handleResponseError:function(e){this.fire("fetchEventsFailure");false},_getFetchUrl:function(e){return i+this._buildQueryString(e)},_buildQueryString:function(e){var t=this.get("collectionId");var a=this.get("pageCollectionId");var i=this.get("category");var n=this.get("tag");var s=this.get("author");var r="?month="+e;t&&(r+="&collectionId="+t);a&&(r+="&pageCollectionId="+a);var o=r+(i?"&category="+i:"")+(n?"&tag="+n:"")+(s?"&author="+s:"");return o}},{ATTRS:{events:{value:[],validator:n.Lang.isArray},collectionId:{value:null,validator:n.Lang.isString},pageCollectionId:{value:null,validator:n.Lang.isString},category:{value:"",validator:n.Lang.isString},tag:{value:"",validator:n.Lang.isString},author:{value:"",validator:n.Lang.isString}}});n.Squarespace.CalendarBaseRenderer=n.Base.create("CalendarBaseRenderer",n.Plugin.Base,[],{initializer:function(e){this.host=e.host;this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(e){var t=null;n.Lang.isArray(e.newVal)&&e.newVal.length>0&&(t=n.bind(this._calendarFilterFunction,this));this.host.set("customRenderer",{rules:{all:"events"},filterFunction:t})},_calendarFilterFunction:function(e,t,a){var i=this.host.get("events");var n=this._getEventsOfDay(i,e);this._sortEvents(n);this._renderDay(e,t,n)},_renderDay:function(e,t,a){a.length>0&&t.setStyle("background","gray")},_sortEvents:function(e){e.sort(function(e,t){var a=s(e);var i=s(t);return i-a})},_isMultidayEvent:function(e){if(e.recordType!==u.EVENT)return false;var t=e.structuredContent;return o(t.startDate).diff(t.endDate,"days")},_isEventPartOfDay:function(e,t){if(e.recordType!==u.EVENT)return o(e.addedOn).isSame(t,"day");var a=e.structuredContent;return o(t).isBetween(a.startDate,a.endDate,"day","[]")},_isSameDay:function(e,t){if(e.recordType!==u.EVENT)return true;return o(e.structuredContent.startDate).isSame(t,"day")},_getEventsOfDay:function(e,t){if(n.Lang.isArray(e)&&e.length>0)return n.Array.filter(e,function(e){return this._isEventPartOfDay(e,t)},this);return[]},_getEventDisplayTime:function(e){var t=s(e);return c(t,"h:mma").trim()}},{NS:"calendarPlugin"});var r=n.Squarespace.SquarespaceCalendarRenderer=n.Base.create("squarespaceCalendarRenderer",n.Squarespace.CalendarBaseRenderer,[],{initializer:function(e){this.host.set("headerRenderer",n.bind(this._renderHeader,this));this._loadingSpinner=new n.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.host.get("contentBox")});this.onceAfterHostEvent("eventsChange",this._renderCalendar);this.onceAfterHostEvent("fetchEventsFailure",function(){this._loadingSpinner&&this._loadingSpinner.destroy(true);this.host.destroy()},this);this._bindUI()},destructor:function(){this._loadingSpinner&&this._loadingSpinner.destroy(true);this._resizeEvent.detach()},_bindUI:function(){this._resizeEvent=n.on("resize",this._syncUI,n.config.win,this)},_syncUI:function(){if(this.host.get("contentBox").getDOMNode()){this._fitToContainer();this._setupCells();this.host.get("contentBox").hasClass(r.COMPACT_LAYOUT_CLASS)||this._loadImages();this._setFlyoutHeights()}},_onEventsChange:function(e){var t=n.bind(this._calendarFilterFunction,this);var a={all:{all:{all:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}}}};this.host.set("customRenderer",{rules:a,filterFunction:t});this.get("isRendered")&&this._syncUI()},_calendarFilterFunction:function(e,t,a){r.superclass._calendarFilterFunction.apply(this,arguments);a.indexOf("sunday")>=0?t.addClass("sunday"):a.indexOf("monday")>=0?t.addClass("monday"):a.indexOf("friday")>=0?t.addClass("friday"):a.indexOf("saturday")>=0&&t.addClass("saturday")},_fitToContainer:function(){var e=this.host.get("contentBox");var t=e.get("offsetWidth");e.toggleClass(r.SMALL_LAYOUT_CLASS,t<=770);e.toggleClass(r.COMPACT_LAYOUT_CLASS,t<=600);e.toggleClass(r.TINY_LAYOUT_CLASS,t<=300)},_setupHeader:function(){var e=this.host.get("contentBox");e.one(".yui3-calendar-header-label").wrap("<h1></h1>")},_setupCells:function(){var e=this.host.get("contentBox").one("table");e.setStyle("width",null);var t=e.getDOMNode();var a=t.offsetWidth;var i=t.parentElement;if(i){var n=i.offsetWidth;a=Math.min(a,n)}var s=7;var r=s+1;this.cellSpacing=parseInt(e.getComputedStyle("borderSpacing"),10);var o=this.cellSpacing*r;var l=parseInt((a-o)/s,10);var c=l*s+o;var d=Math.min(a,c);e.setStyle("width",d);var u=parseInt(d/s,10)-this.cellSpacing;e.all("td").setStyles({width:u,height:u})},_loadImages:function(){this.host.get("contentBox").all("img[data-src]").each(function(e){ImageLoader.load(e,{mode:"fill",load:true})},this)},_setFlyoutHeights:function(){this.host.get("contentBox").all(".flyoutitemlist--hasmorecontent").each(function(e){var t=e.ancestor("tr");var a=this._getRowHeight(t);var i;i=e.ancestor("tr:nth-child(4)")||e.ancestor("tr:nth-child(5)")||e.ancestor("tr:nth-child(6)")?this._getRowHeight(t.previous("tr")):this._getRowHeight(t.next("tr"));e.setStyle("height",a+i+this.cellSpacing)},this);this.host.get("contentBox").all("tr").removeAttribute("data-row-height")},_getRowHeight:function(e){if(e.getAttribute("data-row-height"))return parseInt(e.getAttribute("data-row-height"),10);var t=e.get("offsetHeight");e.setAttribute("data-row-height",t);return t},_renderCalendar:function(){this._setupHeader();this._syncUI();this._loadingSpinner&&this._loadingSpinner.destroy(true);this.host.get("boundingBox").addClass("loaded");this.set("isRendered",true)},_renderHeader:function(e){return l(e,t)},_renderDay:function(e,t,a){this.setAttrs({date:e,node:t,events:this._groupEvents(a,e)});this._highlightToday();this._highlightDaysWithEvents();var i=this._getTemplateInfo();var n=i.template(this._getHBTemplateContext());t.empty().append(n)},_highlightToday:function(){var e=new Date;var t=d(e);this.get("date").setHours(0,0,0,0)===t.setHours(0,0,0,0)&&this.get("node").addClass(r.TODAY_CLASS)},_highlightDaysWithEvents:function(){this.get("events").length>0&&this.get("node").addClass(r.HAS_EVENT_CLASS)},_getTemplateInfo:function(){return{template:n.Squarespace.UITemplates.getCompiledTemplate(r.HANDLEBARS_TEMPLATE)}},_getHBTemplateContext:function(){return{date:this.get("date"),events:this.get("events")}},_groupEvents:function(e,t){var a=[];var i=[];n.Array.each(e,function(e){if(this._isSameDay(e,t))a.unshift(e);else{e.isSubsequentDayOfMultidayEvent=true;i.unshift(e)}this._isMultidayEvent(e)&&(e.isMultiday=true)},this);return i.concat(a)}},{NS:"calendarPlugin",TODAY_CLASS:"today",HAS_EVENT_CLASS:"has-event",SMALL_LAYOUT_CLASS:"small-layout",COMPACT_LAYOUT_CLASS:"compact-layout",TINY_LAYOUT_CLASS:"tiny-layout",HANDLEBARS_TEMPLATE:"calendar-day.html"});n.Handlebars.registerHelper("day-of-month-format",function(e,t){return l(e,t.hash.format||"LLL")});n.Handlebars.registerHelper("date-format",function(e,t){return c(e,t.hash.format||"LLL")});n.Handlebars.registerHelper("calendar-compact-time-format",function(e){var t="PM"===c(e,"A")?"p":"a";return 0===new Date(e).getMinutes()?c(e,"h")+t:c(e,"h:mm")+t})},"1.0",{requires:["base","intl","squarespace-calendar-base-lang","squarespace-datatype-date-format","calendar","node","squarespace-attr-validators","squarespace-calendar-day-template","squarespace-spinner","squarespace-ui-base","squarespace-ui-templates","squarespace-widgets-alert"]})},5447:function(e,t,a){var i=a(5078);YUI.add("squarespace-calendar-base-lang",function(e){e.Intl.add("calendar-base","en",{very_short_weekdays:i.WEEKDAYS_SHORT,first_weekday:0,weekends:[0,6]})},"1")},5448:function(e,t,a){var i=a(5078);var n=a(24).t;YUI.add("squarespace-datatype-date-format",function(e){e.Intl.add("datatype-date-format","en",{a:i.WEEKDAYS_SHORT,A:[n("Sunday"),n("Monday"),n("Tuesday"),n("Wednesday"),n("Thursday"),n("Friday"),n("Saturday")],b:[n("Jan"),n("Feb"),n("Mar"),n("Apr"),n("May"),n("Jun"),n("Jul"),n("Aug"),n("Sep"),n("Oct"),n("Nov"),n("Dec")],B:[n("January"),n("February"),n("March"),n("April"),n("May"),n("June"),n("July"),n("August"),n("September"),n("October"),n("November"),n("December")],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"1")},5452:function(e,t){YUI.add("squarespace-calendar-day-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["calendar-day.html"]=e(function(e,t,r,a,i){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,e.helpers);i=i||{};var n="",s,o,l,c=this,d="function",u=this.escapeExpression,g=r.helperMissing,p=r.blockHelperMissing;function h(e,t){var a="",i,n;a+="\n\t";n=r["if"].call(e,(i=(i=e.events,null==i||false===i?i:i[1]),null==i||false===i?i:i.title),{hash:{},inverse:c.program(4,m,t),fn:c.program(2,f,t),data:t});(n||0===n)&&(a+=n);a+="\n";return a}function f(e,t){var a="";return a}function m(e,t){var a="",i,n;a+='\n\t<div class="background';n=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(5,v,t),data:t});(n||0===n)&&(a+=n);a+='">\n    <a href="'+u((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.fullUrl),typeof i===d?i.apply(e):i))+'" class="background-image-link">\n      <img\n        alt="'+u((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.title),typeof i===d?i.apply(e):i))+'"\n        data-src="'+u((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.assetUrl),typeof i===d?i.apply(e):i))+'"\n        data-image-dimensions="'+u((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.originalSize),typeof i===d?i.apply(e):i))+'"\n        data-load="false"\n        class="background-image"\n      >\n    </a>\n\t</div>\n\t';return a}function v(e,t){return" background--iseventscollection"}function b(e,t){var a="",i,n,s;a+='\n<ul class="itemlist';n=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(8,y,t),data:t});(n||0===n)&&(a+=n);a+='">\n\t';s={hash:{},inverse:c.noop,fn:c.program(10,S,t),data:t};if(n=r.events)n=n.call(e,s);else{n=e.events;n=typeof n===d?n.apply(e):n}r.events||(n=p.call(e,n,s));(n||0===n)&&(a+=n);a+='\n</ul>\n\n<ul class="\n\tflyoutitemlist\n\t';n=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(17,E,t),data:t});(n||0===n)&&(a+=n);a+="\n\t";n=r["if"].call(e,(i=(i=e.events,null==i||false===i?i:i[1]),null==i||false===i?i:i.title),{hash:{},inverse:c.program(21,w,t),fn:c.program(19,k,t),data:t});(n||0===n)&&(a+=n);a+='\n">\n\t';s={hash:{},inverse:c.noop,fn:c.program(28,L,t),data:t};if(n=r.events)n=n.call(e,s);else{n=e.events;n=typeof n===d?n.apply(e):n}r.events||(n=p.call(e,n,s));(n||0===n)&&(a+=n);a+='\n</ul>\n\n<div class="itemcount">'+u((i=(i=e.events,null==i||false===i?i:i.length),typeof i===d?i.apply(e):i))+"</div>\n";return a}function y(e,t){return" itemlist--iseventscollection"}function S(e,t){var a="",i,n,s;a+='\n\t<li class="item';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(11,q,t),data:t});(i||0===i)&&(a+=i);i=r["if"].call(e,e.isSubsequentDayOfMultidayEvent,{hash:{},inverse:c.noop,fn:c.program(13,_,t),data:t});(i||0===i)&&(a+=i);a+='">\n\t\t<a href="';if(i=r.fullUrl)i=i.call(e,{hash:{},data:t});else{i=e.fullUrl;i=typeof i===d?i.apply(e):i}a+=u(i)+'" class="item-link">\n\t\t\t<span class="item-time item-time--12hr">';s={hash:{},data:t};a+=u((i=r["calendar-compact-time-format"]||e["calendar-compact-time-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):g.call(e,"calendar-compact-time-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+'&nbsp;</span>\n\t\t\t<span class="item-time item-time--24hr">';s={hash:{format:"H:mm"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+'&nbsp;</span>\n\t\t\t<span class="item-title">';if(n=r.title)n=n.call(e,{hash:{},data:t});else{n=e.title;n=typeof n===d?n.apply(e):n}(n||0===n)&&(a+=n);a+="</span>\n\t\t\t";n=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(15,C,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t</a>\n\t</li>\n\t";return a}function q(e,t){return" item--multiday"}function _(e,t){return" item--ongoing"}function C(e,t){var a="",i,n;a+='<span class="item-enddate">&nbsp;';n={hash:{format:"ll"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"</span>";return a}function E(e,t){return" flyoutitemlist--iseventscollection"}function k(e,t){return"\n\t\tflyoutitemlist--hasmorecontent\n\t"}function w(e,t){var a="",i,n;a+="\n\t\t";n={hash:{},inverse:c.noop,fn:c.program(22,T,t),data:t};if(i=r.events)i=i.call(e,n);else{i=e.events;i=typeof i===d?i.apply(e):i}r.events||(i=p.call(e,i,n));(i||0===i)&&(a+=i);a+="\n\t";return a}function T(e,t){var a="",i;a+="\n\t\t\t";i=r["if"].call(e,e.excerpt,{hash:{},inverse:c.program(25,A,t),fn:c.program(23,I,t),data:t});(i||0===i)&&(a+=i);a+="\n\t\t";return a}function I(e,t){return"\n\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t"}function A(e,t){var a="",i,n;a+="\n\t\t\t\t";n=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine1),{hash:{},inverse:c.noop,fn:c.program(26,x,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t\t";return a}function x(e,t){return"\n\t\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t\t"}function L(e,t){var a="",i,n;a+='\n\t<li class="flyoutitem';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(29,D,t),data:t});(i||0===i)&&(a+=i);i=r["if"].call(e,e.isSubsequentDayOfMultidayEvent,{hash:{},inverse:c.noop,fn:c.program(31,N,t),data:t});(i||0===i)&&(a+=i);a+='">\n\t\t<h1 class="flyoutitem-title"><a href="';if(i=r.fullUrl)i=i.call(e,{hash:{},data:t});else{i=e.fullUrl;i=typeof i===d?i.apply(e):i}a+=u(i)+'" class="flyoutitem-link">';if(i=r.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===d?i.apply(e):i}(i||0===i)&&(a+=i);i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(33,O,t),data:t});(i||0===i)&&(a+=i);a+='&nbsp;<span class="flyoutitem-link-arrow"></span></a></h1>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--12hr">\n\t\t\t';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.program(37,P,t),fn:c.program(35,R,t),data:t});(i||0===i)&&(a+=i);a+='\n\t\t</div>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--24hr">\n\t\t\t';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.program(41,M,t),fn:c.program(39,B,t),data:t});(i||0===i)&&(a+=i);a+='\n\t\t</div>\n\t\t<div class="flyoutitem-location">\n\t\t\t';n=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressTitle),{hash:{},inverse:c.noop,fn:c.program(43,F,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t\t";n=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine1),{hash:{},inverse:c.noop,fn:c.program(45,U,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t\t";n=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine2),{hash:{},inverse:c.noop,fn:c.program(47,V,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t\t";n=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressCountry),{hash:{},inverse:c.noop,fn:c.program(49,z,t),data:t});(n||0===n)&&(a+=n);a+="\n\t\t</div>\n\t\t";n=r["if"].call(e,e.excerpt,{hash:{},inverse:c.noop,fn:c.program(51,H,t),data:t});(n||0===n)&&(a+=n);a+="\n\t</li>\n\t";return a}function D(e,t){return" flyoutitem--multiday"}function N(e,t){return" flyoutitem--ongoing"}function O(e,t){var a="",i,n;a+=' <span class="flyoutitem-enddate">';n={hash:{format:"ll"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"</span>";return a}function R(e,t){var a="",i,n;a+="\n\t\t\t\t";n={hash:{format:"ddd, MMM D, h:mma"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+" &ndash; ";n={hash:{format:"ddd, MMM D, h:mma"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"\n\t\t\t";return a}function P(e,t){var a="",i,n;a+="\n\t\t\t\t";n={hash:{format:"LT"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+" &ndash; ";n={hash:{format:"LT"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"\n\t\t\t";return a}function B(e,t){var a="",i,n;a+="\n\t\t\t\t";n={hash:{format:"ddd, MMM D, H:mm"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+" &ndash; ";n={hash:{format:"ddd, MMM D, H:mm"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"\n\t\t\t";return a}function M(e,t){var a="",i,n;a+="\n\t\t\t\t";n={hash:{format:"H:mm"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+" &ndash; ";n={hash:{format:"H:mm"},data:t};a+=u((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),n):g.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),n)))+"\n\t\t\t";return a}function F(e,t){var a="",i;a+='<div class="flyoutitem-location-addresstitle">'+u((i=(i=e.location,null==i||false===i?i:i.addressTitle),typeof i===d?i.apply(e):i))+"</div>";return a}function U(e,t){var a="",i;a+='<div class="flyoutitem-location-address1">'+u((i=(i=e.location,null==i||false===i?i:i.addressLine1),typeof i===d?i.apply(e):i))+"</div>";return a}function V(e,t){var a="",i;a+='<div class="flyoutitem-location-address2">'+u((i=(i=e.location,null==i||false===i?i:i.addressLine2),typeof i===d?i.apply(e):i))+"</div>";return a}function z(e,t){var a="",i;a+='<div class="flyoutitem-location-addresscountry">'+u((i=(i=e.location,null==i||false===i?i:i.addressCountry),typeof i===d?i.apply(e):i))+"</div>";return a}function H(e,t){var a="",i;a+='<div class="flyoutitem-excerpt">';if(i=r.excerpt)i=i.call(e,{hash:{},data:t});else{i=e.excerpt;i=typeof i===d?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>";return a}o=r["if"].call(t,(s=(s=t.events,null==s||false===s?s:s[0]),null==s||false===s?s:s.systemDataId),{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});(o||0===o)&&(n+=o);n+='\n\n<div class="marker">\n\t<div class="marker-dayname">';l={hash:{format:"ddd"},data:i};n+=u((s=r["day-of-month-format"]||t["day-of-month-format"],s?s.call(t,t.date,l):g.call(t,"day-of-month-format",t.date,l)))+'</div>\n\t<div class="marker-daynum">';l={hash:{format:"D"},data:i};n+=u((s=r["day-of-month-format"]||t["day-of-month-format"],s?s.call(t,t.date,l):g.call(t,"day-of-month-format",t.date,l)))+"</div>\n</div>\n\n";o=r["if"].call(t,t.events,{hash:{},inverse:c.noop,fn:c.program(7,b,i),data:i});(o||0===o)&&(n+=o);n+="\n";return n})})();var t="calendar-day.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},5454:function(e,t){YUI.add("squarespace-models-form",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.Form=t.Base.create("form",t.Squarespace.Models.FormBase,[],{serialize:function(){var e=a.superclass.serialize.call(this);return t.JSON.stringify(e)}});t.Squarespace.Models.FormList=t.Base.create("formList",t.ModelList,[t.Squarespace.ModelSync.REST],{model:t.Squarespace.Models.Form,filterByType:function(t){return this.filter(function(e){return e.get("type")===t})}});t.Squarespace.FormCache=new t.Squarespace.Models.FormList},"1.0",{requires:["base","json","model","model-list","squarespace-model-sync-rest","squarespace-models-form-base"]})},5455:function(e,t,a){var n=a(24).t;var s=a(2611);var r=a(2610);var o=a(5071);var l=a(683);var c=a(211);YUI.add("squarespace-models-form-base",function(i){var a=function(e){if(i.Lang.isArray(e))return e;var a=[];i.Object.each(e,function(e,t){!e||e.connectionState!==c.CONNECTED&&e.connectionState!==c.PENDING||a.push(i.merge({_type:t},e))});return a};i.namespace("Squarespace.Models");i.Squarespace.Models.FormBase=i.Base.create("formBase",i.Model,[i.Squarespace.ModelSync.REST],{root:i.Squarespace.REST_API_ROOT+"forms",url:i.Squarespace.REST_API_ROOT+"forms/{id}",serialize:function(){var e=this.toJSON();e.fields=i.Array.map(e.fields,function(e){return i.JSON.stringify(e)});e.submissionMessage=i.JSON.stringify(e.submissionMessage);e.disclaimerMessage=i.JSON.stringify(e.disclaimerMessage);var t=e.backendConnectionConfigs;delete e.backendConnectionConfigs;delete e.connectedBackends;return{form:e,backendConnectionConfigs:t||[],removedBackends:this.get("removedConnectedBackends")}},getConnBackend:function(t){var e=this.get("connectedBackends");if(!i.Lang.isValue(e))return[];return i.Array.filter(e,function(e){return e.backendType===t})}},{ATTRS:{id:{value:null},type:{value:i.Squarespace.FormType.FORM_BLOCK,validator:i.Squarespace.AttrValidators.isValueIn(i.Squarespace.FormType)},name:{value:n("New Form"),validator:i.Squarespace.AttrValidators.isString},fields:{value:[],setter:function(e){return i.Array.map(e,function(e){if(i.Lang.isString(e))return i.JSON.parse(e);return e},this)},validator:i.Squarespace.AttrValidators.isArray},connectedBackends:{value:null,validator:i.Squarespace.AttrValidators.isNullOrArray},submitButtonText:{value:n("Submit"),validator:i.Squarespace.AttrValidators.isString},submissionMessage:{value:{html:n("Thank you!")},setter:function(e){return i.Lang.isString(e)?i.JSON.parse(e):e}},disclaimerMessage:{valueFn:function(){return this.get("type")===i.Squarespace.FormType.NEWSLETTER_BLOCK||this.get("type")===i.Squarespace.FormType.SLIDE?{html:n("We respect your privacy.")}:{html:""}},setter:function(e){return i.Lang.isString(e)?i.JSON.parse(e):e}},submissionHTML:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},successRedirect:{value:"",setter:function(e){if(e){if("string"===typeof e)return e;if("object"===typeof e)return e.url}return""},validator:i.Squarespace.AttrValidators.isNullOrString},backendConnectionConfigs:{value:[],setter:function(e){var t=a(e);this.set("removedConnectedBackends",o.calculateRemoved(this.get("connectedBackends"),t));return i.Array.filter(t,function(e){return!(e.backendType===l.ZAPIER&&e.connectionState===c.CONNECTED)})}},removedConnectedBackends:{value:[],validator:i.Squarespace.AttrValidators.isArray},captchaEnabled:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},captchaTheme:{value:r.LIGHT,validator:i.Squarespace.AttrValidators.isValueIn(r)},captchaAlignment:{value:s.LEFT,validator:i.Squarespace.AttrValidators.isValueIn(s)}}})},"1.0",{requires:["base","json","model","model-list","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},5475:function(e,t){YUI.add("squarespace-search-result-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["search-result.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n<div class="search-result clear" itemid="';if(i=n.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n  <div class="sqs-search-container-item sqs-search-ui-item sqs-post ';i=n["if"].call(e,e.recordTypeName,{hash:{},inverse:c.noop,fn:c.program(2,u,t),data:t});(i||0===i)&&(a+=i);a+=" ";if(i=n.documentType)i=i.call(e,{hash:{},data:t});else{i=e.documentType;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n    ';i=n["if"].call(e,e.imageUrl,{hash:{},inverse:c.noop,fn:c.program(4,g,t),data:t});(i||0===i)&&(a+=i);a+='\n    <div class="sqs-main-content">\n      <div class="sqs-title">';if(i=n.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+='</div>\n      <div class="sqs-content">\n        ';i=n.each.call(e,e.highlight,{hash:{},inverse:c.noop,fn:c.program(6,p,t),data:t});(i||0===i)&&(a+=i);a+="\n      </div>\n    </div>\n  </div>\n</div>\n";return a}function u(e,t){var a="",i;a+="sqs-post-type-";if(i=n.recordTypeName)i=i.call(e,{hash:{},data:t});else{i=e.recordTypeName;i=typeof i===o?i.apply(e):i}a+=l(i);return a}function g(e,t){var a="",i;a+='\n    <div class="sqs-main-image-container">\n      <div class="sqs-main-image-intrinsic">\n        <div class="sqs-main-image content-fill">\n          <img data-src="';if(i=n.imageUrl)i=i.call(e,{hash:{},data:t});else{i=e.imageUrl;i=typeof i===o?i.apply(e):i}a+=l(i)+'" data-image-focal-point="'+l((i=(i=e.mediaFocalPoint,null==i||false===i?i:i["x"]),typeof i===o?i.apply(e):i))+","+l((i=(i=e.mediaFocalPoint,null==i||false===i?i:i["y"]),typeof i===o?i.apply(e):i))+'"/>\n        </div>\n      </div>\n    </div>\n    ';return a}function p(e,t){var a="",i;a+="\n        <span>";i=typeof e===o?e.apply(e):e;(i||0===i)&&(a+=i);a+="</span>\n        <span>&hellip;</span>\n        ";return a}r=n.each.call(t,t.items,{hash:{},inverse:c.noop,fn:c.program(1,d,i),data:i});(r||0===r)&&(s+=r);s+="\n";return s})})();var t="search-result.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},5476:function(e,t){YUI.add("squarespace-hb-compare",function(e){e.Handlebars.registerHelper("if_eq",function(e,t){if(e===t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_eq",function(e,t){if(e===t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_gt",function(e,t){if(e>t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_gt",function(e,t){if(e>t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_lt",function(e,t){if(e<t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_lt",function(e,t){if(e<t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_gteq",function(e,t){if(e>=t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_gteq",function(e,t){if(e>=t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_lteq",function(e,t){if(e<=t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_lteq",function(e,t){if(e<=t.hash.compare)return t.inverse(this);return t.fn(this)})},"1.0",{requires:["handlebars-base"]})},5477:function(e,t,a){var p=a(24).t;var h=a(802);var f=a(870);var m=a(2363);var v=a(1921);var b=a(5058);var y=a(86);YUI.add("squarespace-google-domains-utils",function(o){o.namespace("Squarespace.GoogleDomains");var n=function(e){o.Lang.isString(e)||(e="");var t=new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:'<div class="bigtext"><div class="title">'+p("Failed to add domain")+'</div><div class="description">'+e+'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:true});t.show()};o.Squarespace.GoogleDomains.initialize=function(){var e=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();if(o.Lang.isNull(e.userId)||o.Lang.isNull(e.domainName))return;o.Squarespace.SessionStorage.saveSessionData("googleDomain",e,(new Date).addDays(7))};o.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var e=o.QueryString.parse(window.location.search.substr(1));return{userId:e.userId||null,domainName:e.domainName||null}};o.Squarespace.GoogleDomains.getGoogleDomainSessionData=function(){return o.Squarespace.SessionStorage.getSessionData("googleDomain")};o.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var e=this.getGoogleDomainSessionData();if(o.Lang.isObject(e))return true;e=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();if(!o.Lang.isNull(e.userId)&&!o.Lang.isNull(e.domainName))return true;return false};o.Squarespace.GoogleDomains.showConfirmMessage=function(e,t,a){var i=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();var n=i.userId;var s="http://"+window.location.hostname;var r=new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:h('<div class="bigtext"><div class="title">'+p("Connect Domain: {domainName}")+'</div><div class="description">'+p("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.")+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+p("Connect Domain")+'"/></div></div>',{domainName:t,url:s}),noHeightConstrain:true});r.show();r.getContentEl().on("click",function(){r.hide();a(e,n,t)})};o.Squarespace.GoogleDomains.startConsentFlow=function(e,t,a){var i=new o.Squarespace.Spinner({color:"light",size:"large",render:o.one(".spinner-wrapper")});i.spin();o.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");return o.Squarespace.GoogleDomainsConsentService.getConsent(a,t,e).then(function(e){var t=new o.Squarespace.Domains.Models.Domain({name:a,type:f.LINKED,providerId:m.GOOGLE,providerData:{userId:e.userId,accessToken:e.accessToken,subId:e.subId,email:e.email}});t.save({},function(e){i.stop();if(o.Lang.isValue(e)){n(e.responseJSON.message);return}window.location="/config"})},function(e){o.Squarespace.Analytics.trackInternal("domain_link_domain_failure",{host:"google"});i.stop();n(e)})};function t(e){var t="http://"+window.location.hostname;return new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:h('<div class="bigtext"><div class="title">'+p("Connect Domain: {domainName}")+'</div><div class="description">'+p("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.")+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+p("Connect Domain")+'"/></div></div>',{domainName:e,url:t}),noHeightConstrain:true})}function s(){var e=new o.Squarespace.Spinner({color:"light",size:"large",render:o.one(".spinner-wrapper")});e.spin();return e}function i(e){return v.createLinkedDomain({name:e,type:f.LINKED,providerId:m.GOOGLE})}function r(){return window.open("","_blank","status=0,width=780,height=785,left=400,top=400")}function l(a){return new o.Promise(function(e){var t=setInterval(function(){if(a.closed){clearInterval(t);e()}},1e3)})}function c(e){return y.get("/api/domain-connect/"+e.id)}function d(e){e.closed||e.close()}function u(t,a){return new o.Promise(function(e){a.location=t.url;e()})}function g(e,a){var t;return i(e).then(function(e){t=e.data;return b.getStrategy(t.name)}).then(function(e){var t=e.data;return u(t,a)}).then(function(){return l(a)}).then(function(){return c(t)}).then(function(e){if(!e.data.success)throw"Google reported an error."})}o.Squarespace.GoogleDomains.googleInitiatedDomainConnect=function(e){var i=t(e);i.show();i.getContentEl().on("click",function(){i.hide();var t=s();o.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");var a=r();g(e,a).then(function(){window.location="/config"}).catch(function(e){d(a);t.stop();n(e)})})}},"1.0",{requires:["querystring","squarespace-domains-models-domain","squarespace-google-domains-consent-service","squarespace-session-storage","squarespace-spinner","squarespace-ui-base","squarespace-util"]})},5478:function(e,t,a){var o=a(24).t;YUI.add("squarespace-google-domains-consent-service",function(s){s.namespace("Squarespace");var n="https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}";var r="https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}";var a="https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}";var i="https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}";s.Squarespace.GoogleDomainsConsentService=new(s.Base.create("domainConsentService",s.Base,[],{initializer:function(){this._openWindows={};this._messageCallbacks={};this._messageEventHandler=window.addEventListener("message",s.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler);this._endMonitor()},getConsent:function(e,i,n){return s.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openConsentWindow(e,i,n)},this)},getConsentForNewSite:function(e,i){return s.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openSignupConsentWindow(e,i)},this)},getConsentForDomain:function(e){return s.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a(e)};this._openListConsentWindow(e)},this)},getDomainOnlyConsent:function(e,i,n){return s.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openDomainConsentOnlyWindow(e,i,n)},this)},getConsentForList:function(){return s.Squarespace.Promises.create(function(t,a){var e=s.guid();this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openListConsentWindow(e)},this)},_routeMessage:function(e){var t=e.data.domain;if(s.Lang.isString(t)){var a=this._messageCallbacks[t];if(s.Lang.isFunction(a)){a.call(this,e.data);delete this._messageCallbacks[t]}}},_registerOpenWindow:function(e,t){s.Object.size(this._openWindows)<=0&&this._beginMonitor();this._openWindows[e]=t},_unregisterOpenWindow:function(e){delete this._openWindows[e];s.Object.size(this._openWindows)<=0&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=s.later(300,this,function(){var a=[];s.Object.each(this._openWindows,function(e,t){if(e.closed){this._routeMessage({data:{domain:t,consentGranted:false}});a.push(t)}},this);s.Array.each(a,this._unregisterOpenWindow,this)},null,true)},_openListConsentWindow:function(e){var t=s.Lang.sub(a,{identifier:e,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(t,e)},_openDomainConsentOnlyWindow:function(e,t,a){var i=s.Lang.sub(r,{requestId:t,domain:e,websiteId:a,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(i,e)},_openConsentWindow:function(e,t,a){var i=s.Lang.sub(n,{domain:e,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:a||"",userId:t});this._openConsentPopup(i,e)},_openSignupConsentWindow:function(e,t){var a=s.Lang.sub(i,{domain:e,userId:t,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(a,e)},_openConsentPopup:function(e,t){var a=window.open(e,o("Google Domains Consent"),"status=0,width=1020,height=520");this._registerOpenWindow(t,a)}}))},"1.0",{requires:["base","promise","squarespace-promises"]})},5479:function(e,t,a){var o=a(128);YUI.add("squarespace-session-storage",function(s){s.namespace("Squarespace");var r=function(){return s.Lang.isValue(window.localStorage)};s.Squarespace.SessionStorage={saveSessionData:function(e,t,a){var i={value:t};s.Lang.isDate(a)?i.expires=a.getTime():a=null;var n=btoa(s.JSON.stringify(i));r()?window.localStorage.setItem(e,n):null===a?o.set(e,n,{path:"/"}):o.set(e,n,{path:"/",expires:a})},getSessionData:function(e){var t;t=r()?window.localStorage.getItem(e):o.get(e);if(!s.Lang.isValue(t))return null;var a=s.JSON.parse(atob(t));if(s.Lang.isNumber(a.expires)&&a.expires<(new Date).getTime()){r()&&window.localStorage.removeItem(e);return null}return a.value},removeSessionData:function(e){r()?window.localStorage.removeItem(e):o.set(e,"",{expires:new Date(0)})}}},"1.0",{requires:["base"]})},5480:function(e,t,a){var d={website:{actions:a(1343),store:a(411)},websiteSettings:{actions:a(1570),store:a(794)}};YUI.add("squarespace-context",function(e){var l=true;var c=e.config.win===window;e.namespace("Squarespace");function t(r,o){return function(e){if(e instanceof r)return e;var t=new r(e);var a=d[o]||{};var i=a.store;var n=a.actions;var s=false;if(l&&c&&i&&n){i.listen(function(e){s=true;t.setAttrs(e.serializeToModel?e.serializeToModel():e.toJS())});t.after("change",function(a){if(!s){var e=Object.keys(a.changed).reduce(function(e,t){e[t]=a.changed[t].newVal;return e},{});n.update(e)}s=false})}return t}}var a=e.Base.create("squarespaceContext",e.Model,[],{},{ATTRS:{authenticatedAccount:{setter:t(e.Squarespace.Models.MemberAccount,"memberAccount"),lazyAdd:false},website:{setter:t(e.Squarespace.Models.Website,"website"),lazyAdd:false},websiteSettings:{setter:t(e.Squarespace.Models.WebsiteSettings,"websiteSettings"),lazyAdd:false},templateInstallation:{setter:t(e.Squarespace.Models.TemplateInstallation,"templateInstallation"),lazyAdd:false},billingStatus:{}}});if(e.Squarespace.Utils.isInDamaskFrame()){e.Squarespace.Context=e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Context");return}e.Squarespace.Context={getInstance:function(){var t=null;return function(e){null===t&&(t=new a(e));return t}}(),init:function(e){this.getInstance(e)}};Static.SQUARESPACE_CONTEXT&&e.Squarespace.Context.init(Static.SQUARESPACE_CONTEXT)},"1.0",{requires:["base","model","node","squarespace-models-member-account","squarespace-models-template-installation","squarespace-util","squarespace-models-website","squarespace-models-website-settings"]})},5481:function(e,t,a){var o=a(731);var l=a(1599);var c=a(1004);YUI.add("squarespace-models-member-account",function(i){var e=i.namespace("Squarespace.Models").MemberAccount=i.Base.create("MemberAccount",i.Model,[i.Squarespace.ModelSync.REST],{root:"/api/member-accounts",serialize:function(){return i.JSON.stringify(this._getServerRelevantFields())},_getServerRelevantFields:function(){var e=i.Array.reduce(["id","firstName","lastName","displayName","websiteUrl","bio","email","avatarId","siteTemplateInstallationPreviews","pseudonymAccount","notificationsRead","tutorialsCompleted","guilds","flags"],{},function(e,t){e[t]=this.get(t);return e},this);i.Lang.isObject(e.notificationsRead)&&(e.notificationsRead=i.Object.keys(e.notificationsRead));i.Lang.isObject(e.tutorialsCompleted)&&(e.tutorialsCompleted=i.Object.keys(e.tutorialsCompleted));return e},isMe:function(){return this.get("id")===Static.SQUARESPACE_CONTEXT.authenticatedAccount.id},setPreviewInstallationId:function(e){var t=i.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]);if(i.Lang.isValue(e))this.set("siteTemplateInstallationPreviews."+t,e);else{var a=this.get("siteTemplateInstallationPreviews");delete a[t];this.set("siteTemplateInstallationPreviews",a)}},getPreviewInstallationId:function(){return this.get("siteTemplateInstallationPreviews."+i.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]))}},{ATTRS:{notificationsRead:{value:{}}}});i.namespace("Squarespace.Singletons");if(Static&&Static.SQUARESPACE_CONTEXT&&Static.SQUARESPACE_CONTEXT.authenticatedAccount){var t=i.Squarespace.Singletons.AuthenticatedMemberAccount=new e(Static.SQUARESPACE_CONTEXT.authenticatedAccount);var a=true;var n=true;var s=c.listen(function(e){if(a){n=false;t.setAttrs(e.toJSON())}a=true});var r=t.after("change",function(e){if(n){var t=o(e.changed,function(e){return e.newVal});a=false;l.update(t)}n=true});i.on("beforeunload",function(){r.detach();s()},this)}else i.Squarespace.Singletons.AuthenticatedMemberAccount=new e({})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-promises"]})},5482:function(e,t,a){var s=a(2201);YUI.add("squarespace-models-template-installation",function(i){var n=i.namespace("Squarespace.Models").TemplateInstallation=i.Base.create("TemplateInstallation",i.Model,[i.Squarespace.ModelSync.REST],{url:"/api/template-installations/{id}",root:"/api/template-installations",getThumbnailAssetUrl:function(e){var t=this.get("templateWebsiteTaxonomy.thumbnailAssetUrl");i.Lang.isValue(t)?t+="?format="+e:t="/universal/images-v6/configuration/no-image.png";return t},serialize:function(){var e=this.toJSON();delete e.templateWebsite;return i.JSON.stringify(e)}},{ATTRS:{templateId:{validator:i.Lang.isString},displayName:{valueFn:function(){var e=this.get("templateWebsiteTaxonomy.displayName");i.Lang.isValue(e)||(e=this.get("templateWebsite.siteTitle"));return e}},isPreviewTemplate:{getter:function(){var e=s.getState().previewInstallationId;return e===this.get("id")}},isLiveTemplate:{getter:function(){var e=s.getState().liveInstallationId;return e===this.get("id")}}},createWithTemplateWebsiteIdentifier:function(e){return new i.Promise(function(t,a){i.Data.post({url:"/api/template-installations/addTemplate",data:{templateWebsiteIdentifier:e},success:function(e){t(new n(e))},failure:function(e){a(e)}})})}});var e=i.Base.create("TemplateInstallationList",i.ModelList,[i.ModelSync.REST],{model:n,url:"/api/template-installations",initializer:function(){},sort:function(){var e=this.toArray();var t=e.find(function(e){return e.get("isPreviewTemplate")});if(t){e.splice(e.indexOf(t),1);e.unshift(t)}var a=e.find(function(e){return e.get("isLiveTemplate")});if(a){e.splice(e.indexOf(a),1);e.unshift(a)}this._defResetFn({models:e,src:"sort"});return this},getPreviewInstallation:function(){var e=s.getState().previewInstallationId;return this.getById(e)}},{ATTRS:{}});var t=[];if(Static.SQUARESPACE_CONTEXT){t.push(new n(Static.SQUARESPACE_CONTEXT.templateInstallation));Static.SQUARESPACE_CONTEXT.previewTemplateInstallation&&t.push(new n(Static.SQUARESPACE_CONTEXT.previewTemplateInstallation))}i.namespace("Squarespace.Singletons");i.Squarespace.Singletons.TemplateInstallationListCache=new e({items:t})},"1.0",{requires:["base","model","model-list","promise","squarespace-model-sync-rest"]})},5483:function(e,t,a){var i=a(1236);YUI.add("squarespace-models-website",function(a){var t=a.namespace("Squarespace.Models");t.Website=a.Base.create("website",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"websites/mine",_parsePlanResponse:function(e){var t=e.results;return a.Array.map(t,function(e){var t=e.plan;var a=e.period;return{disabled:e.disabled,planLevel:{genus:e.plan.genus,displayName:t.displayName,allowedPeriods:t.allowedPeriods,value:t.plan,featureLevel:t.featureLevel},planPeriod:{displayName:a.displayName,intervalDays:a.intervalDays,value:a.period},price:e.price,subtotal:e.subtotal,tax:e.tax,taxRate:e.taxRate,total:e.total}})},serialize:function(){var e=this.toJSON();delete e.shareButtonOptions;delete e.logoImage;delete e.mobileLogoImage;delete e.socialLogoImage;delete e.faviconItem;return a.JSON.stringify(e)},parse:function(){var e=t.Website.superclass.parse.apply(this,arguments);if(a.Lang.isObject(e)){e.hasPassword?e.password=i.PASSWORD_MASK:e.password="";if(!e.logoImageId){e.logoImageId=null;e.logoImage=null}if(!e.mobileLogoImageId){e.mobileLogoImageId=null;e.mobileLogoImage=null}if(!e.socialLogoImageId){e.socialLogoImageId=null;e.socialLogoImage=null}if(!e.faviconItemId){e.faviconItemId=null;e.faviconItem=null}}return e},_imageSetterFactory:function(t){return a.bind(function(e){a.Lang.isObject(e)?e instanceof a.Squarespace.Models.ContentItem?this.set(t,e.get("id"),{silent:true}):this.set(t,e.id,{silent:true}):this.set(t,null,{silent:true})},this)}},{ATTRS:{logoImage:{setter:function(e){return this._imageSetterFactory("logoImageId")(e)}},mobileLogoImage:{setter:function(e){return this._imageSetterFactory("mobileLogoImageId")(e)}},socialLogoImage:{setter:function(e){return this._imageSetterFactory("socialLogoImageId")(e)}},faviconItem:{setter:function(e){return this._imageSetterFactory("faviconItemId")(e)}}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-plan","squarespace-util-authenticated"]})},5484:function(e,t){YUI.add("squarespace-models-plan",function(i){var t=["bsnss","unltd","std"];var e=i.namespace("Squarespace.Models");e.Plan=i.Base.create("plan",i.Model,[],{equals:function(e){if(!i.Lang.isValue(e))return false;return this.get("planLevel.value")===e.get("planLevel.value")&&this.get("planPeriod.value")===e.get("planPeriod.value")}},{ATTRS:{planLevel:{},planPeriod:{},price:{},subtotal:{},tax:{},taxRate:{},total:{},annualSubtotalWithMarketingDiscount:{getter:function(){return.625*this.get("subtotal")}},annualTaxWithMarketingDiscount:{getter:function(){return.625*this.get("tax")}},annualTotalWithMarketingDiscount:{getter:function(){return.625*this.get("total")}}}});e.PlanList=i.Base.create("planList",i.ModelList,[i.Squarespace.ModelSync.REST],{model:e.Plan,initializer:function(e){this._productIndex=[];e.items&&i.Array.each(e.items,function(e){e instanceof i.Model&&this._addToIndex(e)},this);this.after("add",this._afterAdd,this);this.after("remove",this._afterRemove,this);this.after("reset",this._afterReset,this)},getProduct:function(e,t){var a=this._productIndex[this._getProductKey(e,t)];return i.Lang.isValue(a)?a:null},getProductsForPlanLevel:function(e){return this.filter(this._filterByPlan(e))},getProductsForPlanPeriod:function(e){return this.filter(this._filterByPeriod(e))},getProductForPlanInterval:function(e,t){var a=this.filter(this._filterByPlan(e));return i.Array.find(a,function(e){return e.get("planPeriod.intervalDays")===t})},getByName:function(t){return i.Array.find(this._items,function(e){return e.get("name")===t})},comparator:function(e){return t.indexOf(e.get("name"))},_filterByPeriod:function(t){return function(e){return e.get("planPeriod.value")===t}},_filterByPlan:function(t){return function(e){return e.get("planLevel.value")===t}},_hashPlan:function(e){return this._getProductKey(e.get("planLevel.value"),e.get("planPeriod.value"))},_getProductKey:function(e,t){return[e,t].join("-")},_afterReset:function(e){this._resetIndex();i.Array.each(e.models,this._addToIndex,this)},_afterRemove:function(e){this._removeFromIndex(e.model)},_afterAdd:function(e){this._addToIndex(e.model)},_resetIndex:function(){this._productIndex={}},_addToIndex:function(e){this._productIndex[this._hashPlan(e)]=e},_removeFromIndex:function(e){delete this._productIndex[this._hashPlan(e)]}})},"1.0",{requires:["base","model","model-list","squarespace-model-sync-rest"]})},5485:function(e,t,a){var i=a(836);YUI.add("squarespace-util-authenticated",function(e){e.namespace("Squarespace");e.Squarespace.UtilAuthenticated={userHasAccessPermission:function(e){return i.hasPermission(e)},isSquarespaceAdmin:function(){return i.isAdmin()}}},"1.0",{requires:["squarespace-util"]})},5486:function(e,t){YUI.add("squarespace-models-website-settings",function(n){var a=n.namespace("Squarespace.Models").WebsiteSettings=n.Base.create("WebsiteSettings",n.Model,[n.Squarespace.ModelSync.REST],{url:"/api/settings",root:"/api/settings",serialize:function(){var e=this.toJSON();e&&n.Lang.isObject(e.tutorialsCompleted)?e.tutorialsCompleted=n.Object.keys(e.tutorialsCompleted):e.tutorialsCompleted=[];"system-default"===e.notFoundPageId&&(e.notFoundPageId=null);return n.JSON.stringify(e)},parse:function(e){var t=a.superclass.parse.apply(this,arguments);t=n.merge({contactPhoneNumber:""},t);return t}},{setNewOwner:function(e,t,a,i){n.Data.put({url:n.Squarespace.API_ROOT+"settings/owner",data:{ownerId:e,password:t},success:function(){n.Squarespace.Context.getInstance().get("websiteSettings").set("ownerId",e);a()},failure:i},this)},ATTRS:{websiteId:{},ownerId:{},tutorialsCompleted:{},lastAgreedTermsOfService:{},type:{},content:{},goals:{},subject:{},country:{},state:{},markdownMode:{},simpleLikingEnabled:{},defaultPostFormat:{},commentLikesAllowed:{},commentAnonAllowed:{},commentThreaded:{},commentApprovalRequired:{},commentAvatarsOn:{},commentSortType:{},commentFlagThreshold:{},commentEnableByDefault:{},commentDisableAfterDaysDefault:{},disqusShortname:{},notFoundPageId:{},homepageTitleFormat:{},collectionTitleFormat:{},itemTitleFormat:{},commentsEnabled:{},amazonAssociateTag:{},contactPhoneNumber:{},contactEmail:{},hours:{},allowSquarespacePromotion:{},storeSettings:{},useEscapeKeyToLogin:{},configurationMenuItems:{},socialAccountDisplayOrder:{validator:n.Lang.isNullOrArray},announcementBarSettings:{value:{}},mobileInfoBarSettings:{value:{}},pinterestOverlayOptions:{value:{}},popupOverlaySettings:{value:{}}}})},"1.0",{requires:["base","model","squarespace-context","squarespace-model-sync-rest"]})},5491:function(e,t){YUI.add("squarespace-dialog-button",function(s){var r=s.namespace("Squarespace.DialogFields").Button=s.namespace("Squarespace.Widgets").Button=s.Base.create("button",s.Squarespace.DialogField2,[s.WidgetChild],{initializer:function(e){this.get("contentBox").addClass(this.get("alignment"));this.publish("click");this.publish("button-click",{broadcast:2})},destructor:function(){if(s.Lang.isValue(this._waiting)){this._waiting.remove(true);this._waiting=null}this._anchorNode=null},bindUI:function(){r.superclass.bindUI.call(this);this.get("boundingBox").on("click",this._handleClick,this);this.on("stringsChange",this._updateStringElements,this);this.after("waitingChange",function(e){this._toggleWaitingSpinner(e.newVal)},this);this.after("isLoadingChange",this.syncUI)},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this._anchorNode=e.one("div.label");var a=this.get("name");t.set("value",this.get("data"));t.set("name",a);var i=this.get("strings.systemName");i&&this.get("boundingBox").addClass("sqs-dialog-button--"+i);var n=this.get("strings.title")||this.get("strings.text");n&&this.get("boundingBox").setAttribute("title",n);this._renderButtonText();this._renderIcon();this._renderSpinner();this._toggleActive(this.get("active")&&s.Lang.isValue(a));this.toggleDisabled(this.get("disabled"))},syncUI:function(){r.superclass.syncUI.call(this);this._toggleWaitingSpinner(this.get("waiting"));this._syncLoading()},setText:function(e){this.set("strings.text",e)},getText:function(){return this.get("strings.text")},setOnClick:function(e,t){s.Lang.isFunction(e)&&this.set("onClick",e);s.Lang.isValue(t)&&this.set("context",t)},disable:function(){this.toggleDisabled(true)},enable:function(){this.toggleDisabled(false)},showWaiting:function(){this._toggleWaitingSpinner(true);this.set("waiting",true)},hideWaiting:function(){this._toggleWaitingSpinner(false);this.set("waiting",false)},toggleDisabled:function(e){this.set("disabled",e);this.get("contentBox").toggleClass("disabled",e)},_toggleActive:function(e){this.set("active",e);this.get("contentBox").toggleClass("active",e)},_toggleWaitingSpinner:function(e){e?this._waiting.show():this._waiting.hide()},_handleClick:function(e){var t=this._anchorNode;if(this.get("disabled")){e.halt();return}var a=this.get("href");a?this.get("newWindow")?window.open(a):window.location=a:s.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context"),e,this):t.fire("click",this.get("active"));this.fire("button-click",{label:this.get("strings.text")||this.get("strings.title"),href:this.get("href")})},_animateTextChange:function(e){var t=new s.Anim({node:this._anchorNode,from:{opacity:0},to:{opacity:1},duration:.2,easing:"easeOut"});var a=new s.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:.2,easing:"easeIn"});t.on("end",s.bind(function(){this._toggleActive(true)},this));a.on("end",s.bind(function(){this._renderButtonText();s.Lang.isNull(this._anchorNode)||t.run()},this));this._toggleActive(false);this._registerAnim(t);this._registerAnim(a);a.run()},_updateStringElements:function(e){"strings.text"===e.subAttrName&&e.newVal.text!==e.prevVal.text&&this._animateTextChange(e.newVal.text)},_renderIcon:function(){this.get("icon")&&this.get("contentBox").append('<div class="icon"></div>')},_renderButtonText:function(){var e=this.get("strings.text");s.Lang.isString(e)&&e.length>0&&s.Lang.isValue(this._anchorNode)&&this._anchorNode.setHTML(e)},_renderSpinner:function(){this._waiting=s.Node.create('<div class="waiting"></div>');this.get("contentBox").append(this._waiting);this._waiting.hide()},_syncLoading:function(){var e=this.get("spinner");var t=this.get("isLoading");var a=this.get("boundingBox").hasClass("minor");if(t){if(!e){e=new s.Squarespace.Spinner({render:this.get("contentBox"),color:a?"dark":"light"});this.set("spinner",e)}e.spin()}else e&&e.stop();this.get("boundingBox").toggleClass("is-loading",t)}},{CSS_PREFIX:"sqs-button",TEMPLATE:'<div class="label"></div>',ATTRS:{active:{},alignment:{value:"",validator:s.Lang.isString},className:{value:"normal-button"},context:{value:this},data:{},disabled:{setter:function(e){return!!e}},icon:{},name:{},onClick:{validator:s.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:false},href:{validator:s.Lang.isString},newWindow:{value:false,validator:s.Lang.isBoolean},isLoading:{value:false},spinner:{},testAttribute:{value:"button"}}});var e=s.namespace("Squarespace.Widgets").VanillaButton=s.Base.create("VanillaButton",r,[],{renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").removeClass(r.CSS_PREFIX)}},{CSS_PREFIX:"sqs-button-vanilla"})},"1.0",{requires:["anim","base","node","squarespace-dialog","squarespace-dialog-field-2","squarespace-spinner","squarespace-util","widget-child"]})},5492:function(e,t){YUI.add("squarespace-plugin-progress-bar",function(a){a.namespace("Squarespace.Plugin");var e=a.Squarespace.Plugin.ProgressBar=a.Base.create("ProgressBar",a.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){e.superclass._renderContent.call(this);this._syncProgressBar()},_bindAttributeChanges:function(){e.superclass._bindAttributeChanges.call(this);this.after("progressChange",this._syncProgressBar,this)},_syncProgressBar:function(){var e=this._meterEl.one(".bar-inner");var t=this.get("progress");t=Math.max(0,Math.min(100,0+t));e.setStyle("width",t+5+"%")}},{NS:"progress-bar",PROGRESS_METER_TEMPLATE:'<div class="bar"><div class="bar-inner"></div></div>',ATTRS:{progress:{value:0,validator:function(e,t){return a.Lang.isNumber(e)&&e>=0&&e<=100}}}})},"1.0",{requires:["base","squarespace-plugin-progress-base"]})},5493:function(e,t,a){var n=a(24).t;YUI.add("squarespace-plugin-progress-base",function(i){i.namespace("Squarespace.Plugin");i.Squarespace.Plugin.ProgressBase=i.Base.create("ProgressBase",i.Plugin.Base,[],{initializer:function(){this._renderContent();this._bindAttributeChanges();this._setClasses();this._bindContent()},destructor:function(){var e=this._contentEl;if(e&&e.getDOMNode()){e.setStyle("opacity",0);i.later(this.get("unplugDelay"),this,function(){e&&e.remove&&e.remove()})}this._contentEl=null;this._meterEl=null;this._cancelEl=null;this.get("host").removeClass("progress-show-meter");this.get("host").removeClass("progress-show-cancel")},_renderContent:function(){var e=this._contentEl=i.Node.create('<div class="progress-container"><div class="progress"><div class="cancel-process">'+n("Cancel")+"</div></div></div>");var t=e.one(".progress");this._meterEl=i.Node.create(this.constructor.PROGRESS_METER_TEMPLATE);t.prepend(this._meterEl);this._cancelEl=e.one(".cancel-process");var a=this.get("host");this.get("append")?a.append(e):a.prepend(e)},_bindAttributeChanges:function(){this.after(["showChange","showCancelChange"],this._setClasses,this)},_setClasses:function(){var e=this.get("host");var t=this.get("show");var a=this.get("showCancel");e.toggleClass("progress-show-meter",t);this._meterEl.toggleClass("visible",t);e.toggleClass("progress-show-cancel",a);this._cancelEl.toggleClass("visible",a)},_bindContent:function(){this._cancelEl.on("click",function(e){e.halt();this.fire("cancel")},this)}},{NS:"progress",PROGRESS_METER_TEMPLATE:"",ATTRS:{show:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},showCancel:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},unplugDelay:{value:300,validator:i.Squarespace.AttrValidators.isNumber},append:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","plugin","squarespace-attr-validators"]})},5494:function(e,t){YUI.add("squarespace-plugin-progress-spinner",function(e){e.namespace("Squarespace.Plugin");var t=e.Squarespace.Plugin.ProgressSpinner=e.Base.create("ProgressSpinner",e.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){t.superclass._renderContent.call(this);new e.Squarespace.Spinner({render:this._meterEl,size:this.get("spinnerSize"),color:this.get("spinnerColor")}).get("boundingBox")}},{NS:"progress-spinner",PROGRESS_METER_TEMPLATE:'<div class="spinner"></div>',ATTRS:{spinnerSize:{value:30},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-plugin-progress-base","squarespace-spinner"]})},5495:function(e,t,a){var d=a(24).t;var n=a(5336);var i=a(472);var s=a(2716);var u=a(114);var g=a(87);YUI.add("squarespace-uploader",function(l){l.namespace("Squarespace");if(l.Squarespace.Utils.isInDamaskFrame()&&!i.isV8()){l.Squarespace.Uploader=l.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Uploader");return}var c={ERR_FILE_UPLOAD:d("Upload failed, please retry"),ERR_FILE_PROCESSING:d("Error processing file, please retry."),INVALID_SIZE_TITLE:d("File Size Limit Exceeded"),INVALID_SIZE:d("The file <strong>{name}</strong> is too large. The maximum allowed file size is <strong>{size}MB</strong>."),INVALID_TYPE_TITLE:d("Only {typeDescription} Allowed"),INVALID_TYPE:d("The file <strong>{name}</strong> does not appear to be a supported {type} file."),HINT_FILE_UPLOAD:d("Add a file"),HINT_FILE_UPLOAD_CLICK_ONLY:d("Click here to add a file")};if("none"===l.Uploader.TYPE){console.error("non-functional uploader");return}l.mix(l.FileHTML5,{isValidFile:function(e){var t=l.config.win.File;var a;try{a=l.Squarespace.Damask.ContextGlobals.fromFrame("File")}catch(e){console.warn("[FileUploader] Could not find bottomFrameFile.")}return t&&(e instanceof t||e instanceof a)}},true);l.Squarespace.Uploader=l.Base.create("uploader",l.Uploader,[l.WidgetChild],{initializer:function(e){this.set("swfURL","/combo/yui/?3.10.1/uploader/assets/flashuploader.swf");this.set("buttonClassNames",{hover:"",active:"",focus:""});this.after(["dragenter","dragover","dragleave","drop"],this._ddHandler,this);this._files={};this.get("fileFilters")||this.addAttr("fileFilters",{value:null});this.after("uploadprogress",this._onUploadFileProgress,this);this.after("uploadcomplete",this._onUploadFileComplete,this);this.on("uploaderror",this._onUploadFileFailure,this);this.on("fileListChange",this._fileListChange,this);this.after("fileFiltersChange",this._fileFiltersChange,this);if(l.Data.DEBUG&&false){this.on("fileuploadstart",function(e){console.log("[UPLOAD] SEND:  "+this.get("uploadURL")+" (POST) : ",l.clone(e.target._files[e.file.get("id")].postData))},this);this.on("uploadcomplete",function(e){console.log("[UPLOAD] RECV:  "+this.get("uploadURL")+" (POST) : ",l.clone(e.target._files[e.file.get("id")].postData))},this)}e.fileFilters&&this.set("fileFilters",e.fileFilters)},destructor:function(){var e=this.get("dragAndDropArea");e&&e.removeClass("drop-active");this._jobOnceCompleteEvt&&this._jobOnceCompleteEvt.detach();this._jobOnceFailureEvt&&this._jobOnceFailureEvt.detach()},cleanupFile:function(e){if(!e)return;var t=e.get("id");this.set("fileList",this.get("fileList").filter(function(e){return e.get("id")!==t}),{source:"cleanupFile"});delete this._files[t]},bindUI:function(){l.Squarespace.Uploader.superclass.bindUI.call(this);this.on("selectButtonLabelChange",function(e){this.get("selectFilesButton").one(".text").setContent(e.newVal)},this)},_onUploadFileProgress:function(e){var t=e.file&&e.file.get("id");var a=this._files[t];var i=a&&a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressBar.NS];if(i){i.set("show",true);i.set("progress",e.percentLoaded)}},_onUploadFileComplete:function(t){var e=t.file&&t.file.get("id");var a=this._files[e]||{};var i=a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressBar.NS];var n=a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressSpinner.NS];var s=t.data;if("string"===typeof s)try{s=l.JSON.parse(s)}catch(e){this._onUploadFileFailure(t)}if(s.error){this._onServerRejectFile(t,s);return}if(i){i.set("progress",100);i.set("show",false)}else false;this.get("fileComplete")&&this.get("fileComplete")(a,s);if(!this.get("createJob")){i&&i.set("show",false);n&&n.set("show",false);this.cleanupFile(t.file);this.fire("upload-complete",l.JSON.parse(t.data));return}if(s&&s.job){n&&n.set("show",true);this._processResponse(s,a)}},_processResponse:function(e,t){if(e&&e.job){var a=t.job=this.get("createJob")(t,e);if(a){a.get("id")||a.set("id",t.id);this._jobOnceCompleteEvt=a.once("complete",l.bind(this._onJobHandler,this,"jobComplete",t));this._jobOnceFailureEvt=a.once("failure",l.bind(this._onJobHandler,this,"jobFailure",t));Static.JOB_MANAGER.addJob(a)}}},_onServerRejectFile:function(e,t){new l.Squarespace.Widgets.Alert({"strings.title":d("Upload Error"),"strings.message":t.error});this.fire("upload-failure");this.cleanupFile(e.file)},_onUploadFileFailure:function(e){var t=this.fileDataFromFile(e.file);t.error={type:n.UPLOAD,message:c.ERR_FILE_UPLOAD};e.fileData=t;this.cleanupFile(e.file);this.abort()},_onJobHandler:function(e,t,a){var i=t.placeholder&&t.placeholder[l.Squarespace.Plugin.ProgressSpinner.NS];i&&i.set("show",false);if(t.id&&!this._files[t.id])return console.log("file upload aborted");"jobFailure"===e&&(t.error={type:n.PROCESSING,message:c.ERR_FILE_PROCESSING});this.get(e)&&this.get(e)(t,a.target);this.cleanupFile(t.file);this.fire(e,{job:a.target,fileData:t})},_ddEventHandler:function(e){e.stopPropagation();e.preventDefault();if(l.Array.indexOf(e._event.dataTransfer.types,"Files")>-1)switch(e.type){case"dragenter":this.fire("dragenter",{originalEvent:e});break;case"dragover":this.fire("dragover",{originalEvent:e});break;case"dragleave":this.fire("dragleave",{originalEvent:e});break;case"drop":var t=e._event.dataTransfer.files,a=[],i=this.get("fileFilterFunction"),n;i?l.each(t,function(e){var t=new l.FileHTML5(e);i(t)&&a.push(t)}):l.each(t,function(e){a.push(new l.FileHTML5(e))});if(a.length>0){n=this.get("fileList");this.set("fileList",this.get("appendNewFiles")?n.concat(a):a);this.fire("fileselect",{fileList:a})}this.fire("drop",{fileList:a});break}},getDataTransferFromEvent:function(e){return l.Object.getValue(e,"domEvent._event.dataTransfer".split("."))||l.Object.getValue(e,"originalEvent._event.dataTransfer".split("."))},_ddHandler:function(e){var t=this.get("dragAndDropArea");if(t){var a=this.getDataTransferFromEvent(e);if("uploader:dragover"===e.type||"uploader:dragenter"===e.type){t.addClass("drop-active");s(a,"move")}else{t.removeClass("drop-active");s(a,"none")}}},uploadAll:function(){var e=this.get("fileList");if(e&&0===e.length)return;var t=this.get("preflight");t?t(l.bind(function(){l.each(this.get("fileList"),function(e,t){this._processFile(this.fileDataFromFile(e))},this);l.Squarespace.Uploader.superclass.uploadAll.call(this)},this)):l.Squarespace.Uploader.superclass.uploadAll.call(this)},abort:function(){this.set("fileList",[])},fileDataFromFile:function(e){if(e)return this._files[e.get("id")]},validateFile:function(e){e=e.get?this.fileDataFromFile(e):e;var t=e.file;var a=[];t.get("size")>1024*this.get("maxSize")*1024&&!u.isFeatureEnabled(g.ALLOW_VIP_SIZE_UPLOADS)&&a.push({title:c.INVALID_SIZE_TITLE,message:l.substitute(c.INVALID_SIZE,{name:l.Escape.html(t.get("name")),size:this.get("maxSize")})});if(this._extensionCheck&&!this._extensionCheck.test(t.get("name"))){var i=this.get("fileFilters").map(function(e){return e.description});var n=i.length>1?d("{sub1} or {sub2}",{sub1:i.slice(0,-1).join(","),sub2:i[i.length-1]}):i[0];var s={typeDescription:n,name:l.Escape.html(t.get("name")),type:n.toLowerCase().replace(/s\b/g,"")};a.push({title:l.substitute(c.INVALID_TYPE_TITLE,s),message:l.substitute(c.INVALID_TYPE,s)})}var r=this.get("validateFileFn");if(l.Lang.isFunction(r)){var o=r(t,e);l.Lang.isObject(o)&&a.push(o)}a.length&&(e.invalid=a);return!a.length},makeDefaultErrorBlock:function(e){var t=e.file?e:this.fileDataFromFile(e);var a=t&&t.error;if(!a)return"";var i=l.Node.create('<div class="failed"><div class="message">'+a.message+'</div><div class="filename">'+t.file.get("name")+'</div><div class="button"><div class="button-title">'+d("Dismiss")+"</div></div></div>");return i},_fileFiltersChange:function(e){var a=[];if(!e.newVal)return;l.each(e.newVal,function(e){var t=e.extensions.split(";").map(function(e){return"(?:"+e.slice(2)+"$)"});a=a.concat(t)},this);this._extensionCheck=new RegExp(a.join("|"),"i")},_setFileFilters:function(){if(!this._fileInputField)return;if(this.get("fileFilters").length>0){var e=[];var t=this.get("fileFilters");for(var a=0;a<t.length;a++)e+=t[a].acceptTypes;this._fileInputField.set("accept",e)}else this._fileInputField.set("accept","")},_fileListChange:function(e){if("cleanupFile"===e.source)return;var n={};var s=false;var t=this.get("uploadLimit");!this.get("multipleFiles")&&e.newVal.length>1&&(e.newVal=[e.newVal[0]]);if(l.Lang.isNumber(t)&&e.newVal.length>t){e.newVal=e.newVal.slice(0,t);var a=d("You have exceeded the upload limit! Only your first {uploadLimit} will be uploaded.",{uploadLimit:t});new l.Squarespace.Widgets.Alert({"strings.title":d("Upload Limit Exceeded"),"strings.message":a})}var r=[];l.each(e.newVal,function(e,t){var a=e.get("id");if(this._files[a]){r.push(e);return}var i=this._processFile({id:a,file:e,index:t});if(i.invalid){false;r.push(e);return}n[a]=i;s=true;!n[a].placeholder&&this.get("addPlaceholder")&&(n[a].placeholder=this.get("addPlaceholder")(n[a]));false;delete this._files[a]},this);if(r.length)for(var i=0;i<r.length;i++)e.newVal.remove(r[i]);this.get("removePlaceholder")&&l.each(this._files,function(e,t){this.queue&&this.queue.cancelUpload(e.file);e.job&&Static.JOB_MANAGER.removeJobById(e.job.id);this.get("removePlaceholder")(e)},this);this._files=n;s&&this.get("autoUpload")&&l.later(0,this,this.uploadAll)},_processFile:function(e){this.validateFile(e);var t=this.get("processFile");t&&t(e);e.postData=l.merge(e.postData||{},{fileName:e.file.get("name"),fileSize:e.file.get("size")});var a=this.get("postVarsPerFile");a[e.id]=e.postData;this.set("postVarsPerFile",a);return e},_makeDefaultSelectFilesButton:function(){return l.Node.create('<button class="upload-indicator image" tabindex="0"><div class="icon">&nbsp;</div><div class="text">'+this.get("selectButtonLabel")+"</div></button>")}},{CSS_PREFIX:"sqs-uploader",ATTRS:{processFile:{},addPlaceholder:{},removePlaceholder:{},preflight:{},createJob:{},fileComplete:{},jobComplete:{},jobFailure:{},autoUpload:{value:false},isTransient:{value:false},isGlobal:{value:false},transientItemId:{value:""},transientItemUrl:{value:""},maxSize:{value:20},uploadLimit:{value:null},uploadURL:{valueFn:function(){return"/api/commondata/"+(this.get("isGlobal")?"SaveGlobalMedia":"SaveMedia")},setter:function(e){return l.Data.addCrumb(e)}},selectButtonLabel:{value:"flash"===l.Uploader.TYPE?c.HINT_FILE_UPLOAD_CLICK_ONLY_HINT:c.HINT_FILE_UPLOAD},selectFilesButton:{valueFn:"_makeDefaultSelectFilesButton",setter:function(e){if(!e)return this._makeDefaultSelectFilesButton();return e}},validateFileFn:{},persistTransient:{value:false,validator:l.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","file-html5","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-util","squarespace-widgets-alert","uploader","widget-child"]})},5502:function(e,t,a){var o=a(24).t;var i=a(5197);var n=a(1949);var l=a(2725);YUI.add("squarespace-dialog-text",function(s){s.namespace("Squarespace.DialogFields");var t=s.config.doc.createElement("span");var a=s.Squarespace.DialogFields.Text=s.Squarespace.DialogFields.TextField=s.Base.create("text",s.Squarespace.DialogField2,[],{destructor:function(){this._textField&&this._textField.remove(true);this._textField=null},renderUI:function(){a.superclass.renderUI.call(this);this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",this.get("password")?"password":"text");var e=this.get("autocompleteType");e&&this._textField.setAttribute("x-autocompletetype",e);if(!this.get("autocompleteEnabled")){this.get("password")&&this.get("contentBox").prepend('<input type="password" tabindex="-1" class="sqs-offscreen" />');this._textField.setAttribute("autocomplete","off")}this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this._unescapeValue(this.get("data")));"undefined"===typeof this._initialValue&&(this._initialValue=this.get("data"))},bindUI:function(){a.superclass.bindUI.call(this);this.after("dataChange",this._afterDataChange);this._textField.after("valuechange",this._afterValueChange,this);this.after("disabledChange",this.syncUI);var e=this._textField.getDOMNode();var t="addEventListener";s.Lang.isFunction(e.attachEvent)&&(t="attachEvent");e[t]("focus",s.bind(this._afterFocus,this));e[t]("blur",s.bind(this._afterBlur,this));this._textField.on("click",function(e){e.halt()});this._textField.after("keyup",function(e){if(13===e.keyCode&&this.get("submitOnEnter")){this.fire("submit");var t=this.get("dialog");t&&t.saveAndClose()}else 27===e.keyCode?e.halt():this.fire("keyup",e)},this);this._textField.on("keypress",this.applyKeyFilter,this);this.on("readOnlyChange",function(e){e.newVal?this._textField.setAttribute("readonly","readonly"):this._textField.removeAttribute("readonly")},this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("strings.placeholder");e&&this._textField.setAttribute("placeholder",e);this.get("disabled")?this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var e=this.get("data");if(!this.get("validator")(e))return[this.get("strings.validationFailMessage")];if(this.get("required")&&this.isEmpty())return[this.get("strings.requiredFieldEmptyMessage")];return[]},isEmpty:function(){return""===this.get("data")},focus:function(){a.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},blur:function(){a.superclass.blur.call(this);this.get("rendered")&&this._textField&&this._textField.blur()},disable:function(){a.superclass.disable.call(this);this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){a.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(e){var t=this.get("keyFilter");var a=this.get("keyFilterExplanation");var i;if(t){if(0!==s.UA.gecko&&!e._event.isChar)return;if(13===e.charCode&&this.get("submitOnEnter"))return;i=String.fromCharCode(e.which);if(!i.match(new RegExp(t))&&i.length>0){a&&this.showError(a);e.halt()}}},_afterDataChange:function(e){e.dataSync||this._textField.set("value",this._unescapeValue(e.newVal||""),{dataSync:true});this.hideError();this.toggleError()},_afterValueChange:function(e){e.dataSync||this.set("data",this._escapeValue(e.newVal),{dataSync:true})},_escapeValue:function(e){if(this.get("escapeText")){t.textContent=e;e=t.innerHTML;t.innerHTML="";return e}return e},_unescapeValue:function(e){if(this.get("escapeText")){t.innerHTML=e;e=t.textContent;t.innerHTML="";return e}return e},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",true);s.UA.ie||this.focus()},_afterBlur:function(){this.hideError();"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",false);var e=this._textField.get("value");this._textField&&this.set("data",this._escapeValue(e),{dataSync:true});this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:o("This must be a string."),requiredFieldEmptyMessage:o("This is a required field.")}},data:{value:"",setter:function(e){s.Lang.isValue(e)||(e="");return e},validator:function(e){return s.Lang.isString(e)||!s.Lang.isValue(e)}},escapeText:{value:false},validator:{value:s.Lang.isString},password:{value:false,validator:s.Lang.isBoolean},submitOnEnter:{value:false,validator:s.Lang.isBoolean},disabled:{value:false,validator:s.Lang.isBoolean},autocompleteType:{value:null,writeOnce:"initOnly",validators:s.Squarespace.AttrValidators.isNullOrValueIn(i)},autocompleteEnabled:{value:true,validator:s.Lang.isBoolean,writeOnce:"initOnly"},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:false},selectAllOnFocus:{value:false},testAttribute:{value:"text"}}});s.Squarespace.DialogFields.LabeledText=s.Base.create("labeledText",s.Squarespace.DialogFields.Text,[s.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var r=s.Squarespace.DialogFields.Url=s.Base.create("urlText",s.Squarespace.DialogFields.Text,[],{renderUI:function(){r.superclass.renderUI.call(this);this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var e=this.get("contentBox").one(".sqs-input-wrapper-content");e.wrap('<div class="sqs-input-wrapper"></div>');e.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){r.superclass.bindUI.call(this);this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(e){var t=this._textField.get("value");var a=this._textField.selectionStart-(32===e.keyCode?0:1);var i=this.get("filter");var n=t;n=Array.isArray(i)?s.Array.reduce(i,t,function(e,t){return l.applyFilter(e,t)},this):l.applyFilter(t,i);if(t!==n){this._textField.set("value",this._unescapeValue(n));this._textField.selectionStart=a;this._textField.selectionEnd=a}},getErrors:function(){var e=r.superclass.getErrors.call(this);var t=this.get("additionalValidators");Array.isArray(t)||(t=[t]);if(t.length){var a=this._textField.get("value");var i=""===this._initialValue&&""===a;var n=-1!==t.indexOf("optional-on-creation");if(n&&i)return e;-1!==t.indexOf("url-slug-required-if-exists")&&""===a&&e.push(o("Slug cannot be blank."));-1!==t.indexOf("url-slug-min-length")&&a.length<3&&e.push(o("Slug must be at least 3 characters."));-1!==t.indexOf("url-slug-max-length")&&a.length>250&&e.push(o("Slug must be at most 250 characters."))}return e}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:n.URL_SLUG_WITH_SLASH},additionalValidators:{value:""},prefix:{value:"/"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-dialog-text-template"]})},5503:function(e,t){YUI.add("squarespace-dialog-label",function(l){var a="-plugged";l.namespace("Squarespace.Plugin").DialogFieldLabel=l.Base.create("dialogFieldLabel",l.Plugin.Base,[],{initializer:function(e){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){l.detach(this.get("id")+"|*");var e=this.get("host"),t=e.get("boundingBox");e.get("rendered")&&t&&t._node&&e.get("boundingBox").removeClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)},_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)},renderLabel:function(){this._labelNode=l.Node.create("<label></label>");this._labelNode.addClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var e=this._labelNode,t=this.get("renderNode"),a=this.get("className"),i=this.get("forNode"),n=this.get("host"),s=n.get("contentBox");a&&e.addClass(a);if(t){l.Lang.isString(t)&&(t=s.one(t));t.appendChild(e)}else if(i){l.Lang.isString(i)&&(i=s.one(i));var r=i.getAttribute("id");r&&e.setAttribute("for",r);i.insert(e,"before")}else{var o=s.one("input")||s.one("select")||s.one("textarea")||s.one("button");o.insert(e,"before")}},bindLabel:function(){var e=this.get("id");this.on(e+"|classNameChange",function(e){this._labelNode.removeClass(e.prevVal);this._labelNode.addClass(e.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});l.namespace("Squarespace.DialogFields").DialogFieldLabel=function(e){l.Do.before(function(){this.plug(l.Squarespace.Plugin.DialogFieldLabel,l.merge({renderNode:e.labelRenderNode||null,forNode:e.labelForNode||null,className:e.labelClassName||null,"strings.text":this.get("strings.label")},e.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,"renderUI",this)};l.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]})},5504:function(e,t){YUI.add("squarespace-dialog-text-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-text.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function g(e,t){var a="",i;a+='maxlength="';if(i=n.maxLength)i=i.call(e,{hash:{},data:t});else{i=e.maxLength;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function p(e,t){var a="",i;a+='name="';if(i=n.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function h(e,t){var a="",i;a+='data-test="';if(i=n.testAttribute)i=i.call(e,{hash:{},data:t});else{i=e.testAttribute;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function f(e,t){return'readonly="readonly"'}function m(e,t){return'onClick="this.select()"'}function v(e,t){var a="",i,n;a+='\n\n\t<div class="description">\n    ';n=(i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i);(n||0===n)&&(a+=n);a+="\n  </div>\n\n";return a}o=n["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:d.noop,fn:d.program(1,u,i),data:i});(o||0===o)&&(s+=o);s+='\n\n<input type="text" ';o=n["if"].call(t,t.maxLength,{hash:{},inverse:d.noop,fn:d.program(3,g,i),data:i});(o||0===o)&&(s+=o);s+="\n       ";o=n["if"].call(t,t.name,{hash:{},inverse:d.noop,fn:d.program(5,p,i),data:i});(o||0===o)&&(s+=o);s+="\n       ";o=n["if"].call(t,t.testAttribute,{hash:{},inverse:d.noop,fn:d.program(7,h,i),data:i});(o||0===o)&&(s+=o);s+="\n       ";o=n["if"].call(t,t.readOnly,{hash:{},inverse:d.noop,fn:d.program(9,f,i),data:i});(o||0===o)&&(s+=o);s+="\n       ";o=n["if"].call(t,t.selectAllOnFocus,{hash:{},inverse:d.noop,fn:d.program(11,m,i),data:i});(o||0===o)&&(s+=o);s+="/>\n\n";o=n["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:d.noop,fn:d.program(13,v,i),data:i});(o||0===o)&&(s+=o);s+="\n";return s})})();var t="dialog-text.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},5518:function(e,t,a){"use strict";a(124);a(208);a(1440);a(1441);a(1442);a(295);a(1443);a(1444);a(1445);a(1446);a(1447);a(1033);a(1448);a(1449);a(29);a(1450);a(789);a(653);a(68);a(187);a(230);a(1451);a(1452);a(78);a(253);a(93);a(156);a(115);a(69);a(1034);a(46);a(1453);a(70);a(1454);a(1115);a(71);a(476);a(457);a(1455);a(788);a(1456);a(1457);a(1458);a(736);a(1459);a(85);a(1460);a(1461);a(311);a(434);a(1462);a(218);a(219);a(1120);a(369);a(1463);a(1464);a(1394);a(1465);a(66);a(1466);a(1467);a(1468);a(1469);a(22);a(256);a(215);a(1470);a(48);a(392);a(1471);a(855);a(1472);a(160);a(134);a(191);a(1473);a(1121);a(1474);a(1035);a(108);a(667);a(76);a(306);a(703);a(1475);a(1476);a(668);a(1477);a(1478);a(994);a(1243);a(1479);a(1480);a(1481);a(854);a(719);a(1482);a(1483);a(1484);a(84);a(155);a(1070);a(5572);a(3058);Element.prototype.remove||(Element.prototype.remove=function(){null!==this.parentNode&&this.parentNode.removeChild(this)});Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},5520:function(e,t){var a={BUTTON_BLOCK:1,POPUP_OVERLAY:2};e.exports=a},5570:function(e,t,a){var i=a(5571);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},5571:function(e,t,a){t=e.exports=a(16)(false);t.i(a(200),"");t.i(a(308),"");t.push([e.i,".sentinel-overlay-3gTl0 {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  z-index: 100000;\n}\n.sentinel-close-3D8TS {\n  position: fixed;\n  top: 44px;\n  right: 44px;\n  width: 22px;\n  height: 22px;\n  cursor: pointer;\n  z-index: 100002;\n}\n.sentinel-container-3GtXT {\n  font-family: 'Clarkson', 'Proxima Nova', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  position: fixed;\n  z-index: 100002;\n  width: 330px;\n  height: auto;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.sentinel-container-3GtXT .u-field-wrapper {\n  width: 100%;\n  padding: 11px 0 0;\n}\n.sentinel-container-3GtXT .u-field-input {\n  background: transparent;\n  border-bottom: 1px solid #797979;\n  width: 100%;\n}\n.sentinel-button-nRUOU {\n  color: #3E3E3E;\n  margin-top: 22px;\n  border-radius: 2px;\n  background-color: #FFFFFF;\n}\n.sentinel-button-nRUOU:disabled, .sentinel-button-nRUOU:disabled:hover {\n  background-color: #FFFFFF;\n  opacity: 0.6;\n}\n.sentinel-button-nRUOU:hover {\n  background-color: #E6E6E6;\n}\n.sentinel-desktopLogo-3jS8h {\n  display: none;\n  background-position: left center;\n  position: fixed;\n  top: 44px;\n  left: 44px;\n  z-index: 100002;\n}\n.sentinel-desktopHeader-1rjLn {\n  display: none;\n}\n.sentinel-mobileLogo-32jqG {\n  background-position: left center;\n}\n.sentinel-mobileHeader-KoiVX {\n  position: fixed;\n  top: 44px;\n  left: 44px;\n  z-index: 100002;\n}\n.sentinel-mobileHeader-KoiVX .sentinel-mobileLogo-32jqG {\n  display: inline-block;\n}\n.sentinel-mobileHeader-KoiVX .sentinel-title-2bv_h {\n  display: inline-block;\n  position: fixed;\n  left: 88px;\n}\n.sentinel-title-2bv_h {\n  font-size: 24px;\n  font-family: 'Clarkson', 'Proxima Nova', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  color: #313131;\n  text-align: center;\n  text-transform: capitalize;\n  font-weight: 200;\n  margin: 0;\n}\n.sentinel-link-aJDCJ {\n  text-align: center;\n  margin-top: 22px;\n  color: #313131;\n  font-weight: 200;\n  cursor: pointer;\n}\n.sentinel-anchor-Gm-CQ {\n  text-decoration: none;\n  color: #a1a1a1;\n  border: none;\n}\n.sentinel-message-1qvzb {\n  color: #a1a1a1;\n  text-align: center;\n  margin-bottom: 22px;\n}\n@media screen and (min-width: 768px) {\n  .sentinel-desktopHeader-1rjLn, .sentinel-desktopLogo-3jS8h {\n    display: block;\n  }\n  .sentinel-mobileHeader-KoiVX {\n    display: none;\n  }\n}\n",""]);t.locals={overlay:"sentinel-overlay-3gTl0",close:"sentinel-close-3D8TS "+a(200).locals["clearLight"],container:"sentinel-container-3GtXT",button:"sentinel-button-nRUOU "+a(308).locals["minor"]+" "+a(308).locals["kiwi"],desktopLogo:"sentinel-desktopLogo-3jS8h "+a(200).locals["squarespaceLight"],desktopHeader:"sentinel-desktopHeader-1rjLn",mobileLogo:"sentinel-mobileLogo-32jqG "+a(200).locals["squarespaceLight"],mobileHeader:"sentinel-mobileHeader-KoiVX",title:"sentinel-title-2bv_h",link:"sentinel-link-aJDCJ",anchor:"sentinel-anchor-Gm-CQ",message:"sentinel-message-1qvzb"}},5572:function(e,t,a){"use strict";"document"in self&&("classList"in document.createElement("_")?function(){var e=document.createElement("_");e.classList.add("c1","c2");if(!e.classList.contains("c2")){var t=function e(t){var i=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(e){var t,a=arguments.length;for(t=0;t<a;t++){e=arguments[t];i.call(this,e)}}};t("add");t("remove")}e.classList.toggle("c3",false);if(e.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)===!t?t:a.call(this,e)}}e=null}():function(e){if(!("Element"in e))return;var t="classList",a="prototype",i=e.Element[a],n=Object,r=String[a].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[a].indexOf||function(e){var t=0,a=this.length;for(;t<a;t++)if(t in this&&this[t]===e)return t;return-1},o=function e(t,a){this.name=t;this.code=DOMException[t];this.message=a},l=function e(t,a){if(""===a)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(a))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,a)},c=function e(t){var a=r.call(t.getAttribute("class")||""),i=a?a.split(/\s+/):[],n=0,s=i.length;for(;n<s;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},d=c[a]=[],u=function e(){return new c(this)};o[a]=Error[a];d.item=function(e){return this[e]||null};d.contains=function(e){e+="";return-1!==l(this,e)};d.add=function(){var e=arguments,t=0,a=e.length,i,n=false;do{i=e[t]+"";if(-1===l(this,i)){this.push(i);n=true}}while(++t<a);n&&this._updateClassName()};d.remove=function(){var e=arguments,t=0,a=e.length,i,n=false,s;do{i=e[t]+"";s=l(this,i);while(-1!==s){this.splice(s,1);n=true;s=l(this,i)}}while(++t<a);n&&this._updateClassName()};d.toggle=function(e,t){e+="";var a=this.contains(e),i=a?true!==t&&"remove":false!==t&&"add";i&&this[i](e);return true===t||false===t?t:!a};d.toString=function(){return this.join(" ")};if(n.defineProperty){var g={get:u,enumerable:true,configurable:true};try{n.defineProperty(i,t,g)}catch(e){if(-2146823252===e.number){g.enumerable=false;n.defineProperty(i,t,g)}}}else n[a].__defineGetter__&&i.__defineGetter__(t,u)}(self))},5804:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(24);var n={NONE:{value:"none",label:(0,i.t)("None")},FADE_IN:{value:"fade-in",label:(0,i.t)("Fade In")},FOCUS_IN:{value:"focus-in",label:(0,i.t)("Focus In")},SLIDE_UP:{value:"slide-up",label:(0,i.t)("Slide Up")},SLIDE_DOWN:{value:"slide-down",label:(0,i.t)("Slide Down")},SLIDE_FROM_LEFT:{value:"slide-from-left",label:(0,i.t)("Slide from Left")},SLIDE_FROM_RIGHT:{value:"slide-from-right",label:(0,i.t)("Slide from Right")},HORIZONTAL_CLIP:{value:"horizontal-clip",label:(0,i.t)("Horizontal Clip")},VERTICAL_CLIP:{value:"vertical-clip",label:(0,i.t)("Vertical Clip")},TILT_UP:{value:"tilt-up",label:(0,i.t)("Tilt Up")},TILT_DOWN:{value:"tilt-down",label:(0,i.t)("Tilt Down")},COLLIDE:{value:"collide",label:(0,i.t)("Collide")},REVEAL:{value:"reveal",label:(0,i.t)("Reveal")},CUSTOM:{value:"custom",label:(0,i.t)("Custom")},NO_ANIMATION:{value:"no-animation",label:(0,i.t)("No Animation")},SITE_DEFAULT:{value:"site-default",label:(0,i.t)("Site Default")}};var s=n;t.default=s;e.exports=t.default},5805:function(e,t,a){"use strict";var i={GALLERY_SLIDESHOW:1e3,GALLERY_CAROUSEL:1002,GALLERY_GRID:1003,GALLERY_STACK:1004,SUMMARY_WALL:1005,SUMMARY_CAROUSEL:1006,SUMMARY_LIST:1007,SUMMARY_GRID:1008,CHART_BAR:1009,CHART_LINE:1010,CHART_PIE:1011,IMAGE_INLINE:1012,IMAGE_POSTER:1013,IMAGE_CARD:1014,IMAGE_OVERLAP:1015,IMAGE_COLLAGE:1016,IMAGE_STACK:1017};e.exports=i},5806:function(e,t){e.exports={width:1010,height:576,top:20,overlay:.5,closeOthers:false}},5810:function(e,t,a){"use strict";var i={BLOGS:['body.collection-type-blog [data-type="item"]','body.collection-type-blog [data-type="promoted-block"]','[class*="collection-type-blog"]'],BLOGS_AND_PAGES:['body.collection-type-blog [data-type="item"]','body.collection-type-blog [data-type="promoted-block"]','[class*="collection-type-page"]','[class*="collection-type-blog"]','[class*="collection-type-products"]','[data-type="page"]',"#productList","#productlist","#productGallery",".ProductList",".sqs-system-gallery","#flowItems",".productlist",".productitem-images",".sqs-pinterest-products-wrapper"],VALID_IMAGE_CONTAINER:[".sqs-block-image",".sqs-gallery-block-stacked",".sqs-gallery-block-grid",".sqs-gallery-block-slideshow",".sqs-block-html",".product-image","#productGallery","#productSlideshow",".ProductList-item",".product",".productlist-item",".sqs-system-gallery .slides .slide","article.flow-item",".productitem-images",".sqs-pinterest-products-wrapper",'[data-controller="ProductListImageLoader"]'],TRIGGER_SELECTORS:[".sqs-block-image",".sqs-gallery-block-stacked",".sqs-gallery-block-grid",".sqs-gallery-block-slideshow",".sqs-block-html img",".product-image","#productGallery .slide img","#productSlideshow",".ProductList-item",".product",'[class^="products"]',".productlist-item",".sqs-system-gallery","#flowItems",".productitem-images",".sqs-pinterest-image img",".sqs-pinterest-products-wrapper img"]};e.exports=i},5811:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function c(e,t){if("function"===typeof e.closest)return e.closest(t)||null;while(e){if(e.matches(t))return e;e=e.parentElement}return null}function i(e){if(!e)return false;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sqs-dynamic-text";var a=e.ownerDocument;var o=a.defaultView;if(!o)return false;var l=o.innerWidth;var i=Array.from(e.querySelectorAll("."+t));i.forEach(function(e){var t=e.offsetWidth;var a=Math.floor(t/l*1e3)/10;var i=parseInt(e.getAttribute("data-width-percentage"),10);if(i===a)return;e.style.fontSize=a+"%";e.setAttribute("data-width-percentage",a);var n=parseInt(o.getComputedStyle(e,null).getPropertyValue("font-size"),10);var s=e.firstChild;s&&s.classList&&(n>0&&n<=13?s.classList.add("min-font-set"):s.classList.contains("min-font-set")&&s.classList.remove("min-font-set"));var r=c(e,".image-block-outer-wrapper");r&&r.classList.add("sqs-text-ready")});return true}e.exports=t.default},5812:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.destroyUpdater=t.updateUiOptions=t.mapModelToViewConfig=t.Styles=t.getStyleById=void 0;var n=i(a(2));var s=i(a(3047));var r=a(729);function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d=(0,r.createErrorLogger)("GoogleMapsUtils");var l=[null,s.default.Original,s.default.Grayscale,s.default.Satellite,s.default.MinimalLight,s.default.MinimalDark,s.default.MinimalBlue];var u=function e(t){return l[t]};t.getStyleById=u;var g={ORIGINAL:1,GRAYSCALE:2,SATELLITE:3,MINIMAL_LIGHT:4,MINIMAL_DARK:5,MINIMAL_BLUE:6};t.Styles=g;var p=function e(t){var a=t.location,i=t.controls,n=t.terrain,s=t.labels,r=t.style;return{location:a,ui:{showControls:i,showTerrain:n,showLabels:s,style:l[r]}}};t.mapModelToViewConfig=p;var h=60;var f=new Map;var m=function e(t,a){if(!t||!a)return;var i=f.get(t)||{},n=i.timeout,s=i.options,r=void 0===s?{}:s;n&&window.clearTimeout(n);var o=c({},r,{},a);var l=function e(){try{t.updateUIOptions(o)}catch(e){d(e)}};f.set(t,{cb:l,timeout:window.setTimeout(l,h),options:o})};t.updateUiOptions=m;var v=function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return;var i=f.get(t)||{},n=i.cb,s=i.timeout;s&&window.clearTimeout(s);!a&&n&&n();f.delete(t)};t.destroyUpdater=v},5814:function(e,t){var a={GALLERY_SLIDESHOW:1e3,GALLERY_CAROUSEL:1002,GALLERY_GRID:1003,GALLERY_STACK:1004,SUMMARY_WALL:1005,SUMMARY_CAROUSEL:1006,SUMMARY_LIST:1007,SUMMARY_GRID:1008,CHART_BAR:1009,CHART_LINE:1010,CHART_PIE:1011,IMAGE_INLINE:1012,IMAGE_POSTER:1013,IMAGE_CARD:1014,IMAGE_OVERLAP:1015,IMAGE_COLLAGE:1016,IMAGE_STACK:1017};e.exports=a},5816:function(e,t,a){"use strict";var s=a(845);var r=864e5;e.exports=function(e,t){if(!e||!t)return null;var a=function e(t){var a=s(t);a.set({hour:0,minute:0,second:0,millisecond:0});return Math.floor(a.getTime()/r)};var i=a(e);var n=a(t);return n-i}},5957:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.sendEmailsForProducts=t.sendEmailsForProduct=t.fetchTotalEmailCountForVariants=t.fetchSignupGroupEmails=t.fetchAllRestockNotificationSignupGroups=t.fetchRestockNotificationSignupGroups=t.signUpForRestockNotification=void 0;var c=i(a(44));var d=i(a(40));var n=i(a(52));var u=i(a(228));var g="/api/site-users/account/notifications/restock";var s=function e(t){return u.default.post(g,t)};t.signUpForRestockNotification=s;var o=function e(t){return u.default.get("".concat(g,"/groups"),{params:{cursor:t}})};t.fetchRestockNotificationSignupGroups=o;var r=function(){var t=(0,n.default)(c.default.mark(function e(){var a,i,n,s,r;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=true;n=[];case 2:if(!i){t.next=12;break}t.next=5;return o(a);case 5:s=t.sent;r=s.data;i=r.hasNextPage;a=r.nextPageCursor;n.push.apply(n,(0,d.default)(r.signUpGroups));t.next=2;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.fetchAllRestockNotificationSignupGroups=r;var l=function(){var i=(0,n.default)(c.default.mark(function e(a,i){var n,s,r,o,l;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s=true;r=[];case 2:if(!s){t.next=12;break}t.next=5;return u.default.get(g,{params:{productId:a,variantId:i,cursor:n}});case 5:o=t.sent;l=o.data;s=l.hasNextPage;n=l.nextPageCursor;r.push.apply(r,(0,d.default)(l.signUps));t.next=2;break;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}},e)}));return function e(t,a){return i.apply(this,arguments)}}();t.fetchSignupGroupEmails=l;var p=function(){var i=(0,n.default)(c.default.mark(function e(a,i){var n,s;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(0===i.length)){t.next=2;break}return t.abrupt("return",0);case 2:n=i.map(function(e){return l(a,e)});t.next=5;return Promise.all(n);case 5:s=t.sent;return t.abrupt("return",s.reduce(function(e,t){return e+t.length},0));case 7:case"end":return t.stop()}},e)}));return function e(t,a){return i.apply(this,arguments)}}();t.fetchTotalEmailCountForVariants=p;var h=function e(t,a){return u.default.post("".concat(g,"/send"),{productId:t,variantId:a})};t.sendEmailsForProduct=h;var f=function e(t){return u.default.post("".concat(g,"/send/all"),{sendRequests:t})};t.sendEmailsForProducts=f},5960:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));var s;var r=a(2738);var o=a(4172);var l=a(2607);var c=(s={},(0,n.default)(s,l.POPUP_OVERLAY,'.sqs-slide-wrapper[data-slide-type="'.concat(o[r.POPUP_OVERLAY],'"]')),(0,n.default)(s,l.SPLASH_PAGE,'.sqs-slide-wrapper[data-slide-type="'.concat(o[r.COVER_PAGE],'"]')),(0,n.default)(s,l.LOCK_SCREEN,'.sqs-slide-wrapper[data-slide-type="'.concat(o[r.LOCK_SCREEN],'"]')),s);var d=function e(){return'link[href*="site.css"]'};var u=function e(){return"slide-styles"};var g=function e(){return"checkout-page-styles"};var p=function e(t){return'.sqs-slide-wrapper[data-slide-type="'.concat(o[t],'"]')};var h=function e(t){var a=t?c[t]:"";return a||""};var f=function e(t){return"style_tweak_tag_".concat(t)};e.exports={getSiteCssSelector:d,getSlideStylesId:u,getCheckoutStylesId:g,getWrapperSelector:p,getTweakWrapperSelector:h,getTweakStyleTagId:f}},5994:function(e,t,a){"use strict";var i=a(4155);var n={heading:i.HEADING,"sub-heading":i.SUB_HEADING,body:i.BODY,image:i.IMAGE,gallery:i.GALLERY,video:i.VIDEO,"social-icons":i.SOCIAL_ICONS,buttons:i.BUTTONS,navigation:i.NAVIGATION,"custom-form":i.CUSTOM_FORM,newsletter:i.NEWSLETTER,album:i.ALBUM,map:i.MAP,lock:i.LOCK,password:i.PASSWORD,twitter:i.TWITTER,logo:i.LOGO,action:i.ACTION,"popup-overlay-action":i.POPUP_OVERLAY_ACTION,"temp-lock-inject":i.TEMP_LOCK_INJECT};e.exports=n},5995:function(e,t,a){"use strict";var i=a(4);var n=i(a(2));var s=a(404);var r=(0,n.default)({},s.CHOWNOW,{serviceId:s.CHOWNOW,displayName:"ChowNow",defaultLinkTitle:"Order Now",slug:"chownow"});e.exports=r},6016:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(228));var s=a(6017);var r=a(318);var o=a(5060);var l=function e(t,a){false;if(!a||!a.productPage||!a.productSection){console.error("Please provide a tracking context when using Google Places API autocomplete to track cost");(0,r.captureException)(new Error("Tracking context is missing for Google Places API autocomplete"))}(0,s.trackGoogleAutoComplete)(t,a);return n.default.get(o.AUTOCOMPLETE_URL,{params:t})};var c=function e(t,a){false;false;if(!a||!a.productPage||!a.productSection){console.error("Please provide a tracking context when using Google Places API details to track cost");(0,r.captureException)(new Error("Tracking context is missing for Google Places API details"))}(0,s.trackGoogleDetails)(t,a);return n.default.get(o.DETAILS_URL,{params:t})};var d={getPlacePredictions:l,getDetails:c};t.default=d;e.exports=t.default},6017:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.trackGoogleDetails=t.trackGoogleAutoComplete=void 0;var c=i(a(107));var d=i(a(4219));var u=a(5060);var g=function e(a){var i=[];Object.keys(a).forEach(function(e){var t="string"===typeof a[e]?a[e]:JSON.stringify(a[e]);i.push(e+"="+t)});return i.join("&")};var n=function e(t,a){var i=(0,c.default)(t,"query");var n=g(i);var s=a||{},r=s.productPage,o=s.productSection;var l={sessionToken:t.sessiontoken,url:u.AUTOCOMPLETE_URL+"?"+n,productPage:r,productSection:o};d.default.googleAutoCompleteCall(l)};t.trackGoogleAutoComplete=n;var s=function e(t,a){var i=(0,c.default)(t,"placeid");var n=g(i);var s=a||{},r=s.productPage,o=s.productSection;var l={sessionToken:t.sessiontoken,url:u.DETAILS_URL+"?"+n,productPage:r,productSection:o};d.default.googleDetailsCall(l)};t.trackGoogleDetails=s},6038:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(87));var s=i(a(114));var r={text:["description","placeholder","required"],textarea:["description","placeholder","required"],email:["description","placeholder","required"],currency:["description","currencySymbol","required"],number:["description","placeholder","required"],website:["description","placeholder","required"],password:["description","required"],twitter:["description","required"],date:["description","required"],time:["description","required"],name:["description","required"],address:["description","required"],phone:["description","showCountryCode","required"],section:["description","underline"],radio:["description","options","required"],checkbox:["description","options","required"],select:["description","options","required"],likert:["description","options","required"],hidden:["key","value"]};s.default.isFeatureEnabled(n.default.VANILLA_FORM_HANDLER)&&r.textarea.push("maxLength");var o=r;t.default=o;e.exports=t.default},6040:function(e,t,a){var n=a(24).t;var s=a(6268);var r=a(3494);var u=a(595);YUI.add("squarespace-audio-player",function(c){c.namespace("Squarespace.Widgets");var d=c.Squarespace.Widgets.AudioPlayer=c.Base.create("audioPlayer",c.Squarespace.Widgets.SSWidget,[],{initializer:function(e){var t=this.get("render");c.Lang.isBoolean(t)?t=null:c.Lang.isString(t)&&(t=c.one(t));if(t){t._audioPlayer&&t._audioPlayer.destroy();t._audioPlayer=this;c.Object.each(t.getData(),function(e,t){e&&this.set(t,e)},this)}},destructor:function(){if(this._audio){this.stop();this._audio=null}r.player.pause()},renderUI:function(){d.superclass.renderUI.apply(this,arguments);var e=this.get("boundingBox");var t=e.one(".placeholder");var a=this.get("title"),i=this.get("author");a&&i?t.setContent(c.Node.create('<div class="wrapper"><div class="audio-author">'+i+'</div><div class="audio-title">'+a+"</div></div>")):a?t.setContent(c.Node.create('<div class="wrapper"><div class="audio-title">'+a+"</div></div>")):t.setContent(c.Node.create('<div class="wrapper">'+this.get("strings.placeholder")+"</div>"));if("true"===this.get("show-download")&&this.get("url")){var n=u.addQueryParam(this.get("url"),"download","true");var s='<div class="download"><a href="'+n+'" target="_blank">'+this.get("strings.download")+"</a></div>";this.get("contentBox").append(s);e.addClass("download")}e.one(".progress-inner").setStyle("width","0px");var r=this._volumeNode=e.one(".volume");if(!r)throw new Error(this.name+": No div.volume in template.");var o=this.get("volumeLevels");for(var l=o;l>0;l--)r.prepend('<div class="bar level-"'+l+'" data-volume-level="'+l+'"></div>');e.one(".duration").setContent(this.get("strings.durationPlaceHolder"))},bindUI:function(){var e=this.get("id");this.get("boundingBox").on(e+"|click",this._onClick,this);this.after(e+"|volumeChange",function(e){this._setVolume(e.newVal)},this);this.after(e+"|playStateChange",this._uiUpdateWrapperClass,this);this.after(e+"|readyStateChange",this._afterReadyStateChange,this);this.after(e+"|disabledChange",function(e){var t=e.newVal;t&&this.stop()},this);c.on(e+"|audioPlayer:stopAll",function(e){var t=e?e.container:null;t&&c.Lang.isString(t)&&(t=c.one(t));(!e||!e.hasOwnProperty("container")||t instanceof c.Node&&t.contains(this.get("boundingBox")))&&this.stop()},this)},syncUI:function(){this._uiUpdateWrapperClass();this._uiUpdateVolumeLevel();var e=this.get("boundingBox");if(e.ancestor(".sqs-editing")){r.player.pause();this.pause()}e.toggleClass("tiny",e.get("offsetWidth")<300)},play:function(){var e=this.getProperty("PLAY_STATES");r.player.setVolume(this.get("volume")/100);if(this._audio)this.get("playState")!==e.PLAYING&&this._audio.play();else{this._registerTrack();this._audio.play()}this._set("playState",e.PLAYING)},pause:function(){this._audio&&this._audio.pause()},stop:function(){var e=this.get("playState"),t=this.getProperty("PLAY_STATES");e===t.PLAYING&&this._audio&&this._audio.pause()},seek:function(e){if(e>100||e<0){console.warn(this.name+": seek() - Percentage between 0-100 required.");return}if(!this._audio){this._registerTrack();this.play()}this._audio.seek(this._audio.duration*(e/100))},setVolume:function(e){this.set("volume",e)},_setVolume:function(e){this._audio&&r.player.setVolume(e/100);this._set("volume",e);this._uiUpdateVolumeLevel()},_setVolumeLevel:function(e){this._setVolume(Math.round(e/this.get("volumeLevels")*100))},_registerTrack:function(){if(!this._audio){var e=this.get("boundingBox");var t=this.get("fixedUrl");e.addClass("loading");if(!t){this._showError(n("No URL provided."));return}this._audio=r.createTrack(t);this._audio.on("pause",c.bind(this._onPause,this));this._audio.on("ended",c.bind(this._onStop,this));this._audio.on("inactive",c.bind(this._onPause,this));this._audio.on("positionChange",c.bind(this._onWhilePlaying,this));this._audio.on("ready",c.bind(this._onLoad,this));return!!this._audio}return false},_uiUpdateVolumeLevel:function(){var e=this._volumeNode.get("children"),t=this.get("volumeLevels"),a=this.get("volume"),i=Math.round(a/100*t);e.each(function(e){var t=parseInt(e.getAttribute("data-volume-level"),10);t<=i?e.addClass("active"):e.removeClass("active")},this)},_uiUpdateWrapperClass:function(){var e=this.getProperty("READY_STATES"),t=this.getProperty("PLAY_STATES"),a=this.get("boundingBox"),i=a.getAttribute("class").split(" ");var n;for(n in t)i.remove("play-state-"+t[n]);for(n in e)i.remove("ready-state-"+e[n]);a.addClass("ready-state-"+this.get("readyState"));a.setAttribute("class",i.join(" ")).addClass("play-state-"+this.get("playState")).addClass("ready-state-"+this.get("readyState"))},_onClick:function(e){if(c.UA.ios){window.location.href=this.get("url");return}if(e.target.ancestor().hasClass("download"))return;e.halt();e.stopImmediatePropagation();if(this.get("disabled"))return;if(e.target.hasClass("duration"))return;if(e.target.ancestor(".volume")){this._setVolumeLevel(parseInt(e.target.getAttribute("data-volume-level"),10));return}if(e.target.ancestor(".placeholder",true)){this.play();return}if(e.target.ancestor(".controls",true)){var t=this.get("playState"),a=this.getProperty("PLAY_STATES");switch(t){case a.PLAYING:this.pause();return;case a.PAUSED:case a.STOPPED:this.play();return;default:false;return}}var i=this.get("boundingBox").one(".progress").get("region");e.pageX>=i.left&&e.pageX<=i.right&&this.seek((e.pageX-i.left)/i.width*100)},_afterReadyStateChange:function(e){var t=this.getProperty("READY_STATES"),a=this.get("readyState"),i=this.get("strings"),n=false;switch(a){case t.INITIALIZED:this.enable();break;case t.FLASH_BLOCKED:n=i.soundManagerFlashFail;break;case t.SECURITY_ERROR:n=i.soundManagerSecurityFail;this._reportAudioError(t.SECURITY_ERROR);break;case t.SOUND_LOAD_FAILED:n=i.soundManagerURLFail;this._reportAudioError(t.SOUND_LOAD_FAILED);break;case t.SOUND_LOADED:break;default:console.warn(this.name+": Invalid ready state ("+a+").");break}if(n){false;this._showError(n);this.disable()}this._uiUpdateWrapperClass()},_reportAudioError:function(e){try{var t=this.get("url");t.indexOf("assets.squarespace.com")>0&&c.Squarespace.Analytics.trackInternal("system_audio_play_error",{readyState:this.get("readyState"),url:t})}catch(e){}},_getPlaytimeString:function(e){if(!this._audio)return this.get("strings.durationPlaceHolder");var t="0:00";var a="0:00";t=this._getMinSecString(this._audio.duration);e&&(a=this._getMinSecString(e));return a+" / "+t},_getMinSecString:function(e){return s(1e3*e)},_showError:function(e){this.get("boundingBox").addClass("error");this.get("boundingBox").one(".placeholder").setContent("Error: "+e)},_onWhilePlaying:function(e){if(this.get("destroyed"))return;var t=this.get("boundingBox");t.one(".duration").setContent(this._getPlaytimeString(e.position));var a=this.getProperty("READY_STATES");this.get("readyState")!==a.SOUND_LOADED&&this._set("readyState",a.SOUND_LOADED);var i=t.one(".progress-inner");var n=e.position/this._audio.duration*100;t.removeClass("loading");i&&i.setStyle("width",n+"%")},_onStop:function(){this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onPause:function(){this._set("playState",this.getProperty("PLAY_STATES").PAUSED)},_onDataError:function(){this.stop();this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onLoad:function(e){e||(this._loadFailTimer=c.later(1e4,this,function(){this.stop();this._set("readyState",this.getProperty("READY_STATES").SOUND_LOAD_FAILED)}))}},{CSS_PREFIX:"sqs-audio-player",PLAY_STATES:{PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped"},READY_STATES:{INITIALIZED:"initialized",FLASH_BLOCKED:"flash-blocked",SECURITY_ERROR:"security-error",SOUND_LOAD_FAILED:"sound-load-failed",SOUND_LOADED:"sound-loaded"},TEMPLATE:'<div class="controls"></div><div class="placeholder"></div><div class="progress"><div class="progress-inner"><div class="scrubber"></div></div></div><div class="duration"></div><div class="volume"></div>',ATTRS:{strings:{value:{placeholder:n("Click to play…"),download:n("Download"),durationPlaceHolder:"0:00 / 0:00",loadFail:n("Unable to load sound at the URL"),soundManagerFlashFail:n("Sorry, could not load because flash is blocked."),soundManagerSecurityFail:n("Sorry, there was a JavaScript security error."),soundManagerURLFail:n("Unable to access audio stream.")}},fixedUrl:{getter:function(){var e=this.get("url");e&&e.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(e=e.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));return e},readOnly:true},playState:{lazyAdd:false,valueFn:function(){return this.getProperty("PLAY_STATES").STOPPED},readOnly:true},readyState:{lazyAdd:false,valueFn:function(){return this.getProperty("READY_STATES").INITIALIZED},readOnly:true},url:{value:null},volume:{validator:function(e){(e<0||e>100&&false)&&console.warn(this.name+": Volume must be between 0 and 100, volume remains unchanged.");return true},value:66},volumeLevels:{value:6,writeOnce:"initOnly"},stopOthersOnPlay:{value:true},render:{value:true}}});var i=[];c.Squarespace.Widgets.AudioPlayer.initializeNode=function(e){if(e.get("children").size()>0)return;if(!c.Widget.getByNode(e.one("."+c.Squarespace.Widgets.AudioPlayer.CSS_PREFIX))){var t=c.Object.getValue(e.getData(),"design-style")||"minimal";var a;switch(t){case"legacy":a=new c.Squarespace.Widgets.AudioPlayer({render:e});break;default:a=new c.Squarespace.Widgets.AudioPlayerMinimal({render:e})}i.push(a)}};c.config.win.Squarespace.onInitialize(c,function(){c.all(".sqs-audio-embed").each(c.Squarespace.Widgets.AudioPlayer.initializeNode)});c.config.win.Squarespace.onDestroy(c,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["base","event","node","squarespace-album-player","squarespace-ss-widget","squarespace-util","squarespace-widgets-audio-player"]})},6041:function(e,t,a){var s=a(5192).AlbumPageViewBinder;YUI.add("squarespace-album-player",function(a){var i=[];var n=function(e){var t=e.one(".album-cover img");t&&a.config.win.ImageLoader.load(t,{load:true});e.removeClass("loading")};a.on("windowresize",function(){a.all(".sqs-audio-playlist").each(function(e){n(e)})});a.config.win.Squarespace.onInitialize(a,function(){a.all(".sqs-audio-playlist").each(function(e){var t=new s;i.push(t);t.connectToNode(e.getDOMNode());n(e)})});a.config.win.Squarespace.onDestroy(a,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["event-resize"]})},6042:function(e,t,a){var o=a(24).t;var l=a(3494);var c=a(595);YUI.add("squarespace-widgets-audio-player",function(s){var i=100;var n=2;var r=75;var t=s.namespace("Squarespace.Widgets").AudioPlayerMinimal=s.Base.create("audioPlayer",s.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.setAttrs(this.get("render").getData());""===this.get("title")&&""!==this.get("url")&&this.set("title",o("Untitled"));this.set("showDownload","true"===this.get("show-download"));this.set("colorTheme",this.get("color-theme"));this.set("artistName",this.get("author"));this._resizeEmitter=new s.Squarespace.ResizeEmitter;this._registerTrack()},destructor:function(){if(s.Lang.isValue(this._funk)){this._funk.pause();this._funk=null}if(s.Lang.isValue(this._resizeEmitter)){this._resizeEmitter.destroy();this._resizeEmitter=null}this._pauseAudio()},renderUI:function(){t.superclass.renderUI.call(this);this.get("showDownload")&&this._renderDownloadLink();this.get("boundingBox").addClass(this.get("colorTheme"))},bindUI:function(){var e=this.get("contentBox");e.one(".action").on("click",function(){if(this.get("firstPlay"))return;this.set("playing",!this.get("playing"))},this);this.after("playingChange",this._playingChange,this);this.after("progressChange",function(e){var t=this.get("contentBox").one(".player .time .progress");t.setContent(e.newVal);t.addClass("loaded");this._updateTracker(this.get("position"))},this);this.after("durationChange",function(e){var t=this.get("contentBox").one(".player .time .total");t.setContent(e.newVal);t.addClass("loaded");this.syncUI()},this);this.after("titleChange",function(e){this.get("contentBox").one(".player .labels .title").setContent(e.newVal)},this);this.after("artistNameChange",function(e){this.get("contentBox").one(".player .labels .artistName").setContent(e.newVal)},this);this._registerEvent(this._resizeEmitter.on("resize:end",this.syncUI,this));var a=e.on("click",function(e){var t=this.get("showDownload")&&e.target===this._downloadNode.one("a");if(t||!this.get("url"))return;if(this.get("firstPlay")){e.halt();a.detach();a=null;this._setupScrubber();this.set("firstPlay",false);this.set("playing",true)}},this)},syncUI:function(){var e=this.get("boundingBox");if(!e.getDOMNode())return;if(e.ancestor(".sqs-editing")){this._pauseAudio();this.set("playing",false)}var t=e.get("offsetWidth");e.one(".player .track").setStyle("width",t);e.toggleClass("playing",this.get("playing"));e.toggleClass("tiny",t<300);e.toggleClass("no-artist",""===this.get("artistName"));e.toggleClass("first-play",this.get("firstPlay"));var a=e.one(".player .labels .title");var i=a.get("offsetWidth")<a.get("scrollWidth");a.toggleClass("marquee-mark",i)},_renderNativeAudio:function(){var e=s.Lang.sub(t.NATIVE_TEMPLATE,this.getAttrs());this.get("contentBox").replace(s.Node.create(e))},_renderDownloadLink:function(){var e=this.get("contentBox").one(".player");var t=c.addQueryParam(this.get("url"),"download","true");var a='<div class="download"><a href="'+t+'" target="_blank">'+o("Download")+"</a></div>";this._downloadNode=e.one(".secondary-controls").appendChild(a);e.addClass("download")},_renderVisualizer:function(){var e=this.get("contentBox").one(".visualizer");var t="";for(var a=0;a<i;a++)t+='<div class="eq-bar"><div class="height"></div></div>';e.append(t)},_pauseAudio:function(){l.player&&l.player.pause&&l.player.pause()},_playingChange:function(e){var t=this.get("fixedUrl");if(s.UA.ios){window.location.href=t;return}s.Lang.isValue(this._funk)||this._registerTrack();e.newVal?this._funk.play():this._funk.pause();this.syncUI()},_registerTrack:function(){var e=s.bind(function(){this.set("playing",false)},this);var t=s.bind(function(){this.set("playing",true);l.player.setVolume(this.get("volume")/100)},this);var a=s.bind(function(){var e=this._funk.duration;if(e>0){e=this._durationToStr(e);this.set("duration",e)}},this);var i=s.bind(function(){this.set("playing",false);this.set("position",0)},this);this._funk=l.createTrack(this.get("fixedUrl"));this._funk.on("ready",a);this._funk.on("ended",i);this._funk.on("play",t);this._funk.on("pause",e);this._funk.on("inactive",e);this._funk.on("positionChange",s.bind(this._whilePlaying,this))},_whilePlaying:function(e){if(!this.get("playing"))return;this.set("position",e.position);this.set("progress",this._durationToStr(e.position))},_updateTracker:function(e){var t=this.get("contentBox").one(".track .played");var a=e/this._funk.duration*100;t.setStyle("width",a+"%")},_mergeEQData:function(){var e=theSound.eqData;var t=e.left;var a=e.right;var i=t.length;var n=[];for(var s=0;s<i;s++)n.push((parseFloat(t[s])+parseFloat(a[s]))/2);return n},_calculateEQChunks:function(){var e=this._mergeEQData();var t=[];for(var a=0;a<length;a+=n){var i=0;s.Array.each(e.slice(a,a+n),function(e){i+=e});t.push(i/n*r)}return t},_drawEQBars:function(){var i=this.get("contentBox").all(".eq-bar .height");var n=this._calculateEQChunks();s.Array.each(n,function(e,t){var a=i.item(t);s.Lang.isValue(a)&&a.setStyle("height",Math.min(45,n[t]))},this);this.syncUI()},_setupScrubber:function(){var a=s.Node.create('<div class="scrubber-shim"></div>');var i;a.setStyles({position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:Math.pow(10,7),cursor:"none"});this.get("contentBox").one(".player .track").on("mousedown",function(e){this._updatePosition(e);var t=l.player.getVolume();i=this.get("contentBox").one(".track").get("region");this._funk.isActive&&l.player.setVolume(.25*t);s.one("body").append(a);a.once("mouseup",function(){l.player.setVolume(t);a.remove()},this)},this);a.on("mousemove",function(e){var t=this._getRelativePosition(i,e.pageX);this._funk.seek(t);if(!this.get("playing")){this.set("progress",this._durationToStr(t));this.set("position",t)}},this)},_updatePosition:function(e){if(this.get("firstPlay"))return;var t=this.get("contentBox").one(".track").get("region");var a=this.get("contentBox").one(".track .played .icon");var i=a.get("offsetWidth")/2;this._funk.seek(this._getRelativePosition(t,e.pageX-i))},_durationToStr:function(e){var t=Math.floor(e%60);var a=Math.floor(e/60);var i=Math.floor(a/60);i>0&&(a%=60);var n="";if(i>0){n+=i+":";a<10&&(n+="0")}t<10&&(t="0"+t);n+=a+":"+t;return n},_getRelativePosition:function(e,t){return this._funk.duration*Math.min(1,Math.max(0,(t-e.left)/e.width))},_selectVolume:function(a){var e=this.get("contentBox").all(".player .volume .bar");e.removeClass("active");e.filter(function(e){var t=parseInt(e.getAttribute("data-level"),10);return t<=a}).addClass("active");s.Squarespace.Singletons.Audio.set("volume",a)}},{CSS_PREFIX:"sqs-widgets-audio-player",HANDLEBARS_TEMPLATE:"block-audio-player.html",ATTRS:{fixedUrl:{getter:function(){var e=this.get("url");e.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(e=e.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));return e},readOnly:true},firstPlay:{value:true,validator:s.Squarespace.AttrValidators.isBoolean},position:{value:0,validator:s.Squarespace.AttrValidators.isNumber},progress:{validator:s.Squarespace.AttrValidators.isNullOrString},duration:{validator:s.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:s.Squarespace.AttrValidators.isString},artistName:{value:"",validator:s.Squarespace.AttrValidators.isString},playing:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},volume:{value:100,validator:s.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","node","squarespace-block-audio-player-template","squarespace-dom-emitters-resize","squarespace-ss-widget","widget"]})},6043:function(e,t){YUI.add("squarespace-block-audio-player-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["block-audio-player.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression;s+='<div class="player">\n  <div class="action">\n    <div class="play">\n      <div class="play-button"></div>\n    </div>\n    <div class="pause">\n      <div class="pause-button"></div>\n    </div>\n  </div>\n  <div class="labels">\n    <div class="title-wrapper">\n      <div class="title" title="';if(r=a.title)r=r.call(t,{hash:{},data:n});else{r=t.title;r=typeof r===o?r.apply(t):r}s+=l(r)+'" data-title="';if(r=a.title)r=r.call(t,{hash:{},data:n});else{r=t.title;r=typeof r===o?r.apply(t):r}s+=l(r)+'">';if(r=a.title)r=r.call(t,{hash:{},data:n});else{r=t.title;r=typeof r===o?r.apply(t):r}s+=l(r)+'</div>\n    </div>\n    <div class="artistName" title="';if(r=a.artistName)r=r.call(t,{hash:{},data:n});else{r=t.artistName;r=typeof r===o?r.apply(t):r}s+=l(r)+'">';if(r=a.artistName)r=r.call(t,{hash:{},data:n});else{r=t.artistName;r=typeof r===o?r.apply(t):r}s+=l(r)+'</div>\n  </div>\n  <div class="secondary-controls">\n    <div class="time">\n      <span class="progress"></span>\n      <span class="total">';if(r=a.duration)r=r.call(t,{hash:{},data:n});else{r=t.duration;r=typeof r===o?r.apply(t):r}s+=l(r)+'</span>\n    </div>\n  </div>\n  <div class="track">\n    <span class="played"><span class="icon"></span></span>\n  </div>\n</div>\n';return s})})();var t="block-audio-player.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6044:function(e,t){YUI.add("squarespace-calendar-block-renderer",function(o){var s=[];o.namespace("Squarespace");o.Squarespace.CalendarBlockRenderer={};o.Squarespace.CalendarBlockRenderer.renderCalendar=function e(t,a,i){var n;o.Lang.isString(a)?n=a:o.Object.hasKey(a,"collectionId")?n=a.collectionId:o.instanceOf(a,o.Model)&&(n=a.get("id"));var s={date:new Date,collectionId:n};o.Lang.isValue(i)&&o.merge(s,{pageCollectionId:i});var r=new o.Squarespace.SquarespaceCalendar(s);r.plug(o.Squarespace.SquarespaceCalendarRenderer);r.render(t);return r};o.Squarespace.CalendarBlockRenderer.initializeNode=function e(t){var a=t.one(".sqs-block-content");var i=o.JSON.parse(t.getAttribute("data-block-json"));var n=!!o.Array.find(s,function(e){return e.get("boundingBox").ancestor(".sqs-block-content")===a});if(n)return;s.push(o.Squarespace.CalendarBlockRenderer.renderCalendar(a,i))};o.config.win.Squarespace.onInitialize(o,function e(){var t=o.all(".sqs-block.calendar-block[data-block-json]");t.size()&&t.each(o.Squarespace.CalendarBlockRenderer.initializeNode)});o.config.win.Squarespace.onDestroy(o,function e(){s.forEach(function(e){e.destroy()});s.length=0})},"1.0",{requires:["model","squarespace-calendar-core-renderer"]})},6045:function(e,t){YUI.add("squarespace-chartjs-helpers",function(e){},"1.0",{requires:["@sqs/layout-engine/chartjs-helpers"]})},6046:function(e,t,a){var _=a(90);var C=a(21);var E=a(24).t;var k=a(6394);var w=a(5814);YUI.add("@sqs/layout-engine/chartjs-helpers",function(p){p.namespace("ChartJS");var t=500;var s=[];var c=p.ChartJS.getDefaultChartData=function(e){switch(parseInt(e,10)){case w.CHART_BAR:return{data:[[150],[250],[150]],sampleLabels:[E("New York"),E("Las Vegas"),E("San Francisco")],seriesLabels:[E("Population")]};case w.CHART_LINE:return{data:[[150,100],[250,200],[150,350]],sampleLabels:[E("New York"),E("Las Vegas"),E("San Francisco")],seriesLabels:[E("Population"),E("GDP")]};case w.CHART_PIE:return{data:[[150],[200],[150]],sampleLabels:[E("New York"),E("Las Vegas"),E("San Francisco")],seriesLabels:[E("Population")]}}};function r(e){s.push(e)}function e(e){s.remove(e)}function o(){var e=s.map(function(e){return null===e.node.getDOMNode()?e:null});e.filter(function(e){return e}).forEach(function(e){e.destroy()})}function l(e,t,a){var i={default:[[121,121,121],[191,191,191],[229,229,229],[156,156,156],[0,0,0]],Cobblestone:[[41,31,22],[180,158,146],[127,112,105],[76,61,48],[69,45,35]],Italia:[[124,184,200],[2,100,171],[2,155,59],[227,2,27],[202,180,130]],Muted:[[52,43,43],[112,105,100],[156,148,131],[212,207,198],[240,226,208]],Primary:[[240,82,59],[247,180,19],[36,128,196],[144,187,98],[134,95,144]],Warm:[[153,0,0],[226,71,45],[233,148,48],[248,220,171],[251,243,171]],Cool:[[16,44,99],[7,75,230],[81,146,235],[158,173,211],[225,220,252]],"Tea Party":[[115,13,3],[182,125,44],[234,195,148],[231,144,72],[64,2,18]],Highway:[[176,201,217],[166,166,166],[89,72,57],[191,108,59],[230,134,50]],Shops:[[227,227,230],[69,78,89],[95,205,217],[113,153,138],[213,230,69]],Suburbs:[[73,33,48],[227,227,227],[69,84,115],[206,208,159],[236,101,102]],"DB-Nine":[[134,135,136],[168,182,111],[169,143,119],[227,126,94],[100,138,189]],"M-Three":[[98,140,187],[209,191,78],[90,98,105],[13,76,136],[188,199,208]],Thunderbird:[[217,60,73],[103,189,218],[231,231,192],[227,170,179],[177,202,123]]};var n={dark:1,medium:.75,light:.5,xlight:.2,off:0};e in i||(e="default");var s=i[e];return"rgba("+s[t%s.length]+","+n[a]+")"}function d(e){return{scaleFontFamily:e.getComputedStyle("font-family"),scaleFontSize:parseInt(e.getComputedStyle("font-size"),10),scaleFontStyle:e.getComputedStyle("font-style"),tooltipFontFamily:e.getComputedStyle("font-family"),tooltipFontSize:.8*parseInt(e.getComputedStyle("font-size"),10),tooltipFontStyle:e.getComputedStyle("font-style"),tooltipTitleFontFamily:e.getComputedStyle("font-family"),tooltipTitleFontSize:parseInt(e.getComputedStyle("font-size"),10),tooltipTitleFontStyle:"bold",scaleLabel:"<%= '  ' + value%>"}}function u(e){var t=e;"CANVAS"!==t.get("tagName")&&(t=t.one("canvas"));return t}function g(a,e){if(e){var t=a.sampleLabels;a.sampleLabels=a.seriesLabels;a.seriesLabels=t;a.data=p.Array(a.data[0]).map(function(e,t){return p.Array(a.data).map(function(e){return e[t]})})}var i=Math.min(a.data.length,a.sampleLabels.length);var n=Math.min(a.data[0].length,a.seriesLabels.length);a.sampleLabels=a.sampleLabels.slice(0,i);a.seriesLabels=a.seriesLabels.slice(0,n);a.data=a.data.slice(0,i);for(var s=0;s<a.data.length;s++)a.data[s]=a.data[s].slice(0,n);return a}function a(e,t,a){var i=e.datasets[0][t].length;var n=a.sampleLabels.length-i;var s=e.datasets.length;var r=a.seriesLabels.length-s;return r||n&&r}function i(e,t,a){var i=e.datasets.length;var n=a.seriesLabels.length-i;var s=0;if(n>0){var r=e.datasets[i-1];for(s=0;s<n;s++)e.datasets.push(p.clone(r))}else n<0&&(e.datasets=e.datasets.slice(0,a.seriesLabels.length));var o=e.datasets[0][t].length;var l=a.sampleLabels.length-o;if(l>0){var c=o;for(s=0;s<l;s++){var d=p.Array(a.seriesLabels).map(function(){return 0});e.addData(d,a.sampleLabels[c++])}}else if(l<0)for(s=0;s>l;s--)e.removeData();var u=0;for(u=0;u<a.sampleLabels.length;u++)e.scale.xLabels[u]=a.sampleLabels[u];for(u=0;u<e.datasets.length;u++){e.datasets[u].label=a.seriesLabels[u];for(s=0;s<e.datasets[u][t].length;s++){var g=a.data[s][u];(isNaN(g)||null===g||void 0===g)&&(g=0);e.datasets[u][t][s].value=[g];e.datasets[u][t][s].label=a.sampleLabels[s]}}e.update()}function h(i,n){return function(e){var t="";t+='<ul class="'+p.Escape.html(e.name.toLowerCase())+'-legend">';for(var a=0;a<e[i].length;a++){t+='<li><span style="background-color:'+e[i][a][n]+'"></span>';e[i][a].label&&(t+=p.Escape.html(e[i][a].label));t+="</li>"}t+="</ul>";return t}}var n=function(e,t,a,i,n){this.node=e;this._options=n||{};this._canvas=u(e);this._narrow=false;this._palette=a;this._flip=i;this._data=g(p.clone(t,true),this._flip);this._makeChart();this.generateLegend();this.resize();r(this)};n.prototype={destroy:function(){this._chart.destroy();e(this)},resize:function(){var e=this._canvas.getDOMNode();if(e){if(e.parentNode.clientWidth>0){this._chart.stop();this._chart.resize(this._chart.render,true);if(e.parentNode.clientWidth<t){if("Bar"===this._chart.name&&!this._narrow){this._options=p.merge(this._options,{barValueSpacing:5,barDatasetSpacing:1});this._rebuildChart()}this.node.addClass("narrow-chart");this._narrow=true}else{if("Bar"===this._chart.name&&this._narrow){this._options=p.merge(this._options,{barValueSpacing:20,barDatasetSpacing:5});this._rebuildChart()}this.node.removeClass("narrow-chart");this._narrow=false}}}else o()},generateLegend:function(){this.node.all(".legend-content").each(function(e){e.empty();e.append(this._chart.generateLegend())},this)},_rebuildChart:function(){this._chart.destroy();this._makeChart()}};var f=p.namespace("ChartJS").BarChart=p.extend(function(){n.apply(this,arguments)},n,{_makeChart:function(){var e=p.merge(d(this.node),{barShowStroke:true,datasetStrokeWidth:3,animationSteps:25,barValueSpacing:20,barDatasetSpacing:5,legendTemplate:h("datasets","fillColor")},this._options);var t={labels:this._data.sampleLabels,datasets:[]};for(var a=0;a<this._data.seriesLabels.length;a++){var i=[];for(var n=0;n<this._data.sampleLabels.length;n++)i.push(this._data.data[n][a]);t.datasets.push({label:this._data.seriesLabels[a],data:i,fillColor:l(this._palette,a,"dark"),strokeColor:"rgba(0,0,0,0)",highlightFill:l(this._palette,a,"medium"),highlightStroke:"rgba(0,0,0,0)"})}this._canvas.empty();var s=this._canvas.getDOMNode().getContext("2d");this._chart=new k(s).Bar(t,e)},sync:function(e){_(e)?this._data=c(w.CHART_BAR):this._data=g(p.clone(e,true),this._flip);a(this._chart,"bars",this._data)?this._rebuildChart():i(this._chart,"bars",this._data);this.generateLegend();this.resize()}});var m=p.ChartJS.LineChart=p.extend(function(){n.apply(this,arguments)},n,{_makeChart:function(){var e=p.merge(d(this.node),{datasetFill:false,animationSteps:25,legendTemplate:h("datasets","strokeColor")},this._options);var t={labels:this._data.sampleLabels,datasets:[]};for(var a=0;a<this._data.seriesLabels.length;a++){var i=[];for(var n=0;n<this._data.sampleLabels.length;n++)i.push(this._data.data[n][a]);t.datasets.push({label:this._data.seriesLabels[a],data:i,fillColor:"rgba(0,0,0,0)",strokeColor:l(this._palette,a,"dark"),pointColor:l(this._palette,a,"dark"),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:l(this._palette,a,"medium")})}var s=this._canvas.getDOMNode().getContext("2d");this._chart=new k(s).Line(t,e)},sync:function(e){_(e)?this._data=c(w.CHART_LINE):this._data=g(p.clone(e,true),this._flip);a(this._chart,"points",this._data)?this._rebuildChart():i(this._chart,"points",this._data);this.generateLegend();this.resize()}});function v(e){var t=p.Array(e.data).reduce(function(e,t){return e+(t.length>0?t[0]:0)},0);0===t&&(e.data=p.Array(e.data).map(function(e){return p.Array(e).map(function(e,t){return 0===t?1:e})}));return e}var b=p.ChartJS.PieChart=p.extend(function(){n.apply(this,arguments)},n,{_makeChart:function(){var e=p.merge(d(this.node),{datasetFill:false,percentageInnerCutout:60,animationSteps:25,legendTemplate:h("segments","fillColor")},this._options);var t=[];for(var a=0;a<this._data.sampleLabels.length;a++)t.push({label:this._data.sampleLabels[a],value:this._data.data[a][0],color:l(this._palette,a,"dark"),highlight:l(this._palette,a,"medium")});var i=this._canvas.getDOMNode().getContext("2d");this._chart=new k(i).Pie(t,e)},sync:function(e){var t=0;_(e)?this._data=c(w.CHART_PIE):this._data=v(g(p.clone(e,true),this._flip));var a=this._chart;var i=this._data;var n=a.segments.length;var s=i.sampleLabels.length-n;if(s>0){var r=n;for(t=0;t<s;t++){a.addData({value:0,label:i.sampleLabels[r],color:l(this._palette,r,"dark"),highlight:l(this._palette,r,"medium")});r++}}else if(s<0)for(t=0;t>s;t--)a.removeData();for(var o=0;o<a.segments.length;o++){a.segments[o].value=i.data[o][0];a.segments[o].label=i.sampleLabels[o]}a.update();this.generateLegend();this.resize()}});p.ChartJS.createChart=function(e,t,a,i,n){function s(e){switch(e){case w.CHART_BAR:return f;case w.CHART_LINE:return m;case w.CHART_PIE:return b}}var r=parseInt(e,10);a&&a.data&&0!==a.data.length||(a=c(r));var o=s(r);var l=new o(t,a,i,n);return l};var y=p.ChartJS.initializeCharts=function(){function e(e){o();var t=s.map(function(e){return e.node});var a=t.indexOf(e)>=0;if(!a){var i=e.getAttribute("data-settings")||"{}";try{var n=JSON.parse(i.replace(/\&quot;/g,'"'));p.ChartJS.createChart(n.chartType,e,n.dataTable,n.palette,n.flip)}catch(e){if(!(e instanceof SyntaxError))throw e;console.error("[layout-engine/chartjs-helpers] Failed to render chart. Parse error.")}}}p.all(".sqs-block.chart-block .chart-block-container").each(e)};var S;function q(){function e(){clearTimeout(S);S=setTimeout(function(){s.forEach(function(e){e.resize()})},50)}p.one(p.config.win).after("resize",e)}p.config.win.Squarespace=p.config.win.Squarespace||{onInitialize:C,onDestroy:C};p.config.win.Squarespace.onInitialize(p,function(){y();q()});p.config.win.Squarespace.onDestroy(p,function(){clearTimeout(S);s.forEach(function(e){e.destroy()})})},"1.0",{requires:[]})},6047:function(e,t,a){var v=a(24).t;var i=a(1596);var n=a(701);var o=a(309);var l=a(517);YUI.add("squarespace-cart-utils",function(m){var s;var r;m.namespace("Squarespace.CartUtils");m.Squarespace.CartUtils={initializeAddToCartButtons:function(){m.all(".sqs-add-to-cart-button").each(function(e){switch(this._getProductTypeFromPurchaseButton(e)){case o.PHYSICAL:case o.DIGITAL:case o.SERVICE:this._initializeAddToCartButton(e);break;case o.GIFT_CARD:this._initializePurchaseGiftCardButton(e);break;default:false;break}e.hasClass("use-form")&&!r&&m.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(e){r=e},this)},this)},_initializeAddToCartButton:function(e){var t=m.Squarespace.Commerce.isExpressCheckout();var a="true"===e.getAttribute("data-is-subscription");var i;"false"===e.getAttribute("data-use-custom-label")&&(a?i=v("Subscribe"):t&&(i=v("Purchase")));this._initializeButton(e,i);var n=a?m.Squarespace.CartUtils._goToSubscriptionCheckout:m.Squarespace.CartUtils._goToCheckoutOrAddToCart;e.on("click",m.Squarespace.CartUtils._addCartEntry,this,n);e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||this._addCartEntry(e,n)}.bind(this))},_initializePurchaseGiftCardButton:function(e){"false"===e.getAttribute("data-use-custom-label")?this._initializeButton(e,v("Purchase")):this._initializeButton(e);e.on("click",m.Squarespace.CartUtils._purchaseGiftCard,this);e.on("keypress",function(e){13!==e.keyCode&&32!==e.keyCode||this._purchaseGiftCard(e)}.bind(this))},_initializeButton:function(e,t){var a=e.one(".sqs-add-to-cart-button-inner");a.plug(m.Squarespace.Animations.Scalable,{duration:.2});if(t){a.setContent(t);e.setData("original-label",t)}},_getProductTypeFromPurchaseButton:function(e){return Number(e.getAttribute("data-product-type"))||o.UNKNOWN},_setButtonWidth:function(e){var t=Math.ceil(e.getDOMNode().getBoundingClientRect().width);e.get("parentNode").setStyles({width:t+"px",minWidth:"11em"});e.setStyle("display","block")},_showError:function(e){var t=m.Squarespace.Commerce.isExpressCheckout()?v("Unable to Purchase Item"):v("Unable to Add Item");new m.Squarespace.Widgets.Alert({"strings.title":t,"strings.message":e})},_showGiftCardError:function(e){var t=v("Unable to purchase Gift Card");new m.Squarespace.Widgets.Alert({"strings.title":t,"strings.message":e})},_generateErrorString:function(e){var t=e.length;if(1===t)return v("Please select the {option} option.",{option:e[0]});if(2===t)return v("Please select the {option1} and {option2} options.",{option1:e[0],option2:e[1]});return v("Please select the {optionsList} and {lastOption} options.",{optionsList:e.slice(0,-1).join(", "),lastOption:e[e.length-1]})},_addCartEntry:function(e,t){var a=e.currentTarget;var i=a.get("parentNode");if(i.hasClass("cart-added"))return;var n=a.getAttribute("data-item-id");var s,r;var o=a.get("parentNode");var l=m.one(o.siblings(".product-variants").item(0));if(m.Lang.isValue(l)){var c=JSON.parse(l.getAttribute("data-unselected-options"));var d=c.length;if(d>0){this._showError(this._generateErrorString(c));return}var u=l.getAttribute("data-selected-variant");var g=l.getAttribute("data-variant-in-stock");var p=u?JSON.parse(u):null;var h=!!g;if(!p){this._showError(v("Sorry, that item variant is unavailable. Please select another variant."));return}if(!h){this._showError(v("Sorry, we do not have enough of that item available."));return}s=p}var f=a.get("parentNode").siblings(".product-quantity-input").item(0);if(f){r=m.one(f).one("input").get("value");if(!m.Lang.isNumber(Number(r))){this._showError(v("Quantity must be a number."));return}}a.hasClass("use-form")?this._verifyItemInStock({itemId:n,variant:s,inStockCb:m.bind(function(){m.Squarespace.CartUtils._openAdditionalFieldsForm(a,function(e){t(a,n,s,r,e,this._showError)},this)},this),outOfStockCb:m.bind(function(){this._showError(v("Sorry, we do not have enough of that item available."))},this)}):t(a,n,s,r,null,this._showError.bind(this))},_goToSubscriptionCheckout:function(e,t,a,i,n,s){if(m.Lang.isValue(i)&&i%1!==0){s(v("Quantity must be a whole number"));m.Squarespace.CartUtils._setButtonStateIdle(e);return}m.Data.post({url:"/api/3/commerce/cart/subscription",json:true,data:{itemId:t,sku:a&&a.sku,qty:i,additionalFields:m.JSON.stringify(n||{})},success:function(e){m.Squarespace.Commerce.goToSubscriptionPage(e.cartToken)},failure:function(e){s(e.message)}})},_purchaseGiftCard:function(e){var t=e.currentTarget;var a=t.getAttribute("data-item-id");var i=null;var n=t.get("parentNode").siblings(".product-variants").item(0);if(n){var s=JSON.parse(n.getAttribute("data-unselected-options"));if(s.length){this._showGiftCardError(v("Select a denomination for the Gift Card"));return}i=JSON.parse(n.getAttribute("data-selected-variant"))}m.Squarespace.Commerce.goToGiftCardPage(a,i)},_verifyItemInStock:function(a){var i=m.Squarespace.Singletons.ShoppingCart;m.Data.get({url:m.Squarespace.API_ROOT+"commerce/inventory/stock/",data:{itemId:a.itemId},success:function(e){var t=m.Array.some(e.results,function(e){if(e.unlimited)return true;return e.qtyInStock>i.totalForItem(a.itemId,a.variant)});t?a.inStockCb():a.outOfStockCb()}})},_goToCheckoutOrAddToCart:function(a,e,t,i,n,s){m.Squarespace.CartUtils._setButtonStateAdding(a);if(m.Lang.isValue(i)&&i%1!==0){s("Quantity must be a whole number");m.Squarespace.CartUtils._setButtonStateIdle(a);return}var r=m.Squarespace.Commerce.isExpressCheckout();m.Squarespace.Singletons.ShoppingCart.addEntry(e,t,i,n,r,function(e,t){if(e){s(e);m.later(1e3,this,function(){m.Squarespace.CartUtils._setButtonStateIdle(a)});return}try{m.Squarespace.CartUtils._trackAddToCartHelper(t)}catch(e){console.error(e);l.trackCaughtError("common","trackAddToCart issue",e.stack)}if(m.Squarespace.Commerce.isExpressCheckout()){m.Squarespace.Commerce.goToCheckoutPage();return}m.later(1e3,this,function(){if(!m.Lang.isNull(a._node)){m.Squarespace.CartUtils._setButtonStateAdded(a);m.later(2e3,this,function(){m.Squarespace.CartUtils._setButtonStateIdle(a)})}})},this)},_setButtonStateAdding:function(a){var i=a.one(".sqs-add-to-cart-button-inner");var n=a.get("parentNode");var s=n.one(".ProductItem-view-cart");var r=false;m.Squarespace.CartUtils._setButtonWidth(a);i.once("hidden",function(){i.empty();a.addClass("cart-adding");var e=v("Adding…");i.append('<div class="status-text">'+e+"</div>");if(r&&!s){var t=v("View Cart");n.append('<div class="ProductItem-view-cart" style="display: none;"><a class="sqs-add-to-cart-button" href="/cart">'+t+"</a></div>")}i.show()},this);i.hide()},_setButtonStateAdded:function(e){var t=e.one(".sqs-add-to-cart-button-inner");t.empty();var a=v("Added!");e.addClass("cart-added");t.append('<div class="status-text">'+a+"</div>")},_setButtonStateIdle:function(e){var t=e.one(".sqs-add-to-cart-button-inner");t.once("hidden",function(){t.empty();e.removeClass("cart-adding");t.setContent(e.getData("original-label"));t.show()},this);t.hide()},_openAdditionalFieldsForm:function(e,t,a){s&&s.destroy();s=new m.Squarespace.Widgets.ModalLightbox({render:m.one("body")});var i=m.JSON.parse(e.getData("form"));var n=new m.Squarespace.Widgets.AsyncForm({form:i,formTemplate:r,formSubmitButtonText:e.getData("original-label"),formName:i.name,showTitle:true});n.on("submission",function(e){t&&t.call(a||this,e.data);s.close()},this);s.set("content",n);s.once("close",function(){n.destroy()},this);s.open()},_getAdditionalFieldsFormTemplateSchema:function(t,a){m.Data.get({url:"/api/template/GetTemplateSchema",data:{type:n.FORM},success:function(e){t.call(a||this,e)}},this)},_trackAddToCartHelper:function(e){var t=e.chosenVariant?e.chosenVariant.sku:null;var a=e.chosenVariant?e.chosenVariant.attributes:null;i.trackAddToCart({value:(e.subTotal/100).toFixed(2),currency:e.item.price.currency,content_name:e.title,content_type:"product",content_ids:t,contents:[{id:t,quantity:e.quantity,item_price:(e.purchasePriceCents/100).toFixed(2),attributes:a}]})}}},"1.0",{requires:["base","json","node","squarespace-animations","squarespace-async-form","squarespace-commerce-utils","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-spinner","squarespace-widgets-alert"]})},6048:function(e,t,a){var l=a(24).t;var i=a(2026);var n=a(1310);YUI.add("squarespace-models-shopping-cart",function(o){o.namespace("Squarespace.Models");o.namespace("Squarespace.Singletons");var a=o.Squarespace.Models.ShoppingCart=o.Base.create("shoppingCart",o.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:true});this.publish("loaded",{emitFacade:true});this.publish("recalculate-start",{emitFacade:true});this.publish("recalculate-end",{emitFacade:true});this._readInProgress=false;this._isRecalculating=false;this.on("recalculate-start",function(){this._isRecalculating=true},this);this.on("recalculate-end",function(){this._isRecalculating=false},this)},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.created;o.Lang.isNull(t)||(e.created=t.getTime());return e},sync:function(e,t,a){switch(e){case"create":break;case"delete":break;case"read":this._read(t,a);break;case"update":break}},load:function(e,t,a){if("function"===typeof e){t=e;e={}}if(this._readinProgress){this.after("load",t,a);return}o.Model.prototype.load.call(this,e,t?o.bind(t,a||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(a,i){return o.Array.reduce(this.get("entries"),false,function(e,t){if(o.Lang.isValue(i))return e||t.itemId===a&&i.sku===t.chosenVariant.sku;return e||t.itemId===a})},addEntry:function(e,t,a,i,n,s,r){o.Data.post({url:"/api/commerce/shopping-cart/entries"+(n?"?isExpress=true":""),headers:{"Content-Type":"application/json"},data:o.JSON.stringify({itemId:e,sku:o.Lang.isValue(t)?t.sku:null,quantity:a,additionalFields:o.JSON.stringify(i)}),success:function(e){o.Squarespace.CommerceAnalytics.itemAdded(e);this.setAttrs(e.shoppingCart);this.fire("item-added");o.Lang.isFunction(s)&&s.call(r||this,null,e.newlyAdded)},failure:function(e){e.crumbFail&&(o.Squarespace.Utils.areCookiesEnabled()?e.message=l("Your session has expired. Please reload the page and try again."):e.message=l("Please enable cookies in your browser, reload the page, and try again."));o.Lang.isFunction(s)&&s.call(r||this,e.message,null)}},this)},updateFormSubmission:function(e,t,a,i){var n=e.chosenVariant;this.fire("recalculate-start");o.Data.put({headers:{"Content-Type":"application/json"},url:o.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}/additionalFields",{entryId:e.id}),data:o.JSON.stringify({itemId:e.itemId,sku:o.Lang.isValue(n)?n.sku:null,additionalFields:o.JSON.stringify(t)}),success:function(e){this.fire("recalculate-end");this.setAttrs(e.shoppingCart);o.Lang.isFunction(a)&&a.call(i||this,null,e.updatedEntry)},failure:function(e){this.fire("recalculate-end");o.Lang.isFunction(a)&&a.call(i||this,e.message,null)}},this)},totalForItem:function(a,i){var n=o.Lang.isValue(i);return o.Array.reduce(this.get("entries"),0,function(e,t){if(t.itemId===a&&(!n||n&&t.chosenVariant.sku===i.sku))return e+t.quantity;return e})},_read:function(e,t){this._readInProgress=true;this.fire("loading");o.Data.get({url:"/api/commerce/shopping-cart",data:{mock:e.mock?"true":"false",timecode:Date.now()},success:function(e){this.fire("loaded");this._readInProgress=false;t(null,e)},failure:function(e){this.fire("loaded");this._readInProgress=false;t(e.message,null)}},this)}},{ATTRS:{id:{validator:o.Lang.isString},websiteId:{validator:o.Lang.isString},orderId:{validator:o.Lang.isString},created:{getter:function(e){if(!o.Lang.isValue(e))return null;return new Date(e)},setter:function(e){if(o.Lang.isDate(e))return e.getTime();return e},validator:o.Lang.isNumber},isPurchased:{value:false,validator:o.Lang.isBoolean},entries:{value:[],validator:o.Lang.isArray},shippingOptions:{value:[],validator:o.Lang.isArray},selectedShippingOption:{validator:o.Lang.isObject},shippingLocation:{validator:o.Lang.isObject},applicableTaxRules:{value:[],validator:o.Lang.isArray},coupons:{value:[],validator:o.Lang.isArray},validCoupons:{value:[],validator:o.Lang.isArray},invalidCoupons:{value:[],validator:o.Lang.isArray},subtotalCents:{validator:o.Lang.isNumber,value:0},subtotalAmount:{getter:function(){var e=n.getStoreCurrency();return i.fromCents(this.get("subtotalCents"),e)}},taxCents:{validator:o.Lang.isNumber,value:0},shippingCostCents:{validator:o.Lang.isNumber,value:0},discountCents:{validator:o.Lang.isNumber,value:0},grandTotalCents:{validator:o.Lang.isNumber,value:0},totalQuantity:{validator:o.Lang.isNumber,value:0},hasDigital:{validator:o.Lang.isBoolean,value:false},purelyDigital:{validator:o.Lang.isBoolean,value:false},requiresShipping:{validator:o.Lang.isBoolean,value:false}}});o.Squarespace.Singletons.ShoppingCart=new a},"1.0",{requires:["base","model","squarespace-commerce-analytics","squarespace-commerce-utils","squarespace-util"]})},6049:function(e,t,a){var s=a(149);YUI.add("squarespace-commerce-analytics",function(a){var e=new a.Base.create("commerceTrack",a.Base,[],{_reportSafelyForCart:function(e,t){a.Lang.isValue(t)?this._reportSafely(e,{cartId:t.get("id"),websiteId:t.get("websiteId")}):this._reportSafely(e)},_reportSafely:function(e,t){try{a.Squarespace.Analytics.trackInternal(e,t)}catch(e){console.error(e)}},itemViewed:function(e){this.fire("commerce-item-viewed",e)},itemAdded:function(e){this.fire("commerce-item-added",e)},checkoutConfirmed:function(e){var t={orderId:e.id,cartId:e.purchasedCartId,testMode:e.testMode,websiteId:e.websiteId};this._reportSafely("commerce_checkout_order_confirmed",t);this.fire("commerce-checkout-confirmed",e)}},{ATTRS:{}});a.namespace("Squarespace");a.Squarespace.CommerceAnalytics=new e;var t=a.Base.create("commerceAnalytics",a.Base,[],{initializer:function(){this._events=[a.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this),a.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this),a.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this)]},destructor:function(){a.Array.invoke(this._events,"detach")},_getProtectedTracker:function(t){return function(e){try{this[t].call(this,e)}catch(e){}}},onItemViewed:function(e){},onItemAdded:function(e){},onCheckoutConfirmed:function(e){}},{ATTRS:{}});var i=a.Base.create("commerceAnalyticsGoogle",t,[],{onCheckoutConfirmed:function(t){if(window.ga){window.ga("ecommerce:addTransaction",{id:t.id,revenue:t.subtotal.decimalValue,shipping:t.shippingTotal.decimalValue,tax:t.taxTotal.decimalValue});a.each(t.items,function(e){window.ga("ecommerce:addItem",{id:t.id,name:e.productName,sku:e.sku||"digital",price:e.unitPrice.decimalValue,quantity:e.quantity})});window.ga("ecommerce:send")}}},{ATTRS:{}});new i;var n=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","item","recordType"]);n===s.STORE_ITEM&&a.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["array-invoke","base","event-custom","node","squarespace-util"]})},6050:function(e,t,a){var n=a(6395);var s=a(757);YUI.add("squarespace-products-collection-item-v2",function(i){i.namespace("Squarespace.SystemCollections.Products").ItemV2=i.Base.create("systemCollectionsProductsItemV2",i.Base,[],{initializer:function(){this._syncSelectedVariantOptions();this._bindUI();this._syncUI();this.get("isLightboxEnabled")&&this._lightboxifyImages()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach();this._tweakCloseEvent&&this._tweakCloseEvent.detach();var e=this.get("host").one(".product-variants");e&&e.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent);i.Array.each(this._selectChangeEvents,function(e){e.detach()});this._resizeEvent=null;this._tweakChangeEvent=null;this._tweakResetEvent=null;this._tweakCloseEvent=null;this._selectChangeEvents=null;this._variantChangeEvent=null;this._zoomInstances&&this._zoomInstances.length>0&&this._destroyImageZoomInstances();this.get("slideshow")&&this.get("slideshow").destroy(true);this.get("lightbox")&&this._destroyLightbox()},_bindUI:function(){this._resizeEvent=i.on("windowresize",function(){this._syncUI()},i.config.win,this);this._tweakChangeEvent=i.Global.on("tweak:change",this._tweakChangeHandler,this);this._tweakResetEvent=i.Global.on("tweak:reset",this._syncUI,this);window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&i.on("beforeunload",function(){this.destroy(true)},this)},_syncUI:function(){this.get("isProductGallerySlideshow")||this.get("isProductQuickView")?this.get("slideshow")?this._refreshSlideshowGallery():this._renderSlideshowGallery():this.get("isProductGalleryStacked")&&(this.get("isRenderedStackedGallery")?this._refreshStackedGallery():this._renderStackedGallery());this._loadRelatedItemImages();this._attachVariantImageListeners()},_attachVariantImageListeners:function(){var e=this.get("host").one(".product-variants");if(!e)return;if(this._variantChangeEvent){e.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent);this._variantChangeEvent=null}if(this.get("isProductGallerySlideshow")||this.get("isProductQuickView")){this._variantChangeEvent=this._handleSlideshowGalleryVariantChange.bind(this);e.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)}else if(this.get("isProductGalleryStacked")&&!s.isMobile()){this._variantChangeEvent=this._handleStackedGalleryVariantChange.bind(this);e.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)}},_handleStackedGalleryVariantChange:function(e){var t=e.detail.selectedVariant;var a=t.mainImageId;if(!a)return;var i=this.get("slideContainer").getDOMNode();var n=i.querySelector(".focus-image");if(n){n.classList.remove("focus-image");var s=n.getAttribute("data-slide-index");i.insertBefore(n,i.children[s])}var r=i.querySelector('[data-image-id="'+a+'"]');if(r){r.classList.add("focus-image");i.insertBefore(r,i.firstChild)}},_handleSlideshowGalleryVariantChange:function(e){var t=this.get("slideContainer").getDOMNode();var a=this.get("slideshow");var i=e.detail.selectedVariant;if(!i.mainImageId)return;var n=i.mainImageId;var s=t.querySelector('[data-image-id="'+n+'"]');if(!s)return;var r=s.getAttribute("data-slide-index");r&&a.setNewIndex(r-1)},_tweakChangeHandler:function(e){switch(e.getName()){case"tweak-product-item-spacing":case"tweak-product-item-gallery-design":case"tweak-product-item-gallery-width":case"tweak-product-item-gallery-aspect-ratio":case"tweak-product-item-gallery-thumbnail-width":this._syncUI();case"tweak-product-item-image-zoom-enabled":case"tweak-product-item-image-zoom-behavior":case"tweak-product-item-image-zoom-factor":this.get("isImageZoomEnabled")?this._instantiateZoom():this._destroyImageZoomInstances();case"tweak-product-item-lightbox-enabled":this.get("isLightboxEnabled")?this._lightboxifyImages():this.get("lightbox")&&this._destroyLightbox();break;case"tweak-related-products-items-per-row":case"tweak-related-products-item-spacing":case"tweak-related-products-image-aspect-ratio":this._loadRelatedItemImages();break}},_syncSelectedVariantOptions:function(){this._selectChangeEvents=[];this.get("host").all(".variant-option").each(function(e){var i=e.one(".variant-select-wrapper");var n=e.one("select");var s=n.one("option").get("text");i.setAttribute("data-text",s);this._selectChangeEvents.push(e.delegate("change",function(e){var t=n.get("value");var a=""===t?s:t;i.setAttribute("data-text",a)},"select"))},this)},_renderSlideshowGallery:function(){if(this.get("isRenderedStackedGallery")){this._cleanupStackedGallery();this.set("isRenderedStackedGallery",false)}this.get("isImageZoomEnabled")&&this._instantiateZoom();this._instantiateSlideshow()},_instantiateSlideshow:function(){if(this.get("images").size()<1)return;var e=this.get("slideContainer").getDOMNode();var t=this.get("thumbnailContainer").getDOMNode();this.set("slideshow",new n(e,t));this.get("images").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"})});this.get("images").each(function(e){e.fire("refresh")});this._loadSlideshowThumbnails()},_loadSlideshowThumbnails:function(){this.get("images").size()>1&&this.get("thumbnails").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"})})},_loadRelatedItemImages:function(){this._onImageLoadEvents=[];this.get("relatedItemImages").each(function(e){if(e.hasClass("loaded"))e.fire("refresh");else{e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"});this._onImageLoadEvents.push(e.on("load",function(){e.hasClass("ProductItem-relatedProducts-image--primary")&&e.ancestor(".ProductItem-relatedProducts-item").addClass("image-is-loaded")}))}},this)},_refreshSlideshowGallery:function(){this.get("thumbnails").each(function(e){e.fire("refresh")});this.get("images").each(function(e){e.fire("refresh")})},_destroySlideshowAndResetImageStyles:function(){this.get("slideshow").destroy(true);this.get("images").each(function(e){e.setStyles({position:"",top:"",left:"",right:"",bottom:"",zIndex:"",width:"",height:"",overflow:""})})},_renderStackedGallery:function(){if(this.get("slideshow")){this._destroySlideshowAndResetImageStyles();this.set("slideshow",null)}this.get("isImageZoomEnabled")&&this._instantiateZoom();this.get("images").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:null})});this.set("isRenderedStackedGallery",true)},_refreshStackedGallery:function(){this.get("images").each(function(e){e.fire("refresh")})},_cleanupStackedGallery:function(){var e=this.get("host").getDOMNode();var t=e.querySelector(".cloned-focus-image");t&&t.remove();var a=e.querySelector(".original-focus-image");a&&a.classList.remove(".original-focus-image")},_lightboxifyImages:function(){if(this.get("images").size()<1||this.get("isProductQuickView"))return;var t=[];this.get("images").each(function(e){t.push({content:e})});var a=this.get("images").size()>1;this._imageClickEvent=this.get("slideContainer").delegate("click",function(e){this.set("lightbox",new i.Squarespace.Lightbox2({controls:{previous:a,next:a},set:t,currentSetIndex:parseInt(e.currentTarget.getAttribute("data-slide-index"),10)-1}));this.get("lightbox").render()},".ProductItem-gallery-slides-item",this)},_destroyLightbox:function(){this.get("lightbox").destroy(true);this.set("lightbox",null);this._imageClickEvent.detach();this._imageClickEvent=null},_instantiateZoom:function(){this._destroyImageZoomInstances();this._zoomInstances=[];this.get("images").each(function(e){this._zoomInstances.push(new i.Squarespace.ImageZoom({host:e.get("parentNode"),behavior:this.get("isImageZoomBehaviorClick")?"click":"hover",zoom:this.get("imageZoomFactor")}))},this)},_destroyImageZoomInstances:function(){if(!this._zoomInstances||this._zoomInstances.length<1)return;i.Array.each(this._zoomInstances,function(e){e.destroy(true)});this._zoomInstances=null}},{ATTRS:{host:{value:null,validator:function(e){var t=i.one(e);return i.instanceOf(t,i.Node)},writeOnce:true},slideContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-slides")}},thumbnailContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-thumbnails")}},images:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-slides-item-image")}},thumbnails:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-thumbnails-item-image")}},relatedItemImages:{valueFn:function(){return this.get("host").all(".ProductItem-relatedProducts-image")}},isProductQuickView:{valueFn:function(){return this.get("host").ancestor(".sqs-product-quick-view-lightbox")}},isImageZoomEnabled:{getter:function(){return i.one(".tweak-product-item-image-zoom-enabled")}},isImageZoomBehaviorClick:{getter:function(){return i.one(".tweak-product-item-image-zoom-behavior-click")}},imageZoomFactor:{getter:function(){return parseFloat(i.Squarespace.Template.getTweakValue("tweak-product-item-image-zoom-factor"))}},isLightboxEnabled:{getter:function(){return i.one(".tweak-product-item-lightbox-enabled")&&!this.get("isImageZoomBehaviorClick")}},isProductGallerySlideshow:{getter:function(){return i.one(".tweak-product-item-gallery-design-slideshow")}},isProductGalleryStacked:{getter:function(){return i.one(".tweak-product-item-gallery-design-stacked")}}}});var t=[];i.config.win.Squarespace.onInitialize(i,function(){i.all(".ProductItem.products-collection-v2").each(function(e){if(e.get("parentNode").hasClass("sqs-product-quick-view-content"))return false;e.one(".ProductItem-details .sqs-add-to-cart-button").removeClass("sqs-editable-button");t.push(new i.Squarespace.SystemCollections.Products.ItemV2({host:e}))})});i.config.win.Squarespace.onDestroy(i,function(){t.forEach(function(e){e.destroy()});t.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-gallery-ng","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api","squarespace-widgets-lightbox2"]})},6051:function(e,t){YUI.add("squarespace-slide-rendering-layouts-factory",function(i){i.namespace("Squarespace.SlideRendering.Layouts");var n={"audio-full-center-01":i.Squarespace.SlideRendering.Layouts.AudioFullCenter01,"audio-full-left-01":i.Squarespace.SlideRendering.Layouts.AudioFullLeft01,"audio-full-right-01":i.Squarespace.SlideRendering.Layouts.AudioFullRight01,"audio-left-right-01":i.Squarespace.SlideRendering.Layouts.AudioLeftRight01,"landing-full-center-01":i.Squarespace.SlideRendering.Layouts.LandingFullCenter01,"landing-full-center-02":i.Squarespace.SlideRendering.Layouts.LandingFullCenter02,"landing-full-centercard-01":i.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01,"landing-full-left-01":i.Squarespace.SlideRendering.Layouts.LandingFullLeft01,"landing-full-left-02":i.Squarespace.SlideRendering.Layouts.LandingFullLeft02,"landing-full-right-01":i.Squarespace.SlideRendering.Layouts.LandingFullRight01,"landing-full-topleft-01":i.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01,"landing-left-right-01":i.Squarespace.SlideRendering.Layouts.LandingLeftRight01,"landing-right-left-01":i.Squarespace.SlideRendering.Layouts.LandingRightLeft01,"location-full-corners-01":i.Squarespace.SlideRendering.Layouts.LocationFullCorners01,"location-right-left-01":i.Squarespace.SlideRendering.Layouts.LocationRightLeft01,"lock-full-center-01":i.Squarespace.SlideRendering.Layouts.LockFullCenter01,"lock-full-center-02":i.Squarespace.SlideRendering.Layouts.LockFullCenter02,"lock-full-center-03":i.Squarespace.SlideRendering.Layouts.LockFullCenter03,"lock-full-center-04":i.Squarespace.SlideRendering.Layouts.LockFullCenter04,"lock-full-center-05":i.Squarespace.SlideRendering.Layouts.LockFullCenter05,"lock-full-bottomleft-01":i.Squarespace.SlideRendering.Layouts.LockFullBottomleft01,"overlay-center-card-01":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard01,"overlay-center-card-02":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard02,"overlay-center-card-03":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard03,"overlay-center-card-04":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard04,"overlay-center-card-05":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard05,"overlay-corner-card-01":i.Squarespace.SlideRendering.Layouts.OverlayCornerCard01,"overlay-full-bottom-01":i.Squarespace.SlideRendering.Layouts.OverlayFullBottom01,"overlay-full-center-01":i.Squarespace.SlideRendering.Layouts.OverlayFullCenter01,"overlay-full-center-02":i.Squarespace.SlideRendering.Layouts.OverlayFullCenter02,"profile-center-center-01":i.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,"profile-center-center-02":i.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02,"profile-full-bottom-01":i.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,"profile-full-center-01":i.Squarespace.SlideRendering.Layouts.ProfileFullCenter01,"profile-full-left-01":i.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,"profile-full-middleband-01":i.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01,"profile-full-right-01":i.Squarespace.SlideRendering.Layouts.ProfileFullRight01,"profile-full-top-01":i.Squarespace.SlideRendering.Layouts.ProfileFullTop01,"profile-left-left-01":i.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01,"profile-left-right-01":i.Squarespace.SlideRendering.Layouts.ProfileLeftRight01,"twitter-full-center-01":i.Squarespace.SlideRendering.Layouts.TwitterFullCenter01,"twitter-full-left-01":i.Squarespace.SlideRendering.Layouts.TwitterFullLeft01,"video-full-bottom-01":i.Squarespace.SlideRendering.Layouts.VideoFullBottom01,"video-full-center-01":i.Squarespace.SlideRendering.Layouts.VideoFullCenter01,"video-full-corners-01":i.Squarespace.SlideRendering.Layouts.VideoFullCorners01};i.Squarespace.SlideRendering.Layouts.Factory={create:function(e,t){var a=n[e]||i.Squarespace.SlideRendering.Layouts.Base;return new a(t)}}},"1.0",{requires:["squarespace-enum","squarespace-slide-rendering-layouts-audio-full-center-01","squarespace-slide-rendering-layouts-audio-full-left-01","squarespace-slide-rendering-layouts-audio-full-right-01","squarespace-slide-rendering-layouts-audio-left-right-01","squarespace-slide-rendering-layouts-base","squarespace-slide-rendering-layouts-landing-full-center-01","squarespace-slide-rendering-layouts-landing-full-center-02","squarespace-slide-rendering-layouts-landing-full-centercard-01","squarespace-slide-rendering-layouts-landing-full-left-01","squarespace-slide-rendering-layouts-landing-full-left-02","squarespace-slide-rendering-layouts-landing-full-right-01","squarespace-slide-rendering-layouts-landing-full-topleft-01","squarespace-slide-rendering-layouts-landing-left-right-01","squarespace-slide-rendering-layouts-landing-right-left-01","squarespace-slide-rendering-layouts-location-full-corners-01","squarespace-slide-rendering-layouts-location-right-left-01","squarespace-slide-rendering-layouts-lock-full-bottomleft-01","squarespace-slide-rendering-layouts-lock-full-center-01","squarespace-slide-rendering-layouts-lock-full-center-02","squarespace-slide-rendering-layouts-lock-full-center-03","squarespace-slide-rendering-layouts-lock-full-center-04","squarespace-slide-rendering-layouts-lock-full-center-05","squarespace-slide-rendering-layouts-overlay-center-card-01","squarespace-slide-rendering-layouts-overlay-center-card-02","squarespace-slide-rendering-layouts-overlay-center-card-03","squarespace-slide-rendering-layouts-overlay-center-card-04","squarespace-slide-rendering-layouts-overlay-center-card-05","squarespace-slide-rendering-layouts-overlay-corner-card-01","squarespace-slide-rendering-layouts-overlay-full-bottom-01","squarespace-slide-rendering-layouts-overlay-full-center-01","squarespace-slide-rendering-layouts-overlay-full-center-02","squarespace-slide-rendering-layouts-profile-center-center-01","squarespace-slide-rendering-layouts-profile-center-center-02","squarespace-slide-rendering-layouts-profile-full-bottom-01","squarespace-slide-rendering-layouts-profile-full-center-01","squarespace-slide-rendering-layouts-profile-full-left-01","squarespace-slide-rendering-layouts-profile-full-middleband-01","squarespace-slide-rendering-layouts-profile-full-right-01","squarespace-slide-rendering-layouts-profile-full-top-01","squarespace-slide-rendering-layouts-profile-left-left-01","squarespace-slide-rendering-layouts-profile-left-right-01","squarespace-slide-rendering-layouts-twitter-full-center-01","squarespace-slide-rendering-layouts-twitter-full-left-01","squarespace-slide-rendering-layouts-video-full-bottom-01","squarespace-slide-rendering-layouts-video-full-center-01","squarespace-slide-rendering-layouts-video-full-corners-01"]})},6052:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-center-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.AudioFullCenter01=l.Base.create("AudioFullCenter01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".group-copy");var a=e.querySelector('[data-compound-type="logo"] > *');var i=e.querySelector(".responsive-wrapper");var n=e.querySelector(".layer-front .sqs-slide-layer-content");var s=e.querySelector('[data-slice-type="album"]');var r=Array.prototype.slice.call(e.querySelectorAll(".track"));r.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13,onReset:function(e,t){t.classList.remove("text-align-center")},onMinFontSize:function(e,t){t.classList.add("text-align-center")}}));this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthBoundaryNode:t,widthRatio:.9,heightRatio:.16,scale:.99,minFontSize:18}));var o=new d({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t,minFontSize:10,widthRatio:.9,enabled:true,onReset:function(e){e=new l.Node(e);e.removeClass("stacked");if(n.clientWidth>900){e.addClass("top-right");e.one('[data-slice-type]:not([data-content-empty="true"])')&&e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').addClass("text-align-left")}else{e.removeClass("top-right");e.one('[data-slice-type]:not([data-content-empty="true"])')&&e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left")}},onMinFontSize:function(e){e=new l.Node(e);e.addClass("stacked");e.removeClass("top-right");e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left")}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new g({rootNode:a,targetNode:i,padding:60,onReset:function(e,t){if(n.clientWidth>900){t.classList.add("top-right");t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.add("text-align-left")}else{t.classList.remove("top-right");t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.remove("text-align-left")}},onRespond:function(e,t){t.classList.remove("top-right");e.parentNode.classList.remove("text-align-left")}}));this._registerResponsiveComponent(new g({rootNode:t,targetNode:s,padding:100,onReset:function(e,t){e.classList.add("align-center-js");e.classList.remove("stacked");n.classList.remove("scroll");t.parentNode.classList.add("bottom");l.later(10,e,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px";this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(e,t){e.classList.remove("align-center-js");e.classList.add("stacked");n.classList.add("scroll");t.parentNode.classList.remove("bottom")}}));this._registerResponsiveComponent(new c({rootNode:i,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){e.classList.remove("stacked");e.classList.add("top-right")},onRespond:function(e){e.classList.add("stacked");e.classList.remove("top-right")}}));this._registerResponsiveComponent(new g({rootNode:t,targetNode:i,padding:60,onReset:function(e,t){e.classList.add("align-center-js");e.classList.remove("stacked");t.classList.add("top-right");n.classList.remove("scroll");l.later(10,e,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px";this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(e,t){e.classList.remove("align-center-js");e.classList.add("stacked");t.classList.remove("top-right");n.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.add("align-center-js");e.classList.remove("stacked");n.classList.remove("scroll");s.parentNode.classList.add("bottom");e.style.marginTop=-Math.floor(e.clientHeight/2)+"px";e.style.marginLeft=-Math.floor(e.clientWidth/2)+"px"},onRespond:function(e){e.classList.remove("align-center-js");e.classList.add("stacked");n.classList.add("scroll");s.parentNode.classList.remove("bottom")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6053:function(e,t,a){var i=a(100);var n=a(2738);var d=a(6399);var s=a(318);var r=a(5994);var o=a(4172);var u=a(5333);YUI.add("squarespace-slide-rendering-layouts-base",function(l){l.namespace("Squarespace.SlideRendering.Layouts");var c=l.Squarespace.SlideRendering.Layouts.Base=l.Base.create("LayoutBase",l.Widget,[],{initializer:function(){this._sliceWidgetMap={};this._responsiveComponents=[];this._debouncedSyncResponsiveComponents=i(this._syncResponsiveComponents,200);this._windowResizeHandler=l.one(l.config.win).on("resize",this._debouncedSyncResponsiveComponents,this);this._watchTweaks();l.Global.once("slideReady",function(){var e=this.get("contentBox");e.getAttribute("data-slide-type")===o[n.POPUP_OVERLAY]&&setTimeout(function(){e.addClass("sqs-slide-animation-ready")},500)},this)},destructor:function(){this._debouncedSyncResponsiveComponents.cancel();this._windowResizeHandler.detach();l.Object.each(this._sliceWidgetMap,function e(t){t.destroy(true)});this.get("contentBox").removeClass("sqs-slide-ready");this._destroyResponsiveComponents()},renderUI:function(){var t="undefined"!==typeof squarespaceStartApp;var a;t||(a=new d(['[data-compound-type="logo"][data-slice-type="heading"] h1','[data-slice-type="heading"]:not([data-compound-type]) h1','[data-slice-type="body"]'],l.config.win.document.body));this._checkSupportVH();l.UA.safari>0&&!l.UA.mobile&&l.one("html").addClass("browser-safari");c.superclass.renderUI.call(this);var e=this.get("contentBox");e.all("[data-slice-type]").each(function(e){if("true"===e.getAttribute("data-content-empty"))return;this._widgetizeSliceNode(e)},this);this._initResponsiveComponents();u.parse();var i=e.all('[data-slice-type="image"] img[data-image-dimensions*="x"]');var n=new l.Parallel;var s=function(){this._debouncedSyncResponsiveComponents();this.get("contentBox").addClass("sqs-slide-ready");l.Global.fire("slideReady")}.bind(this);var r=function(){if(t)s();else{var e=a.check();l.Squarespace.Promises.all(e).then(function(){s()})}};var o=setTimeout(r,2e3);i.each(function(e){e.once("load",n.add())},this);n.done(function(){clearTimeout(o);r()})},_widgetizeSliceNode:function(e){var t=e.getAttribute("data-slice-type");var a=e.getAttribute("data-compound-type");var i=r[t];var n=l.Squarespace.SlideRendering.Slices.Factory.create(i,{sliceId:e.getAttribute("data-slice-id")||null,slideType:this.get("slideType"),boundingBox:e,render:true});var s=a?r[a]:r[t];this._sliceWidgetMap[s]=n},_syncSliceWidgets:function(){l.Object.each(this._sliceWidgetMap,function(e){e.syncUI()})},_destroyResponsiveComponents:function(){this._responsiveComponents=[]},_initResponsiveComponents:function(){},_watchTweaks:function(){var e=this.get("slideType");if(window.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&"popup-overlay"===e){var t=this.get("contentBox").getDOMNode();this.tweakPreview=function(){t.querySelector(".sqs-slide-layer-content").style.transition="none";t.classList.remove("sqs-slide-animation-ready");setTimeout(function(){this.querySelector(".sqs-slide-layer-content").style.transition="";this.classList.add("sqs-slide-animation-ready")}.bind(t),500)};var i=["button-layout-style","newsletter-layout-style"];l.Global.after("tweak:change",function(e){var t=e.config.category;var a=e.getName();"Overlay Animation"===t?this.tweakPreview():"Overlay Design"===t&&this._debouncedSyncResponsiveComponents();i.indexOf(a)>=0&&this._debouncedSyncResponsiveComponents()},this)}},_syncResponsiveComponents:function(){this._responsiveComponents.forEach(function e(t){try{t.reset();t.respond()}catch(e){s.captureException(e)}});l.Global.fire("slideComponentSync")},_registerResponsiveComponent:function(e){this._responsiveComponents.push(e)},_checkSupportVH:function(){7===parseInt(l.UA.ios,10)?l.one("html").addClass("no-vh"):l.one("html").addClass("vh")},CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slide",ATTRS:{slideId:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-id")}},slideType:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-type")}},slideLayoutIdentifier:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-layout-id")}}}})},"1.0",{requires:["base","squarespace-attr-validators","parallel","squarespace-promises","squarespace-slide-rendering-slices-factory","widget"]})},6054:function(e,t){YUI.add("squarespace-slide-rendering-slices-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.SlideRendering.Slices,"SLICE_TYPE","Base");e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-slide-rendering-slices-album","squarespace-slide-rendering-slices-body","squarespace-slide-rendering-slices-buttons","squarespace-slide-rendering-slices-custom-form","squarespace-slide-rendering-slices-gallery","squarespace-slide-rendering-slices-heading","squarespace-slide-rendering-slices-image","squarespace-slide-rendering-slices-lock","squarespace-slide-rendering-slices-map","squarespace-slide-rendering-slices-newsletter","squarespace-slide-rendering-slices-navigation","squarespace-slide-rendering-slices-password","squarespace-slide-rendering-slices-social-icons","squarespace-slide-rendering-slices-sub-heading","squarespace-slide-rendering-slices-twitter","squarespace-slide-rendering-slices-video"]})},6055:function(e,t){YUI.add("squarespace-factory-utils",function(o){o.namespace("Squarespace");o.Squarespace.FactoryUtils={createEnumToClassFactory:function(e,n,s,r){var i={};var t=o.Object.values(e);o.Array.reduce(t,i,function(e,t){var a;var i=o.Object.some(n,function(e){if(e[s]===t){a=e;return true}});i?e[t]=a:o.Lang.isValue(r)&&(e[t]=n[r]);return e});return{create:function(e,t){var a=i[e];if(!o.Lang.isValue(a))throw new Error("FactoryUtils: Could not find ctor for enumValue "+e+".");return new a(t||{})}}}}},"1.0",{requires:[]})},6056:function(e,t,a){var i=a(5192).CoverPageViewBinder;YUI.add("squarespace-slide-rendering-slices-album",function(e){e.namespace("Squarespace.SlideRendering.Slices");var a=e.Squarespace.SlideRendering.Slices.Album=e.Base.create("Album",e.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var e=this.get("contentBox");var t=e.one(".sqs-slice-album-playlist");t.hasClass("demo-album")?this.get("contentBox").all("a").on("click",function(e){e.halt()},this):this._playlist=new i},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".sqs-slice-album-playlist");this._playlist&&this._playlist.connectToNode(t.getDOMNode())}},{SLICE_TYPE:e.Squarespace.SliceType.ALBUM,CSS_PREFIX:"sqs-slice-album"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-enum"]})},6057:function(e,t,a){var i=a(2738);var n=a(4172);var s=a(6270);var r=a(5960);YUI.add("squarespace-slide-rendering-slices-base",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Base=e.Base.create("Base",e.Widget,[],{CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slice",ATTRS:{sliceId:{value:null},slideType:{value:n[i.COVER_PAGE]},slideSelector:{getter:function(){var e=s[this.get("slideType")];return r.getWrapperSelector(e)}},canClientRefresh:{value:false}}})},"1.0",{requires:["base","widget"]})},6058:function(e,t){YUI.add("squarespace-slide-rendering-slices-body",function(i){i.namespace("Squarespace.SlideRendering.Slices");i.Squarespace.SlideRendering.Slices.Body=i.Base.create("Body",i.Squarespace.SlideRendering.Slices.Base,[i.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var t=e.get("body.html");"string"!==typeof t&&t.length&&(t=t.toString());var a=!i.Lang.isValue(t)||""===t;this.get("contentBox").setHTML(t);this._updateContentEmptyAttribute(a)}},{SLICE_TYPE:i.Squarespace.SliceType.BODY,CSS_PREFIX:"sqs-slice-body"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6059:function(e,t,a){YUI.add("squarespace-slide-rendering-slices-client-refresh",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.ClientRefresh=e.Base.create("Heading",e.Base,[],{refreshFromSliceContent:function(e){false},_updateContentEmptyAttribute:function(e){var t=this.get("contentBox");e?t.setAttribute("data-content-empty",true):t.removeAttribute("data-content-empty")}},{ATTRS:{canClientRefresh:{value:true}}})},"1.0",{requires:["base"]})},6060:function(e,t,a){var o=a(5520);var l=a(1622);YUI.add("squarespace-slide-rendering-slices-buttons",function(r){r.namespace("Squarespace.SlideRendering.Slices");r.Squarespace.SlideRendering.Slices.Buttons=r.Base.create("Buttons",r.Squarespace.SlideRendering.Slices.Base,[r.Squarespace.SlideRendering.Slices.ClientRefresh],{renderUI:function(){this._trackButtonRender()},bindUI:function(){var e=this.get("contentBox");e.all("a").each(function(e){e.on("click",this._trackButtonClick,this)},this)},refreshFromSliceContent:function(e){var i="";var n=true;e.get("links").each(function(e){var t=e.get("text");if(r.Lang.isValue(t)&&""!==t){n=false;var a=e.get("clickthroughUrl");i+=r.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:a.url,targetNode:a.newWindow?' targetNode="_blank"':"",text:r.Squarespace.Escaping.escapeForHtml(t)})}});this.get("contentBox").one("ul").setHTML(i);this._updateContentEmptyAttribute(n)},_getTrackingData:function(e){var t=e.getAttribute("href");var a=e.ancestor(".sqs-slide");var i=a.getAttribute("data-slide-layout-id");var n=a.getAttribute("data-slide-type");var s="popup-overlay"===n?o.POPUP_OVERLAY:o.BUTTON_BLOCK;return{pagePath:r.config.win.location.pathname,id:i,buttonText:e.get("innerHTML"),clickthroughUrl:t,alignment:null,size:null,newWindow:e.hasAttribute("target"),context:s}},_trackButtonRender:function(){var e=this.get("contentBox");e.all("a").each(function(e){var t=this._getTrackingData(e);if(t.context===o.POPUP_OVERLAY)return;l.trackButtonView(t)},this)},_trackButtonClick:function(e){var t=e.currentTarget;if(t.hasAttribute("data-tracked")){t.removeAttribute("data-tracked");return}var a=t.hasAttribute("target");var i=e.target.getAttribute("href");var n=i&&"mailto"===i.split(":")[0].toLowerCase();var s=(!a||e.metaKey||e.ctrlKey||e.shiftKey)&&!n;if(s){e.preventDefault();e.stopImmediatePropagation()}var r=function(){if(s){t.setAttribute("data-tracked",true);t.simulate("click")}};var o=this._getTrackingData(e.target);l.trackButtonClick(o).then(function(){r()}).catch(function(e){r()})}},{SLICE_TYPE:r.Squarespace.SliceType.BUTTONS,CSS_PREFIX:"sqs-slice-buttons"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6061:function(e,t,a){var d=a(1937);YUI.add("squarespace-slide-rendering-slices-custom-form",function(c){c.namespace("Squarespace.SlideRendering.Slices");var t=c.Squarespace.SlideRendering.Slices.CustomForm=c.Base.create("CustomForm",c.Squarespace.SlideRendering.Slices.Base,[c.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._lightbox=new c.Squarespace.Widgets.ModalLightbox({render:c.one(this.get("slideSelector")),openClassNode:c.one(this.get("slideSelector")+" .sqs-slide-container")});this._formTemplatePromise=this._getFormTemplateSchema()},destructor:function(){this._lightbox.close();this._formWidget&&this._formWidget.destroy();this._lightbox.destroy();this._formTemplatePromise=null},renderUI:function(){t.superclass.renderUI.call(this);this._lightbox.render()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");e.delegate("click",this._openForm,".open-form-button",this)},_openForm:function(){var e=this.get("contentBox");var t=e.one(".open-form-button-container");var a=t.getData("form");var o=c.Lang.isValue(a)&&""!==a;var l;l=o?c.JSON.parse(a.replace(/scr"\+"ipt/g,"script")):t.hasClass("slice-newsletter-form")?(new c.Squarespace.Models.SliceDemoNewsletterForm).toJSON():(new c.Squarespace.Models.SliceDemoCustomForm).toJSON();this._formTemplatePromise.then(c.bind(function(e){this._formWidget&&this._formWidget.destroy(true);var t=this._formWidget=new c.Squarespace.Widgets.AsyncForm({form:l,formTemplate:e,formSubmitButtonText:l.submitButtonText,formName:l.name,showTitle:true,preventDefaultSubmit:!o,preventAllSubmits:!o});var a=this._lightbox;a.set("content",t);var i=d.getCaptchaContainer(c.config.win,t.get("contentBox").getDOMNode());i&&d.render(c.config.win,i);if(c.UA.ios>0){var n=c.one('meta[name="viewport"]');n.setAttribute("content",n.getAttribute("content")+", maximum-scale=1");a.once("close",function(){var e=this.getAttribute("content");var t=e.substring(0,e.indexOf(", maximum-scale=1"));this.setAttribute("content",t);setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)},n)}var s=c.one(this.get("slideSelector")+' [data-slice-type="gallery"] .scrim');var r=s?s.getComputedStyle("backgroundColor"):null;a.get("boundingBox").one(".lightbox-background").setStyle("backgroundColor",r);a.open()},this))},_getFormTemplateSchema:function(){return c.Squarespace.Promises.create(function(t){c.Data.get({url:"/api/template/GetTemplateSchema",data:{type:c.Squarespace.BlockType.FORM},success:function(e){t(e)}})})},refreshFromSliceContent:function(e){var t=this.get("contentBox");var a=t.one(".open-form-button-container");a.addClass(e.get("isNewsletterFormSelected")?"slice-newsletter-form":"slice-custom-form");a.removeClass(e.get("isNewsletterFormSelected")?"slice-custom-form":"slice-newsletter-form");var i=e.get("buttonLabel");var n=!c.Lang.isValue(i)||""===i;n?a.setHTML(""):a.setHTML('<span><a class="open-form-button">'+i+"</a></span>");this._updateContentEmptyAttribute(n)}},{SLICE_TYPE:c.Squarespace.SliceType.CUSTOM_FORM,CSS_PREFIX:"sqs-slice-custom-form"})},"1.0",{requires:["base","json","squarespace-async-form","squarespace-enum","squarespace-modal-lightbox","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form","squarespace-promises","squarespace-util","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6062:function(e,t,a){var i=a(24).t;var n=a(2611);var s=a(2610);YUI.add("squarespace-models-slice-demo-custom-form",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.SliceDemoCustomForm=e.Base.create("SliceDemoCustomForm",e.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:e.Squarespace.FormType.SLIDE},name:{value:i("Demo Form")},fields:{value:[{type:"name",id:null,locked:false,title:i("Name"),description:"",required:true,name:true},{type:"email",id:null,locked:false,title:i("Email Address"),description:"",placeholder:"",required:true,email:true},{type:"text",id:null,locked:false,title:i("Subject"),description:"",placeholder:"",required:true,text:true},{type:"textarea",id:null,locked:false,title:i("Message"),description:"",placeholder:"",required:true,textarea:true}]},submitButtonText:{value:i("Submit")},disclaimerMessage:{value:{html:i("We respect your privacy.")}},submissionMessage:{value:{html:i("Thank you!")}},captchaEnabled:{value:false},captchaTheme:{value:s.LIGHT},captchaAlignment:{value:n.LEFT}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-form"]})},6063:function(e,t,a){var i=a(24).t;YUI.add("squarespace-models-slice-demo-newsletter-form",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.SliceDemoNewsletterForm=t.Base.create("SliceDemoNewsletterForm",t.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:t.Squarespace.FormType.SLIDE},name:{value:i("Newsletter Form")},fields:{value:[{type:"email",id:"overlayNewsletterEmail",locked:true,title:i("Email Address"),description:"",placeholder:i("Email Address"),required:true,email:true}]},disclaimerMessage:{value:{html:i("We respect your privacy.")},setter:function(e){if(t.Lang.isString(e))return t.JSON.parse(e);return e}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-form"]})},6064:function(e,t,a){var r=a(2762).VideoBackground;YUI.add("squarespace-slide-rendering-slices-gallery",function(n){n.namespace("Squarespace.SlideRendering.Slices");var s=false;var t=n.Squarespace.SlideRendering.Slices.Gallery=n.Base.create("Gallery",n.Squarespace.SlideRendering.Slices.Base,[n.Squarespace.SlideRendering.Slices.HasScrim],{initializer:function(){this._events=[];this._initGallery()},destructor:function(){this._events.forEach(function(e){e.detach()});this._events=null;this._gallery&&this._gallery.destroy()},bindUI:function(){t.superclass.bindUI.call(this);this._events.push(n.Global.after("tweak:change",this._onTweakChange,this));this._events.push(n.Global.after("slideUpdateRendered",function(){var e=this.get("items");var a=new n.Parallel;e.each(function(e){var t=e.one("img");if(t&&window.ImageLoader){window.ImageLoader.load(t,true);t.once("load",a.add())}},this);a.done(function(){this.syncUI()}.bind(this))},this));this._gallery&&this._gallery.after("currentIndexChange",this._syncScrim,this);var e=this.get("slideSelector")+' .sqs-slice[data-slice-type="video"]';this._isVideoBg()&&n.one(e)&&this._events.push(n.one(this.get("slideSelector")+" .sqs-slice-play-button").on("click",function(e){try{this.videoBg.player.pauseVideo()}catch(e){s&&console.warn(e)}},this),n.Global.on("lightbox-hidden",function(){try{this.videoBg.player.playVideo()}catch(e){s&&console.warn(e)}},this));this._events.push(n.Global.after("tweak:reset",function(){this.get("items").each(function(e){e.setStyles({"background-color":null,height:null,width:null,"overflow-y":null,"overflow-x":null})});this._gallery.destroy();this._initGallery()},this))},syncUI:function(){t.superclass.syncUI.call(this);if(this._isGrid()||this._isVideoBg()){this.get("boundingBox").one(".scrim")||this.get("boundingBox").append('<div class="scrim"></div>');this._gallery&&this._gallery.syncUI()}else{this._gallery.refresh();this._syncScrim()}},_initGallery:function(){this._removeInvalidImages();var e=this.get("items");var t=this.get("boundingBox");if(this._isVideoBg()){var a=e.item(0).getDOMNode();var i=this._getVideoPropertiesFromElement(a);i.container=a;this.videoBg=new r(i,n.config.win)}else if(this._isGrid()){this.get("contentBox").ancestor(".sqs-slide").hasClass("sqs-slide-ready")?this._createGrid(t,e):n.Global.on("slideReady",this._createGrid(t,e));true===s&&(window.grid=this._gallery)}else this._gallery=new n.SQS.Gallery.Gallery2({container:t,slides:e,autoplay:true,autoplayOptions:{timeout:5e3},loaderOptions:{mode:"fill"},refreshOnResize:true,loop:true,design:"stacked",designOptions:{autoHeight:false,speed:1,transition:"fade"}})},_removeInvalidImages:function(){var e=this.get("items");e&&e.each(function(e){!e.one("img")||e.hasClass("gallery-video-background")||e.hasClass("demo-image")||e.one("img").getAttribute("data-image-dimensions")||e.remove()});this.set("items",this.get("boundingBox").all(".sqs-slice-gallery-item"))},_syncScrim:function(){var e=this._gallery.get("currentIndex");var t=this._gallery.get("slides").item(e);t&&this.updateScrim(t)},_createGrid:function(e,t){var a=this.get("slideSelector")+" .sqs-slide-container";this._gallery=new n.Squarespace.SlideRendering.GridGallery({container:e,items:t,slideContainerSelector:a})},_isGrid:function(){var e=false;n.one(this.get("slideSelector")+" .gallery-style-grid")&&(e=true);return e},_isVideoBg:function(){var e=false;n.one(this.get("slideSelector")+' [data-slice-type="gallery"] .gallery-video-background')&&(e=true);return e},_getVideoPropertiesFromElement:function(e){var t={};e.getAttribute("data-config-url")&&(t.url=e.getAttribute("data-config-url"));e.getAttribute("data-config-playback-speed")&&(t.playbackSpeed=e.getAttribute("data-config-playback-speed"));e.getAttribute("data-config-filter")&&(t.filter=e.getAttribute("data-config-filter"));e.getAttribute("data-config-filter-strength")&&(t.filterStrength=e.getAttribute("data-config-filter-strength"));e.getAttribute("data-config-custom-fallback-image")&&(t.useCustomFallbackImage=true);return t},_onTweakChange:function(e){var t=e.getName();var a=e.getValue();if("gallery-style"===t){this.get("items").each(function(){this.getDOMNode().style.cssText="";var e=this.one("img");e.setAttribute("src","");e.setAttribute("data-image-resolution","");e.setStyle("display","initial")});this._gallery.destroy();this._initGallery()}else if(this._isGrid())switch(t){case"gallery-style":this.get("items").each(function(){this._node.style.cssText=""});this._gallery.destroy();this._initGallery();break;case"grid-gallery-density":this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"grid-gallery-ratio":if("Original"!==a){this._gallery.set("axisDirection","row");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery()}else this._gallery._setAxisDirection();break;case"grid-gallery-image-orientation":this._gallery.set("axisDirection","row");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"grid-gallery-direction":"Horizontal"===a?this._gallery.set("axisDirection","row"):this._gallery.set("axisDirection","column");break;case"gallery-randomize-order":"true"===a?this._gallery.set("imageOrdering","random"):this._gallery.set("imageOrdering","repeat");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"gallery-loading-animation":this._gallery.previewImageLoading(a);break}this._isVideoBg()&&this.videoBg&&this.videoBg.scaleVideo();this.syncUI()}},{SLICE_TYPE:n.Squarespace.SliceType.GALLERY,CSS_PREFIX:"sqs-slice-gallery",ATTRS:{items:{value:null,validator:n.Squarespace.AttrValidators.isNullOrNodeList}},HTML_PARSER:{items:[".sqs-slice-gallery-item"]}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-gallery-ng","squarespace-slide-rendering-grid-gallery","squarespace-slide-rendering-slices-has-scrim","squarespace-slide-rendering-slices-base"]})},6065:function(e,t,a){var s=a(318);var i=a(425);YUI.add("squarespace-slide-rendering-grid-gallery",function(o){o.namespace("Squarespace.SlideRendering");var n=100;var t="sqs-gallery-grid";var u=o.Squarespace.SlideRendering.GridGalleryDensities;var g=false;o.Squarespace.SlideRendering.GridGallery=o.Base.create("GridGallery",o.Base,[o.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._initGallery();this._bindUI();this._timeouts=[];this._duplicationIterations=0;this._throttledSyncUI=i(this.syncUI.bind(this),100,{leading:false,trailing:true})},destructor:function(){this._throttledSyncUI.cancel();o.Array.each(this._timeouts,function(e){e.cancel()},this);this._removeClonedItems();var e=this.get("container");if(e&&e.inDoc()){e.removeClass(t);this._reset()}},syncUI:function e(){this._reset();this._renderGrid()},_bindUI:function(){var e=void 0===window.orientation?"resize":"orientationchange";this._registerEvent(o.one(o.config.win).on(e,this._throttledSyncUI,this))},_initGallery:function(){this.get("container").addClass(t);var e=this.get("items");var a=new o.Parallel;e.each(function(e){var t=e.one("img");""===t.getAttribute("src")&&t.once("load",a.add())});a.done(function(){this._throttledSyncUI()}.bind(this))},_reset:function(){var e=this.get("container");this.densityValues=this._parseDensityJSON();this.imageOrdering=this._getTweakImageOrdering();this.dimension=this._getAxisDimension();this.axisGroups=[];this.imageRatios=[];e.setStyles({marginTop:null,marginLeft:null,width:null,height:null});this._setAxisDirection();this.currentAxisGroup={dimension:this.dimension,items:[],imageRatios:[]}},_renderGrid:function e(){var t=this.get("items");t.each(function(e,t){this._resetItemStyles(e);var a=this.imageOrdering;if("repeat"===a||"random"===a&&""!==e.getAttribute("data-clone")){var i=e.one("img");var n=this._getCalculatedImageDimensions(i);this.currentAxisGroup.imageRatios.push(n);var s=e._node;var r=this._fitsInAxis(this.currentAxisGroup);if(r)this.currentAxisGroup.items.push(s);else{this._growAxis(this.currentAxisGroup);this.axisGroups.push(this.currentAxisGroup);this.currentAxisGroup={dimension:this.dimension,items:[s],imageRatios:[this._getCalculatedImageDimensions(i)]}}}},this);var a=this._duplicationIterations>=n;if(a)s.captureException(new Error("Could not duplicate enough rows to fill a grid gallery to fit container."));else{var i=this._isScreenFilled();if(!i){this._duplicateOriginalItems();this._throttledSyncUI();return}}this._positionItems();this._positionContainer();this._loadImages(t)},_loadImages:function(e){e.each(function e(t){var a=t.one("img");var i=this._getTweakLoadingAnimation();o.one(a).once("load",function e(t){var a=1;i&&(a=Math.floor(2e3*Math.random()));this._timeouts.push(o.later(a,t.currentTarget,function(){this.get("parentNode").addClass("loaded")}))},this);this._timeouts.push(o.later(10,this,function e(){window.ImageLoader.load(a,{load:true,mode:"fill"})}))},this)},previewImageLoading:function(e){var t=e;var a=100;var i=this.get("items");var n=this.get("container");n.addClass("no-transition");i.each(function(e){e.removeClass("loaded");"true"===t&&(a=Math.floor(2e3*Math.random())+100);this._timeouts.push(o.later(a,e,function(){this.addClass("loaded")}))});this._timeouts.push(o.later(100,this,function(){n.removeClass("no-transition")}))},_fitsInAxis:function(e){var t=this.get("container");var a=this._getRenderedAxisDimension(e);var i=e.imageRatios[e.items.length];var n=e.dimension;var s=a+this._getProportionalDimension(i,n);var r;r="row"===this.get("axisDirection")?t.get("clientWidth"):t.get("clientHeight");return s<=r},_getRenderedAxisDimension:function(e){var t=0;var a=e.dimension;var i=e.items.length;for(var n=0;n<i;n++)t+=this._getProportionalDimension(e.imageRatios[n],a);return t},_getProportionalDimension:function(e,t){var a;"column"===this.get("axisDirection")?a=e.height*t/e.width:"row"===this.get("axisDirection")&&(a=e.width*t/e.height);return a},_getCalculatedImageDimensions:function(e){var t=e.getAttribute("data-image-dimensions").split("x");var a=parseInt(t[0],10);var i=parseInt(t[1],10);var n=a;var s=i;var r=this._getTweakImageRatio();"original"!==r&&(a>i?s=a*r.ratioHeight/r.ratioWidth:n=i*r.ratioWidth/r.ratioHeight);return{width:n,height:s}},_growAxis:function(e){var t=this.get("container");var a=this._getRenderedAxisDimension(e);var i=this.get("axisDirection");var n;n="row"===i?t.get("clientWidth"):t.get("clientHeight");var s=Math.floor(n*e.dimension/a);var r;var o=e.items.length;for(var l=0;l<o;l++){r=e.items[l];if("row"===i){r.style.height=s+"px";r.style.width=Math.floor(this._getProportionalDimension(e.imageRatios[l],s))+"px"}else{r.style.width=s+"px";r.style.height=Math.floor(this._getProportionalDimension(e.imageRatios[l],s))+"px"}}e.dimension=s},_positionItems:function(){this.axisGroups.forEach(function(e,t,a){var i;var n;var s=e.items.length;var r=this.get("axisDirection");var o="height";var l="top";var c="left";if("row"===r){o="width";l="left";c="top"}for(var d=0;d<s;d++){i=e.items[d];n=e.items[d-1];i.style[l]=n?parseInt(n.style[o],10)+parseInt(n.style[l],10)+"px":"0";var u=0;for(var g=0;g<t;g++)u+=a[g].dimension;i.style[c]=u+"px";i.style.visibility="visible"}}.bind(this))},_positionContainer:function(){var e=this.get("container");var t=this.axisGroups.overage/2;var a="column"===this.get("axisDirection");var i=this._getTweakImageRatio();var n="original"===i;a&&n?e.setStyles({marginLeft:0-t+"px",width:"calc(100% + "+t+"px)"}):e.setStyles({marginTop:0-t+"px",height:"calc(100% + "+t+"px)"})},_duplicateOriginalItems:function(){var r=[];var e=this.get("items");e.each(function(e,t){if(e.hasAttribute("data-clone"))return;var a=e.get("outerHTML");var i=' data-clone="true" ';var n=a.indexOf('class="sqs-slice-gallery-item');var s=[a.slice(0,n-1),i,a.slice(n)].join("");r.push(s)},this);"random"===this.imageOrdering&&this._randomSortArray(r);var t=this.get("container");t.append(r.join(""));var a=t.all(".sqs-slice-gallery-item");this.set("items",a);this._duplicationIterations++},_removeClonedItems:function(){var e=this.get("items");e.each(function(e,t){e.hasAttribute("data-clone")&&e.remove()},this)},_resetItemStyles:function(e){e.setStyles({top:null,left:null,width:null,height:null,visibility:"hidden"})},_isScreenFilled:function(){var e=this.get("container");var i=0;var n;n="row"===this.get("axisDirection")?e.get("clientHeight"):e.get("clientWidth");this.axisGroups.lastVisibleAxisGroupIndex=null;this.axisGroups.overage=null;this.axisGroups.forEach(function(e,t,a){i+=e.dimension;if(i>n){if(!this.axisGroups.lastVisibleAxisGroupIndex){this.axisGroups.lastVisibleAxisGroupIndex=t;this.axisGroups.overage=i-n}}else this.axisGroups.overage=i-n}.bind(this));if(0===i&&0===n)return true;return i>n},_setAxisDirection:function(){if(this.get("container").inDoc()){var e=o.one(this.get("slideContainerSelector")).get("className");var t=e.match(/(grid-gallery-direction-)\w+/g)[0];-1!==t.indexOf("horizontal")||"original"!==this._getTweakImageRatio()?this.set("axisDirection","row"):this.set("axisDirection","column")}},_getGridDensity:function(){var i=this.densityValues;var n=i[0];var s=o.one(this.get("slideContainerSelector"));var e=["grid-gallery-density-very-low","grid-gallery-density-low","grid-gallery-density-medium","grid-gallery-density-high","grid-gallery-density-very-high"];e.forEach(function(e,t,a){s.hasClass(e)&&(n=i[t])});return n},_parseDensityJSON:function(){if(true===g&&this.get("testDensityValue")){var e=this.get("testDensityValue");return[e,e,e,e,e]}var t=u;var a=this.get("container");var i=this.get("axisDirection");var n=this._getTweakImageRatio(true);var s=this._getTweakImageOrientation();var r=a.get("clientWidth");var o=a.get("clientHeight");var l;var c;var d;l=r<=600&&o<=600?r<o?"maxWidth-600":"maxHeight-600":r<=600?"maxWidth-600":o<=600?"maxHeight-600":r<=800?"maxWidth-800":"desktop";c="original"===n?"original":"r"+n.ratioWidth.toString()+n.ratioHeight.toString();"r11"===c?d="square":"column"===i?d="vertical":"row"===i&&(d="portrait"===s?"vertical":"horizontal");return t[l].orientation[d].ratio[c]},_getAxisDimension:function(){var e=this.get("container");if("row"===this.get("axisDirection"))return Math.ceil(e.get("clientHeight")/this._getGridDensity());return Math.ceil(e.get("clientWidth")/this._getGridDensity())},_getTweakImageRatio:function(e){var t=o.one(this.get("slideContainerSelector")).get("className");var a=t.match(/(grid-gallery-ratio-)\w+/g)[0];var i=a.substring(a.lastIndexOf("-")+1);var n;var s;switch(i){case"11":n=1;s=1;break;case"54":n=5;s=4;break;case"43":n=4;s=3;break;case"32":n=3;s=2;break;case"169":n=16;s=9;break;case"21":n=2;s=1;break;default:return"original"}if(!e&&"portrait"===this._getTweakImageOrientation()&&n!==s){var r=n;n=s;s=r}return{ratioWidth:n,ratioHeight:s}},_getTweakImageOrientation:function(){var e=o.one(this.get("slideContainerSelector")).get("className");var t=e.match(/(grid-gallery-image-orientation-)\w+/g)[0];t=t.substring(t.lastIndexOf("-")+1);return t},_getTweakLoadingAnimation:function(){var e=false;o.one(this.get("slideContainerSelector")).hasClass("gallery-loading-animation")&&(e=true);return e},_getTweakImageOrdering:function(){var e="repeat";o.one(this.get("slideContainerSelector")).hasClass("gallery-randomize-order")&&(e="random");this.set("imageOrdering",e);return this.get("imageOrdering")},_randomSortArray:function(e){function t(){var e=Math.random();var t;e<=.36?t=-1:e<=.64?t=0:e<=1&&(t=1);return t}e.sort(t);e.sort(t)}},{CSS_PREFIX:"sqs-grid-gallery",ATTRS:{container:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode},slideContainerSelector:{value:".sqs-slide-container",validator:o.Squarespace.AttrValidators.isNullOrString},items:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList},axisDirection:{value:"row",validator:function(e,t){if(o.Squarespace.AttrValidators.isString(e,t)){if("row"===e||"column"===e)return true;false;return false}return false}},imageOrdering:{value:"repeat",validator:function(e,t){if(o.Squarespace.AttrValidators.isString(e,t)){if("repeat"===e||"random"===e)return true;false;return false}return false}},testDensityValue:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-slide-rendering-grid-gallery-densities","squarespace-mixins-event-registrar"]})},6066:function(e,t){YUI.add("squarespace-slide-rendering-grid-gallery-densities",function(e){e.namespace("Squarespace.SlideRendering");e.Squarespace.SlideRendering.GridGalleryDensities={desktop:{orientation:{horizontal:{ratio:{original:[3,4,5,6,7],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[5,6,7,8,9],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-800":{orientation:{horizontal:{ratio:{original:[5,6,7,8,9],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[3,4,5,6,7],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-600":{orientation:{horizontal:{ratio:{original:[6,7,8,9,10],r21:[7,7,11,14,14],r169:[7,7,10,13,13],r32:[6,6,8,11,11],r43:[5,5,7,10,10],r54:[5,5,7,9,9]}},vertical:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[4,4,5,6,6],r43:[5,5,6,7,7],r54:[5,5,7,9,9]}},square:{ratio:{r11:[6,6,7,9,9]}}}},"maxHeight-600":{orientation:{horizontal:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[3,3,4,5,5],r43:[3,3,4,5,5],r54:[3,3,4,5,5]}},vertical:{ratio:{original:[4,4,5,6,6],r21:[2,2,3,4,4],r169:[2,2,3,4,4],r32:[2,2,3,4,4],r43:[2,2,3,4,4],r54:[2,2,3,4,4]}},square:{ratio:{r11:[3,3,4,5,5]}}}}}},"1.0",{requires:[]})},6067:function(e,t){YUI.add("squarespace-slide-rendering-slices-has-scrim",function(a){a.namespace("Squarespace.SlideRendering.Slices");a.Squarespace.SlideRendering.Slices.HasScrim=a.Base.create("HasScrim",a.Base,[],{initializer:function(){a.Do.after(this._renderScrim,this,"renderUI",this)},updateScrim:function(e){if(!e)return;var t=e.getData("processedColorStyles");a.Lang.isUndefined(t)&&(t=a.Squarespace.SlideRendering.ColorProcessor.processNode(e));this._styleScrim(t.color,t.opacity)},_renderScrim:function(){var e=this.get("contentBox");this._scrim=e.one(".scrim");if(!this._scrim){this._scrim=a.Node.create('<div class="scrim"></div>');e.appendChild(this._scrim)}},_styleScrim:function(e,t){this._scrim.setStyle("backgroundColor",e.toString());this._scrim.setStyle("opacity",t);this._scrim.ancestor(".sqs-slice").setStyle("backgroundColor",e.toString())}},{ATTRS:{midPoint:{value:.6,writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-slide-rendering-color-processor","squarespace-slide-rendering-slices-rgb"]})},6068:function(e,t){YUI.add("squarespace-slide-rendering-color-processor",function(c){c.namespace("Squarespace.SlideRendering");var s="222222";c.Squarespace.SlideRendering.ColorProcessor={processNode:function(e){var t=e.getAttribute("data-average-color");var a;a=t?c.JSON.parse(t):{topLeftAverage:s,topRightAverage:s,bottomLeftAverage:s,bottomRightAverage:s,centerAverage:s,suggestedBgColor:s};delete a.suggestedBgColor;var i=this._processColors(a);var n=this._calculateStyles(i.averageColor,i.distribution);e.setData("processedColorStyles",n);return n},_processColors:function(e){var t=0;var a=0;var i=0;var n=new c.Squarespace.SlideRendering.Slices.RGB({color:{r:0,g:0,b:0}});var s;var r;c.Object.each(e,function(e){r=new c.Squarespace.SlideRendering.Slices.RGB({color:e});s=r.getBrightness();t++;a+=s;i+=Math.pow(s,2);n.add(r)});var o=(i-Math.pow(a,2)/t)/t;var l=Math.sqrt(o)/127.5;n.divide(t);return{distribution:l,averageColor:n}},_calculateStyles:function(e,t){var a=153;var i=e.getBrightness();var n=t>.4?.5:.3;var s=i>=a?30:20;e.darken(s);return{opacity:n,color:e}}}},"1.0",{requires:["json","squarespace-slide-rendering-slices-rgb"]})},6069:function(e,t,a){var i=a(809);YUI.add("squarespace-slide-rendering-slices-rgb",function(a){a.namespace("Squarespace.SlideRendering.Slices");a.Squarespace.SlideRendering.Slices.RGB=a.Base.create("RGB",a.Base,[],{getBrightness:function(){var e=this.get("color");return.2126*e.r+.7152*e.g+.0722*e.b},add:function(e){var t=this.get("color");var a=e.get("color");t.r+=a.r;t.g+=a.g;t.b+=a.b},darken:function(e){this.divide((100+e)/100)},divide:function(e){var t=this.get("color");t.r/=e;t.g/=e;t.b/=e;this._validate()},toString:function(){var e=this.get("color");return"rgb("+e.r+","+e.g+","+e.b+")"},_validate:function(){var t=this.get("color");a.Object.keys(t).forEach(function(e){t[e]=Math.round(Math.min(Math.max(0,t[e]),255))})},_fromHex:function(e){var t=i(e,"rgb");return{r:t.red,g:t.green,b:t.blue}}},{ATTRS:{color:{value:{r:0,g:0,b:0},setter:function(e){if(a.Lang.isString(e)){"#"!==e[0]&&(e="#"+e);e=this._fromHex(e)}return e}}}})},"1.0",{requires:["base"]})},6070:function(e,t){YUI.add("squarespace-slide-rendering-slices-heading",function(n){n.namespace("Squarespace.SlideRendering.Slices");n.Squarespace.SlideRendering.Slices.Heading=n.Base.create("Heading",n.Squarespace.SlideRendering.Slices.Base,[n.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var t=e.get("text");var a=!n.Lang.isValue(t)||""===t;var i=n.Squarespace.Escaping.escapeForHtml(t);this.get("contentBox").one("h1").setHTML(i);this._updateContentEmptyAttribute(a)}},{SLICE_TYPE:n.Squarespace.SliceType.HEADING,CSS_PREFIX:"sqs-slice-heading"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6071:function(e,t){YUI.add("squarespace-slide-rendering-slices-image",function(t){t.namespace("Squarespace.SlideRendering.Slices");var a=t.Squarespace.SlideRendering.Slices.Image=t.Base.create("Base",t.Squarespace.SlideRendering.Slices.Base,[],{syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("contentBox").one("img");e&&e.plug(t.Squarespace.Loader2,{load:true,mode:"fit"})}},{SLICE_TYPE:t.Squarespace.SliceType.IMAGE,CSS_PREFIX:"sqs-slice-image",ATTRS:{}})},"1.0",{requires:["base","squarespace-enum","squarespace-image-loader","squarespace-slide-rendering-slices-base"]})},6072:function(e,t){YUI.add("squarespace-slide-rendering-slices-lock",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Lock=e.Base.create("Lock",e.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.LOCK,CSS_PREFIX:"sqs-slice-lock"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base"]})},6073:function(e,t,a){var s=a(4117);var i=a(3047);var r=a(213);YUI.add("squarespace-slide-rendering-slices-map",function(n){n.namespace("Squarespace.SlideRendering.Slices");var e=n.Squarespace.SlideRendering.Slices.Map=n.Base.create("Map",n.Squarespace.SlideRendering.Slices.Base,[n.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._events=[]},destructor:function(){this._events.forEach(function(e){e.detach()});this._events=null},renderUI:function(){e.superclass.renderUI.call(this);this._createMap()},bindUI:function(){e.superclass.bindUI.call(this);this._events.push(n.Global.on("tweak:change",this._onTweakChange,this));this._events.push(n.Global.on("tweak:reset",this._syncMapStyle,this));this._events.push(n.one(n.config.win).on("resize",this._centerMarker,this))},_onTweakChange:function(e){"map-style"===e.getName()&&this._syncMapStyle()},_syncMapStyle:function(){var e=this.get("map");e.updateUIOptions({style:this._getMapStyle()});this._centerMarker()},_createMap:function(){var e=this.get("mapContainer");var t=e.getAttribute("data-location");var a=n.JSON.parse(t);this._renderLocation(a)},_getMapStyle:function(){var e=this.get("slideSelector")+" .sqs-slide-container";var t=n.one(e).get("className");var a;a=-1!==t.indexOf("minimal-dark")?i.MinimalDark:-1!==t.indexOf("minimal-blue")?i.MinimalBlue:i.MinimalLight;return a},_renderLocation:function(e){var t=this.get("mapContainer");var a={mapZoom:e.mapZoom,mapLat:e.mapLat,mapLng:e.mapLng,markerLat:e.markerLat,markerLng:e.markerLng};var i={draggable:false,scrollwheel:false,showLabels:false,showControls:false,style:this._getMapStyle()};r("google_maps_map_load_on_site");s.createView(i,a,t.getDOMNode()).then(n.bind(function(e){this.set("map",e);e.centerMarker()},this),function(){false})},_centerMarker:function(){this.get("map").centerMarker()},_rebuildContent:function(){this.get("mapContainer").remove(true);var e=n.Node.create('<div class="sqs-slice-content-map"></div>');this.get("contentBox").appendChild(e);this.set("mapContainer",e)},refreshFromSliceContent:function(e){var t=e.get("location").toJSON();this._rebuildContent();this._renderLocation(t)}},{SLICE_TYPE:n.Squarespace.SliceType.MAP,CSS_PREFIX:"sqs-slice-map",ATTRS:{map:{value:null,validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(s)},mapContainer:{value:null,validator:n.Squarespace.AttrValidators.isNullOrNode}},HTML_PARSER:{mapContainer:".sqs-slice-content-map"}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6074:function(e,t,a){var u=a(24).t;var r=a(1336).isValidEmail;var i=a(87);var n=a(114);var o=a(1937);var l=a(2611);var c=a(2610);YUI.add("squarespace-slide-rendering-slices-newsletter",function(s){s.namespace("Squarespace.SlideRendering.Slices");var t=s.Squarespace.SlideRendering.Slices.Newsletter=s.Base.create("Newsletter",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){t.superclass.initializer.call(this);this._bindGlobalEvents()},renderUI:function(){t.superclass.renderUI.call(this);this.renderCaptcha()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");var a=e.one("form.newsletter-form");var i=s.Squarespace.FormSubmit(a.getDOMNode());var n=this._getEmailField(a);n.on("focus",function(){i.clearErrors()},this);a.on("submit",function(){n.blur();i.clearErrors();var e;if(!r(n.get("value"))){e=i.createErrorNode(u("Please enter a valid email address."));a.prepend(e);return false}var t=a.getAttribute("data-form-id");if(!t){e=i.createErrorNode(u("Please connect your newsletter to a storage option."));a.prepend(e);return false}i.submit({collectionId:null,disableValidation:true,formId:t,isOverlayForm:true,objectName:null,submitButtonText:this._getSubmitButtonText(a)});return false},this)},_getEmailField:function(e){return e.one('.field-element[type="text"]')},_getEmailPlaceholderText:function(e){return this._getEmailField(e).getDOMNode().getAttribute("placeholder")},_getSubmitButton:function(e){return e.one("button")},_getSubmitButtonText:function(e){return this._getSubmitButton(e).get("value")},_bindGlobalEvents:function(){s.Global.detach("refreshCaptchaFromState");this._handleCaptchRefresh=s.Global.after("refreshCaptchaFromState",function(e){var t=e.captchaConfig;var a=this.get("contentBox");var i=a.one("div.captcha-container-wrapper");if(i){var n=i.one(".captcha-container");if(n){o.destroy(n.getDOMNode());n.remove()}if(t.captchaEnabled){i.append(this._createCaptchaContainer(t));this.renderCaptcha()}}},this)},_createCaptchaContainer:function(e,t){var a=s.Node.create('<div class="captcha-container"/>');a.toggleClass("align-center",e.captchaAlignment===l.CENTER);a.toggleClass("align-right",e.captchaAlignment===l.RIGHT);a.setAttribute("data-theme",e.captchaTheme===c.LIGHT?"light":"dark");return a},renderCaptcha:function(){if(!n.isFeatureEnabled(i.NEWSLETTER_BLOCK_CAPTCHA))return;var e=this.get("contentBox");if(!e)return;var t=e.one(".captcha-container");var a=t&&t.getDOMNode();if(!a)return;o.render(s.config.win,a)},destructor:function(){this._handleCaptchRefresh&&this._handleCaptchRefresh.detach()},refreshFromSliceContent:function(e){var t=this.get("contentBox");var a=t.one("form.newsletter-form");var i=e.get("emailPlaceholder")||u("Email Address");this._getEmailField(a).getDOMNode().setAttribute("placeholder",i);var n=e.get("submitButtonText")||"";this._getSubmitButton(a).set("innerHTML",n);var s=t.one(".form-submission-text");var r=e.get("submissionMessage")||{html:""};s.set("innerHTML",r.html);var o=t.one(".form-submission-html");var l=e.get("submissionHTML");o.set("innerHTML",l);var c=t.one(".form-disclaimer-text");var d=e.get("disclaimerMessage");c.set("innerHTML",d.html)}},{SLICE_TYPE:s.Squarespace.SliceType.NEWSLETTER,CSS_PREFIX:"sqs-slice-newsletter"})},"1.0",{requires:["base","squarespace-enum","squarespace-form-submit","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6075:function(e,t){YUI.add("squarespace-slide-rendering-slices-navigation",function(s){s.namespace("Squarespace.SlideRendering.Slices");s.Squarespace.SlideRendering.Slices.Navigation=s.Base.create("Navigation",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var i="";var n=true;e.get("links").each(function(e){var t=e.get("text");if(s.Lang.isValue(t)&&""!==t){n=false;var a=e.get("clickthroughUrl");i+=s.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:a.url,targetNode:a.newWindow?' targetNode="_blank"':"",text:s.Squarespace.Escaping.escapeForHtml(t)})}});this.get("contentBox").one("ul").setHTML(i);this._updateContentEmptyAttribute(n)}},{SLICE_TYPE:s.Squarespace.SliceType.NAVIGATION,CSS_PREFIX:"sqs-slice-navigation"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6076:function(e,t,a){var s=a(24).t;YUI.add("squarespace-slide-rendering-slices-password",function(n){n.namespace("Squarespace.SlideRendering.Slices");var i=n.Squarespace.SlideRendering.Slices.Password=n.Base.create("Password",n.Squarespace.SlideRendering.Slices.Base,[],{renderUI:function(){n.UA.ios&&n.UA.safari||this.get("contentBox").one('input[type="password"]').focus()},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one('input[type="password"]');var a=e.one(".password-form");t.after("valuechange",function(){this._hideErrorMessage()},this);a.on("submit",function(e){e.preventDefault();this._hideErrorMessage();this._authenticate()},this)},_authenticate:function(){if(n.Squarespace.Utils.isInDamaskFrame()){this._showErrorMessage(s("Log out to test."));return}var e=this.get("contentBox").one('input[type="password"]');var t=n.one("body").get("id");var a=n.Squarespace.API_ROOT+"auth/visitor";var i={password:e.get("value")};if(-1!==t.indexOf("collection-")){a+="/collection";i.collectionId=t.split("collection-")[1]}else a+="/site";n.Data.post({headers:{"Content-Type":"application/json"},url:a,data:n.JSON.stringify(i),success:function(){window.location.reload(true)},failure:function(){this._showErrorMessage(s("Please try again."));this.get("contentBox").one('input[type="password"]').focus()}},this)},_showErrorMessage:function(e){var t=this.get("contentBox");t.one(".error-message").setHTML(e);t.addClass("show-error")},_hideErrorMessage:function(){this.get("contentBox").removeClass("show-error")}},{SLICE_TYPE:n.Squarespace.SliceType.PASSWORD,CSS_PREFIX:"sqs-slice-password"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-util"]})},6077:function(e,t){YUI.add("squarespace-slide-rendering-slices-social-icons",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.SocialIcons=e.Base.create("SocialIcons",e.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-social-icons"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base"]})},6078:function(e,t){YUI.add("squarespace-slide-rendering-slices-sub-heading",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.SubHeading=e.Base.create("SubHeading",e.Squarespace.SlideRendering.Slices.Base,[e.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){this.get("contentBox").one("h2").setHTML(e.get("text"))}},{SLICE_TYPE:e.Squarespace.SliceType.SUB_HEADING,CSS_PREFIX:"sqs-slice-sub-heading"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},6079:function(e,t,a){var n=a(6401);YUI.add("squarespace-slide-rendering-slices-twitter",function(i){i.namespace("Squarespace.SlideRendering.Slices");i.Squarespace.SlideRendering.Slices.Twitter=i.Base.create("Twitter",i.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var e=this.get("boundingBox");var t=e.all(".sqs-tweet");if(t.size()>0){t.each(function(e){e.all(".tweet-body a").each(function(e){e.setAttribute("target","_blank")})});var a=e.one(".sqs-tweets-container").getDOMNode();this._tweetGallery=new n(a,"sqs-tweet",i.config.win)}},destructor:function(){this._tweetGallery&&this._tweetGallery.destroy()}},{SLICE_TYPE:i.Squarespace.SliceType.TWITTER,CSS_PREFIX:"sqs-slice-twitter",ATTRS:{}})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-util"]})},6080:function(e,t){YUI.add("squarespace-slide-rendering-slices-video",function(d){d.namespace("Squarespace.SlideRendering.Slices");var e=d.Squarespace.SlideRendering.Slices.Video=d.Base.create("Video",d.Squarespace.SlideRendering.Slices.Base,[d.Squarespace.SlideRendering.Slices.ClientRefresh],{destructor:function(){if(this._lightbox){this._lightbox.destroy();delete this._lightbox}},bindUI:function(){e.superclass.bindUI.call(this);this.get("contentBox").one(".sqs-slice-play-button").on("click",function(){this._openVideo();this._lightbox._overlay.once("hide",function(e){d.Global.fire("lightbox-hidden")},this)},this)},refreshFromSliceContent:function(e){var t=e.get("contentItem");var a=t.get("structuredContent");var i=a.get("oembed");var n=this.get("contentBox").one(".sqs-video-wrapper");d.Lang.isValue(n)&&n.remove(true);if(d.Lang.isValue(i)&&d.Lang.isValue(i.html)&&""!==i.html){var s=i.html;var r=i.providerName||"";var o=this.get("contentBox");var l=o.one(".sqs-slice-play-button");var c=d.Squarespace.Escaping.escapeForHtmlTag(s);o.insertBefore('<div class="sqs-video-wrapper" data-load="false" data-html="'+c+'" data-providerName="'+r+'" ></div>',l)}},_openVideo:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");if(!d.Lang.isValue(e))return;if(this._lightbox){this._lightbox.destroy();delete this._lightbox}this._lightbox=new d.Squarespace.Lightbox2({controls:{previous:false,next:false},set:[{content:e}],currentSetIndex:0,videoLoaderOptions:{forceAutoplay:true}});this._lightbox.render()}},{SLICE_TYPE:d.Squarespace.SliceType.VIDEO,CSS_PREFIX:"sqs-slice-video"})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-escaping-utils","squarespace-modal-lightbox","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh","squarespace-video-loader"]})},6081:function(e,t,a){var s=a(164).BoundaryRatios;var r=a(164).FontSize;var o=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-left-01",function(n){n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.AudioFullLeft01=n.Base.create("AudioFullLeft01",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-links");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:26}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15}));var a=new r({rootNode:e.querySelector(".responsive-wrapper.actions"),widthBoundaryNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new s({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new s({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.add("inline");a.disable();i.disable()},onRespond:function(e){e.classList.remove("inline");a.enable();i.enable()}}));this._registerResponsiveComponent(new o({rootNode:e.querySelector(".sqs-slide-layer-content > .sqs-slice-group"),onReset:function(e){e=new n.Node(e);e.removeClass("stacked");e.ancestor(".sqs-slide-layer").removeClass("scroll")},onRespond:function(e){e=new n.Node(e);e.addClass("stacked");e.ancestor(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6082:function(e,t,a){var l=a(164).BoundaryRatios;var c=a(164).FontSize;var d=a(164).OverflowDetector;var u=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-right-01",function(s){var t=function(e){return new s.Node(e).ancestor(".sqs-slide-layer").getDOMNode()};var r=function(e){t(e).classList.add("scroll")};var o=function(e){t(e).classList.remove("scroll")};s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.AudioFullRight01=s.Base.create("AudioFullRight01",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var e=a.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=Array.prototype.slice.call(a.querySelectorAll(".track"));i.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});this._registerResponsiveComponent(new c({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:12}));this._registerResponsiveComponent(new c({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15}));this._registerResponsiveComponent(new c({rootNode:t,widthBoundaryNode:e,fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new l({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new s.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new u({rootNode:a.querySelector(".group-logo"),targetNode:e,padding:20,onReset:function(e,t){o(t);e.classList.add("top-full-width");t.classList.add("align-center-vert")},onRespond:function(e,t){r(t);e.classList.remove("top-full-width");t.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new u({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:e,padding:50,onReset:function(e,t){e.parentNode.classList.add("bottom-full-width");t.classList.add("align-center-vert")},onRespond:function(e,t){e.parentNode.classList.remove("bottom-full-width");t.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new u({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:t,padding:50,onReset:function(e,t){e.parentNode.classList.add("bottom-full-width");t.parentNode.classList.add("align-center-vert");o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e,t){e.parentNode.classList.remove("bottom-full-width");t.parentNode.classList.remove("align-center-vert");r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}}));this._registerResponsiveComponent(new d({rootNode:e,onReset:function(e){o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e){r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}}));var n=new d({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),onReset:function(e){o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e){r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}});this._registerResponsiveComponent(n)}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6083:function(e,t,a){var r=a(164).BoundaryRatios;var o=a(164).FontSize;var l=a(164).OverflowDetector;var c=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-left-right-01",function(s){s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.AudioLeftRight01=s.Base.create("AudioLeftRight01",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=Array.prototype.slice.call(e.querySelectorAll(".track"));i.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});var n=!!s.one("html.flexbox");this._registerResponsiveComponent(new o({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:20}));this._registerResponsiveComponent(new o({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new o({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new s.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new r({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(e,t){document.querySelector("html.flexbox")||a.classList.add("align-center-vert")},onRespond:function(e,t){n||a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new c({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(e){if(!n){e.classList.add("align-center");e.classList.remove("align-center-horiz")}},onRespond:function(e){if("left"!==a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float&&!n){e.classList.remove("align-center");e.classList.add("align-center-horiz")}}}));this._registerResponsiveComponent(new l({rootNode:a,padding:Math.max(25,2*parseInt(getComputedStyle(e)["border-top-width"],10)),onReset:function(e){e.parentNode.classList.remove("scroll");if(!n){a.classList.add("align-center");a.classList.remove("align-center-horiz")}},onRespond:function(e){e.parentNode.classList.add("scroll");if(!n){a.classList.remove("align-center");a.classList.add("align-center-horiz")}}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6084:function(e,t,a){var n=a(164).FontSize;var s=a(164).BoundaryRatios;var r=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-center-01",function(i){var e=function(e){if(i.instanceOf(e,i.Node))return e.getDOMNode();return null};i.namespace("Squarespace.SlideRendering.Layouts");i.Squarespace.SlideRendering.Layouts.LandingFullCenter01=i.Base.create("LandingFullCenter01",i.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox");this._registerResponsiveComponent(new n({rootNode:e(a.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),widthRatio:.5,minFontSize:13}));var t;this._registerResponsiveComponent(new n({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(e){t.disable()},onRespond:function(e){},onMinFontSize:function(e){t.enable()}}));t=new n({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:false,heightBoundaryNode:e(a.one(".sqs-slide-layer")),onReset:function(e){},onRespond:function(e){},onMinFontSize:function(e){}});this._registerResponsiveComponent(t);this._registerResponsiveComponent(new n({rootNode:e(a.one(".responsive-wrapper.actions")),fontSizeNodes:[e(a.one('[data-compound-type="action"] ul')),e(a.one('[data-slice-type="custom-form"]'))],minFontSize:10,widthRatio:.8,onReset:function(e){e=new i.Node(e);e.removeClass("stacked")},onMinFontSize:function(e){e=new i.Node(e);e.addClass("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e(a.one(".responsive-wrapper.social")),widthRatio:.9,onReset:function(e){e=new i.Node(e);e.removeClass("stacked")},onRespond:function(e){e=new i.Node(e);e.addClass("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e(a.one(".group-copy")),targetNode:e(a.one(".group-social")),padding:20,onReset:function(e,t){e=new i.Node(e);t=new i.Node(t);e.addClass("align-center-vert");e.addClass("full-width");e.removeClass("stacked");a.one(".sqs-slide-layer.layer-front").removeClass("scroll");t.addClass("bottom-full-width")},onRespond:function(e,t){e=new i.Node(e);t=new i.Node(t);e.removeClass("align-center-vert");e.addClass("full-width");e.addClass("stacked");a.one(".sqs-slide-layer.layer-front").addClass("scroll");t.removeClass("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:e(a.one(".group-copy")),targetNode:e(a.one('[data-compound-type="logo"]:not([data-content-empty="true"])')),padding:20,onReset:function(e,t){e=new i.Node(e);t=new i.Node(t);e.addClass("align-center-vert");e.addClass("full-width");e.removeClass("stacked");a.one(".sqs-slide-layer.layer-front").removeClass("scroll");t.addClass("align-center-horiz");a.one(".group-social").addClass("bottom-full-width")},onRespond:function(e,t){e=new i.Node(e);t=new i.Node(t);e.removeClass("align-center-vert");e.removeClass("full-width");e.addClass("stacked");a.one(".sqs-slide-layer.layer-front").addClass("scroll");t.removeClass("align-center-horiz");a.one(".group-social").removeClass("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6085:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-center-02",function(o){var l=function(e){return new o.Node(e).get("region")};o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.LandingFullCenter02=o.Base.create("LandingFullCenter02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".group-copy");var i=a.querySelector('[data-slice-type="body"]');var n=e.querySelector(".responsive-wrapper");var s=e.querySelector('[data-compound-type="logo"]');var r=e.querySelector(".group-links");this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13}));this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.25,scale:.99,minFontSize:18,heightBoundaryNode:t}));this._registerResponsiveComponent(new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.8,onReset:function(e){n.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){n.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new o.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new c({rootNode:r,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){n.classList.remove("stacked")},onRespond:function(e){n.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:e.querySelector('[data-slice-type="navigation"]'),widthBoundaryNode:t,widthRatio:.8,onReset:function(e){n.classList.remove("stacked")},onRespond:function(e){n.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:r,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){n.classList.remove("stacked");r.classList.add("top-right");s.classList.remove("aligned");r.classList.remove("bottom-full-width")},onRespond:function(e){n.classList.add("stacked");r.classList.remove("top-right");s.classList.add("aligned");r.classList.add("bottom-full-width")}}));this._registerResponsiveComponent(new g({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:r,padding:60,onReset:function(e,t){t.classList.add("top-right");t.querySelector('.sqs-slice:not([data-content-empty="true"])')?s.classList.remove("aligned"):s.classList.add("aligned");t.classList.remove("bottom-full-width");var a=e.parentNode;a.style.marginTop=null;a.style.marginBottom=null;t.style.marginTop=null;t.style.marginBottom=null;var i=Math.floor((l(a).height-l(t).height)/2);var n=i>0?t:a;n.style.marginTop=Math.abs(i)+"px";n.style.marginBottom=Math.abs(i)+"px"},onRespond:function(e,t){t.classList.remove("top-right");s.classList.add("aligned");t.classList.add("bottom-full-width");var a=e.parentNode;a.style.marginTop=null;a.style.marginBottom=null;t.style.marginTop=null;t.style.marginBottom=null}}));this._registerResponsiveComponent(new g({rootNode:a,targetNode:r,padding:60,onReset:function(e,t){e.classList.remove("stacked");e.classList.add("align-center-vert");e.classList.add("restrict-width-1000");t.classList.add("top-right");s.classList.remove("aligned");t.classList.remove("bottom-full-width");t.parentNode.classList.remove("scroll")},onRespond:function(e,t){e.classList.add("stacked");e.classList.remove("align-center-vert");e.classList.remove("restrict-width-1000");t.classList.remove("top-right");s.classList.add("aligned");t.classList.add("bottom-full-width");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:a,onReset:function(e){e.classList.add("align-center-vert");e.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");e.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:i,onReset:function(e){a.classList.add("align-center-vert");a.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");a.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:r,padding:10,onReset:function(e){a.classList.add("align-center-vert");e.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");e.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6086:function(e,t,a){var n=a(164).FontSize;var s=a(164).BoundaryRatios;var r=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-centercard-01",function(i){i.namespace("Squarespace.SlideRendering.Layouts");i.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01=i.Base.create("LandingFullCenterCard01",i.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13,onReset:function(e,t){},onMinFontSize:function(e,t){}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.6,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:e.querySelector(".group-social"),widthRatio:.95,onReset:function(e){e.classList.remove("wrapped");e.parentNode.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");e.parentNode.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new i.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".group-social"),padding:20,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.remove("stacked");a.parentNode.classList.remove("scroll");t.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("stacked");a.parentNode.classList.add("scroll");t.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6087:function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-full-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingFullLeft01=e.Base.create("LandingFullLeft01",e.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},6088:function(e,t,a){var s=a(164).BoundaryRatios;var r=a(164).FontSize;var o=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-left-02",function(n){n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.LandingFullLeft02=n.Base.create("LandingFullLeft02",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front .sqs-slide-layer-content");var t=e.querySelector(".group-copy");var i=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".group-copy")}));this._registerResponsiveComponent(new r({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:12}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.8,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new n.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new s({rootNode:i,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:t,targetNode:i,padding:40,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.remove("stacked");a.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("stacked");a.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6089:function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-full-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingFullRight01=e.Base.create("LandingFullRight01",e.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},6090:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-topleft-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01=l.Base.create("LandingFullTopLeft01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front");var t=e.querySelector(".layer-front .sqs-slide-layer-content");var i=e.querySelector(".group-copy");var n=e.querySelector(".group-logo");var s=n.querySelector('[data-compound-type="logo"] > *');var r=e.querySelector('[data-slice-type="custom-form"]');this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:15}));this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:i,minFontSize:11,widthRatio:.8,onReset:function(e){e.classList.remove("stacked");r&&(r.style.fontSize=null)},onRespond:function(e){r&&(r.style.fontSize=e.ownerDocument.defaultView.getComputedStyle(e).fontSize)},onMinFontSize:function(e){e.classList.add("stacked");r&&r.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:e.querySelector(".sqs-slice-group.link-group-inline"),widthBoundaryNode:t,widthRatio:.99,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked")}}));var o=new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.99,onReset:function(e,t){e.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e,t){e.classList.add("stacked");var a=e.childNodes;if(!e.querySelector(".break")){var i=new l.Node(a.item(Math.floor(a.length/2)));i.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new g({rootNode:s,targetNode:i,onReset:function(e,t){e=new l.Node(e);t=new l.Node(t);a.classList.remove("scroll");n.classList.add("bottom-full-width");n.classList.remove("stacked")},onRespond:function(e,t){e=new l.Node(e);t=new l.Node(t);a.classList.add("scroll");n.classList.remove("bottom-full-width");n.classList.add("stacked")}}));this._registerResponsiveComponent(new u({rootNode:i,padding:20,onReset:function(e){a.classList.remove("scroll");n.classList.add("bottom-full-width");n.classList.remove("stacked")},onRespond:function(e){a.classList.add("scroll");n.classList.remove("bottom-full-width");n.classList.add("stacked")}}));this._registerResponsiveComponent(new u({rootNode:s,padding:0,onReset:function(e){a.classList.remove("scroll");n.classList.add("bottom-full-width");n.classList.remove("stacked")},onRespond:function(e){a.classList.add("scroll");n.classList.remove("bottom-full-width");n.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6091:function(e,t,a){var n=a(164).BoundaryRatios;var s=a(164).FontSize;var r=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-left-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingLeftRight01=e.Base.create("LandingLeftRight01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper.actions");var i=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.2,scale:.99,minFontSize:20,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));this._registerResponsiveComponent(new s({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:i,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:60,onReset:function(e,t){a.classList.add("align-center-vert")},onRespond:function(e,t){a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"]'),targetNode:i,padding:40,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width");e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:a,targetNode:i,padding:50,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width");e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6092:function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-right-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingRightLeft01=e.Base.create("LandingRightLeft01",e.Squarespace.SlideRendering.Layouts.LandingLeftRight01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-left-right-01"]})},6093:function(e,t,a){var n=a(164).BoundaryRatios;var s=a(164).FontSize;var r=a(164).OverflowDetector;var o=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-location-full-corners-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LocationFullCorners01=e.Base.create("LocationFullCorners01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var e=t.querySelector(".responsive-wrapper.actions");this._registerResponsiveComponent(new s({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:10,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,minFontSize:20,scale:.99}));var a=new s({rootNode:e,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new n({rootNode:t.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onRespond:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new o({rootNode:t.querySelector(".group-copy"),targetNode:t.querySelector(".sqs-slice-group.group-links"),padding:60,onReset:function(e,t){e.classList.remove("stacked");t.classList.add("top-right");t.classList.remove("restrict-width-500");a.disable();i.disable()},onRespond:function(e,t){e.classList.add("stacked");t.classList.remove("top-right");t.classList.add("restrict-width-500");a.enable();i.enable()}}));this._registerResponsiveComponent(new r({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:0,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6094:function(e,t,a){var i=a(164).FontSize;var n=a(164).OverflowDetector;var s=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-location-right-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LocationRightLeft01=e.Base.create("LocationRightLeft01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.25,scale:.99,minFontSize:30,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.9,scale:.99,minFontSize:20}));this._registerResponsiveComponent(new i({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:a,targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:40,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.classList.add("bottom-full-width");a.classList.add("align-center-vert")},onRespond:function(e,t){e.parentNode.classList.add("scroll");t.classList.remove("bottom-full-width");a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slide-layer-content.content-copy"),widthRatio:1,onReset:function(e){e.parentNode.parentNode.classList.remove("scroll")},onRespond:function(e){e.parentNode.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6095:function(e,t,a){var i=a(164).OverflowDetector;var n=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-bottomleft-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullBottomleft01=e.Base.create("LockFullBottomleft01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-content");var a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="lock"]'),targetNode:e.querySelector(".sqs-slice-group.group-copy-password"),onReset:function(){t.classList.remove("stack")},onRespond:function(){t.classList.add("stack")},padding:200}));this._registerResponsiveComponent(new i({rootNode:t,onReset:function(e){e.classList.add("bottom-full-width");a.classList.remove("scroll")},onRespond:function(e){e.classList.remove("bottom-full-width");a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6096:function(e,t,a){var i=a(164).FontSize;var n=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter01=e.Base.create("LockFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.16}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6097:function(e,t){YUI.add("squarespace-slide-rendering-layouts-lock-full-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter02=e.Base.create("LockFullCenter02",e.Squarespace.SlideRendering.Layouts.LockFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-lock-full-center-01"]})},6098:function(e,t,a){var i=a(164).FontSize;var n=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-03",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter03=e.Base.create("LockFullCenter03",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:14}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:18}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:50,onReset:function(e,t){t.classList.add("align-center");t.classList.remove("stacked");t.style.top="50%";t.style.left="50%"},onRespond:function(e,t){t.classList.remove("align-center");t.classList.add("stacked");var a=e.getBoundingClientRect();t.style.top=a.bottom+"px";t.style.left=a.left+"px"}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6099:function(e,t,a){var i=a(164).FontSize;var n=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-04",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter04=e.Base.create("LockFullCenter04",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRaito:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),targetNode:e.querySelector(".sqs-slice-group.group-top"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="lock"]:not([data-content-empty])'),targetNode:e.querySelector('[data-compound-type="logo"]'),onReset:function(e,t){t.parentNode.classList.remove("stacked")},onRespond:function(e,t){t.parentNode.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6100:function(e,t,a){var n=a(164).FontSize;var s=a(164).OverflowDetector;var r=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-05",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter05=e.Base.create("LockFullCenter05",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-content");var a=e.querySelector(".layer-front .sqs-slide-layer-content");var i=e.querySelector(".sqs-slide-layer");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:i,heightRatio:.16}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:i,widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new s({rootNode:t,onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");a.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");a.classList.add("scroll")}}));this._registerResponsiveComponent(new r({rootNode:t,targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:0,onReset:function(e,t){e.classList.add("align-center");e.classList.add("align-center-absolute");e.classList.remove("stacked");a.classList.remove("scroll");t.classList.add("bottom");t.classList.add("align-center-horiz")},onRespond:function(e,t){e.classList.remove("align-center");e.classList.remove("align-center-absolute");e.classList.add("stacked");a.classList.add("scroll");t.classList.remove("bottom");t.classList.remove("align-center-horiz")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6101:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard01=e.Base.create("OverlayCenterCard01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-copy"),onReset:function(e){t.classList.remove("scroll")},onRespond:function(e){t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6102:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard02=e.Base.create("OverlayCenterCard02",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6103:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-03",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard03=e.Base.create("OverlayCenterCard03",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6104:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-04",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard04=e.Base.create("OverlayCenterCard04",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6105:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-05",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard05=e.Base.create("OverlayCenterCard05",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.16,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6106:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-corner-card-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCornerCard01=e.Base.create("OverlayCornerCard01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6107:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-bottom-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullBottom01=e.Base.create("OverlayFullBottom01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var a=t.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:t.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),padding:0,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6108:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullCenter01=e.Base.create("OverlayFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6109:function(e,t,a){var i=a(164).BoundaryRatios;var n=a(164).FontSize;var s=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullCenter02=e.Base.create("OverlayFullCenter02",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6110:function(e,t,a){var s=a(164).FontSize;var r=a(164).BoundaryRatios;var o=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-profile-center-center-01",function(t){var n=function(e){if(t.instanceOf(e,t.Node))return e.getDOMNode();return null};t.namespace("Squarespace.SlideRendering.Layouts");t.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01=t.Base.create("ProfileCenterCenter01",t.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox");var e=t.one(".sqs-slice-group.group-links");this._registerResponsiveComponent(new s({rootNode:n(t.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),minFontSize:26,widthRatio:.9}));this._registerResponsiveComponent(new s({rootNode:n(t.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),minFontSize:18,widthRatio:.9,widthBoundaryNode:n(t.one(".group-copy"))}));var a=new s({rootNode:n(t.one(".responsive-wrapper")),fontSizeNodes:[n(t.one('[data-compound-type="action"] ul')),n(t.one('[data-slice-type="custom-form"]:not([data-content-empty])'))],widthBoundaryNode:e,widthRatio:.9,minFontSize:10,enabled:true,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new r({rootNode:n(t.one('[data-slice-type="social-icons"]')),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new r({rootNode:n(t.one(".responsive-wrapper")),widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.querySelector(".group-actions").style.whiteSpace="nowrap";i.disable()},onRespond:function(e){e.classList.add("stacked");e.querySelector(".group-actions").style.whiteSpace="normal";i.enable()}}));this._registerResponsiveComponent(new o({rootNode:n(t.one(".sqs-slice-group.group-content")),onReset:function(e){e.classList.add("align-center-vert");t.one(".sqs-slide-layer").removeClass("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.one(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6111:function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-center-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02=e.Base.create("ProfileCenterCenter02",e.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-center-center-01"]})},6112:function(e,t,a){var l=a(164).BoundaryRatios;var c=a(164).FontSize;var d=a(164).OverflowDetector;var u=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-bottom-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.ProfileFullBottom01=o.Base.create("ProfileFullBottom01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var e=t.querySelector(".group-copy");var a=t.querySelector(".group-content");var i=t.querySelector(".group-links");var n=t.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:a,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var s=new c({rootNode:n,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t.querySelector(".group-links"),minFontSize:12,widthRatio:.99,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(s);this._registerResponsiveComponent(new u({rootNode:t.querySelector('[data-slice-type="body"]'),targetNode:i,padding:120,onReset:function(){e.classList.remove("stacked")},onRespond:function(){e.classList.add("stacked")}}));this._registerResponsiveComponent(new u({rootNode:e,targetNode:i,padding:120,onReset:function(e,t){var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");n.classList.remove("wrapped");s.disable()},onRespond:function(e,t){var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");n.classList.remove("wrapped");s.enable()}}));this._registerResponsiveComponent(new l({rootNode:n,widthBoundaryNode:a,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));var r=new l({rootNode:t.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e=new o.Node(e);e.addClass("wrapped");var t=e.get("childNodes");e.one(".break")||t.item(Math.floor(t.size()/2)).insert('<br class="break">',"before")}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new d({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6113:function(e,t,a){var n=a(164).BoundaryRatios;var s=a(164).FontSize;var r=a(164).OverflowDetector;var o=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullCenter01=e.Base.create("ProfileFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var t=a.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new s({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:13}));this._registerResponsiveComponent(new s({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(e){i.disable()},onRespond:function(e){},onMinFontSize:function(e){i.enable()}}));var i=new s({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:false,heightBoundaryNode:a.querySelector(".sqs-slide-layer"),onReset:function(e){},onRespond:function(e){},onMinFontSize:function(e){}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new s({rootNode:a.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:a.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:a.querySelector(".group-copy"),targetNode:a.querySelector(".group-social"),padding:20,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.add("full-width");e.classList.remove("stacked");a.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll");t.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("full-width");e.classList.add("stacked");a.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll");t.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:a.querySelector(".group-copy"),onReset:function(e){e.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6114:function(e,t,a){var s=a(164).BoundaryRatios;var r=a(164).FontSize;var o=a(164).OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-left-01",function(n){n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.ProfileFullLeft01=n.Base.create("ProfileFullLeft01",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".group-copy");var i=e.querySelector(".group-links");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:26}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:a,minFontSize:10,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.66,onReset:function(e,t){e.classList.remove("wrap");e.parentNode.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e,t){e.classList.add("wrap");e.parentNode.classList.add("stacked");var a=e.childNodes;if(!e.querySelector(".break")){var i=new n.Node(a.item(Math.floor(a.length/2)));i.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new s({rootNode:i,widthBoundaryNode:a,widthRatio:.9,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:a,onReset:function(e){e.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new o({rootNode:i,onReset:function(e){a.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6115:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-middleband-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01=l.Base.create("ProfileFullMiddleband01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var i=e.querySelector(".group-copy");var t=e.querySelector(".group-content");var a=e.querySelector(".group-links");var n=e.querySelector(".sqs-slide-layer.layer-front");var s=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:t,minFontSize:20,widthRatio:.9,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:t,widthRatio:.9,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var r=new d({rootNode:s,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new c({rootNode:i,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new g({rootNode:e.querySelector('[data-slice-type="body"]'),targetNode:a,padding:60,onReset:function(){i.classList.remove("stacked")},onRespond:function(){i.classList.add("stacked")}}));this._registerResponsiveComponent(new g({rootNode:i,targetNode:a,padding:60,onReset:function(e,t){i.classList.remove("stacked");var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");s.classList.remove("wrapped");r.disable()},onRespond:function(e,t){i.classList.add("stacked");var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");s.classList.remove("wrapped");r.enable()}}));var o=new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new l.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new c({rootNode:s,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");o.disable()},onRespond:function(e){e.classList.add("stacked");o.enable()}}));this._registerResponsiveComponent(new u({rootNode:n.querySelector(".sqs-slide-layer-content"),padding:0,onReset:function(e){n.classList.remove("scroll")},onRespond:function(e){n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6116:function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-full-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullRight01=e.Base.create("ProfileFullRight01",e.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-left-01"]})},6117:function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-full-top-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullTop01=e.Base.create("ProfileFullTop01",e.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-bottom-01"]})},6118:function(e,t,a){var i=a(164).FontSize;var n=a(164).OverflowDetector;var s=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-left-left-01",function(t){t.namespace("Squarespace.SlideRendering.Layouts");t.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01=t.Base.create("ProfileLeftLeft01",t.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:30,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.3,onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,scale:.99,minFontSize:20,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new i({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.9,scale:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")},onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:0,onReset:function(e,t){t.classList.add("bottom-full-width")},onRespond:function(e,t){t.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-links"),onReset:function(e){e=new t.Node(e);e.ancestor(".sqs-slide-layer-content").removeClass("scroll")},onRespond:function(e){e=new t.Node(e);e.ancestor(".sqs-slide-layer-content").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6119:function(e,t,a){var s=a(164).BoundaryRatios;var r=a(164).FontSize;var o=a(164).OverflowDetector;var l=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-left-right-01",function(n){n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.ProfileLeftRight01=n.Base.create("ProfileLeftRight01",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=!!n.one("html.flexbox");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:26,widthRatio:.99}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new r({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(){t.classList.remove("stacked")},onMinFontSize:function(){t.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new n.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new s({rootNode:t,widthRatio:.9,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new l({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(e,t){i||a.classList.add("align-center-vert")},onRespond:function(e,t){n.one("html.flexbox")||a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new l({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(e){if(!i){e.classList.add("align-center");e.classList.remove("align-center-horiz")}},onRespond:function(e){if("left"!==a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float&&!i){e.classList.remove("align-center");e.classList.add("align-center-horiz")}}}));this._registerResponsiveComponent(new o({rootNode:a,padding:Math.max(25,2*parseInt(getComputedStyle(e)["border-top-width"],10)),onReset:function(e){e.parentNode.classList.remove("scroll");if(!i){a.classList.add("align-center");a.classList.remove("align-center-horiz")}},onRespond:function(e){e.parentNode.classList.add("scroll");if(!i){a.classList.remove("align-center");a.classList.add("align-center-horiz")}}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6120:function(e,t,a){var l=a(164).FontSize;var c=a(164).OverflowDetector;var d=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-twitter-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.TwitterFullCenter01=e.Base.create("TwitterFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-twitter");var t=e.querySelector(".responsive-wrapper");var i=e.querySelector(".group-logo");var n=e.querySelector(".layer-front .sqs-slide-layer-content");var s=e.querySelector('[data-compound-type="logo"]');var r=function(){if(t.classList.contains("stacked")||!i.classList.contains("top-left")){i.style.minHeight=null;t.style.minHeight=null}else{i.style.minHeight=t.clientHeight+"px";t.style.minHeight=i.clientHeight+"px"}};this._registerResponsiveComponent(new l({rootNode:s.querySelector("h1"),widthRatio:.4,minFontSize:13,onReset:function(){r()},onRespond:function(){r()},onMinFontSize:function(){r()}}));this._registerResponsiveComponent(new l({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:10,widthRatio:.8,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));var o=e.querySelectorAll('[data-slice-type="twitter"] .sqs-tweet .tweet-body');Array.prototype.forEach.call(o,function(e){this._registerResponsiveComponent(new l({rootNode:e,widthRatio:1,heightRatio:.5,scale:.97,minFontSize:18,heightBoundaryNode:a,onReset:function(e){},onMinFontSize:function(e){}}))},this);this._registerResponsiveComponent(new d({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t,onReset:function(e,t){t.classList.add("top-right");i.classList.add("top-left");t.classList.remove("stacked");s.classList.remove("stacked");r()},onRespond:function(e,t){t.classList.remove("top-right");i.classList.remove("top-left");t.classList.add("stacked");s.classList.add("stacked");r()}}));this._registerResponsiveComponent(new d({rootNode:t,targetNode:a,padding:20,onReset:function(e,t){e.classList.add("top-right");i.classList.add("top-left");e.classList.remove("stacked");s.classList.remove("stacked");a.classList.remove("stacked");n.classList.remove("scroll");r()},onRespond:function(e,t){e.classList.remove("top-right");i.classList.remove("top-left");e.classList.add("stacked");s.classList.add("stacked");a.classList.add("stacked");n.classList.add("scroll");r()}}));this._registerResponsiveComponent(new c({rootNode:a,onReset:function(){a.classList.remove("stacked");n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");n.classList.add("scroll")}}));this._registerResponsiveComponent(new c({rootNode:t,onReset:function(){a.classList.remove("stacked");n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6121:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-twitter-full-left-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.TwitterFullLeft01=l.Base.create("TwitterFullLeft01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-twitter");var i=e.querySelector(".group-logo-social-actions");var t=e.querySelector(".responsive-wrapper");var n=e.querySelector(".layer-front .sqs-slide-layer-content");var s=e.querySelector('[data-compound-type="logo"]');var r=function(){s.style.minHeight=t.clientHeight+"px";t.style.minHeight=s.clientHeight+"px"};this._registerResponsiveComponent(new d({rootNode:s.querySelector("h1"),widthBoundaryNode:n,widthRatio:.8,minFontSize:13,onReset:function(e,t){r()},onRespond:function(e,t){r()},onMinFontSize:function(e,t){r()}}));this._registerResponsiveComponent(new d({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.99,onReset:function(e){i.classList.add("right-left");e.classList.remove("stacked")},onRespond:function(e){},onMinFontSize:function(e){i.classList.remove("right-left");e.classList.add("stacked")}}));var o=e.querySelectorAll('[data-slice-type="twitter"] .tweet-body');Array.prototype.forEach.call(o,l.bind(function(e){this._registerResponsiveComponent(new d({rootNode:e,widthRatio:1,heightRatio:.55,scale:.97,minFontSize:18,heightBoundaryNode:a}))},this));this._registerResponsiveComponent(new g({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t.querySelector(".sqs-slice:last-child"),padding:40,onReset:function(e,t){i.classList.add("right-left")},onRespond:function(e,t){i.classList.remove("right-left")}}));this._registerResponsiveComponent(new g({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t.querySelector(".sqs-slice:first-child"),padding:40,onReset:function(e,t){i.classList.add("right-left")},onRespond:function(e,t){i.classList.remove("right-left")}}));this._registerResponsiveComponent(new c({rootNode:t,widthRatio:.95,onReset:function(e){e.classList.remove("stacked");r()},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new g({rootNode:e.querySelector(".group-logo-social-actions"),targetNode:a,padding:40,onReset:function(e,t){e.classList.add("bottom-full-width");a.classList.remove("stacked");n.classList.remove("scroll");r()},onRespond:function(e,t){e.classList.remove("bottom-full-width");a.classList.add("stacked");n.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:a,padding:20,onReset:function(){a.classList.remove("stacked");n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");n.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:t,padding:20,onReset:function(){a.classList.remove("stacked");n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6122:function(e,t,a){var c=a(164).BoundaryRatios;var d=a(164).FontSize;var u=a(164).OverflowDetector;var g=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-bottom-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.VideoFullBottom01=l.Base.create("VideoFullBottom01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var e=a.querySelector(".group-copy");var t=a.querySelector(".group-content");var i=a.querySelector(".group-links");var n=60;this._registerResponsiveComponent(new d({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:t,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new d({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var s=new d({rootNode:a.querySelector(".responsive-wrapper"),fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a.querySelector(".group-content"),minFontSize:10,widthRatio:.45,enabled:true,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(s);this._registerResponsiveComponent(new g({rootNode:a.querySelector('[data-slice-type="body"]'),targetNode:i,padding:60,onReset:function(){e.classList.remove("stacked")},onRespond:function(){e.classList.add("stacked")}}));this._registerResponsiveComponent(new g({rootNode:e,targetNode:i,padding:60,onReset:function(e,t){var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");t.querySelector(".responsive-wrapper").classList.remove("wrapped");s.disable()},onRespond:function(e,t){var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");t.querySelector(".responsive-wrapper").classList.remove("wrapped");s.enable()}}));this._registerResponsiveComponent(new c({rootNode:a.querySelector(".group-links .responsive-wrapper"),widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));var r=new c({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new l.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new g({rootNode:t,targetNode:a.querySelector(".group-video"),padding:120,onReset:function(e,t){o.disable();t.classList.add("text-align-center");t.classList.add("align-center");t.classList.remove("bottom-full-width");e.classList.add("full-width")},onRespond:function(e,t){t.classList.remove("text-align-center");t.classList.remove("align-center");if(a.querySelector(".vertical-positioning-top")){e.classList.remove("full-width");t.classList.add("bottom-full-width")}o.enable()}}));var o=new g({rootNode:t,targetNode:a.querySelector(".group-video"),padding:60,enabled:false,onReset:function(e,t){e.parentNode.classList.remove("scroll");e.style.top=null;e.style.bottom=null;t.style.top=null;t.style.bottom=null},onRespond:function(e,t){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50);if(a.querySelector(".vertical-positioning-top")){t.style.top=e.getBoundingClientRect().bottom+n+"px";t.style.bottom="auto"}else{e.style.top=t.getBoundingClientRect().bottom+n+"px";e.style.bottom="auto"}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new u({rootNode:t,onReset:function(e){e.parentNode.classList.remove("scroll")},onRespond:function(e){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50)}}));this._registerResponsiveComponent(new u({rootNode:a.querySelector(".group-video"),onReset:function(e){e.parentNode.classList.remove("scroll")},onRespond:function(e){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50)}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6123:function(e,t,a){var r=a(164).FontSize;var o=a(164).OverflowDetector;var l=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.VideoFullCenter01=e.Base.create("VideoFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".group-copy");var a=e.querySelector('[data-compound-type="logo"] > *');var i=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,heightRatio:.1,scale:.99,minFontSize:18,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));var n=new r({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(n);var s=new l({rootNode:t,targetNode:i,enabled:false,padding:10,onRespond:function(e,t){e.classList.add("stacked");e.classList.remove("align-center-vert");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}});this._registerResponsiveComponent(s);this._registerResponsiveComponent(new l({rootNode:a,targetNode:i,padding:60,onReset:function(e,t){var a=t.parentNode;a.classList.add("top-right");a.classList.remove("bottom-full-width");n.disable();s.disable();t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.add("text-align-left")},onRespond:function(e,t){var a=t.parentNode;a.classList.remove("top-right");a.classList.add("bottom-full-width");n.enable();s.enable();e.parentNode.classList.remove("text-align-left")}}));this._registerResponsiveComponent(new o({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.classList.add("align-center-vert");e.classList.add("full-width");e.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.add("stacked");e.classList.remove("align-center-vert");e.classList.remove("full-width");e.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6124:function(e,t,a){var l=a(164).BoundaryRatios;var c=a(164).FontSize;var d=a(164).OverflowDetector;var u=a(164).OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-corners-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.VideoFullCorners01=o.Base.create("VideoFullCorners01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var i=t.querySelector(".group-copy");var e=t.querySelector(".group-content");var a=t.querySelector(".group-links");var n=t.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:e,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var s=new c({rootNode:n,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(s);this._registerResponsiveComponent(new l({rootNode:i,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new u({rootNode:i,targetNode:a,padding:60,onReset:function(e,t){i.classList.remove("stacked");var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");n.classList.remove("wrapped");s.disable()},onRespond:function(e,t){i.classList.add("stacked");var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");n.classList.remove("wrapped");s.enable()}}));var r=new l({rootNode:t.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:e,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new o.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new l({rootNode:n,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));this._registerResponsiveComponent(new u({rootNode:t.querySelector(".group-video"),targetNode:t.querySelector(".layer-front .sqs-slide-layer-content"),padding:0,onReset:function(e,t){e.classList.add("absolute");t.parentNode.classList.remove("scroll")},onRespond:function(e,t){e.classList.remove("absolute");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:-1,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},6129:function(e,t,a){var r=a(5076);var d=a(21);var o=a(58);var u=a(6403);var g=a(24).t;var p=a(228);var h=a(24).formatDateTime;var f=a(595).doubleEncode;var m=a(3430);YUI.add("squarespace-widgets-tourdates-bandsintown",function(l){var i="mkt_source";var n=["utm_source","utm_medium","utm_campaign","utm_term","utm_content",i];function c(e){return[e.getFullYear(),r(e.getMonth()+1,2,"0"),r(e.getDate(),2,"0")].join("-")}function s(e,t){return e+(e.includes("?")?"&":"?")+l.QueryString.stringify(t)}var e=l.Base.create("bandsInTownTourDatesModelList",l.ModelList,[],{sync:function(e,t,a){if("read"!==e){console.warn("[TourDatesModelList] Unsupported sync action: "+e);return}a=l.Lang.isFunction(a)?a:d;var i=l.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]);var n="squarespace-"+i;var s;var r;if(this.get("artistId")){r=f(this.get("artistId").replace(/"/g,"'"));s="dateRange"===this.get("timeframe")?c(new Date(this.get("startDate")))+","+c(new Date(this.get("endDate"))):"upcoming"}else{r=encodeURIComponent("Morrissey");s="2015-11-01,2015-12-31"}var o="https://rest.bandsintown.com/artists/"+r+"/events?app_id="+n+"&date="+s;false;p.get(o).then(function(e){a(null,e.data)}).catch(function(e){a(e)})}},{ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null}}});l.namespace("Squarespace.Widgets");var a=l.Squarespace.Widgets.BandsInTownTourDatesList=l.Base.create("bandsInTownTourDatesList",l.Squarespace.SSWidget,[],{initializer:function(){this.onceAfter("loadedChange",this._onLoaded,this);this.get("modelList").load(l.bind(function(){this.set("loaded",true)},this))},_onLoaded:function(){this._registerEvent(l.on("windowresize",l.bind(function(){this._venues.size()&&this._setFlexDirection()},this)));this._registerEvent(l.on("domready",function(){this.renderUI()},this))},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("boundingBox");if(!this.get("loaded")){this.spinner||(this.spinner=new l.Squarespace.Spinner({size:30,color:"dark",render:e}));return}var t=this.get("contentBox");this.spinner.destroy();t.empty().append(this.renderTemplate());this.appendStructuredData();e.addClass("loaded");if(!this.get("artistId")){e.setAttribute("data-block-state","uninitialized");e.addClass("sqs-block-is-placeholder")}this._venues=t.all(".sqs-tourdates__venue-name");this._setFlexDirection();this.fire("templateRendered")},_setFlexDirection:function(){var e=this.get("contentBox");if(!e.getDOMNode())return;e.removeClass("sqs-tourdates--venuelocation--column");e.removeClass("sqs-tourdates--info--column");var t=this._venues.item(0);if(t){var a=t.getX();var i=this._venues.some(function(e){return e.getX()!==a});i&&e.addClass("sqs-tourdates--venuelocation--column");a=t.getX();i=this._venues.some(function(e){return e.getX()!==a});i&&e.addClass("sqs-tourdates--info--column")}},appendStructuredData:function(){var e=document.createElement("script");e.type="application/ld+json";e.text=this.get("contentBox").one("script").get("innerHTML");l.one("head").append(e)},getTourDateUrlAdditionalParams:function(){var e=l.config.win.location.search.slice(1);var a=l.QueryString.parse(e);var t=Object.keys(a).filter(function(e){return n.includes(e)}).reduce(function(e,t){e[t]=a[t];return e},{});t.hasOwnProperty(i)||(t[i]=l.config.win.location.hostname);return t},responseToStructuredData:function(e){var t;if(e.lineup&&e.lineup.length)t=e.lineup[0];else{console.error("[tourdates-bandsintown] event is missing lineup",e);t=g("artist not listed")}var a=g("{artist} @ {venue} in {city}, {region}",{artist:t,venue:e.venue.name,city:e.venue.city,region:"United States"===e.venue.country?e.venue.region:e.venue.country});var i={"@type":"MusicGroup",name:t,url:"https://www.bandsintown.com/"+f(t)};var n=e.offers.map(function(e){return{"@type":"Offer",url:e.url,availability:e.status,category:e.type}});return{"@context":"https://schema.org","@type":"MusicEvent",name:a,url:e.url,startDate:e.datetime,location:{"@type":"Place",name:e.venue.name,address:{"@type":"PostalAddress",addressCountry:e.venue.country,addressLocality:e.venue.city,addressRegion:e.venue.region},geo:{"@type":"GeoCoordinates",latitude:e.venue.latitude,longitude:e.venue.longitude}},performer:i,offers:n}},_getHBTemplateContext:function(){var e={loading:!this.get("loaded"),strings:{rsvp:g("RSVP"),noResults:g("There are no upcoming tour dates."),loading:g("Loading tour dates..."),notifyMe:g("Notify Me")},newWindow:!l.UA.mobile};if(!this.get("loaded"))return e;var t=this.get("modelList").toJSON();if(!t.length)return e;var a=this.getTourDateUrlAdditionalParams();e.tourdates=t.map(function(e){return e.url?l.merge({},e,{url:s(e.url,a),offers:e.offers.map(function(e){return e.url?l.merge({},e,{url:s(e.url,a)}):e})}):e});var i=t.map(this.responseToStructuredData).filter(function(e){return!!e});e.structuredData=u(i,null,2);return e}},{CSS_PREFIX:"sqs-tourdates-bandsintown-list",HANDLEBARS_TEMPLATE:"tourdates-bandsintown-list.html",ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null},modelList:{valueFn:function(){return new e(this.getAttrs(["artistId","timeframe","startDate","endDate"]))}},loaded:{value:false}}});l.Handlebars.registerHelper("tourdates-bit-datetime",function(e,t){var a=e.match(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/)[1];var i=o.utc(a);if("date"===t.hash.format)return h(i,"ll");if("weekday"===t.hash.format)return h(i,"ddd");if("time"===t.hash.format)return h(i,"LT")});l.Handlebars.registerHelper("tourdates-timezone-abbr",function(e){return m.tz(e).zoneAbbr()});l.Handlebars.registerHelper("equals-string",function(e,t,a){return l.Handlebars.helpers.if.call(this,function(){return e===t.toString()},a)});l.Handlebars.registerHelper("is-live",function(t,e){return l.Handlebars.helpers.if.call(this,function(){var e=t.filter(function(e){return"Watch Live"===e.type});return e.length>0},e)});l.Handlebars.registerHelper("url-encode",function(e){return encodeURIComponent(e)});l.Handlebars.registerHelper("url-encode-patch",f)},"1.0",{requires:["jsonp","model-list","squarespace-hb-compare","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates-bandsintown-list-template"]})},6130:function(e,t){YUI.add("squarespace-tourdates-bandsintown-list-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tourdates-bandsintown-list.html"]=e(function(e,t,c,a,i){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,e.helpers);i=i||{};var n="",s,d="function",u=this.escapeExpression,g=c.helperMissing,p=this,o=c.blockHelperMissing;function r(e,t){var a="",i;a+='\n    <div class="sqs-tourdates__noItems">'+u((i=(i=e.strings,null==i||false===i?i:i.loading),typeof i===d?i.apply(e):i))+"</div>\n  ";return a}function l(e,t,a){var i="",n,s;i+="\n    ";s=c["if"].call(e,(n=e.tourdates,null==n||false===n?n:n.length),{hash:{},inverse:p.program(34,N,t),fn:p.programWithDepth(4,h,t,e,a),data:t});(s||0===s)&&(i+=s);i+="\n  ";return i}function h(e,t,a,i){var n="",s,r;n+="\n      ";r={hash:{},inverse:p.noop,fn:p.programWithDepth(5,f,t,e,a,i),data:t};if(s=c.tourdates)s=s.call(e,r);else{s=e.tourdates;s=typeof s===d?s.apply(e):s}c.tourdates||(s=o.call(e,s,r));(s||0===s)&&(n+=s);n+="\n    ";return n}function f(e,t,a,i,n){var s="",r,o,l;s+='\n        <div class="sqs-tourdates__item">\n          <div class="sqs-tourdates__info">\n            <span class="sqs-tourdates__timeframe" data-tour-datetime="';if(r=c.datetime)r=r.call(e,{hash:{},data:t});else{r=e.datetime;r=typeof r===d?r.apply(e):r}s+=u(r)+'">\n              <span class="sqs-tourdates__date">';l={hash:{format:"date"},data:t};s+=u((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):g.call(e,"tourdates-bit-datetime",e.datetime,l)))+'</span>\n              <span class="sqs-tourdates__weekday">';l={hash:{format:"weekday"},data:t};s+=u((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):g.call(e,"tourdates-bit-datetime",e.datetime,l)))+'</span>\n            </span>\n            <div class="sqs-tourdates__venuelocation">\n              <div class="sqs-tourdates__venue">\n                <a href="https://bandsintown.com/e/';if(o=c.id)o=o.call(e,{hash:{},data:t});else{o=e.id;o=typeof o===d?o.apply(e):o}s+=u(o)+'" class="sqs-tourdates__venueLink" target="_blank" rel="noopener">\n                  <div class="sqs-tourdates__venue-name">\n                    ';o=c["if"].call(e,e.title,{hash:{},inverse:p.program(8,v,t),fn:p.program(6,m,t),data:t});(o||0===o)&&(s+=o);s+="\n                    @ ";l={hash:{format:"time"},data:t};s+=u((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):g.call(e,"tourdates-bit-datetime",e.datetime,l)))+" ";o=c["if"].call(e,(r=e.venue,null==r||false===r?r:r.timezone),{hash:{},inverse:p.noop,fn:p.program(10,b,t),data:t});(o||0===o)&&(s+=o);s+="\n                  </div>\n                  ";l={hash:{compare:1},inverse:p.noop,fn:p.program(12,y,t),data:t};o=(r=c.if_gt||e.if_gt,r?r.call(e,(r=e.lineup,null==r||false===r?r:r.length),l):g.call(e,"if_gt",(r=e.lineup,null==r||false===r?r:r.length),l));(o||0===o)&&(s+=o);s+='\n                </a>\n              </div>\n              <div class="sqs-tourdates__location">\n                ';l={hash:{},inverse:p.program(18,C,t),fn:p.program(16,_,t),data:t};o=(r=c["equals-string"]||e["equals-string"],r?r.call(e,(r=e.venue,null==r||false===r?r:r.type),"Virtual",l):g.call(e,"equals-string",(r=e.venue,null==r||false===r?r:r.type),"Virtual",l));(o||0===o)&&(s+=o);s+='\n              </div>\n            </div>\n          </div>\n          <div class="sqs-tourdates__actions">\n            ';o=c.each.call(e,e.offers,{hash:{},inverse:p.noop,fn:p.programWithDepth(21,k,t,n),data:t});(o||0===o)&&(s+=o);s+="\n\n            ";l={hash:{},inverse:p.programWithDepth(32,D,t,a,i),fn:p.programWithDepth(27,A,t,a),data:t};o=(r=c["equals-string"]||e["equals-string"],r?r.call(e,(r=e.venue,null==r||false===r?r:r.type),"Virtual",l):g.call(e,"equals-string",(r=e.venue,null==r||false===r?r:r.type),"Virtual",l));(o||0===o)&&(s+=o);s+="\n          </div>\n        </div>\n      ";return s}function m(e,t){var a="",i;a+="\n                      ";if(i=c.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===d?i.apply(e):i}a+=u(i)+"\n                    ";return a}function v(e,t){var a="",i;a+="\n                      "+u((i=(i=e.venue,null==i||false===i?i:i.name),typeof i===d?i.apply(e):i))+"\n                    ";return a}function b(e,t){var a="",i,n;a+=" ";n={hash:{},data:t};a+=u((i=c["tourdates-timezone-abbr"]||e["tourdates-timezone-abbr"],i?i.call(e,(i=e.venue,null==i||false===i?i:i.timezone),n):g.call(e,"tourdates-timezone-abbr",(i=e.venue,null==i||false===i?i:i.timezone),n)))+" ";return a}function y(e,t){var a="",i;a+='\n                    <div class="sqs-tourdates__lineup">';i=c.each.call(e,e.lineup,{hash:{},inverse:p.noop,fn:p.program(13,S,t),data:t});(i||0===i)&&(a+=i);a+="</div>\n                  ";return a}function S(e,t){var a,i,n;n={hash:{compare:0},inverse:p.noop,fn:p.program(14,q,t),data:t};i=(a=c.if_gt||e.if_gt,a?a.call(e,(a=t,null==a||false===a?a:a.index),n):g.call(e,"if_gt",(a=t,null==a||false===a?a:a.index),n));return i||0===i?i:""}function q(e,t){var a="";a+='<div class="sqs-tourdates__lineup-item">'+u(typeof e===d?e.apply(e):e)+"</div>";return a}function _(e,t){return"\n                "}function C(e,t){var a="",i,n;a+='\n                  <a href="https://bandsintown.com/e/';if(i=c.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===d?i.apply(e):i}a+=u(i)+'" class="sqs-tourdates__venue-link" target="_blank" rel="noopener">\n                    '+u((i=(i=e.venue,null==i||false===i?i:i.city),typeof i===d?i.apply(e):i))+", ";n=c["if"].call(e,(i=e.venue,null==i||false===i?i:i.region),{hash:{},inverse:p.noop,fn:p.program(19,E,t),data:t});(n||0===n)&&(a+=n);a+=u((i=(i=e.venue,null==i||false===i?i:i.country),typeof i===d?i.apply(e):i))+"\n                  </a>\n                ";return a}function E(e,t){var a="",i;a+=u((i=(i=e.venue,null==i||false===i?i:i.region),typeof i===d?i.apply(e):i))+", ";return a}function k(e,t,a){var i="",n,s,r;i+="\n              ";r={hash:{},inverse:p.noop,fn:p.programWithDepth(22,w,t,a),data:t};s=(n=c["equals-string"]||e["equals-string"],n?n.call(e,e.status,"available",r):g.call(e,"equals-string",e.status,"available",r));(s||0===s)&&(i+=s);i+="\n            ";return i}function w(e,t,a){var i="",n,s,r;i+='\n                <a href="';if(n=c.url)n=n.call(e,{hash:{},data:t});else{n=e.url;n=typeof n===d?n.apply(e):n}i+=u(n)+'" class="sqs-editable-button sqs-tourdates__button';r={hash:{},inverse:p.noop,fn:p.program(23,T,t),data:t};s=(n=c["equals-string"]||e["equals-string"],n?n.call(e,e.type,"Sold Out",r):g.call(e,"equals-string",e.type,"Sold Out",r));(s||0===s)&&(i+=s);i+='" ';s=c["if"].call(e,a.newWindow,{hash:{},inverse:p.noop,fn:p.program(25,I,t),data:t});(s||0===s)&&(i+=s);i+=">\n                  ";if(s=c.type)s=s.call(e,{hash:{},data:t});else{s=e.type;s=typeof s===d?s.apply(e):s}i+=u(s)+"\n                </a>\n              ";return i}function T(e,t){return" sqs-tourdates__button--soldout"}function I(e,t){return'target="_blank" rel="noopener"'}function A(e,t,a){var i="",n,s,r;i+="\n              ";r={hash:{},inverse:p.programWithDepth(30,L,t,a),fn:p.program(28,x,t),data:t};s=(n=c["is-live"]||e["is-live"],n?n.call(e,e.offers,r):g.call(e,"is-live",e.offers,r));(s||0===s)&&(i+=s);i+="\n            ";return i}function x(e,t){return"\n              "}function L(e,t,a){var i="",n;i+='\n                <a class="sqs-editable-button sqs-tourdates__button" href="';if(n=c.url)n=n.call(e,{hash:{},data:t});else{n=e.url;n=typeof n===d?n.apply(e):n}i+=u(n)+'" ';n=c["if"].call(e,a.newWindow,{hash:{},inverse:p.noop,fn:p.program(25,I,t),data:t});(n||0===n)&&(i+=n);i+=">\n                  "+u((n=(n=a.strings,null==n||false===n?n:n.notifyMe),typeof n===d?n.apply(e):n))+"\n                </a>\n              ";return i}function D(e,t,a,i){var n="",s;n+='\n              <a class="sqs-editable-button sqs-tourdates__button" href="';if(s=c.url)s=s.call(e,{hash:{},data:t});else{s=e.url;s=typeof s===d?s.apply(e):s}n+=u(s)+'" ';s=c["if"].call(e,i.newWindow,{hash:{},inverse:p.noop,fn:p.program(25,I,t),data:t});(s||0===s)&&(n+=s);n+=">\n                "+u((s=(s=a.strings,null==s||false===s?s:s.rsvp),typeof s===d?s.apply(e):s))+"\n              </a>\n            ";return n}function N(e,t){var a="",i;a+='\n      <div class="sqs-tourdates__item-no-results">'+u((i=(i=e.strings,null==i||false===i?i:i.noResults),typeof i===d?i.apply(e):i))+"</div>\n    ";return a}n+='<script type="application/ld+json">';if(s=c.structuredData)s=s.call(t,{hash:{},data:i});else{s=t.structuredData;s=typeof s===d?s.apply(t):s}(s||0===s)&&(n+=s);n+='<\/script>\n<div class="sqs-tourdates">\n  ';s=c["if"].call(t,t.loading,{hash:{},inverse:p.programWithDepth(3,l,i,t),fn:p.program(1,r,i),data:i});(s||0===s)&&(n+=s);n+="\n</div>\n";return n})})();var t="tourdates-bandsintown-list.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6131:function(e,t,a){var o=a(24).t;var l=a(1596);var c=a(1944);var g=a(77);var p=a(1622);YUI.add("squarespace-search-preview",function(d){d.namespace("Squarespace");var t=38;var a=40;var i=13;var n="/search";var s=200;var r=function(e){var t=d.QueryString.stringify(e);document.location.href=""!==t?n+"?"+t:n};var u=d.Base.create("searchPreviewDropdown",d.Squarespace.Widgets.SSWidget,[d.WidgetPosition],{renderUI:function(){u.superclass.renderUI.apply(this,arguments);var e=this.get("contentBox");var t=this.get("searchInput").get("offsetWidth");e.addClass("sqs-search-preview-ui");e.setStyle("width",t);e.setContent(u.TEMPLATE);this._startScrollCheckTimer();this._close();this._showImages=t>=s;this._showImages||e.addClass("no-image");this._resizeEmitter=new d.Squarespace.ResizeEmitter({timeout:100});this.get("contentBox").one(".sqs-search-ui-list").plug(d.Plugin.ScrollInfo)},bindUI:function(){u.superclass.bindUI.apply(this,arguments);this.after("searchInputChange",this._bindInputEvents,this);this._bindInputEvents()},_bindInputEvents:function(){var e=this.get("searchInput");var t=this.get("contentBox");if(d.Lang.isValue(e)){e.after("typing",this._onTyping,this);e.after("click",this._onSearchClick,this);e.after("searchQueryChange",this._onSearchQueryChange,this);e.after("searchQueryChange",this._trackOnQueryChange,this);e.after("focus",this._show,this);e.after("blur",this._onBlur,this)}this.after(this.get("id")+"|resultItemsChange",this._onSearchResultChange,this);this.after(this.get("id")+"|loadingChange",this.syncUI,this);t.on(this.get("id")+"|hover",this._onHover,this._onMouseLeave,this);t.delegate(this.get("id")+"|click",this._onResultClick,".sqs-search-ui-list .search-result",this);t.delegate(this.get("id")+"|hover",this._onResultHover,".sqs-search-ui-list .search-result",this);this._resizeEmitter.after("resize",this._ajustDropdownPosition,this)},syncUI:function(){u.superclass.syncUI.apply(this,arguments);var e=this.get("searchInput");var t=this.get("contentBox");var a=this.get("page");var i=e.getY()+e.get("offsetHeight");this.move(e.getX(),i);var n=d.Node.create(d.Squarespace.UITemplates.render(u.TEMPLATE_RESULTS_NAME,this._getSearchDataModel()));this._showImages&&this._loadImages(n);this._toggleNotice(n);this._toggleLoader();if(!d.Lang.isValue(n))return;var s=t.one(".sqs-search-ui-result .search-results");var r=n.all(".search-result");if(0===a)s.setContent(n);else if(d.Lang.isValue(r)){var o=s.get("children").size();var l=n.get("children");l=l.splice(o);s.append(l)}var c=t.one(".sqs-search-ui-list");d.Lang.isValue(c)&&c.plug(d.Squarespace.Plugin.ScrollLock)},destructor:function(){d.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();this._resizeEmitter&&this._resizeEmitter.destroy();this._spinner&&this._spinner.remove(true)},_getSearchDataModel:function(e){var t=this.get("resultItems");var a={loading:this.get("loading"),items:t,itemsCount:this.get("totalCount")};return a},_loadImages:function(e){d.Lang.isValue(e)&&e.all("img[data-src]").each(function(e){ImageLoader.load(e)})},_toggleNotice:function(e){var t=this.get("contentBox").one(".search-result-notice");var a=!d.Lang.isValue(e);t.toggleClass("hide",!a);if(a){var i=this.get("contentBox").one(".sqs-search-ui-result .search-results");i.empty();this._itemSelected=null;t.setContent(this.get("strings.notice"))}},_toggleLoader:function(){var e=this.get("searchInput");var t=e.previous(".spinner-wrapper");var a=d.Lang.isValue(this.get("loading"))&&this.get("loading");a&&!t.hasChildNodes()&&(this._spinner=new d.Squarespace.Spinner({color:this.get("theme"),size:"default",render:t}));e.toggleClass("loading",a);t.toggleView(a)},isOpened:function(){return this._opened},hasItemSelected:function(){var e=this.get("contentBox");return d.Lang.isValue(e.one(".sqs-search-ui-list .search-result.selected"))},_close:function(){var e=this.get("contentBox");d.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();d.Lang.isValue(this._itemSelected)&&this._itemSelected.removeClass("selected");this._itemSelected=null;e.hide();this._opened=false},_show:function(){if(!d.Lang.isValue(this.get("resultItems"))||""===this.get("searchInput").get("value"))return;this.get("contentBox").show();this._startScrollCheckTimer();this._opened=true},_search:function(){var e=this.get("searchInput");var t=e.get("value");var a=this.get("page");if(d.Lang.isValue(t)&&0===t.length||!d.Lang.isValue(t))return;var i={q:t,p:a,size:this.get("perPage")};var n=this.get("collectionFilter");d.Lang.isValue(n)&&""!==n&&(i.f_collectionId=n);d.Data.get({url:"/api/search/GeneralSearch",data:i,success:this._searchResultCallback,error:this._searchResultCallbackError},this)},_searchResultCallback:function(e){this.set("loading",false);this.set("facets",e.facets);this.set("totalCount",e.totalCount);var t=this.get("resultItems");var a=this.get("page");if(d.Lang.isValue(e.serviceError))false;else if(a>0&&d.Lang.isValue(t)){t=t.concat(e.items);this.set("resultItems",t)}else this.set("resultItems",e.items)},_searchResultCallbackError:function(){this.set("loading",false)},_onSearchResultChange:function(e){this.syncUI();this._show()},_onSearchQueryChange:function(e){if(""===this.get("searchInput").get("value")){this.set("loading",false);this.isOpened()&&this._close()}this._clearResult();this._search()},_trackOnQueryChange:function(){var e=this.get("searchInput").get("value");if(""===e)return;var t=[];var a=this.get("collectionFilter");d.Lang.isValue(a)&&t.push(a);p.track(c.SITE_SEARCH,{query:e,filters:{collectionIds:t},referrer:d.config.doc.location.href})},_onSearchClick:function(e){d.later(1,this,function e(){if(""===this.get("searchInput").get("value")&&this.isOpened()){this.set("loading",false);this._close()}})},_clearResult:function(){this.set("resultItems",null);this.set("page",0)},_onTyping:function(e){e.keyCode!==a&&e.keyCode!==t&&e.keyCode!==i&&this.set("loading",true);e.keyCode===i&&this._onEnter();if(this.isOpened())switch(e.keyCode){case a:this._moveSelectedItem(1);break;case t:this._moveSelectedItem(-1);break}},_moveSelectedItem:function(e){var t=this.get("contentBox").all(".search-result");if(!d.Lang.isValue(t))return;var a=e<0?t.size()-1:0;if(d.Lang.isValue(this._itemSelected)){this._itemSelected.removeClass("selected");var i=t.indexOf(this._itemSelected);var n=t.item(i+e);d.Lang.isValue(n)?this._itemSelected=n.addClass("selected"):this._itemSelected=t.item(a).addClass("selected")}else this._itemSelected=t.item(a).addClass("selected");this._scrollTo(this._itemSelected,e)},_scrollTo:function(e,t){var a=this.get("contentBox").one(".sqs-search-ui-list");var i=a.one(".search-results").get("children");var n=i.indexOf(e);switch(n){case 0:a.set("scrollTop",0);break;case i.size()-1:a.set("scrollTop",a.scrollInfo.getScrollInfo().scrollHeight);break;default:a.set("scrollTop",e.getY()-a.getY()+a.get("scrollTop"));break}},_onResultHover:function(e){d.Lang.isValue(this._itemSelected)&&this._itemSelected.removeClass("selected");this._itemSelected=e.target.ancestor(".search-result",true)},_onHover:function(e){this._isHovered=true},_onMouseLeave:function(){this._itemSelected=null;this._isHovered=false},_onEnter:function(){this._redirect(this._itemSelected)},_onBlur:function(e){e.halt();if(!this._isHovered){this.get("searchInput").blur();this._close()}},_getSearchResultObject:function(t){var e=this.get("resultItems");return d.Array.find(e,function(e){return e.id===t})},_onResultClick:function(e){e.halt();var t=e.target;var a="search-result";var i=t.hasClass(a);var n=i?t:t.ancestor("."+a);this._trackSearchHelper(n);this._redirect(n)},_trackSearchHelper:function(e){var t=e.getAttribute("itemid");var a=this.get("resultItems");if(g(a))return;var i;var n;var s;for(var r=0;r<a.length;r++)if(a[r].id===t){i=a[r].title.replace(/<(.|\n)*?>/g,"");n=a[r].categories;s=a[r].tags;break}l.trackSearch({content_name:i,content_category:n,content_tag:s,search_string:this.get("searchInput").get("value")})},_redirect:function(e){if(!d.Lang.isValue(this._itemSelected)){r(this._getQueryStringObject());return}var t=e.getAttribute("itemid");if(!d.Lang.isValue(t))return;var a=this._getSearchResultObject(t);this._close();document.location.href=a.itemUrl+"?"+d.QueryString.stringify({rq:this.get("searchInput").get("value")})},_getQueryStringObject:function(){var e={};""!==this.get("searchInput").get("value")&&(e.q=this.get("searchInput").get("value"));var t=this.get("collectionFilter");d.Lang.isValue(t)&&(e.f_collectionId=t);return e},_nextPage:function(){var e=this.get("page")+1;this.set("page",e);this._search()},_infiniteScroll:function(){var e=this.get("contentBox").one(".sqs-search-ui-list");if(!d.Lang.isValue(e))return;var t=e.get("scrollHeight");var a=e.get("scrollTop");var i=e.get("offsetHeight");var n=t-i-a;var s=this.get("resultItems");var r=this.get("totalCount");if(!d.Lang.isValue(s))return;n<100&&r>s.length&&this._nextPage()},_startScrollCheckTimer:function(e){d.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();e=e||250;this.scrollTimer=d.later(e,this,this._infiniteScroll,{},true)},_ajustDropdownPosition:function(){var e=this.get("searchInput");if(!d.Lang.isValue(e.getDOMNode()))return;var t=e.getY()+e.get("offsetHeight");this.get("contentBox").setStyle("width",e.get("offsetWidth"));this.move(e.getX(),t)}},{TEMPLATE_RESULTS_NAME:"search-result.html",TEMPLATE:'<div class="sqs-search-preview-ui"><div class="sqs-search-ui-result"><div class="search-result-notice hide"></div><div class="sqs-search-ui-list"><div class="search-results"></div></div></div></div>',ATTRS:{strings:{value:{notice:o("No results found.")}},searchInput:{validator:d.Squarespace.AttrValidators.isNode},resultItems:{validator:d.Squarespace.AttrValidators.isNullOrArray},totalCount:{value:0,validator:d.Squarespace.AttrValidators.isNumber},page:{value:0,validator:d.Squarespace.AttrValidators.isNumber},collectionFilter:{validator:d.Squarespace.AttrValidators.isNullOrString},displayDelay:{value:500,validator:d.Squarespace.AttrValidators.isNumber},perPage:{value:10,validator:d.Squarespace.AttrValidators.isNumber},loading:{value:false,validator:d.Squarespace.AttrValidators.isBoolean},theme:{value:"dark",validator:d.Squarespace.AttrValidators.isString}}});var e=d.namespace("Squarespace.Widgets").SearchPreview=d.Base.create("SearchPreview",d.Squarespace.SSWidget,[],{initializer:function(e){var t=this.get("render");this._searchInput=t.one(".search-input");this.set("collection",t.getData("collection"));this.set("previewEnabled","true"===t.getData("preview"));var a=t.get("className").match(/color-(.*)/);d.Lang.isValue(a)&&this.set("theme",a[1])},destructor:function(){d.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel()},renderUI:function(){e.superclass.renderUI.call(this);this._alterSearchInputStyle();this.get("previewEnabled")&&this._initPreview()},bindUI:function(){this._searchInput.on("keyup",this._onKeyUp,this)},_onKeyUp:function(e){if(d.Lang.isValue(this.previewWidget)){d.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel();var t={keyCode:e.keyCode};this._searchInput.fire("typing",t);this._searchInput.get("value")!==this._prevVal&&(this._searchTypingTimeout=d.later(this.previewWidget.get("displayDelay"),this,function e(){this._searchInput.fire("searchQueryChange");this._prevVal=this._searchInput.get("value")}))}else e.keyCode===i&&r(this._getQueryStringObject())},_getQueryStringObject:function(){var e={};var t=this._searchInput.get("value");d.Lang.isValue(this._searchInput)&&""!==t&&(e.q=t);return this._appendCollectionFilter(e,"f_collectionId")},_initPreview:function(){var e={searchInput:this._searchInput,theme:this.get("theme")};this.previewWidget=new u(this._appendCollectionFilter(e,"collectionFilter"));this.previewWidget.render()},_appendCollectionFilter:function(e,t){var a=this.get("collection");d.Lang.isValue(a)&&""!==a&&(e[t]=a);return e},_alterSearchInputStyle:function(){d.UA.safari&&!d.UA.ios?this._searchInput.setStyle("paddingRight","0"):d.UA.safari&&d.UA.ios?this._searchInput.setAttribute("type","text"):d.UA.chrome&&d.UA.ios||this._searchInput.addClass("hover-effect")}},{CSS_PREFIX:"sqs-search-preview",renderAllSearchPreviewNodes:function(){d.all(".sqs-search-ui-text-input").each(function(e){!d.Widget.getByNode(e.one("."+d.Squarespace.Widgets.SearchPreview.CSS_PREFIX))&&d.Lang.isValue(e.one(".search-input"))&&new d.Squarespace.Widgets.SearchPreview({render:e})})}});d.config.win.Squarespace.onInitialize(d,function(){d.Squarespace.Widgets.SearchPreview.renderAllSearchPreviewNodes()})},"1.0",{requires:["base","datasource","event","node-scroll-info","squarespace-animations","squarespace-dom-emitters-resize","squarespace-plugin-scroll-lock","squarespace-search-result-template","squarespace-spinner","squarespace-ss-widget","squarespace-ui-templates","widget","widget-position"]})},6133:function(e,t,a){var n=a(0);var s=a(60);var r=a(128);var o=a(6404);var l=a(5190);var c=a(6409);var d=a(2886);var i=a(5074);var u={init:function(i){return{ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount)},configure:function(){},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},showCommentLogin:function(e,t,a){a?this.showGuestLogin():this.showOAuthLogin()},showGuestLogin:function(){var e=document.createElement("div");document.body.appendChild(e);var t=function(){s.unmountComponentAtNode(e);document.body.removeChild(e);l.closeFrame()};s.render(n.createElement(c,{onSubmit:function(e){this.fireGuestLoginEvent(e);t()}.bind(this),onLoginClick:function(){t();this.showOAuthLogin()}.bind(this),onClose:function(){t();i.config.win.SQUARESPACE_LOGIN.fire("cancel")}}),e)},showOAuthLogin:function(){this.commentAuthenticationFrame=document.createElement("div");var e=Static.SQUARESPACE_CONTEXT.appDomain;var t="https://"+Static.SQUARESPACE_CONTEXT.website.identifier+"."+e;s.render(n.createElement(o,{onMessageReceived:this.handleCommentFrameMessage.bind(this),parentOrigin:window.location.origin,frameOrigin:t}),this.commentAuthenticationFrame);document.body.appendChild(this.commentAuthenticationFrame);l.show()},handleCommentFrameMessage:function(e){var t=function(){l.closeFrame();s.unmountComponentAtNode(this.commentAuthenticationFrame);document.body.removeChild(this.commentAuthenticationFrame);this.commentAuthenticationFrame=null}.bind(this);if(e.type===d.AUTHENTICATED){t();Static.SQUARESPACE_CONTEXT.authenticatedAccount=e.account;i.config.win.SQUARESPACE_LOGIN.account=e.account;i.config.win.SQUARESPACE_LOGIN.fire("login")}else if(e.type===d.CLOSE){t();i.config.win.SQUARESPACE_LOGIN.fire("cancel")}},fireGuestLoginEvent:function(e){var t=new Date;t.setSeconds(t.getSeconds()+30);var a=t.getSeconds();r.set("email",e.email,{path:"/",expires:a});r.set("displayName",e.displayName,{path:"/",expires:a});r.set("websiteUrl",e.authorUrl,{path:"/",expires:a});i.config.win.SQUARESPACE_LOGIN.fire("guestLogin")}}}};YUI.add("squarespace-login",function(e){if(!e.config.win.SQUARESPACE_LOGIN){e.config.win.SQUARESPACE_LOGIN=i.create(u.init(e));e.augment(e.config.win.SQUARESPACE_LOGIN,e.EventTarget);e.config.win.SQUARESPACE_LOGIN_UTILS={loginPromise:new e.Promise(function(e){e(true)})}}},"1.0",{requires:["promise","squarespace-google-domains-utils"]})},6134:function(e,t,i){YUI.add("squarespace-markdown",function(e){e.namespace("Squarespace.Lang");e.Squarespace.Lang.markdownFromHTML=function(e){var t=i(6272);if(!e)return"";return t(e)};e.Squarespace.Lang.markdownToHTML=function(e,t){var a=i(2195);if(!e)return"";a.setOptions({breaks:!!t});return a(e)}},"1.0",{requires:[]})},6136:function(e,t){YUI.add("squarespace-models-model-list",function(i){i.namespace("Squarespace.Models");var n=i.Squarespace.Models.ModelList=i.Base.create("ModelList",i.ModelList,[i.Squarespace.ModelSync.REST],{parse:function(e){var t=n.superclass.parse.call(this,e);var a=this._getResponseAttrs(t);i.Object.each(a,function(e,t){this._set(t,e)},this);return t.results},_getResponseAttrs:function(e){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]})},6137:function(e,t){YUI.add("squarespace-mixins-paginated-model-list",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.PaginatedModelList=a.Base.create("PaginatedModelList",a.Base,[],{initializer:function(){this.publish("firstPage");this.publish("previousPage");this.publish("nextPage");this.publish("currentPage");a.Do.after(function(){var e=this.get("paginator").paginateURL(a.Do.currentRetVal);return new a.Do.AlterReturn("Adding pagination params.",e)},this,"getURL",this);a.Do.before(function(e){var t=a.JSON.parse(e);this._set("hasPreviousPage",t.hasPreviousPage);this._set("hasNextPage",t.hasNextPage)},this,"parse",this)},firstPage:function(){this.get("paginator").firstPage();this.fire("firstPage")},previousPage:function(){this.get("paginator").previousPage();this.fire("previousPage")},nextPage:function(){this.get("paginator").nextPage();this.fire("nextPage")},currentPage:function(){this.get("paginator").currentPage();this.fire("currentPage")}},{ATTRS:{paginator:{valueFn:function(){return new a.Squarespace.Models.Paginator},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.Paginator)},hasPreviousPage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},hasNextPage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","event-custom","json","squarespace-attr-validators","squarespace-models-paginator"]})},6138:function(e,t,a){YUI.add("squarespace-models-paginator",function(s){var e=function(){};s.namespace("Squarespace.Models");s.Squarespace.Models.Paginator=s.Base.create("Paginator",s.Base,[],{paginateURL:function(e){var t=e.split("?");var a=t[1];var i=s.Lang.isValue(a);var n=i?s.QueryString.parse(a):{};n=s.merge(n,this._getPaginationParams());return t[0]+"?"+s.QueryString.stringify(n)},firstPage:e,previousPage:e,nextPage:e,currentPage:e,_getPaginationParams:function(){return{limit:this.get("limit"),orderBy:this.get("orderBy"),orderDirection:this.get("orderDirection")}}},{ATTRS:{models:{validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Models.ModelList),writeOnce:"initOnly"},limit:{value:20,validator:s.Squarespace.AttrValidators.isNumber},orderBy:{value:"id",validator:s.Squarespace.AttrValidators.isString},orderDirection:{value:s.Squarespace.OrderDirection.ASCENDING,validator:function(e){if(s.Object.hasValue(s.Squarespace.OrderDirection,e))return true;false;return false}}}})},"1.0",{requires:["base","querystring","squarespace-attr-validators","squarespace-enum","squarespace-models-model-list"]})},6139:function(e,t){YUI.add("squarespace-model-list-parse",function(a){function e(){}e.prototype={parse:function(e){var t=this.constructor.superclass.parse.call(this,e);if(a.Lang.isObject(t)&&a.Lang.isArray(t.results))return t.results;return t}};a.namespace("Squarespace").ModelListParse=e},"1.0",{requires:[]})},6140:function(e,t){YUI.add("squarespace-models-offset-paginator",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.OffsetPaginator=t.Base.create("OffsetPaginator",t.Squarespace.Models.Paginator,[],{firstPage:function(){a.superclass.firstPage.call(this);this.set("offset",0)},previousPage:function(){a.superclass.previousPage.call(this);var e=this.get("offset")-this.get("limit");e<0?this.firstPage():this.set("offset",e)},nextPage:function(){a.superclass.nextPage.call(this);this.set("offset",this.get("offset")+this.get("limit"))},_getPaginationParams:function(){var e=a.superclass._getPaginationParams.call(this);return t.merge(e,this.getAttrs(["offset"]))}},{ATTRS:{offset:{value:0,validator:t.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-paginator"]})},6141:function(e,t,a){var i=a(21);YUI.add("squarespace-dialog-hidden",function(e){e.namespace("Squarespace.DialogFields").Hidden=e.Base.create("hidden",e.Squarespace.DialogField2,[],{initializer:function(){this.unplug(e.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:i,bindUI:i,syncUI:i},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:false},focusable:{value:false}}});e.Squarespace.DialogFields.HiddenField=e.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","squarespace-dialog-field-2"]})},6142:function(e,t,a){var s=a(128);YUI.add("squarespace-view",function(n){n.namespace("Squarespace").View=n.Base.create("sqsView",n.View,[],{initializer:function(e){var t=this.get("id");this.after(t+"|modelChange",function(e){e.prevVal&&e.prevVal.removeTarget(this);if(e.newVal){e.newVal.addTarget(this);e.newVal.after("destroy",this.destroy,this)}});e&&e.model&&this.set("model",e.model);this._rerenderSub=this.after(t+"|*:change",function(e){e.silent||this.render()},this)},destructor:function(e){(!e||e&&!e.preserveContainer)&&this.get("container").remove(true);n.detachAll(this.get("id")+"|*")},render:function(e){var t=this.get("container");if(this.template){var a=this._getTemplateContext();var i=n.Squarespace.UITemplates.render(this.template,a);t.setHTML(i);s.get("SQUARESPACE_UI_DEBUG")&&false}e&&e instanceof n.Node&&t.appendTo(e)},_getTemplateContext:function(){var e=this.get("model");if(e)return e.toJSON();return this.getAttrs()}},{ATTRS:{container:{valueFn:function(){return n.Node.create('<div class="sqs-'+this.name+'"/>')},readOnly:true}}})},"1.0",{requires:["base","model","node","squarespace-ui-templates","view"]})},6143:function(e,t){YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var t=a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{initializer:function(e){!a.Lang.isValue(e.data)&&a.Lang.isValue(e.defaultValue)&&this.set("data",e.defaultValue)},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("boundingBox");a.Squarespace.Utils.onPointerAction(e,this._createEventHandler(this._toggleActive));e.after("mousedown",this._createEventHandler(),this)},syncUI:function(){t.superclass.syncUI.call(this);this.get("contentBox").empty().setHTML(this.renderTemplate());a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_createEventHandler:function(t){return a.bind(function(e){this.get("haltClick")&&e.halt();t&&t.call(this,e)},this)},_toggleActive:function(e){if(this.get("disabled"))return;this.set("data",!this.get("data"),{click:e})}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:false},haltClick:{value:true},testAttribute:{value:"check"}}})},"1.0",{requires:["base","event-tap","squarespace-dialog-check-template","squarespace-dialog-field-2","squarespace-util"]})},6144:function(e,t){YUI.add("squarespace-dialog-check-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-check.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){return"active"}function g(e,t){var a="",i;a+='\n    <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n  ";return a}function p(e,t){var a="",i,n;a+='\n    <div class="description">';n=(i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i);(n||0===n)&&(a+=n);a+="</div>\n  ";return a}s+='<div class="check-element ';r=a["if"].call(t,t.data,{hash:{},inverse:d.noop,fn:d.program(1,u,n),data:n});(r||0===r)&&(s+=r);s+='">\n  ';o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:d.noop,fn:d.program(3,g,n),data:n});(o||0===o)&&(s+=o);s+="\n  ";o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:d.noop,fn:d.program(5,p,n),data:n});(o||0===o)&&(s+=o);s+="\n</div>\n";return s})})();var t="dialog-check.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6145:function(e,t,a){YUI.add("squarespace-form-utils",function(n){var e=n.namespace("Squarespace.FormUtils");e.setData=function(e,a){if(!n.Lang.isValue(a))return;n.Array.each(e,function(e){var t=a[e.get("name")];n.Lang.isUndefined(t)||e.set("data",t)})};e.getData=function(e){e=e||[];return n.Array.reduce(e,{},function(e,t){var a=t.get("data");!n.Lang.isUndefined(a)&&n.Lang.isValue(t.get("name"))&&(e[t.get("name")]=a);return e})};e.template=function(i,e){n.Lang.isArray(e)?n.Array.each(e,function(e){var t=e.get("name");var a=i.one('[data-field-name="'+t+'"]');!!a&&e.render(a)}):n.Lang.isObject(e)&&n.Object.each(e.groups||{},function(e,t){var a=i.one('[data-field-group="'+t+'"]');a&&n.Array.each(e,function(e){e.render(a)})})};e.validate=function(e){return n.Array.reduce(e,{},function(e,t){if(n.Lang.isFunction(t.getErrors)){var a=t.getErrors();a.length&&(e[t.get("name")]=a[0])}return e})};e.showErrors=function(e,a){n.Array.each(e,function(e){var t=a[e.get("name")];n.Lang.isValue(t)&&""!==t&&n.Lang.isFunction(e.showError)&&e.showError(t)})};e.hideErrors=function(e){n.Array.each(e,function(e){n.Lang.isFunction(e.hideError)&&e.hideError()})}},"1.0",{requires:["array-extras","node"]})},6147:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-numeric-text",function(e){var t=e.Squarespace.DialogFields.NumericText=e.Base.create("numericText",e.Squarespace.DialogFields.Text,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(e.Squarespace.Plugin.NumericFormatter,{displayFormatter:this.get("displayFormatter")})},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox").one("input");e.on("valuechange",function(){this.set("data",e.numericFormatterPlugin.get("data"))},this)},getErrors:function(){if(!this.get("validator")(this.get("data")))return[this.get("strings.validationFailMessage")];return[]}},{CSS_PREFIX:"sqs-numeric-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{strings:{value:{validationFailMessage:i("This must be numeric.")}},displayFormatter:{validator:e.Lang.isFunction,value:function(e){return e}},validator:{value:e.Lang.isNumber},data:{value:0,validator:e.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-plugin-numeric-formatter"]})},6148:function(e,t){YUI.add("squarespace-plugin-numeric-formatter",function(i){i.namespace("Squarespace.Plugin");var a=229;var e=function(){var t=[];var e=[9,13,8,46,37,39,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,a];e.forEach(function(e){t[e]=true});return t};var t=e();i.Squarespace.Plugin.NumericFormatter=i.Base.create("numericFormatter",i.Plugin.Base,[],{initializer:function(){i.Lang.isNumber(Number(this.get("host").get("value")))?this.set("data",Number(this.get("host").get("value"))):this.set("data",0);this.set("displayString",this._format(this.get("data")));this._bindUI();this._syncUI()},_format:function(e){return this.get("displayFormatter")(e)},_syncUI:function(){var e=this.get("data");var t=this.get("displayString");if(this.get("hasFocus"))this.get("host").set("value",e>0?t:"");else{var a="";i.Lang.isNull(this.get("prefixUnit"))||(a+=this.get("prefixUnit"));a+=this._format(e);i.Lang.isNull(this.get("postfixUnit"))||(a+=" "+this.get("postfixUnit"));this.get("host").set("value",a)}},_bindUI:function(){var e=this.get("host");this.on("displayStringChange",this._syncUI,this);e.on("valuechange",this._onValueChange,this);e.on("keydown",this._onKeyDown,this);e.on("focus",this._onFocus,this);e.on("blur",this._onBlur,this)},_onFocus:function(){this.set("hasFocus",true);this._syncUI();setTimeout(i.bind(function(){this.get("hasFocus")&&this.get("host").select()},this),0)},_onBlur:function(){this.set("hasFocus",false);this.set("displayString",this._format(this.get("data")))},_onKeyDown:function(e){if(!e.shiftKey&&t[e.keyCode])return;if(!this.get("suppressDecimal")&&(110===e.keyCode||190===e.keyCode)&&-1===this.get("host").get("value").indexOf("."))return;if(isFinite(Number(String.fromCharCode(e.keyCode))))return;e.stopPropagation();e.preventDefault()},_onValueChange:function(){var e=this.get("host").get("value");var t=this._transformToData(e);this.set("data",t)},_displayFormatter:function(e){return e},_transformToData:function(e){var t;i.Lang.isUndefined(this.get("prefixUnit"))||(t=String(e).replace(new RegExp(this.get("prefixUnit"))));i.Lang.isUndefined(this.get("postfixUnit"))||(t=String(e).replace(new RegExp(this.get("postfixUnit"))));return Number(t)}},{NS:"numericFormatterPlugin",ATTRS:{hasFocus:{value:false},data:{value:null},displayString:{value:null},prefixUnit:{value:null},postfixUnit:{value:null},displayFormatter:{value:function(e){return e},suppressDecimal:{value:false}}}})},"1.0",{requires:["plugin","squarespace-util"]})},6149:function(e,t){YUI.add("squarespace-fluent-confirmation",function(r){var e=r.namespace("Squarespace.Fluent");var o=function(e,t,a,i){e.on("confirm",r.bind.apply(this,[t,this].concat(i)));e.on("reject",r.bind(a,this,{cancel:false}));e.on("cancel",r.bind(a,this,{cancel:true}))};var i=function(i,n,s){return new r.Promise(function(e,t){n=r.Lang.isObject(n)&&!r.Lang.isArray(n)?n:{};var a=new i(n);o(a,e,t,s)})};var t=function(a){return function(t){return function(){var e=Array.prototype.slice.call(arguments,0);return i(a,t,e)}}};var a=function(a){return function(e,t){t=t?[t]:[];return i(a,e,t)}};e.Confirm=a(r.Squarespace.Widgets.Confirmation);e.Alert=a(r.Squarespace.Widgets.Alert);e.Inform=a(r.Squarespace.Widgets.Information);e.DataConfirm=a(r.Squarespace.Widgets.DataConfirmation);e.Confirmation=t(r.Squarespace.Widgets.Confirmation);e.Alerting=t(r.Squarespace.Widgets.Alert);e.Information=t(r.Squarespace.Widgets.Information);e.DataConfirmation=t(r.Squarespace.Widgets.DataConfirmation);e.TYPE=r.Squarespace.Widgets.Confirmation.TYPE;e.ANCHOR=r.Squarespace.Widgets.Confirmation.ANCHOR},"1.0",{requires:["promise","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-data-confirmation","squarespace-widgets-information"]})},6150:function(e,t){YUI.add("squarespace-widgets-data-confirmation",function(t){t.namespace("Squarespace.Widgets");var e=t.Squarespace.Widgets.DataConfirmation=t.Base.create("dataConfirmation",t.Squarespace.Widgets.Confirmation,[t.WidgetParent],{initializer:function(){this._addFields()},renderUI:function(){e.superclass.renderUI.call(this);this._childrenContainer=this.get("contentBox").one(".fields");this.get("boundingBox").addClass("sqs-widgets-data-confirmation")},syncUI:function(){this._updatePosition()},_addFields:function(){t.Array.each(this.get("fields"),function(e){t.Object.hasKey(e,"name")?this.add(e):console.warn("[DataConfirmation] Dialog field missing name. Skipping.")},this)},_handleResponse:function(e){this.fire(e,{data:t.Squarespace.FormUtils.getData(this._items)})}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="fields"></div><div class="buttons"></div>',TYPE:t.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:t.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{fields:{value:[],validator:t.Lang.isArray}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-form-utils","squarespace-widgets-confirmation"]})},6151:function(e,t,a){var r=a(24).t;var i=a(522);var o=a(1595);var n=a(801);var s=a(2201);var l=a(728);var d=a(229);var u=a(837);YUI.add("squarespace-content-collection-utils",function(c){c.namespace("Squarespace");c.Squarespace.ContentCollectionUtils={groupCollectionsByTypeName:function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a];if(i.get("isDemoCollection"))continue;var n=i.get("typeName");if(!t[n]){var s=o.getState().collectionConfigs[n];t[n]={title:s?s.title:r("Unknown"),collections:[]}}t[n].collections.push(e[a])}return c.Object.values(t)},getIconClassNames:function(e){var t=e.getTemplateConfiguration();var a="";t&&t.get("supported")&&(a=t.get("icon"));""===a&&t&&t.get("collectionType")===d.TEMPLATE_PAGE&&(a="template-page");""===a&&(a=e.get("typeName"));return a},filterCollections:function(s,r){var o=["collectionType","ordering","folder","index"];var l=function(e,t,a,i){var n=-1!==o.indexOf(i);if(n)return c.Lang.isValue(t)&&t.get(i)===a;return e.get(i)===a};return c.Squarespace.ContentCollectionCache.filter(function(a){if(c.Lang.isArray(r)&&-1!==r.indexOf(a.get("id")))return false;if(a.get("isDemoCollection")&&a.get("type")!==d.TEMPLATE_PAGE)return false;var e=true;var i=a.getTemplateConfiguration();for(var n in s){var t=s[n];c.Lang.isArray(t)||(t=[t]);e=c.Array.some(t,function(e,t){return l(a,i,e,n)});if(!e)break}return e})},getCollectionFilter:function(e,t){if(e===d.PRODUCTS)return{collectionType:e};return{collectionType:e,ordering:t}},isTemplatePage:function(e){return e.get("type")===d.TEMPLATE_PAGE},isIndex:function(e){var t=e.getTemplateConfiguration();return t&&t.get("folderBehavior")===u.INDEX},isFolder:function(e){var t=e.getTemplateConfiguration();return t&&t.get("folder")},isVanillaFolder:function(e){return this.isFolder(e)&&!this.isIndex(e)&&!this.isVariation(e)},isVariation:function(e){var t=e.getTemplateConfiguration();return t&&t.get("variation")},isAdjustablePageSizeCollection:function(e){var t=o.getCollectionConfig(e.get("typeName"));var a=t&&t.forcePageSize;var i=e.get("type")===d.COLLECTION_TYPE_GENERIC;var n=this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL;return!a&&!this.isIndex(e)&&!this.isFolder(e)&&i&&n},isBlog:function(e){if(!this.isGenericOrProduct(e))return false;if(this.isFolder(e)||this.isIndex(e))return false;var t=this._getCollectionOrdering(e);return t===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},isGallery:function(e){if(!this.isGeneric(e))return false;if(this.isFolder(e)||this.isIndex(e))return false;var t=this._getCollectionOrdering(e);return t===c.Squarespace.CollectionOrdering.USER},_getCollectionOrdering:function(e){return e.get("ordering")||e.getTemplateConfiguration().get("ordering")},isSupportedByBookmarklet:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForInjectableCodePerItem:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForSyndication:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===d.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},isDemoCollectionId:function(e){return o.isDemoCollectionId(e)},isGeneric:function(e){var t=e.getTemplateConfiguration();var a=d;if(!t)return false;return t.get("collectionType")===a.COLLECTION_TYPE_GENERIC},isPortfolio:function(e){var t=e.getTemplateConfiguration();var a=d;if(!t)return false;return t.get("collectionType")===a.PORTFOLIO},isSevenOneCollectionType:function(e){if(!i.isSevenOne())return false;if(!e)return false;return c.Squarespace.ContentCollectionUtils.isPage(e)||c.Squarespace.ContentCollectionUtils.isGeneric(e)||c.Squarespace.ContentCollectionUtils.isPortfolio(e)},isGenericOrProduct:function(e){var t=e.getTemplateConfiguration();var a=d;if(!t)return false;return false===t.get("folder")&&(t.get("collectionType")===a.PRODUCTS||t.get("collectionType")===a.COLLECTION_TYPE_GENERIC)},isProduct:function(e){var t=e.getTemplateConfiguration();var a=d;if(!t)return false;if(e.get("isDemoCollection"))return false;return false===t.get("folder")&&t.get("collectionType")===a.PRODUCTS},isPage:function(e){var t=e.getTemplateConfiguration();var a=d;if(!t)return false;return false===t.get("folder")&&t.get("collectionType")===a.COLLECTION_TYPE_PAGE},isNotCalendar:function(e){var t=e.getTemplateConfiguration();if(t.get("ordering")===c.Squarespace.CollectionOrdering.CALENDAR)return false;return true},usesDisplayIndex:function(e){return[c.Squarespace.CollectionOrdering.MUSIC_ALBUM,c.Squarespace.CollectionOrdering.USER].includes(e)},getIdentifierForCollection:function(e){if(!c.Lang.isValue(e))return null;var t=e.get("typeName");if(!t&&e.get("type")===d.COLLECTION_TYPE_PAGE){e.set("typeName","page");t="page"}var a=e.get("type");if(a===d.COLLECTION_TYPE_GENERIC){var i=e.get("ordering");if(!c.Lang.isValue(i)){var n=o.getCollectionConfig(t);var s=o.getPageConfig(t);var r=n||s;i=r.ordering}if(c.Squarespace.ContentCollectionUtils.isIndex(e))return"INDEX";if(i===c.Squarespace.CollectionOrdering.USER)return"GALLERY";if(i===c.Squarespace.CollectionOrdering.CHRONOLOGICAL)return"BLOG";if(i===c.Squarespace.CollectionOrdering.CALENDAR)return"CALENDAR";if(i===c.Squarespace.CollectionOrdering.MUSIC_ALBUM)return"MUSIC_ALBUM";if(i===c.Squarespace.CollectionOrdering.KNOWLEDGE_BASE)return"KNOWLEDGE_BASE"}if(a===d.COLLECTION_TYPE_PAGE)return"PAGE";if(a===d.PRODUCTS)return"PRODUCT";if(a===d.TEMPLATE_PAGE)return"TEMPLATE_PAGE"},isOverPageLimit:function(){var e=c.Squarespace.ContentCollectionCache.filter(function(e){return!e.get("isDemoCollection")&&!e.getTemplateConfiguration().get("folder")&&e.get("enabled")}).length;return e>n.getLimit(l.ADD_PAGES)},isHomepage:function(e){var t=s.getHomepageCollectionId();return t===e},containsHomepage:function(e){var t=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e);var a=t.get("children");if(a.isEmpty())return false;var i=a.toJSON().filter(function(e){return c.Squarespace.ContentCollectionUtils.isHomepage(e.collectionId)||c.Squarespace.ContentCollectionUtils.containsHomepage(e.collectionId)});return!!i.length}}},"1.0",{requires:["squarespace-models-content-collection"]})},6152:function(e,t,a){var i=a(1028);var n=a(34);var d=a(2201);var s=a(1595);var r=a(1923);var o=a(2620);var l=a(1332);var u=a(229);var g=a(1236);var p=a(851);var h=a(523);var f=a(228);var m=a(368);var v=a(517);var b=a(869).default;YUI.add("squarespace-models-content-collection",function(c){c.namespace("Squarespace.Models");var t=c.Squarespace.Models.ContentCollection=c.Base.create("Collection",c.Model,[],{initializer:function(e){this.items=e?new c.Squarespace.Models.ContentItemList({items:e.items||[],parent:this,limit:this.get("itemLimit")}):new c.Squarespace.Models.ContentItemList({parent:this,limit:this.get("itemLimit")});this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this);this._syncFolderChange(this.get("folder"));this.after("folderChange",function(e){this._syncFolderChange(e.newVal)});this.actionListener=new i(n);this.actionListener.addActionListener(l.CONTENT_BROWSER_SETTINGS_SAVED,this._onContentBrowserSettingsSaved.bind(this));this._initialAttrs=this.getAttrs();this.unlistenToModelStore=o.listen(this._handleStoreChange.bind(this))},destructor:function(){if(this.unlistenToModelStore){this.unlistenToModelStore();this.unlistenToModelStore=null}this._itemsEventHandle.detach();this._itemsEventHandle=null;this.items.destroy();this.items=null;this.actionListener.removeAllActionListeners();this.actionListener=null},toDebugString:function(){return c.JSON.stringify(this.getAttrs(["navigationTitle","urlId","id"]))},toJSON:function(){var e=this.constructor.superclass.toJSON.call(this);e.items=this.items.toJSON();return e},parse:function(e){e=t.superclass.parse.apply(this,arguments);e.passwordProtected&&(e.password=g.PASSWORD_MASK);return e},sync:function(e,t,a){switch(e){case"create":this._ensureDemoCloneAndSave(a);break;case"delete":if(t.isUnusedStarterPage)this._deleteUnusedCollectionPermanently(a);else if(false===t.deleteCollection){r.deleteSuccess(this.get("id"));"function"===typeof a&&a()}else this._delete(a);break;case"read":this._read(t,a);break;case"update":this._ensureDemoCloneAndSave(a);break}},load:function(e,t,a){if("function"===typeof e){a=t;t=e;e={}}if(this._readInProgress){this.onceAfter("load",t,a);return}c.Model.prototype.load.call(this,e,t?c.bind(t,a||this):null)},resetToLastRead:function(){return o.fetch(this.get("id")).then(function(e){var t=this.getAttrs();c.Object.keys(t).map(function(e){t[e]=void 0});var a=c.merge(t,this._initialAttrs,this.parse(e.toJS()));this.setAttrs(a);this.set("dirty",false)}.bind(this)).catch(this._errorHandler)},ensureProcessedItems:function(){var a=function(t){this.items.load({fields:["mediaProcessingState"]},function(){var e=this.items.some(function(e){return e.get("mediaProcessingState")!==p.READY});e?c.later(500,this,a,t):t()}.bind(this))}.bind(this);return new c.Promise(function(e){a(e)})},_syncFolderChange:function(e){e&&this.set("dropdown",true)},_ensureDemoCloneAndSave:function(e){if(this._shouldCloneCollection()){var t=this.toJSON();delete t.id;this.cloneToNewCollection({silent:true}).then(c.bind(this._save,this,e,t))}else this._save(e)},_handleStoreChange:function(e){if(!c.Env){if(this.unlistenToModelStore){this.unlistenToModelStore();this.unlistenToModelStore=null}return}var t=e.get(this.getId());if(t){this.setAttrs(this.parse(t.toJS()));this.set("dirty",false)}},serialize:function(e){e=c.merge(e,this.toJSON());e.collectionId=e.id;delete e.dirty;delete e.body;delete e.tags;delete e.categories;delete e.items;if(c.Lang.isValue(e.mainImage)){e.mainImageId=c.instanceOf(e.mainImage,c.Squarespace.Models.ContentItem)?e.mainImage.get("id"):e.mainImage.id;delete e.mainImage}e.metadata&&e.metadata.albumCover&&delete e.metadata.albumCover;if(e.productQuickViewEnabled){e.features.productQuickView.isEnabled=e.productQuickViewEnabled;delete e.productQuickViewEnabled}if(e.relatedItemsEnabled){e.features.relatedItems.isEnabled=e.relatedItemsEnabled;delete e.relatedItemsEnabled}return e},serializeForReporting:function(){var e=this.getTemplateConfiguration();var t=this.serialize();delete t.passwordProtected;delete t.password;delete t.memberAreaIds;t.templateConfig=e.toJSON();return t},_errorHandler:function(e){var t="ContentCollection._errorHandler ["+this.name+"] ";v.trackCaughtError("damask",t+e.message,e.stack);false},_save:function(t,e){e=this.serialize(e);r.update(e).then(function(e){if(e.error){t(e,null);return}this._initialAttrs=e;t(null,e)}).catch(this._errorHandler)},_delete:function(t){r.delete(this.get("id")).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_deleteUnusedCollectionPermanently:function(t){r.deleteUnusedCollectionPermanently(this.get("id")).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_read:function(a,i){this._readInProgress=true;var e="fetch";a.forceReload&&(e="fetchFromServer");var n=(new Error).stack;o[e](this.get("id")).then(function(e){var t=this.parse(e.toJS());if(c.Squarespace.ContentCollectionUtils.usesDisplayIndex(t.ordering))this._fetchItemCount(t.id).then(function(e){this._readInProgress=false;t.itemCount=e;i(null,t)}.bind(this));else{this._readInProgress=false;i(null,t)}}.bind(this),function(e){this._readInProgress=false;i(e,null);var t=a?"Options: "+JSON.stringify(a):"";v.trackCaughtError("damask","ContentCollection._read ["+this.name+"] Error retrieving content from store: \n"+t,n)}.bind(this)).catch(this._errorHandler)},_updateItemCount:function(){c.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then(function(e){this.set("itemCount",e)}.bind(this)).catch(this._errorHandler))},_fetchItemCount:function(a){return new c.Promise(function(t,e){c.Data.get({url:"/api/content-collections/"+a+"/item-count",success:function(e){t(e)},failure:e},this)})},_onContentBrowserSettingsSaved:function(e){if(this.get("id")===e.collectionId){var t=this.items.getById(e.id);t?t.setAttrs(e,{source:l.CONTENT_BROWSER_SETTINGS_SAVED}):this.items.add(e)}},getTemplateConfiguration:function(){var e;var t=this.get("typeName");var a=this.get("type");e=a===u.TEMPLATE_PAGE?s.getPageConfig(t):s.getCollectionConfig(t);if(e)return new c.Squarespace.Models.CollectionConfiguration(e);return new c.Squarespace.Models.CollectionConfiguration({collectionType:a||u.COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),folder:this.get("folder"),supported:false})},cloneToNewCollection:function(n){return new c.Promise(c.bind(function(t,a){var i=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));var e=this._cloneExampleContent(n);e.then(c.bind(function(e){i.set("collectionId",e);i.save(t);t(e)},this)).catch(function(e){a(e)},this)},this))},cloneToNewCollectionWithItem:function(n,s){return new c.Promise(c.bind(function(t,e){var a=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));var i=this._cloneExampleContent(c.merge({itemId:n},s));i.then(c.bind(function(e){a.set("collectionId",e.collection.id);a.save(function(){t(e)})},this))},this))},_cloneExampleContent:function(t){t=t||{};var l=t.itemId;var e=new c.Promise(c.bind(function(s,r){var o=this.get("id");var e;e=b.canHandleCollection(this.serialize())?l?b.cloneDemoCollectionWithItem(this.get("id"),t.itemId):b.cloneCollection(this.get("id")):f.post("/api/commondata/CopyCollection",m.stringify({collectionId:this.get("id"),processPointedCollectionItems:true})).then(function(e){return e.data});e.then(function(e){var t;var a;if(l){t=e.collection;a={collection:e.collection,itemFullUrl:e.itemFullUrl}}else{t=e;a=e.id}this.setAttrs(c.merge({mainImageId:null,mainImage:null,seoSocialSharingImage:null},t));var i=t.id;var n=d.getHomepageCollectionId();n===o?b.setHomepage(i).then(function(e){e.error?r():s(a)}):s(a)}.bind(this)).catch(function(e){r(e)})},this));e.then(c.bind(function(){this.fire("clonedExampleContent",{silent:!!t.silent})},this));return e},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&this.get("type")===u.COLLECTION_TYPE_PAGE},deleteTrashItems:function(t){c.Data.del({url:"/api/recycle-bin/collection/"+this.get("id")+"/items",success:function(e){t(e,null)},failure:function(e){t(null,e)}})},getId:function(){return this.get("id")},_set:function(e,t,a){return this.constructor.superclass._set.call(this,e,t,a)}},{ATTRS:{dirty:{value:false},body:{value:null},navigationTitle:{validator:c.Lang.isString},description:{value:{html:"",source:""}},websiteId:{},id:{value:null},enabled:{value:true,validator:c.Lang.isBoolean},deleted:{value:false,validator:c.Lang.isBoolean},homepage:{validator:c.Lang.isBoolean},starred:{validator:c.Lang.isBoolean},synchronizing:{validator:c.Lang.isBoolean},updatedOn:{},folder:{value:false},isDemoCollection:{getter:function(){return c.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCount:{validator:c.Lang.isNumber},isEmpty:{getter:function(){return this.items&&0===this.items.size()}},tags:{value:[],validator:c.Lang.isArray},categories:{value:[],validator:c.Lang.isArray},pageSize:{validator:c.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===h.CHRONOLOGICAL)return 20}},itemLimit:{value:20,validator:c.Squarespace.AttrValidators.isNumber},ordering:{validator:function(e){return c.Object.values(h).includes(e)}},type:{validator:function(e){return c.Object.values(u).includes(e)}},typeName:{validator:c.Lang.isString},video:{validator:c.Lang.isObject},fullUrl:{validator:c.Lang.isString},nextDisplayIndex:{getter:function(){return this.get("itemCount")}},regionName:{value:"default",validator:function(e){if(!c.Lang.isString(e)||0===e.length)return false;return c.Object.keys(s.getState().layouts).includes(e)}},title:{validator:c.Lang.isString},urlId:{validator:c.Squarespace.AttrValidators.isNullOrString},pagePermissionType:{value:null},memberAreaIds:{value:[]}}});c.Squarespace.Models.ContentCollectionList=c.Base.create("Collections",c.ModelList,[],{model:c.Squarespace.Models.ContentCollection,sync:function(e,t,a){"read"===e&&r.readAll().then(function(e){a(null,e)},function(e){a(e,null)}).catch(this._errorHandler)},getCollectionById:function(e,t,a){var i=this.getById(e);if(i)t.call(a,i);else{i=new c.Squarespace.Models.ContentCollection({id:e});i.load({},function(){this.add(i);t.call(a,i)},this)}},getCollectionFromData:function(e,t){if(!e)return null;if(!e.id)throw new Error("getCollectionFromData needs at least an ID in the data to work.");var a=this.getById(e.id);a?t||a.setAttrs(e):a=this.add(new c.Squarespace.Models.ContentCollection(e));return a}});c.Squarespace.Utils.isInDamaskFrame()?c.Squarespace.ContentCollectionCache=c.config.win.top.Y.Squarespace.ContentCollectionCache:c.Squarespace.ContentCollectionCache=new c.Squarespace.Models.ContentCollectionList},"2.0",{requires:["base","model","model-list","promise","squarespace-content-collection-utils","squarespace-models-collection-configuration","squarespace-models-content-item","squarespace-models-content-item-list","squarespace-util","squarespace-util-authenticated"]})},6153:function(e,t,a){var i=a(229);var n=a(837);YUI.add("squarespace-models-collection-configuration",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.CollectionConfiguration=t.Base.create("CollectionConfiguration",t.Model,[],{initializer:function(e){t.Lang.isBoolean(e.variation)&&e.variation?this.set("folderBehavior",n.VARIATION):t.Lang.isBoolean(e.index)&&e.index?this.set("folderBehavior",n.INDEX):t.Lang.isBoolean(e.folder)&&e.folder&&this.set("folderBehavior",n.NONE)}},{ATTRS:{collectionType:{value:i.COLLECTION_TYPE_GENERIC},folder:{value:false},folderBehavior:{},supported:{value:true}}})},"1.0",{requires:["base","model"]})},6154:function(e,t,a){var i=a(3418);var n=a(851);var r=a(149);var o=a(596);var l=a(1332);var c=a(2224);var d=a(794);var u=a(2028);var g=a(595);YUI.add("squarespace-models-content-item",function(s){s.namespace("Squarespace.Models");var a=s.Squarespace.Models.ContentItem=s.Base.create("Item",s.Model,[],{sync:function(e,t,a){switch(e){case"delete":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._delete.bind(this,a));break;case"read":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._read.bind(this,t,a));break;case"update":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._save.bind(this,a));break;case"create":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._create.bind(this,t,a));break}},_errorHandler:function(e){console.error(e.stack)},_save:function(t,e){var a=this.serialize();a.id||this._create(t);a.collectionId?l.updateForCollection(a,e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler):l.update(a).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_create:function(e,t,a){var i=this.serialize();i.collectionId?l.createForCollection(i,e,a).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler):l.create(i,e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_delete:function(t,e){l.delete(this.get("id"),e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_read:function(e,a,t){if(this.get("isGlobalFakeContentItem")){this._readGlobalFakeContentItem(this.get("id"),e,a);return}this._readInProgress=true;var i="fetch";e.forceReload&&(i="fetchFromServer");c[i](this.get("id"),false,t).then(function(e){this._readInProgress=false;var t=e.toJS?e.toJS():e;t&&t.recordType&&this.set("recordType",t.recordType);a(null,t)}.bind(this),function(e){this._readInProgress=false;a(e,null)}.bind(this)).catch(this._errorHandler)},_readGlobalFakeContentItem:function(e,t,a){s.Data.get({url:"/api/rest/global-content-items/"+e,success:function(e){a(null,e)},failure:function(e){a(e,null)}},this)},_getUrlDeterminants:function(e){var t={recordType:this.get("recordType")};if(e){t.collectionOrdering=e.get("ordering");t.collectionType=e.get("type");t.collectionId=e.get("id");t.parentId=this.get("parentId")}return t},resetToLastRead:function(t,a){return c.fetch(this.get("id")).then(function(e){this.setAttrs(e.toJS());t()}.bind(this)).catch(function(e){a();this._errorHandler(e)}.bind(this))},initializer:function(e){this._needsJobListener()&&this._bindJobListener();this._updateNextDisplayIndex();var t=this.get("items");t.after(["add","remove"],function(){this._updateNextDisplayIndex()},this);this.items=t},destructor:function(){if(this._jobListener){this._jobListener.detach();this._jobListener=null}},getParentCollection:function(){return new s.Promise(function(e,t){var a=this.get("collectionId");a?s.Squarespace.ContentCollectionCache.getCollectionById(a,e):e(null)}.bind(this))},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.structuredContent;s.Lang.isValue(t)&&(e.structuredContent=t.toJSON());e.items=e.items.toJSON();s.Lang.isObject(e.pushedServices)&&(e.pushedServices=s.Object.keys(e.pushedServices));s.Lang.isObject(e.pendingPushedServices)&&(e.pendingPushedServices=s.Object.keys(e.pendingPushedServices));return e},serialize:function(){var e=this.toJSON();delete e.items;delete e.author;delete e.fullUrl;delete e.assetUrl;delete e.resolved;delete e.postItemInjectCode;delete e.promotedBlock;delete e.promotedBlockType;delete e.nextDisplayIndex;delete e.mediaIsUploading;delete e.hasFileData;delete e.isGlobalFakeContentItem;delete e.childrenGroups;delete e.colorData;delete e.mainImage;delete e.gallery;this._normalizeDates(e);this._attachCommentingToData(e);this._attachWorkflowToData(e);this._updateStructuredContent(e);return e},_updateStructuredContent:function(e){if(!e.structuredContent)return;e.startDate&&(e.structuredContent=s.merge(e.structuredContent,{startDate:e.startDate,endDate:e.endDate}))},_getWorkflowStateForString:function(e){var t={published:o.PUBLISHED,scheduled:o.SCHEDULED,needsreview:o.NEEDS_REVIEW,draft:o.DRAFT};return s.Object.getValue(t,e)},_attachWorkflowToData:function(e){if(s.Lang.isValue(e.workflow)){e.workflowState=this._getWorkflowStateForString(e.workflow.state);e.publishOn=e.workflow.date;delete e.workflow}},_attachCommentingToData:function(e){if(s.Lang.isValue(e.commenting)){var t="allow"===e.commenting.state?"ENABLED":"DISABLED";e.commentState=s.Squarespace.CommentStates[t];e.commentDisableOn=e.commenting.date;delete e.commenting}},_normalizeDates:function(a){var e=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"];s.Array.each(e,function(e,t){s.Lang.isDate(a[e])&&(a[e]=a[e].getTime())},this)},save:function(e,t){this.isNew()||!(s.Lang.isObject(e)&&e.fields)?a.superclass.save.call(this,e,t):this._saveFields(e.fields,t)},autoSave:function(e,t){if(s.Lang.isFunction(e)){t=e;e={}}else s.Lang.isValue(e)||(e={});e.headers=s.merge(e.headers,{"X-AutoSave":true});this.save(e,t)},clearFileData:function(e){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(e){var t=this.get("id");var a=u.getMainImageDeletionUrl(e).replace("{id}",t);s.Data.del({url:a,data:{itemId:t}})}.bind(this))},clearChildGroup:function(e,t){s.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:e,itemId:this.get("id")},success:function(e){s.Lang.isFunction(t)&&t(null,e)},failure:function(e){s.Lang.isFunction(t)&&t(e,null)}})},getAssetUrlForFormat:function(e){return s.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:e})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return s.Lang.isValue(this.get("licensedAssetPreview"))},isLicensedAsset:function(){return s.Lang.isValue(this.get("licensedAssetId"))},getMainImageUploadUrl:function(t){this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(e){t(u.getMainImageUploadUrl(e).replace("{id}",this.get("id")))}.bind(this))},_needsJobListener:function(){var e=this.get("mediaProcessingState");return e===n.QUEUED||e===n.PROCESSING},_bindJobListener:function(){if(!Static||!Static.JOB_MANAGER)return;this._jobListener=s.config.win.Static.JOB_MANAGER.on("completed",function(e){var t=e.job;var a=this.get("id");var i=t.get("data.contentItemId");var n=t.get("data.globalContentItemId");if(i===a){this.load({forceReload:true});this._jobListener.detach()}else if(s.Lang.isValue(n)&&n===a){this._readGlobalFakeContentItem(n,{},function(e,t){if(e){false;return}this.set("assetUrl",t.assetUrl);this.setAttrs(t)}.bind(this));this._jobListener.detach()}},this)},_updateNextDisplayIndex:function(){var a=0;this.get("items").each(function(e){var t=e.get("displayIndex");t>=a&&(a=t+1)},this);this._set("nextDisplayIndex",a)},_saveFields:function(e,a){window.Promise.all(e.map(function(e){return l.updateField(this.get("id"),e,this.get(e))}.bind(this))).then(function(e){var t=e[0];s.Lang.isFunction(a)&&a(null,t.item)},function(e){s.Lang.isFunction(a)&&a.call(e,null)}).catch(this._errorHandler)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case r.AUDIO:return s.Squarespace.Models.Audio;case r.EVENT:return s.Squarespace.Models.CalendarEvent;case r.CHECKIN:return s.Squarespace.Models.CheckIn;case r.VIDEO:return s.Squarespace.Models.Embed;case r.KBARTICLE:return s.Squarespace.Models.KBArticle;case r.LINK:return s.Squarespace.Models.Link;case r.QUOTE:return s.Squarespace.Models.Quote;case r.STORE_ITEM:return s.Squarespace.Models.StoreItem;case r.TWEET:return s.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{altText:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var e=s.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);if(e)return e.id;return null}},proxyForId:{value:null},recordType:{validator:s.Squarespace.AttrValidators.isValueIn(r),writeOnce:true},childType:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return(new Date).getTime()},validator:s.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNumber},publishOn:{valueFn:function(){return(new Date).getTime()},validator:s.Squarespace.AttrValidators.isNumber},unsaved:{value:null,validator:s.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},body:{value:null,setter:function(e){return s.merge(this.get("body"),e)},validator:s.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:{html:"",raw:false},validator:s.Squarespace.AttrValidators.isNullOrObject},displayIndex:{value:0,validator:s.Squarespace.AttrValidators.isNumber},starred:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},passthrough:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:s.Squarespace.AttrValidators.isArray},categories:{value:[],validator:s.Squarespace.AttrValidators.isArray},workflowState:{value:o.DRAFT,validator:s.Squarespace.AttrValidators.isValueIn(o)},systemDataId:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},systemDataOrigin:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},mediaProcessingState:{value:null,validator:s.Squarespace.AttrValidators.isNullOr(s.Squarespace.AttrValidators.isValueIn(n))},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(e){if(s.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},colorData:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},location:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:s.Squarespace.AttrValidators.isNumber},dislikeCount:{value:0,validator:s.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:s.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:s.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var e=d.getState();var t=e.commentEnableByDefault;var a=e.commentsEnabled;if(t&&a)return i.ENABLED;return i.DISABLED},validator:s.Squarespace.AttrValidators.isValueIn(i)},commentDisableOn:{valueFn:function(){var e=s.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);if(e)return s.Date.addDays(new Date,e).getTime();return null},validator:s.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:s.Squarespace.AttrValidators.isObject},shareStates:{value:[]},structuredContent:{valueFn:function(){var e=this._getStructuredContentCtor();if(s.Lang.isNull(e))return null;return new e},setter:function(e){if(e instanceof s.Squarespace.Models.StructuredContent)return e;var t=this._getStructuredContentCtor();if(s.Lang.isNull(t))return null;return new t(e)}},items:{valueFn:function(){return new s.Squarespace.Models.ContentItemList({parent:this})},setter:function(e){var t=this.get("items");if(s.Lang.isValue(t)){t.reset(e);return t}if(e instanceof s.Squarespace.Models.ContentItemList)return e;return new s.Squarespace.Models.ContentItemList({items:e,parent:this})}},childrenGroups:{value:{},validator:s.Squarespace.AttrValidators.isObject},author:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},assetUrl:{value:null,getter:function(e){if(g.isSecure())return g.securifyURL(e);return e},validator:s.Squarespace.AttrValidators.isNulLOrString},resolved:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},postItemInjectCode:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,validator:s.Squarespace.AttrValidators.isNumber,readOnly:true},mediaIsUploading:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},hasFileData:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},isGlobalFakeContentItem:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:s.Lang.isString},isPusher:{value:true,readOnly:true,validator:s.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-audio","squarespace-models-calendar-event","squarespace-models-check-in","squarespace-models-content-collection","squarespace-models-content-item-list","squarespace-models-embed","squarespace-models-kb-article","squarespace-models-link","squarespace-models-quote","squarespace-models-store-item","squarespace-models-tweet","squarespace-util"]})},6155:function(e,t){YUI.add("squarespace-models-audio",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Audio=e.Base.create("Audio",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Audio",validator:function(e){return"Audio"===e},readOnly:true},embed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},lengthInMilliSeconds:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber},sampleRate:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6156:function(e,t){YUI.add("squarespace-models-structured-content",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.StructuredContent=e.Base.create("StructuredContent",e.Model,[],{},{ATTRS:{_type:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},6157:function(e,t){YUI.add("squarespace-models-calendar-event",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.CalendarEvent=e.Base.create("CalendarEvent",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(e){return"CalendarEvent"===e},readOnly:true},startDate:{valueFn:function(){var e=new Date;var t=e.getMinutes();e.setSeconds(0);e.setMilliseconds(0);if(t>=30){e.addHours(1);e.setMinutes(0)}else e.setMinutes(30);return e.getTime()},validator:e.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var e=new Date(this.get("startDate"));e.addHours(1);return e.getTime()},validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6158:function(e,t){YUI.add("squarespace-models-check-in",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.CheckIn=e.Base.create("CheckIn",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(e){return"CheckIn"===e},readOnly:true},checkinId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},address:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},postalCode:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryPluralName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6159:function(e,t,a){var i=a(2028);YUI.add("squarespace-models-content-item-list",function(d){d.namespace("Squarespace.Models");var a=d.Squarespace.Models.ContentItemList=d.Base.create("ContentItemList",d.ModelList,[d.Squarespace.Mixins.EventList],{initializer:function(e){this.model=d.Squarespace.Models.ContentItem;e=e||{};var t=e.items;t&&this.reset(t)},sync:function(e,t,a){switch(e){case"read":this._read(t,a);break;case"create":case"delete":case"update":false;break}},load:function(e,t){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported");a.superclass.load.call(this,e,t)},removeItems:function(t,a,e){this.remove(t,{source:"bulk-remove"});var i=d.Array.map(t,function(e){var t=e.get("id");e.destroy();return t},this);var n=function(e){this.get("parent").load();d.Lang.isFunction(a)&&a(null,e);this.fire("bulk-remove",t)}.bind(this);var s=function(e){d.Lang.isFunction(a)&&a(e,null)};e?e(t).then(function(e){n(e)}).catch(function(e){s(e)}):d.Data.post({url:"/api/commondata/RemoveItems",data:{items:i},success:function(e){n(e)},failure:function(e){s(e)}},this)},moveItems:function(t,a,i){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Moving child items is not currently supported.");var e=d.Array.map(t,function(e){var t=this.getById(e.get("id"));if(null!==t)return this.remove(this.getById(e.get("id")));return e},this);var n=a.get("id");var s=a.items;s.load(d.bind(function(){s.add(e)},this));var r=d.Array.map(e,function(e){e.set("collectionId",n);e.get("items").each(function(e){e.set("collectionId",n)});return e.get("id")},this);d.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:n,items:r},success:function(e){this.get("parent").load();d.Lang.isFunction(i)&&i(null,e);this.fire("move-items",t,a)},failure:function(e){d.Lang.isFunction(i)&&i(e,null)}},this)},reorderItems:function(e,t,a){var i=this.get("parent");var n={};if(this.get("isChildItemList")){n.collectionId=i.get("collectionId");n.parentId=i.get("id")}else n.collectionId=i.get("id");var s=1===e.length;var r;if(s){var o=e[0];r=this.indexOf(this.getById(o.get("id")));this._reorder([o],t);0!==t&&(n.afterId=this.item(t-1).get("id"));n.itemId=o.get("id")}else{this._reorder(e,t);0!==t&&(n.afterId=this.item(t-1).get("id"));var l=d.Array.map(e,function(e){return e.get("id")},this);n.itemIds=d.JSON.stringify(l)}var c=d.bind(function(e){d.Data.post({url:"/api/commondata/ReorderItems",data:e,success:function(e){!s||0!==r&&0!==t||i.load();d.Lang.isUndefined(e.items)||d.Array.each(e.items,function(e,t){var a=this.getById(e.id);a&&a.set("displayIndex",e.displayIndex)},this);this.fire("reordered");d.Lang.isFunction(a)&&a(null,e);this._reorderQueue.size()>0&&c(this._reorderQueue.next())},failure:function(e){d.Lang.isFunction(a)&&a(e,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new d.Queue);this._reorderQueue.add(n);c(this._reorderQueue.next())},_reorder:function e(t,a){var i=t.map(function e(t){return this.getById(t.get("id"))},this).filter(Boolean);this.remove(i,{onReorder:true,source:"reorder"});this.add(i,{onReorder:true,source:"reorder",index:a})},_read:function(e,a){d.Data.get({url:this._getReadUrl(),data:d.merge({limit:this.get("limit")},e),success:function(e){var t={hasNextPage:e.hasNextPage,hasPreviousPage:e.hasPreviousPage,nextPageStart:e.nextPageStart,previousPageStart:e.previousPageStart};this.set("pagination",t);a(null,e.results)},failure:function(e){a(e,null)}},this)},_getReadUrl:function(){var e=this.get("parent");var t=i.getTemplateForCollectionItems(e.get("ordering"),e.get("type"));return d.Lang.sub(t,{collectionId:e.get("id")})}},{ATTRS:{parent:{value:null,validator:function(e){return e instanceof d.Squarespace.Models.ContentCollection||e instanceof d.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){var e=this.get("parent");return e instanceof d.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:d.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","json","model-list","squarespace-content-collection-utils","squarespace-mixins-event-list","squarespace-models-content-collection","squarespace-models-content-item","squarespace-util"]})},6160:function(e,t,a){var i=a(24).t;YUI.add("squarespace-mixins-event-list",function(n){n.namespace("Squarespace.Mixins");n.Squarespace.Mixins.EventList=n.Base.create("EventList",n.Base,[],{initializer:function(){n.Do.before(function(e){var t=n.Object.hasKey(e,"upcoming");var a=n.Object.hasKey(e,"past");if(t&&a)return new n.Do.AlterArgs(i("Parsing calendar-specific response"),[[].concat(e.upcoming).concat(e.past)])},this,"parse",this)},getPastEvents:function(){var i=new Date;return this.filter(function(e){var t=e.get("structuredContent");if(null===t)return false;var a=n.DataType.Date.parse(t.get("endDate"));return n.DataType.Date.isGreater(i,a)})},getUpcomingEvents:function(){var i=new Date;return this.filter(function(e){var t=e.get("structuredContent");if(null===t)return false;var a=n.DataType.Date.parse(t.get("endDate"));return!n.DataType.Date.isGreater(i,a)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},6161:function(e,t){YUI.add("squarespace-models-embed",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Embed=e.Base.create("Embed",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(e){return"Embed"===e},readOnly:true},embed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrObject},overlay:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6162:function(e,t){YUI.add("squarespace-models-kb-article",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.KBArticle=e.Base.create("KBArticle",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(e){return"KBArticle"===e},readOnly:true},upVotes:{value:0,validator:e.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6163:function(e,t){YUI.add("squarespace-models-link",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Link=e.Base.create("Link",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Link",validator:function(e){return"Link"===e},readOnly:true},url:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6164:function(e,t){YUI.add("squarespace-models-quote",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Quote=e.Base.create("Quote",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(e){return"Quote"===e},readOnly:true},quote:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6165:function(e,t,a){var i=a(24).t;var n=a(309);YUI.add("squarespace-models-store-item",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.StoreItem=e.Base.create("StoreItem",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(e){return"StoreItem"===e},readOnly:true},productType:{value:n.PHYSICAL,validator:e.Squarespace.AttrValidators.isValueIn(n)},priceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},onSale:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:e.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:e.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:e.Squarespace.AttrValidators.isArray},additionalFieldsFormId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},customAddButtonText:{value:i("Add to Cart"),validator:e.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null},isSubscribable:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},relatedCategories:{value:[],validator:e.Squarespace.AttrValidators.isArray},relatedCategoryIds:{value:[],validator:e.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6166:function(e,t){YUI.add("squarespace-models-tweet",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Tweet=e.Base.create("Tweet",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(e){return"Tweet"===e},readOnly:true},tweetId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},userLocation:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},6167:function(e,t,a){var l=a(24).t;var c=a(229);var d=a(6411);YUI.add("squarespace-dialog-content-selector",function(o){o.namespace("Squarespace.DialogFields");var t=o.Squarespace.DialogFields.ContentSelector=o.Base.create("contentSelector",o.Squarespace.DialogField2,[],{initializer:function(e){o.Lang.isValue(e.data)&&this.set("selectedContent",e.data);var t=o.Lang.isValue(this.get("collectionGroups"));this._collectionGroupsCreated=t;t||(0===o.Squarespace.ContentCollectionCache.size()?o.Squarespace.ContentCollectionCache.load(o.bind(function(){this._createCollectionGroups();this.syncUI()},this)):this._createCollectionGroups())},bindUI:function(){var e=this.get("contentBox");e.delegate("click",function(e){e.halt();e.target.hasClass("dropdown-button")?e.currentTarget.ancestor(".collection-wrapper").toggleClass("open"):this._selectCollection(e)},".collection",this);e.delegate("change",this._selectCategoryOrTag,"select",this)},syncUI:function(){t.superclass.syncUI.call(this);this._collectionGroupsCreated?this._setLoadedState():this._showSpinner();this.get("contentBox").toggleClass("titles-hidden",!this.get("showGroupTitles"))},clearSelected:function(){var e=this._selectedCollectionWrapper;if(e){e.removeClass("selected");var t=e.one(".collection-filter-wrapper");if(t){t.remove();e.all("select").set("value","None")}}},_showSpinner:function(){var e=o.Node.create('<div class="loading"><div class="spinner"></div><div class="text">'+l("Loading…")+"</div></div>");this.get("contentBox").empty().setHTML(e);new o.Squarespace.Spinner({size:20,color:"light",render:e.one(".spinner")}).spin()},_setLoadedState:function(){var e=this.get("contentBox");var t=this.get("collectionGroups");var a=this.get("selectedContent");var i={collectionGroups:t,strings:{emptyMessage:l("There are no collections."),chooseCategory:l("Choose Category"),chooseTag:l("Choose Tag"),none:l("None")}};o.Lang.isArray(a)&&a.length>0&&a[0].filter&&(i.filter=a[0].filter);e.empty().setHTML(o.Squarespace.UITemplates.render("dialog-content-selector.html",i));e.all(".collection-wrapper").each(function(e){e.hasClass("selected")&&(this._selectedCollectionWrapper=e)},this);e.all(".dropdown").each(function(e){var t=e.one(".categories");var a=e.one(".tags");t&&a?e.addClass("content-stats"):t?e.addClass("categories"):a&&e.addClass("tags")},this)},_selectCollection:function(e){var t=e.currentTarget.ancestor(".collection-wrapper");this.clearSelected();t.addClass("selected");this._selectedCollectionWrapper=t;this.set("data",{urlId:t.getAttribute("data-url-id"),filter:null,id:t.getAttribute("data-collection-id")})},_selectCategoryOrTag:function(e){var t=e.currentTarget;var a=t.ancestor(".collection-wrapper");var i=t.ancestor(".categories")?"category":"tag";var n=t.get("value");var s=("tag"===i?"#":"")+n;this.clearSelected();if("none-selected"!==n){a.one(".collection-title").insert(o.Node.create('<span class="collection-filter-wrapper"><span class="collection-filter">'+s+"</span></span>"),"after");a.addClass("selected");a.addClass("has-content-stat-filter");a.removeClass("open")}this._selectedCollectionWrapper=a;this.set("data",{urlId:a.getAttribute("data-url-id"),filter:"none-selected"===n?null:{type:i,name:n},id:a.getAttribute("data-collection-id")})},_getCollections:function(e){var t=o.merge({},this.get("collectionFilter"));if(t){for(var a in t){if(!o.Object.hasKey(e,a))continue;var i=o.Lang.isArray(t[a]);if(i&&-1===o.Array.indexOf(t[a],e[a])||!i&&e[a]!==t[a])return[];i&&(t[a]=e[a])}e=o.merge(e,t)}return o.Squarespace.ContentCollectionUtils.filterCollections(e,this.get("excludeCollectionIds"))},_createCollectionGroups:function(){var e=this._getCollections({collectionType:c.COLLECTION_TYPE_GENERIC,folder:false});var t=this._getCollections({collectionType:c.COLLECTION_TYPE_PAGE,folder:false});var a=this._getCollections({collectionType:c.SPLASH_PAGE,folder:false});var i=this._getCollections({collectionType:c.PRODUCTS,folder:false});var n=this._getCollections({collectionType:c.TEMPLATE_PAGE,folder:false});var s=this._getCollections({collectionType:c.COLLECTION_TYPE_GENERIC,index:true});var r=o.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(e);t.length>0&&r.push({title:l("Page"),collections:t});a.length>0&&r.push({title:l("Cover Page"),collections:a});i.length>0&&r.push({title:l("Product"),collections:i});n.length>0&&r.push({title:l("Template Pages"),collections:n});s.length>0&&r.push({title:l("Index"),collections:s});this.set("collectionGroups",r);this._collectionGroupsCreated=true},_setStatOnCollectionObject:function(e,t,n,a){var s=[];o.Array.each(t,function(e){var a=e.name;var i={name:a};n&&o.Lang.isArray(n)&&o.Array.each(n,function(e,t){a===o.Object.getValue(e,["filter","name"])&&(i.selected=true)});s.push(i)},this);a[e]=s},_setSelectedOnCollectionObject:function(e,a){o.Array.each(e,function(e,t){a.id===e.id&&(o.Object.hasKey(e,"urlId")&&e.urlId!==a.urlId||(a.selected=true));e.filter&&(a.filter=e.filter)})}},{CSS_PREFIX:"sqs-content-selector",ASYNC_DATA:true,ATTRS:{collectionGroups:{setter:function(e){var r=this.get("selectedContent");o.Array.each(e,function(s){s.collectionObjects=[];o.Array.each(s.collections,function(t){var e=[];var a=[];var i=o.Squarespace.ContentStatsCache.filter(function(e){return t.get("id")===e.get("collectionId")},this)[0];if(i){e=d(i.get("categoryList"),{key:"name"});a=d(i.get("tagList"),{key:"name"})}var n={className:o.Squarespace.ContentCollectionUtils.getIconClassNames(t),id:t.get("id"),title:t.get("navigationTitle"),urlId:t.get("urlId")};if(this.get("showCollectionTagsAndCategories")){n.dropdown=0!==e.length||0!==a.length;this._setStatOnCollectionObject("categories",e,r,n);this._setStatOnCollectionObject("tags",a,r,n)}r&&this._setSelectedOnCollectionObject(r,n);s.collectionObjects.push(n)},this);try{var e=d(s.collectionObjects,{key:"title"});s.collectionObjects=e}catch(e){false}},this);this._collectionGroupsCreated=true;if(o.Lang.isArray(e))try{var t=d(e,{key:"title"});return t}catch(e){false}return e},value:null},collectionFilter:{value:null},data:{getter:function(e){var t=this.get("dataMapper"),a=this.get("selectedContent");if(o.Lang.isFunction(t))return t(a);return a},setter:function(e){this.set("selectedContent",e);return e}},selectedContent:{setter:function(e){if(o.Lang.isArray(e))return o.Array.map(e,t.mapToObject);if(o.Lang.isValue(e))return[t.mapToObject.apply(null,arguments)];return e}},dataMapper:{value:function(e){return e},validator:o.Lang.isFunction},excludeCollectionIds:{value:[]},showCollectionTagsAndCategories:{value:true},showGroupTitles:{value:true}},mapToObject:function(e,t,a){var i={};if(o.Lang.isObject(e)){if(!o.instanceOf(e,o.Model))return e;i.id=e.get("id")}else o.Lang.isValue(e)&&(i.id=e);o.Lang.isObject(t)&&!o.Lang.isArray(t)&&(i.filter=t);o.Lang.isString(a)&&(i.urlId=a);return i}});var a=function(e){if(o.Lang.isArray(e)){if(e.length<1)return"";e=e[0]}var t=o.Lang.isObject(e);if(t&&o.Object.hasKey(e,"id"))return e.id;if(t&&o.instanceOf(e,o.Model))return e.get("id");return e};o.Squarespace.DialogFields.ContentIdSelector=o.Base.create("contentIdSelector",o.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:a}}});o.Squarespace.DialogFields.ContentIdArraySelector=o.Base.create("contentIdArraySelector",o.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:function(e){if(o.Lang.isArray(e))return o.Array.map(e,a);return[a(e)]}}}})},"1.0",{requires:["base","squarespace-animations","squarespace-content-collection-utils","squarespace-dialog","squarespace-dialog-content-selector-template","squarespace-dialog-field-2","squarespace-hb-compare","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-spinner","squarespace-ui-templates"]})},6168:function(e,t){YUI.add("squarespace-dialog-content-selector-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-content-selector.html"]=e(function(e,t,r,a,i){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,e.helpers);i=i||{};var n="",s,o,l=this,c=r.helperMissing,d="function",u=this.escapeExpression,g=r.blockHelperMissing;function p(e,t,a){var i="",n;i+='\n  <div class="collection-group" data-title="';if(n=r.title)n=n.call(e,{hash:{},data:t});else{n=e.title;n=typeof n===d?n.apply(e):n}i+=u(n)+'">\n    <div class="collection-group-title">';if(n=r.title)n=n.call(e,{hash:{},data:t});else{n=e.title;n=typeof n===d?n.apply(e):n}i+=u(n)+"</div>\n\n    ";n=r.each.call(e,e.collectionObjects,{hash:{},inverse:l.noop,fn:l.programWithDepth(2,h,t,a),data:t});(n||0===n)&&(i+=n);i+="\n\n  </div>\n";return i}function h(e,t,a){var i="",n;i+='\n      <div class="collection-wrapper ';n=r["if"].call(e,e.filter,{hash:{},inverse:l.program(5,m,t),fn:l.program(3,f,t),data:t});(n||0===n)&&(i+=n);i+=" ";n=r["if"].call(e,e.selected,{hash:{},inverse:l.noop,fn:l.program(7,v,t),data:t});(n||0===n)&&(i+=n);i+='" data-url-id="';if(n=r.urlId)n=n.call(e,{hash:{},data:t});else{n=e.urlId;n=typeof n===d?n.apply(e):n}i+=u(n)+'" data-collection-id="';if(n=r.id)n=n.call(e,{hash:{},data:t});else{n=e.id;n=typeof n===d?n.apply(e):n}i+=u(n)+'">\n        <div class="collection ';if(n=r.className)n=n.call(e,{hash:{},data:t});else{n=e.className;n=typeof n===d?n.apply(e):n}i+=u(n)+'">\n          <span class="collection-title">';if(n=r.title)n=n.call(e,{hash:{},data:t});else{n=e.title;n=typeof n===d?n.apply(e):n}i+=u(n)+"</span>\n          ";n=r["if"].call(e,e.filter,{hash:{},inverse:l.noop,fn:l.program(9,b,t),data:t});(n||0===n)&&(i+=n);i+="\n\n          ";n=r["if"].call(e,e.dropdown,{hash:{},inverse:l.noop,fn:l.program(12,S,t),data:t});(n||0===n)&&(i+=n);i+="\n        </div>\n\n        ";n=r["if"].call(e,e.dropdown,{hash:{},inverse:l.noop,fn:l.programWithDepth(14,q,t,a),data:t});(n||0===n)&&(i+=n);i+="\n      </div>\n    ";return i}function f(e,t){return"has-content-stat-filter"}function m(e,t){return"no-filter"}function v(e,t){return"selected"}function b(e,t){var a="",i,n,s;a+='\n            \n            <span class="collection-filter-wrapper"><span class="collection-filter">';s={hash:{compare:"tag"},inverse:l.noop,fn:l.program(10,y,t),data:t};n=(i=r.if_eq||e.if_eq,i?i.call(e,(i=e.filter,null==i||false===i?i:i.type),s):c.call(e,"if_eq",(i=e.filter,null==i||false===i?i:i.type),s));(n||0===n)&&(a+=n);a+=u((i=(i=e.filter,null==i||false===i?i:i.name),typeof i===d?i.apply(e):i))+"</span></span>\n          ";return a}function y(e,t){return"#"}function S(e,t){return'\n            <div class="dropdown-button"></div>\n          '}function q(e,t,a){var i="",n;i+='\n          <div class="dropdown">\n            ';n=r["if"].call(e,e.categories,{hash:{},inverse:l.noop,fn:l.programWithDepth(15,_,t,a),data:t});(n||0===n)&&(i+=n);i+="\n\n            ";n=r["if"].call(e,e.tags,{hash:{},inverse:l.noop,fn:l.programWithDepth(19,k,t,a),data:t});(n||0===n)&&(i+=n);i+="\n          </div>\n        ";return i}function _(e,t,a){var i="",n,s;i+='\n              <div class="categories">\n                <div class="icon-title">'+u((n=(n=a.strings,null==n||false===n?n:n.chooseCategory),typeof n===d?n.apply(e):n))+'</div>\n                <select>\n                  <option value="none-selected">'+u((n=(n=a.strings,null==n||false===n?n:n.none),typeof n===d?n.apply(e):n))+"</option>\n                  ";s=r.each.call(e,e.categories,{hash:{},inverse:l.noop,fn:l.program(16,C,t),data:t});(s||0===s)&&(i+=s);i+="\n                </select>\n              </div>\n            ";return i}function C(e,t){var a="",i;a+='\n                    <option value="';if(i=r.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===d?i.apply(e):i}a+=u(i)+'" ';i=r["if"].call(e,e.selected,{hash:{},inverse:l.noop,fn:l.program(17,E,t),data:t});(i||0===i)&&(a+=i);a+=">";if(i=r.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===d?i.apply(e):i}a+=u(i)+"</option>\n                  ";return a}function E(e,t){return'selected="selected"'}function k(e,t,a){var i="",n,s;i+='\n              <div class="tags">\n                <div class="icon-title">'+u((n=(n=a.strings,null==n||false===n?n:n.chooseTag),typeof n===d?n.apply(e):n))+'</div>\n                <select>\n                  <option value="none-selected">'+u((n=(n=a.strings,null==n||false===n?n:n.none),typeof n===d?n.apply(e):n))+"</option>\n                  ";s=r.each.call(e,e.tags,{hash:{},inverse:l.noop,fn:l.program(16,C,t),data:t});(s||0===s)&&(i+=s);i+="\n                </select>\n              </div>\n            ";return i}function w(e,t){var a="",i;a+='\n  <div class="empty-message">'+u((i=(i=e.strings,null==i||false===i?i:i.emptyMessage),typeof i===d?i.apply(e):i))+"</div>\n";return a}s=r.each.call(t,t.collectionGroups,{hash:{},inverse:l.noop,fn:l.programWithDepth(1,p,i,t),data:i});(s||0===s)&&(n+=s);n+="\n\n\n";o={hash:{},inverse:l.program(21,w,i),fn:l.noop,data:i};if(s=r.collectionGroups)s=s.call(t,o);else{s=t.collectionGroups;s=typeof s===d?s.apply(t):s}r.collectionGroups||(s=g.call(t,s,o));(s||0===s)&&(n+=s);n+="\n";return n})})();var t="dialog-content-selector.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6169:function(e,t){YUI.add("squarespace-models-content-stats",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.ContentStats=a.Base.create("contentStats",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"content-stats",getTagsAsStringArray:function(){return this._toNameArray(this.get("tagList"))},getCategoriesAsStringArray:function(){return this._toNameArray(this.get("categoryList"))},_toNameArray:function(e){var t=[];a.Lang.isArray(e)&&a.Array.each(e,function(e){a.Lang.isString(e.name)&&t.push(e.name)});return t}},{ATTRS:{id:{value:null,validator:a.Lang.isString},websiteId:{value:null,validator:a.Lang.isString},collectionId:{value:null,validator:a.Lang.isString},tagList:{value:[],validator:a.Lang.isArray},categoryList:{value:[],validator:a.Lang.isArray}}});a.Squarespace.Models.ContentStatsList=a.Base.create("contentStatsList",a.ModelList,[a.Squarespace.ModelSync.REST],{model:a.Squarespace.Models.ContentStats,getByCollectionId:function(t){var a;this.each(function(e){e.get("collectionId")===t&&(a=e)});return a}});a.Squarespace.ContentStatsCache=new a.Squarespace.Models.ContentStatsList},"1.0",{requires:["base","model","model-list","squarespace-util","squarespace-model-sync-rest"]})},6170:function(e,t){YUI.add("squarespace-dialog-html",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.HTML=e.Base.create("html",e.Squarespace.DialogField2,[],{bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){t.superclass.syncUI.call(this);this.get("contentBox").empty().setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-dialog-field-html",ATTRS:{content:{value:""},focusable:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},6171:function(e,t,a){var i=a(24).t;var C=a(810);var E=a(845);var o=a(993);YUI.add("squarespace-dialog-statepicker-inset-calendar",function(_){var t=_.namespace("Squarespace.DialogFields").InsetCalendar=_.Base.create("insetCalendar",_.Squarespace.DialogField2,[_.WidgetChild],{initializer:function(e){var t;t=_.Lang.isDate(e.data)?e.data:_.Lang.isNumber(e.data)?new Date(e.data):new Date;var a=E(t);_.Lang.isValue(e.day)||this.set("day",a.getDate());_.Lang.isValue(e.month)||this.set("month",a.getMonth());_.Lang.isValue(e.year)||this.set("year",a.getFullYear())},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this._nextMonth=e.one(".next");this._prevMonth=e.one(".prev")},bindUI:function(){t.superclass.bindUI.call(this);this._nextMonth.on("click",this.showNextMonth,this);this._prevMonth.on("click",this.showPrevMonth,this);_.delegate("click",this.handleDayClick,this.get("contentBox"),"td",this);this.after(["dayChange","monthChange"],this.setDate,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("data")||new Date;this.renderCalendar(e,this.get("type"))},setDate:function(e){if(e.silent)return;var t=this.get("day");var a=this.get("year");var i=this.get("month");var n=this.get("data")||new Date;var s=E(n);if("day"===e.attrName)t=e.newVal;else if("month"===e.attrName){i=e.newVal;_.Lang.isValue(e.prevVal)&&(a=this.updateYear(e.newVal,e.prevVal))}s.set({year:a,month:i,day:t});var r=o(n);s.setMinutes(s.getMinutes()-r);this.set("data",s)},handleDayClick:function(e){e.halt();var t=parseInt(_.Lang.trim(e.target.get("text")),10),a=e.target,i=this.get("type");"duration"===i&&this.get("allowNever")&&(a.hasClass("fade")||a.hasClass("selected"))||(a.hasClass("today")||a.hasClass("active"))&&this.set("day",parseInt(t,10))},showNextMonth:function(e){this.updateMonth(1)},showPrevMonth:function(e){this.updateMonth(-1)},renderCalendar:function(e,t){var a=this.get("contentBox");var i;var n=this.get("data");var s=E(e);var r=new Date(s.getTime());var o=new Date(s.getTime());var l;var c=e.getDaysInMonth();var d=E(new Date);var u=new Date(s.getTime());var g;var p;var h=1,f=0,m=0;var v="";var b=C(e,"MMMM YYYY");o.moveToFirstDayOfMonth();l=o.getDay();u.addMonths(-1);g=u.getDaysInMonth();var y=function(e,t){return'<td class="'+e+'">'+t+"</td>"};for(f=0;f<6;f++){v+='<tr class="body-row">';if(h>c+l)for(m=0;m<7;++m)v+=y("fade","&nbsp");else for(m=0;m<7;++m){var S=h-l;if(h<=l)v+=y("fade",g+S);else if(h<=c+l){r.set({day:S});p="active";n&&s.getDate()===S?p="active selected":d.getFullYear()===s.getFullYear()&&d.getMonth()===s.getMonth()&&d.getDate()===S?p="today"+("duration"===t?" active":""):r.getTime()<d.getTime()&&"duration"===t&&(p="fade");v+=y(p,S)}else v+=y("fade",S-c);h+=1}v+="</tr>"}i=a.one("table > tbody");i.empty();var q=_.Node.create(v);q.all(".body-row").each(function(e){var t=_.Lang.isValue(e.one(".active"))?"table-row":"none";e.setStyle("display",t)});i.append(q);a.one(".month").set("text",b)},updateYear:function(e,t){var a=t-e,i=this.get("year");if(1!==Math.abs(a)){a>1?i++:a<-1&&i--;this.set("year",i)}return i},updateMonth:function(e){var t=this.get("data")||new Date;e=Number(e);_.Lang.isNumber(e)||(e=0);t.addMonths(e);var a=E(t);this.set("day",a.getDate(),{silent:true});this.setAttrs({month:a.getMonth()});this.renderCalendar(t,this.get("type"))}},{CSS_PREFIX:"calendar-wrapper",TEMPLATE:'<div class="calendar-inset-container"><div class="header"><div class="prev back">&nbsp;</div><span class="month">&nbsp;</span><div class="next">&nbsp;</div></div><table cellpadding="0" cellspacing="0"><thead><tr><td>'+i("Su")+"</td><td>"+i("Mo")+"</td><td>"+i("Tu")+"</td><td>"+i("We")+"</td><td>"+i("Th")+"</td><td>"+i("Fr")+"</td><td>"+i("Sa")+"</td></tr></thead><tbody></tbody></table></div>",ATTRS:{day:{value:1,validator:_.Squarespace.AttrValidators.isNumber,setter:function(e){return parseInt(e,10)}},month:{validator:_.Squarespace.AttrValidators.isNumber},year:{validator:_.Squarespace.AttrValidators.isNumber},data:{setter:function(e){if(!_.Lang.isValue(e))return null;var t=e;t=_.Lang.isNumber(e)?new Date(e):_.Lang.isDate(e)?e:new Date;var a=this.get("maximumDate");var i=this.get("minimumDate");if(_.Lang.isValue(a)&&_.DataType.Date.isGreater(t,new Date(a)))return _.Attribute.INVALID_VALUE;if(_.Lang.isValue(i)&&_.DataType.Date.isGreater(new Date(i),t))return null;return t},validator:_.Squarespace.AttrValidators.isNullorDate},maximumDate:{validator:function(e){return _.Squarespace.AttrValidators.isNullOrNumber(e)||_.Squarespace.AttrValidators.isDate(e)}},minimumDate:{validator:function(e){return _.Squarespace.AttrValidators.isNullOrNumber(e)||_.Squarespace.AttrValidators.isDate(e)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},6173:function(e,t,a){YUI.add("squarespace-tab-view",function(p){var h="tab-wrapper",f="active",m="tabId",s="-self",r="-children";var o=p.namespace("Squarespace.Widgets").TabView=p.Base.create("tabView",p.Squarespace.Widgets.SSWidget,[],{initializer:function(e){this._saveChildWidgetDeclarations();this._childWidgets={};this._tabContentWrapperNodes=[];this._activeChildWidget=null;this._activeChildId=null;this.publish("tab-switch-requested",{defaultFn:this._switchTabsDefFn,preventable:true,context:this,emitFacade:true})},destructor:function(){this._childWidgetDeclarations=null;this._childWidgetOrder=null;this._childWidgetIndexes=null;this._activeChildWidget=null;this._activeChildId=null;this._parent=null;this._tabContentWrapperNodes=null;p.Object.each(this._childWidgets,function(e){e&&e.destroy({remove:true})},this);this._childWidgets=null},renderUI:function(){o.superclass.renderUI.call(this);var e=this.getProperty("CSS_PREFIX"),t=this.get("contentBox"),a="."+e+s;var i=t.one(a);if(!i)throw new Error(this.name+": No element found matching tabBox selector ("+a+").");this._set("tabBox",i);var n=this.get("tabContentBox");n.inDoc()||t.appendChild(n);n.addClass(e+r);this._selectInitialTab()},bindUI:function(){o.superclass.bindUI.call(this);var e=this.get("id");this.get("tabBox").on(e+"|click",function(e){e.preventDefault();e.stopPropagation();var t=e.target.ancestor(function(e){return!!e.getData(m)},true);t&&this.switchTabs(t.getData(m))},this);var t=this.get("parent")||this._parent;t&&t.on(e+"|tab-switch-requested",function(e){this.fire("tab-switch-requested",{tabId:null,originalTabSwitchEvent:e.originalTabSwitchEvent||e})},this)},_saveChildWidgetDeclarations:function(){this._childWidgetDeclarations={};this._childWidgetIndexes={};this._childWidgetOrder=[];this._recurseThroughDeclarations();p.Array.each(this._childWidgetOrder,function(e,t){this._childWidgetIndexes[e]=t},this)},_recurseThroughDeclarations:function(){var e=arguments[0];p.Lang.isUndefined(e)&&(e=this.get("widgets"));p.Array.each(e,function(e){if(p.Lang.isNull(e));else if(e.widgets)this._saveChildWidgetDeclarations(e.widgets);else{if(!e.ctor)throw new Error(this.name+": No ctor or widgets array found in declaration");this._childWidgetDeclarations[e.id]=e;this._childWidgetOrder.push(e.id)}},this)},_selectInitialTab:function(){var e=this.get("initialTabId");if(!e){var t=null;this.get("tabBox").all("*").some(function(e){if(e.getData(m)){t=e;return true}return false},this);if(!t){false;return}e=t.getData(m)}this.switchTabs(e)},refreshCurrentTab:function(){this._switchTabs(this._activeChildId)},switchTabs:function(e){if(!p.Lang.isNull(e)&&!this._childWidgetDeclarations[e])throw new Error(this.name+": Tab id '"+e+"' does not exist");if(e===this._activeChild)return;this.fire("tab-switch-requested",{tabId:e})},getActiveChildId:function(){return this._activeChildId},getChildWidgets:function(){return this._childWidgets},_switchTabsDefFn:function(e){this._switchTabs(e.tabId)},_switchTabs:function(e){var t=this.get("tabBox"),a=this._activeChildId,i=this._childWidgetIndexes[a],n=this._childWidgets[a],s=e,r=this._childWidgetIndexes[s],o=this._childWidgets[s];if(p.Lang.isNull(s))return;var l="."+f;t.all(l).removeClass(f);var c;var d;n&&(c=this._tabContentWrapperNodes[i]);if(o)d=this._tabContentWrapperNodes[r];else{d=p.Node.create("<div/>");d.addClass(h);d.setAttribute("data-"+m,e);this.get("tabContentBox").insert(d,r+1);var u=this._childWidgetDeclarations[s];o=new u.ctor(p.merge(u.config||{},{parent:this,container:d}));o.render(d);this._childWidgets[s]=o;this._tabContentWrapperNodes[r]=d}var g=p.bind(function(){if(this.get("destroyOnSwitch")){c.remove(true);n.destroy({remove:true});this._childWidgets[a]=null;this._tabContentWrapperNodes[i]=null}else c.hide()},this);if(c&&d){g();d.show()}else d.show();t.all("*").some(function(e){if(e.getData(m)===s){e.addClass(f);return true}return false},this);this._activeChildId=s;this._activeChildWidget=o},toJSON:function(){var e=this.getAttrs();return{widgets:this._convertForTemplateContext(e.widgets),id:e.id,className:e.className,strings:e.strings}},_convertForTemplateContext:function(e){var t=[];p.Array.each(e,function(e){if(p.Lang.isNull(e));else if(e.widgets)t.push({label:e.label||"",widgets:this._convertForTemplateContext(e.widgets)});else{if(!e.ctor)throw new Error(this.name+": No ctor or widgets array found in declaration");t.push({label:e.label||"",id:e.id})}},this);return t},_validateWidgets:function(e){if(!p.Lang.isArray(e)){console.warn(this.name+": An array of tab item declarations is required.");return false}return p.Array.some(e,function(e){if(!p.Lang.isUndefined(e.ctor))return!this._validateWidgetDeclaration(e);if(!p.Lang.isUndefined(e.widgets))return!this._validateWidgetGroupDeclaration(e);false;return true},this)},_validateWidgetDeclaration:function(e){if(!p.Lang.isString(e.id)){false;return false}if(!e.ctor||!p.Lang.isFunction(e.ctor)){false;return false}},_validateWidgetGroupDeclaration:function(e){var t=e.widgets;if(!t){false;return false}return p.Array.some(t,function(e){return!this._validateWidgetDeclaration},this)}},{CSS_PREFIX:"sqs-tab-view",HANDLEBARS_TEMPLATE:"tab-view.html",ATTRS:{strings:{value:{title:"",description:""}},tabBox:{value:null,readOnly:true},tabContentBox:{valueFn:function(){return p.Node.create("<div/>")},writeOnce:"initOnly"},initialTabId:{value:null},destroyOnSwitch:{value:false,validator:p.Lang.isBoolean},widgets:{value:[],validator:"_validateWidgets",initOnly:true},switchAnimation:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-tab-view-tab-group-template","squarespace-tab-view-tab-template","squarespace-tab-view-template"]})},6174:function(e,t){YUI.add("squarespace-tab-view-tab-group-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view-tab-group.html"]=e(function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);s=this.merge(s,e.partials);a=a||{};var i="",r,o=this,l="function",c=this.escapeExpression;function d(e,t){var a="",i;a+="\n      ";i=n.each.call(e,e.widgets,{hash:{},inverse:o.noop,fn:o.program(2,u,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function u(e,t){var a="",i;a+="\n        ";i=n["if"].call(e,e.widgets,{hash:{},inverse:o.program(5,p,t),fn:o.program(3,g,t),data:t});(i||0===i)&&(a+=i);a+="\n      ";return a}function g(e,t){var a="",i;a+="\n          ";i=o.invokePartial(s["tab-view/tab-group.html"],"tab-view/tab-group.html",e,n,s,t);(i||0===i)&&(a+=i);a+="\n        ";return a}function p(e,t){var a="",i;a+="\n          ";i=o.invokePartial(s["tab-view/tab.html"],"tab-view/tab.html",e,n,s,t);(i||0===i)&&(a+=i);a+="\n        ";return a}i+='<div class="tab-group">\n  <div class="tab-group-label">';if(r=n.label)r=r.call(t,{hash:{},data:a});else{r=t.label;r=typeof r===l?r.apply(t):r}i+=c(r)+'</div>\n  <div class="tab-group-items">\n    ';r=n["if"].call(t,t.widgets,{hash:{},inverse:o.noop,fn:o.program(1,d,a),data:a});(r||0===r)&&(i+=r);i+="\n  </div>\n</div>";return i})})();var t="tab-view-tab-group.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6175:function(e,t){YUI.add("squarespace-tab-view-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view-tab.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s,r="function",o=this.escapeExpression,l=this;function c(e,t){var a="",i;a+='\n  <div class="tab-view-tab ';if(i=n.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===r?i.apply(e):i}a+=o(i)+'" data-tabId="';if(i=n.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===r?i.apply(e):i}a+=o(i)+'">\n    <span class="label">';if(i=n.label)i=i.call(e,{hash:{},data:t});else{i=e.label;i=typeof i===r?i.apply(e):i}a+=o(i)+"</span>\n  </div>\n";return a}s=n["if"].call(t,t.id,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});return s||0===s?s:""})})();var t="tab-view-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6176:function(e,t){YUI.add("squarespace-tab-view-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view.html"]=e(function(e,t,n,s,a){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);s=this.merge(s,e.partials);a=a||{};var i="",r,o="function",l=this;function c(e,t){var a="",i;a+="\n  ";i=n["if"].call(e,e.title,{hash:{},inverse:l.noop,fn:l.program(2,d,t),data:t});(i||0===i)&&(a+=i);a+="\n  ";i=n["if"].call(e,e.description,{hash:{},inverse:l.noop,fn:l.program(4,u,t),data:t});(i||0===i)&&(a+=i);a+="\n";return a}function d(e,t){var a="",i;a+='\n    <div class="navigation-title">';if(i=n.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>\n  ";return a}function u(e,t){var a="",i;a+='\n    <div class="navigation-description">';if(i=n.description)i=i.call(e,{hash:{},data:t});else{i=e.description;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>\n  ";return a}function g(e,t){var a="",i;a+="\n    ";i=n["if"].call(e,e.widgets,{hash:{},inverse:l.program(9,h,t),fn:l.program(7,p,t),data:t});(i||0===i)&&(a+=i);a+="\n  ";return a}function p(e,t){var a="",i;a+="\n      ";i=l.invokePartial(s["tab-view-tab-group.html"],"tab-view-tab-group.html",e,n,s,t);(i||0===i)&&(a+=i);a+="\n    ";return a}function h(e,t){var a="",i;a+="\n      ";i=l.invokePartial(s["tab-view-tab.html"],"tab-view-tab.html",e,n,s,t);(i||0===i)&&(a+=i);a+="\n    ";return a}r=n["with"].call(t,t.strings,{hash:{},inverse:l.noop,fn:l.program(1,c,a),data:a});(r||0===r)&&(i+=r);i+='\n<div class="sqs-tab-view-self">\n  ';r=n.each.call(t,t.widgets,{hash:{},inverse:l.noop,fn:l.program(6,g,a),data:a});(r||0===r)&&(i+=r);i+="\n</div>";return i})})();var t="tab-view.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6177:function(e,t,a){var i=a(24).t;var s=a(0);var r=a(60);var o=a(1926);var l={x:.5,y:.5};YUI.add("squarespace-dialog-file-image",function(c){c.namespace("Squarespace.DialogFields");var n=c.Squarespace.DialogFields.FileImage=c.Base.create("fileImage",c.Squarespace.DialogFields.FileRequiresProcessing,[],{renderUI:function(){n.superclass.renderUI.call(this);var e=this._imagePickerEl=c.Node.create('<div class="'+this.getClassName()+'-external-image-picker"></div>');var t=this._imageEditorEl=c.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');this.get("contentBox").append(e);this.get("contentBox").append(t);this._originalWidgetDimensions={height:this.get("height"),width:this.get("width")};this._attemptToEvaluateTargetSize()},bindUI:function(){n.superclass.bindUI.call(this);this._imagePickerEl.on("click",function(e){e.halt();this._initializeExternalImagePicker()},this);this.after("dataChange",this._syncThumbnailSizes,this);this.after("dataChange",function(e){null===e.newVal&&this.set("isLoading",false)},this);this.on("uploadStart",function(){this.get("isLoading")||c.Global.fire("dialogFileImage:uploadStart");this.set("isLoading",true)}.bind(this))},destructor:function e(){this._animateLoadedImageHandle&&this._animateLoadedImageHandle.detach();if(this._img){this._img.detach("error");this._img.detach("load");this._img.detach("shown")}this._imagePickerEl.detach("click");if(this._imageEditorEl){r.unmountComponentAtNode(this._imageEditorEl.getDOMNode());this._imageEditorEl.remove(true)}},syncUI:function(){n.superclass.syncUI.call(this);this._attemptToEvaluateTargetSize()},_syncThumbnailSizes:function(e){if("DialogFileImage"===e.source)return;var t=this.get("id");var a=[t+"|originalSizeChange",t+"|systemDataIdChange"];e.prevVal&&e.prevVal.detach(a);this._attemptToEvaluateTargetSize();e.newVal&&this._registerEvent(e.newVal.after(a,function(){this._attemptToEvaluateTargetSize()},this))},_attemptToEvaluateTargetSize:function(){var e=this.get("data");if(!e||!e.get("hasFileData")){this.get("contentBox").setStyles({width:this._originalWidgetDimensions.width,height:this._originalWidgetDimensions.height});return}var t=e.get("originalSize");if(c.Lang.isString(t)){var a=t.split("x");if(2===a.length){var i=a[0];var n=a[1];var s=this.get("width");var r=this.get("boundingBox").get("offsetWidth");var o=Math.max(s,r);var l=ImageLoader.getDimensionForValue("height",o,{dimensions:{width:i,height:n}});this.get("contentBox").setStyle("height",Math.min(o,l,this._originalWidgetDimensions.height))}}},getAssociatedVars:function(){var e=[];var t=this.get("data");if(t){e=[{name:this.get("name")+"Id",value:t.get("id")},{name:"mediaFocalPoint",value:t.get("mediaFocalPoint")},{name:"filename",value:t.get("filename")}];this.isChildMode()||e.push({name:"updatedOn",value:t.get("updatedOn")})}return e},_cleanupResidualElements:function(){n.superclass._cleanupResidualElements.call(this);this._focalPoint&&this._focalPoint.get("host").unplug(this._focalPoint.constructor)},_renderFilePreview:function(){var e=this.get("data");var t=this.get("contentBox");this.set("isLoading",true);t.removeClass("loaded");t.addClass("image-loading");var a=c.Node.create('<div class="'+this.getClassName()+'-preview content-fit"><img data-load="false" data-src="'+e.get("assetUrl")+'" data-image-dimensions="'+e.get("originalSize")+'"data-image-focal-point="'+e.get("mediaFocalPoint.x")+","+e.get("mediaFocalPoint.y")+'" /></div>');this._img=a.one("img[data-src]");this._img.plug(c.Squarespace.Animations.Fadeable);this._img.hide();this._spinner=new c.Squarespace.Spinner({size:"extra-large",render:t,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"});this._bindPreviewImage(this._img);t.append(a);var i=!this.tab||this.tab.index===this.get("dialog").currentTabIndex;this._img.plug(c.Squarespace.Loader2,{load:i})},_plugActionOverlay:function(e){var t=this.get("data");if(!t)return;var a={buttons:this.get("disableEdit")?["remove"]:["edit","remove"],anchor:e,position:t.get("mediaFocalPoint.y")>=.5?"top":"bottom"};this._actionOverlay=this.get("contentBox").plug(c.Squarespace.Plugin.ActionOverlay,a).actionOverlay;this._actionOverlay.on("button-edit",this._onEdit,this);this._actionOverlay.on("button-remove",this._onRemove,this)},_onEdit:function(){this._actionOverlay.setLoadingState("edit",true);r.render(s.createElement(o,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:true}),this._imageEditorEl.getDOMNode(),function(){this._actionOverlay.setLoadingState("edit",false)}.bind(this))},_onSaveEditedImage:function(e){var t=this.get("data");this.set("isCancelProcessingEnabled",false);this.saveFromFile(e,null,t.get("id"));this._onCloseEditingImage()},_onCloseEditingImage:function(){r.render(s.createElement(o,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:false}),this._imageEditorEl.getDOMNode())},_onRemove:function(){if(this.get("persistTransient")){var e=this.get("data");c.Lang.isValue(e)&&!e.isNew()&&e.clearFileData(true)}else this.set("data",null)},_onJobComplete:function(e){var t=this.get("data");var a=e.target;var i=a.get("data");t&&i.assetUrl&&t.get("id")===i.contentItemId&&t.get("systemDataId")?t.setAttrs({assetUrl:i.assetUrl,systemDataVariants:i.assetVariants,originalSize:i.assetVariants.split(",")[0],updatedOn:i.contentItemUpdatedOn,mediaProcessingState:c.Squarespace.MediaProcessingState.READY}):n.superclass._onJobComplete.call(this,e)},_bindPreviewImage:function(e){e.on("error",function(){if(this.get("destroyed"))return;this._cleanupImagePreviewError(e)},this);e.once("load",function(){this._registerTimer(c.later(500,this,function(){if(this.get("destroyed"))return;ImageLoader.load(e,{load:true});this._animateLoadedImage(e)},this))},this)},_cleanupImagePreviewError:function(e){if(null===e||null===e.getDOMNode()||!e.inDoc())return;this._spinner.destroy();this.get("contentBox").removeClass("image-loading");if(this.get("persistTransient")){var t=this.get("data");c.Lang.isValue(t)&&!t.isNew()&&t.clearFileData(true)}else this.set("data",null);new c.Squarespace.Widgets.Alert({"strings.title":this.LANG.TITLE_PROCESSING_FAIL,"strings.message":this.LANG.ERR_PROCESSING_FAIL})},_animateLoadedImage:function(e){var t=this.get("contentBox");t.plug(c.Squarespace.Animations.Scalable);this._animateLoadedImageHandle=t.once("hidden",function(){if(this.get("destroyed"))return;this._spinner.destroy();t.removeClass("image-loading");t.addClass("loaded");t.show(true);e.once("shown",function(){if(this.get("destroyed"))return;this.set("isLoading",false);this.set("isCancelProcessingEnabled",true);this._plugActionOverlay(e);this.get("useFocalPoint")&&this._plugFocalPoint(e)},this);e.show()},this);t.show(true);t.hide()},_plugFocalPoint:function e(t){var a=this.get("data");var i=a?a.get("mediaFocalPoint"):null;var n=i||l;if(!n)return;this._focalPoint=t.plug(c.Squarespace.Plugin.FocalPoint,{focalPoint:n,parentNode:this.get("contentBox")}).focalPoint;this._focalPoint.on("focalPointChange",function(e){if("DialogFileImage"===e.source)return;a&&a.set("mediaFocalPoint",{x:e.newVal.x,y:e.newVal.y})},this);this._focalPoint.on("focalPointChanged",function(){a&&this.get("autoSaveFocalPoint")&&a.save({fields:["mediaFocalPoint"]});this.fire("edited",{noSyncUI:true});if(a&&this._actionOverlay){var e=a.get("mediaFocalPoint.y")>.5?"top":"bottom";this._actionOverlay.set("position",e)}},this)},setFocalPointPluginValue:function(e){this._focalPoint&&this._focalPoint.set("focalPoint",e,{source:"DialogFileImage"})},_initializeExternalImagePicker:function(){var e=this.get("imagePickerScrapeUrl");var t=this.get("data");!e&&t&&(e=t.get("sourceUrl"));var n=new c.Squarespace.EditingDialog({name:"choose-image-picker-url",closeOthers:false,top:250,width:468,overlay:.5,primaryTabs:[{title:this.LANG.TITLE_DOWNLOAD_IMAGES,icon:"/universal/images-v6/configuration/icon-importing-32-light.png",fields:[{ctor:c.Squarespace.DialogFields.Description,config:{text:this.LANG.DESC_DOWNLOAD_IMAGES}},{ctor:c.Squarespace.DialogFields.Text,config:{name:"imagePickerScrapeUrl",submitOnEnter:true,strings:{required:true,placeholder:i("http://")}}}]}],buttons:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Find Images")}],initialData:{imagePickerScrapeUrl:e}});n.on("send-requested",function(){var e=n.getField("imagePickerScrapeUrl");var t=e.getValue();/^https?:\/\//.test(t)||(t=t.replace(/^(?:\/\/)?/,"http://"));var a=/^https?:\/\/[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|]/;if(!(a.test(t)&&t.indexOf(".")>-1)){e.showError(this.LANG.ERR_INVALID_URL);n.allowEditing();return}if(this.get("imagePickerDownloadFromSource")||t.match(/.*(jpg|jpeg|gif|png)$/i)){this.saveFromUrl(t);n.cancel()}else{var i=new c.Squarespace.Widgets.ExternalImagePicker({scrapeUrl:t,render:true});i.after("selectedImageURLChange",function(e){this.saveFromUrl(e.newVal)},this);i.after("visibleChange",function(e){e.newVal&&n.cancel()},this);i.show()}},this);n.show()}},{CSS_PREFIX:"sqs-file-image",FILE_FILTER:{description:i("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico"},PROCESSING_JOB:c.Squarespace.ImageProcessingJob,PROCESSING_COPY:i("Processing and resizing"),ATTRS:{contentType:{value:"image"},contentLabel:{value:i("an image")},disableEdit:{value:false},useFocalPoint:{value:true},autoSaveFocalPoint:{value:false},imagePickerScrapeUrl:{value:""},imagePickerDownloadFromSource:{value:false},isLoading:{value:false},type:{}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-file-requires-processing","squarespace-external-image-picker","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-spinner","squarespace-ui-base","squarespace-widgets-alert"]})},6178:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-file-requires-processing",function(n){n.namespace("Squarespace.DialogFields");var a=n.Squarespace.DialogFields.FileRequiresProcessing=n.Base.create("fileRequiresProcessing",n.Squarespace.DialogFields.File,[],{initializer:function(){if(this.constructor===a)throw new Error("Y.Squarespace.DialogFields.FileRequiresProcessing is an abstract class. Please use a subclass.");if(!this.uploader)return;this.uploader.setAttrs({fileFilters:[this.getProperty("FILE_FILTER")],createJob:n.bind(this._createProcessingJob,this),jobFailure:n.bind(this._processingJobFailure,this)})},_bindDataEvents:function(){a.superclass._bindDataEvents.call(this);var e=this.get("data");e?this._registerEvent(e.after("mediaProcessingStateChange",this.syncUI,this)):this._isProcessing()&&this._cancelProcessing()},_cleanupResidualElements:function(){a.superclass._cleanupResidualElements.call(this);var e=this.get("boundingBox");var t=this.get("contentBox");e.removeClass("processing-taking-longer");t.removeClass("loaded");t.all("."+this.getClassName()+"-preview").remove();t.all(".processing-failed").remove();t.all(".processing-longer-than-expected").remove()},_renderDataLoadedState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("data");this.get("contentBox").removeClass("data-loading");if(t&&(t.get("hasFileData")||t.get("systemDataId"))){e.addClass("has-file");var a=t.get("mediaProcessingState");if(n.Squarespace.ContentItemUtils.isErrorProcessingState(t)){e.addClass("has-error");this._renderProcessingFailed()}else{e.removeClass("has-error");if(a===n.Squarespace.MediaProcessingState.READY||n.Lang.isNull(a)){this._renderFilePreview();this._progressPlugin.set("show",false)}else{e.addClass("processing-taking-longer");this._progressPlugin.set("show",true);this._renderProcessingPreview();this._renderProcessingDescription()}}}else{e.removeClass("has-error");e.removeClass("has-preview");e.removeClass("has-file")}},_renderDataLoadingState:function(){a.superclass._renderDataLoadingState.call(this);this.get("boundingBox").removeClass("has-error")},_cancelProcessing:function(e){e&&e.halt();this.set("data",null);this._progressPlugin&&this._progressPlugin.set("show",false)},_isProcessing:function(){return this._progressPlugin&&this._progressPlugin.get("show")},_renderProcessingPreview:function(){var e=this.getClassName();this.get("contentBox").append('<div class="'+e+"-preview "+e+'-preview-empty"></div>')},_renderProcessingFailed:function(){var e=n.Node.create('<div class="processing-failed"><p>'+i("<strong>Oops!</strong><br />Something went wrong.")+'<br /><a href="#" class="retry">'+i("Retry?")+"</a></p></div>");e.one("p a.retry").on("click",function(e){e.halt();this.set("data",null)},this);this.get("contentBox").append(e)},_renderProcessingDescription:function(){var e='<br /><a href="#" class="cancel">'+i("Cancel")+"</a>";var t=n.Node.create('<div class="processing-longer-than-expected"><p>'+this.getProperty("PROCESSING_COPY")+(this.get("isCancelProcessingEnabled")?e:"")+"</p></div>");t.delegate("click",this._cancelProcessing,"a.cancel",this);this.get("contentBox").append(t)},_createProcessingJob:function(e,t){if(!t.job){false;return null}var a=new(this.getProperty("PROCESSING_JOB"))(n.merge(t.job,{started:true}));var i=this.get("data");i&&i.get("id")===t.job.data.contentItemId&&i.get("systemDataId")?i.setAttrs({mediaProcessingState:n.Squarespace.MediaProcessingState.QUEUED}):this.set("data",new n.Squarespace.Models.ContentItem(n.merge(t.media[0],{mediaProcessingState:n.Squarespace.MediaProcessingState.QUEUED})));return a},_processingJobFailure:function(){new n.Squarespace.Widgets.Alert({"strings.title":i("Processing Failed"),"strings.message":i("We were unable to process your file. Please try again.")});this.syncUI()}},{ATTRS:{isCancelProcessingEnabled:{value:true}}})},"1.0",{requires:["base","node","squarespace-content-item-utils","squarespace-dialog-file","squarespace-enum","squarespace-models-content-item","squarespace-ui-base","squarespace-widgets-alert"]})},6179:function(e,t,a){var n=a(851);var u=a(24).t;var r=a(1309);var s=a(3091);YUI.add("squarespace-content-item-utils",function(d){var a=[n.QUEUED,n.PROCESSING];var i=[n.ERROR,n.DOWNLOAD_ERROR,n.ERROR_TOO_LARGE,n.ERROR_FILE_NOT_FOUND,n.ERROR_UNSUPPORTED_IMAGE_TYPE];d.namespace("Squarespace").ContentItemUtils={getWorkflowStateIdentifier:function(e){if(e===d.Squarespace.WorkflowStates.PUBLISHED)return"published";if(e===d.Squarespace.WorkflowStates.SCHEDULED)return"scheduled";if(e===d.Squarespace.WorkflowStates.NEEDS_REVIEW)return"needsreview";if(e===d.Squarespace.WorkflowStates.DRAFT)return"draft";return"draft"},getWorkflowStateCopy:function(e){if(e===d.Squarespace.WorkflowStates.PUBLISHED)return u("Published");if(e===d.Squarespace.WorkflowStates.SCHEDULED)return u("Scheduled");if(e===d.Squarespace.WorkflowStates.NEEDS_REVIEW)return u("Needs Review");if(e===d.Squarespace.WorkflowStates.DRAFT)return u("Draft");return u("Draft")},getCommentStateIdentifier:function(e){if(e===d.Squarespace.CommentStates.DISABLED)return"disable";if(e===d.Squarespace.CommentStates.ENABLED)return"allow";return"allow"},isErrorProcessingState:function(e){var t=e.get("mediaProcessingState");return-1!==i.indexOf(t)},isProcessingState:function(e){var t=e.get("mediaProcessingState");return-1!==a.indexOf(t)},sanitizeDataForCustomType:function(e,t,a){if(!t)return;var i=t.fields;d.Lang.isObject(e.customContent)||(e.customContent={customType:t.name});for(var n=0;n<i.length;n++){var s=i[n];var r=s.name;switch(s.type){case"text":case"wysiwyg":case"checkbox":e.customContent[r]=e["custom-"+r];delete e["custom-"+r];break;case"image":s=e["custom-"+r];if(s&&s.get("hasFileData")){var o=e["custom-"+r].getAttrs();e.customContent[r]=this.sanitizeImageItemContext(o)}else delete e.customContent[r];delete e["custom-"+r];break;case"gallery":var l=a.get("dialog").getField("custom-"+r).get("data").get("items");var c=l.toJSON();e.customContent[r]=c.map(this.sanitizeImageItemContext);delete e["custom-"+r];break;default:d.Squarespace.Logger.log(u("Custom Type Saving Error"),{message:u("Could not find anything for field."),field:s});break}}},sanitizeImageItemContext:function(e){delete e.attachment;delete e.authorId;delete e.categories;delete e.childType;delete e.childrenGroups;delete e.cloned;delete e.collectionId;delete e.commentCount;delete e.commentDisableOn;delete e.commentState;delete e.coverImageUrl;delete e.customContent;delete e.dataIsResolved;delete e.dataSize;delete e.dislikeCount;delete e.excerpt;delete e.internalContentNode;delete e.isGlobalFakeContentItem;delete e.isPusher;delete e.items;delete e.licensedAssetId;delete e.licensedAssetPreview;delete e.likeCount;delete e.location;delete e.mediaIsUploading;delete e.nextDisplayIndex;delete e.passthrough;delete e.postItemInjectCode;delete e.promotedBlock;delete e.promotedBlockType;delete e.proxyForId;delete e.publicCommentCount;delete e.sourceUrl;delete e.starred;delete e.structuredContent;delete e.tags;delete e.unsaved;delete e.updatedOn;delete e.version;delete e.websiteId;delete e.author;delete e.pendingPushedServices;delete e.pushedServices;delete e.shareStates;return e},sanitizeTemplateContextForCustomType:function(e,t){t&&(e.presentationName=t.title)},setDataForCustomType:function(o,e,l){if(!d.Lang.isValue(e))return;var t=e.fields;d.Array.each(t,function(e,t){var a=e.type;var i=e.name;var n="custom-"+i;var s=d.Object.getValue(o,["customContent",i]);switch(a){case"text":case"wysiwyg":case"checkbox":o[n]=s;break;case"image":d.Lang.isValue(s)?o[n]=new d.Squarespace.Models.ContentItem(d.merge(s,{collectionId:l.get("model").get("collectionId"),parentId:l.get("model").get("id"),recordType:d.Squarespace.RecordType.IMAGE})):o[n]=new d.Squarespace.Models.ContentItem({collectionId:l.get("model").get("collectionId"),parentId:l.get("model").get("id"),recordType:d.Squarespace.RecordType.IMAGE});break;case"gallery":var r=new d.Squarespace.Models.ContentItem({parentId:l.get("model").get("id"),collectionId:l.get("model").get("collectionId"),recordType:d.Squarespace.RecordType.IMAGE});d.Lang.isValue(s)&&r.get("items").add(s);o[n]=r;break;default:d.Squarespace.Logger.log(u("Custom Type Saving Error"),{message:u("Could not find any data to set for field."),field:e});break}},this)},createCustomTypeFieldConfigs:function(e,n){var t=[];for(var a=0;a<e.length;a++){var i=e[a];switch(i.type){case"text":var s=i.title||"";t.push({$include:["fields.title",{"config.name":"custom-"+i.name,"config.strings.title":s,"config.strings.placeholder":""}]});break;case"checkbox":t.push({ctor:d.Squarespace.DialogFields.Check,config:{name:"custom-"+i.name,"strings.title":i.title}});break;case"wysiwyg":t.push({ctor:d.Squarespace.DialogFields.Description,config:{title:i.title||""}});t.push({ctor:d.Squarespace.DialogFields.Wysiwyg,config:{name:"custom-"+i.name,editorHeight:227,classNames:"major"}});break;case"image":(function(i){var e=i.title||u("Thumbnail Image");t.push({$include:["fields.mainImage",{"config.name":"custom-"+i.name,"config.type":i.type,"config.strings.title":e,"config.mode":r.CHILD,"config.childType":d.Squarespace.RecordType.IMAGE,"config.preflight":function(e){var t=n.get("model");var a=n.get("dialog").getField("custom-"+i.name);if(t.get("id")){if(e){if(a&&a.get("data")&&!a.get("data").get("parentId")){a.get("data").set("parentId",t.get("id"));a.refreshItemPostData()}e()}}else{t.once("save",function(){if(a&&a.get("data")){a.get("data").set("parentId",t.get("id"));a.refreshItemPostData()}e&&e()});n.autoSave()}},"config.asyncUploadUrlFn":null}]})})(i);break;case"gallery":(function(i){t.push({ctor:d.Squarespace.DialogFields.Description,config:{title:i.title||""}});t.push({$include:["fields.childItemsGrid",{"config.width":null,"config.height":220,"config.hasFullScreenToggle":true,"config.name":"custom-"+i.name,"config.type":i.type,"config.uploadPreflight":function(e){var t=n.get("model");var a=n.get("dialog").getField("custom-"+i.name);if(t.get("id")){if(e){a&&a.get("data")&&!a.get("data").get("parentId")&&a.get("data").set("parentId",t.get("id"));e()}}else{t.once("save",function(){a&&a.get("data")&&a.get("data").set("parentId",t.get("id"));e&&e()},t);n.autoSave()}},"config.contentItemImageOptions.actionOverlayButtons":[d.Squarespace.ActionOverlayButtons.IMAGE_INFO,d.Squarespace.ActionOverlayButtons.EDIT_IMAGE,d.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]})})(i);break}}return t},setConfigurationForCustomType:function(e,t,a){if(!t)return;var i=this.createCustomTypeFieldConfigs(t.fields,a);var n={tabTitle:t.title,name:t.name,scroll:true,fields:i};e.tabs.push(n)},isStandardGalleryItem:function(e,t){return s(e.getAttrs())&&["gallery","project"].includes(t.get("typeName"))}}},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-wysiwyg","squarespace-logger","squarespace-models-content-item","squarespace-util-authenticated"]})},6180:function(e,t,a){var s=a(0);var r=a(60);var i=a(515);var n=a(2021);var o=a(5386);YUI.add("squarespace-dialog-wysiwyg",function(t){t.namespace("Squarespace.DialogFields").Wysiwyg=t.Base.create("wysiwyg",t.Squarespace.DialogField2,[],{initializer:function(e){this.get("boundingBox").addClass("field-wrapper clear");t.Lang.isValue(this.get("classNames"))&&this.get("boundingBox").addClass(this.get("classNames"))},destructor:function(){var e=this.get("contentBox").one(".rte");e&&e.unplug(t.Squarespace.Plugin.ScrollLock);r.unmountComponentAtNode(this.get("contentBox").one(".field-rte-wrapper").getDOMNode())},renderUI:function(){this.constructor.superclass.renderUI.apply(this,arguments);t.Lang.isValue(this.get("strings.title"))&&this.get("contentBox").one(".title").setHTML(this.get("strings.title"));t.Lang.isValue(this.get("description"))&&this.get("contentBox").one(".description").setHTML(this.get("description"));this._instantiateEditor();var e=this.get("contentBox").one(".rte");e&&e.plug(t.Squarespace.Plugin.ScrollLock)},_instantiateEditor:function(e){var t=this.get("data.html");var a=this.get("type");var i=this.get("toolbarOptions");var n=this.get("itemEditorZIndex");r.render(s.createElement(o,{color:"light",showSeparator:false,hideMenu:false,onChange:this.handleChange.bind(this),height:this.getEditorHeight(),value:t,itemEditorZIndex:n,toolbarOptions:i,type:a,forceUpdate:e,preserveWhitespace:this.get("preserveWhitespace"),decodeHTMLEntities:true}),this.get("contentBox").one(".field-rte-wrapper").getDOMNode())},bindUI:function(){this.on("dataChange",function(e){t.Lang.isValue(e.newVal)||""===e.newVal||e.preventDefault()});this.after("dataChange",function(e){e.internal||this._instantiateEditor(true)});var e=this.get("data");t.Lang.isValue(e)&&t.Lang.isValue(e.html)||this.handleChange("")},handleChange:function(e){this.set("data",{html:e.toString(),raw:false},{internal:true})},didDataChange:function(){var e=this.get("data.html");return e!==this.getValue("data",["html"])},getEditorHeight:function(){var e=this.get("editorHeight");return e-i.UI_PADDING_PX},_renderTitle:function(){if(this.config.title&&"top"===this.config.titleStyle)return t.Node.create('<div class="field-lhs">'+this.config.title+"</div>");return null}},{CSS_PREFIX:"sqs-dialog-wysiwyg",TEMPLATE:'<div class="title field-lhs"></div><div class="field-rhs"><div class="field-rte-wrapper"></div><div class="description"></div></div></div>',ATTRS:{type:{validator:t.Squarespace.AttrValidators.isValueIn(n.SchemaTypes),value:n.SchemaTypes.SIMPLE},editorHeight:{validator:t.Squarespace.AttrValidators.isNumber},data:{},classNames:{validator:t.Squarespace.AttrValidators.isString},title:{validator:t.Squarespace.AttrValidators.isString},label:{validator:t.Squarespace.AttrValidators.isString},itemEditorZIndex:{validator:t.Squarespace.AttrValidators.isNumber},toolbarOptions:{validator:t.Squarespace.AttrValidators.isNullOrArray},description:{validator:t.Squarespace.AttrValidators.isString},preserveWhitespace:{validator:t.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-plugin-scroll-lock"]})},6181:function(e,t,a){var h=a(24).t;var i=a(1309);var f=a(1723);var m=a(1720);var v=v||function(){};YUI.add("squarespace-dialog-file",function(p){var n=function(e){if(e<1e3)return"~1KB";if(e<1e6)return(e/1e3).toFixed(0)+"KB";return(e/1e6).toFixed(0)+"MB"};p.namespace("Squarespace.DialogFields");var s=p.Squarespace.DialogFields.File=p.Base.create("file",p.Squarespace.DialogField2,[],{initializer:function(){this.LANG=s.LANG;p.Squarespace.Uploader&&(this.uploader=this._createUploader());this.set("width",this.get("height"));this._plugTitleAndBindResizing();this.after("dataChange",function(){this.refreshItemPostData();this._bindDataEvents()},this);this._initializeAndLoadData();this.get("square")&&this.set("width",this.get("width"));this.publish("uploadStart")},renderUI:function(){s.superclass.renderUI.call(this);if(!this.uploader)return;var e=this.get("contentBox");var t=p.Squarespace.Plugin.ProgressSpinner.NS;this._progressPlugin=e.plug(p.Squarespace.Plugin.ProgressSpinner)[t];e.plug(p.Squarespace.Plugin.ProgressBar);if("none"===p.Uploader.TYPE)return;"flash"===p.Uploader.TYPE?p.later(300,this,function(){this.uploader.render(e)}):this.uploader.render(e)},destructor:function(){this.uploader&&this.uploader.destroy()},_uiSetWidth:function(e){this._uiSetDim("minWidth",e);this._uiSetDim("width",e)},bindUI:function(){s.superclass.bindUI.call(this);var e=this.uploader;if(!e)return;this._registerEvent(e.on("uploadstart",this._uploadStart,this));this._registerEvent(e.on("upload-complete",this._directUploadComplete,this));this._registerEvent(e.on("upload-failure",this._directUploadFailure,this));this.after("uploadUrlChange",function(){this.uploader.set("uploadURL",this.get("uploadUrl"))})},syncUI:function(){s.superclass.syncUI.call(this);this._dataLoaded?this._renderDataLoadedState():this._renderDataLoadingState()},didDataChange:function(){var e=this._initialData;var t=this.get("data");if(!e&&!t)return false;if(e&&0===Object.keys(e).length&&null===t)return false;if(!e||!t)return true;if(e.id!==t.get("id"))return true;var a=e.mediaFocalPoint;var i=t.get("mediaFocalPoint");return this._focalPointsDiffer(a,i)},_focalPointsDiffer:function(e,t){if(!e&&!t)return false;if(!e||!t)return true;return e.x&&t.x!==e.x||e.y&&t.y!==e.y},show:function(){this.syncUI();this.set("visible",true)},refreshItemPostData:function(){var e=this.get("data");if(e)switch(this.get("mode")){case i.ITEM:this._itemPostData={collectionId:e.get("collectionId"),recordType:e.get("recordType")};var t=e.get("id");t&&(this._itemPostData.replaceItemId=t);break;case i.CHILD:this._itemPostData={collectionId:e.get("collectionId"),recordType:e.get("recordType"),parentItemId:e.get("parentId")};break;default:this._itemPostData={};break}},_getUploadUrl:function(){var e=this.get("uploadUrl");if(null===e)return"/api/commondata/"+(this.isGlobalMode()?"SaveGlobalMedia":"SaveMedia");return e},saveFromUrl:function(e,t,a,i){this.saveFromUrlOrFile(e,t,a,i)},saveFromFile:function(e,t,a,i){this.saveFromUrlOrFile(e,t,a,i)},saveFromUrlOrFile:function(t,a,e,i){if(!this.uploader)return;this.fire("uploadStart");var n=this.get("boundingBox").one(".sqs-file-image-preview");if(this.get("persistTransient")){var s=this.get("data");p.Lang.isValue(s)&&!s.isNew()&&s.clearFileData(true)}else e?n&&n.hide():this.set("data",null);this.get("boundingBox").addClass("has-preview");var r=this._progressPlugin;r.set("show",true);var o="string"===typeof t;var l=o?{fileUrl:t}:{contentType:t.type,fileName:t.name,fileSize:t.size,Filedata:t};var c=p.merge(this._getFilePostData(),l);p.Lang.isValue(a)&&(c.licensedAssetPreview=a);p.Lang.isValue(i)&&(c.licensedAssetId=i);e&&(c.replaceItemId=e);if(!c.replaceItemId){var d=c.collectionId;var u=new p.Squarespace.Models.ContentItem({collectionId:d,recordType:c.recordType});u.save(p.bind(function(e){if(p.Lang.isValue(e)){new p.Squarespace.Widgets.Alert({"strings.title":h("Something Went Wrong"),"strings.message":this.LANG.ERR_FILE_UPLOAD});r.set("show",false);n&&n.show();this.get("boundingBox").removeClass("has-preview");return}this.saveFromUrlOrFile(t,a,u.get("id"),i)},this));return}if(o)p.Data.post({url:this._getUploadUrl(),data:c,success:this._onUploadComplete.bind(this,r)},this);else{var g=m.getUploadToken().getId();f.uploadFile(g,this._getUploadUrl(),c,{onProgress:v,onCancel:v}).then(function(e){this._onUploadComplete(r,e.data)}.bind(this))}},_onUploadComplete:function(e,t){if(t&&t.job){e.set("show",true);var a={placeholder:this.get("contentBox")};var i=this.uploader.get("createJob")(a,t);var n=this.get("boundingBox").one(".sqs-file-image-preview");n&&n.show();if(i){i.get("id")||i.set("id",t.job.id);var s=this.uploader;i.once("complete",p.bind(s._onJobHandler,s,"jobComplete",a));i.once("failure",p.bind(s._onJobHandler,s,"jobFailure",a));i.once("complete",this._onJobComplete,this);Static.JOB_MANAGER.addJob(i)}}var r=this.get("data");r&&!r.get("mediaProcessingState")&&r.set("mediaProcessingState",p.Squarespace.MediaProcessingState.QUEUED)},_loadItem:function(e){var t=new p.Squarespace.Models.ContentItem({id:e});t.load({forceReload:true},p.bind(function(e){p.Lang.isValue(e)||this.set("data",t)},this))},_onJobComplete:function(e){this._loadItem(e.target.get("data.contentItemId"))},isTransientMode:function(){return this.get("mode")===i.TRANSIENT},isGlobalMode:function(){return this.get("mode")===i.GLOBAL},isChildMode:function(){return this.get("mode")===i.CHILD},getUploaderConfig:function(){var e={uploadURL:this._getUploadUrl(),multipleFiles:false,appendNewFiles:false,isTransient:this.isTransientMode()||this.isGlobalMode(),persistTransient:this.get("persistTransient"),isGlobal:this.get("mode")===i.GLOBAL,autoUpload:true,selectButtonLabel:p.substitute("flash"===p.Uploader.TYPE?this.LANG.HINT_FILE_UPLOAD_CLICK_ONLY:this.LANG.HINT_FILE_UPLOAD,{type:this.get("contentLabel")}),dragAndDropArea:this.get("contentBox"),maxSize:this.get("maxSize"),processFile:p.bind(this._processFile,this),addPlaceholder:p.bind(this._addPlaceholder,this),preflight:this._getAsyncUploadUrlThenDoPreflight.bind(this)};"audio"===this.get("contentType")&&(e.fileFilters=[{description:h("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}]);return e},_createUploader:function(){var e=this.getUploaderConfig();var t=p.Squarespace.Uploader;p.Squarespace.Utils.isInDamaskFrame()&&(t=p.config.win.top.Y.Squarespace.Uploader);return new t(e)},_getAsyncUploadUrlThenDoPreflight:function(t){var a=this.get("preflight")||function(e){e()};this._getAsyncUploadUrlFn()(function(e){this.uploader.set("uploadURL",e);a(t)}.bind(this))},_getAsyncUploadUrlFn:function(){var e=this.get("asyncUploadUrlFn");if(p.Lang.isFunction(e))return e;return function(e){e(this._getUploadUrl())}.bind(this)},_plugTitleAndBindResizing:function(){var e=this.get("contentBox");var t=this.get("strings.title");t&&this.plug(p.Squarespace.Plugin.DialogFieldLabel,{forNode:e,strings:{text:t}});this.after("render",this._calcAndSetBoxHeight,this)},_calcAndSetBoxHeight:function(){var e=this.get("contentBox");var t=this.get("height");if(t&&this.get("rendered")){var a=this.get("boundingBox").get("offsetHeight");var i=e.get("clientHeight");e.setStyle("height",2*i-a);this.get("boundingBox").setStyle("height",null)}},_initializeAndLoadData:function(){var t=this.get("data");this.refreshItemPostData();this._bindDataEvents();if(t){this._initialData={id:t.get("id"),mediaFocalPoint:t.get("mediaFocalPoint")};t.isNew()||this.get("mode")===i.GLOBAL||this.get("persistTransient")?this._dataLoaded=true:t.load(p.bind(function(e){e&&new p.Squarespace.Widgets.Alert({"strings.title":h("Missing Item"),"strings.message":h("We could not locate the item.")});this._initialData.mediaFocalPoint=t.get("mediaFocalPoint");this._dataLoaded=true;this.get("rendered")&&this.syncUI()},this))}else{this._initialData={};this._dataLoaded=true}},_bindDataEvents:function(){var e=this.get("data");e&&this.get("mode")===i.ITEM&&this._registerEvent(e.after("idChange",function(e){this._itemPostData.replaceItemId=e.newVal},this))},_cleanupResidualElements:function(){this.get("contentBox").all("."+s.CSS_PREFIX+"-preview").remove();var e=this._actionOverlay;e&&e.get("host").unplug(e.constructor);var t=this._spinner;t&&t.destroy()},_renderDataLoadedState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("data");this.get("contentBox").removeClass("data-loading");if(t&&t.get("hasFileData")){e.addClass("has-file");this._renderFilePreview()}else{e.removeClass("has-preview");e.removeClass("has-file");this._progressPlugin.set("show",false)}},_renderDataLoadingState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("contentBox");e.removeClass("has-preview");e.addClass("has-file");t.addClass("data-loading");this._spinner=new p.Squarespace.Spinner({size:"extra-large",render:t,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"})},_renderFilePreview:function(){var e=p.Node.create('<div class="'+s.CSS_PREFIX+'-preview"></div>');var t=this.get("data");var a=t.get("filename");var i=t.get("dataSize");a&&e.append('<span class="file-meta file-meta-name">'+a+"</div>");i&&e.append('<span class="file-meta file-meta-size">'+n(i)+"</span>");this.get("contentBox").append(e);this._plugActionOverlay()},_plugActionOverlay:function(){this._actionOverlay=this.get("contentBox").plug(p.Squarespace.Plugin.ActionOverlay,{buttons:["remove"]}).actionOverlay;this._actionOverlay.on("button-remove",function(){this.set("data",null)},this)},_processFile:function(e){if(e.invalid){var t=e.invalid[0];var a=t.title;var i=t.message;if(this.get("strings.invalidDrop")){a=this.get("strings.invalidDrop.title");i=this.get("strings.invalidDrop.message")}new p.Squarespace.Widgets.Alert({"strings.title":a,"strings.message":i});return}e.postData=this._getFilePostData()},_getFilePostData:function(){var e=this.get("contentType");var t={process:-1!==["image","audio"].indexOf(e.slice(0,5))?"true":"false",contentType:e,isWordpressXmlFile:this.get("isWordpressXmlFile")};this.get("recordType")&&(t.recordType=this.get("recordType"));switch(this.get("mode")){case i.GLOBAL:case i.TRANSIENT:if(this.get("persistTransient")){var a=this.get("data");p.Lang.isValue(a)&&!a.isNew()&&(t.replaceItemId=a.get("id"))}break;case i.CHILD:if(this._itemPostData){t=p.merge(t,this._itemPostData,{childType:this.get("childType")});p.Lang.isUndefined(t.parentItemId)&&false}break;case i.ITEM:this._itemPostData&&(t=p.merge(t,this._itemPostData));break}return t},_addPlaceholder:function(){return this.get("contentBox")},_uploadStart:function(){this.fire("uploadStart");this._cleanupResidualElements();this.get("boundingBox").addClass("has-preview");this.get("contentBox").all('<div class="'+s.CSS_PREFIX+'-file-preview"></div>').remove()},_directUploadComplete:function(e){this.get("contentBox").all('<div class="'+s.CSS_PREFIX+'-file-preview"></div>').remove();if(e.media)this.set("data",new p.Squarespace.Models.ContentItem(e.media[0]));else{this.get("boundingBox").removeClass("has-preview");new p.Squarespace.Widgets.Alert({"strings.title":h("Bad File"),"strings.message":h("Unable to determine proper type information from uploaded file.")})}},_directUploadFailure:function(){this.set("data",null)}},{LANG:{TITLE_CLEAR_ASSET:h("Clear Asset"),CONFIRM_FILE_REMOVAL:h("Are you sure you want to remove this uploaded file?"),ERR_FILE_UPLOAD:h("Upload failed, please retry"),ERR_SINGLE_FILE_TITLE:h("Single File Only"),ERR_SINGLE_FILE:h("This field only accepts a single file."),HINT_FILE_UPLOAD:h("Add {type}."),HINT_FILE_UPLOAD_CLICK_ONLY:h("Click here to add {type}."),MSG_FILE_UPLOAD_OK:h("File Uploaded Successfully"),INVALID_IMAGE_TITLE:h("Invalid Image"),INVALID_IMAGE:h("The image does not have enough information to render."),ERR_INVALID_URL:h("That doesn't appear to be a valid URL."),TITLE_DOWNLOAD_IMAGES:h("Download Images from Page"),TITLE_PROCESSING_FAIL:h("Image Processing Failed"),ERR_PROCESSING_FAIL:h("We were unable to process your image.  Please try again."),DESC_DOWNLOAD_IMAGES:h("Paste the URL of a webpage with images and Squarespace will allow you to select one.")},CSS_PREFIX:"sqs-file",ATTRS:{cloneInitialData:{value:false},data:{value:null,setter:function(e){if(e){if(e instanceof p.Squarespace.Models.ContentItem)return e;if(p.Lang.isObject(e)){false;return new p.Squarespace.Models.ContentItem(p.Lang.isArray(e)?e[0]:e)}return p.Attribute.INVALID_VALUE}return null}},strings:{value:{title:""}},contentType:{value:"file"},contentLabel:{value:h("a File")},mode:{value:i.TRANSIENT},square:{value:false},spinnerColor:{value:"light"},recordType:{value:null},childType:{value:null},maxSize:{value:20},preflight:{value:null},isWordpressXmlFile:{value:false},uploadUrl:{value:null},persistTransient:{value:false,validator:p.Squarespace.AttrValidators.isBoolean},asyncUploadUrlFn:{valueFn:function(){return function(e){e(this._getUploadUrl())}.bind(this)}}}})},"1.0",{requires:["attribute","base","json","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-enum","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-util","squarespace-widgets-alert"]})},6182:function(e,t,a){YUI.add("squarespace-plugin-actionoverlay",function(n){n.namespace("Squarespace");n.Squarespace.ActionOverlayButtons={EDIT_IMAGE:"edit-image",IMAGE_INFO:"image-info",REMOVE_IMAGE:"remove-image"};n.namespace("Squarespace.Plugin").ActionOverlay=n.Base.create("ActionOverlay",n.Plugin.Base,[],{initializer:function(){this._buttonEls={};this.render();this.after("positionChange",function(){this.el&&this.el.set("className",this.constructor.CSS_NAMESPACE+" "+this.get("position"))});(this.get("anchor")||this.get("host")).on("mouseenter",this._alignEl,this)},getButtonEl:function(e){return this._buttonEls[e]},setLoadingState:function(e,t){var a=this.getButtonEl(e);if(!a){false;return}a.empty(true);if(t){this.el.addClass("loading");a.addClass("loading");new n.Squarespace.Spinner({render:a})}else{this.el.removeClass("loading");a.removeClass("loading")}},render:function(){this.el&&this.el.remove();var e=n.Node.create('<div class="'+this.constructor.CSS_NAMESPACE+" "+this.get("position")+'"></div>');for(var t=0;t<this.get("buttons").length;t++){var a=this.get("buttons")[t];var i=n.Node.create('<div class="button '+a+'"></div>');i.setAttribute("data-button-name",a);e.append(i);this._buttonEls[a]=i}this.clickEvt=e.on("click",function(e){e.halt();var t=e.target.ancestor(".button",true);if(t&&!t.hasClass("loading")){var a=t.getAttribute("data-button-name");this.fire("button-"+a,{buttonNode:t,buttonName:a})}},this);this.el=e;this._alignEl();this.get("host").addClass(this.constructor.CSS_NAMESPACE+"-container");this.get("host").append(e)},_alignEl:function(){if(this.get("anchor")&&"relative"!==this.get("anchor").getComputedStyle("position")){var e=this.get("anchor").get("region");this.el.setStyles({top:e.top,right:e.right-e.width})}},destructor:function(){this.get("host").removeClass(this.constructor.CSS_NAMESPACE+"-container");this.clickEvt.detach();this.el.remove()},getProperty:function(e){return this.constructor[e]}},{NS:"actionOverlay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{buttons:{value:[]},position:{value:"top"},anchor:{value:null}}})},"1.0",{requires:["base","node","plugin","squarespace-spinner"]})},6183:function(e,t,a){var i=a(24).t;YUI.add("squarespace-external-image-picker",function(o){var t=o.namespace("Squarespace.Widgets").ExternalImagePicker=o.Base.create("externalImagePicker",o.Squarespace.SSWidget,[o.WidgetParent],{initializer:function(e){if(!e.scrapeUrl)throw new Error(this.name+": A scrapeUrl is required in the initialization config.")},renderUI:function(){t.superclass.renderUI.call(this);this._imagePicker=new o.Squarespace.Widgets.ImagePicker({hideOnSelect:this.get("hideOnSelect"),"strings.noImages":i("No large images available at that URL.")});this.after(this.get("id")+"|hideOnSelectChange",function(e){this._imagePicker.set("hideOnSelect",e.newVal)},this);this.add(this._imagePicker)},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this._imagePicker.after(e+"|selectedImageURLChange",function(e){this._set("selectedImageURL",e.newVal)},this);this._imagePicker.after(e+"|cancel",function(e){this.fire("cancel")},this);this.on(e+"|visibleChange",this._updateVisibility,this)},syncUI:function(){t.superclass.syncUI.call(this);this._scrapeUrl()},_scrapeUrl:function(){this._imagePicker.set("dataState",this._imagePicker.getProperty("DATA_STATES").LOADING);o.Data.post({url:"/api/scrape/LocateInterestingTags",data:{url:this.get("scrapeUrl")},success:function(e){this._showLargeImages(e.images)},failure:function(e){var t=this._imagePicker.getProperty("DATA_STATES").LOAD_FAILED;this._imagePicker.set("dataState",t)}},this)},_showLargeImages:function(e){if(e&&0===e.length){this._imagePicker.setLoadedState();return}var t=this.get("id");var n=new o.Squarespace.AsyncTaskSynchronizer({completionCallback:function(e){this._imagePicker.setLoadedState()},callbackContext:this});var s=this.get("minimumImageDimensions"),r=[];o.Array.each(e,function(a){var i=new o.Squarespace.Image({src:a,loadOnSrcChange:false});i.after(t+"|loadCompleteChange",function(e){if(i.get("loadFailed"))return;if(i.get("width")>=s.width&&i.get("height")>=s.height){var t=this._imagePicker.get("imageURLs");t.push(a);this._imagePicker.set("imageURLs",t)}},this);n.add(i,"loadCompleteChange");r.push(i)},this);o.Array.each(r,function(e){e.load()},this)},_updateVisibility:function(e){if(e.silent||e.newVal===e.prevVal)return;e.preventDefault();this._imagePicker.after(this.get("id")+"|visibleChange",function(e){this.set("visible",e.newVal,{silent:true})},this);e.newVal?this._imagePicker.show():this._imagePicker.hide()},show:function(){t.superclass.show.call(this);this.set("visible",true)},hide:function(){t.superclass.hide.call(this);this.set("visible",false)}},{CSS_PREFIX:"sqs-external-image-picker",ATTRS:{visible:{value:false},scrapeUrl:{value:"",writeOnce:"initOnly"},minimumImageDimensions:{writeOnce:"initOnly",value:{height:150,width:150}},selectedImageURL:{value:null,readOnly:true},hideOnSelect:{value:true}}})},"1.0",{requires:["base","squarespace-async-task-synchronizer","squarespace-image","squarespace-image-picker","squarespace-ss-widget","squarespace-ui-base"]})},6184:function(e,t){YUI.add("squarespace-async-task-synchronizer",function(o){o.namespace("Squarespace").AsyncTaskSynchronizer=o.Base.create("asyncTaskSynchronizer",o.Base,[],{initializer:function(){this._idsToCompleted={};this.before(this.get("id")+"|completedChange",function(e){if(!e.newVal){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}},this);this.after(this.get("id")+"|completedChange",function(e){var t=this.get("completionCallback"),a=this.get("callbackContext");e.newVal&&t&&(a?t.call(a):t());this.destroy()},this)},destructor:function(){this.detach(this.get("id")+"|*");this._idsToCompleted=null},add:function(e,t,a,i){if(this.get("destroyed"))throw new Error(this.name+": This synchonizer has been used and destroyed");if(!e)throw new Error(this.name+": No eventTarget(s) provided.");1===arguments.length&&o.Lang.isArray(e)?e.forEach(function(e){this.add.apply(this,e)},this):o.Lang.isArray(e)?e.forEach(function(e){this._waitForEvent(e,t,a,i)},this):this._waitForEvent(e,t,a,i)},_allTasksCompleted:function(){return o.Array.every(o.Object.values(this._idsToCompleted),function(e){return e})},_markCompleted:function(e){if(this.get("destroyed"))return;this._idsToCompleted[e]=true;this._allTasksCompleted()&&this._set("completed",true)},_waitForEvent:function(t,e,a,i){var n=o.guid("task-"),s=false;this._idsToCompleted[n]=false;if(o.Lang.isFunction(a)){i&&o.bind(a,i);s=a(t,e)}if(s)this._markCompleted(n);else{var r=o.bind(function(e){t.on(this.get("id")+"|"+e,function(e){this._markCompleted(n)},this)},this);o.Lang.isArray(e)?o.Array.each(e,function(e){r(e)},this):r(e)}return n}},{ATTRS:{completed:{value:false,readOnly:true},completionCallback:{value:null,validator:o.Lang.isFunction},callbackContext:{value:null}}})},"1.0",{requires:["base"]})},6185:function(e,t){YUI.add("squarespace-image",function(t){var a=t.Squarespace.Image=t.Base.create("image",t.Base,[],{initializer:function(e){this._initImg();this.get("loadOnSrcChange")&&this.load()},bindUI:function(){var e=this.get("id");this.after(e+"|srcChange",function(e){this._initImg();this.get("loadOnSrcChange")&&this.load()},this)},destructor:function(){if(this._img){this._img.onload=null;this._img.onerror=null;this._img=null}t.detach(this.get("id")+"|*")},load:function(){var e=this.get("src");if(!e)throw new Error(this.name+": This image has no URL specified.");this._img.src=this.get("src")},_initImg:function(){this._setAttrs({loadComplete:a.ATTRS.loadComplete.value,loadFailed:a.ATTRS.loadFailed.value});var e=this._img=new Image;e.onload=t.bind(function(e){this._set("loadComplete",true)},this);e.onerror=t.bind(function(e){this._set("loadFailed",true);this._set("loadComplete",true)},this)},_getWidth:function(){return this._getDim("width")},_getHeight:function(){return this._getDim("height")},_getDim:function(e){var t=null;this._img&&this.get("loadComplete")&&!this.get("loadFailed")&&(t=this._img[e]);return t}},{ATTRS:{src:{value:null},width:{value:null,readOnly:true,getter:"_getWidth"},height:{value:null,readOnly:true,getter:"_getHeight"},loadOnSrcChange:{value:false},loadFailed:{value:false,readOnly:true},loadComplete:{value:false,readOnly:true}}})},"1.0",{requires:["base","base-build"]})},6186:function(e,t,a){var k=a(24).t;YUI.add("squarespace-image-picker",function(p){var h="loading",f="imageURL",m="width",v="height",u=".error",i=".instructions",b=".images",r=".preview",o=".label.width",l=".label.height",e=".ruler",c=e+".width",d=e+".height",y=".dimensions",S=y+" span",n=".size-visualizer",s=".cancel",q=".confirm",g=".prev",_=".next",C=".pagination";p.namespace("Squarespace.Widgets").ImagePickerDragPlugin=p.Base.create("imagePickerDragPlugin",p.Plugin.Base,[],{initializer:function(){this._selector=new p.SQS.DDWrappers.DragSelection({node:this.get("host").get("boundingBox")});this._selector.on(this.get("host").get("id")+"|selection-dragged",this._selectImages,this);!this.get("host").get("multiSelect")&&false},_selectImages:function(a){var e=this.get("host");var t=e.get("boundingBox").all(".images .preview");var i=e.get("selectedImageURLs");var n=e.get("maxSelected");t.each(function(e){if(i.length<n&&e.inRegion(a.region)){var t=e.getData(f);if(-1===i.indexOf(t)){i.push(t);e.addClass("selected")}}});e._set("selectedImageURLs",i)},destructor:function(){this._selector.destroy()}},{NS:"ds"});var E=p.namespace("Squarespace.Widgets").ImagePicker=p.Base.create("imagePicker",p.Squarespace.Widgets.DataWidget,[],{initializer:function(){this._displayedImages={};this.plug(p.Plugin.WidgetAnim)},destructor:function(){p.Squarespace.EscManager.removeTarget(this)},renderUI:function(){E.superclass.renderUI.call(this);var e=this.get("boundingBox"),t=this.get("strings");e.one(i).setContent(t.instructions);e.one(s).setContent(t.cancelButton);e.one(q).setContent(t.confirmButton);e.one(g).setContent("Previous");e.one(_).setContent("Next");var a=e.one(u);a.hide();a.setContent(t.loadFailed);this._updateEscapeManager();this._sizeVisualizerNode=e.one(n);this._hideSizeVisualizer()},bindUI:function(){E.superclass.bindUI.call(this);var e=this.get("id");this.on(e+"|dataStateChange",this._uiSyncDataState,this);this.after(e+"|imageURLsChange",this.syncUI,this);this.after(e+"|visibleChange",this._updateEscapeManager,this);this.after(e+"|pageChange",this.syncUI,this);var t=this.get("boundingBox");t.on(e+"|click",this._selectImage,this);t.plug(p.Squarespace.Plugin.ScrollLock);t.one(b).on(e+"|mouseleave",this._hideSizeVisualizer,this);t.one(s).on(e+"|click",function(e){this.hide();this.fire("cancel")},this);t.one(q).on(e+"|click",function(e){this.hide();this.fire("submit")},this);t.one(_).on(e+"|click",function(e){e.halt();this.set("page",this.get("page")+1)},this);t.one(g).on(e+"|click",function(e){e.halt();this.set("page",this.get("page")-1)},this)},syncUI:function(){E.superclass.syncUI.call(this);var e=this.get("contentBox"),s=e.one(b),i=this.get("imageURLs").slice(0),g=this.get("strings");this.get("sizeInfo")?e.addClass("has-size-info"):e.removeClass("has-size-info");if(this.get("paginate")){var t=this.get("pageSize");var a=this.get("page")*t;var n=a+t;var r=Math.min(n,i.length);var o=e.one(".prev");this.get("page")<=0?o.addClass("hidden"):o.removeClass("hidden");var l=e.one(_);a+t>=i.length?l.addClass("hidden"):l.removeClass("hidden");i=i.slice(a,r)}var c=e.one(q);this.get("multiSelect")?c.show():c.hide();p.Object.each(this._displayedImages,function(e,t){if(-1===i.indexOf(t)){var a=s.one('[data-id="'+this._displayedImages[t]+'"]');if(a){a.ancestor(".preview",true).remove(true);this._displayedImages[t]=null}}},this);p.Array.each(i,function(e){var c=this.get("id");if(this._displayedImages[e])return;this.get("dataState")!==this.getProperty("DATA_STATES").LOADED&&this.setLoadedState();var d=p.Node.create(this.getProperty("IMAGE_TEMPLATE"));var u=d.one("img");d.setData(f,e);s.appendChild(d);this.get("multiSelect")&&-1!==this.get("selectedImageURLs").indexOf(e)&&d.addClass("selected");u.onceAfter(c+"|load",function(e){var t=e.target.get("naturalHeight"),a=e.target.get("naturalHeight");d.one(S).setContent(p.substitute(g.imageDimensions,{height:a,width:t}));d.setData(m,t);d.setData(v,a);var i=d.one(".image-underlay");var n=i.width();var s=i.height();var r=e.target.get("width");var o=e.target.get("height");var l=2;d.one(".image-wrapper").setStyles({width:r+2*l,height:o+2*l,top:Math.floor(s/2-o/2),left:Math.floor(n/2-r/2)});u.setStyles({top:null,left:null,position:"static"});d.on(c+"|mouseenter",this._updateSizeVisualizer,this)},this);u.plug(p.Squarespace.Loader2,{source:e,fit:true});var t=u.loader,a=d.one(y);var i=function(){t.get("loading")?a.addClass(h):a.removeClass(h)};i();t.after(c+"|loadingChange",i,this);var n=u.getAttribute("data-id");if(!n){n=p.guid();u.setAttribute("data-id",n)}this._displayedImages[e]=n},this);i.length>0&&e.one(u).hide();var d=e.one(C);this.get("paginate")?d.show():d.hide()},_uiSyncDataState:function(e){var t=e?e.newVal:this.get("dataState"),a=this.getProperty("DATA_STATES"),i=this.get("contentBox").one(u),n=this.get("imageURLs"),s=this.get("strings");switch(t){case a.LOADED:if(0===n.length){i.setContent(s.noImages);i.show()}break;case a.LOAD_FAILED:i.setContent(s.loadFailed);i.show();break;default:i.hide();break}},_isImageWrapper:function(e){return!!e.getData(f)},_selectImage:function(e){e.preventDefault();e.stopPropagation();var t=e.target.ancestor(this._isImageWrapper,true);var a=this.get("contentBox").one(b);var i=this.get("selectedImageURLs");var n=this.get("multiSelect");if(!t){if(n){this._set("selectedImageURLs",[]);this.get("contentBox").all(".preview.selected").each(function(e){e.removeClass("selected")})}return}var s=t.getData(f);if(n)if(i.length>=this.get("maxSelected"))new p.Squarespace.Widgets.Alert({"strings.title":k("Too Many Images"),"strings.message":k("You have selected the maximum number of images allowed. Please remove an image before selecting another.")});else{t.hasClass("selected")?i=p.Array.filter(i,function(e){return e!==s}):i.push(s);t.toggleClass("selected");this._set("selectedImageURLs",i)}else{t.addClass("selected");a.all(r).removeClass("selected");this._set("selectedImageURL",s)}this.get("hideOnSelect")&&this.hide()},_updateSizeVisualizer:function(e){if(!this._sizeVisualizerNode)return;var t=e.target.ancestor(this._isImageWrapper,true),a=t.getData(m),i=t.getData(v),n=this._sizeVisualizerNode.one(o),s=this._sizeVisualizerNode.one(l);n.setContent(a+"px");s.setContent(i+"px");n.setStyle("left",a-38);s.setStyle("top",i-20);this._sizeVisualizerNode.show();this._sizeVisualizerNode.one(c).setStyle("width",a);this._sizeVisualizerNode.one(d).setStyle("height",i)},_hideSizeVisualizer:function(){if(!this._sizeVisualizerNode)return;this._sizeVisualizerNode.hide()},_updateEscapeManager:function(){this.get("visible")?p.Squarespace.EscManager.addTarget(this):p.Squarespace.EscManager.removeTarget(this)}},{CSS_PREFIX:"sqs-image-picker",HANDLEBARS_TEMPLATE:"image-picker.html",IMAGE_TEMPLATE:'<div class="preview"><div class="image-underlay"><div class="dimensions"><span></span></div><div class="image-wrapper"><img /></div></div></div>',ATTRS:{visible:{value:false},strings:{value:{instructions:k("Select an Image"),cancelButton:k("Cancel"),loadFailed:k("Unable to load images, please check the URL and try again later."),noImages:k("No images available."),imageDimensions:k("{width} x {height}"),confirmButton:k("Confirm")}},imageURLs:{value:[],validator:p.Lang.isArray},selectedImageURL:{value:null,readOnly:true},selectedImageURLs:{value:[],readOnly:true},hideOnSelect:{value:true},multiSelect:{value:false},maxSelected:{value:Number.MAX_VALUE,validator:p.Lang.isNumber},paginate:{value:false},pageSize:{value:25},page:{value:0,validatore:p.Lang.isNumber},sizeInfo:{value:true}}})},"1.0",{requires:["base","plugin","squarespace-async-task-synchronizer","@sqs/yui-dd-wrappers/drag-selection","squarespace-escmanager","squarespace-image","squarespace-image-loader","squarespace-image-picker-template","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-data-widget","widget","widget-anim","widget-parent"]})},6187:function(e,t){YUI.add("@sqs/yui-dd-wrappers/drag-selection",function(c){c.namespace("SQS.DDWrappers").DragSelection=c.Base.create("dragSelection",c.Base,[c.SQS.DDWrappers.DragSelectionSelectorBlackList],{initializer:function(e){var t=this.get("id");this._debug=false;this._selectionNode=c.Node.create("<div></div>");this._selectionNode.addClass("squarespace-selection").setAttribute("data-selection-id",t);this._dragClassName="drag-selection-dragging";this.addcss("<style>.squarespace-selection {   background: rgba(0,0,0,0.08);   border: solid 1px white;   position: absolute;   z-index: 99999999999; } body.drag-selecting, body.drag-selection-dragging {   -webkit-user-select: none;   -moz-user-select: none; body.drag-selecting *, body.drag-selection-dragging * {   cursor: default !important; }</style>");this.publish("selection-started",{preventable:true,defaultFn:this._initSelection,context:this,broadcast:2});this._bindUI()},addcss:function(e){var t=c.config.doc.getElementsByTagName("head")[0];var a=c.config.doc.createElement("style");a.setAttribute("type","text/css");a.styleSheet?a.styleSheet.cssText=e:a.appendChild(c.config.doc.createTextNode(e));t.appendChild(a)},destructor:function(){c.Array.invoke(this.get("eventListeners"),"detach");this._selectionNode.remove(true);this._selectionNode=null;c.detachAll(this.get("id")+"|*");if(this._activationSub){this._activationSub.detach();this._activationSub=null}},_bindUI:function(){this._activationSub&&this._activationSub.detach();this._activationSub=this.get("node").on("mousedown",this._onMouseDown,this)},_onMouseDown:function(t){if(this.get("enabled")&&!t.target.hasClass("sqs-layout-insert-point")){if(this.get("dragging")||1!==t.button)return;this._origin={x:t.pageX,y:t.pageY};if(!this._pointInActivationRegion(this._origin.x,this._origin.y))return;if(!this._mouseDownInValidRegion(t))return;this._registerEvent(c.one(c.config.win).once("mouseup",this._endSelection,this));this._mouseMoveGuard=this.get("node").once("mousemove",function(e){this.fire("selection-started",{originalMousedown:t});this._debug&&console.info("selection-started")},this);this._registerEvent(this._mouseMoveGuard)}},_registerEvent:function(){if(c.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)c.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])},_initSelection:function(e){var t=e.originalMousedown;this._drawSelection(t.pageX,t.pageY);c.one("body").addClass(this._dragClassName).appendChild(this._selectionNode);this._mouseMoveSubscription=c.one(c.config.win).on("mousemove",this._dragSelection,this);this.clearTextSelection()},clearTextSelection:function(){c.config.win.getSelection?c.config.win.getSelection().empty?c.config.win.getSelection().empty():c.config.win.getSelection().removeAllRanges&&c.config.win.getSelection().removeAllRanges():c.config.doc.selection&&c.config.doc.selection.empty()},_dragSelection:function(e){if(!this.get("enabled"))return;if(!this._origin)return;e.halt();this._drawSelection(e.pageX,e.pageY);this.fire("selection-dragged",{region:this._selectionNode.get("region"),originalMousemove:e});this._debug&&console.info("selection-dragged")},_drawSelection:function(e,t){this._debug&&console.info("Updated selection drawing.");var a=this.get("boundingRegion");var i=this._origin;var n={x:e,y:t};var s=n.x>i.x?i.x:n.x;var r=n.x>i.x?n.x:i.x;var o=n.y>i.y?i.y:n.y;var l=n.y>i.y?n.y:i.y;if(a){a.top&&(o=o<a.top?a.top:o);a.bottom&&(l=l>a.bottom?a.bottom:l);a.left&&(s=s<a.left?a.left:s);a.right&&(r=r>a.right?a.right:r)}this._selectionNode.setStyles({top:o+1,left:s+1,right:c.config.doc.body.offsetWidth-r,bottom:c.config.win.innerHeight-l})},_endSelection:function(e){if(this._mouseMoveGuard){this._mouseMoveGuard.detach();this._mouseMoveGuard=null}e&&e.halt();if(this._mouseMoveSubscription){this._mouseMoveSubscription.detach();delete this._mouseMoveSubscription}this._origin&&delete this._origin;c.one("body").removeClass(this._dragClassName);this.fire("selection-complete",{region:this._selectionNode.get("region"),originalMouseup:e});this._selectionNode.setStyles({top:null,left:null,right:null,bottom:null});this._selectionNode.remove();this._debug&&console.info("selection-complete")},_mouseDownInValidRegion:function(e){var t=this.get("invalidRegions");for(var a=0;a<t.length;a++){var i=t[a];if(!i)continue;if("string"===typeof i){if(e.target.ancestor(i,true))return false}else{i=this._getRegion(i);if(this._pointInRegion(this._origin.x,this._origin.y,i))return false}}return true},_pointInActivationRegion:function(e,t){var a=this.get("activationRegion");if(!a)return true;return this._pointInRegion(e,t,a)},_pointInRegion:function(e,t,a){if(a.top&&a.right&&a.bottom&&a.left)return e>=a.left&&e<=a.right&&t>=a.top&&t<=a.bottom;if(a.left&&e<a.left)return false;if(a.right&&e>a.right)return false;if(a.top&&t<a.top)return false;if(a.bottom&&t>a.bottom)return false;return true},_getRegion:function(e){if(c.instanceOf(e,c.Node))return e.get("region");return e},_getNode:function(e){if(!e)throw new Error(this.name+": The node attr is required.");if(!c.Lang.isString(e)&&!c.instanceOf(e,c.Node))throw new Error(this.name+": The node attr must be a Y.Node instance or selector string.");c.Lang.isString(e)&&(e=c.one(e));return e},_getDragging:function(){var e=c.one("body");if(e)return e.hasClass(this._dragClassName);return false},_setEnabled:function(e){this._activationSub&&this._activationSub.detach();e?this._bindUI():this.get("dragging")&&this._endSelection();c.one("body").addClass(e?"drag-selection-enabled":"drag-selection-disabled").removeClass(e?"drag-selection-disabled":"drag-selection-enabled");return e},enable:function(){this.set("enabled",true)},disable:function(){this.set("enabled",false)}},{ATTRS:{node:{writeOnce:true,value:null,getter:"_getNode",validator:function(e){if(!c.Lang.isString&&!(e instanceof c.Node))throw new Error(this.name+": node attr must be a node or selector string.");return true}},boundingRegion:{value:null,getter:"_getRegion"},activationRegion:{value:null,getter:"_getRegion"},enabled:{value:true,setter:"_setEnabled"},eventListeners:{value:[]},dragging:{value:false,valueFn:"_getDragging",getter:"_getDragging",readOnly:true},invalidRegions:{value:[]}}})},"1.0",{requires:["anim","array-invoke","base","node","@sqs/yui-dd-wrappers/drag-selection-selector-blacklist"]})},6188:function(e,t){YUI.add("@sqs/yui-dd-wrappers/drag-selection-selector-blacklist",function(t){t.namespace("SQS.DDWrappers");t.SQS.DDWrappers.DragSelectionSelectorBlackList=t.Base.create("dragSelectionSelectorBlackList",t.Base,[],{_getInvalidRegions:function(e){return e.concat(this.get("selectorBlacklist"))}},{ATTRS:{invalidRegions:{value:[],getter:"_getInvalidRegions"},selectorBlacklist:{valueFn:function(){var e=[".dialog-screen-overlay",".mode-visual",".mode-source",".content-title .add-content",".config-panel-wrapper","input","object",".dropdown select",".sqs-disable-drag-selection",".CodeMirror",".sqs-surrounding-overlay",".dialog-editproduct",".dialog-producttype",".sqs-action-tray",".sqs-layout-insert-point",".sqs-action-overlay","button",".sqs-uploader",".standard-dialog-wrapper > .main-container > .title-block",".standard-dialog-wrapper > .main-container > .controls-block",".cke_button",".cke_dialog",".cke_dialog_background_cover",".flyout-link-edit-content",".rte",".rte-menu"];t.SQS.DDWrappers.STANDARD_CONTROL_CLASSES&&(e=e.concat(t.SQS.DDWrappers.STANDARD_CONTROL_CLASSES));e=t.Array.dedupe(e);e=t.Array.filter(e,function(e){return".standard-dialog-wrapper"!==e});return e}}}})},"1.0",{requires:["base"]})},6189:function(e,t){YUI.add("squarespace-image-picker-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["image-picker.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<div class="header">\n  <div class="instructions"></div>\n  <div class="controls">\n    <div class="cancel"></div>\n    <div class="confirm"></div>\n  </div>\n  <div class="information">\n    <div class="error"></div>\n    <div class="sqs-spin light extra-large"></div>\n  </div>\n  <div class="images"></div>\n  <div class="pagination">\n    <span class="prev"></span>\n    <span class="next"></span>\n  </div>\n  <div class="size-visualizer">\n      <div class="ruler height"></div>\n      <div class="ruler width"></div>\n      <div class="label height"></div>\n      <div class="label width"></div>\n  </div>\n</div>'})})();var t="image-picker.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6190:function(e,t,a){var i=a(1172);var n=a(815);var s=a(1391);var r=a(664);YUI.add("squarespace-job-manager",function(a){a.namespace("Squarespace");a.Squarespace.JobManager=a.Base.create("JobManager",a.Base,[],{initializer:function(){this.recentJobs={};this.currentJobs={};this.completedJobs={};this.failedJobs={};this.publish("opened");this.publish("started");this.publish("completed");this.publish("failed");a.config.win.Static.SQUARESPACE_CONTEXT?this.processExistingJobs(a.config.win.Static.SQUARESPACE_CONTEXT):i.addActionListener(n.BOOTSTRAP,this.processExistingJobs.bind(this));i.addActionListener(s.LOAD_SUCCESS,this.onJobsLoad.bind(this));i.addActionListener(s.DELETE,this.removeJobById.bind(this))},getSize:function(){return a.Object.keys(this.currentJobs).length},completedJobsCount:function(){return a.Object.keys(this.completedJobs).length},failedJobsCount:function(){return a.Object.keys(this.failedJobs).length},onJobsLoad:function(e){e.forEach(function(e){var t=this.findInQueue(e.id);t&&setTimeout(function(){t.update(e)},0)}.bind(this))},onJobStart:function(e){var t=e.target;this.fire("started",{job:t})},onJobSuccess:function(e){this._processSucessfulJob(e.target)},_processSucessfulJob:function(e){var t=e.get("id");this.completedJobs[t]=e;this.removeFromQueue(t);this.fire("completed",{job:e})},onJobFailure:function(e){var t=e.target,a=t.get("id");this.failedJobs[a]=t;this.removeFromQueue(a);this.fire("failed",{job:t})},onJobOpen:function(e){var t=e.target,a=t.get("id");this.currentJobs[a]=t;this.fire("opened",{job:t})},removeFromQueue:function(e){a.Object.hasKey(this.currentJobs,e)&&delete this.currentJobs[e]},findJob:function(e){var t=[this.findInQueue,this.findCompletedJob,this.findFailedJob];for(var a=0;a<t.length;++a){var i=t[a];var n=i.call(this,e);if(n)return n}return null},findInQueue:function(e){return this.currentJobs[e]},findCompletedJob:function(e){return this.completedJobs[e]},findFailedJob:function(e){return this.failedJobs[e]},resolveIds:function(e){var t=[];for(var a=0;a<e.length;++a){var i=this.findJob(e[a]);i&&t.push(i)}return t},addJob:function(e){this._subscribeToJob(e);this.currentJobs[e.get("id")]=e;s.monitor(e.get("id"))},_subscribeToJob:function(e){e.after("start",this.onJobStart,this);e.after("complete",this.onJobSuccess,this);e.after("failure",this.onJobFailure,this);e.after("open",this.onJobOpen,this)},totalJobs:function(){return[this.completedJobs,this.failedJobs,this.currentJobs].map(function(e){return a.Object.keys(e).length}).reduce(function(e,t){return e+t})},allJobs:function(){return a.Object.values(a.merge(this.completedJobs,this.failedJobs,this.currentJobs,this.recentJobs))},removeJobById:function(e){delete this.completedJobs[e];delete this.failedJobs[e];delete this.currentJobs[e];delete this.recentJobs[e]},processExistingJobs:function(e){e&&e.pendingJobs&&e.pendingJobs.forEach(function(e){var t=this._jobDataToJob(e);this.currentJobs[t.get("id")]=t;this._subscribeToJob(t);t.get("status")===r.SUCCESS&&this._processSucessfulJob(t)},this);e&&e.recentJobs&&e.recentJobs.forEach(function(e){var t=this._jobDataToJob(e);this.recentJobs[t.get("id")]=t},this)},_jobDataToJob:function(e){var t=new a.Squarespace.Job(a.merge(e,{messages:e.messages?e.messages.map(function(e){return new a.Squarespace.JobMessage(e)}):[]}));return t}});if(a.Squarespace.Utils.isInDamaskFrame()){a.config.win.Static.JOB_MANAGER=a.Squarespace.Damask.ContextGlobals.fromTop("Y.config.win.top.Static.JOB_MANAGER");false}else{a.config.win.Static.JOB_MANAGER=new a.Squarespace.JobManager;false}},"1.0",{requires:["base","squarespace-beforeunload","squarespace-damask-context-globals","squarespace-jobs","squarespace-util"]})},6191:function(e,t,a){var i=a(24).t;var o=a(664);YUI.add("squarespace-jobs",function(s){s.namespace("Squarespace");var t={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};var r=s.Squarespace.JobMessage=s.Base.create("jobMessage",s.Base,[],{},{ATTRS:{level:{validator:s.Lang.isNumber},date:{validator:s.Lang.isDate},message:{validator:s.Lang.isString,value:""}}});s.Squarespace.Job=s.Base.create("job",s.Model,[],{initializer:function(e){this.set("data",s.merge({},e.data));this.publish("open",{defaultFn:this.onOpen,context:this});this.publish("start",{defaultFn:this.onStart,context:this});this.publish("complete",{defaultFn:this.onComplete,context:this});this.publish("failure",{defaultFn:this.onFailure,context:this});this.publish("update",{defaultFn:this.onUpdate,context:this})},getData:function(){return{name:this.get("name"),id:this.get("id"),status:this.get("status"),type:this.get("type"),data:this.get("data")}},update:function(e){var t=e.status;var a=this.get("data");var i=this.get("status");e.data&&(a=this.set("data",s.merge({},e.data)).get("data"));e.childJobs&&this.set("childJobs",e.childJobs);a&&a.update&&this.fire("update",this);var n=e.update?e.update.numFailed:0;t!==o.SUCCESS&&this.getItemCount()<=this.getCompletedItemCount()+this.get("failedItems")+n&&(t=o.SUCCESS);this.set("progress",e.progress);e.messages&&this.set("messages",e.messages.map(function(e){return new r(s.merge(e,{date:new Date(e.date)}))}));this.set("addedOn",new Date(e.addedOn));if(t!==i){t&&this.set("status",t);this.set("statusMessage",e.statusMessage);i=this.get("status");if(i!==o.WAITING&&!this.get("started")){this.fire("start",this);this.set("started",true)}switch(i){case o.SUCCESS:this.fire("complete",this);break;case o.FAILURE:this.fire("failure",this);break}}},setCollection:function(e){this.set("collection",e)},getItemCount:function(){return 1},getCompletedItemCount:function(){if(this.get("status")===o.SUCCESS)return 1;return 0},opened:function(){this.fire("open",this)},onOpen:function(){},onComplete:function(){},onStart:function(){},onFailure:function(){}},{ATTRS:{name:{value:""},progress:{value:0,validator:s.Lang.isNumber},lastError:{value:"",readOnly:true,getter:function(){if(!s.Lang.isValue(this.get("messages")))return null;var e=this.get("messages").filter(function(e){return e.get("level")===t.ERROR}).sort(function(e,t){return s.DataType.Date.isGreater(t.get("date"),e.get("date"))});return e.length?e.shift().get("message"):"Error"}},collection:{setter:function(e){var t=this.get("data");e&&(t.collectionId=e.getId())}},status:{value:o.WAITING},statusMessage:{value:"",setter:function(e){return e||""}},messages:{validator:s.Lang.isArray},updateData:{value:null},data:{},failedItems:{value:0},type:{},childJobs:{value:[],validator:s.Lang.isArray},addedOn:{setter:function(e){return s.Lang.isDate(e)?e:new Date(e)}}}});s.Squarespace.ImageProcessingJob=s.Base.create("imageProcessingJob",s.Squarespace.Job,[],{setNumFiles:function(e){var t=this.get("data");t.numFiles=e},setBatchId:function(e){var t=this.get("data");t.batchId=e},getItemCount:function(){return this.get("data").numFiles},getCompletedItemCount:function(){if(!this.processedItems)return 0;return this.processedItems.length},getProcessedItems:function(){return this.processedItems.slice(0)},onUpdate:function(){var e=this.get("data");if(e&&e.update&&e.update.newProcessedItems){this.processedItems||(this.processedItems=[]);Array.prototype.push.apply(this.processedItems,e.update.newProcessedItems)}},incrementFailedItemCount:function(){var e=this.get("failedItems");this.set("failedItems",e+1)}},{ATTRS:{type:{value:s.Squarespace.JobTypes.IMAGE_PROCESSING},started:{value:false}}});s.Squarespace.AudioProcessingJob=s.Base.create("AudioProcessingJob",s.Squarespace.ImageProcessingJob,[],{},{ATTRS:{type:s.Squarespace.JobTypes.AUDIO_PROCESSING}});s.Squarespace.WordpressExportJob=s.Base.create("wordpressExportJob",s.Squarespace.Job,[],{onComplete:function(){s.Squarespace.Navigation.ListUtils.refreshNavigationList();new s.Squarespace.Widgets.Information({"strings.title":i("Export Complete"),"strings.message":i("Your export has finished and your content can be downloaded in the Import / Export panel.")})}},{ATTRS:{type:{value:s.Squarespace.JobTypes.EXPORTING_WORDPRESS}}});s.Squarespace.ImportingJob=s.Base.create("importingJob",s.Squarespace.Job,[],{onComplete:function(){s.Squarespace.Navigation.ListUtils.refreshNavigationList();new s.Squarespace.Widgets.Information({"strings.title":i("Import Complete"),"strings.message":i("Your import has finished and your content can be found in the Content Library.")})}},{ATTRS:{type:{value:s.Squarespace.JobTypes.IMPORTING}}});s.Squarespace.StatsMigrationJob=s.Base.create("statsMigrationJob",s.Squarespace.Job,[],{onComplete:function(){new s.Squarespace.Widgets.Information({"strings.title":i("Migration Complete"),"strings.message":i("Your legacy statistics have been migrated and analysis has begun.")})}},{ATTRS:{type:{value:s.Squarespace.JobTypes.STATS_MIGRATION}}});s.Squarespace.PushJob=s.Base.create("pushJob",s.Squarespace.Job,[],{},{ATTRS:{type:{value:s.Squarespace.JobTypes.PUSH}}});s.Squarespace.CollectionSyncJob=s.Base.create("collectionSyncJob",s.Squarespace.Job,[],{onComplete:function(){new s.Squarespace.Widgets.Information({"strings.title":this.get("strings.successTitle"),"strings.message":this.get("strings.successMessage")});this._setCollectionSyncState(false);var e=s.Squarespace.ACTIVE_MANAGER;e.getActiveCollectionManager&&e.getActiveCollection().getId()===this.get("data.collectionId")&&e.getActiveCollectionManager().refreshPage()},onFailure:function(){new s.Squarespace.Widgets.Information({"strings.title":this.get("strings.failureTitle"),"strings.message":this.get("strings.failureMessage")});this._setCollectionSyncState(false)},_setCollectionSyncState:function(e){var t=this.get("data.collectionId");var a=s.Squarespace.ContentCollectionCache.getById(t);a&&a.set("synchronizing",e)}},{ATTRS:{strings:{value:{successTitle:i("Sync Completed"),successMessage:i("Collection sync completed. Your images may still be processing. This can take several minutes to complete."),failureTitle:i("Sync Failed"),failureMessage:i("Collection sync failed.")}},type:{value:s.Squarespace.JobTypes.COLLECTION_SYNC}}})},"1.0",{requires:["base","datatype-date-math","event","model","squarespace-models-content-collection","squarespace-navigation-list-utils","squarespace-upsell-product-violations","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information"]})},6192:function(e,t,a){var i=a(229);var s=a(3476);YUI.add("squarespace-navigation-list-utils",function(n){n.namespace("Squarespace.Navigation");n.Squarespace.Navigation.ListUtils={refreshNavigationList:function(){n.Data.get({url:"/api/commondata/GetSiteLayout",success:function(e){var i={};n.Squarespace.Singletons.TemplateNavigationList.each(function(e){i[e.name]=e});e.layout.forEach(function(e){var t=i[e.identifier];if(t){var a={};t.itemList.forEach(function(e){var t=e.collectionId;t?a[t]=e:a[e.externalLink.url]=e});e.links.forEach(function(e){n.Lang.isValue(e.collectionId)&&n.Object.hasKey(a,e.collectionId)||n.Object.getValue(e,["externalLink","url"])&&n.Object.hasKey(a,e.externalLink.url)||t.itemList.push(e)})}else n.Squarespace.Logger.log("Missing Navigation",{message:'Could not locate "'+e.identifier+'" in Y.Squarespace.NavigationUIUtils',action:"refreshNavigationList",fileName:"content-manager/navigation-ui-utils.js"})})}})},getParentCollection:function(e){var t=n.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!t){false;return false}var a=t.getFolderItemList();if(!a)return false;var i=a.getNavigationItem();if(!i||!i.get("collectionId"))return false;return i.get("collection")},getCollectionIndexInIndex:function(e){var t=n.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!t)return-1;var a=t.getFolderItemList();if(!a)return-1;var i=a.getNavigationItem();if(!i||!i.get("collectionId"))return-1;return i.get("children")._items.indexOf(t)},indexCollectionRequiresReload:function(e){!this.isCollectionAnIndex(e)&&this.isCollectionInIndex(e)&&(e=n.Squarespace.Navigation.ListUtils.getParentCollection(e));var t=e.getTemplateConfiguration();var a=t.get("indexType");return a===s.FULL_URL||!n.Lang.isValue(a)},isCollectionInIndex:function(e){var t=n.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return n.Squarespace.Navigation.ListUtils.isCollectionAnIndex(t)},isCollectionAnIndex:function(e){if(!e)return false;var t=e.getTemplateConfiguration();if(t.get("index"))return true;var a=t.get("indexType");var i=n.Object.values(s);return-1!==i.indexOf(a)},isCollectionAStackedIndex:function(e){if(!e)return false;var t=e.getTemplateConfiguration();return t.get("indexType")===s.STACKED},isCollectionAPortfolio:function(e){if(!e)return false;var t=e.getTemplateConfiguration();return t.get("collectionType")===i.PORTFOLIO||t.get("indexType")===s.GRID},isCollectionInPortfolio:function(e){if(!e)return false;var t=n.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return n.Squarespace.Navigation.ListUtils.isCollectionAPortfolio(t)},isCollectionInStackedIndex:function(e){if(!e)return false;var t=n.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return n.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(t)},getIndexCollectionForCollection:function(e){if(this.isCollectionAnIndex(e))return e;if(this.isCollectionInIndex(e)){var t=n.Squarespace.Navigation.ListUtils.getParentCollection(e);return t}return null}}},"1.0",{requires:["squarespace-data","squarespace-logger","squarespace-models-template-navigation-list"]})},6193:function(e,t,a){var i=a(24).t;var n=a(1943);var s=a(1595);var o=a(565);var l=a(114);var c=a(87);var d=a(1236);var u=a(207);YUI.add("squarespace-models-template-navigation-list",function(r){var e=r.Base.create("TemplateNavigation",r.Model,[],{toJSON:function(){var e=this.constructor.superclass.toJSON.call(this);return e},_setItemList:function(e){r.Lang.isObject(e)&&(e=this.constructor.ATTRS.itemList.valueFn.call(this));var i=new r.Squarespace.Models.NavigationItemList;i.setTemplateNavigation(this);r.Array.forEach(e,function(e){var t=r.clone(e.children,true);delete e.children;var a=i.add(e);a.set("children",t||[])},this);return i},setTemplateNavigationList:function(e){this._templateNavigationList=e},getTemplateNavigationList:function(){return this._templateNavigationList}},{ATTRS:{index:{validator:r.Lang.isBoolean},name:{},title:{},itemList:{lazyAdd:false,value:[],valueFn:function(){var e=this.get("name");var t=n.getState()[e];var a=t&&t.links?o(t.links):[];return a},setter:"_setItemList"},acceptTypes:{valueFn:function(){var t=["subscription","gallery-block","template-page"];var e=s.getState().collectionConfigs;return r.Array.filter(r.Object.keys(e),function(e){return-1===t.indexOf(e)}).concat(["link"])}},emptyMessage:{valueFn:function(){return i("This navigation is empty")}}}});var t=r.Base.create("TemplateNavigationList",r.ModelList,[],{model:e,initializer:function(){this._bootstrapNewList();s.listen(function(){if(s.getState().installationId!==this.get("installationId")){this.reset(s.getState().navigations);this.set("installationId",s.getState().installationId);this.set("templateId",s.getState().id)}}.bind(this));this.after("reset",this._bootstrapNewList);this.after("add",function(e){this._bootstrapReference(e.model)},this)},isValidNavigationName:function(e){return r.Lang.isValue(this.getNavigation(e))},getNavigation:function(t){var e=this.toArray();return r.Array.find(e,function(e){return e.get("name")===t})},destructor:function(){if(this._memberAreaNavigation){this._memberAreaNavigation.destroy();this._memberAreaNavigation=null}this._hiddenNavigation.destroy();this._hiddenNavigation=null},_bootstrapReference:function(e){e.setTemplateNavigationList(this)},_bootstrapNewList:function(){this._createMemberAreaNavigation();this._createHiddenNavigation();this.each(function(e){this._bootstrapReference(e)},this)},_createMemberAreaNavigation:function(){if(!l.isFeatureEnabled(c.MEMBER_AREAS_BETA_V2))return;this._memberAreaNavigation&&this._memberAreaNavigation.destroy();this._memberAreaNavigation=this.add({index:false,name:d.memberAreaNavigationName,title:i("Member Areas"),className:"member-areas",emptyMessage:null,description:i('Create content for members only. <a href="{kbNotLinkAction}" target="_blank">Learn more</a>',{kbNotLinkAction:u.PAGE_NOT_LINKED}),acceptTypes:[d.MEMBER_AREA_NAVIGATION_TYPE]})},_createHiddenNavigation:function(){this._hiddenNavigation&&this._hiddenNavigation.destroy();this._hiddenNavigation=this.add({index:false,name:d.hiddenNavigationName,title:i("Not Linked"),emptyMessage:i("There are no unlinked pages."),description:i('These pages are public unless they’re disabled or password-protected, but they don’t appear in the navigation. Search engines can also discover them. <a href="{kbNotLinkAction}" target="_blank">Learn more</a>',{kbNotLinkAction:u.PAGE_NOT_LINKED})})},getHiddenNavigation:function(){return this._hiddenNavigation},getMemberAreaNavigation:function(){return this._memberAreaNavigation},_getNavigationItemForCollectionIdFromList:function(e,t){var a=e.toArray();for(var i=0;i<a.length;i++){if(a[i].get("collectionId")===t)return a[i];var n=a[i].get("children");if(n&&!n.isEmpty()){var s=this._getNavigationItemForCollectionIdFromList(n,t);if(r.Lang.isValue(s))return s}}},getItemByCollectionId:function(e){var t=this.toArray();for(var a=0;a<t.length;a++){var i=this._getNavigationItemForCollectionIdFromList(t[a].get("itemList"),e);if(r.Lang.isValue(i))return i}},getNavigationItemCount:function(){return this.get("itemList").reduce(function(e,t){return e+t.getTotalSize()},0)}},{ATTRS:{templateId:{},installationId:{},acceptTypes:{value:[]}}});if(r.Squarespace.Utils.isInDamaskFrame())r.Squarespace.Singletons.TemplateNavigationList=r.Object.getValue(r.config.win.top,"Y.Squarespace.Singletons.TemplateNavigationList".split("."));else{var a=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","navigations"]);a&&(r.Squarespace.Singletons.TemplateNavigationList=new t({items:a,templateId:r.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","id"]),installationId:r.Object.getValue(Static,["SQUARESPACE_CONTEXT","installationId","id"])}))}},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-models-navigation","squarespace-util"]})},6194:function(e,t,a){var o=a(24).t;var l=a(1595);var c=a(229);var d=a(3067);var i=a(5995);var u=a(643);YUI.add("squarespace-models-navigation",function(s){var r=false;var e=s.Base.create("NavigationItem",s.Model,[],{initializer:function(){this._events=[];this.get("collection")&&this._events.push(this.get("collection").after("navigationTitleChange",function(e){this.set("title",e.newVal)},this))},destructor:function(){s.Array.invoke(this._events,"detach")},sync:function(e,t,a){if("delete"===e)this.get("collection")?this.get("collection").destroy(s.merge(t,{remove:true}),a):this.getNavigationItemList().save(t,a);else if("create"===e||"save"===e){this._updateChildren();this.getNavigationItemList().save(t,a)}},destroy:function(t,e){if("function"===typeof t){e=t;t=null}this.onceAfter("destroy",function(){s.Array.each(this.lists.concat(),function(e){e.remove(this,t)},this);t&&(t.remove||t.delete)?this.sync("delete",t,e):e&&e.apply(null,arguments)});return this.constructor.superclass.destroy.call(this)},toJSON:function(e){var t=this.constructor.superclass.toJSON.call(this);e?delete t.collection:t.collection&&(t.collection=t.collection.toJSON());if(t.children){t.items=t.children.toJSON(e);delete t.children}delete t.duplicated;return t},isFolder:function(){if(this.get("collectionId")&&!this.get("children").isEmpty())return true;if(this.get("collection")){var e=this.get("collection").getTemplateConfiguration();if(e&&e.get("folder"))return true;return false}if(this.get("memberAreaId"))return true;return false},isLink:function(){return s.Lang.isValue(this.get("externalLink"))&&!s.Lang.isValue(this.get("collection"))},isMemberArea:function(){var e=this.get("memberAreaId");return u(e)&&e.length>0},_setChildren:function(e){if(!e)return;var t=this.get("collection");this.get("collectionId")&&t&&t.get("type")===c.TEMPLATE_PAGE&&(e=[]);var a;s.Lang.isValue(t)&&(a=t.getTemplateConfiguration().get("acceptTypes"));var i;if(s.Lang.isArray(e))i=new n({acceptTypes:a});else if(s.instanceOf(e,n)){i=e;i.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation())}i.setNavigationItem(this);if(i&&this._navigationItemList){i.setTemplateNavigation(this._navigationItemList.getTemplateNavigation());i.setNavigationItemList(this._navigationItemList)}if(!i)throw new Error("Can't set navigation that isn't an instanceOf FolderItemList.");if(s.Lang.isArray(e)&&0!==e.length){i.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation());s.Array.each(e,function(e){var t=e.children;t&&delete e.children;var a=i.add(e);t&&a.set("children",t)})}return i},setNavigationItemList:function(e){if("NavigationItemList"!==e.name)throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");var t=this.get("children");t&&t.setNavigationItemList(e);this._navigationItemList=e},getNavigationItemList:function(){var e=this._navigationItemList;if(!e)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return e},setFolderItemList:function(e){if(!s.instanceOf(e,n)&&!s.Lang.isNull(e))throw new Error("Cant set a folder ItemList that isn't a folder.");this._folderItemList=e},getFolderItemList:function(){return this._folderItemList},_updateChildren:function(){if(!this.isFolder())return;var e=this.get("children");var t=this.getNavigationItemList();var a=t.getTemplateNavigation();e.setTemplateNavigation(a);e.setNavigationItemList(t)}},{ATTRS:{title:{value:""},collection:{valueFn:function(e){if(this._getAttr("collectionId")){var t={id:this._getAttr("collectionId"),urlId:this._getAttr("urlId"),typeName:this._getAttr("typeName"),enabled:this._getAttr("enabled"),type:this._getAttr("collectionType"),passwordProtected:this._getAttr("passwordProtected"),pagePermissionType:this._getAttr("pagePermissionType")};s.config.win.Static.IN_BACKEND&&(t.navigationTitle=this._getAttr("title"));return s.Squarespace.ContentCollectionCache.getCollectionFromData(t)}}},icon:{valueFn:function(){if(this.get("collectionId"))return s.Squarespace.ContentCollectionUtils.getIconClassNames(this.get("collection"));var e=this.get("externalLink");if(e&&e.externalServiceProviderType)return"external-link-"+i[e.externalServiceProviderType].slug;if(e)return"external-link";if(this.get("memberAreaId"))return"member-area";return""}},children:{value:[],lazyAdd:false,setter:"_setChildren"},supported:{valueFn:function(){if(this.isLink())return true;if(this.isMemberArea())return true;if(!this.get("collection"))return false;var e=this.get("collection").getTemplateConfiguration();return s.Lang.isValue(e)&&e.get("supported")}},duplicated:{value:false},isUnsupportedIndexMaybe:{getter:function(){return!this.get("supported")&&!!this.get("children")&&this.get("children").size()>0}},memberAreaId:{value:null}}});var a=s.Base.create("NavigationItemList",s.ModelList,[],{model:e,initializer:function(){this.each(function(e){this._bootstrapReference(e)},this);this.on(["create","add"],function(e){this._bootstrapReference(e.model)},this)},destructor:function(){this._navigationItem=null},setNavigationItem:function(e){this._navigationItem=e},getNavigationItem:function(){return this._navigationItem},add:function(e,t){return a.superclass.add.apply(this,arguments)},sync:function(e,t,a){console.log(this.name+" | sync called with action "+e+" and options ",t);if("update"===e||"create"===e){if(r){var i=function(e){return s.Array.map(e,function(e){if(e.items&&e.items.length)return i(e.items);return e.title})};console.trace(JSON.stringify(i(this.toJSON(true)),null,2))}var n={fieldName:this.getTemplateNavigation().get("name"),navigation:{items:this.toJSON(true)},templateId:l.getState().id};s.Data.post({json:true,url:"/api/widget/UpdateNavigation",data:n,success:function(e){d.refreshNavData(e);a&&a()},failure:function(e){new s.Squarespace.SystemError(o("Something Went Wrong"),e,"json").show()}})}else"function"===typeof a&&a()},save:function(e,t){this.sync("update",e,s.bind(function(){this.fire("save");s.Lang.isFunction(t)&&t()},this))},_bootstrapReference:function(e){e.setNavigationItemList(this)},setTemplateNavigation:function(e){this._templateNavigation=e},getTemplateNavigation:function(){var e=this._templateNavigation;if(!e)throw new Error("TemplateNavigation not found! Possible errors with wrapping data.");return e},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},getTotalSize:function(){return this.toArray().reduce(function(e,t){return e+t.get("children").size()},this.size())}});var n=s.Base.create("FolderItemList",a,[],{destructor:function(){this._navigationItemList=null},_bootstrapReference:function(e){e.setNavigationItemList(this.getNavigationItemList());e.setFolderItemList(this)},sync:function(e,t,a){this.getNavigationItemList().sync(e,t,a)},setNavigationItemList:function(e){if("NavigationItemList"!==e.name)throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");this._navigationItemList=e},getNavigationItemList:function(){var e=this._navigationItemList;if(!e)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return e}},{ATTRS:{acceptTypes:{value:[]}}});s.namespace("Squarespace.Models").NavigationItemList=a;s.namespace("Squarespace.Models").NavigationFolderItemList=n},"1.0",{requires:["array-invoke","base","model","squarespace-content-collection-utils","squarespace-models-content-collection","squarespace-system-error"]})},6195:function(e,t,a){var c=a(24).t;var d=a(229);var i=a(523);var n=a(1236);var u=a(4156);var s=a(114);var g=a(87);YUI.add("squarespace-upsell-product-violations",function(r){r.namespace("Squarespace.Upsell");function o(e){if(e.get("type")===d.PRODUCTS){if(s.isFeatureEnabled(g.NESTED_CATEGORIES))return n.NESTED_CATEGORIES_LIMIT;return n.MAX_PRODUCTS_IN_COLLECTION}if(e.get("ordering")===i.USER)return n.MAX_ITEMS_IN_USER_ORDERABLE_COLLECTION;if(e.get("ordering")===i.MUSIC_ALBUM)return n.MAX_TRACKS_IN_ALBUM;return 99999}function l(e){return r.Squarespace.Models.Inventory.getViolation(e)}r.Squarespace.Upsell.getMaxItemCountForCollection=o;r.Squarespace.ProductViolations={isAllowedToAddItemToCollection:function(n,s){return r.Squarespace.Promises.create(function(e,t){var a=n.get("nextDisplayIndex");var i=o(n);if(a+s>i){new r.Squarespace.Widgets.Alert({"strings.title":c("Page Max Size Reached"),"strings.message":c("This page has a maximum size of {maxItemCount} items. We recommend adding an additional page to hold your items.",{maxItemCount:i})});return t()}if(n.get("type")===d.PRODUCTS)return l(s).then(e).catch(function(e){u.showUpsellConfirmation(e)});e(true)})}}},"1.0",{requires:["base","squarespace-models-inventory","squarespace-models-plan","squarespace-promises"]})},6197:function(e,t){YUI.add("squarespace-models-inventory",function(i){i.namespace("Squarespace.Models");i.Squarespace.Models.Inventory=i.Base.create("Inventory",i.Squarespace.Models.GrowableModelList,[i.Squarespace.Mixins.SearchableModelList],{model:i.Squarespace.Models.ContentItem,url:i.Squarespace.API_ROOT+"commerce/inventory",initializer:function(){this.after("*:save",function(e){var t=e.target;var a=this.indexOf(t);this.remove(t);t.get("workflowState")!==i.Squarespace.WorkflowStates.DELETED&&this.add(t,{index:a})},this)}},{getViolation:function(e){return new i.Squarespace.Promises.create(function(t,a){i.Data.get({url:"/api/commerce/inventory/violation",data:{numBeingAdded:e},success:function(e){if(e.blockUserAction){a(e);return}t(true)},failure:a})})},getProductStock:function(e,t){i.Data.get({url:"/api/commerce/inventory/stock",data:{itemId:e.join(",")},success:function(e){i.Lang.isFunction(t)&&t(e)}})},ATTRS:{paginator:{valueFn:function(){return new i.Squarespace.Models.OffsetPaginator({models:this,orderBy:"title",orderDirection:i.Squarespace.OrderDirection.DESCENDING})}}}})},"1.0",{requires:["base","squarespace-mixins-searchable-model-list","squarespace-models-content-item","squarespace-models-growable-model-list","squarespace-models-offset-paginator","squarespace-util","squarespace-promises"]})},6198:function(e,t){YUI.add("squarespace-mixins-searchable-model-list",function(r){r.namespace("Squarespace.Mixins");r.Squarespace.Mixins.SearchableModelList=r.Base.create("SearchableModelList",r.Base,[],{initializer:function(){r.Do.after(function(){var e=this._searchifyURL(r.Do.currentRetVal);return new r.Do.AlterReturn("Adding search query param.",e)},this,"getURL",this)},_searchifyURL:function(e){var t=this.get("searchQuery");if(!r.Lang.isValue(t)||""===t)return e;var a=e.split("?");var i=a[1];var n=r.Lang.isValue(i);var s=n?r.QueryString.parse(i):{};s=r.merge(s,{q:t});return a[0]+"?"+r.QueryString.stringify(s)}},{ATTRS:{searchQuery:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","event-custom","querystring","squarespace-attr-validators"]})},6199:function(e,t){YUI.add("squarespace-models-growable-model-list",function(t){t.namespace("Squarespace.Models");var i=t.Squarespace.Models.GrowableModelList=t.Base.create("GrowableModelList",t.Squarespace.Models.ModelList,[],{initializer:function(){t.Do.after(function(){this._ioRequest=t.Do.originalRetVal},this,"_sendSyncIORequest",this)},reset:function(){this._ioRequestInProgress()&&this._ioRequest.abort();this._set("hasNextPage",false);this.get("paginator").firstPage();i.superclass.reset.apply(this,arguments)},_getResponseAttrs:function(e){return t.merge(i.superclass._getResponseAttrs.call(this,e),{hasNextPage:e.hasNextPage})},getURL:function(e,t){var a=i.superclass.getURL.call(this,e,t);return this.get("paginator").paginateURL(a)},refresh:function(e,t){this.reset();this.load(e,t)},loadMore:function(e,t){if(this._ioRequestInProgress())return;this.get("paginator").nextPage();this.load(e,t)},load:function(n,s){if(t.Lang.isFunction(n)){s=n;n={}}n=n||{};this.sync("read",n,t.bind(function(e,t){var a={options:n,response:t};var i;if(e){a.error=e;a.src="load";this.set("lastError",{message:e,timestamp:Date.now(),attempts:this.get("error")?this.get("error").attempts+1:1});this.fire("error",a)}else{this.set("lastError",null);this._loadEvent||(this._loadEvent=this.publish("load",{preventable:false}));i=a.parsed=this._parse(t);this.add(i,n);this.fire("load",a)}s&&s.apply(null,arguments)},this));return this},_ioRequestInProgress:function(){return this._ioRequest&&this._ioRequest.isInProgress()}},{ATTRS:{paginator:{valueFn:function(){return new t.Squarespace.Models.Paginator},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.Paginator)},hasNextPage:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},lastError:{value:null}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-models-model-list","squarespace-models-paginator"]})},6200:function(e,t,a){var n=a(24).t;YUI.add("squarespace-plugin-focalpoint",function(i){i.namespace("Squarespace.Plugin").FocalPoint=i.Base.create("ImageFocalPoint",i.Plugin.Base,[i.Squarespace.GismoBase],{initializer:function(){this._renderUI();this._bindUI();this._syncUI()},_renderUI:function(){this._focalPointEl=this.get("relativeYUI").Node.create('<div class="image-focal-point"></div>');this.get("parentNode").appendChild(this._focalPointEl);"static"===this.get("parentNode").getComputedStyle("position")&&false},_bindUI:function(){var t=false;var e=this.get("relativeYUI");this._event(this.get("host").on(["mouseenter","mousemove"],function(e){this._anim(this._focalPointEl,{opacity:1}).run();this._syncUI()},this));this._event(this.get("host").on("mouseleave",function(e){if(t||e.relatedTarget===this._focalPointEl)return;this._anim(this._focalPointEl,{opacity:0}).run()},this));this.dd=new e.DD.Drag({node:this._focalPointEl});this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(true)});this.dd.on("drag:start",function(){this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(true)});t=true;this._startPolling()},this);this.dd.on("drag:end",function(){t=false;this._stopPolling();this._syncUI();this.fire("focalPointChanged",{focalPoint:this.get("focalPoint")})},this);this.tooltip=new e.Squarespace.ToolTip({target:this._focalPointEl,dialogTooltip:true,title:n("Image Focal Point"),body:n("An image focal point allows Squarespace to make better cropping decisions when the image is placed within a thumbnail. Drag the circle to change the focal point in the image so it displays to your preference.")})},_startPolling:function(){this._hostRegion=this.get("host").get("region");this._hostActualWidth=this.get("host").get("clientWidth");this._hostActualHeight=this.get("host").get("clientHeight");this._timer=i.later(50,this,this._evaluatedFocalPoint,this,{},true)},_stopPolling:function(){this._evaluatedFocalPoint();this._timer.cancel()},_evaluatedFocalPoint:function(){var e=this._focalPointEl.get("region");var t=e[0]-this._hostRegion[0];var a=e[1]-this._hostRegion[1];t+=e.width/2;a+=e.height/2;t-=(this._hostRegion.width-this._hostActualWidth)/2;a-=(this._hostRegion.height-this._hostActualHeight)/2;this.set("focalPoint",{x:Math.max(0,t/this._hostActualWidth),y:Math.max(0,a/this._hostActualHeight)},{source:"plugin-focalPoint"})},_syncUI:function(){var e=this.get("host").get("clientWidth");var t=this.get("host").get("clientHeight");var a=e*this.get("focalPoint.x");var i=t*this.get("focalPoint.y");var n=this.get("host").get("region");a+=n[0];i+=n[1];a+=(n.width-e)/2;i+=(n.height-t)/2;a-=this._focalPointEl.get("offsetWidth")/2;i-=this._focalPointEl.get("offsetHeight")/2;this._focalPointEl.setXY([a,i])},_getConstrainRegion:function(){var e=this.get("host").get("region");var t=this._focalPointEl.get("offsetWidth");var a=this._focalPointEl.get("offsetHeight");var i=this.get("host").get("offsetWidth")-this.get("host").get("clientWidth");var n=this.get("host").get("offsetHeight")-this.get("host").get("clientHeight");e.top-=t/2-n/2;e.left-=t/2-i/2;e.right+=t/2-i/2;e.bottom+=a/2-n/2;e.width-=i;e.height-=n;return e},destructor:function(){this._focalPointEl.remove();this.dd.destroy();this.tooltip.destroy()}},{NS:"focalPoint",ATTRS:{focalPoint:{value:{x:.5,y:.5},setter:function(e){i.Lang.isUndefined(e)&&console.log("UNDEFINED");if(i.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},parentNode:{valueFn:function(){return this.get("host").get("parentNode")}},relativeYUI:{valueFn:function(){if(i.config.win!==window.top&&i.config.doc.body!==this.get("parentNode").ancestor("body").getDOMNode())return window.top.Y;return i}}}})},"1.0",{requires:["base","dd","event-base","plugin","squarespace-gismo","squarespace-ui-base"]})},6201:function(e,t){YUI.add("squarespace-dialog-radio",function(i){i.namespace("Squarespace.DialogFields");var e=i.Squarespace.DialogFields.Radio=i.Base.create("Radio",i.Squarespace.DialogFields.SelectBase,[],{bindUI:function(){e.superclass.bindUI.call(this);this.get("contentBox").delegate("click",function(e){this.set("data",e.target.get("value"))},'input[type="radio"]',this)},_createOptionGroupNode:function(e){return i.Node.create('<div class="option-group"><div class="option-group-label">'+e.label+"</div></div>")},_createOptionNode:function(e){var t=i.Lang.sub('<input id="{id}" type="radio" name="{name}" value="{value}"><label for="{id}">{label}</label>',{id:i.guid(),name:this.get("name"),value:e.value,label:e.label});var a=i.Node.create('<div class="option">'+t+"</div>");e.disabled&&a.setAttribute("disabled","disabled");return a},_updateSelectedOption:function(){var t=this.get("data");if(i.Lang.isValue(t)){var e=this.get("contentBox").all('input[type="radio"]');e.each(function(e){e.get("value")===t.toString()&&(e.getDOMNode().checked=true)})}}},{CSS_PREFIX:"sqs-radio",ATTRS:{}})},"1.0",{requires:["base","node","squarespace-dialog-select-base"]})},6202:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-stringset",function(c){var o="boundingBox";var d="contentBox";var u=c.namespace("Squarespace.DialogFields").Stringset=c.Base.create("stringset-field",c.Squarespace.DialogField2,[c.WidgetParent,c.Squarespace.Mixins.StringSetUtils],{initializer:function(e){var t=this.get("mode");var a="input"===t;var i=c.Lang.isValue(e.existingMembers);var n=e.allowOnlyExistingMembers;var s=c.Lang.isValue(e.requestUrl);var r=a&&!i&&!n&&s;c.Lang.isValue(e.existingMembers)||this.set("existingMembers",[]);e.panel&&(this.panel=e.panel);!c.Lang.isNumber(e.maxMemberChars)&&c.Lang.isNumber(parseInt(e.maxMemberChars,10))&&this.set("maxMemberChars",parseInt(e.maxMemberChars,10));if(r)this._requestMemberData(this._loadInputMembersSuccess);else if("select"===t){s||this.set("requestUrl","/api/commondata/GetCollectionCategories");this._requestMemberData(this._loadSelectMembersSuccess)}this.get(o).addClass(this.get("style"))},renderUI:function(){u.superclass.renderUI.call(this);var e=this.get(d);var t=e.one(this._setFieldWrapper);var a=this.get("style");var i=this.get("description");var n=this.get("title")||"";var s=c.Object.hasKey(this.PARTIALS,a)?a:"thin";var r=this.PARTIALS[s];var o;var l;o=c.Node.create(c.Lang.sub(r,{title:n}));o.one(this._inputWrapperSelector).append(this.memberControl);if(c.Lang.isValue(i)){l=c.Node.create(c.Lang.sub(this.PARTIALS.descTemplate,{desc:i}));o.append(l)}t.addClass(a);t.append(o);this.memberControl=e.one(this._memberContainerSelector);this.flyoutTarget=e.one(this._flyoutTargetSelector);this._renderSetMembers()},bindUI:function(){u.superclass.bindUI.call(this);this.get(d).on("click",this.handleWidgetClick,this);this.memberControl.on("mouseenter",this.recalcMeasurements,this);this.memberControl.on("mouseover",this.blurInactiveMember,this);this.memberControl.on("mouseout",this.resetViewportAnimation,this);this.memberControl.on("mousemove",this.mapViewportToMousePosition,this);this.on("activeMemberChange",this._animateActiveMember,this);this.on("dataChange",this.afterDataChange,this);this.on("removingMemberChange",this._tryAddPlaceholder,this)},syncUI:function(){u.superclass.syncUI.call(this);this._updateMeasurements()},afterDataChange:function(e){var t=e.newVal;var a=c.Lang.isArray(e.prevVal)?e.prevVal:[];var i="_injectNewMemberList";var n=[];if(c.Lang.isArray(e.newVal)&&t.length!==a.length){0===a.length&&this.memberControl.empty();t.length<a.length&&(i="_ejectMemberList");n=this.diffStringSets(t,a);this[i](n)}this.flyout&&this.flyout.set("data",t)},handleWidgetClick:function(e){e.halt();var t=e.target;var a=this.get("mode");var i;if(t.hasClass("x")){i=t.ancestor("."+this.get("memberClass"));i&&this._destroyMember(i.getData("data"))}else if(this._isFlyoutOpen());else if("input"===a||"select"===a){this.panel&&this.panel.setActiveFlyout({constraintClasses:".workflow-flyout",field:this});this.showFlyout()}},recalcMeasurements:function(e){c.Lang.isNumber(this.get("memberContainerWidth"))&&this._updateMeasurements()},blurInactiveMember:function(e){this._cancelTimers();if(e.target===this.get("activeMember")||e.target===this.get("removingMember"))return;if(e.target.hasClass("tag")){this._blurMember();this.set("activeMember",e.target)}},resetViewportAnimation:function(e){var t=e.target;var a=t.hasClass("x");var i=!c.Lang.isNull(this._blurTimer);if(a||i)return;this.snapBackTimer||(this.snapBackTimer=c.later(150,this,this._nudgeViewportTo,0));this.blurTimer=c.later(50,this,this._blurMember)},mapViewportToMousePosition:function(e){var t=this.get(d).one(this._inputWrapperSelector);var a=t.get("offsetWidth");var i=this._getViewportOverhang();var n;if(i>0){n=(e.clientX-t.getX())/a;this._nudgeViewportToPercent(n)}},_updateData:function(e){var t=this.get("data");var a=e.newVal;var i=this.get("existingMembers");if(!(c.Lang.isString(a)||c.Lang.isArray(a)))return;c.Lang.isString(a)&&(a=[a]);i=i.concat(a);this.set("existingMembers",c.Array.dedupe(i));c.Array.each(a,function(e){this._hasTag(e)?t.splice(t.indexOf(e),1):t.push(e)},this);this.set("data",t)},_tryAddPlaceholder:function(e){c.Lang.isNull(e.newVal)&&0===this.get("data").length&&this._addPlaceholder()},showFlyout:function(){if(this.flyout){this.closeFlyout(c.bind(this.showFlyout,this));return}var e=this._getMemberEditorWidget();var t={alignment:"tl",animateOpacity:true,overflow:"visible"};this._initFlyout(e,t);0===this.get("data").length&&this._addPlaceholder()},closeFlyout:function(e,t){var a=this.flyoutPlugin,i=this.flyoutTarget,n=c.Lang.isValue(i)&&i.hasPlugin(a.NS);if(!this.flyout)return;if(n){c.Lang.isValue(this.flyout)&&c.Lang.isFunction(this.flyout.hide)&&this.flyout.hide();i[a.NS].on("hidden",this._cleanUpFlyout,this,e,t);i[a.NS].hide()}0===this.get("data").length&&this._addPlaceholder(false)},_getMemberEditorWidget:function(){var e=this.get("mode");switch(e){case"input":return new c.Squarespace.DialogFields.InputEditor({allowOnlyExistingMembers:this.get("allowOnlyExistingMembers"),autoCompleteIndex:-1,data:this.get("data"),editorLabel:this.get("editorLabel"),placeholder:this.get("inputPlaceholder"),existingMembers:this.get("existingMembers"),memberClass:this.get("memberClass"),visible:false});case"select":return new c.Squarespace.DialogFields.SelectEditor({addMemberText:this.get("addMemberText"),canAddMembers:this.get("canAddMembers"),collectionId:this.get("collectionId"),editorLabel:this.get("editorLabel"),data:this.get("data"),maxLength:this.get("maxMemberChars"),memberClass:this.get("memberClass"),options:this.get("existingMembers")});default:false;break}},_animate:function(e){if(this.get("destroyed"))return;var t=new c.Anim(e);this._anims.add(t);return t},_getViewportOverhang:function(){var e=this.get(d),t=e.one(this._inputWrapperSelector).get("offsetWidth"),a=this.get("memberContainerWidth")||0;return a-t},_nudgeViewportToPercent:function(e){var t=this._getViewportOverhang(),a;if(t>0){(e<.04||e>.94)&&(e=Math.min(Math.round(e),1));a=-1*t*e;this.get(d).one(this._memberContainerSelector).setStyle("left",a)}},_nudgeViewportTo:function(e){var t=this._memberContainerSelector,a=this.get(d).one(t);if(this.get("destroyed"))return;this.snapBackAnim&&this.snapBackAnim.stop();this.snapBackAnim=this._animate({node:a,duration:.3,easing:c.Easing.easeOutStrong,to:{left:e}});this.snapBackAnim.run();this.snapBackTimer=null},_blurMember:function(){var e;var t;if(this.get("destroyed"))return;e=this.get("activeMember");if(c.Lang.isValue(e)){c.Object.hasKey(e,"anim")&&e.anim.stop();t=e.one(":last-child");t&&t.remove();e.setStyle("paddingRight",this.get("activeMemberPadding")+"px");e.anim=this._animate({node:e,duration:.25,easing:c.Easing.easeOutStrong,to:{paddingRight:this.get("defaultMemberPadding")}});e.anim.run();this.set("activeMember",null)}},_animateActiveMember:function(e){if(c.Lang.isNull(e.newVal))return;var t=e.newVal;t.anim=this._animate({node:t,duration:.25,easing:c.Easing.easeOutStrong,to:{paddingRight:this.get("activeMemberPadding")+"px"}});t.anim.on("end",function(){var e=this.get("node");var t=c.Node.create('<span class="x">&times;</span>');e.append(t);e.setStyle("paddingRight","2px")});t.anim.run()},_cancelTimers:function(){if(this.blurTimer){this.blurTimer.cancel();this.blurTimer=null}if(this.snapBackTimer){this.snapBackTimer.cancel();this.snapBackTimer=null}},_updateMeasurements:function(e){var t=this.get(d),a;c.Lang.isNumber(e)||(e=0);if(this.get("data").length>0){a=t.one(this._memberContainerSelector).get("offsetWidth")+e+this.get("defaultMemberPadding");this.set("memberContainerWidth",a)}},_renderSetMembers:function(){var e=this.get("data");this.memberControl.empty();c.Lang.isArray(e)&&e.length>0?c.Array.each(e,function(e,t){this.memberControl.append(this._createMemberNode(e))},this):this._addPlaceholder()},_addPlaceholder:function(e){var t;c.Lang.isUndefined(e)&&(e=this._isFlyoutOpen());c.Lang.isValue(this.memberControl)||(this.memberControl=this.get(d).one(this._memberContainerSelector));this.memberControl.empty();t=c.Lang.sub('<div class="text dialog-element">{label}</div>',{label:e?this.get("emptyText"):'<div class="add-header">'+this.get("addText")+"</div>"});this.memberControl.append(t)},_initFlyout:function(e,t){var a=this.flyoutPlugin;var i=this.get(d).one(this._flyoutTargetSelector);var n=["addMember","removeMember"];if(!c.Lang.isObject(e))throw new Error("Flyout widget is missing.");this.flyout=this.add(e).item(0);i.hasPlugin(a.NS)&&i.unplug(a.NS);t=c.merge(t,{host:this,node:this.flyout.get("flyoutNode"),duration:.2,overflow:"visible"});i.plug(a,t);i[a.NS].show();this.flyout.after(n,this._updateData,this)},_cleanUpFlyout:function(e,t,a){var i=this.flyoutPlugin,n=this.get(d),s=n.one(this._flyoutTargetSelector);this.removeAll();this.flyout.destroy(true);this.flyout=null;s.unplug(i.NS);c.Lang.isFunction(t)&&t.apply(a||this,arguments)},_createMemberNode:function(e){var t;t=c.Node.create('<div class="tag"></div>');t.set("text",e);t.addClass(this.get("memberClass"));t.setData("data",e);return t},_destroyMember:function(a){var e=this.get(d).all("."+this.get("memberClass")),i=[];e.each(function(e){var t=e.getData("data");t!==a&&i.push(t)});this.set("data",i)},_injectNewMember:function(e){var t=0,a=0,i=0,n=this._createMemberNode(e);n.setStyle("opacity",0);this.memberControl.append(n);t=n.get("offsetWidth");i=n.getStyle("paddingLeft");a=n.getStyle("paddingRight");n.setStyles({width:0,paddingLeft:0,opacity:1});var s={node:n,duration:.25,easing:c.Easing.easeOutStrong};s=c.merge(s,{to:{width:t-20,paddingRight:a,paddingLeft:i}});n.anim=this._animate(s);n.anim.on("end",function(){this.get("node").setStyle("width","")});n.anim.run()},_injectNewMemberList:function(e){c.Array.each(e,function(e,t){this._injectNewMember(e)},this)},_ejectMember:function(i){var e=this.get(d),t=e.all(".tag."+this.get("memberClass")),n=[],a=0,s;t.each(function(e,t){var a=e.getData("data");a===i&&n.push(e)});if(n.length){a>1&&console.warn("Duplicate items detected!");s=n[0];if(s===this.get("activeMember")){this.set("activeMember",null);this.set("removingMember",s)}c.Object.hasKey(s,"anim")&&s.anim.stop();s.anim=this._animate({node:s,duration:.22,easing:c.Easing.easeOutStrong,to:{width:0,paddingRight:0,paddingLeft:0,marginRight:0}});s.anim.on("end",c.bind(function(e){s.anim.get("node").remove(true);this.set("removingMember",null)},this));s.anim.run()}},_ejectMemberList:function(e){c.Array.each(e,function(e){this._ejectMember(e)},this)},_isFlyoutOpen:function(){var e=this.flyoutPlugin;var t=this.flyoutTarget;if(c.Lang.isValue(t))return!!t.hasPlugin(e.NS);return false},_hasTag:function(e,t){c.Lang.isUndefined(t)&&(t=this.get("data"));if(c.Lang.isArray(t))return this.memberInSet(t,e);return false},_loadInputMembersSuccess:function(e){this.set("existingMembers",e)},_loadSelectMembersSuccess:function(e){var a=[];c.Object.each(e,function(e,t){a.push(e.name)},this);this.set("existingMembers",a)},_requestMemberData:function(e){var t={collectionId:this.get("collectionId")};var a=this.get("requestUrl");c.Data.get({url:a,data:t,success:c.bind(e,this)},this)},_memberContainerSelector:".tag-field-container",_flyoutTargetSelector:".field-input-wrapper",_setFieldWrapper:".tag-field-wrapper",_inputWrapperSelector:".field-input-wrapper",_snapBackTimer:null,_blurTimer:null,flyoutPlugin:c.Squarespace.Animations.Flyout,PARTIALS:{thin:'<div class="field-lhs title">{title}</div><div class="field-rhs"><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',minor:'<div class="field-rhs"><div class="field-lhs title">{title}</div><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',descTemplate:'<div class="field-description-wrapper"><div class="field-description">{desc}</div></div>'}},{CSS_PREFIX:"sqs-stringset",TEMPLATE:'<div class="field-wrapper tag-field-wrapper clear"></div>',ATTRS:{activeMember:{},addText:{value:i("Click to add tags.")},addMemberText:{value:i("Create tag")},activeMemberPadding:{value:18},allowOnlyExistingMembers:{value:false},canAddMembers:{value:false},collectionId:{},data:{value:[],setter:function(e){return c.Lang.isArray(e)?e:[]},getter:function(e){return e.concat([])}},defaultMemberPadding:{value:6},description:{},inputPlaceholder:{value:i("Tags, comma separated")},editorLabel:{},emptyText:{},existingMembers:{value:[],validator:c.Lang.isArray},memberClass:{value:"tag"},mode:{value:"input",validator:function(e){var t=["input","select"];return-1!==t.indexOf(e)}},maxMemberChars:{value:null},removingMember:{},requestUrl:{},style:{value:"thin",validator:c.Lang.isString,getter:function(e){return e.toLowerCase()}},memberContainerWidth:{},title:{},visible:{value:true}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-stringset-input-editor","squarespace-dialog-stringset-select-editor","squarespace-node-flyout","squarespace-stringset-utils-mixin"]})},6203:function(e,t,a){var n=a(757);var s=a(515);var g=a(1339);YUI.add("squarespace-dialog-stringset-input-editor",function(l){var a;var o=13,c=188,d=38,u=40;var t=function(){return 0};var i=function(e){if(l.Lang.isString(e)&&e.length>0){var n=e[0];return function(e,t){var a=e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase());var i=t.toLocaleLowerCase().indexOf(n.toLocaleLowerCase());return a>i?1:a<i?-1:0}}return t};a=l.namespace("Squarespace.DialogFields").InputEditor=l.Base.create("InputEditor",l.Squarespace.DialogField2,[l.WidgetChild,l.Squarespace.Mixins.StringSetUtils],{initializer:function(e){l.Lang.isValue(e.existingMembers)||this.set("existingMembers",[]);l.Lang.isValue(e.data)||this.set("data",[]);n.isSubDesktop()&&this.get("maxSuggestions")>4&&this.set("maxSuggestions",4)},destructor:function(){this._autoCompleteEl.remove(true);this._autoCompleteSuggestionsEl&&this._autoCompleteSuggestionsEl.remove(true)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.PARTIALS.AC_TEMPLATE;e.one(".workflow-flyout").setStyle("width",this.get("width")+"px");e.one(".flyout-title").set("text",this.get("editorLabel"));this._editorControlEl=e.one("input");this._editorControlEl.set("placeholder",this.get("placeholder"));this._autoCompleteEl=l.Node.create(t);this._autoCompleteSuggestionsEl=this._autoCompleteEl.one(".workflow-flyout-autocomplete");l.one(document.body).append(this._autoCompleteEl);this._autoCompleteEl.focus();this._autoCompleteAnim=this._anim({node:this._autoCompleteSuggestionsEl,duration:.25,easing:l.Easing.easeOutStrong})},bindUI:function(){a.superclass.bindUI.call(this);this._editorControlEl.on("keydown",this.handleTextInput,this);this._editorControlEl.on("keyup",this.haltEvent,this);this._editorControlEl.on("valuechange",this._displayAutoComplete,this);this._autoCompleteEl.on("click",this.handleAutoCompleteClick,this);this.after("selectedIndexChange",this.highlightSelection,this);this.before("destroy",function(){this._autoCompleteEl.remove(true)},this);this._autoCompleteAnim.after("end",this._cleanUpHideFlyoutAnim,this)},haltEvent:function(e){e.halt()},handleTextInput:function(e){var t=e.keyCode,a=this.get("selectedIndex"),i=this.get("autoCompleteMatches"),n;switch(t){case o:case c:if(-1===a)n=this._editorControlEl.get("value");else{var s=this._autoCompleteSuggestionsEl.all(".match").item(a);if(!s){e.halt();break}n=s.getData("data")}var r=g(n.split(","));r.forEach(this.addMember,this);e.halt();break;case d:case u:if(!i.length)return;t===d&&a>0?a--:t===u&&a<i.length-1&&a++;this.set("selectedIndex",a);e.halt();break;default:this.set("selectedIndex",-1);e.stopPropagation();break}},highlightSelection:function(e){var t=e.newVal,a,i;if(!this._autoCompleteSuggestionsEl)return;a=this._autoCompleteSuggestionsEl.all(".match");a.removeClass("selected");i=a.item(t);i&&i.addClass("selected")},handleAutoCompleteClick:function(e){if(e.target.hasClass("match")&&!e.target.hasClass("disabled")){e.stopPropagation();var t=e.target.getData("data");var a=this.currentMatches(t);if(a){this._displayAutoComplete();this.addMember(a)}this.resetControl();this._editorControlEl.focus();this._displayAutoComplete()}},resetControl:function(){this._editorControlEl.set("value","")},hide:function(){this._autoCompleteSuggestionsEl.hide()},alreadyHasMember:function(e){var t=this.get("data");return this.memberInSet(t,e+"")},currentMatches:function(a){var e=this.get("autoCompleteMatches");var t=l.Array.find(e,function(e,t){return e.value.toLowerCase()===a.toLowerCase()});return!!t&&t.value},addMember:function(e){var t=this.get("existingMembers"),a=this.get("allowOnlyExistingMembers");e=this.cleanMember(e);if(!l.Lang.isString(e)||0===e.length||this.alreadyHasMember(e)){this._displayAutoComplete();return}if(this.memberInSet(t,e)||!a){if(!a){t.push(e);this.set("existingMembers",t)}this._createMember(e);this.resetControl();this.set("selectedIndex",-1);this._displayAutoComplete()}},_createMember:function(e,t){l.Lang.isUndefined(t)&&(t=e);if(this.alreadyHasMember(e))return;this.fire("addMember",{newVal:e})},_highlightMatch:function(e,t){return l.Highlight.all(e,t)},_processSuggestions:function(n,s,e,r){var o=[];e.sort(i(s));l.Array.each(e,function(e,t){var a=this._highlightMatch(e,s),i;if(a===l.Escape.html(e)||o.length>=r||this.alreadyHasMember(e))return;i=l.Node.create('<div class="match">'+a+"</div>");i.setData("data",e);n.append(i);o.push({node:i,value:e})},this);n.setStyles({opacity:1,display:"block"});return o},_displayAutoComplete:function(){var e=this.cleanMember(this._editorControlEl.get("value")),t=this.get("existingMembers"),a=this.get("maxSuggestions"),i;if(a<1||t.length<1)return;this._autoCompleteSuggestionsEl.empty();i=this._processSuggestions(this._autoCompleteSuggestionsEl,e,t,a);this.set("autoCompleteMatches",i);this._autoCompleteAnim&&this._autoCompleteAnim.stop();i.length&&e?this._showAutoComplete():this._hideAutocomplete()},_showAutoComplete:function(){var e=this.get("autoCompleteMatches")||[];var t=e.length;var a=this._editorControlEl.get("offsetWidth");var i={display:"block",width:a+"px",opacity:1,left:this._editorControlEl.getX()-this._editorControlEl.get("docScrollX")+"px",top:this._editorControlEl.getY()+this._editorControlEl.get("offsetHeight")-this._editorControlEl.get("docScrollY")+"px"};if(n.isSubDesktop()){i.top=this._editorControlEl.get("docScrollY")+s.GRID_PX/2+"px";i.position="fixed"}this._autoCompleteEl.setStyles(i);this._autoCompleteAnim.setAttrs({to:{height:23*t+"px"}});this._editorControlEl.setStyles({borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"});this._autoCompleteAnim.run()},_hideAutocomplete:function(){this._autoCompleteAnim.setAttrs({to:{height:0}});this._autoCompleteAnim.run()},_cleanUpHideFlyoutAnim:function(e){var t=this._autoCompleteAnim.get("node");var a=this.get("borderRadius");if(t&&t.get("clientHeight")<1){t.setStyle("display","none");this._editorControlEl.setStyles({borderBottomLeftRadius:a,borderBottomRightRadius:a})}},_anim:function(e){if(this.get("destroyed"))return;var t=new l.Anim(e);this._anims.add(t);return t},PARTIALS:{AC_TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-autocomplete clear"></div></div>'}},{CSS_PREFIX:"sqs-stringset-input-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-title"></div><input class="field-input" placeholder=""></div><div class="flyout-notch"></div></div>',ATTRS:{allowOnlyExistingMembers:{},autoCompleteMatches:{validator:l.Lang.isArray},placeholder:{value:null},borderRadius:{value:"3px"},canAddMembers:{},editorLabel:{value:""},data:{value:[]},emptyText:{value:""},existingMembers:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},maxMemberChars:{},maxSuggestions:{value:6},selectedIndex:{value:-1,setter:function(e){var t=parseInt(e,10);return l.Lang.isNumber(t)&&t>-1?t:-1}},width:{value:250}}})},"1.0",{requires:["base","highlight","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},6210:function(e,t){YUI.add("squarespace-stringset-utils-mixin",function(s){s.namespace("Squarespace.Mixins").StringSetUtils=s.Base.create("stringSetUtils",s.Base,[],{memberInSet:function(e,t,a){if(a){e=s.Array.map(e,function(e){return e.toLowerCase()});t=t.toLowerCase()}return-1!==s.Array.indexOf(e,t)},cleanMember:function(e){var t=new RegExp("[,<>]","g");return s.Lang.trim(e.replace(t,""))},filterMember:function(e,t,a){return s.Array.filter(e,function(e){if(a)return e.toLowerCase()!==t.toLowerCase();return e!==t})},diffStringSets:function(e,t,a){var i=e,n=t;if(i.length<n.length){n=e;i=t}return s.Array.filter(i,function(e){return!this.memberInSet(n,e,a)},this)}},{})},"1.0",{requires:["base","squarespace-util"]})},6211:function(e,t,a){var u=a(24).t;var n=a(1339);var s=a(516);var r=a(390);var o=a(869).default;var l=a(1516);YUI.add("squarespace-dialog-stringset-select-editor",function(c){var i=13;c.namespace("Squarespace.DialogFields");var d=c.Squarespace.DialogFields.SelectEditor=c.Base.create("selectEditor",c.Squarespace.DialogField2,[c.WidgetChild,c.Squarespace.Mixins.StringSetUtils],{initalizer:function(e){this.publish("memberCreated",{emitFacade:true})},renderUI:function(){d.superclass.renderUI.call(this);var e=this.get("options");var t=this.get("contentBox");var i=this.get("data");var n=t.one(this._optionsSelector);var a=t.one(".workflow-flyout-options");var s=this.get("maxLength");var r=[];var o=this.get("editorLabel");t.one(".workflow-flyout").setStyle("width",this.get("width")+"px");c.Array.each(e,function(e,t){var a=this._createOptionNode(e,e,"data");this.memberInSet(i,e)&&a.addClass("active");n.append(a);r.push(a)},this);if(this.get("canAddMembers")){this._createOptionWrapper=this._createOptionNode(this.get("addMemberText"));this._createOptionWrapper.removeClass(this.get("memberClass"));this._createOptionWrapper.addClass("add");a.append(this._createOptionWrapper)}var l=u("Categories, comma separated");this._createInput=c.Node.create('<input class="flyout-option-add" placeholder="'+l+'">');c.Lang.isValue(s)&&this._createInput.setAttribute("maxlength",s);this.optionWrapEl=n;c.Lang.isString(o)&&o.length&&a.prepend(c.Node.create('<div class="flyout-title">'+o+"</div>"))},bindUI:function(){d.superclass.bindUI.call(this);var e=this.get("contentBox");this._createInput.on("blur",this._emptyCreateInput,this);this._createInput.on("keydown",this._addMemberOnEnter,this);this._createInput.on("keyup",this._haltEvent,this);this.after("optionsChange",this._appendMembers,this);this.after("memberCreated",this._emptyCreateInput,this);e.one(this._optionsSelector).on("click",this._handleOptionElClick,this);this._createOptionWrapper.on("click",this._handleCreateClick,this)},syncUI:function(){d.superclass.syncUI.call(this);var e=this.optionWrapEl.all("."+this.get("memberClass"));e.each(function(e){var t=this._memberExistsInData(e.getData("data"));e.toggleClass("active",t)},this)},_handleOptionElClick:function(e){var t=e.target;if(t.hasClass("flyout-option")&&t.hasClass(this.get("memberClass"))){var a=t.getData("data");var i=(t.hasClass("active")?"remove":"add")+"Member";this.fire(i,{newVal:a})}},_handleCreateClick:function(e){if(this._createOptionWrapper.contains(this._createInput))return;this._createOptionWrapper.empty();this._createOptionWrapper.addClass("active");this._createOptionWrapper.append(this._createInput);this._createInput.focus()},_emptyCreateInput:function(e){this.get("blurring")||this._resetCreateInput()},_addMemberOnEnter:function(e){var t=e.target.get("value");if(this.cleanMember(t).length<1||e.keyCode!==i)return;var a=n(t.split(",").map(this.cleanMember));a.forEach(function(e){this._memberExistsOnClient(e)?this.fire("addMember",{newVal:e}):""!==e.trim()&&this._createNewMember(e)},this)},_haltEvent:function(e){e.halt()},_appendMembers:function(e){var t=e.newVal,i=e.prevVal;c.Array.each(t,function(e,t){if(!this.memberInSet(i,e)){var a=this._createOptionNode(e,e,"data");a.addClass("active");this.optionWrapEl.append(a)}},this)},_toggleActiveMembersClass:function(t,a){var i=this.get("contentBox").all(this.get("memberClass"));i.each(function(e){i.get("text")===t&&e.toggleClass("active",a)})},_memberExistsInData:function(e){return this.memberInSet(this.get("data"),e)},_memberExistsOnClient:function(e){return this.memberInSet(this.get("options"),e)},_resetCreateInput:function(e){this.set("blurring",true);c.Lang.isUndefined(e)&&(e=this.get("addMemberText"));this._createOptionWrapper.contains(this._createInput)?this._createInput.set("value",""):this._createOptionWrapper.empty();this._createOptionWrapper.set("text",e);this._createOptionWrapper.addClass("add");this._createOptionWrapper.removeClass("active");this.set("blurring",false)},_createNewMember:function(e){var t=this.get("collectionId");this._resetCreateInput(u("Creating…"));this._createOptionWrapper.removeClass("add");this._createOptionWrapper.addClass("active");c.Data.post({url:this.get("addMemberUrl"),data:{collectionId:t,category:e},args:e,success:c.bind(this._createNewMemberSuccess,this,e),failure:function(e){false}},this)},_createNewMemberSuccess:function(e,t){var a=o.getCollection(t.collectionId);l(a)&&s.trackCreateNewCategory(e,r.ProductEditor.YUI_EDITOR);var i=[];var n=t.collectionCategories;i=c.Array.map(n,function(e,t){return e.name});this._toggleActiveMembersClass(e,true);this.set("options",i);this.fire("addMember",{newVal:e});this.fire("memberCreated",e);this._createInput.set("value","");this.optionWrapEl.set("scrollTop",this.optionWrapEl.get("scrollHeight"))},_createOptionNode:function(e,t,a){var i='<div class="flyout-option">{memberName}</div>',n=c.Lang.sub(i,{memberName:e}),s=c.Node.create(n);if(!c.Lang.isUndefined(t)){a=a||"data";s.setData(a,t)}s.addClass(this.get("memberClass"));return s},_optionsSelector:".flyout-select-options"},{CSS_PREFIX:"sqs-stringset-select-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-select-options"></div></div><div class="flyout-notch"></div></div>',ATTRS:{addMemberUrl:{value:"/api/commondata/AddCategory"},options:{value:[],validator:c.Lang.isArray,getter:function(e){return e.concat([])}},blurring:{value:false},canAddMembers:{},collectionId:{},addMemberText:{},data:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},memberClass:{},maxLength:{value:null},editorLabel:{},width:{value:250}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},6212:function(e,t){YUI.add("squarespace-dialog-text-area",function(a){a.namespace("Squarespace.DialogFields");var i=a.Squarespace.DialogFields.TextareaField=a.Squarespace.DialogFields.TextArea=a.Base.create("textArea",a.Squarespace.DialogField2,[],{initializer:function(){this._edited=false},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("dialog");if(a.Lang.isValue(e)){var t=this.get("contentBox").one("textarea");t.setAttribute("tabindex",e.getNextTabIndex())}},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox").one("textarea");e.after("valuechange",function(e){this._edited=true;this.set("data",e.newVal)},this);e.on("keydown",function(e){this.get("disableNewLine")&&13===e.keyCode&&e.halt()},this);this.after("dataChange",this._afterDataChange,this)},didDataChange:function(){return this._edited},focus:function(){i.superclass.focus.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").focus()},blur:function(){i.superclass.blur.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").blur()},_afterDataChange:function(){var e=this.get("contentBox").one("textarea");var t=e.get("value");var a=this.get("data");a!==t&&e.set("value",a)}},{CSS_PREFIX:"sqs-text-area",HANDLEBARS_TEMPLATE:"dialog-text-area.html",ATTRS:{data:{value:""},strings:{value:{placeholder:""}},disableNewLine:{value:false},testAttribute:{value:"text-area"}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-text-area-template"]})},6213:function(e,t){YUI.add("squarespace-dialog-text-area-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-text-area.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function g(e,t){var a="",i;a+='\n  <div class="description">'+c((i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i))+"</div>\n";return a}o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:d.noop,fn:d.program(1,u,n),data:n});(o||0===o)&&(s+=o);s+='\n\n<textarea placeholder="'+c((r=(r=t.strings,null==r||false===r?r:r.placeholder),typeof r===l?r.apply(t):r))+'">';if(o=a.data)o=o.call(t,{hash:{},data:n});else{o=t.data;o=typeof o===l?o.apply(t):o}s+=c(o)+"</textarea>\n\n";o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:d.noop,fn:d.program(3,g,n),data:n});(o||0===o)&&(s+=o);s+="\n";return s})})();var t="dialog-text-area.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6214:function(e,t,a){var n=a(810);YUI.add("squarespace-dialog-datetime-picker",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.DateTimePicker=i.Base.create("dataTimePicker",i.Squarespace.DialogField2,[],{initializer:function(e){this._suppressErrors=false;this._picker=new i.Squarespace.DialogFields.StateScheduler({data:this.get("data"),type:"date",direction:this.get("direction"),maximumDate:this.get("maximumDate"),targetNode:this.get("contentBox"),allowNever:false,visible:false})},destructor:function(){this._picker&&this._picker.destroy();this._autoAlignOnScroll.detach()},renderUI:function(){t.superclass.renderUI.call(this);this._picker.render(this.get("contentBox").ancestor("body")||i.one("body"));this._setTimePickerVisiblity();var e=i.throttle(i.bind(function(){true===this._picker.get("visible")&&this._alignPicker()},this),10);this._autoAlignOnScroll=i.one(document).on("scroll",e)},bindUI:function(){t.superclass.bindUI.call(this);this._bindCalendarToggleEvents();this._picker.after("dataChange",this._updateData,this);this.after("dataChange",this._updatePickerData,this);this.on("dataChange",function(e){var t=this.get("validator");if(t.call(this,e.newVal))this.hideError();else{e.halt();this._suppressErrors||this.showError(this.get("strings.errorMessage"))}},this)},_bindCalendarToggleEvents:function(){this.get("contentBox").delegate("click",this._handleActiveAreaClick,".sqs-datetime-picker-date",this);this._registerEvent(this._picker.get("contentBox").on("clickoutside",function(e){if(e.target===this.get("contentBox").one(".sqs-datetime-picker-date"))return;this._hidePicker()},this))},isValid:function(){return 0===this.get("errors").length},_updateData:function(e){this.set("data",e.newVal)},_updatePickerData:function(e){this._suppressErrors=true;this._picker.set("data",e.newVal);this._suppressErrors=false},syncUI:function(){t.superclass.syncUI.call(this);this._updateTitle(this.get("data"));this._updateDescription(this.get("data"))},_handleActiveAreaClick:function(e){this._showPicker(e.currentTarget)},_showPicker:function(e){this._picker.set("visible",true);this._picker.set("data",this.get("data"));this._picker.syncCalendar();this._alignPicker(e)},_alignPicker:function(e){e=e||this.get("defaultPositionNode");var t=this._picker.get("boundingBox");var a=this.get("direction");var i=e.get("region");var n=i["1"];var s=i["0"]-(t.one(".workflow-flyout").get("offsetWidth")-i.width)/2;if("down"===a){n+=e.get("offsetHeight");n-=parseInt(t.getStyle("marginTop"),10)}else{n-=t.get("offsetHeight");n-=parseInt(t.getStyle("marginBottom"),10)}t.setStyles({top:n,left:s,position:"absolute"})},_hidePicker:function(){if(this._picker.get("visible")&&this.isValid()){this._picker.set("visible",false);this.hideError()}},_updateDescription:function(e){var t=this.get("contentBox");var a=this._getDescriptionText(new Date(e));t.one(".sqs-datetime-picker-description").empty().append(a)},_updateTitle:function(e){var t=this.get("contentBox");var a=this._getTitleText(new Date(e));t.one(".sqs-datetime-picker-title").empty().append(a)},_setTimePickerVisiblity:function(){var e=this._picker.get("contentBox");var t=this.get("timePickerEnabled");e.toggleClass("sqs-datetime-picker-time-disabled",!t)},_getDateEl:function(e){return'<span class="sqs-datetime-picker-date">'+i.Lang.trim(n(e,this.get("dateFormat")))+"</span>"},_getDescriptionText:function(e){var t=this._getDateEl(e);var a=this.get("strings.description").replace("[DATE]",t);return i.Node.create('<span class="sqs-datetime-picker-date-wrapper">'+a+"</span>")},_getTitleText:function(e){var t=this._getDateEl(e);var a=this.get("strings.title").replace("[DATE]",t);return i.Node.create('<span class="sqs-datetime-picker-title-content">'+a+"</span>")}},{CSS_PREFIX:"sqs-datetime-picker",TEMPLATE:'<div class="sqs-datetime-picker-title"></div><div class="sqs-datetime-picker-description"></div>',ATTRS:{data:{setter:function(e){if(i.Lang.isDate(e))return e.getTime();if(i.Lang.isNumber(e))return e;return i.Attribute.INVALID_VALUE}},dateFormat:{value:"llllLT"},defaultPositionNode:{getter:function(){return this.get("boundingBox").one(".sqs-datetime-picker-date")||this.get("boundingBox")}},direction:{value:"down",getter:function(e){var t=["down","up"];return-1===t.indexOf(e)?t[0]:e}},errorFlyoutAnimationTime:{value:.01},maximumDate:{},timePickerEnabled:{value:true},strings:{value:{description:"[DATE]",title:"",errorMessage:""}},validator:{value:function(){return true},validator:i.Lang.isFunction}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-statepicker-scheduler","squarespace-ss-widget"]})},6215:function(e,t,a){var s=a(24).t;var u=a(6419);var g=a(5816);var p=a(845);YUI.add("squarespace-dialog-statepicker-scheduler",function(l){var c=0,d=1,n=2;var i=l.namespace("Squarespace.DialogFields").StateScheduler=l.Base.create("stateScheduler",l.Squarespace.DialogField2,[l.WidgetPosition,l.WidgetPositionAlign,l.WidgetChild,l.WidgetParent],{initializer:function(e){var t=new Date;l.Lang.isValue(e.data)&&(t=new Date(e.data));var a=this.get("maximumDate");var i=this.get("allowNever")?Date.now():null;this._widgets=[];this._widgets[c]=new l.Squarespace.DialogFields.InsetCalendar({name:"calendar",maximumDate:a,minimumDate:i,data:t});this._widgets[d]=new l.Squarespace.DialogFields.InsetTimer({name:"timer",data:t});this._widgets[n]=new l.Squarespace.DialogFields.Slider({name:"slider",range:["duration"===this.get("type")&&this.get("allowNever")?-1:0,90],data:this.get("durationOffset"),labelWidth:0,isNumericLabel:false,length:260,visible:"duration"===this.get("type"),thumbUrl:"/universal/images-v6/dialog/slider-thumb-dark.png"})},destructor:function(){l.Array.each(this._widgets,function(e,t){e.detach();e.destroy()})},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".flyout-calendar");e.one(".flyout-title").set("text",this.get("strings.title"));this._widgets[c].render(t);this._widgets[d].render(t);"duration"===this.get("type")&&this._renderSlider();var a=l.Node.create('<div class="flyout-notch">');if("down"===this.get("direction")){a.addClass("flyout-notch-up");e.one(".workflow-flyout").prepend(a)}else e.one(".workflow-flyout").append(a)},syncUI:function(){i.superclass.syncUI.call(this);this._widgets[n].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText())},bindUI:function(){i.superclass.bindUI.call(this);this._registerEvent(this._widgets[c].after("dataChange",this._mergeDateTimeComponents,this));this._registerEvent(this._widgets[d].after("dataChange",this._mergeDateTimeComponents,this));this._registerEvent(this._widgets[n].after("dataChange",this._updateTimeOffset,this));this.after("typeChange",function(e){this._syncSlider(e.newVal)});this.after("dataChange",this.syncCalendar,this)},_renderSlider:function(){var e=this.get("contentBox");this._durationEl=l.Node.create('<div class="duration-wrapper"></div>');this._durationEl.append(l.Node.create('<div class="duration-display"><span class="duration"></span></div><div class="slider-container-wrapper"></div>'));e.one(".workflow-flyout-options").append(this._durationEl);this._widgets[n].render(e.one(".slider-container-wrapper"));this._widgets[n].show()},_syncSlider:function(e){var t="duration"===e;this._widgets[n].set("range",["duration"===this.get("type")&&this.get("allowNever")?-1:0,90]);if(!this._durationEl&&t)this._renderSlider();else if(t){this._durationEl.show();this._widgets[n].show();this._widgets[n].syncUI()}else if(l.Lang.isValue(this._durationEl)){this._widgets[n].hide();this._durationEl.hide()}},_mergeDateTimeComponents:function(e){if(this._syncing)return;if(l.Lang.isNull(this._widgets[c].get("data"))){if(this.get("allowNever")){this.set("durationOffset",-1);this.set("data",null,{noSyncUI:true})}else this.set("data",Date.now(),{noSyncUI:true});return}var t=this._widgets[d].get("data");var a=this._widgets[c].get("data");var i=p(t);var n=p(a);var s=i.getHours();var r=i.getMinutes();var o=u(n.getFullYear(),n.getMonth(),n.getDate(),s,r);this.set("durationOffset",g(new Date,o));this.set("data",o,{noSyncUI:true})},_updateTimeOffset:function(e){var t=e.newVal;if(-1===t&&this.get("allowNever")){this._widgets[c].set("data",null);this._widgets[d].disable()}else{this._widgets[d].enable();var a=new Date;a.addDays(e.newVal);this._widgets[c].setAttrs({day:a.getDate(),month:a.getMonth(),year:a.getFullYear(),data:a})}},syncCalendar:function(){this._syncing=true;if(l.Lang.isValue(this.get("data"))){var e=new Date(this.get("data"));var t=p(e);this._widgets[c].setAttrs({day:t.getDate(),data:e},{silent:true});this._widgets[c].setAttrs({month:t.getMonth(),year:t.getFullYear()});this._widgets[d].setAttrs({data:e})}this._widgets[n].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText());this._syncing=false},getShortDurationText:function(){var e=this.get("allowNever")&&l.Lang.isNull(this.get("data"));var t=this.get("durationOffset");if(-1===t&&e)return this.get("strings.neverText");if(0===t)return s("Today");if(1===t)return s("Tomorrow");if(-1===t)return s("Yesterday");if(t<-1)return s("{numberOfDays} Days ago",{numberOfDays:Math.abs(t)});return s("{numberOfDays} Days",{numberOfDays:Math.abs(t)})},getCalendarHeight:function(){if(this.get("rendered"))return this.get("contentBox").one(".sqs-calendar-flyout").get("offsetHeight");return 0}},{CSS_PREFIX:"sqs-scheduler",TEMPLATE:'<div class="workflow-flyout tight sqs-calendar-flyout"><div class="workflow-flyout-options"><div class="flyout-title clear"></div><div class="flyout-calendar clear"></div></div></div>',ATTRS:{allowNever:{value:false},data:{setter:function(e){if(l.Lang.isDate(e))return e.getTime();return e}},direction:{value:"up"},durationOffset:{value:0},errorFlyoutAnimationTime:{value:.01},maximumDate:{},strings:{value:{neverText:s("Never"),title:s("Select a Date & Time")}},type:{value:"date",validator:function(e){var t=["none","duration","date"];return-1!==t.indexOf(e)}}}})},"1.0",{requires:["base","slider","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-slider","squarespace-dialog-statepicker-inset-calendar","squarespace-dialog-statepicker-inset-timer","widget-position","widget-position-align"]})},6216:function(e,t,a){YUI.add("squarespace-dialog-slider",function(i){var r="&nbsp;";i.namespace("Squarespace.DialogFields");i.Squarespace.DialogFields.Slider=i.Base.create("slider",i.Squarespace.DialogField2,[],{initializer:function(){this.unplug(i.Plugin.WidgetAnim);i.Lang.isValue(this._initialData)||(this._initialData=this.get("data"));var e=function(){i.throttle(this.refreshWidth.bind(this))};this._registerEvent(i.one(i.config.win).on("resize",e,this));this.get("pluralize")&&!this.get("getPluralizedSliderLabel")&&false},renderUI:function(){i.Squarespace.DialogFields.Slider.superclass.renderUI.call(this);this.slider=new i.Slider({axis:"x"});var e=this.get("contentBox");var t=e.one(".slider-container");var a=this.get("range");this.slider.setAttrs({thumbUrl:this.get("thumbUrl"),min:a[0],max:a[1],value:this.get("data")});this.slider.render(t);this._updateDisplayFromSliderValue();this.refreshWidth()},show:function(){var e=this.get("visible");i.Squarespace.DialogFields.Slider.superclass.show.call(this);e||this.refreshWidth()},refreshWidth:function(){var e=this.get("contentBox");this.slider.set("length",e.one(".slider-container").get("offsetWidth"))},bindUI:function(){i.Squarespace.DialogFields.Slider.superclass.bindUI.call(this);this.slider.after("thumbMove",this._updateDataFromSlider,this);this.slider.after("thumbMove",this._updateDisplayFromSliderValue,this);this.after("dataChange",this._updateSliderFromData,this);if(this.slider._dd){this.slider._dd.plug(i.Plugin.DDProxy,{cloneNode:true,moveOnEnd:true});this.slider._dd.on("start",function(e){this.get("node").setStyles({visibility:"hidden"})},this.slider._dd);this.slider._dd.on("end",function(e){this.get("node").setStyles({visibility:null})},this.slider._dd)}},_getDisplayValue:function(){var e=this.get("data");var t=this.get("getPluralizedSliderLabel");if(t)return t(e);var a=this.get("strings.suffix");var i=this.get("strings.zeroLabel");var n=this.get("pluralize");if(0===e&&i)return i;var s=1!==e;if(a)return e+r+a+(s&&n?"s":"");return e},_updateDisplayFromSliderValue:function(){var e=this.get("contentBox");e.one(".numeric-display").setContent(this._getDisplayValue(this.get("data")))},_updateDataFromSlider:function(){this.set("data",this.slider.get("value"))},_updateSliderFromData:function(){this.slider.set("value",this.get("data"))},destructor:function(){this.slider&&this.slider.destroy()}},{CSS_PREFIX:"sqs-slider",HANDLEBARS_TEMPLATE:"dialog-slider.html",ATTRS:{data:{value:null,getter:function(e){if(i.Lang.isValue(e))return e;return this.get("range")[0]},validator:i.Lang.isNumber},displayFormatter:{value:function(){return this._getDisplayValue(this.get("data"))}},range:{validator:function(e){var t=e[0];var a=e[1];return i.Lang.isNumber(t)&&i.Lang.isNumber(a)&&t<a},value:[0,100]},isNumericLabel:{value:null,getter:function(e){if(i.Lang.isValue(e))return e;var t=this.get("strings.suffix");return!("string"===typeof t&&""!==t||this.get("getPluralizedSliderLabel"))}},labelWidth:{value:20},pluralize:{value:true},disabled:{value:false},thumbUrl:{value:"/universal/images-v6/dialog/slider-thumb-dark.png"},getPluralizedSliderLabel:{value:null}}})},"1.0",{requires:["base","dd-proxy","squarespace-dialog-field-2","squarespace-dialog-slider-template"]})},6217:function(e,t){YUI.add("squarespace-dialog-slider-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-slider.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){var a="",i;a+='\n<div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function g(e,t){return"sqs-slider-with-numeric-label"}function p(e,t){var a="",i;a+='style="width: ';if(i=n.labelWidth)i=i.call(e,{hash:{},data:t});else{i=e.labelWidth;i=typeof i===l?i.apply(e):i}a+=c(i)+"px";return a}function h(e,t){var a="",i;a+='style="margin-left: ';if(i=n.labelWidth)i=i.call(e,{hash:{},data:t});else{i=e.labelWidth;i=typeof i===l?i.apply(e):i}a+=c(i)+"px";return a}o=n["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:d.noop,fn:d.program(1,u,i),data:i});(o||0===o)&&(s+=o);s+='\n<div class="slider ';o=n["if"].call(t,t.isNumericLabel,{hash:{},inverse:d.noop,fn:d.program(3,g,i),data:i});(o||0===o)&&(s+=o);s+='">\n  <div class="numeric-display" ';o=n["if"].call(t,t.isNumericLabel,{hash:{},inverse:d.noop,fn:d.program(5,p,i),data:i});(o||0===o)&&(s+=o);s+='"></div>\n  <div class="slider-container" ';o=n["if"].call(t,t.isNumericLabel,{hash:{},inverse:d.noop,fn:d.program(7,h,i),data:i});(o||0===o)&&(s+=o);s+='"></div>\n</div>\n<div class="description">'+c((r=(r=t.strings,null==r||false===r?r:r.description),typeof r===l?r.apply(t):r))+"</div>\n";return s})})();var t="dialog-slider.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6218:function(e,t,a){var r=a(24).formatDateTime;var i=a(845);var n=a(993);YUI.add("squarespace-dialog-statepicker-inset-timer",function(o){var e=function(e,t){var a=String(e),i=Number(t),n="";if(!o.Lang.isNumber(i))return a;for(var s=0,r=i-a.length;s<r;s++)n+="0";return n+a};var s=true;var t=s?"":"hidden";var a=o.namespace("Squarespace.DialogFields").InsetTimer=o.Base.create("insetTimer",o.Squarespace.DialogField2,[o.WidgetChild],{initializer:function(e){o.Lang.isValue(e.data)&&this.set("data",e.data)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._ampmControl=e.one(".ampm");this._hoursControl=e.one(".hour");this._minutesControl=e.one(".minute")},bindUI:function(){a.superclass.bindUI.call(this);this._ampmControl.on("click",this.selectControlEl,this,"ampm");this._minutesControl.on("click",this.selectControlEl,this,"minutes");this._hoursControl.on("click",this.selectControlEl,this,"hours");this._ampmControl.on("blur",this.onTimerBlur,this,"ampm");this._minutesControl.on("blur",this.onTimerBlur,this,"minutes");this._hoursControl.on("blur",this.onTimerBlur,this,"hours");this._ampmControl.on("keydown",this.onTimerKeyDown,this,"ampm");this._minutesControl.on("keydown",this.onTimerKeyDown,this,"minutes");this._hoursControl.on("keydown",this.onTimerKeyDown,this,"hours")},syncUI:function(){a.superclass.syncUI.call(this);this._ampmControl.set("value",this.get("ampm"));this._minutesControl.set("value",e(this.get("minutes"),2));this._hoursControl.set("value",this.get("hours"))},selectControlEl:function(e,t){-1!==["ampm","minutes","hours"].indexOf(t)&&e.target.select()},onTimerBlur:function(e,t){"hours"!==t&&"ampm"!==t&&"minutes"!==t||this.set(t,e.target.get("value"));this.syncUI()},onTimerKeyDown:function(e,t){if(65===e.keyCode){this._ampmControl.set("value","AM");e.halt();return}if(80===e.keyCode){this._ampmControl.set("value","PM");e.halt();return}if(13===e.keyCode)return;"hours"===t&&186===e.keyCode?this._minutesControl.select():"minutes"===t&&32===e.keyCode&&s&&this._ampmControl.select();if(this._invalidHourMinKeyCode(e.keyCode)&&("minutes"===t||"hours"===t)){e.halt();return}e.target.hasClass("ampm")&&9!==e.keyCode&&e.halt()},_invalidHourMinKeyCode:function(e){return(e>57||e<48)&&(e<96||e>105)&&9!==e&&16!==e&&37!==e&&39!==e&&46!==e&&8!==e}},{CSS_PREFIX:"time-wrapper",TEMPLATE:'<input class="time-control hour"> <span class="time-control">:</span> <input class="time-control minute"> <input class="time-control ampm '+t+'"> <div class="duration-display"></div>',ATTRS:{ampm:{getter:function(){return o.Lang.trim(r(this.get("localizedDate"),"A"))},validator:function(e){if(o.Lang.isString(e)){var t=e.toLowerCase();return"am"===t||"pm"===t}return false},setter:function(e){var t=this.get("localizedDate");var a=e.toLowerCase();var i=o.Lang.trim(r(t,"A")).toLowerCase();if(a!==i){var n=(t.getHours()+12)%24;t.setHours(n);this.set("localizedDate",t)}}},minutes:{getter:function(){return this.get("localizedDate").getMinutes()},validator:function(e){e=parseInt(e,10);return o.Lang.isNumber(e)&&e>=0&&e<60},setter:function(e){var t=this.get("localizedDate");t.setMinutes(parseInt(e,10));this.set("localizedDate",t)}},hours:{getter:function(){var e=this.get("localizedDate").getHours();if(s)return e%12||12;return e},validator:function(e){e=parseInt(e,10);var t=s?12:23;var a=s?1:0;return o.Lang.isNumber(e)&&e>=a&&e<=t},setter:function(e){var t=this.get("localizedDate");var a=t.getHours();var i=parseInt(e,10);var n=i;if(s){a>=12&&i<12&&(n=i+12);a<12&&12===i&&(n=0)}t.setHours(n);this.set("localizedDate",t)}},data:{value:new Date},localizedDate:{getter:function(){return i(this.get("data"))},setter:function(e){var t=n(this.get("data"));var a=new Date(e.getTime());a.setMinutes(a.getMinutes()-t);this.set("data",a)}}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},6223:function(e,t,a){var i=a(24).t;var n=a(5197);var s=a(2877);var o=s.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-dialog-select",function(s){s.namespace("Squarespace.DialogFields");var r=s.Squarespace.DialogFields.Select=s.Base.create("select",s.Squarespace.DialogFields.SelectBase,[],{renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("autocompleteType");var a=e.one(".select-facade");var i=e.one("select");this._renderTitleAndDescription();this._setIconClasses(this.get("icon"));this._set("errorFlyoutAnchor",a);i.setAttribute("name",this.get("name"));t&&i.setAttribute("x-autocompletetype",t);var n=this.get("dialog");s.Lang.isValue(n)&&i.setAttribute("tabindex",n.getNextTabIndex())},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one(".select-facade");var a=e.one("select");this.after("optionsChange",this.syncUI,this);this._registerEvent(t.on("click",function(e){if("disabled"===a.getAttribute("disabled"))return;this.get("haltClickEvent")?e.halt():e.preventDefault();"SELECT"!==e.target.get("tagName")&&a.simulate("mousedown")},this));a.after("change",function(){var e=a.get("value");e!==this.get("data")&&this.set("data",e)},this);var i=this.get("boundingBox");var n=this.getProperty("CSS_PREFIX")+"-focus";i.on("focus",function(){a.focus()},this);this._registerEvent(a.on("focus",function(){i.addClass(n)},this));this._registerEvent(a.on("blur",function(){i.removeClass(n)},this));this._registerEvent(a.on("keydown",function(e){8===e.keyCode&&e.halt()},this));this.after("stringsChange",this._renderTitleAndDescription,this);this.after("iconChange",function(e){this._setIconClasses(e.newVal,e.prevVal)},this)},syncUI:function(){r.superclass.syncUI.call(this);this._updateFacadeLabel()},focus:function(){r.superclass.focus.call(this);this.get("rendered")&&this.get("contentBox").one("select").focus()},blur:function(){r.superclass.blur.call(this);this.get("rendered")&&this.get("contentBox").one("select").blur()},disable:function(){r.superclass.disable.call(this);if(this.get("rendered")){var e=this.get("contentBox").one("select");var t=this.get("boundingBox");e.setAttribute("disabled","disabled");t.addClass(this.getProperty("CSS_PREFIX")+"-disabled")}},enable:function(){r.superclass.enable.call(this);if(this.get("rendered")){var e=this.get("contentBox").one("select");var t=this.get("boundingBox");e.removeAttribute("disabled");t.removeClass(this.getProperty("CSS_PREFIX")+"-disabled")}},_renderTitleAndDescription:function(){var e=this.get("contentBox");var t=e.one(".title");var a=this.get("strings.title");a?t.setHTML(a):t.hide();var i=e.one(".description");var n=this.get("strings.description");if(n){i.setHTML(n);i.show()}else i.hide()},_setIconClasses:function(e,t){var a=this.get("contentBox").one(".select-facade");var i=s.Lang.isString(e)&&""!==e;s.Lang.isString(t)&&a.removeClass(t);i&&a.addClass(e);a.toggleClass("icon",i)},_renderOptions:function(){r.superclass._renderOptions.call(this);this.get("contentBox").one("select").set("selectedIndex",-1)},_createOptionGroupNode:function(e){var t=s.Node.create("<optgroup></optgroup>");t.setAttribute("label",e.label);return t},_createOptionNode:function(e,t){var a=s.Node.create("<option></option>");a.setAttribute("value",e.value);a.setHTML(e.label);e.disabled&&a.setAttribute("disabled","disabled");return a},_updateSelectedOption:function(){var e=this.get("data");s.Lang.isValue(e)&&this.get("contentBox").one("select").set("value",e.toString())},_updateFacadeLabel:function(){this.hideError();var e=this.get("contentBox").one(".select-facade .label");var t=this.get("data");var a=!s.Lang.isValue(t)||""===t;e.setHTML(this._getFacadeLabel());e.toggleClass("empty",a)},_getFacadeLabel:function(){var a=this.get("data");var i;s.Lang.isValue(a)&&s.Array.some(this.get("rawOptions"),function(e,t){if(e.value.toString()===a.toString()){i=e.facadeLabel||e.label;return true}},this);if(!s.Lang.isValue(i)){var e=this.get("strings.placeholder");if(s.Lang.isValue(e)&&""!==e)i=e;else{i="&nbsp;";false}}return i},_getErrors:function(){if(this.get("required")&&this.isEmpty())return[i("This is a required field.")];return[]}},{CSS_PREFIX:"sqs-select",TEMPLATE:'<div class="title"></div><div class="select-facade '+o+'"><div class="label"></div><select></select></div><div class="description"></div>',ATTRS:{strings:{value:{placeholder:i("Select an option")}},defaultOptionContainer:{getter:function(){return this.get("contentBox").one("select")}},icon:{value:"",validator:s.Squarespace.AttrValidators.isString},autocompleteType:{value:null,writeOnce:"initOnly",validators:s.Squarespace.AttrValidators.isNullOrValueIn(n)},haltClickEvent:{value:true},testAttribute:{value:"select"}}})},"1.0",{requires:["base","node-event-simulate","squarespace-attr-validators","squarespace-dialog-select-base"]})},6224:function(e,t){YUI.add("squarespace-dialog-select-base",function(i){i.namespace("Squarespace.DialogFields");var e=i.Squarespace.DialogFields.SelectBase=i.Base.create("SelectBase",i.Squarespace.DialogField2,[],{initializer:function(e){var t=e.defaultValue;!i.Lang.isValue(e.data)&&i.Lang.isValue(t)&&this.set("data",t)},renderUI:function(){e.superclass.renderUI.call(this);this._renderOptions()},bindUI:function(){e.superclass.bindUI.call(this);this.after("optionsChange",this._renderOptions)},syncUI:function(){e.superclass.syncUI.call(this);this._updateSelectedOption()},_renderOptions:function(){this.get("defaultOptionContainer").empty();i.Array.each(this.get("options"),function(e){this._isOptionGroup(e)?this._renderOptionGroup(e):this._renderOption(e)},this)},_renderOptionGroup:function(e){var t=this._createOptionGroupNode(e);i.Array.each(e.options,function(e){this._renderOption(e,t)},this);this.get("defaultOptionContainer").append(t)},_createOptionGroupNode:function(e){console.warn("SelectBase: Method '_createOptionGroupNode' must be implemented.")},_renderOption:function(e,t){var a=this._createOptionNode(e);i.Lang.isValue(t)?t.append(a):this.get("defaultOptionContainer").append(a)},_createOptionNode:function(e){console.warn("SelectBase: Method '_createOptionNode' must be implemented.")},_updateSelectedOption:function(){console.warn("SelectBase: Method '_updateSelectedOption' must be implemented.")},_isOptionGroup:function(e){return i.Object.hasKey(e,"options")}},{CSS_PREFIX:"sqs-select-base",ATTRS:{data:{setter:function(e){if(this.get("numeric")){e=parseInt(e,10);i.Lang.isNumber(e)||(e=0);return e}if(!i.Lang.isValue(e))return"";if(!i.Lang.isString(e))return e+"";return e}},numeric:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},options:{value:[],validator:i.Squarespace.AttrValidators.isArray},rawOptions:{getter:function(){var e=this.get("options");return i.Array.reduce(e,[],function(e,t){if(this._isOptionGroup(t))return e.concat(t.options);e.push(t);return e},this)}},defaultOptionContainer:{getter:function(){return this.get("contentBox")},readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2"]})},6225:function(e,t){YUI.add("squarespace-toggle",function(i){i.namespace("Squarespace.Widgets");i.Squarespace.Widgets.ToggleButton=i.Base.create("toggleButton",i.Widget,[i.WidgetChild],{renderUI:function(){var e=this.getAttrs(["active"]);var t=e.active?"active":"inactive";this.get("contentBox").append('<div class="switch-box-container animate '+t+'"><div class="switch-box"><div class="toggle-box"><div class="togglebg"></div></div></div><div class="switch-shadow">&nbsp;</div><div class="handle-wrapper"><div class="handle">&nbsp</div></div></div>')},destructor:function(){i.detachAll(this.get("id")+"|*")},bindUI:function(){this.get("contentBox").delegate("click",this._onClick,".handle-wrapper",this);this.after(["activeChange","enabledChange"],this.syncUI,this)},_onClick:function(e){e.halt();this.get("enabled")&&this.set("active",!this.get("active"))},syncUI:function(){var e=this.get("contentBox");var t=this.get("boundingBox");var a=e.one(".switch-box-container");var i=e.all(".togglebg, .handle");var n=!!this.get("active");var s=!!this.get("enabled");i.setStyles({marginLeft:null,left:null});a.toggleClass("inactive",!n);a.toggleClass("active",n);t.toggleClass("enable",s);t.toggleClass("disabled",!s)}},{CSS_PREFIX:"sqs-toggle-button",ATTRS:{active:{value:false},enabled:{value:true}}});function e(){e.superclass.constructor.apply(this,arguments)}e.NAME="toggleDragPlugin";e.NS="drag";i.extend(e,i.Plugin.Base,{initializer:function(){this._host=this.get("host");this.afterHostMethod("bindUI",this._afterBindUI)},destructor:function(){i.detachAll(this.get("id")+"|*");this._handleDrag&&this._handleDrag.destroy()},_afterBindUI:function(){var e=this._host.get("contentBox"),t=this.get("id");this._handleDrag=new i.DD.Drag({node:e.one(".handle")});this._handleDrag.plug(i.Plugin.DDProxy);this._handleDrag.on(t+"|drag:start",this._onDragStart,this);this._handleDrag.on(t+"|drag:drag",this._onDragDrag,this);this._handleDrag.on(t+"|drag:end",this._onDragEnd,this)},_onDragStart:function(e){var t=e.target,a=this._host.get("contentBox").one(".handle-wrapper").get("region");t.hasPlugin("con")||t.plug(i.Plugin.DDConstrained,{constrain:a})},_onDragDrag:function(e){var t=e.target;var a=this._host.get("contentBox");var i=this.get("maxValue");var n=a.one(".handle-wrapper").getX();var s=Math.abs(n-t.lastXY[0]);s=Math.max(0,s);s=Math.min(i,s);a.one(".togglebg").setStyle("marginLeft",s);a.one(".handle").setStyle("left",e.target.get("dragNode").getX()-a.one(".handle-wrapper").getX())},_onDragEnd:function(e){var t=e.target;var a=t.get("node");var i=t.con.get("constrain");var n=Math.abs(i.left-i.right);var s=Math.abs(t.nodeXY[0]-t.lastXY[0])/(n-a.get("offsetWidth"));var r=this._host.get("active");s>.5&&this._host.set("active",!r);this._host.get("active")===r&&this._host.syncUI()}},{ATTRS:{resistance:{value:10},maxValue:{value:70}}});i.Squarespace.ToggleDrag=e},"1.0",{requires:["base","dd-constrain","dd-drag","dd-proxy","widget","widget-child"]})},6226:function(e,t,a){a(2227);a(1335);a(4210);var n=a(43);var s=a(0);var r=a(60);var h=a(24).t;var o=a(802);var i=a(6273);var c=a(757);var l=a(595);var d=a(6421);var u=a(1089);var g=a(5166);YUI.add("squarespace-dialog",function(p){p.namespace("Squarespace");p.Squarespace.OPEN_DIALOGS=[];p.Squarespace.DialogStates={CLOSED:1,EDITING:2,LOADING:3,CLOSING:4,SAVING:5,MOVING:6};p.Squarespace.EditingDialog=Class.extend(p.Squarespace.ZombieGizmo,{_name:"EditingDialog",_events:{show:{},shown:{},aftershowanim:{},"align-to-anchor":{},"aligned-to-anchor":{},loading:{},"cancel-loading":{},"loading-ready":{},ready:{},drag:{},hide:{},hidden:{},close:{},closed:{},canceled:{},"cancel-clicked":{},"overlay-click":{},"render-anchor":{},datachange:{},datachanged:{},"send-requested":{emitFacade:true},"remove-requested":{},"data-saved":{},"auto-save":{},"auto-save-requested":{emitFacade:true},"allow-editing":{},"editing-allowed":{},"show-errors":{},"local-errors":{}},initialize:function(e){this._super(e);this.setParams(e);this._setState("CLOSED");this.bodyEvents=[];this.buttonEvents=[];this.globalEvents=[];this.childDialogs=[];this.verticalFields=[];this.timers=[];this.fields={};this.reactComponentContainers=[];this.reactEls=[];this.sections={};this._noNameFields=[];this._setEdited(false);this.NOTCH_WIDTH=20;this.BUTTONS_BASE_IDX=100;this.NOTCH_HEIGHT=11;this.lastTabIndex=1;this.on("datachange",this.onDataChange,this);this.on("duplicate",this.markDuplicateLifecycle,this);this.__legacyRouterUnlisten||(this.__legacyRouterUnlisten=i.onChange(this.close.bind(this),false));this.__legacyRouterUnlistenBefore||(this.__legacyRouterUnlistenBefore=i.onBeforeChange(function(e,t){if(this.isVisible()&&this.params.discardChangesConfirmation){var a=this.canClose(function(){this.saveAndClose();t()}.bind(this),function(){this.cancel();t()},function(){t(false)});a&&t()}else t()}.bind(this)));this.__legacyRouterUnload||(this.__legacyRouterUnload=i.onBeforeUnload(function(){if(this.isVisible()&&this.params.discardChangesConfirmation&&(this.edited||this.editedSinceLastSave))return h("You have unsaved changes.")}.bind(this)));this._debug=new p.Squarespace.Debugger({name:"EditingDialog",output:false});this.publish("show",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("dismiss",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("tab-shown",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("button-click",{prefix:"EditingDialog",broadcast:2,emitFacade:true,preventable:false})},markDuplicateLifecycle:function(){this.isDuplicating=true;this.once("canceled",function e(){this.isDuplicating=false})},markCancelLifecycle:function(){this.isCanceling=true;this.once("canceled",function e(){this.isCanceling=false})},defaultOpts:{tabs:[],initialData:{},buttons:[],style:"standard",colorScheme:"light",buttonAlign:"right",position:"center",verticalHeight:"fixed",flyoutPointerDirection:"left",closingText:h("Canceled…"),savingText:h("Saving…"),loadingText:h("Loading…"),top:60,closeOthers:true,disableTips:true,closeable:true,autoFocus:true,discardChangesConfirmation:true,overlay:false,validateActiveTabOnly:false,edgeMargin:11,initialDataByReference:false,constrain:false,frameless:false},getName:function(){return this.params.name},getInitialData:function(){return this.params.initialData},setParams:function(e){if(!e)return;this.params=p.merge(this.defaultOpts,e);if(this.params.primaryTabs){this.params.tabs=this.params.tabs.concat(this.params.primaryTabs);delete this.params.primaryTabs}if(this.params.secondaryTabs){this.params.tabs=this.params.tabs.concat(this.params.secondaryTabs);delete this.params.secondaryTabs}this.params.tabs&&0!==this.params.tabs.length||!this.params.fields||(this.params.tabs=[{fields:this.params.fields}]);this.params.tabs[0].tabTitle||(this.params.tabs[0].tabTitle=h("Item"));this.params.tabs[0].name||(this.params.tabs[0].name="item");"transparent"===this.params.style&&(this.params.disableSaveOverlay=true);e.discardChangesConfirmation||0!==this.params.buttons.length||(this.params.discardChangesConfirmation=false);this.definitionChanged=true},show:function(e){this.fire("show");this._debug.log("Showing",["showParams",e],["this.params",this.params]);if(this.moving){this._setState("EDITING");this.animation&&this.animation.stop();this.fire("cancel-loading")}if(this.destroyTimer||this._isState("LOADING")||this._isState("CLOSING"))return;p.Squarespace.ToolTipManager&&(false===this.params.disableTips?p.Squarespace.ToolTipManager.enableTooltips():this.params.disableTips&&p.Squarespace.ToolTipManager.disableTooltips());this.anchorEl&&this.anchorEl.removeClass("targeted");e&&this._setShowParams(e);this.params.parentDialog&&this.params.parentDialog.addChildDialog(this);if(!this._isState("CLOSED")){if(!this.anchorEl)return;this.anchorEl.addClass("targeted");this._setState("LOADING");this.moving=true;this.updateTitle();this.fire("loading");this._updatePosition(false);if(this.position){this.animation=this._anim({node:this.el,to:{left:this.position.getX()+"px",top:this.position.getY()+"px"},duration:.25,easing:p.Easing.easeOutStrong});this.animation.on("end",function(){this.fire("loading-ready");this.dataReady()},this);this.animation.run()}return}this.definitionChanged=false;if(this.params.closeOthers)for(var t=0,a=p.Squarespace.OPEN_DIALOGS.length;t<a;++t)p.Squarespace.OPEN_DIALOGS[t].cancel();p.Squarespace.OPEN_DIALOGS.push(this);p.one(document.body).addClass("dialog-open");this.fire("loading");this._setState("LOADING");this.timers.push(p.later(100,this,function e(){this.params.closeable&&p.Squarespace.EscManager.addTarget(this);this.globalEvents.push(p.on("resize",this.onResize,p.one(window),this))}));this._addTitleEl();this._addBodyEl();this.mainEl=p.Node.create('<div class="main-container"></div>').append(this.titleEl).append(this.bodyEl).append(this.controlsEl);var i="";this.params.frameless?i+="frameless-dialog-wrapper ":this.params.disableStandardDialogWrapperClass||(i+="standard-dialog-wrapper ");i+=o("squarespace-managed-ui {sub1} {sub2} buttons-{sub3}",{sub1:this.params.style,sub2:this.params.colorScheme,sub3:this.params.buttonAlign});this.params.name&&(i+=" dialog-"+l.createUrlSafeString(this.params.name));this.el=p.Node.create('<div class="'+i+'"></div>').append(this.mainEl);this.bodyEvents.push(this.el.on("click",function(e){if(e.target.ancestor(".sqs-button",true))return;this.cancelChildDialogs();this.fire("click",e)},this));if(this.params.zIndex)this.zIndex=this.params.zIndex;else{p.Squarespace.DIALOG_ZINDEX_BASE+=10;this.zIndex=p.Squarespace.DIALOG_ZINDEX_BASE}this.el.setStyle("zIndex",this.zIndex);this.params.draggable&&this.enableDragging();this.params.hidable&&this._addHideEl();this.params.headerButton&&this._addHeaderButtonEl();this.buttonHolder=p.Node.create("<div>").addClass("button-holder");this.autosaveEl=p.Node.create("<div>").addClass("autosave-state");this.buttonStateEl=p.Node.create('<div class="sqs-text button-state-label">  <input type="text" readonly="readonly" value="'+(this.params.buttonStateMessage?this.params.buttonStateMessage:"")+'"></div>');if(this.controlsEl){this.controlsEl.append(this.buttonStateEl);this.controlsEl.append(this.autosaveEl);this.controlsEl.append(this.buttonHolder);this.params.tabs&&this._updateControlsForTab(this.params.tabs[0])}var n;n=this.anchorEl?this._positionWithAnchorEl():this._positionWithDefault();if(this.params.loadingState){var s=this._anim({node:this.el,to:n[1]?{opacity:.9,top:n[1]}:{opacity:.9},duration:.15,easing:p.Easing.easeOutStrong});s.on("end",function(){this.fire("loading-ready")},this);s.run()}else this.dataReady();if("full"===this.params.verticalHeight||"fit"===this.params.verticalHeight){this.el.setStyles({top:this.params.edgeMargin+"px",bottom:this.params.edgeMargin+"px"});this.params.top=this.params.edgeMargin}if(this.params.overlay){this.overlayEl=p.Node.create("<div>").addClass("dialog-screen-overlay");this.overlayEl.setStyle("zIndex",this.zIndex-1);this.overlayEl.addClass("hidden");p.one(document.body).append(this.overlayEl);p.soon(function(){this.overlayEl.removeClass("hidden")}.bind(this));this.globalEvents.push(p.on("click",this.onOverlayClick,this.overlayEl,this))}this.moveIntoView();p.later(300,this,function(){this._shown=true;this.fire("shown",this)})},_setShowParams:function(e){e.data&&(this.data=e.data);e.anchor&&(this.anchorEl=e.anchor);e.top&&(this.params.top=e.top);e.flyoutPointerDirection&&(this.params.flyoutPointerDirection=e.flyoutPointerDirection)},_addHeaderButtonEl:function(){var e=p.Node.create('<div class="header-button"></div>');var t=p.Node.create('<input type="button" value="'+this.params.headerButton.title+'" />');t.setData("type",this.params.headerButton.type);p.on("click",this.params.headerButton.onclick,t,this);this.el.append(e.append(t))},_addBodyEl:function(){this.bodyEl=p.Node.create('<div class="body-block"></div>');0!==this.params.buttons.length?this.controlsEl=p.Node.create('<div class="controls-block"></div>'):this.bodyEl.addClass("bottom")},_addTitleEl:function(){this.titleEl=p.Node.create('<div class="title-block loading"></div>');this.titleEl.toggleClass("singleTab",this.params.tabs.length<=1);this.titleTextEl=p.Node.create('<div class="text-holder"></div>');this.titleEl.append(this.titleTextEl);this.tabContainer=p.Node.create('<div class="tabbed-header-container"></div>');this.titleEl.append(this.tabContainer);this.updateTitle()},_addHideEl:function(){var e=p.Node.create('<div class="dialog-close"></div>');this.el.prepend(e);e.on("click",function(){this.fire("user-close");this.close()},this)},mount:function(){var e=this.params.mountNode||p.config.doc.body;p.one(e).append(this.el)},_positionWithAnchorEl:function(){var e,t,a,i,n,s;var r=this.params.width;this.el.setStyle("position",this.params.forcePosition||"absolute");this.anchorEl.addClass("targeted");if("left"===this.params.flyoutPointerDirection||"right"===this.params.flyoutPointerDirection){this.el.setStyle("width",r+this.NOTCH_HEIGHT+"px");this.mainEl.setStyle("width",r+"px");this.el.addClass("flyout");this.mount()}else if("hidden"===this.params.flyoutPointerDirection){this.el.setStyle("width",r+"px");this.mainEl.setStyle("width",r+"px");this.mount()}else if("top"===this.params.flyoutPointerDirection){this._initNotchEl("top");this.el.insertBefore(this.notchEl,this.mainEl);a=this.anchorEl.get("offsetWidth");i=this.anchorEl.get("offsetHeight");e=this.anchorEl.getX();t=this.anchorEl.getY()+i;r>a&&(e-=(r-a)/2);this.currentXY=[e,t-3];this.notchEl.setStyle("marginLeft",(r-33)/2+"px");n=this.params.left||this.currentXY[0];s=this.params.top||this.currentXY[1];this.el.setStyles({left:n+"px",top:s+"px",width:r+"px"});this.mainEl.setStyle("width",r+"px");this.mount()}else if("bottom"===this.params.flyoutPointerDirection){this._initNotchEl("top","bottom");this.el.append(this.notchEl);a=this.anchorEl.get("offsetWidth");i=this.anchorEl.get("offsetHeight");e=this.anchorEl.getX();t=this.anchorEl.getY()+i;r>a&&(e-=(r-a)/2);this.currentXY=[e,t-3];this.notchEl.setStyle("marginLeft",(r-33)/2+"px");n=this.params.left||this.currentXY[0];s=this.params.top||this.currentXY[1];this.el.setStyles({left:n+"px",top:s+"px",width:r+"px"});this.mainEl.setStyle("width",r+"px");this.mount()}else{this.currentXY=[this.anchorEl.getX()+(this.anchorEl.get("offsetWidth")-r)/2,this.anchorEl.getY()+(this.anchorEl.get("offsetHeight")-this.params.height)/2-15];this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px",width:r+"px"});this.el.setStyle();this.mainEl.setStyle("width",r+"px");t=this.currentXY[1];this.mount()}return[e,t]},_positionWithDefault:function(){var e,t;var a=p.one(document).get("winWidth");this.el.setStyle("position","fixed");if("right"===this.params.position){this.el.setStyles({right:this.params.edgeMargin+"px",top:"0px"});if(0===this.params.edgeMargin){this.titleEl.setStyle("border-radius","0px");this.controlsEl.setStyle("border-radius","0px")}}else if("undefined"!==typeof this.params.left)this.currentXY=[this.params.left,this.params.top];else{this.currentXY=[(a-this.params.width)/2,this.params.top];this.el.setStyle("position","fixed")}if(this.currentXY){this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px"});t=this.currentXY[1]}this.el.setStyle("width",this.params.width+"px");this.mainEl.setStyle("width",this.params.width+"px");this.mount();return[e,t]},isOpen:function(){return this._isState("LOADING")||this._isState("EDITING")},disableBodyScroll:function(){this.oldBodyScroll=p.one("body").getStyle("overflow");p.one("body").setStyle("overflow","hidden")},restoreBodyScroll:function(){this.hasOwnProperty("oldBodyScroll")&&(this.oldBodyScroll?p.one("body").setStyle("overflow",this.oldBodyScroll):p.one("body").setStyle("overflow",null))},getAnchorEl:function(){return this.anchorEl},getChildDialogs:function(){return this.childDialogs},addChildDialog:function(e){if(this.childDialogs.indexOf(e)<0){this.cancelChildDialogs();this._debug.log("addChildDialog",e);this.childDialogs.push(e)}e.params.parentDialog=this},removeChildDialog:function(t){this.childDialogs=p.Array.filter(this.childDialogs,function(e){return e!==t},this)},enableDragging:function(){this.titleEl.setStyle("cursor","move");this.dd=new p.DD.Drag({node:this.el,handles:this.titleEl&&this.titleEl._node?[this.titleEl]:null});this.dd.on("drag:start",this.cancelChildDialogs,this);this.dd.on("drag:drag",function(e){this.fire("drag",e)},this);this.dd.on("drag:end",function(e){this.moveIntoView()},this)},temporaryHide:function(e){this.fire("hide");p.Array.each(this.childDialogs,function(e){e.temporaryHide()},this);this.hideAnim&&this.hideAnim.stop();this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&this.overlayHideAnim.stop();this._overlayHideAnimEvent&&this._overlayHideAnimEvent.detach();this.hideAnim=this._anim({node:this.el,to:{opacity:0},duration:.35,easing:p.Easing.easeOutStrong});if(this.overlayEl){this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:0},duration:.35,easing:p.Easing.easeOutStrong});this._overlayHideAnimEvent=this._subscribe(this.overlayHideAnim,"end",function(){this.overlayEl.setStyle("display","none")})}this._hideAnimEvent=this._subscribe(this.hideAnim,"end",function(){this.el.setStyle("display","none");this.fire("hidden",this)});if(e){this.el.setStyle("display","none");this.overlayEl&&this.overlayEl.setStyle("display","none");this.fire("hidden",this)}else{this.hideAnim.run();this.overlayEl&&this.overlayHideAnim.run()}},temporaryShow:function(e){this.fire("show",this);e&&this._setShowParams(e);this.hideAnim&&this.hideAnim.stop();this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&this.overlayHideAnim.stop();if(this.overlayEl){this.overlayEl.setStyle("display","block");this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:this.params.overlay},duration:.35,easing:p.Easing.easeOutStrong});this.overlayHideAnim.run()}this.el.setStyle("display","block");this.hideAnim=this._anim({node:this.el,to:{opacity:1},duration:.35,easing:p.Easing.easeOutStrong});this._hideAnimEvent=this._subscribeOnce(this.hideAnim,"end",function(){this.fire("shown",this)});this.hideAnim.run();this._showChildren();this.moveIntoView()},_applyMethodToChildren:function(){var t=arguments[0];var a=Array.prototype.slice.call(arguments,1);p.Array.each(this.childDialogs,function(e){e[t].apply(e,a)},this)},_showChildren:function(){this._applyMethodToChildren("temporaryShow")},_hideChildren:function(){this._applyMethodToChildren("temporaryHide")},cancelChildDialogs:function(){this._applyMethodToChildren("cancel");this.childDialogs=[]},isVisible:function(){return!this._isState("CLOSED")},_updatePosition:function(e){if(this.el&&this.anchorEl){var t=this.el.get("offsetHeight");var a=this.params.flyoutPointerDirection;if("top"===a||"bottom"===a)return;if("centered"===a){var i=this.anchorEl.getXY();this.position=new p.Squarespace.Position({x:i[0]+(this.anchorEl.get("offsetWidth")-this.params.width)/2,y:i[1]+(this.anchorEl.get("offsetHeight")-t)/2,w:this.params.width,h:t});this.position.nudgeFix()}else{this.position=new p.Squarespace.Position({avoidElX:this.anchorEl,avoidElY:this.anchorEl,xdir:"right",ydir:"bottom",x:this.anchorEl.getX(),y:this.anchorEl.getY(),xo:2,yo:0,w:this.params.width+this.NOTCH_HEIGHT,h:t});this.position.reflectFix()}"hidden"!==a&&"centered"!==a&&this._reattachNotchEl();if(e){this.el.setXY(this.position.getXY());this._alignNotch(this.anchorEl)}}},_reattachNotchEl:function(){var e="right"===this.position.xdir?"left":"right";if(this.notchEl){this.notchEl.set("className","flyout-notch-"+e);this.notchEl.inDoc()&&this.notchEl.remove()}else this._initNotchEl(e);"right"===this.position.xdir?this.el.insertBefore(this.notchEl,this.mainEl):this.el.append(this.notchEl)},_initNotchEl:function(e,t){this.notchEl=p.Node.create('<div class="flyout-notch-'+e+'">&nbsp;</div>');p.Lang.isString(t)&&this.notchEl.addClass(t)},_alignNotch:function(e){if(!this.notchEl)return;var t=this.el.get("offsetHeight");var a=Math.max(t-36,220);var i=12;var n=11;var s=i;var r=this.el.get("region");var o=e.get("region");var l=o.top+o.height/2;if(o.top>r.top){s=l-r.top-n;s=Math.min(a,Math.max(i,s))}this.notchEl.setStyle("marginTop",s+"px")},onDataChange:function(e){this.fire("render-anchor",this.getData());this.setEdited();this._debug.log("onDataChange");this.fire("datachanged")},onOverlayClick:function(e){e.halt();this.fire("overlay-click");if(!this.params.disableOverlayCancel){this.isCanceling=true;this.close()}},setEdited:function(){if(this._isState("SAVING"))return;this._setEdited(true)},clearEdited:function(){this._setEdited(false)},_setEdited:function(e){this.edited=!!e;this.editedSinceLastSave=!!e},getEditedSinceLastSave:function(){return this.editedSinceLastSave},getNextTabIndex:function(){return this.lastTabIndex++},getEdited:function(){return this.edited},isState:function(e){return this.getState()===e},getState:function(){return this.state},setInitialData:function(e){this.params.initialDataByReference?this.params.initialData=e:this.params.initialData=p.clone(e,true);this.fields&&p.Object.each(this.fields,function(e,t){if(this._isDialogField2(e)&&e.get("name")&&!p.Lang.isUndefined(this.params.initialData[e.get("name")])){e.set("data",this.params.initialData[e.get("name")],{source:"setInitialData"});e.setCurrentDataAsInitial()}},this)},getBodyHeight:function(){if(this.params.height)return this.params.height;return this._getFullHeight()},setActiveFlyout:function(e){this.activeFlyout&&this.activeFlyout.field.closeFlyout();p.later(10,this,function(){this.activeFlyout=e})},clearActiveFlyout:function(){this.activeFlyout=null},onResize:function(){var e=p.one(document).get("winWidth");if(!this.anchorEl&&!this.params.draggable){var t={};if("full"===this.params.verticalHeight||"fit"===this.params.verticalHeight){this.bodyHeight=this.getBodyHeight();"fit"===this.params.verticalHeight&&this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight);this.bodyEl.setStyle("height",this.bodyHeight+"px");this.bodyEl.all(".scrollable-body").each(function(e){e.setStyles({height:this.bodyHeight-33+"px",paddingBottom:"33px"})},this);this.resizeVerticalFields()}if("right"!==this.params.position){this.hideErrors();t.left=(e-this.params.width)/2;t.top=this.params.top;this.params.left&&(t.left=this.params.left)}this.currentXY=[t.left,t.top];this.moveAnim&&this.moveAnim.stop();this.moveAnim=this._anim({node:this.el,to:t,duration:.15,easing:p.Easing.easeOutStrong});this.moveAnim.run()}this.moveIntoView()},moveIntoView:function(e){if(!this.params.draggable&&!this.params.constrain)return;!e||this.anchorEl||this.position||(e=false);var t={};var a=this.el.get("docScrollX");var i=this.el.get("docScrollY");var n=this.el.get("winWidth")+a;var s=this.el.get("winHeight");var r=s+i;var o=this.el.getY();var l=this.el.getX();o<i&&(t.top=i+this.params.edgeMargin);o+this.el.get("offsetHeight")>r&&(t.top=r-this.el.get("offsetHeight")-this.params.edgeMargin);l+this.el.get("offsetWidth")>n&&(t.left=n-this.el.get("offsetWidth")-this.params.edgeMargin);l<a&&(t.left=a+this.params.edgeMargin);e&&(t.top=t.top?Math.max(t.top,this.position.getY()):this.position.getY());"fixed"===this.params.forcePosition&&p.Lang.isValue(t.top)&&t.top>this.el.get("winHeight")&&(t.top=Math.max(0,s-this.el.get("offsetHeight")));var c=0!==p.Object.size(t);c&&this._anim({node:this.el,to:t,duration:.3,easing:p.Easing.easeOutStrong}).run();if(this.preferredHeight+120>s){this.bodyHeight=s-120;this.bodyEl.setHeight(this.bodyHeight)}else if(this.bodyHeight!==this.preferredHeight){this.bodyHeight=this.preferredHeight;this.bodyEl.setHeight(this.preferredHeight)}},scrollIntoView:function(e){this.el.scrollIntoView(e)},showErrors:function(e){this.fire("show-errors",e);this.allowEditing();this.currentErrors=e;this.errorCount=p.Object.size(e);this.errorsByTab={};p.Object.each(e,function(e,t){var a=this.getField(t);if(!a){false;return}this.errorsByTab[a.tab.name]?this.errorsByTab[a.tab.name]++:this.errorsByTab[a.tab.name]=1},this);this.renderNavigationTabs(this.currentErrors);this.activateErrors()},clearError:function(e){if(this.currentErrors&&this.currentErrors[e.getName()]){this.errorsByTab[e.tab.name]--;delete this.currentErrors[e.getName()];this.errorCount--;0===this.errorsByTab[e.tab.name]&&this.renderNavigationTabs(this.currentErrors)}},activateErrors:function(){if(this.errorCount){var e=this.currentTab.tabFields;var t=null;p.Array.each(e,function(e){if(this.currentErrors[e.getName()]){if(!t){t=e;t.scrollIntoView()}e.showError(this.currentErrors[e.getName()])}},this);t&&p.Lang.isFunction(t.focus)&&t.focus()}},hideErrors:function(){if(!this.currentTab)return;var e=this.currentTab.tabFields||[];p.Array.each(e,function(e){p.Lang.isFunction(e.hideError)&&e.hideError()},this);this.renderNavigationTabs()},setAndUpdateTitle:function(e){this.title=e;this.updateTitle()},updateTitle:function(e){var t=this.params.tabs[this.currentTabIndex];t&&this.currentTab&&t.title!==this.currentTab.title&&(this.currentTab.title=t.title);p.Lang.isUndefined(e)&&(e=this.state);var a;a=p.Lang.isString(this.title)?this.title:this.currentTab&&this.currentTab.title?this.currentTab.title:this.params.title;var i="";this.params.subtext&&(i='<div class="title-subtext">'+this.params.subtext+"</div>");switch(e){case p.Squarespace.DialogStates.LOADING:this.params.loadingText&&this.setTitleHtml('<div class="title-text">'+this.params.loadingText+"</div>"+i);break;case p.Squarespace.DialogStates.EDITING:a&&this.setTitleHtml('<div class="title-text">'+a+"</div>"+i);break;case p.Squarespace.DialogStates.SAVING:this.params.savingText&&this.setTitleHtml('<div class="title-text">'+this.params.savingText+"</div>"+i);break;default:break}},setTitleHtml:function(e){this.titleTextEl.setHTML(e)},setData:function(i){p.Array.each(this.currentTab.tabFields,function(e,t){if(e.setValue){var a=i[e.getName()];i.hasOwnProperty(e.getName())||(a=n(i,e.getName()));e.setValue(p.Lang.isValue(a)?a:null);this.fire("datachange",e)}},this)},focusTab:function(){if(!this.currentTab)return;this.fire("tab-focused",{tabName:this.currentTab.name});if(p.Lang.isArray(this.currentTab.tabFields)){if(g())return;p.Array.some(this.currentTab.tabFields,function(e,t){var a=!!(e.setValue&&e.focus);var i=this._isDialogField2(e);var n=!!(i&&e.get("focusable"));if(a&&!i||n){e.focus();return true}},this)}},_getFullHeight:function(){return p.one(document).get("winHeight")-2*this.params.edgeMargin-this.controlsHeight-this.titleEl.get("offsetHeight")},dataReady:function(){var e;this.clearEdited();this._setState("EDITING");this.titleEl.removeClass("loading");this.params.initialData||(this.params.initialData={});this.bodyHeight=this.params.height;"full"!==this.params.verticalHeight&&"fit"!==this.params.verticalHeight||(this.bodyHeight=this._getFullHeight());this.preferredHeight=this.bodyHeight;this.bodyEl.setStyle("width",this.params.width+"px");this.params.overlay&&!this.params.doNotDisableBodyScroll&&this.disableBodyScroll();if(this.moving){this.moving=false;this.updateTitle();if(this.definitionChanged){this.definitionChanged=false;this.destroyBody();this.destroyButtons();this.render();e=this._anim({node:this.bodyEl,duration:.25,easing:p.Easing.easeOutStrong,to:{height:this.bodyHeight}});e.on("end",function(){this.fire("ready")},this);e.run()}else{if(this.rendered){this.setData(this.params.initialData);this.params.autoFocus&&this.focusTab()}else this.once("rendered",function(){this.setData(this.params.initialData);this.params.autoFocus&&this.focusTab()},this);this.fire("ready")}this.clearEdited()}else{this.currentTabIndex=0;this.currentTab=this.params.tabs[0];this.updateTitle();if(this.params.loadingState){e=this._anim({node:this.el,to:{opacity:1},duration:.15,easing:p.Easing.easeOutStrong});e.run();if(this.controlsEl){e=this._anim({node:this.controlsEl,to:{height:this.controlsHeight},duration:.15,easing:p.Easing.easeOutStrong});e.run()}e=this._anim({node:this.bodyEl,to:{height:this.bodyHeight},duration:.25,easing:p.Easing.easeOutStrong});e.on("end",function(){this.render();this.fire("ready")},this);e.run()}else{this.render();this.currentData=this.params.initialData;var t=this;var a=function(){t.el&&t.el.setStyle("transform",null)};switch(this.params.showAnim){case"custom":this.params.customShowAnim(this.el,function(){t.fire("ready")});break;case"fade":this.el.transition({opacity:{duration:.2,value:1},easing:"ease-out"},function(){t.fire("ready");a()});break;case"noshow":this.el.setStyles({display:"none"});t.fire("ready");break;default:t.fire("ready");this.el.addClass("visible");break}}}},containsNode:function(e){return this.bodyEl&&this.bodyEl.contains(e)},activateTab:function(e){this.hideErrors();var a=parseInt(e.index,10);this.tabbedHeader&&a!==this.tabbedHeader.state.active&&this.tabbedHeader.setState({active:a});this.currentTab||(this.currentTab=e);p.Array.each(this.params.tabs,function(e,t){t===a&&this._showPanelByIndex(a)},this);var t=this.currentTab.reactData;var i=this.currentTab.tabPanelObj.getDOMNode();t&&-1===this.reactComponentContainers.indexOf(i)&&this._renderReactComponent(t,i)},_showField:function(e){(this._isDialogField2(e)&&e.get("visible")||!this._isDialogField2(e)&&!e.config.hidden)&&e.show(true)},_updateControlsForTab:function(e){this.controlsElButtonDisplayClass&&this.controlsEl.removeClass(this.controlsElButtonDisplayClass);if(e.hasOwnProperty("buttonDisplayClass")){this.buttonStateEl.setStyle("display","block");this.controlsHeight=109;this.controlsEl.addClass(e.buttonDisplayClass);this.controlsElButtonDisplayClass=e.buttonDisplayClass}else{this.buttonStateEl.setStyle("display","none");this.controlsHeight="standard"===this.params.style?65:60;this.controlsElButtonDisplayClass=null}this._shown&&this.onResize()},_showNewPanel:function(e,t,a,i,n,s){this.currentTab=e;this.currentTabIndex=t;this.updateTitle();e.tabPanelObj.removeClass("hidden");this._updateControlsForTab(e);if(this.params.noTabAnim){a=this.currentTab.tabFields;p.Array.forEach(a,function(e){this._showField(e)},this);this.focusTab();this.activateErrors()}else{i=this._anim({node:e.tabPanelObj,to:{left:0},duration:n,easing:s});i.on("end",function(){var e=this.currentTab.tabFields;p.Array.forEach(e,function(e){this._showField(e)},this);this.focusTab();this.activateErrors()},this);i.run();e.tabPanelObj.animation=i}if(this.currentTab.height){this.currentTab.tabPanelObj.setStyle("height",this.currentTab.height-50);this._anim({node:this.bodyEl,to:{height:this.currentTab.height},duration:n,easing:s}).run()}this.bodyEl.toggleClass("scrollable",!!this.currentTab.scroll);this.currentTab.scroll?this.bodyEl.plug(p.Squarespace.Plugin.ScrollLock):this.bodyEl.unplug(p.Squarespace.Plugin.ScrollLock);this.fire("tab-shown",{name:this.currentTab.name,title:this.currentTab.title})},_showPanelByIndex:function(e){if(e===this.currentTabIndex)return;var t;var a=.5;var i=p.Easing.easeBothStrong;var n=this.params.tabs[e];var s=this.params.tabs[this.currentTabIndex];if(!this.params.noTabAnim){n.tabPanelObj.animation&&n.tabPanelObj.animation.stop(true);s.tabPanelObj.animation&&s.tabPanelObj.animation.stop(true)}var r=s.tabFields;if(this.params.noTabAnim){s.tabPanelObj.setStyles({opacity:1,zIndex:"300"});s.tabPanelObj.addClass("hidden")}else{n.tabPanelObj.setStyles({left:(n.index>s.index?1:-1)*this.params.width+"px",opacity:1,zIndex:"300"});s.tabPanelObj.setStyle("zIndex","0");var o=(n.index<s.index?1:-1)*this.params.width;t=this._anim({node:s.tabPanelObj,to:{left:o+"px"},duration:a,easing:i});var l=this._showNewPanel.bind(this);t.on("end",function(){this.tab.addClass("hidden");c.isSubDesktop()&&l(n,e,r,t,.4,i)},{tab:s.tabPanelObj});t.run();s.tabPanelObj.animation=t}c.isDesktop()&&this._showNewPanel(n,e,r,t,a,i)},renderNavigationTabs:function(e){var t=106;var a=this.tabContainer.width()/this.params.tabs.length;var i=Math.max(t,a);var n=[];p.Array.each(this.params.tabs,function(e,t){e.index=t;n.push({tabTitle:e.tabTitle,onClick:this.params.tabs.length>1?this.activateTab.bind(this,e):null});if(!this.rendered){var a=!this.params.defaultTab&&0===t||this.params.defaultTab&&this.params.defaultTab===e.name;if(a){this.currentTab=e;this.currentTabIndex=t}this.renderTab(e,a)}},this);p.Object.each(e,function(e,t){var a=this.getField(t);if(!a){false;return}a.tab&&(n[a.tab.index].error=true)},this);n.length>1&&(this.tabbedHeader=r.render(s.createElement(d,{defaultTabIndex:this.currentTabIndex,tabs:n,tabWidth:i}),this.tabContainer.getDOMNode()))},render:function(){if(this.rendered)return;this.observedHeight=0;this.renderNavigationTabs();this.renderButtons();if(!this.bodyHeight){this.bodyHeight=this.observedHeight+14;this.preferredHeight=this.bodyHeight}switch(this.params.verticalHeight){case"fit":this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight);break;case"fixed":case"full":var e=this.titleEl?this.titleEl.height():0;var t=this.controlsEl?this.controlsEl.height():0;if(window.innerHeight<e+t+this.bodyHeight+this.params.top){this.el.setStyles({top:this.params.edgeMargin+"px"});this.params.top=this.params.edgeMargin;this.bodyHeight=window.innerHeight-2*this.params.top-e-t}break}this.fire("rendered");this.rendered=true;this.updateTitle(p.Squarespace.DialogStates.EDITING);this.bodyEl.setStyle("height",this.bodyHeight+"px");this._updatePosition(true);this.params.autoFocus&&this.focusTab();this.onResize()},getButtons:function(){return this.params.buttons},setButtons:function(){var e=arguments;1===arguments.length&&p.Lang.isArray(arguments[0])&&(e=arguments[0]);this.params.buttons=[];this.destroyButtons();e.forEach(function(e){this.params.buttons.push(e)},this);this.isVisible()&&this.renderButtons()},_removeButton:function(a){var e=p.Array.filter(this.getButtons(),function(e,t){return e!==a&&e.type!==a},this);this.setButtons(e)},_getNextTabIndex:function(){return this.BUTTONS_BASE_IDX+this.lastTabIndex++},disableButton:function(e){e.set("disabled","disabled");e.ancestor().addClass("disabled")},enableButton:function(e){e.removeAttribute("disabled");e.ancestor().removeClass("disabled")},renderButtons:function(){var e="javascript:noop();";this.saveAndCloseButton=p.Node.create(p.Lang.sub('<input class="saveAndClose" tabIndex="{tabIndex}" type="button" data-test="dialog-saveAndClose" value="'+h("Save &amp; Close")+'" />',{tabIndex:this._getNextTabIndex()}));this.saveButton=p.Node.create(p.Lang.sub('<input class="save" tabIndex="{tabIndex}" type="button" value="'+h("Save")+'" data-test="dialog-save"  />',{tabIndex:this._getNextTabIndex()}));this.cancelButton=p.Node.create(p.Lang.sub('<a class="cancel" href={href} tabIndex="{tabIndex}" data-test="dialog-cancel" >'+h("Cancel")+"</a>",{tabIndex:this._getNextTabIndex(),href:e}));this.removeButton=p.Node.create(p.Lang.sub('<input class="remove" tabIndex="{tabIndex}" type="button" value="'+h("Remove")+'"  data-test="dialog-remove" />',{tabIndex:this._getNextTabIndex()}));this.buttonEvents.push(p.on("click",function(e){e.halt();this._getButtonClickHandler("saveAndClose",this.saveAndClose)(e)},this.saveAndCloseButton,this),p.on("click",this._getButtonClickHandler("save",this.save),this.saveButton),p.on("click",this._getButtonClickHandler("remove",this.remove),this.removeButton),p.on("click",this._getButtonClickHandler("cancel",this.markCancelLifecycle),this.cancelButton),p.on("click",this._getButtonClickHandler("close",this.close),this.cancelButton),p.on("click",this._getButtonClickHandler("cancel",this.cancelClick),this.cancelButton));var t;var a=p.clone(this.params.buttons);var i=this.params.buttons.length;i>0&&a.reverse();while(--i>=0){var n;t=a[i];if(!t)continue;switch(t.type){case"cancel":this.cancelButton.set("innerHTML",t.title);n=p.Node.create('<div class="cancel-block"></div>');n.append(this.cancelButton);break;case"save":this.saveButton.set("value",t.title);n=p.Node.create('<div class="button-block"></div>');n.append(this.saveButton);break;case"remove":this.removeButton.set("value",t.title);n=p.Node.create('<div class="button-block"></div>');n.append(this.removeButton);break;case"saveAndClose":this.saveAndCloseButton.set("value",t.title);n=p.Node.create('<div class="button-block"></div>');n.append(this.saveAndCloseButton);break;default:var s;if("text"===t.style){s='<a href="'+e+'">'+t.title+"</a>";n=p.Node.create('<div class="cancel-block"></div>');n.append(s)}else{var r="dialog-"+t.className;s=p.Node.create('<input type="button" value="'+t.title+'" data-test="'+r+'" />');t.className&&s.addClass(t.className);n=p.Node.create('<div class="button-block"></div>');n.append(s)}this.publish("button-"+t.type,{emitFacade:true,prefix:"EditingDialog",broadcast:2});this.buttonEvents.push(p.on("click",this._getButtonClickHandler(t.type),s))}this.buttonHolder.append(n);t.disabled&&this.disableButton(s)}},cancelClick:function(e){this.fire("cancel-click")},_getButtonClickHandler:function(a,i){return p.bind(function(e){var t=!this.fire("button-"+a);t?e.halt():p.Lang.isFunction(i)&&i.call(this,e);this.fire("button-click",{type:a})},this)},showSaveOverlay:function(e){if(this.params.disableSaveOverlay)return;if(this.saveOverlay){this.saveOverlay.remove();this.saveOverlay=null}var t=this.titleEl.get("offsetHeight");var a=this.bodyEl?this.bodyEl.get("offsetWidth"):0;this.saveOverlay=p.Node.create('<div class="save-overlay">&nbsp;</div>');this.saveOverlay.on("mousedown",function(e){e.halt()});this.saveOverlay.setStyles({height:this.mainEl.get("offsetHeight")-t-10+"px",marginTop:t+5+"px",width:a+"px"});this.mainEl.append(this.saveOverlay);this.tabContainer.addClass("hidden");this.saveOverlay.addClass("visible")},hideSaveOverlay:function(){if(this.saveOverlay){this.saveOverlay.addClass("hidden");this.tabContainer.removeClass("hidden");p.later(300,this,function e(){this.saveOverlay&&this.saveOverlay.remove();this.saveOverlay=null});this._setState("EDITING");this.updateTitle()}else this._setState("EDITING")},allowEditing:function(){this.hideSaveOverlay();this.clearEdited();this.fire("editing-allowed");this._setState("EDITING")},save:function(){if(!this._showLocalErrors()){this._debug.log("save");this.closeOnSend=false;this._saveData()}},_showLocalErrors:function(){this.hideErrors();var t=function(e){return e.inActiveFrame};var a=this.currentTab;var i=function(e){return e.tab.name===a.name};var e=function(e){return t(e)&&i(e)};var n=function(e){return{field:e,errors:e.getErrors()}};var s=p.Object.values(this.fields);s=this.params.validateActiveTabOnly?s.filter(e,this):s.filter(t,this);var r=p.Array.map(s,n);var o=false;var l={};r.forEach(function(e){var t=e.errors;var a=t[t.length-1];if(a){l[e.field.getName()]=t[t.length-1];o=true}},this);o&&this.showErrors(l);return o},saveAndShow:function(){if(!this._showLocalErrors()){this._debug.log("saveAndShow");this.closeOnSend=false;this._saveData();this.show()}},saveAndClose:function(){if(!this._showLocalErrors()){var e=this.fire("preClose");if(!e){this._debug.log("preClose returned false, save prevented");return}this._debug.log("saveAndClose");this.params.closeable&&(this.closeOnSend=true);this._saveData()}},_saveData:function(){this._debug.log("_saveData");if(this._isState("SAVING")){this._debug.log("_saveData",h("Exiting because dialog state is in SAVING"));return}this.clearEdited();this.hideErrors();this._setState("SAVING");this.updateTitle();this.showSaveOverlay();this._debug.log("_saveData","fire","send-requested");this.fire("send-requested")},remove:function(e){e&&e.halt();this.fire("remove-requested")},canClose:function(e,t,a){if(!this._shown)return false;var i=p.Array.every(this.childDialogs,function(e){return e.canClose(this.saveAndClose,this.cancel)},this);if(!i)return false;var n=this._isReactDataDirty(this);if((n||this.edited||this.editedSinceLastSave)&&this.params.discardChangesConfirmation&&!this._isState("SAVING")){var s=n;for(var r in this.fields){var o=this.fields[r];o.didDataChange()&&(s=true)}if(s){var l=new p.Squarespace.Widgets.Confirmation({render:this.el.ancestor("body")||true,style:p.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:true,"strings.confirm":h("Save"),"strings.reject":h("Discard"),"strings.title":h("Review Changes"),"strings.message":h("You have made changes. Do you want to save or discard them?")});l.on("confirm",function(){this.clearEdited();this._debug.log("canClose","calling onSuccess()",e);e.call(this)},this);l.on("reject",function(){this.clearEdited();this._debug.log("canClose","calling onReject()",t);t.call(this)},this);l.on("cancel",function(){p.Squarespace.EscManager.addTarget(this);this._debug.log("canClose","onCancel");a&&a.call(this);this.fire("cancel-close")},this);this._debug.log("canClose",false,"Showing confirmation dialog");return false}}this._debug.log("canClose",true);return true},close:function(e,t){this._debug.log("close",e);if(!this._isState("EDITING")&&!this._isState("SAVING")){this._debug.log("close","Exiting because state is in Editing or Saving.");this.isCanceling=false;return}if("boolean"===typeof t&&t)this._debug.log("canClose skipped due to force = true");else if(false===this.canClose(this.saveAndClose,this.cancel)){this._debug.log("close","Exiting because canClose came back false");this.isCanceling=false;return}this.trackCancel();this.isCanceling=false;this.fire("close");this.dismiss(true)},trackCancel:function(){if(this.isDuplicating||!this.isCanceling)return;var n=this.currentData;if(!n||!n.collectionId)return;try{p.Squarespace.ContentCollectionCache.getCollectionById(n.collectionId,function e(t){if(!t)return;var a=t.get("typeName")||"";var i;a.indexOf("blog")>-1?i="blog":a.indexOf("event")>-1&&(i="events");i&&u.cancelEditCollectionItem({itemId:n.id,collectionType:i,collectionId:n.collectionId})})}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track cancel edit collection failed")}},cancel:function(e){this._debug.log("cancel",e);if(!this._isState("EDITING")&&!this._isState("SAVING"))return;this.clearEdited();this.fire("cancel");this.dismiss(false)},dismiss:function(e){var t=e?p.bind(this.destroy,this):p.bind(this._finishCancelation,this);this.fire("dismiss");this._setState("CLOSING");this.updateTitle();this.clearEdited();this._preDestroy();this.hideErrors();this.params.overlay&&this.restoreBodyScroll();switch(this.params.hideAnim){case"noHideAnimation":t();break;case"custom":this.params.customHideAnim(this.el,t);break;default:this.el.removeClass("visible");p.later(500,this,t);break}if(this.__legacyRouterUnlisten){this.__legacyRouterUnlisten();this.__legacyRouterUnlisten=null}if(this.__legacyRouterUnlistenBefore){this.__legacyRouterUnlistenBefore();this.__legacyRouterUnlistenBefore=null}if(this.params.overlay&&this.overlayEl){this.overlayEl.destroying=true;this.overlayEl.addClass("hidden");p.later(300,this,function e(){this.overlayEl&&this.overlayEl.remove();this.overlayEl=null})}},_finishCancelation:function e(){this.fire("render-anchor",this.getInitialData());this.destroy();this._setState("CLOSED");this.fire("canceled")},_preDestroy:function(){var e=0;var t;this._preDestroyCalled=true;var a=p.Squarespace.OPEN_DIALOGS.indexOf(this);-1!==a&&p.Squarespace.OPEN_DIALOGS.splice(a,1);0===p.Squarespace.OPEN_DIALOGS.length&&p.one(document.body).removeClass("dialog-open");this._applyMethodToChildren("close");for(e=0,t=this.timers.length;e<t;++e)this.timers[e].cancel();this.timers=[];p.Squarespace.EscManager&&p.Squarespace.EscManager.removeTarget(this);this.activeFlyout&&this.activeFlyout.field.closeFlyout();p.Squarespace.ToolTipManager&&this.params.disableTips&&p.Squarespace.ToolTipManager.enableTooltips();if(this.firstShowEvent){this.firstShowEvent.detach();this.firstShowEvent=null}this.anchorEl&&this.anchorEl._node&&this.anchorEl.removeClass("targeted")},getErrors:function(){var e=0;var t={};for(var a in this.fields){var i=this.fields[a];var n=false;n=this._isDialogField2(i)?i.get("required")&&i.isEmpty():i.config.required&&(""===i.getValue()||0===i.getValue());if(n){t[i.getName()]=h("This is a required field.");e++}}return{errors:e,errorSet:t}},send:function(){var e=this.getErrors();var t=e.errors;var a=e.errorSet;if(t){this.showErrors(a);this.fire("local-errors")}else{if(this.closeOnSend){this.saved=true;this.closeOnSend=false;this.close()}this.fire("sent")}},updateAutoSave:function(e,t){if(!this.autosaveEl.inDoc()){this.editedSinceLastSave=false;return}this.autosaveEl.setStyle("display","block");var a=this._anim({node:this.autosaveEl,from:{opacity:1},to:{opacity:.5},duration:.25,easing:p.Easing.easeOutStrong});a.on("end",function(){if(e)this.autosaveEl.set("innerHTML",e);else{this.autosaveEl.set("innerHTML",h('Last saved <span class="time"></span>.'));this.autosaveEl.one(".time").plug(p.Squarespace.RelativeTimeDisplay)}t?this.autosaveEl.addClass("error"):this.autosaveEl.removeClass("error");this.autosaveEl.ancestor("body")&&this._anim({node:this.autosaveEl,from:{opacity:.5},to:{opacity:1},duration:.25,easing:p.Easing.easeOutStrong}).run()},this);a.run();this.editedSinceLastSave=false},_recordFieldData:function(n,e){p.Object.each(e.fields,function(e){if(p.Lang.isFunction(e.getValue)){var t=e.getValue();n[e.getName()]=t;if(void 0!==e.getAssociatedVars){var a=e.getAssociatedVars();for(var i=0;i<a.length;i++)n[a[i].name]=a[i].value}}e.fields&&this._recordFieldData(n,e)},this)},_isReactDataDirty:function(e){var a=false;p.Object.each(e.reactEls,function(e){var t=e.props.getData();a=a||t.isDirty},this);return a},_recordReactData:function(a,e){p.Object.each(e.reactEls,function(e){var t=e.props.getData();a=p.merge(a,t)},this);return a},getData:function(){var e={};for(var t in this.params.initialData)e[t]=this.params.initialData[t];this._recordFieldData(e,this);return this._recordReactData(e,this)},getField:function(e){var t=this.fields[e];if(p.Lang.isValue(t))return t;for(var a in this.fields)if(this.fields[a].getField){t=this.fields[a].getField(e);if(p.Lang.isValue(t))return t}return},getSection:function(e){return this.sections[e]},_renderFields:function(s,r,o,l){var c=33;p.Array.each(r,function(e,t){var a;var i;if(!e)return;var n=e.type;l||this.params.dontSetWidthOnFields||(l=this.params.width-2*c);if(l&&!isNaN(l)){this._debug.log("availableWidth: ",l);this._debug.log("fieldConfig.width: ",e.width);a=(e.ctor&&e.config?e.config.width:e.width)||1;i=a<=1?Math.floor(a*l):a}"splitter"===n?this._renderSplitter(e,t,r,s,o,l,i):"multi-frame"===n?this._renderMultiFrame(e,t,r,s,o,l,i):"section"===n?this._renderSection(e,t,r,s,o,l,i):"stack"===n?this._renderStack(e,t,r,s,o,l,i):e.ctor&&e.ctor===p.Squarespace.DialogFields.MultiFrame?this._renderDF2MultiFrame(e,t,r,s,o,l,i):this._renderField(e,t,r,s,o,l,i)},this)},_renderReactComponent:function(e,t){var a=window.CONFIG_PANEL.get("router");var i=p.merge({router:a,location:a.getCurrentLocation()},e.props);var n=s.createElement(e.component,i);r.render(n,t);this.reactComponentContainers.push(t);this.reactEls.push(n)},_renderSplitter:function(e,t,a,i,n,s,r){var o;var l=33;var c=p.Node.create('<div class="split-field clear '+(e.fields.length>1?"padding-adjust":"")+'"></div>');e.width||(e.width=1);if(s&&!isNaN(s)){c.setStyle("width",Math.round(e.width*s)+l+"px");o=s-l*(e.fields.length-1)}else o=n.get("offsetWidth")-l*(e.fields.length-1)-2*l;n.append(c);this._renderFields(i,e.fields,c,o);e.countHeight&&(this._takenHeight+=c.get("offsetHeight"));e.hidden&&c.hide()},_renderMultiFrame:function(e,t,a,i,n,s,r){var o=new p.Squarespace.DialogFieldGenerators["multi-frame"](e,this.params.initialData,this);o.type=e.type;o.append(i,a,n,s);o.getName()?this.fields[o.getName()]=o:this._noNameFields.push(o)},_renderDF2MultiFrame:function(e,t,a,i,n,s,r){var o;var l=p.merge(e,e.config,{dialog:this,data:this.params.initialData[e.config.name],render:n});o=new e.ctor(l);s&&o.get("boundingBox").setStyle("width",r+"px");var c=o.getName()||o.get("name");c?this.fields[c]=o:this._noNameFields.push(o);o.each(function(e){var t=e.getName()||e.get("name");t?this.fields[t]=e:this._noNameFields.push(e);i.tabFields.push(e);e.tab=i},this)},_renderSection:function(e,t,a,i,n,s,r){var o;var l;var c=p.Node.create('<div class="section-inner clear"></div>');var d="section-field container-field-wrapper field-wrapper clear ";void 0!==e.style&&(d+=e.style);var u=p.Node.create('<div class="'+d+'"></div>');u.append(c);n.append(u);e.width||(e.width=1);l=s;var g=Math.round(e.width*l);g&&u.setStyle("width",g+"px");o=Math.round(e.width*l);this._renderFields(i,e.fields,c,o);e.hidden&&u.hide();e.name&&(this.sections[e.name]=u)},_renderStack:function(e,t,a,i,n,s,r){var o;var l=33;var c=s;s||(c=this.params.width-2*l);var d=p.Node.create('<div class="stack-field stack-field-wrapper clear"></div>');n.append(d);e.width||(e.width=1);e.float&&d.setStyle("float",e.float);d.setStyle("width",Math.round(e.width*c)+"px");t!==a.length-1&&d.setStyle("paddingRight",l+"px");o=Math.round(e.width*c);this._renderFields(i,e.fields,d,o);e.hidden&&d.hide();e.name&&(this.sections[e.name]=d)},_renderField:function(e,t,a,i,n,s,r){var o;var l=p.merge(e,e.config||{},{dialog:this,render:n});var c=l.name||e.name;this._debug.isTimingEnabled()&&this._debug.time("render field: "+c);if(p.Lang.isUndefined(l.data)&&this.params.initialData&&!p.Lang.isUndefined(c)){l.data=this.params.initialData[c];l.panel=this}if(e.ctor)o=new e.ctor(l);else{if(!e.type){false;throw new Error("Could not find field constructor or field type.")}var d=this._convertToDialogField2Name(e.type);var u=p.namespace("Squarespace.DialogFields")[d];if(!u&&!p.Squarespace.DialogFieldGenerators[e.type])throw new Error("Unknown field type: "+e.type);this._debug.log("Generating field type: ",e.type);if(u)o=new u(l);else{false;var g=p.Squarespace.DialogFieldGenerators[e.type];o=new g(e,this.params.initialData,this);o.type=e.type;o.append(n)}}e.verticalSpan&&(this._verticalEl=o);if(e.countHeight&&!e.verticalSpan)if(o.getTakenHeight)this._takenHeight+=o.getTakenHeight();else{this._takenHeight+=o.get("boundingBox").get("offsetHeight");this._takenHeight+=parseInt(o.get("boundingBox").getStyle("marginTop"),10);this._takenHeight+=parseInt(o.get("boundingBox").getStyle("marginBottom"),10)}if(s)if(this._isDialogField2(o)){this._debug.log("setting width",r);o.get("boundingBox").setStyle("width",r+"px")}else if(o.html){this._debug.log("setting width",r);o.html.setStyle("width",r+"px")}o.resize&&o.resize();e.hidden&&o.temporaryHide(true);this._isDialogField2(o)?this.bodyEvents.push(o.on("dataStateChange",function(e){var t=e.newVal;this.fire("field-loading-change",{field:o,loading:t===t.LOADING})},this)):this.bodyEvents.push(o.on("loadingChange",function(e){this.fire("field-loading-change",{field:o,loading:e.newVal})},this));o.getName()?this.fields[o.getName()]=o:this._noNameFields.push(o);i.tabFields.push(o);o.tab=i;this._debug.isTimingEnabled()&&this._debug.timeEnd(h("render field: {fieldName}",{fieldName:c}))},_isDialogField2:function(e){return p.Lang.isValue(e)&&p.Lang.isValue(p.Squarespace.DialogField2)&&e instanceof p.Squarespace.DialogField2},_setState:function(e){p.Lang.isValue(p.Squarespace.DialogStates[e])?this.state=p.Squarespace.DialogStates[e]:console.warn("[Dialog] Invalid state.")},_isState:function(e){if(p.Lang.isString(e))return this.state===p.Squarespace.DialogStates[e];return this.state===e},resizeVerticalFields:function(){p.Array.each(this.verticalFields,function(e,t){var a=this.getBodyHeight()-e._takenHeight;if(this._isDialogField2(e)){a-=parseInt(e.get("boundingBox").getStyle("marginTop"),10);a-=parseInt(e.get("boundingBox").getStyle("marginBottom"),10);e.set("height",a)}else e.setHeight(a)},this)},renderTab:function(e,t){var a=p.Node.create('<div class="tab-wrapper"></div>');p.Lang.isValue(e.name)&&a.addClass("dialog-tab-"+e.name);a.setStyles({width:this.params.width+"px",left:t?"0px":this.params.width+"px"});this.bodyEl.append(a);e.tabFields=[];this._verticalEl=null;this._takenHeight=0;this._renderFields(e,e.fields||[],a);t&&e.reactData&&this._renderReactComponent(e.reactData,a.getDOMNode());e.noTabTitle&&a.addClass("noTabTitle");if(this._verticalEl){var i=parseInt(a.getStyle("paddingTop"),10);isNaN(parseInt(a.getStyle("marginTop"),10))||(i+=parseInt(a.getStyle("marginTop"),10));this._takenHeight+=i;var n=this._isDialogField2(this._verticalEl);n||this._verticalEl.setHeight||true;var s=this.getBodyHeight()-this._takenHeight;if(n){var r=this._verticalEl.get("boundingBox");s-=parseInt(r.getStyle("marginTop"),10);s-=parseInt(r.getStyle("marginBottom"),10);this._verticalEl.set("height",s)}else this._verticalEl.setHeight(s);this._verticalEl._takenHeight=this._takenHeight;this.verticalFields.push(this._verticalEl)}e.tabPanelObj=a;var o=a.get("offsetHeight");(!this.observedHeight||o>this.observedHeight)&&(this.observedHeight=o);t&&e.tabFields&&p.Array.forEach(e.tabFields,function(e){this._showField(e)},this);this.bodyEl.toggleClass("scrollable",!!e.scroll);t||a.addClass("hidden");this.updateTitle();return a},_convertToDialogField2Name:function(e){var t=l.createUrlSafeString(e).split("-");for(var a=t.length-1;a>=0;a--)t[a].capitalize&&(t[a]=t[a].capitalize());return t.join("")+"Field"},_destroyFields:function(){if(this.fields){p.Object.each(this.fields,function(e,t){e.destroy()},this);this._destroyNoNameFields()}this.fields={}},_destroyReactComponents:function(){p.Object.each(this.reactEls,function(e){e.props.onDestroy&&e.props.onDestroy()},this);this.reactComponentContainers.length&&p.Object.each(this.reactComponentContainers,r.unmountComponentAtNode);this.reactComponents=[]},_destroyNoNameFields:function(){p.Array.each(this._noNameFields,function(e){e&&e.destroy()},this);this._noNameFields=[]},destroyBody:function(){this.rendered=false;this._destroyFields();this._destroyReactComponents();this.bodyEl&&this.bodyEl._node&&this.bodyEl.empty();p.Array.each(this.params.tabs,function(e){e.tabPanelObj=null;e.tabFields=null});this._detachEventArray(this.bodyEvents);this.bodyEvents=[]},_detachEventArray:function(e){p.Array.each(e,function(e){e.detach()})},destroyButtons:function(){this._detachEventArray(this.buttonEvents);this.buttonEvents=[];this.buttonHolder&&this.buttonHolder._node&&this.buttonHolder.set("innerHTML","")},_destroy:function(){this.preDestroyCalled||this._preDestroy();this.destroyTimer=null;this.currentErrors=null;this.bodyHeight=null;this.destroyBody();this.destroyButtons();if(this.overlayEl&&!this.overlayEl.destroying){this.overlayEl.remove();this.overlayEl=null}this._onBeforeUnloadEvt&&this._onBeforeUnloadEvt.detach();this._detachEventArray(this.globalEvents);if(this.dd){this.dd.destroy();this.dd=null}this.globalEvents=[];if(this.el){this.el.remove(true);this.el=null;this.bodyEl=null}if(this.params.parentDialog){this.params.parentDialog.removeChildDialog(this);this.params.parentDialog=null}this._setState("CLOSED");this.position=null;this.anchorEl=null;if(this.__legacyRouterUnlisten){this.__legacyRouterUnlisten();this.__legacyRouterUnlisten=null}if(this.__legacyRouterUnlistenBefore){this.__legacyRouterUnlistenBefore();this.__legacyRouterUnlistenBefore=null}if(this.__legacyRouterUnload){this.__legacyRouterUnload();this.__legacyRouterUnload=null}}})},"1.0",{requires:["anim","attribute","datatype-date","dd","json","node","node-event-simulate","node-focusmanager","squarespace-debugger","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-legacy-multi-frame","squarespace-escmanager","squarespace-gizmo","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-util","squarespace-widgets-confirmation","transition"]})},6238:function(e,t,a){YUI.add("squarespace-dialog-field-2",function(d){var u="error";d.namespace("Squarespace.Widgets").DialogField2=d.namespace("Squarespace").DialogField2=d.Base.create("dialogField",d.Squarespace.Widgets.DataWidget,[d.Squarespace.DialogFieldLegacyInterface,d.WidgetParent,d.WidgetChild],{initializer:function(e){this._saveInitialData(e?e.data:null);this.publish("error-shown",{broadcast:2});this.publish("edited")},destructor:function(){this._destroyError();this.unplug(d.Plugin.WidgetAnim);this._initialData=void 0;this._errorFlyoutSub&&this._errorFlyoutSub.detach()},_destroyError:function(){if(this._errorNode){this._errorNode.remove(true);this._errorNode=null}},_saveInitialData:function(e){e=d.Lang.isValue(e)?e:this.get("data");d.Lang.isArray(e)&&this.get("cloneInitialData")?this._initialData=e.slice():d.Lang.isObject(e)&&this.get("cloneInitialData")?this._initialData=d.clone(e,true):this._initialData=e},setCurrentDataAsInitial:function(){this._saveInitialData()},renderUI:function(){d.Squarespace.DialogField2.superclass.renderUI.call(this);var e=this.get("boundingBox");var t=this.get("name");var a=this.get("testAttribute");t&&e.addClass("name-"+t);a&&e.setAttribute("data-test",a)},scrollIntoView:function(){this.get("contentBox").scrollIntoView()},toggleError:function(e){var t=this.get("boundingBox");if(this._errorHoverAnchor){t.removeClass("has-error");this._errorHoverAnchor.remove();this._errorHoverAnchor.destroy(true);this._errorHoverEvent.detach();this._errorHoverEvent=null;this._errorHoverAnchor=null}if(e){t.addClass("has-error");this._errorHoverAnchor=d.Node.create('<div class="error-hover">&#33;</div>');this._errorHoverAnchor.appendTo(t);this._errorHoverEvent=this._errorHoverAnchor.on("mouseenter",function(){t.addClass("error-is-hovering");this.showError(e)},this)}else this.hideError()},showError:function(r){if(!r||!this.get("rendered"))return;var o=this.get("boundingBox");var e=this.get("contentBox");var l=this.get("errorFlyoutAnchor")||e;var t=this.get("errorFlyoutAnimationTime");l.hasPlugin("flyoutPlugin")||l.plug(d.Squarespace.Animations.Flyout,{duration:t,renderTarget:this.get("errorFlyoutRenderTarget")});var c=l.flyoutPlugin;var a=d.bind(function(){o.addClass(u);this._destroyError();this._errorNode=d.Node.create('<div class="sqs-flyout-error-message">'+r+"</div>");var e=this.get("dialog");e&&this._errorNode.setStyle("zIndex",e.zIndex+10);this._errorNode.on(this.get("id")+"|click",function(e){e.halt();this.hideError()},this);var t=d.one(window).get("region");var a=d.Squarespace.NodeUtils.measureNode(this._errorNode).width;var i=l.get("region");var n;if(i.right+a<=t.right){n="rt";this._errorNode.addClass("out-from-right")}else if(i.left-a>t.left){n="lt";this._errorNode.addClass("out-from-left")}else{n="bl";this._errorNode.addClass("out-from-bottom");this._errorNode.setStyle("width",i.width)}c.setAttrs({node:this._errorNode,alignment:n});this._clearErrorSub=d.on(this.get("id")+"|click",this.hideError,this);var s=this.get("id");c.once(s+"|shown",function(e){this.fire("error-shown",{message:r})},this);this._errorFlyoutSub=l.once("flyout-shown",function(e){this._errorNode.setStyle("width","100%")},this);c.show()},this);if(c.get("visible")){this._isHiding=true;this._showErrorSub&&this._showErrorSub.detach();this._showErrorSub=c.once(this.get("id")+"|hidden",function(){this._showErrorSub=null;this._isHiding=false;a()},this);c.hide()}else a()},hideError:function(){if(!this.get("rendered")||this._isHiding||!this.get("boundingBox").getDOMNode())return;var t=this.get("boundingBox");t&&t.removeClass("error-is-hovering");t=this.get("boundingBox");var e=this.get("contentBox");var a=this.get("errorFlyoutAnchor")||e;if(!a.hasPlugin("flyoutPlugin")||!a.flyoutPlugin.get("visible"))return;if(this._clearErrorSub){this._clearErrorSub.detach();this._clearErrorSub=null}var i=a.flyoutPlugin;i.once(this.get("id")+"|hidden",function(e){t.removeClass(u);this.fire("error-hidden");this._destroyError()},this);i.hide()},didDataChange:function(){var e=this.get("data");if(this.get("readOnly"))return false;if(d.Lang.isArray(this._initialData))return d.JSON.stringify(this._initialData)!==d.JSON.stringify(e);if(d.Lang.isObject(this._initialData))throw new Error("DialogField base class will not compare objects. Define didDataChange for this field.");return this._initialData!==e},isEmpty:function(){var e=this.get("data");return""===e||0===e},revert:function(){this.set("data",this._initialData,{revert:true})},_getErrors:function(){return[]},isValid:function(){return!d.Lang.isArray(this.get("errors"))||0===this.get("errors").length}},{CSS_PREFIX:"sqs-dialog-field",ATTRS:{cloneInitialData:{value:true},strings:{},name:{value:null,validator:d.Squarespace.AttrValidators.isNullOrString},dialog:{value:null,validator:function(e){if(d.Lang.isNull(e))return true;if(!(e instanceof d.Squarespace.EditingDialog||e.constructor instanceof d.Squarespace.EditingDialog.constructor)){false;return false}return true}},readOnly:{value:false,validator:d.Squarespace.AttrValidators.isBoolean},required:{value:false,validator:d.Squarespace.AttrValidators.isBoolean},errors:{value:[],readOnly:true,getter:"_getErrors",validator:d.Squarespace.AttrValidators.isArray},errorFlyoutAnchor:{value:null,readOnly:true,validator:d.Squarespace.AttrValidators.isNullOrInstanceOf(d.Node)},errorFlyoutRenderTarget:{value:void 0},errorFlyoutAnimationTime:{value:.3},focusable:{value:true,validator:d.Lang.isBoolean},testAttribute:{value:null,validator:d.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","json-stringify","squarespace-animations","squarespace-attr-validators","squarespace-dialog-field-legacy-interface","squarespace-flyout-error-message-template","squarespace-node-flyout","squarespace-node-utils","squarespace-widgets-data-widget","widget-anim","widget-child","widget-parent"]})},6239:function(e,t){YUI.add("squarespace-dialog-field-legacy-interface",function(e){var t=e.namespace("Squarespace").DialogFieldLegacyInterface=function(i){this.inActiveFrame=true;e.Lang.isFunction(this.hideError)&&e.Do.after(function(){var e=i.dialog;e&&e.clearError(this)},this,"hideError",this);e.Do.after(function(){this.after(this.get("id")+"|dataChange",function(e){var t=i.dialog;t&&!e.silent&&t.fire("datachange",this);var a=this.get("name");a&&this.fire("value-changed",{name:a,value:e.newVal,oldValue:e.prevVal,field:this})},this)},this,"bindUI",this);e.Do.after(function(){i&&i.defaultHidden&&this.hide(true)},this,"syncUI",this)};t.NAME="dialogFieldLegacyInterface";t.prototype={temporaryHide:function(){this.hide()},temporaryShow:function(){this.show()},getName:function(){return this.get("name")},getType:function(){return this.name},getValue:function(){return this.get("data")},getErrors:function(){return this.get("errors")},getNode:function(){return this.get("boundingBox")},setValue:function(e,t){this.set("data",e,t)},clearError:function(){this.hideError()}}},"1.0",{requires:[]})},6240:function(e,t){YUI.add("squarespace-flyout-error-message-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["flyout-error-message.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function";s+='<div class="sqs-flyout-error-message">';if(r=a.message)r=r.call(t,{hash:{},data:n});else{r=t.message;r=typeof r===o?r.apply(t):r}(r||0===r)&&(s+=r);s+="</div>";return s})})();var t="flyout-error-message.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},6241:function(e,t,a){var i=a(757);var n=a(515);YUI.add("squarespace-node-flyout",function(l){l.namespace("Squarespace.Animations").Flyout=l.Base.create("flyoutPlugin",l.Plugin.Base,[],{initializer:function(e){this._mask=l.Node.create('<div class="flyout-animation-wrapper sqs-flyout-mask"></div>');this._mask.setStyles({position:"fixed",overflow:this.get("overflow")});this._mask.setStyle("z-index","300001");this._mask.setStyle("zIndex","300001");this._isShowing=false;this._isHiding=false},destructor:function(){this._anim&&this._anim.stop().destroy();this._mask.remove(true);l.detachAll(this.get("id")+"|*")},_onScroll:function(e){var t=this.get("host");(e.target.contains(t)||e.currentTarget.contains(t))&&this._updateMaskPosition()},_onResize:function(){this._updateMaskPosition()},show:function(){this.get("visible")||this._isShowing||this._animateFlyout(true)},hide:function(){this.get("visible")&&!this._isHiding&&this._animateFlyout(false)},_measureNode:function(e){return l.Squarespace.NodeUtils.measureNode(e)},_animateFlyout:function(e){var t=this._mask,a=this.get("node"),i=this._measureNode(a),n=this._getInitialFlyoutOffset();this._updateMaskPosition();if(this._anim){this._anim.stop(true);this._anim=null}if(e){t.setStyles({height:i.height,width:i.width+1});a.setStyles({position:"absolute",top:n.yOffset,left:n.xOffset});t.appendChild(a);var s=this.get("renderTarget")||l.one("body");s.appendChild(t)}this._anim=new l.Anim({duration:this.get("duration"),easing:this.get("easing"),node:a,to:{top:e?0:n.yOffset,left:e?0:n.xOffset}});if(this.get("animateOpacity")){this._anim.set("from.opacity",e?0:1);this._anim.set("to.opacity",e?1:0)}this._anim.on(this._yuid+"|end",function(){this._anim=null;if(e){this._isShowing=false;this._mousewheelEvent=l.on(this.get("id")+"|mousewheel",this._onScroll,this);this._resizeEvent=l.one(window).on(this.get("id")+"|resize",this._onResize,this)}else{this._isHiding=false;a.remove();t.remove();if(this._mousewheelEvent){this._mousewheelEvent.detach();this._mousewheelEvent=null}if(this._resizeEvent){this._resizeEvent.detach();this._resizeEvent=null}}this.set("visible",e);this.fire(e?"shown":"hidden",{flyout:a});this.get("host").fire((true,"shown"),{flyout:a})},this);e?this._isShowing=true:this._isHiding=true;a.inDoc()&&this._anim.run()},_updateMaskPosition:function(){if(!this._mask)return;var e=this._mask,t=this._getIntendedMaskPosition();i.isSubDesktop()&&window.innerHeight<t.y?e.setStyles({left:t,top:null,bottom:n.GRID_PX/2+"px"}):e.setStyles({left:t.x,top:t.y});return t},_getInitialFlyoutOffset:function(){var e=l.Squarespace.Animations.Flyout,t=this.get("alignment"),a=this._measureNode(this.get("node"));var i,n;switch(t){case e.LT:case e.LC:case e.LR:i=a.width;break;case e.TL:case e.TC:case e.TR:case e.BL:case e.BC:i=0;break;case e.RT:case e.RC:case e.RB:i=-1*a.width;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(t){case e.LT:case e.LC:case e.LB:case e.RT:case e.RC:case e.RB:n=0;break;case e.BL:case e.BC:case e.BR:n=-1*a.height;break;case e.TL:case e.TC:case e.TR:n=a.height;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{xOffset:i,yOffset:n}},_getIntendedMaskPosition:function(){var e=l.Squarespace.Animations.Flyout,t=this.get("alignment"),a=this.get("host").get("region"),i=this._measureNode(this.get("node"));var n,s;var r=l.DOM.docScrollY(),o=l.DOM.docScrollX();a.top-=r;a.bottom-=r;a.left-=o;a.right-=o;switch(t){case e.RT:case e.RC:case e.RB:n=a.right;break;case e.LT:case e.LC:case e.LB:n=a.left-i.width;break;case e.TL:case e.BL:n=a.left;break;case e.TC:case e.BC:n=a.left+a.width/2-i.width/2;break;case e.TR:case e.BR:n=a.right-i.width;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(t){case e.TL:case e.TC:case e.TR:s=a.top-i.height;break;case e.LT:case e.RT:s=a.top;break;case e.LC:case e.RC:s=a.top+a.height/2-i.height/2;break;case e.LB:case e.RB:s=a.bottom-i.height;break;case e.BL:case e.BC:case e.BR:s=a.bottom;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{x:n,y:s}}},{NS:"flyoutPlugin",TL:"tl",TC:"tc",TR:"tr",RT:"rt",RC:"rc",RB:"rb",BC:"bc",BL:"bl",BR:"br",LT:"lt",LC:"lc",Lb:"lb",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},alignment:{value:"rt",validator:function(e){var t=l.Squarespace.Animations.Flyout;switch(e){case t.TL:case t.TC:case t.TR:case t.LT:case t.RT:case t.LC:case t.RC:case t.LB:case t.RB:case t.BL:case t.BC:case t.BR:return true;default:false;return false}}},node:{value:null},animateOpacity:{value:true},renderTarget:{valueFn:function(){var e=this.get("host");if(e instanceof l.Node&&e.ancestor("body"))return e.ancestor("body");return l.one("body")}},overflow:{value:"hidden"},visible:{value:false}}})},"1.0",{requires:["base","node","plugin","squarespace-node-utils"]})},6242:function(e,t){YUI.add("squarespace-node-utils",function(s){s.namespace("Squarespace.NodeUtils");s.Squarespace.NodeUtils={measureNode:function(e){var t=e.inDoc();if(!t){e.setStyle("visibility","hidden");s.one("body").appendChild(e)}var a=e.cloneNode(true);a.setStyles({visibility:"hidden",display:"block",position:"absolute"});e.insert(a,"after");var i=a.get("offsetHeight");var n=a.get("offsetWidth");a.remove(true);if(!t){e.remove();e.setStyle("visibility",null)}return{height:i,width:n}},getClosestScrollingAncestor:function(e){return e.ancestor(s.Squarespace.NodeUtils.isScrollable,true,"body")},isScrollable:function(e){var t=getComputedStyle(e.getDOMNode()).overflowY;return"auto"===t||"scroll"===t}}},"1.0",{requires:[]})},6243:function(e,t){YUI.add("squarespace-widgets-data-widget",function(a){a.namespace("Squarespace.Widgets");var i="data-state-";var t=a.Squarespace.Widgets.DataWidget=a.Base.create("dataWidget",a.Squarespace.Widgets.SSWidget,[],{initializer:function(e){e.dataState||(this.getProperty("ASYNC_DATA")?this.set("dataState",this.getProperty("DATA_STATES").INITIALIZED):this.set("dataState",this.getProperty("DATA_STATES").LOADED))},renderUI:function(){t.superclass.renderUI.call(this);this._updateDataStateClassName()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this.after(e+"|dataChange",function(e){e.noSyncUI||this.syncUI()},this);this.after(e+"|dataStateChange",this._updateDataStateClassName,this)},_updateDataStateClassName:function(){var t=this.get("boundingBox"),e=this.get("dataState");a.Object.each(this.getProperty("DATA_STATES"),function(e){t.removeClass(i+e)});t.addClass(i+e)},setLoadingState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADING)},setLoadedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADED)},setLoadFailedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOAD_FAILED)},loadedSuccessfully:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADED},isLoading:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADING},loadFailed:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOAD_FAILED}},{CSS_PREFIX:"sqs-data-widget",ASYNC_DATA:false,DATA_STATES:{INITIALIZED:"initialized",LOADING:"loading",LOADED:"loaded",LOAD_FAILED:"load-failed"},ATTRS:{data:{value:null,validator:function(e){if(a.Lang.isUndefined(e)){console.warn(this.name+": Will not set data to undefined.");return false}return true}},dataState:{valueFn:function(){return this.getProperty("DATA_STATES").INITIALIZED}},preventRenderTemplate:{value:false,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget","widget"]})},6247:function(e,t){YUI.add("squarespace-dialog-fields",function(l){l.namespace("Squarespace");l.Squarespace.DialogField=Class.extend(l.Squarespace.Gizmo,{_name:"DialogField",initialize:function(e,t,a){this._super();var i={defaultHidden:false};this.config=l.merge(i,e);this.panel=a;this.dialog=a;this.initialData=l.merge({},t);this.className="";this.inActiveFrame=true;this.config&&"undefined"!==typeof this.config.name&&this.config.name in t&&(this.value=t[this.config.name])},hide:function(e){this.temporaryHide(e)},getTakenHeight:function(){return this.html.get("offsetHeight")},show:function(e){this.temporaryShow(e)},getName:function(){return this.config.name},getType:function(){return this.type},getDialog:function(){return this.dialog},append:function(e){e.append(this.html);this.config.defaultHidden&&this.temporaryHide(false)},resize:function(){},isValid:function(){return this.getErrors().length>0},getErrors:function(){if(this.config.validator&&this.config.validationErrorMsg&&!this.config.validator.call(this,this.dialog))return[this.config.validationErrorMsg];return[]},showError:function(e){if(!e)return;var t=this.errorFlyoutAnchor||this.control;t||console.error("dialog-field: [DialogField] No control or error flyout anchor set to throw form field error on. Set this.control or this.errorFlyoutAnchor to a node.");t.hasPlugin("flyoutPlugin")||t.plug(l.Squarespace.Animations.Flyout,{duration:.3});var a=t.flyoutPlugin;if(a.get("visible")){this._showErrorSub&&this._showErrorSub.detach();this._showErrorSub=a.once(this.getId()+"|hidden",function(){this._showErrorSub=null;this._doShowErrorFlyout(e)},this);a.hide()}else this._doShowErrorFlyout(e)},_doShowErrorFlyout:function(e){var t=this.errorFlyoutAnchor||this.control;var a=t.flyoutPlugin;this.html.addClass("error");if(!this._errorEl){this._errorEl=l.Node.create('<div class="flyout-error-message">'+e+"</div>");this._errorEl.setStyle("zIndex",this.dialog.zIndex+10);this._errorEl.on(this.getId()+"|click",function(e){e.halt()},this)}this._errorEl.setContent(e);var i=l.Squarespace.NodeUtils.measureNode(this._errorEl).width,n=t.getX()+t.get("offsetWidth")-(this.html.hasClass("thin")?-10:1),s=n+i,r=l.one(window).get("region").right,o=s>r;o&&this._errorEl.addClass("out-from-left");a.setAttrs({node:this._errorEl,alignment:o?"lt":"rt"});this._clearErrorSub=l.on(this.getId()+"|click",this.clearError,this.errorEl,this);a.show()},hideError:function(){var e=this.errorFlyoutAnchor||this.control;if(!e||!e.hasPlugin("flyoutPlugin")||!e.flyoutPlugin.get("visible"))return;this._clearErrorSub&&this._clearErrorSub.detach();var t=e.flyoutPlugin;this._subscribeOnce(t,this.getId()+"|hidden",function(e){this.html.removeClass("error")},this);t.hide()},clearError:function(){this.dialog.clearError(this);this.hideError()},scrollIntoView:function(){this.html.scrollIntoView()},updateInlineTitle:function(){},setHeight:function(e){this.control&&this.control.setStyle("height",e+"px")},getValue:function(){return this.value},setValue:function(e){var t=this.value;this.value=e;"config"in this&&"name"in this.config&&this.fire("value-changed",{name:this.config.name,value:e,oldValue:t,field:this})},temporaryHide:function(e){this.fire("hide",this);this.hidden=true;this.hideAnim&&this.hideAnim.stop();if(e){this.html.setStyle("display","none");this.fire("hidden",this)}else{this.hideAnim=this._anim({node:this.html,to:{opacity:0},duration:.35,easing:l.Easing.easeOutStrong});this.hideAnim.on("end",function(){this.html.setStyle("display","none");this.fire("hidden",this)},this);this.hideAnim.run()}},temporaryShow:function(){this.fire("show",this);this.hidden=false;this.hideAnim&&this.hideAnim.stop();this.html.setStyle("display","block");this.hideAnim=this._anim({node:this.html,to:{opacity:1},duration:.35,easing:l.Easing.easeOutStrong});this.hideAnim.on("end",function(){l.fire("shown",this);l.fire("showing",this);this.fire("shown")},this);this.hideAnim.run()},getNode:function(){return this.html},didDataChange:function(){if(this.config.ignoreChanges)return false;var e;e=!(!this.initialData||l.Lang.isUndefined(this.initialData[this.getName()])&&""===this.getValue())&&(l.Lang.isArray(this.initialData[this.getName()])?l.JSON.stringify(this.initialData[this.getName()])!==l.JSON.stringify(this.getValue()):this.getValue()!==this.initialData[this.getName()]);return e}})},"1.0",{requires:["anim","json","squarespace-gizmo","squarespace-node-flyout","squarespace-node-utils","squarespace-util","widget"]})},6248:function(e,t,a){var r=a(24).t;YUI.add("squarespace-gizmo",function(o){o.namespace("Squarespace");var t="squarespace-";var a="-bbox";var i=new RegExp("[ ]+","g");var n=new RegExp("[^a-zA-Z0-9\\-]","g");var s=function(e,n,s,r,t){var a=t?o.Array.reject:o.Array.filter;return a(e,function(e){for(var t=0;t<s.length;++t){var a=s[t];var i=r[t];if(e[a]!==i)return false}n&&n(e);return true})};var l=function(t,e,a,i,n){if(this._destroyed)return;if(o.Lang.isArray(e))return o.Array.map(e,function(e){return l.apply(this,[t].concat(o.Array(e)))},this);if(o.Lang.isObject(e)&&o.Lang.isFunction(e[t])){var s=[a,i,n||this];s=s.concat(Array.prototype.slice.call(arguments,5));var r=e[t].apply(e,s);this._eventSubList.push({object:e,event:a,eventSub:r});return r}throw new Error("Gizmo["+this._name+"]: Could not subscribe to event: "+a)};o.Squarespace.Gizmo=Class.create({_name:"Gizmo",_events:{render:{},rendered:{},destroy:{},destroyed:{}},initialize:function(e){o.augment(this,o.EventTarget,true,null,{prefix:this._name});this.params=o.merge(e);this._initState();var t=this;var a=function(e,t){this.publish(t,e)};while(null!==t&&void 0!==t){o.Object.each(t._events,a,this);t=t.superclass}},getClassNames:function(){var e=this;var t=[];for(;;e=e.superclass){if(!e)return t;t.push(e.getClassName())}},_initState:function(){this._el=null;this._parentEl=null;this._eventSubList=[];this._anims=[];this._timers=[];this._destroyed=false;this.destroyed=false;this._children=[];this._guid=o.guid();this._name||(this._name=r("No Name"))},getClassName:function(){return this._name},getId:function(){return this._guid},getCssClassName:function(){var e=this._name;e=e.trim().replace(i,"-").replace(n,"").toLowerCase();return t+e},getElement:function(){return this._el},render:function(e){this.fire("render");e=e||this._parentEl;if(this.params.noBoundingBox)this._el=this._render();else{this._el=o.Node.create("<div></div>");this._el.addClass(this.getCssClassName()+a);this._el.append(this._render())}e&&o.Lang.isFunction(e.append)&&e.append(this._el);this._parentEl=e;this.fire("rendered")},_render:function(){},_subscribe:function(e,t,a,i){var n=["on"].concat(o.Array(arguments));return l.apply(this,n)},_subscribeOnce:function(e,t,a,i){var n=["once"].concat(o.Array(arguments));return l.apply(this,n)},_subscribeBefore:function(e,t,a,i){var n=["before"].concat(o.Array(arguments));return l.apply(this,n)},_subscribeAfter:function(e,t,a,i){var n=["after"].concat(o.Array(arguments));return l.apply(this,n)},_unsubscribe:function(e,t){var a=t?["object","event"]:["object"];this._eventSubList=s(this._eventSubList,function(e){e.eventSub.detach()},a,o.Array(arguments),true)},_detach:function(e){this._eventSubList=s(this._eventSubList,function(e){e.eventSub.detach()},["eventSub"],[e],true)},_clearEvents:function(){var e=this._eventSubList;for(var t=0;t<e.length;++t)e[t].eventSub.detach();this._eventSubList=[]},destroy:function(){if(this._destroyed){false;return}if(!this._eventSubList){false;throw new Error("Gizmo["+this._name+"] was never initialzed.  Missing _super?")}this.fire("destroy");this._destroy();var e=0;this._clearEvents();this._eventSubList=[];var t=[];o.Array.each(this._anims,function(e){t.push(e)},this);o.Array.each(t,function(e){e.get("running")&&e.stop(false);e.destroy()});this._anims=null;var a=this._children;while(a.length>0){var i=a[0];i._removeParent();i.destroy()}this._children=null;var n=this._timers;for(e=0;e<n.length;++e){var s=n[e];s.cancel()}this._timers=null;if(this._el&&o.Lang.isFunction(this._el.remove)){this._el.remove();this._el=null}this._destroyed=true;this.destroyed=true;this.fire("destroyed")},_destroy:function(){},isDestroyed:function(){return this._destroyed},_setParent:function(e){this._parentGizmo=e},_removeParent:function(){if(this._parentGizmo){this._parentGizmo._removeChild(this);this._parentGizmo=null}},_addChild:function(e){if(!this._children)return;e._setParent&&e._setParent(this);this._children.push(e)},_removeChild:function(e){this._children.splice(this._children.indexOf(e),1)},_getChildren:function(){return this._children},_anim:function(e){if(this._destroyed)return;if(!e.node)throw new Error("Gizmo["+this._name+"]: Animation must specify a node!");var t;if(e.node.ancestor("body",true))if(e.node._node){t=new o.Anim(e);t.on("end",function(e){this._removeAnim(t)},this);this._anims.push(t)}else{false;t=new o.Anim}else{false;t=new o.Anim}return t},_removeAnim:function(e){var t=this._anims.indexOf(e);-1!==t&&this._anims.splice(t,1)},_trace:function(e){var t=this.getEvent(e);var a=t.getSubs();var i=[];var n=function(e,t){if(e.context&&e.context.getName)i.push(e.context.getName());else{var a={};a[e.fn.name]=e.fn.toString();i.push(a)}};for(var s=0;s<a.length;++s){var r=a[s];o.Object.each(r,n)}false;this.fire(e)},_later:function(e,t,a,i,n){if(this._destroyed)return;a=a||this;var s=o.later(e,a,t,i,n);this._timers.push(s);return s},_cb:function(e){var t=o.bind(function(){if(!this._destroyed)return e.apply(this,arguments)},this);return t}});o.augment(o.Squarespace.Gizmo,o.EventTarget);o.Squarespace.ZombieGizmo=Class.extend(o.Squarespace.Gizmo,{_name:"ZombieGizmo",_events:{resurrect:{},resurrected:{}},initialize:function(e){this._super(e)},destroy:function(){this._super();this.resurrect()},resurrect:function(){this.fire("resurrect");this._initState();this.fire("resurrected")}})},"1.0",{requires:["array-extras","event-custom","node"]})},6249:function(e,t){YUI.add("squarespace-dialog-legacy-multi-frame",function(o){o.namespace("Squarespace.DialogFieldGenerators");o.Squarespace.DialogFieldGenerators["multi-frame"]=Class.extend(o.Squarespace.DialogField,{initialize:function(e,t,a){this._super(e,t,a);this.frames={};this.activeEl=null;this.value=this.config.initialFrame;this.panel.bodyEvents.push(o.on("click",this.onClick,this.html,this))},onClick:function(e){this.panel.fire("datachange",this)},show:function(e){var t=this.frames[e];if(!!t&&t===this.activeEl)return;if(this.activeEl){this.activeEl.a&&this.activeEl.a.stop();var a=this.activeEl.fields;this.activeEl.a=this._anim({node:this.activeEl.el,to:{height:0},duration:.3,easing:o.Easing.easeOutStrong});a.forEach(this.setInActiveFrame(false),this);this.activeEl.a.on("end",function(e){e.target.get("node").addClass("hidden")},this);this.activeEl.a.run()}t.a&&t.a.stop();this.activeEl&&t.el.ancestor().insertBefore(t.el,this.activeEl.el.next());t.el.removeClass("hidden");var i=t.el.getStyle("height");t.el.setStyles({height:null});t.realHeight=t.el.get("offsetHeight");t.el.setStyles({height:i});t.a=this._anim({node:t.el,to:{height:t.realHeight},duration:.3,easing:o.Easing.easeOutStrong});t.a.on("end",function(e,t){for(var a=0;a<t.fields.length;++a){var i=this.panel.fields[t.fields[a].name];i&&i.updateInlineTitle&&i.updateInlineTitle()}this.focusCurrentFrame()},this,t);t.a.run();t.fields.forEach(this.setInActiveFrame(true),this);this.activeEl=t;this.value=e},focusCurrentFrame:function(){var e;for(var t=0;t<this.activeEl.fields.length;++t){e=this.activeEl.fields[t];var a=this.panel.fields[e.name||o.Object.getValue(e,["config","name"])];if(o.Lang.isValue(a)&&a.getNode){a.getNode().focus();return}}},setInActiveFrame:function(a){return function(e){if(e.name){var t=this.panel.getField(e.name);t.inActiveFrame=a;t.fire("mutli-frame-focus")}}},append:function(e,t,a,i){for(var n in this.config.frames){var s=this.config.frames[n];var r=o.Node.create('<div class="frame-wrapper clear"></div>');a.append(r);this.panel._renderFields(e,s.fields,r,i);this.frames[n]=this.config.frames[n];this.frames[n].el=r;this.frames[n].realHeight=r.get("offsetHeight");if(n!=this.config.initialFrame){r.setStyle("height","0px");r.addClass("hidden");this.frames[n].visible=false;this.config.frames[n].fields.forEach(this.setInActiveFrame(false),this)}else{this.activeEl=this.frames[n];this.frames[n].visible=true;this.config.frames[n].fields.forEach(this.setInActiveFrame(true),this)}}}})},"1.0",{requires:["anim","squarespace-dialog-fields","squarespace-util","widget"]})},6250:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(2));var n=i(a(8));var r=i(a(9));var o=i(a(34));var l=i(a(5065));var c=function(){function e(){(0,n.default)(this,e);this.bindActions(l.default);this.state={title:"",assetUrl:"",collectionId:"",urlId:"",seoDescription:"",seoSocialSharingImageId:"",seoTitle:"",isContentItem:false,isHomepage:false,isHidden:false,isDirty:false,isLoading:true,categoryPagesSeoHidden:false,tagPagesSeoHidden:false,supportsFriendlyUrls:false}}(0,r.default)(e,[{key:"onUpdateField",value:function e(t){var a;var i=t.field,n=t.value;this.setState((a={},(0,s.default)(a,i,n),(0,s.default)(a,"isDirty",true),a))}},{key:"onUpdateFieldNoEdit",value:function e(t){var a=t.field,i=t.value;this.setState((0,s.default)({},a,i))}},{key:"onFetchData",value:function e(t){this.setState({isLoading:true,collectionId:t})}},{key:"onFetchDataSuccess",value:function e(t){var a=t.categoryPagesSeoHidden,i=void 0!==a&&a,n=t.isHomepage,s=void 0!==n&&n,r=t.isContentItem,o=void 0!==r&&r,l=t.isNewContentItem,c=void 0!==l&&l,d=t.seoData,u=void 0===d?{}:d,g=t.tagPagesSeoHidden,p=void 0!==g&&g,h=t.title,f=void 0===h?"":h,m=t.urlId,v=void 0===m?"":m;var b=u.seoImageId;var y=u.seoTitle,S=u.seoDescription,q=u.seoHidden;var _=f;_=this.state.title||f;if(c){y=this.state.seoTitle||y;S=this.state.seoDescription||S;q=this.state.isHidden||q}this.setState({categoryPagesSeoHidden:i,isContentItem:o,isDirty:false,isHidden:q,isHomepage:s,isLoading:false,seoDescription:S,seoSocialSharingImageId:b,seoTitle:y||"",tagPagesSeoHidden:p,title:_,urlId:v})}}]);return e}();var d=o.default.createStore(c,"SEOContentCollectionTabStore");t.default=d;e.exports=t.default},6251:function(e,t){var a={README_PAGE_NAME:"readme",MAX_SMUGMUG_GALLERY_COUNT:20,MAX_SMUGMUG_GALLERY_SIZE:50,MAX_BLOCKS_PER_LAYOUT:60,MAX_TRACKS_IN_ALBUM:60,MAX_ITEMS_IN_USER_ORDERABLE_COLLECTION:250,MAX_PRODUCTS_IN_COLLECTION:200,NESTED_CATEGORIES_LIMIT:1e4,SQUARESPACE_SEVEN_PREVIEW_COOKIE:"squarespace_seven_preview",SQUARESPACE_SIX_OVERRIDE_COOKIE:"squarespace_six_override",PREVIEW_FRAME_EXPANDED_COOKIE:"seven_frame_expanded",DISABLE_USER_SCRIPTS_COOKIE:"disable-user-scripts",IGNORED_ITEM_ANNOTATION_SELECTORS:["sqs-simple-like","sqs-add-to-cart-button","product-variants","product-quantity-input","sqs-suppress-edit-mode"],REGISTERED_ACTIONS_FOR_NEXT_LOAD_STORE_KEY:"sqs_actions_for_next_load",DAMASK_URL_PREVIEW_SEPARATOR:"|",MAX_TAG_LENGTH:50,MAX_CATEGORY_LENGTH:25,PASSWORD_MASK:"__MASKED_FIELD__",DRAG_CLICK_TIME_THRESHOLD:300};e.exports=a},6263:function(e,t,a){"use strict";var i={DEFAULT_SLIDER_ASPECT_RATIO:50,RERENDER_ATTR_WHITELIST:["aspectRatio","autoplay","autoplay-duration","lightbox","lightboxTheme","methodOption","padding","thumbnail-strip-height","thumbnail-strip-margin","transientGallery","vSize"]};e.exports=i},6264:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(27));var r=i(a(2));var n=i(a(8));var o=i(a(9));var l=i(a(183));var c=i(a(565));var d=i(a(34));var u=i(a(6265));var g=i(a(9001));function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f={selectionState:{},userData:null,userDataRequestInitiated:false,userDataRequestResolved:false};var m=function(){function e(){(0,n.default)(this,e);this.bindActions(u.default);this.state=(0,c.default)(f)}(0,o.default)(e,[{key:"onReset",value:function e(t){this.setState(function(e){return{selectionState:h({},e.selectionState,(0,r.default)({},t,null))}})}},{key:"onChange",value:function e(t){var a=(0,s.default)(t,2),i=a[0],n=a[1];this.setState(function(e){return{selectionState:h({},e.selectionState,(0,r.default)({},i,h({},e.selectionState[i],{},n)))}})}},{key:"onStartEditing",value:function e(i){this.setState(function(e){var t={editing:true,initialDatabaseState:(0,c.default)(i)};if(e.userDataRequestResolved){var a=(0,g.default)(e.userData,i);t=h({},t,{},a,{stateBeforeEditing:(0,c.default)(a)})}return{selectionState:h({},e.selectionState,(0,r.default)({},i.clientId,t))}})}},{key:"onRevertEdits",value:function e(t){this.setState(function(e){return{selectionState:h({},e.selectionState,(0,r.default)({},t,h({},e.selectionState[t],{editing:false,stateBeforeEditing:null},e.selectionState[t].stateBeforeEditing)))}})}},{key:"onCommitEdits",value:function e(t){this.setState(function(e){return{selectionState:h({},e.selectionState,(0,r.default)({},t,h({},e.selectionState[t],{editing:false,stateBeforeEditing:null})))}})}},{key:"onMaybeFetchData",value:function e(t){var a=t.fetchStarted;a&&this.setState({userDataRequestInitiated:true,userDataRequestFailed:false})}},{key:"onFetchDataFailure",value:function e(){this.setState({userDataRequestInitiated:false,userDataRequestFailed:true})}},{key:"onResolveFetchDataFailure",value:function e(){this.setState({userDataRequestFailed:false})}},{key:"onFetchDataSuccess",value:function e(r){this.setState(function(e){var t={};for(var a in e.selectionState){var i=e.selectionState[a];if(!i)continue;var n=!e.userData&&!r||!(0,l.default)(e.userData,r);if(n){var s=(0,g.default)(r,i.initialDatabaseState||{});t[a]=h({},s,{stateBeforeEditing:(0,c.default)(s),editing:i.editing})}else t[a]=(0,c.default)(i)}return{userDataRequestInitiated:false,userDataRequestResolved:true,userData:r,selectionState:t}})}}]);return e}();var v=d.default.createStore(m,"SchedulingEditorDialogStore");t.default=v;e.exports=t.default},6265:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(44));var n=i(a(52));var s=i(a(8));var o=i(a(9));var l=i(a(34));var c=a(8999);var d=i(a(6264));var u=function(){function e(){(0,s.default)(this,e);this.generateActions("revertEdits","commitEdits","fetchDataSuccess","fetchDataFailure","resolveFetchDataFailure","change","reset")}(0,o.default)(e,[{key:"startEditing",value:function e(t){var a=this;return function(e){e(t);a.maybeFetchData()}}},{key:"maybeFetchData",value:function e(){var s=this;return function(){var t=(0,n.default)(r.default.mark(function e(a){var i,n;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=d.default.getState();if(!i.userDataRequestInitiated){t.next=5;break}a({fetchStarted:false});t.next=16;break;case 5:a({fetchStarted:true});t.prev=6;t.next=9;return(0,c.fetchAcuityData)();case 9:n=t.sent;s.fetchDataSuccess(n);t.next=16;break;case 13:t.prev=13;t.t0=t["catch"](6);s.fetchDataFailure();case 16:case"end":return t.stop()}},e,null,[[6,13]])}));return function(e){return t.apply(this,arguments)}}()}}]);return e}();var g=l.default.createActions(u);t.default=g;e.exports=t.default},6266:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.initialSchedulingState=t.ALL_CLASSES_INDEX=void 0;var n=i(a(5331));var s=-1;t.ALL_CLASSES_INDEX=s;var r={schedulingPageGroup:n.default.ALL,calendarIndex:0,categoryIndex:0,classIndex:s,appointmentTypeIndex:0,acuityUrl:"",urlValidationErrorMessage:""};t.initialSchedulingState=r},6268:function(e,t,a){"use strict";var n=a(58);var s=a(5076);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=n.duration(e);var a=t.seconds();var i=Math.floor(t.subtract(n.duration(a,"s")).asMinutes());return i+":"+s(a,2,0)}},6269:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1005));var s=i(a(1310));var o=a(4119);var r=i(a(2026));var l=a(24);var c=i(a(517));var u=i(a(43));var g=i(a(816));var d="tweak-product-basic-item-variant-picker-layout-boxes";var p="data-variant-option-name";function h(e){var t=s.default.getStoreCurrency();var a=r.default.fromCents(e,t);return n.default.formatter.format(a)}function f(t,a){return Object.keys(t).every(function(e){return t[e]===a[e]})}function v(e,a){return e.find(function(e){var t=e.attributes;return f(a,t)})}function b(e){return e.unlimited||e.qtyInStock>0}function m(){var e=(0,l.t)("Sold Out");var t=(0,u.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","customSoldOutText"]);return t||e}function y(e,t){return e.filter(function(e){return!!f(t,e.attributes)&&!b(e)})}function S(){return!!document.querySelector(".".concat(d))}function q(e){e.forEach(function(e){e.forEach(function(e){e.value&&(e.innerHTML=e.value)})})}function _(e,t,a){if(!t){e.textContent=(0,l.t)("Unavailable");return}if(t.onSale){e.textContent=h(t.salePrice);var i=a.createElement("span");i.textContent=" ";e.appendChild(i);var n=a.createElement("span");n.className="original-price";n.textContent=h(t.price);e.appendChild(n)}else e.textContent=h(t.price)}function C(e,t,a,i){if(!a||!t){e.textContent=(0,l.t)("Unavailable");return}var n=JSON.parse(t);if(a.onSale){e.textContent=(0,o.getSubscriptionPriceString)(n,h(a.salePrice));var s=i.createElement("span");s.textContent=" ";e.appendChild(s);var r=i.createElement("span");r.className="original-price";r.textContent=(0,o.getSubscriptionPriceString)(n,h(a.price));e.appendChild(r)}else e.textContent=(0,o.getSubscriptionPriceString)(n,h(a.price))}function E(e,t,a){if(e)t.setAttribute("data-variant-in-stock",e);else{var i=m();var n=a.createElement("div");n.className="variant-out-of-stock";n.textContent=i;t.appendChild(n)}}function k(a,e){var t=e.parentElement.querySelectorAll(".product-scarcity[data-variant-attributes]");t.forEach(function(e){if(!a){e.hidden=true;return}try{var t=JSON.parse(e.dataset.variantAttributes);f(t,a.attributes)&&e.hidden?e.hidden=false:e.hidden=true}catch(e){c.default.trackCaughtError("common","updateScarcityAlert",e.stack)}})}function w(t,e){var a=e.parentElement.querySelectorAll(".product-restock-notification");a.forEach(function(e){if(!t){e.hidden=true;return}t.id===e.getAttribute("data-variant-id")?e.hidden=false:e.hidden=true})}function T(e){var i={};var n=[];e.forEach(function(e){var t=e.value;var a=e.getAttribute(p);0===e.selectedIndex?n.push(a):i[a]=t});return{optionSelections:i,unselectedOptions:n}}function I(e){var n={};var s=[];e.forEach(function(e){var t=e.getAttribute(p);var a=Array.from(e.getElementsByTagName("input"));var i=a.find(function(e){return e.checked});i?n[t]=i.value:s.push(t)});return{optionSelections:n,unselectedOptions:s}}function A(e,t,a){var i=T(t),n=i.optionSelections,s=i.unselectedOptions;var r=e.target.getAttribute(p);if(1===s.length&&r!==s[0])return;if(s.length<=1){var o=t.find(function(e){return e.getAttribute(p)===r});var l=(0,g.default)(n,function(e,t){return t!==r});var c=y(a,l);var d=m();o.forEach(function(t){c.forEach(function(e){t.value===e.attributes[r]&&(t.innerHTML="".concat(t.value," (").concat(d,")"))})})}}function x(e,t){var a=I(e),i=a.optionSelections,n=a.unselectedOptions;e.forEach(function(e){var t=e.getElementsByClassName("variant-radiobtn");t.forEach(function(e){e.classList.remove("variant-unavailable")})});if(1===n.length){var s=n[0];var r=e.find(function(e){return e.getAttribute(p)===s});var o=(0,g.default)(i,function(e,t){return t!==s});var l=y(t,o);var c=r.getElementsByClassName("variant-radiobtn");c.forEach(function(t){l.forEach(function(e){t.value===e.attributes[s]&&t.classList.add("variant-unavailable")})})}}function L(e){var t=e.productVariantsEl,a=e.productVariants,i=e.optionSelects,n=e.radioButtonWrappers,s=e.productPriceEl,r=e.initialPriceHTML,o=e.doc;t.removeAttribute("data-unselected-options");t.removeAttribute("data-selected-variant");t.removeAttribute("data-variant-in-stock");Array.from(t.getElementsByClassName("variant-out-of-stock")).forEach(function(e){return e.remove()});var l;var c;if(S()){var d=I(n);l=d.optionSelections;c=d.unselectedOptions}else{var u=T(i);l=u.optionSelections;c=u.unselectedOptions}t.setAttribute("data-unselected-options",JSON.stringify(c));if(c.length>0){s&&s.innerHTML!==r&&(s.innerHTML=r);k(null,t);w(null,t)}else{var g=v(a,l);var p=!!g;if(p){t.setAttribute("data-selected-variant",JSON.stringify(g));t.dispatchEvent(new CustomEvent("variant:change",{detail:{selectedVariant:g}}))}if(s){var h="true"===t.getAttribute("data-is-subscribable");if(h){var f=t.getAttribute("data-subscription-plan");C(s,f,g,o)}else _(s,g,o)}if(p){var m=b(g);E(m,t,o)}k(g,t);w(g,t)}}function D(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var t;var a=(0,u.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","soldOutVariantsDropdownDisabled"]);var i=(0,u.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","restockNotificationsEnabled"]);var d=!i&&!a;t=e?Array.from(e.getElementsByClassName("product-variants")):Array.from(c.getElementsByClassName("product-variants"));t.filter(function(e){return e.getAttribute("data-variants")}).forEach(function(t){var a=JSON.parse(t.getAttribute("data-variants"));var i=Array.from(t.getElementsByTagName("select"));var n=Array.from(t.getElementsByClassName("variant-radiobtn-wrapper"));var s=t.parentElement.getElementsByClassName("product-price")[0];var r;s&&(r=s.innerHTML);L({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:n,productPriceEl:s,initialPriceHTML:r,doc:c});for(var e=0,o=i;e<o.length;e++){var l=o[e];l.addEventListener("change",function(e){L({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:n,productPriceEl:s,initialPriceHTML:r,doc:c});d&&q(i)});d&&l.addEventListener("mousedown",function(e){q(i);A(e,i,a)})}n.forEach(function(e){e.addEventListener("click",function(e){L({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:n,productPriceEl:s,initialPriceHTML:r,doc:c});x(n,a)})})})}var N={initializeVariantDropdowns:D};t.default=N;e.exports=t.default},6270:function(e,t,a){"use strict";var i=a(853);var n=a(4172);e.exports=i(n)},6271:function(e,t,a){"use strict";var i=a(228);var n=",";var s=function e(t){return i.post("/api/content-items/"+t+"/sentiment/like").then(function(e){var t=e.data;return t})};var r=[];var o=null;var l=function e(){var t=r.map(function(e){return e.itemId}).join(n);i.get("/api/blog-like-count/".concat(t)).then(function(e){var t=e.data;r.forEach(function(e){if(t.hasOwnProperty(e.itemId)){e.resolve(t[e.itemId]);return}e.reject()});r=[];o=null})};var c=function e(a){return new Promise(function(e,t){r.push({itemId:a,resolve:e,reject:t});null!==o&&clearTimeout(o);o=setTimeout(l,100)})};var d=function e(t){return c(t)};e.exports={like:s,getLikeCount:d}},6273:function(e,t,a){"use strict";var i;e.exports={onChange:function e(){var t;if(!i)return;return(t=i).onChange.apply(t,arguments)},onBeforeChange:function e(t){if(!i)return;return i.onBeforeChange(t)},onBeforeUnload:function e(t){if(!i)return;return i.onBeforeUnload(t)},setRouter:function e(t){i=t}}},6274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(5077);var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!t.document.getElementById(i.FULL_PAGE_CART_ROOT_ID)};t.default=n;e.exports=t.default},6275:function(e,t,a){"use strict";var i=a(4);var u=i(a(977));var o=i(a(1032));var r=i(a(6430));var l=function e(t,a){var i=0;var n=(0,o.default)(t[0],".".concat(a),function(){return++i>3});if(!n){var s=t[0];var r=s.parentNode;n=r.ownerDocument.createElement("div");n.classList.add(a);r.insertBefore(n,s)}t.forEach(function(e){return n.appendChild(e)});return n};var c=function e(t){var a=t.querySelector(".squarespace-opentable-new-age-wrapper");a.classList.add("loaded");a.classList.remove("loading")};var g=function e(t){var a=t.querySelector(".squarespace-opentable-new-age-wrapper");if(!a)return Promise.reject("[opentablev2] No wrappers");a.classList.add("loading");if(a.querySelector("iframe")){c(t);return Promise.resolve()}var i=(0,r.default)({parent:a,selector:".ot-date-picker, .ot-time-picker, .ot-party-size-picker"}).then(function(e){return l(e,"squarespace-opentable-picker-wrapper")});var n=(0,r.default)({parent:a,selector:".ot-dtp-picker-button"}).then(function(e){return l(e,"squarespace-opentable-button-wrapper")});var s=(0,r.default)({parent:a,selector:".ot-title"}).then(function(e){e.forEach(function(e){var t=e.innerHTML;var a=e.ownerDocument.createElement("h1");a.classList.add("squarespace-ot-title");a.innerHTML=t;e.parentNode.insertBefore(a,e);e.parentNode.removeChild(e)})});return Promise.all([i,n,s]).then((0,r.default)({parent:a,selector:".ot-select-label"})).then(function(){return c(t)}).catch(function(e){console.error("[opentable] widget DOM never rendered")})};var n=function e(c,d){return new Promise(function(t,a){var n=d.querySelector("script");var e=d.clientWidth>850?"wide":"standard";var i=c.Y.Squarespace.Utils&&c.Y.Squarespace.Utils.isInDamaskFrame();var s=i?"false":"true";var r=n.getAttribute("src");var o=r.replace(/&(iframe|overlay|theme)=\w+/g,"");var l="".concat(o,"&iframe=").concat(s,"&overlay=false&theme=").concat(e);(0,u.default)(l,{before:function e(t,a){var i=n.parentNode;try{c.OT&&c.OT.Events&&Object.keys(c.OT.Events.get()).forEach(function(e){return c.OT.Events.remove(e)});c.oc&&c.oc.events.reset()}catch(e){console.error(e.message)}i.innerHTML="";i.appendChild(a);return false},success:function e(){try{i&&c.oc&&c.oc.renderUnloadedComponents();g(d).then(function(){if(c.oc&&d.querySelector(".ot-hide")){var e=d.querySelector(".ot-dtp-picker");c.oc.$(e).OTdtp("init")}t()})}catch(e){console.error(e.message);a("[opentable] could not reloadScript and reinit block")}},error:function e(){a("[opentable] loadjs failed")}})})};e.exports=function(e){var t=e.ownerDocument.defaultView;t.Squarespace.SQUARESPACE_INITIALIZED_ONCE?n(t,e).catch(function(e){console.error(e)}):g(e)}},6392:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var o=i(a(2));var r=a(5077);var l=a(24);var c=100;var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>c?"".concat(c,"+"):t.toString()};var u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>c?(0,l.pluralize)({one:"More than one item in cart",other:"More than {%n} items in cart"},c,void 0):(0,l.pluralize)({one:"One item in cart",other:"{%n} items in cart"},t,void 0)};var g=function(){(0,s.default)(r,null,[{key:"syncAll",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.instances.forEach(function(e){return e.sync(t)})}},{key:"mountAll",value:function e(){var t=Array.from(document.getElementsByClassName(r.CONTAINER_CLASSNAME));for(var a=0,i=t;a<i.length;a++){var n=i[a];r.instances.push(new r(n))}}},{key:"unmountAll",value:function e(){r.instances=[]}}]);function r(e){(0,n.default)(this,r);(0,o.default)(this,"initialized",false);(0,o.default)(this,"containerEl",null);(0,o.default)(this,"quantityEl",null);(0,o.default)(this,"subtotalEl",null);this.containerEl=e;this.containerEl.classList.add(r.CLASSNAME);this.containerEl.setAttribute("data-test","continue-to-cart");this.quantityEl=e.getElementsByClassName(r.QUANTITY_CLASSNAME)[0];this.subtotalEl=e.getElementsByClassName(r.SUBTOTAL_CLASSNAME)[0]}(0,s.default)(r,[{key:"sync",value:function e(t){var a=t.items,i=void 0===a?0:a,n=t.subtotal,s=void 0===n?"":n;if(!this.initialized&&this.containerEl){this.containerEl.classList.add(r.INITIALIZED_CLASS);this.initialized=true}if(this.containerEl)if(this.quantityEl){this.quantityEl.textContent=d(i);this.containerEl.setAttribute("aria-label",u(i))}else this.containerEl.setAttribute("aria-label",(0,l.t)("Cart",void 0));this.subtotalEl&&(this.subtotalEl.textContent=s)}}]);return r}();t.default=g;(0,o.default)(g,"CONTAINER_CLASSNAME",r.TEMPLATE_CART_CONTAINER_CLASS);(0,o.default)(g,"QUANTITY_CLASSNAME",r.TEMPLATE_CART_QUANTITY_CLASS);(0,o.default)(g,"SUBTOTAL_CLASSNAME",r.TEMPLATE_CART_SUBTOTAL_CLASS);(0,o.default)(g,"CLASSNAME",r.TEMPLATE_CART_CLASS);(0,o.default)(g,"INITIALIZED_CLASS",r.TEMPLATE_CART_INITIALIZED_CLASS);(0,o.default)(g,"instances",[]);e.exports=t.default},6395:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(2));var r="sqs-pdp-gallery-slide";var o="sqs-pdp-gallery-slide-active";var l="sqs-pdp-gallery-slide-transition";var c="ProductItem-gallery-slides-item";var d="ProductItem-gallery-thumbnails-item";var u="sqs-active-slide";var g=0;var p=function e(t,a){var i=this;(0,n.default)(this,e);(0,s.default)(this,"thumbnails",void 0);(0,s.default)(this,"images",void 0);(0,s.default)(this,"currentIndex",g);(0,s.default)(this,"incrementCurrentIndex",function(){var e=(i.currentIndex+1)%i.images.length;i.setNewIndex(e)});(0,s.default)(this,"decrementCurrentIndex",function(){var e=i.currentIndex-1;e=e<0?e+i.images.length:e;i.setNewIndex(e)});(0,s.default)(this,"setNewIndex",function(e){if(e===i.currentIndex)return;i.images.forEach(function(e){return e.classList.remove(l)});i.images[e].classList.add(l);i.images[i.currentIndex].classList.add(l);i.setInactiveImage(i.currentIndex);i.setActiveImage(e);i.currentIndex=e});(0,s.default)(this,"destroy",function(){i.images.forEach(function(e){e.classList.remove(o,u,r,l)});i.thumbnails.forEach(function(e){e.removeEventListener("click",i.handleThumbnailClick)});var e=document.querySelector("iframe#sqs-site-frame");null!==e&&e.contentWindow?e.contentWindow.removeEventListener("keyup",i.handleKeypress):document.removeEventListener("keyup",i.handleKeypress)});(0,s.default)(this,"handleKeypress",function(e){var t=e.key||e.keyCode;"ArrowRight"===t||39===t?i.incrementCurrentIndex():"ArrowLeft"!==t&&37!==t||i.decrementCurrentIndex()});(0,s.default)(this,"handleThumbnailClick",function(e){var t=e.currentTarget;var a=t.getAttribute("data-thumbnail-index");a&&i.setNewIndex(+a-1)});(0,s.default)(this,"setActiveImage",function(e){return i.images[e].classList.add(o,u)});(0,s.default)(this,"setInactiveImage",function(e){return i.images[e].classList.remove(o,u)});(0,s.default)(this,"attachEventListeners",function(){i.thumbnails.forEach(function(e){e.addEventListener("click",i.handleThumbnailClick)});var e=document.querySelector("iframe#sqs-site-frame");null!==e&&e.contentWindow?e.contentWindow.addEventListener("keyup",i.handleKeypress):document.addEventListener("keyup",i.handleKeypress)});this.images=Array.from(t.getElementsByClassName(c));this.images.forEach(function(e,t){t===g&&e.classList.add(o,u);e.classList.add(r)});this.thumbnails=Array.from(a.getElementsByClassName(d));this.attachEventListeners()};t.default=p;e.exports=t.default},6404:function(e,t,a){"use strict";var i=a(74);var n=a(6405);var s=a(6408);var r=a(5190);var o=i({getStores:function e(){return[s]},getPropsFromStores:function e(){var t=s.getState(),a=t.isLoading,i=t.isVisible,n=t.shouldLoadIFrame;return{isLoading:a,isVisible:i,shouldLoadIFrame:n,onIFrameLoaded:r.frameLoaded}}},n);e.exports=o},6405:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var u=a(1);var g=a(0);var p=a(1090);var h=a(6406);var f=a(5158);var m=a(5086);var v=a(15);var b=a(24),y=b.t;var S=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.onMessageReceived,i=t.frameOrigin;a&&(this.unsubscribe=f.subscribe(a,i));document.body.clientWidth<800&&p(window,{left:0,top:0},{minDuration:0,maxDuration:0})}},{key:"componentWillUnmount",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function e(){var t=this.props,a=t.isVisible,i=t.shouldLoadIFrame,n=t.isLoading,s=t.onIFrameLoaded,r=t.parentOrigin;var o=encodeURIComponent(r);var l="/config/authentication-frame/comment-login/squarespace?origin=".concat(o);return g.createElement("div",{className:v(h.overlay,(0,c.default)({},h.shown,a))},g.createElement(m,{isVisible:a&&n}),i&&g.createElement("iframe",{className:v((0,c.default)({},h.show,!n)),onLoad:s,src:l,title:y("comment login")}))}}]);return a}(g.Component);(0,c.default)(S,"propTypes",{isVisible:u.bool.isRequired,isLoading:u.bool.isRequired,shouldLoadIFrame:u.bool.isRequired,onIFrameLoaded:u.func,onMessageReceived:u.func,parentOrigin:u.string,frameOrigin:u.string});(0,c.default)(S,"defaultProps",{isIFrameLoaded:false,isRedirecting:false,isVisible:false});e.exports=S},6406:function(e,t,a){var i=a(6407);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},6407:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".CommentLogin-overlay-3n0sp {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1000;\n  background: #ffffff;\n  opacity: 0;\n  transition: opacity 0.4s cubic-bezier(0.645, 0.045, 0.355, 1);\n  -webkit-overflow-scrolling: touch;\n  overflow-y: scroll;\n}\n.CommentLogin-overlay-3n0sp.CommentLogin-shown-3jzHc {\n  z-index: 10000;\n  opacity: 1.0;\n}\n.CommentLogin-overlay-3n0sp iframe {\n  max-height: 100%;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  border: 0;\n  transition: opacity 0.4s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n.CommentLogin-overlay-3n0sp iframe.CommentLogin-show-12Hgn {\n  opacity: 1.0;\n}\n",""]);t.locals={overlay:"CommentLogin-overlay-3n0sp",shown:"CommentLogin-shown-3jzHc",show:"CommentLogin-show-12Hgn"}},6408:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=a(34);var o=a(5190);var l=function(){function e(){(0,n.default)(this,e);this.state={isVisible:false,isLoading:false,shouldLoadIFrame:false};this.bindActions(o)}(0,s.default)(e,[{key:"onShow",value:function e(){this.setState({isVisible:true,shouldLoadIFrame:true,isLoading:true})}},{key:"onLoadInBackground",value:function e(){this.setState({isVisible:false,shouldLoadIFrame:true,isLoading:true})}},{key:"onShowLoading",value:function e(){this.setState({isLoading:true,shouldLoadIFrame:false})}},{key:"onFrameLoaded",value:function e(){this.setState({isLoading:false})}},{key:"onCloseFrame",value:function e(){this.setState({isVisible:false,isLoading:false,shouldLoadIFrame:false})}}]);return e}();e.exports=r.createStore(l,"CommentLoginStore")},6409:function(e,t,a){"use strict";var i=a(4);var r=i(a(5));var o=i(a(8));var l=i(a(9));var c=i(a(6));var d=i(a(10));var s=i(a(11));var u=i(a(7));var g=i(a(2));function p(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,u.default)(i),t;if(n()){var a=(0,u.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=a(1);var h=a(0);var f=a(157),m=f.Input;var v=a(24),b=v.t;var y=a(5570);var S=function(e){(0,d.default)(s,e);var n=p(s);function s(){var i;(0,o.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=n.call.apply(n,[this].concat(t));(0,g.default)((0,c.default)(i),"state",{authorUrl:"",displayName:"",email:"",errors:{}});(0,g.default)((0,c.default)(i),"handleSubmit",function(){""===i.state.displayName?i.setState({errors:{displayName:true}}):i.props.onSubmit(i.state)});(0,g.default)((0,c.default)(i),"bindField",function(a){return{value:i.state[a],hasErrors:i.state.errors[a],onKeyDown:function e(t){"Enter"===t.key&&i.handleSubmit()},onChange:function e(t){i.setState((0,g.default)({},a,t))}}});return i}(0,l.default)(s,[{key:"render",value:function e(){var t=""===this.state.displayName;var a=window.navigator.userAgent.toLowerCase();var i=a.indexOf("safari/")>-1||a.indexOf("chrome/")>-1;return h.createElement("div",null,h.createElement("div",{className:y.overlay}),h.createElement("div",{className:y.close,onClick:this.props.onClose}),h.createElement("i",{className:y.desktopLogo}),h.createElement("header",{className:y.mobileHeader},h.createElement("i",{className:y.mobileLogo}),h.createElement("h1",{className:y.title},b("Post a Comment"))),h.createElement("div",{className:y.container},h.createElement("header",{className:y.desktopHeader},h.createElement("h1",{className:y.title},b("Post a Comment"))),h.createElement(m,(0,r.default)({theme:"midnight",placeholder:b("Name")},this.bindField("displayName"))),h.createElement(m,(0,r.default)({theme:"midnight",placeholder:b("Email Address")},this.bindField("email"))),h.createElement(m,(0,r.default)({theme:"midnight",placeholder:b("Website URL")},this.bindField("authorUrl"))),h.createElement("button",{disabled:t,className:y.button,onClick:this.handleSubmit},b("Comment as Guest")),!i&&h.createElement("div",{className:y.link},h.createElement("a",{className:y.anchor,onClick:this.props.onLoginClick},b("Log in to Comment")))))}}]);return s}(h.Component);(0,g.default)(S,"propTypes",{onSubmit:n.func,onLoginClick:n.func,onClose:n.func});e.exports=S},6411:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[].concat(t).sort(function(e,t){var a=n.key?e[n.key].toLowerCase():e.toLowerCase();var i=n.key?t[n.key].toLowerCase():t.toLowerCase();return a<i?-1:a>i?1:0})};t.default=i;e.exports=t.default},6419:function(e,t,a){"use strict";var n=a(1050);var s=6e4;function i(){var e=new Date(Date.UTC.apply(this,arguments));var t=n(e.getTime());var a=t.standardUTCOffset;t=n(e.getTime()-a*s);var i=t.utcOffset;e.setMinutes(e.getMinutes()-i);return e}e.exports=i},6421:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(6422));var s=n.default;t.default=s;e.exports=t.default},6422:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var o=i(a(6));var r=i(a(10));var l=i(a(11));var c=i(a(7));var u=i(a(2));var g=i(a(0));var d=i(a(1));var p=i(a(15));var h=i(a(6423));var f=a(263);var m=i(a(6427));var v=i(a(1090));function b(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(i),t;if(n()){var a=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,l.default)(this,t)}}var y=function(e){(0,r.default)(a,e);var t=b(a);function a(e){var r;(0,n.default)(this,a);r=t.call(this,e);(0,u.default)((0,o.default)(r),"handleScroll",function(e){var t=r.props.tabWidth;var a=e.target,i=a.scrollLeft,n=a.scrollWidth,s=a.clientWidth;r.setState({leftIndicatorVisible:i>.5*t,rightIndicatorVisible:i+s+.5*t<n})});(0,u.default)((0,o.default)(r),"handleTabClick",function(e){var t=e.currentTab,a=e.index;r.setState({active:a});r.scrollTo(a);t.onClick&&t.onClick()});(0,u.default)((0,o.default)(r),"prevTab",function(){var e=r.scrollRef.current.scrollLeft/r.props.tabWidth;r.scrollTo(e)});(0,u.default)((0,o.default)(r),"nextTab",function(){var e=r.props.tabWidth;var t=(r.scrollRef.current.scrollLeft+1.5*e)/e;r.scrollTo(t)});r.scrollRef=g.default.createRef();r.state={active:Math.min(e.defaultTabIndex,e.tabs.length-1),leftIndicatorVisible:false,rightIndicatorVisible:false};return r}(0,s.default)(a,[{key:"componentDidMount",value:function e(){if(this.getScrollable()){this.scrollRef.current.addEventListener("scroll",this.handleScroll,{passive:true});this.scrollTo(this.state.active)}}},{key:"componentWillUnmount",value:function e(){this.getScrollable()&&this.scrollRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollTo",value:function e(t){var a=this.props,i=a.scrollDurationMS,n=a.tabWidth;var s=n*Math.floor(t)-.25*n;(0,v.default)(this.scrollRef.current,{left:s},{minDuration:i,maxDuration:i,easing:"easeInOutSine"})}},{key:"getScrollable",value:function e(){var t=this.props,a=t.tabWidth,i=t.tabs;var n=this.scrollRef.current&&this.scrollRef.current.clientWidth;var s=a*i.length;return!!n&&s>n}},{key:"renderTabs",value:function e(){var l=this;var t=this.props,a=t.tabs,c=t.tabWidth;var d=this.state.active;return a.map(function(e,t){var a;var i=e.className,n=void 0===i?"":i,s=e.error,r=e.tabTitle;var o=(0,p.default)(h.default.tab,(a={},(0,u.default)(a,h.default.active,d===t),(0,u.default)(a,h.default.error,s),a),n);return g.default.createElement("div",{className:o,"data-test":"tab-".concat(t),key:"tab-".concat(r),onClick:l.handleTabClick.bind(l,{currentTab:e,index:t}),style:{width:c}},r)})}},{key:"renderIndicatorMask",value:function e(t){var a=this.props.tabWidth/2;return this.getScrollable()&&g.default.createElement(f.CSSTransitionGroup,{key:"".concat(t,"TransitionGroup"),wrapChildWithTag:false,className:h.default["".concat(t,"TransitionGroup")],transitions:m.default.slideIn},this.state["".concat(t,"IndicatorVisible")]&&[g.default.createElement("div",{key:"".concat(t,"Mask"),className:h.default.scrollIndicatorMask,style:{width:a}}),g.default.createElement("div",{key:"".concat(t,"Icon"),className:h.default.scrollIndicatorIcon,style:{width:a/2},onClick:"left"===t?this.prevTab:this.nextTab})])}},{key:"renderScrollableTabs",value:function e(){var t=this.props,a=t.tabWidth,i=t.tabs;return g.default.createElement("div",{style:{width:a*i.length}},this.renderTabs())}},{key:"render",value:function e(){return g.default.createElement("div",{className:h.default.container},g.default.createElement("div",{className:h.default.flexTabContainer,ref:this.scrollRef},this.renderScrollableTabs()),[this.renderIndicatorMask("left"),this.renderIndicatorMask("right")])}}]);return a}(g.default.PureComponent);(0,u.default)(y,"propTypes",{defaultTabIndex:d.default.number,tabs:d.default.array.isRequired,tabWidth:d.default.number,scrollDurationMS:d.default.number});(0,u.default)(y,"defaultProps",{defaultTabIndex:0,scrollDurationMS:200,tabWidth:140,tabs:[]});var S=y;t.default=S;e.exports=t.default},6423:function(e,t,a){var i=a(6424);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},6424:function(e,t,a){t=e.exports=a(16)(false);var i=a(153);var n=i(a(913));var s=i(a(914));var r=i(a(915));var o=i(a(916));var l=i(a(917));var c=i(a(918));var d=i(a(919));var u=i(a(920));var g=i(a(921));var p=i(a(922));var h=i(a(923));var f=i(a(924));var m=i(a(925));var v=i(a(926));var b=i(a(927));var y=i(a(928));var S=i(a(929));var q=i(a(930));var _=i(a(931));var C=i(a(932));var E=i(a(933));var k=i(a(934));var w=i(a(935));var T=i(a(936));var I=i(a(937));var A=i(a(938));var x=i(a(939));var L=i(a(940));var D=i(a(941));var N=i(a(942));var O=i(a(943));var R=i(a(944));var P=i(a(945));var B=i(a(946));var M=i(a(947));var F=i(a(948));var U=i(a(949));var V=i(a(950));var z=i(a(951));var H=i(a(952));var G=i(a(953));var W=i(a(954));var Y=i(a(955));var j=i(a(956));var Q=i(a(957));var X=i(a(958));var K=i(a(959));var J=i(a(960));var Z=i(a(961));var $=i(a(962));var ee=i(a(963));var te=i(a(964));var ae=i(a(965));var ie=i(a(966));var ne=i(a(967));var se=i(a(968));var re=i(a(969));var oe=i(a(970));var le=i(a(971));var ce=i(a(6425));var de=i(a(6426));t.push([e.i,'/**\n * Retina-friendly icon creator\n * @param  {string} @iconName Name of the icon image; presumes an @2x version.\n * @param  {color} [color=transparent] Background color on the icon.\n *\n * Uses named parameters: http://lesscss.org/features/#mixins-parametric-feature-named-parameters\n *\n * If your icon is interactable/clickable, set a :hover rule with opacity: 1\n */\n/**\n * For posterity:\n *\n * .myLocalClass {\n *     composes: checkAfter from "styles/utils/icons.less";\n * }\n */\n.TabbedHeader-search-SRECF {\n  background: white url('+n+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-search-SRECF {\n    background-image: url("+s+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-add-2tTNZ {\n  background: transparent url("+r+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-add-2tTNZ {\n    background-image: url("+o+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-clear-2lxxT {\n  background: transparent url("+l+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-clear-2lxxT {\n    background-image: url("+c+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-clearLight-1w-GP {\n  background: transparent url("+d+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-clearLight-1w-GP {\n    background-image: url("+u+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-trash-2OUqZ {\n  background: transparent url("+g+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trash-2OUqZ {\n    background-image: url("+p+");\n    background-size: 12px 16px;\n  }\n}\n.TabbedHeader-trash-2OUqZ:hover {\n  background: transparent url("+h+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trash-2OUqZ:hover {\n    background-image: url("+f+");\n    background-size: 12px 16px;\n  }\n}\n.TabbedHeader-trashLight-2vpNA {\n  background: transparent url("+m+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trashLight-2vpNA {\n    background-image: url("+v+");\n    background-size: 12px 16px;\n  }\n}\n.TabbedHeader-trashLight-2vpNA:hover {\n  background: transparent url("+h+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trashLight-2vpNA:hover {\n    background-image: url("+f+");\n    background-size: 12px 16px;\n  }\n}\n.TabbedHeader-check-2ybzy {\n  background: #3e3e3e url("+b+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-check-2ybzy {\n    background-image: url("+y+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-checkDark-JLkl9 {\n  background: transparent url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-checkDark-JLkl9 {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-checkAfter-eRxI6:after {\n  background: #3e3e3e url("+b+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-checkAfter-eRxI6:after {\n    background-image: url("+y+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-checkDarkAfter-ZZ4sD:after {\n  background: #3e3e3e url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-checkDarkAfter-ZZ4sD:after {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-checkDarkSmallAfter-3WZQR:after {\n  background: #3e3e3e url("+_+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-checkDarkSmallAfter-3WZQR:after {\n    background-image: url("+C+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-checkDarkBefore-4F5a1:before {\n  background: transparent url("+S+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-checkDarkBefore-4F5a1:before {\n    background-image: url("+q+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-aureusCheck-HMjMF {\n  background: url("+E+") center center no-repeat;\n}\n.TabbedHeader-upload-2usv_ {\n  background: transparent url("+k+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-upload-2usv_ {\n    background-image: url("+w+");\n    background-size: 32px;\n  }\n}\n.TabbedHeader-avatar-3mLyQ {\n  background: rgba(0, 0, 0, 0.06) url("+T+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-avatar-3mLyQ {\n    background-image: url("+I+");\n    background-size: 44px;\n  }\n}\n.TabbedHeader-gearSmall-38YEO {\n  background: transparent url("+A+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-gearSmall-38YEO {\n    background-image: url("+x+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-pencilSmall-xhcME {\n  background: transparent url("+L+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-pencilSmall-xhcME {\n    background-image: url("+D+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-trashSmall-T6_jm {\n  background: transparent url("+N+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trashSmall-T6_jm {\n    background-image: url("+O+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-trashSmall-T6_jm:hover {\n  background: #f0523d url("+N+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-trashSmall-T6_jm:hover {\n    background-image: url("+O+");\n    background-size: 9px;\n  }\n}\n.TabbedHeader-chevronLight-20LfJ {\n  background: transparent url("+R+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-chevronLight-20LfJ {\n    background-image: url("+P+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-chevronRight-1OQJC {\n  background: transparent url("+B+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-chevronRight-1OQJC {\n    background-image: url("+M+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-chevronDark-2FVa8 {\n  background: transparent url("+F+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-chevronDark-2FVa8 {\n    background-image: url("+U+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-circleLogoDark-3JOG1 {\n  background: transparent url("+V+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-circleLogoDark-3JOG1 {\n    background-image: url("+z+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-gettyLogo-14zJu {\n  background: transparent url("+H+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n  opacity: 1.0;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-gettyLogo-14zJu {\n    background-image: url("+G+");\n    background-size: 93px;\n  }\n}\n.TabbedHeader-gettyIconLight-1U9lQ {\n  background: transparent url("+W+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-gettyIconLight-1U9lQ {\n    background-image: url("+Y+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-chevronUpDark-3pmol {\n  background: transparent url("+j+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-chevronUpDark-3pmol {\n    background-image: url("+Q+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-chevronDownDark-1X3Jf {\n  background: transparent url("+F+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-chevronDownDark-1X3Jf {\n    background-image: url("+U+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-arrowDark-cG80c {\n  background: transparent url("+X+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-arrowDark-cG80c {\n    background-image: url("+K+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-file-3O_7_ {\n  background: transparent url("+J+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-file-3O_7_ {\n    background-image: url("+Z+");\n    background-size: 32px;\n  }\n}\n.TabbedHeader-shoppingCart-1FGwG {\n  background: transparent url("+$+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-shoppingCart-1FGwG {\n    background-image: url("+ee+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-squarespace-397fZ {\n  background: transparent url("+te+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-squarespace-397fZ {\n    background-image: url("+ae+");\n    background-size: 33px;\n  }\n}\n.TabbedHeader-zoomin-g4MIA {\n  background: transparent url("+ie+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-zoomin-g4MIA {\n    background-image: url("+ne+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-zoomout-D_EsD {\n  background: transparent url("+se+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-zoomout-D_EsD {\n    background-image: url("+re+");\n    background-size: 16px;\n  }\n}\n.TabbedHeader-squarespaceLight-23GkG {\n  background: transparent url("+oe+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n  width: 24px;\n  height: 24px;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-squarespaceLight-23GkG {\n    background-image: url("+le+");\n    background-size: 24px;\n  }\n}\n/*\nNote: These mediaQueries should be kept in sync with the mediaQueries in src/shared/utils/mediaQueries.js as well as\nthe mediaQueries in styles-v6/_variables-media-queries.less\n\nIn short, if you change one, change them all\n*/\n/*\n  Currently we are only targeting mobile devices up to 432px. This should include all the most typical iOS, Android\n  and Windows phones. Tablet devices are currently not being targeted for the mobile experience.\n */\n@media screen and (max-width: 432px) {\n  .mobile-hidden {\n    display: none;\n  }\n}\n@media screen and (max-width: 432px) {\n  .subDesktop-hidden {\n    display: none;\n  }\n}\n@media screen and (min-width: 433px) {\n  .desktop-hidden {\n    display: none;\n  }\n}\n.TabbedHeader-container-1Br8J {\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n}\n.TabbedHeader-container-1Br8J .TabbedHeader-leftTransitionGroup-1Vig8, .TabbedHeader-container-1Br8J .TabbedHeader-rightTransitionGroup-1J7zl {\n  position: absolute;\n  top: 0;\n  height: 100%;\n}\n.TabbedHeader-flexTabContainer-1zi79 {\n  text-align: center;\n  white-space: nowrap;\n  overflow-x: auto;\n  display: flex;\n  -ms-overflow-style: none;\n  overflow: -moz-scrollbars-none;\n}\n.TabbedHeader-flexTabContainer-1zi79::-webkit-scrollbar {\n  display: none;\n}\n@media screen and (max-width: 432px) {\n  .TabbedHeader-flexTabContainer-1zi79 {\n    -webkit-overflow-scrolling: touch;\n  }\n}\n.TabbedHeader-tab-2kGQy {\n  cursor: pointer;\n  padding: 11px;\n  color: #797979;\n  display: table-cell;\n  box-sizing: border-box;\n  white-space: normal;\n  vertical-align: middle;\n  height: 44px;\n  border-bottom: 1px solid #e4e4e4;\n  -webkit-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  transition-property: background, border-color, color;\n  transition-duration: 0.4s;\n  transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n.TabbedHeader-tab-2kGQy.TabbedHeader-active-174z9 {\n  font-weight: 400;\n  color: #3e3e3e;\n  border-bottom-color: #3e3e3e;\n}\n.TabbedHeader-tab-2kGQy.TabbedHeader-error-DNlAo {\n  background: #f0523d;\n  color: white;\n}\n.TabbedHeader-leftTransitionGroup-1Vig8 {\n  left: 0;\n}\n.TabbedHeader-rightTransitionGroup-1J7zl {\n  right: 0;\n  transform: rotateY(180deg);\n}\n.TabbedHeader-scrollIndicatorMask-1_Gir, .TabbedHeader-scrollIndicatorIcon-2ZuI1 {\n  position: absolute;\n  top: 0;\n  height: 100%;\n}\n.TabbedHeader-scrollIndicatorMask-1_Gir {\n  pointer-events: none;\n  background-image: linear-gradient(90deg, #f6f6f6 0%, rgba(242, 242, 242, 0.75) 50%, rgba(242, 242, 242, 0) 100%);\n}\n.TabbedHeader-scrollIndicatorIcon-2ZuI1 {\n  background: transparent url("+ce+") center center no-repeat;\n  cursor: pointer;\n  opacity: 0.76;\n}\n@media (min--moz-device-pixel-ratio: 1.5), (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5), (min-resolution: 144dpi), (min-resolution: 1.5dppx) {\n  .TabbedHeader-scrollIndicatorIcon-2ZuI1 {\n    background-image: url("+de+");\n    background-size: 16px;\n  }\n}\n",""]);t.locals={search:"TabbedHeader-search-SRECF",add:"TabbedHeader-add-2tTNZ",clear:"TabbedHeader-clear-2lxxT",clearLight:"TabbedHeader-clearLight-1w-GP",trash:"TabbedHeader-trash-2OUqZ",trashLight:"TabbedHeader-trashLight-2vpNA",check:"TabbedHeader-check-2ybzy",checkDark:"TabbedHeader-checkDark-JLkl9",checkAfter:"TabbedHeader-checkAfter-eRxI6",checkDarkAfter:"TabbedHeader-checkDarkAfter-ZZ4sD",checkDarkSmallAfter:"TabbedHeader-checkDarkSmallAfter-3WZQR",checkDarkBefore:"TabbedHeader-checkDarkBefore-4F5a1",aureusCheck:"TabbedHeader-aureusCheck-HMjMF",upload:"TabbedHeader-upload-2usv_",avatar:"TabbedHeader-avatar-3mLyQ",gearSmall:"TabbedHeader-gearSmall-38YEO",pencilSmall:"TabbedHeader-pencilSmall-xhcME",trashSmall:"TabbedHeader-trashSmall-T6_jm",chevronLight:"TabbedHeader-chevronLight-20LfJ",chevronRight:"TabbedHeader-chevronRight-1OQJC",chevronDark:"TabbedHeader-chevronDark-2FVa8",circleLogoDark:"TabbedHeader-circleLogoDark-3JOG1",gettyLogo:"TabbedHeader-gettyLogo-14zJu",gettyIconLight:"TabbedHeader-gettyIconLight-1U9lQ",chevronUpDark:"TabbedHeader-chevronUpDark-3pmol",chevronDownDark:"TabbedHeader-chevronDownDark-1X3Jf",arrowDark:"TabbedHeader-arrowDark-cG80c",file:"TabbedHeader-file-3O_7_",shoppingCart:"TabbedHeader-shoppingCart-1FGwG",squarespace:"TabbedHeader-squarespace-397fZ",zoomin:"TabbedHeader-zoomin-g4MIA",zoomout:"TabbedHeader-zoomout-D_EsD",squarespaceLight:"TabbedHeader-squarespaceLight-23GkG",container:"TabbedHeader-container-1Br8J",leftTransitionGroup:"TabbedHeader-leftTransitionGroup-1Vig8",rightTransitionGroup:"TabbedHeader-rightTransitionGroup-1J7zl",flexTabContainer:"TabbedHeader-flexTabContainer-1zi79",tab:"TabbedHeader-tab-2kGQy",active:"TabbedHeader-active-174z9",error:"TabbedHeader-error-DNlAo",scrollIndicatorMask:"TabbedHeader-scrollIndicatorMask-1_Gir",scrollIndicatorIcon:"TabbedHeader-scrollIndicatorIcon-2ZuI1"}},6427:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(6428));var s={slideIn:{enter:{from:{opacity:0,transform:"translateX(-100%)"},to:{opacity:1,transform:"translateX(0)"},className:n.default.dissolve},leave:{from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-100%)"},className:n.default.dissolve}}};t.default=s;e.exports=t.default},6428:function(e,t,a){var i=a(6429);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},6429:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".transitions-dissolve-38-Aa {\n  transition-property: opacity, transform;\n  transition-duration: 0.4s;\n  transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n",""]);t.locals={dissolve:"transitions-dissolve-38-Aa"}},6430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.parent,r=e.selector,t=e.minLength,o=void 0===t?1:t,a=e.frequencyMs,l=void 0===a?100:a,i=e.maxRetries,c=void 0===i?0:i;if(!s||!r)return Promise.reject("[waitForExistence] Called without a parent or selector");return new Promise(function(a,i){var n=0;c>99999999&&(c=0);var e=function e(){if(!s){i("[waitForExistence] parent does not or no longer exists");return}var t=Array.from(s.querySelectorAll(r));if(t.length>=o){a(t);return}if(0!==c){n+=1;if(n>c){i("[waitForExistence] Did not find ".concat(r," in ").concat(l*n,"ms"));return}}window.setTimeout(e,l)};e()})}var n=i;t.default=n;e.exports=t.default},6663:function(e,t,a){"use strict";e.exports=a(7374)},6686:function(e,t,a){"use strict";var i=a(24),n=i.t;e.exports={HOUR_12:1,HOUR_24:2,LANG:{closed:n("Closed"),open:n("Open"),allDay:n("All Day")},TIME_TYPE:{start:"start",end:"end"},MAX_TIMESTAMP:1440}},6694:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={BUILD:1,STORAGE:2,ADVANCED:3,CAPTCHA:4,DISCLAIMER:5};var n=i;t.default=n;e.exports=t.default},6702:function(e,t,a){"use strict";var i=a(853);var n=a(731);var s=a(1007);var r=a(1048);var o=a(701);var l=i(o);var c=n(l,s);var d=n(l,r);e.exports={BlockTypeKeys:l,BlockTypeNames:c,BlockTypeLabels:d}},6712:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getItems=A;t.createState=t.createSchema=void 0;var n=i(a(2));var o=a(710);var l=a(2021);var s=a(1178);function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d=s.RteItemConfig.align,u=s.RteItemConfig.blockQuote,g=s.RteItemConfig.blockType,p=s.RteItemConfig.bold,h=s.RteItemConfig.clearFormatting,f=s.RteItemConfig.indent,m=s.RteItemConfig.italic,v=s.RteItemConfig.orderedList,b=s.RteItemConfig.outdent,y=s.RteItemConfig.link,S=s.RteItemConfig.redo,q=s.RteItemConfig.strikethrough,_=s.RteItemConfig.subscript,C=s.RteItemConfig.superscript,E=s.RteItemConfig.underline,k=s.RteItemConfig.undo,w=s.RteItemConfig.unorderedList;var T=function e(t){var a=t.schema,i=t.schemaType,n=t.isInline,s=t.isLinkable;a=a||l.defaultSchemas[i];if(n)return o.EditorSchema.createInline(c({},a,{link:s,hardBreak:false,paragraph:false}));var r={multiple:true,required:true};return o.EditorSchema.create(c({},a,{link:s}),r)};t.createSchema=T;var I=function e(t){var a=t.initialData,i=t.schema,n=t.placeholder;if("string"===typeof a)return o.EditorState.fromHTML({html:a,schema:i,placeholder:n});var s=a&&a.getDOMNode?a.getDOMNode():a;if(s&&s.nodeType)return o.EditorState.fromNode({node:s,schema:i,placeholder:n});return o.EditorState.createEmpty({schema:i,placeholder:n})};t.createState=I;function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=c({hasAlignment:true},e);var t=[p,m,E];e.hasLink&&t.push(y);if("classic"===e.type){t.push(l.DIVIDER,g);e.hasAlignment&&t.push(d);t.push(l.DIVIDER,u,w,v,l.DIVIDER,q,C,_,l.DIVIDER,b,f)}t.push(l.DIVIDER,l.Items.PASTE_PLAIN,k,S,h);return t}},6713:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isRosettaRichTextToolbarLayoutEngineEnabled=p;var n=i(a(43));var s=a(901);var r=a(53);var o=a(32);var l=(0,n.default)(window,["Static","SQUARESPACE_CONTEXT","designPlatformExperimentList"],[]);var c=new s.StaticPraetorClient({isConfigurationLoaded:true,experimentContextList:l});var d=(0,o.getBreakpoint)(r.breakpoints),u=d.platform;var g="disabled";function p(){var e=c.getABTestVariant("rosetta-rich-text-toolbar-layout-engine-desktop",g),t=e.variant;return"mobile"===u||t!==g}},6822:function(e,t,a){"use strict";var i=a(58);var n=a(276),s=n.getResolvedWebsiteLocale;i.locale(s());var r=i().localeData();e.exports=function(){return r.weekdaysShort().reduce(function(e,t,a){var i=r.weekdays()[a].toLowerCase();e[i]=t;return e},{})}},6823:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var r=i(a(9));var s=i(a(2));var o=i(a(128));var l=i(a(514));var c=a(269);var d,u,g,p,h,f;var m=function(){function s(){(0,n.default)(this,s)}(0,r.default)(s,null,[{key:"buildSubDomainsForLocale",value:function e(){return c.locales.translationFiles.reduce(function(e,t,a){if(t!=="".concat(c.locales.defaultLocale)){var i=c.locales.supportedLanguageTags[a];e[t]={prod:i,staging:"www-staging-".concat(i,"-origin")}}return e},{})}},{key:"getSubdomain",value:function e(){var t=s.subDomainsForLocale[s.templatesLocale]||s.subDomains;if("true"===o.default.get("sqs-use-staging-template-switcher"))return t.staging;return t.prod}},{key:"getFrameOriginUrl",value:function e(){return"https://".concat(s.getSubdomain(),".squarespace.com")}},{key:"getUrls",value:function e(t){var a=s.translatedTemplateStoreRoutes[s.templatesLocale]||s.templateStoreRoute;var i=s.pathForWebsiteType[t]||s.pathForWebsiteType[l.default.CLASSIC];var n=this.getFrameOriginUrl();return{origin:n,source:"".concat(n,"/").concat(a,"/").concat(s.embeddedRoute,"/").concat(i)}}}]);return s}();t.default=m;(0,s.default)(m,"embeddedRoute","embedded");(0,s.default)(m,"appDomain",(null===(d=window)||void 0===d?void 0:null===(u=d.Static)||void 0===u?void 0:null===(g=u.SQUARESPACE_CONTEXT)||void 0===g?void 0:g.appDomain)||"");(0,s.default)(m,"subDomainsForLocale",m.buildSubDomainsForLocale());(0,s.default)(m,"templatesLocale",(null===(p=window.Static)||void 0===p?void 0:null===(h=p.SQUARESPACE_CONTEXT)||void 0===h?void 0:h.templateLocale)||"");(0,s.default)(m,"templateStoreRoute","templates");(0,s.default)(m,"translatedTemplateStoreRoutes",{"es-419":"plantillas","fr-FR":"modeles","de-DE":"vorlagen","pt-BR":"templates","it-IT":"templates"});(0,s.default)(m,"subDomains",{prod:"www",staging:"www-staging"});(0,s.default)(m,"pathForWebsiteType",(f={},(0,s.default)(f,l.default.CLASSIC,"template-switcher"),(0,s.default)(f,l.default.COVER_PAGE,"change-cover-page"),(0,s.default)(f,l.default.PARKING_PAGE,"change-parking-page"),f));e.exports=t.default},6826:function(e,t,a){var r=a(641);e.exports=function e(t,a,i,n){var s=t.getDOMNode?t.getDOMNode():t;i||(s=s&&s.parentElement);if(!s)return null;return r(s,a,n)}},6857:function(e,t){e.exports=function e(t,a,i){var n=a.replace(/<br>/g," ").replace(/<[^>]*>/g,"");return(!t||"inline"===t)&&n||i||""}},6858:function(e,t,a){var i=a(24).t;var n=a(701);var s=a(5805);var r=a(6859);e.exports=[{groupType:r.BASIC,label:i("Basic"),items:[n.HTML,n.MARKDOWN,n.QUOTE,n.IMAGE,n.VIDEO,n.SPACER,n.HORIZONTAL_RULE,n.BUTTON,n.AUDIO,n.EMBED]},{groupType:r.IMAGE,label:i("Image Layouts"),items:[s.IMAGE_POSTER,s.IMAGE_CARD,s.IMAGE_OVERLAP,s.IMAGE_COLLAGE,s.IMAGE_STACK]},{groupType:r.GALLERY,label:i("Gallery"),items:[s.GALLERY_SLIDESHOW,s.GALLERY_CAROUSEL,s.GALLERY_GRID,s.GALLERY_STACK]},{groupType:r.SUMMARY,label:i("Summary"),items:[s.SUMMARY_WALL,s.SUMMARY_CAROUSEL,s.SUMMARY_LIST,s.SUMMARY_GRID]},{groupType:r.MORE,label:i("More"),items:[n.FORM,n.NEWSLETTER,n.MAP,n.CODE,n.MENU,n.CALENDAR,n.ACUITY,n.ZOLA,n.OPENTABLE_V2,n.TOURDATES,n.MEMBER_AREA].filter(function(e){return e})},{groupType:r.FILTERS_LISTS,label:i("Filters & Lists"),items:[n.SEARCH,n.COLLECTION_LINK,n.TAGCLOUD,n.ARCHIVE]},{groupType:r.COMMERCE,label:i("Commerce"),items:[n.PRODUCT,n.AMAZON,n.DONATION]},{groupType:r.CHARTS,label:i("Charts"),items:[s.CHART_BAR,s.CHART_LINE,s.CHART_PIE]},{groupType:r.SOCIAL,label:i("Social Blocks"),items:[n.TWITTER,n.FOURSQUARE,n.SOCIAL_ACCOUNT_LINKS_V2,n.RSS,n.FIVEHUNDREDPIX,n.INSTAGRAM,n.FLICKR,n.SOUNDCLOUD]}]},6859:function(e,t){e.exports={BASIC:"BASIC",IMAGE:"IMAGE",GALLERY:"GALLERY",SUMMARY:"SUMMARY",MORE:"MORE",FILTERS_LISTS:"FILTERS_LISTS",COMMERCE:"COMMERCE",CHARTS:"CHARTS",SOCIAL:"SOCIAL"}},6860:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=a(24);var h=i(a(9008));function f(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var m=function(e){(0,r.default)(a,e);var t=f(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){return d.default.createElement(d.default.Fragment,null,d.default.createElement(g.Input,{type:"url",value:this.props.url,placeholder:(0,p.t)("https://example.com"),label:(0,p.t)("Acuity Scheduling Page Link"),onChange:this.props.onChange,inputRef:this.props.inputRef,hasErrors:this.props.errorMessage.length>0,errorMessage:this.props.errorMessage}),this.props.hint?d.default.createElement("div",{className:h.default.hint},this.props.hint):null)}}]);return a}(d.default.Component);t.default=m;(0,c.default)(m,"propTypes",{url:u.default.string.isRequired,onChange:u.default.func,hint:u.default.string,errorMessage:u.default.string});e.exports=t.default},6861:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getAppointmentTypeId=t.getClassId=t.getCategory=t.getCalendarId=t.isDirty=void 0;var r=i(a(40));var o=a(6266);var n=function e(t,a){var i=t.selectionState[a];if(!i||!i.stateBeforeEditing)return false;var n=i.stateBeforeEditing;return Object.keys(o.initialSchedulingState).some(function(e){return n[e]!==i[e]})};t.isDirty=n;var s=function e(t,a){var i=t.selectionState[a];var n=[].concat((0,r.default)(t.userData.calendars),(0,r.default)(i.additionalUserData.calendars));var s=n[i.calendarIndex];return s&&s.id};t.getCalendarId=s;var l=function e(t,a){var i=t.selectionState[a];var n=[].concat((0,r.default)(t.userData.categories),(0,r.default)(i.additionalUserData.categories));var s=n[i.categoryIndex];return s&&s.id};t.getCategory=l;var c=function e(t,a){var i=t.selectionState[a];if(i.classIndex===o.ALL_CLASSES_INDEX)return null;var n=[].concat((0,r.default)(t.userData.classes),(0,r.default)(i.additionalUserData.classes));var s=n[i.classIndex];return s&&s.id};t.getClassId=c;var d=function e(t,a){var i=t.selectionState[a];var n=[].concat((0,r.default)(t.userData.appointmentTypes),(0,r.default)(i.additionalUserData.appointmentTypes));var s=n[i.appointmentTypeIndex];return s&&s.id};t.getAppointmentTypeId=d},6862:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1048));var s=i(a(43));var r=i(a(2029));var o=i(a(5800));var l={};l.getTitle=function(e){return(0,s.default)(o.default,[e.toLowerCase(),"meta","title"])||(0,n.default)(e.toLowerCase())};l.getVariantTitle=function(e,t){return(0,s.default)(o.default,[e.toLowerCase(),"meta","variants",t.slice(t.lastIndexOf("_")+1).toLowerCase(),"title"])||(0,n.default)(t.toLowerCase())};function c(e,t){if(!t){console.log("No default values provided");return e}return(0,r.default)({},t,e,function(e,t){return Array.isArray(t)?t:void 0})}var d={meta:l,getValueWithDefaults:c};t.default=d;e.exports=t.default},6863:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getMailchimpSignupConfig=v;t.getZapierSignupConfig=y;t.getConfigContext=S;t.getConfig=q;t.ZAPIER_SIGNUP_URL=t.MAILCHIMP_SIGNUP_URL=void 0;var n=i(a(2));var s=i(a(728));var r=i(a(683));var o=i(a(2610));var l=i(a(2611));var c=i(a(207));var d=a(5415);var u=a(24);var g=i(a(801));var p=i(a(9041));function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var m=["http://www.mailchimp.com/signup","?utm_source=squarespace1","&utm_medium=partnerships","&utm_campaign=pid","&pid=squarespace","&source=website"].join("");t.MAILCHIMP_SIGNUP_URL=m;function v(e){return{ctor:e.Squarespace.DialogFields.Description,config:{name:"mailchimpAccountCreation",text:'<a href="'.concat(m,'" target="_blank">')+(0,u.t)("Don't have a MailChimp account? Click here to sign up.")+"</a>"}}}var b="https://support.squarespace.com/hc/en-us/articles/360000641507/";t.ZAPIER_SIGNUP_URL=b;function y(e){return{ctor:e.Squarespace.DialogFields.Description,config:{name:"zapierAccountCreation",text:'<a href="'.concat(b,'" target="_blank">')+(0,u.t)("Don't have a Zapier account? Click here to sign up.")+"</a>"}}}function S(e){return{primaryFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,u.t)("Add a customizable form to collect visitor information. Form submissions can be sent to an email address, or saved to a Google Drive sheet or MailChimp list.")+' <a href="'.concat(c.default.FORM_EDITOR,'" target="_blank">')+(0,u.t)("Learn more")+"</a>"}},{ctor:e.Squarespace.DialogFields.LabeledText,config:{name:"name","strings.label":(0,u.t)("Form Name"),submitOnEnter:true}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,u.t)("<strong>Drag and drop</strong> the fields below to manipulate the structure of your form. <strong>Click</strong> on any field to edit it.")}},{ctor:e.Squarespace.DialogFields.FormBuilder,config:{name:"fields",isMailChimpConnected:{$valueFn:function e(t){var a=t.getFormModel();var i=a.getConnBackend(r.default.MAILCHIMP);return i.length>0}}}}],connectFieldConfigsByName:{description:{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,u.t)('For more information about the handling of your customers’ personal data visit our GDPR Guide. <a href="{helpLink}" target="_blank">Learn More</a>. ',{helpLink:c.default.GDPR})}},email:{ctor:e.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}},zapier:{ctor:e.Squarespace.DialogFields.ZapierServiceConnect,config:{name:"zapierConnect",getZapsConnected:{$valueFn:function e(t){return function(){var e=t.getFormModel();return e.getConnBackend(r.default.ZAPIER).length}}}}},googleDocs:{ctor:e.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect"}},mailchimp:{ctor:e.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect"}},campaigns:{ctor:e.Squarespace.DialogFields.CampaignsServiceConnect,config:{name:"campaignsConnect"}}},connectFieldConfigs:[{$include:"connectFieldConfigsByName.description"},{$include:"connectFieldConfigsByName.email"},{$include:"connectFieldConfigsByName.mailchimp",$when:function e(){return g.default.isFeatureEnabled(s.default.MAILCHIMP_INTEGRATION)}},f({},v(e),{$when:function e(t){if(!g.default.isFeatureEnabled(s.default.MAILCHIMP_INTEGRATION))return false;var a=t.getFormModel();var i=a.getConnBackend(r.default.MAILCHIMP);return 0===i.length}}),{$include:"connectFieldConfigsByName.zapier",$when:function e(){return g.default.isFeatureEnabled(s.default.FORMS_API)}},f({},y(e),{$when:function e(t){if(!g.default.isFeatureEnabled(s.default.FORMS_API))return false;var a=t.getFormModel();var i=a.getConnBackend(r.default.ZAPIER);return 0===i.length}}),{$include:"connectFieldConfigsByName.googleDocs"}],submissionFieldConfigs:[{ctor:e.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":(0,u.t)("Submit Button Label"),"strings.placeholder":(0,u.t)("Submit")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":(0,u.t)("Button Alignment"),defaultValue:"left",className:"thin dark",options:[{value:"left",label:(0,u.t)("Left")},{value:"center",label:(0,u.t)("Center")},{value:"right",label:(0,u.t)("Right")}]}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:(0,u.t)("Post-Submit Redirect"),text:(0,u.t)("If provided, the user will be redirected upon form submission.")}},{ctor:e.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:(0,u.t)("Post-Submit Message"),text:(0,u.t)("Display this message to users after they submit your form.")}},{ctor:e.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:(0,u.t)("Post-Submit HTML"),text:(0,u.t)("HTML to be rendered in addition to the Post-Submit Message.")}},{ctor:e.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}],lightboxFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{name:"lightboxModeDescription",title:(0,u.t)("Lightbox Mode"),text:(0,u.t)("Replace this form with a button. Open the form in a lightbox when this button is pressed, rather than embedding it in the page. Great for long forms.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"useLightbox","strings.title":(0,u.t)("Enable Lightbox Mode")}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"lightboxHandleDescription"}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"lightboxHandleText",className:"thin","strings.title":(0,u.t)("Open Button Label"),"strings.description":(0,u.t)("Display this text on the button to open this form."),"strings.placeholder":(0,u.t)("Open Form")}}],captchaFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{name:"captchaDescription",title:(0,u.t)("Google ReCaptcha"),text:(0,u.t)('Prevent spam and abuse by asking visitors to check I’m not a robot before submitting. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:c.default.GOOGLE_RECAPTCHA_SETUP})}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"captchaEnabled","strings.title":(0,u.t)("Add Google reCaptcha")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"captchaTheme","strings.title":(0,u.t)("Theme"),defaultValue:o.default.LIGHT,className:"thin dark",numeric:true,options:[{value:o.default.LIGHT,label:(0,u.t)("Light")},{value:o.default.DARK,label:(0,u.t)("Dark")}]}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"captchaAlignment","strings.title":(0,u.t)("Alignment"),defaultValue:l.default.LEFT,className:"thin dark",numeric:true,options:[{value:l.default.LEFT,label:(0,u.t)("Left")},{value:l.default.CENTER,label:(0,u.t)("Center")},{value:l.default.RIGHT,label:(0,u.t)("Right")}]}}]}}function q(e){return{loadingText:(0,u.t)("Editing Form…"),style:"standard",width:470,height:540,title:(0,u.t)("Edit Form"),initialDataByReference:true,primaryTabs:[{title:(0,u.t)("Edit Form"),icon:p.default,tabTitle:(0,u.t)("Build"),scroll:true,fields:{$include:"primaryFieldConfigs"}}],secondaryTabs:[{tabTitle:(0,u.t)("Storage"),fields:{$include:"connectFieldConfigs"}},{tabTitle:(0,u.t)("Advanced"),scroll:true,fields:[{$include:"submissionFieldConfigs",$concat:true},{$include:"lightboxFieldConfigs",$concat:true}]},{tabTitle:(0,u.t)("Captcha"),fields:{$include:"captchaFieldConfigs"},$when:function e(t){return(0,d.isCaptchaEnabled)()}}]}}},6865:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isQuickViewSupported=void 0;var n=i(a(1595));var s=function e(){var t=n.default.getCollectionConfig("products");return t&&("2.0"===t.systemCollectionVersion||t.hasProductQuickView)};t.isQuickViewSupported=s},7374:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(2));var o;var l=a(24),c=l.t;var d=a(34);var u=a(43);var g=a(815);var p=a(651);var h=a(728);var f=a(2451);var m=c("To continue using Commerce features after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan.");var v={trialUpgradeDescription:c("To continue using API keys after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan. The Inventory, Orders, and Transactions APIs are only available in the Commerce Advanced plan."),upgradeDescription:c("Upgrade to the Business or Commerce plans to use API keys. The Inventory, Orders, Transactions APIs are only available in the Commerce Advanced plan. Your current plan doesn't include these features.")};var b=(o={},(0,r.default)(o,h.COMMERCE,{description:c("Available on Business and Commerce plans."),trialUpgradeDescription:m,upgradeDescription:c("Upgrade to the Business or Commerce plans to sell online. Your current plan doesn't include these features.")}),(0,r.default)(o,h.SHIPSTATION_INTEGRATION,{trialUpgradeDescription:c("To continue using ShipStation after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:c("Upgrade to the Commerce plans to use the ShipStation integration. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.REAL_TIME_SHIPPING_RATES,{trialUpgradeDescription:c("To continue using Real-Time Carrier Rates after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:c("Upgrade to the Commerce Advanced plan to get Real-Time Carrier Rates. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.ABANDONED_CART_RECOVERY,{upgradeDescription:c("Upgrade to the Commerce Advanced plan to use Abandoned Cart Recovery. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.GIFT_CARDS,{upgradeDescription:c("Upgrade to the Commerce Advanced plan to get access to Gift Cards. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.ADD_COMMERCE_PRODUCTS,{trialUpgradeDescription:m,upgradeDescription:c("Upgrade to the Business or Commerce plans to sell online. Gift Cards are only available on Commerce Advanced. Your current plan doesn't include these features.")}),(0,r.default)(o,h.COMMERCE_CHECKOUT_ON_DOMAIN,{upgradeDescription:c("Upgrade to the Commerce Basic or Advanced plan to use Checkout on Your Domain. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.SITE_USER_ACCOUNTS,{description:c("Available on Commerce plans."),trialUpgradeDescription:c("To continue using Customer Accounts after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:c("Upgrade to the Commerce plans to use Customer Accounts. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.BLOCK_DONATION,{description:c("Available on Business and Commerce plans."),trialUpgradeDescription:c("To continue using Donations after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan."),upgradeDescription:c("Upgrade to the Business or Commerce plans to use Donations. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.FORMS_API,v),(0,r.default)(o,h.INVENTORY_API,v),(0,r.default)(o,h.ORDERS_API,v),(0,r.default)(o,h.TRANSACTION_API,v),(0,r.default)(o,h.AUTO_TRIGGERED_DISCOUNTS,{trialUpgradeDescription:c("To continue using Automatic Discounts after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:c("Upgrade to the Commerce Advanced plan to use Automatic Discounts. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.LIMITED_USE_DISCOUNTS,{trialUpgradeDescription:c("To continue using Limited-Use Discounts after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:c("Upgrade to the Commerce Advanced plan to use Limited-Use Discounts. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.PRODUCTS_ON_INSTAGRAM,{description:c("Available on Commerce plans."),trialUpgradeDescription:c("To continue using Products on Instagram after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:c("Upgrade to the Commerce Basic or Advanced plan to use Products on Instagram. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.FACEBOOK_PIXEL,{description:c("Available on Business and Commerce plans."),trialUpgradeDescription:c("To continue using Facebook Pixel after your trial, subscribe to the Business or Commerce plans."),upgradeDescription:c("Upgrade to the Business or Commerce plans to use Facebook Pixel. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.COMMERCE_POSTAL_CODE_SHIPPING,{upgradeDescription:c("Upgrade to the Commerce Advanced plan to ship based on Postal Codes. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.COMMERCE_SUBSCRIPTIONS,{upgradeDescription:c("Upgrade to the Commerce Advanced Plan to sell Subscriptions. Your current plan doesn't include this feature."),trialUpgradeDescription:c("To continue selling Subscriptions after your trial, subscribe to the Commerce Advanced plan.")}),(0,r.default)(o,h.FACEBOOK_DYNAMIC_ADS,{description:c("Available on Commerce plans."),trialUpgradeDescription:c("To continue using Facebook Dynamic Ads after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:c("Upgrade to the Commerce Basic or Advanced plan to use Facebook Dynamic Ads. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.MARKETING_CAMPAIGN_TRACKER,{description:c("Available on Business and Commerce plans."),trialUpgradeDescription:c("To continue using URL Builder after your trial, subscribe to the Business or Commerce plans."),upgradeDescription:c("Upgrade to the Business or Commerce plans to use URL Builder. Your current plan doesn't include this feature.")}),(0,r.default)(o,h.LIMITED_AVAILABILITY_ALERTS,{trialUpgradeTitle:c("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:c("Upgrade to Use this Feature"),description:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(o,h.COMMERCE_RESTOCK_NOTIFICATIONS,{trialUpgradeTitle:c("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:c("Upgrade to Use this Feature"),description:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(o,h.COMMERCE_RELATED_PRODUCTS,{trialUpgradeTitle:c("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:c("Upgrade to Use this Feature"),description:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(o,h.COMMERCE_POINT_OF_SALE,{trialUpgradeTitle:c("Available on Commerce plans"),upgradeTitle:c("Upgrade to Use this Feature"),description:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:c("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:c("Upgrade to keep using this feature after your trial. This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plan at any time, no questions asked.")}),o);var y=function(){function e(){(0,n.default)(this,e);this.bindActions(g);this.exportPublicMethods({getUpsellCopy:this.getUpsellCopy,getCommerceDefaultTrial:this.getCommerceDefaultTrial})}(0,s.default)(e,[{key:"onBootstrap",value:function e(t){this.waitFor(p.dispatchToken)}},{key:"getUpsellCopy",value:function e(t){var a=u(b,[t],{});var i={};i.learnMoreLabel=u(a,"learnMoreLabel",f.learnMoreLabel);i.premiumFeatureLabel=u(a,"premiumFeatureLabel",f.premiumFeatureLabel);i.description=u(a,"description",f.description);if(p.isTrial()){i.upgradeDescription=u(a,"trialUpgradeDescription",f.trialUpgradeDescription);i.upgradeTitle=u(a,"trialUpgradeTitle",f.trialUpgradeTitle);i.upgradeCta=u(a,"trialUpgradeCta",f.trialUpgradeCta);i.confirmDescription=u(a,"trialConfirmDescription",f.trialConfirmDescription);i.confirmTitle=u(a,"trialConfirmTitle",f.trialConfirmTitle)}else{i.upgradeDescription=u(a,"upgradeDescription",f.upgradeDescription);i.upgradeTitle=u(a,"upgradeTitle",f.upgradeTitle);i.upgradeCta=u(a,"upgradeCta",f.upgradeCta);i.confirmDescription=u(a,"confirmDescription",f.confirmDescription);i.confirmTitle=u(a,"confirmTitle",f.confirmTitle)}return i}},{key:"getCommerceDefaultTrial",value:function e(){return m}}]);return e}();e.exports=d.createStore(y,"FeatureGateStore")},7418:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(86));var s="/api/settings/site-users/accounts/";var r={get:function e(){return n.default.get(s)},save:function e(t){return n.default.put(s,t)}};t.default=r;e.exports=t.default},7452:function(e,t,a){"use strict";var u=a(6686);var i={isAllDayText:function e(t){if(t){var a=t.toLocaleLowerCase().trim();var i=u.LANG.open.toLocaleLowerCase().trim();var n=u.LANG.allDay.toLocaleLowerCase().trim();return a===i||a===n}return false},isClosedText:function e(t){if(t){var a=t.toLocaleLowerCase().trim();var i=u.LANG.closed.toLocaleLowerCase().trim();return a===i}return false},minuteValidator:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00";if(2!==t.length)throw new Error("Invalid minutes");t=parseInt(t,10);if(isNaN(t)||t<0||t>59)throw new Error("Invalid minutes");return t},hourValidator:function e(t,a){if(!t&&0!==t)throw new Error("Missing hours");t=parseInt(t,10);if(isNaN(t))throw new Error("Invalid hour");if(a===u.HOUR_24&&(t<0||t>23))throw new Error("Invalid hour");if(a===u.HOUR_12&&(t<1||t>12))throw new Error("Invalid hour");return t},getMeridiemAndMode:function e(t){var a={};var i=t;i=i.replace(/[0-9]| /g,"");i=i.replace(/:/,"");if("am"===i||"pm"===i){a.meridiem=i;a.mode=u.HOUR_12}else{if(""!==i)throw new Error("Unwanted characters");a.mode=u.HOUR_24}return a},convertTo24HourMode:function e(t,a,i,n){if(a===u.HOUR_12){if("pm"===i)return 12===t?t:t+12;if("end"===n&&12===t)return 24;return 12===t?0:t}return"end"===n&&0===t?24:t},parseTime:function e(t,a){var i=true;var n;var s;var r;var o;try{t=t.toLowerCase();var l=this.getMeridiemAndMode(t);r=l.meridiem;o=l.mode;if(o===u.HOUR_24&&!t.match(":"))throw new Error("Invalid format");var c=t.replace(r,"").split(":");n=c[0];n=this.hourValidator(n,o);s=c[1];s=this.minuteValidator(s)}catch(e){i=false}if(i){var d=this.convertTo24HourMode(n,o,r,a);return{mode:o,timestamp:parseInt(60*d+s,10)}}return null},parseTimeRange:function e(t){var a;var i;try{var n=t.split(/ to | till | til | until |-|—/i);if(2!==n.length||!n[0]||!n[1])throw new Error("Range is not correct");a=this.parseTime(n[0].trim(),u.TIME_TYPE.start);i=this.parseTime(n[1].trim(),u.TIME_TYPE.end);if(!a||!i)throw new Error("Incorrect time");if(a.mode!==i.mode)throw new Error("Inconsistent formats")}catch(e){return false}return{from:a,to:i}},parseMultipleTimeRange:function e(t){var a=this;var i=true;var n={text:t,ranges:[]};this.isAllDayText(t)&&(t="12am - 12am");this.isClosedText(t)&&(t=null);try{if(t){var s=t.split(",");var r;var o;s.forEach(function(e,t){e=a.parseTimeRange(e.trim());o=t===s.length-1;if(!e||!o&&e.from.timestamp>=e.to.timestamp)throw new Error("Invalid range");if(n.ranges.length>0){r=n.ranges[n.ranges.length-1];if(r.to.timestamp>=e.from.timestamp)throw new Error("Invalid multiple ranges");if(r.to.mode!==e.to.mode)throw new Error("Inconsistent formats")}n.ranges.push(e)})}}catch(e){i=false}n.ranges.forEach(function(e){e.to=e.to.timestamp;e.from=e.from.timestamp});return!!i&&n}};e.exports=i},7524:function(e,t){YUI.add("squarespace-commerce-email-preview",function(i){i.namespace("Squarespace.Widgets");var n={businessName:".squarespace-business-info",businessId:".squarespace-business-info",contactLocation:".squarespace-business-info",header:".squarespace-header",footer:".squarespace-footer",titleFormat:".squarespace-title",subjectFormat:".subject",message:".squarespace-message"};i.Squarespace.Widgets.CommerceEmailPreview=i.Base.create("CommerceEmailPreview",i.Squarespace.Widgets.SSWidget,[],{bindUI:function(){this.after("emailSettingsChange",this._fetchPreviewIfUnlocked);this.after("highlightedFieldChange",this._highlightElement)},_fetchPreviewIfUnlocked:function(){if(this.get("waitingForRender"))return;this.set("waitingForRender",true);this._fetchPreview(i.bind(function(e){this._renderUpdatedPreview(e);this.set("waitingForRender",false);this._catchUp()},this))},_catchUp:function(){this._fetchPreview(i.bind(this._renderUpdatedPreview,this))},_fetchPreview:function(e){var t=this.get("emailSettings");t&&i.Data.post({url:this.get("renderUrl"),json:true,data:this.get("emailSettings").toJSON(),success:e})},_renderUpdatedPreview:function(e){this.get("subjectNode").empty().setHTML(e.subject);this.get("bodyNode").empty().setHTML(e.body);this._highlightElement();this.set("waitingForRender",false)},_highlightElement:function(){var e=this.get("contentBox");var t=n[this.get("highlightedField")];e.all(".editing").removeClass("editing");if(i.Lang.isValue(t)){var a=e.one(t);a&&a.addClass("editing")}}},{HTML_PARSER:{subjectNode:".subject",bodyNode:".body"},CSS_PREFIX:"sqs-commerce-email-preview",ATTRS:{emailSettings:{},renderUrl:{valueFn:function(){return"/api/commerce/admin/email-preview/client-render/"+this.get("urlExtension")}},highlightedField:{validator:i.Squarespace.AttrValidators.isNullOrString,value:null},subjectNode:{validator:i.Squarespace.AttrValidators.isNullOrNode},bodyNode:{validator:i.Squarespace.AttrValidators.isNullOrNode},urlExtension:{validator:i.Squarespace.AttrValidators.isString},waitingForRender:{validator:i.Squarespace.AttrValidators.isBoolean,value:false}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-ss-widget","squarespace-util"]})},7525:function(e,t,a){var l=a(845);var c=a(58);YUI.add("squarespace-events-collection",function(o){o.namespace("Squarespace.EventsCollection").ListViewPlugin=o.Base.create("eventsCollectionListViewPlugin",o.Plugin.Base,[],{initializer:function(){this.set("thumbnails",this.get("host").all(".eventlist-column-thumbnail img[data-src]"));this.get("thumbnails").each(function(e){e.plug(o.Squarespace.Loader2,{load:true,mode:"fill"})});this._syncUI();this._bindUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach()},_bindUI:function(){this._resizeEvent=o.on("windowresize",function(){this._syncUI()},o.config.win,this);this._bindTweakEvents()},_syncUI:function(){this.get("thumbnails").each(function(e){e.fire("refresh")})},_bindTweakEvents:function(){this._tweakChangeEvent=o.Global.on("tweak:change",function(e){var t=e.getName();"event-thumbnails"!==t&&"event-thumbnail-size"!==t&&"event-list-compact-view"!==t&&"event-show-past-events"!==t||this._syncUI()},this);this._tweakResetEvent=o.Global.on("tweak:reset",function(e){this._syncUI()},this)}},{NS:"eventsCollection"});o.Squarespace.EventsCollection.initializeListView=function(e){e.plug(o.Squarespace.EventsCollection.ListViewPlugin)};o.Squarespace.EventsCollection.initializeCalendarView=function(e){var t=o.QueryString.parse(o.config.win.location.search.substring(1));var a;if(t.month){a=t.month;var i=a.substring(0,2);var n=o.config.win.parseInt(i,10);var s=!o.config.win.isNaN(n);var r=s?"MM-YYYY":"MMMM-YYYY";a=c(a,r).toDate()}else a=l(new Date);new o.Squarespace.EventsCollectionCalendar({contentBox:e,collectionId:e.getAttribute("data-collection-id"),date:a,category:t.category||"",tag:t.tag||"",author:t.author||"",render:true}).plug(o.Squarespace.SquarespaceCalendarRenderer)};o.config.win.Squarespace.onInitialize(o,function(){o.one(".sqs-events-collection-list")&&o.all(".sqs-events-collection-list").each(o.Squarespace.EventsCollection.initializeListView);o.one(".sqs-events-collection-calendar")&&o.all(".sqs-events-collection-calendar").each(o.Squarespace.EventsCollection.initializeCalendarView)});o.config.win.Squarespace.onDestroy(o,function(){o.one(".sqs-events-collection-list")&&o.all(".sqs-events-collection-list").each(function(e){e.unplug(o.Squarespace.EventsCollection.ListViewPlugin)});o.one(".sqs-events-collection-calendar")&&o.all(".sqs-events-collection-calendar").each(function(e){var t=o.Widget.getByNode(e);if(!t){false;return}t.destroy()})});o.namespace("Squarespace").EventCollectionCalendar=o.Base.create("eventCollectionCalendar",o.Widget,[],{render:function(){new o.Squarespace.EventsCollectionCalendar({contentBox:this.get("contentBox"),collectionId:o.config.win.Static.SQUARESPACE_CONTEXT.collectionId,render:true}).plug(o.Squarespace.SquarespaceCalendarRenderer)}},{ATTRS:{}})},"1.0",{requires:["base","node","squarespace-calendar-core-renderer","squarespace-events-collection-calendar","squarespace-image-loader"]})},7526:function(e,t,a){var r=a(58);YUI.add("squarespace-events-collection-calendar",function(i){var e=i.namespace("Squarespace").EventsCollectionCalendar=i.Base.create("eventsCollectionCalendar",i.Squarespace.SquarespaceCalendar,[],{initializer:function(){this.set("_history",new i.History);this._addHistory()},destructor:function(){this._navClickEvent.detach();this._historyChangeEvent.detach()},bindUI:function(){e.superclass.bindUI.call(this);this._navClickEvent=this.get("contentBox").delegate("click",this._addHistory,".yui3-calendarnav-prevmonth, .yui3-calendarnav-nextmonth",this);this._historyChangeEvent=i.on("history:change",function(e){e.src===i.HistoryHTML5.SRC_POPSTATE&&e.newVal.month&&this.set("date",e.newVal.month)},this)},_addHistory:function(){var e=this.get("date");var t=this._buildQueryStringForHistoryUrl(e);var a=i.config.win.location.pathname+t;this.get("_history").addValue("month",e,{url:a})},_buildQueryStringForHistoryUrl:function(e){var t=r(e).locale("en").format("MM-YYYY");var a=this.get("category");var i=this.get("tag");var n=this.get("author");var s="?view=calendar&month="+t+(a?"&category="+a:"")+(i?"&tag="+i:"")+(n?"&author="+n:"");return s},_preventSelectionStart:null},{ATTRS:{}})},"1.0",{requires:["base","history","node","squarespace-calendar-core-renderer","squarespace-util"]})},7527:function(e,t,a){var c=a(24).t;var d=a(1937);var u=a(2751);YUI.add("squarespace-form-rendering-utils",function(o){o.namespace("Squarespace");function l(e){var t=e.cloneNode(true);var a=t.one(".form-button-wrapper .sqs-system-button");a&&a.removeClass("sqs-editable-button");var i=d.getCaptchaContainer(o.config.win,t.getDOMNode());i&&d.destroy(i);return t}function t(e){if(!e.one(".form-wrapper"))return;var i=e.one(".form-wrapper").remove().removeClass("hidden");var t=e.one(".lightbox-handle");var a=t.getData("lightbox");if(!a){var n=l(i);u(n.getDOMNode());var s=new o.Squarespace.Widgets.ModalLightbox({content:n,title:c("Form"),render:o.one("body")});var r=d.getCaptchaContainer(o.config.win,n.getDOMNode());r&&d.render(o.config.win,r);s.on("close",function e(){n=l(i);var t=n.getDOMNode();u(t);s.set("content",n);var a=d.getCaptchaContainer(o.config.win,t);a&&d.render(o.config.win,a)},this);t.setData("lightbox",s)}t.detach("click");t.on("click",function(e){e.halt();s.open()},this)}o.Squarespace.FormRenderingUtils={initializeFormLightbox:function(e){e.all(".sqs-block-form").each(function(e){if(!e.one(".lightbox-handle"))return;t(e)})}};o.config.win.Squarespace.onInitialize(o,function(){var e=o.config.doc;var t=o.one(e.body);o.Squarespace.FormRenderingUtils.initializeFormLightbox(t)})},"1.0",{requires:["squarespace-modal-lightbox"]})},7528:function(e,t,a){var o=a(5810);YUI.add("squarespace-pinterest",function(r){var e=r.namespace("Squarespace.Pinterest");e.bind=function(e){if(r.Lang.isObject(e)){var t={};t.hover=true;var a={round:{small:"16",large:"32"},rect:{small:"20",large:"28"}};var i=e.shape;r.Lang.isValue(i)||(i="rect");var n=e.size;r.Lang.isValue(n)||(n="small");t.shape=i;t.height=a[i][n];"enabled_for_blogs"===e.mode?t.ancestorSelectorTest=o.BLOGS.join(","):"enabled_for_blogs_and_pages"===e.mode&&(t.ancestorSelectorTest=o.BLOGS_AND_PAGES.join(","));var s=["#productList",".ProductList",".productlist"];s.forEach(function(e){t.ancestorSelectorTest.includes(e)&&r.all([e+" a[href][data-item-id]",e+" a.hentry[href]"].join(",")).each(function(e){var t=e.getAttribute("href");r.Lang.isString(t)&&"/"===t[0]&&r.Lang.isString(window.location.origin)&&(t=window.location.origin+t);e.all("img").each(function(e){e.setAttribute("data-pin-url",t)})})});r.config.win.PINTEREST.f.init(t)}};r.config.win.Squarespace.onInitialize(r,function(){e.bind(r.Object.getValue(r.config.win.Static,"SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions".split(".")))})},"1.0",{requires:["thirdparty-pinterest"]})},7530:function(e,t){YUI.add("squarespace-product-quick-view",function(l){var c=".sqs-product-quick-view-button[data-id]";var a=[];var s=[];l.config.win.Squarespace.onInitialize(l,function(){if(l.UA.mobile)return;var r=null;var n={};var o=function(e,t){var a=e.getData("id");var i=e.getData("group")||"ungrouped";if(!n[i]){n[i]=[];l.all(c).each(function(e){(i===e.getData("group")||"ungrouped"===i&&!e.getData("group"))&&n[i].push(e.getData("id"))})}if(r)if(r.get("currentId")===a&&r.get("currentGroup")===i)r.open();else{r.set("currentId",a);r.set("currentGroup",i)}else{r=new l.Squarespace.Widgets.Products.QuickView({currentId:a,currentGroup:i,products:n,render:true});s.push(r)}t&&t.halt(true)};var e=l.one("body").delegate("click",function(e){o(e.currentTarget,e)},c);l.one("body").delegate("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||o(e.currentTarget,e)},c);var t=l.Global.on("tweak:change",function(e){var t=e.getName();var a=t.indexOf("tweak-product-quick-view-lightbox-")>-1;var i=t.indexOf("tweak-product-item-gallery-")>-1;var n=l.one(".collection-type-products.view-item");if(a||i&&!n)if(r)r.get("isLightboxOpen")||r.open();else{var s=l.one(c);o(s,null)}else r&&r.get("lightbox").close()});a.push(e,t)});l.config.win.Squarespace.onDestroy(l,function(){a.forEach(function(e){e.detach()});s.forEach(function(e){e.destroy();e.get("lightbox").destroy(true)});a.length=0;s.length=0})},"1.0",{requires:["squarespace-widgets-products-quick-view"]})},7531:function(e,t,a){var i=a(128);var n=a(24).t;var s=a(802);var r=a(6269);var o=a(1622);YUI.add("squarespace-widgets-products-quick-view",function(a){a.namespace("Squarespace.Widgets.Products");var e=a.Squarespace.Widgets.Products.QuickView=a.Base.create("quickView",a.Squarespace.SSWidget,[],{initializer:function(){this.set("lightbox",new a.Squarespace.Widgets.ModalLightbox({content:this.get("boundingBox"),render:a.one("body"),className:e.CSS_LIGHTBOX_PREFIX}));this.get("lightbox").get("boundingBox").prepend(this.get("closeButton"));this.get("boundingBox").append(this.get("prevButton")).append(this.get("nextButton"))},bindUI:function(){e.superclass.bindUI.call(this);this.after(["currentIdChange","currentGroupChange"],function(){this._destroyProductItemViewInstance();this.syncUI()});this._registerEvent(this.get("lightbox").on("open",function(){this.syncUI()},this));this._registerEvent(this.get("lightbox").on("close",function(){this._destroyProductItemViewInstance();this.set("isLightboxOpen",false)},this));this._bindUIControls();this._bindKeyboardControls();window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&a.on("beforeunload",function(){this.destroy(true);this.get("lightbox").destroy(true)},this)},syncUI:function(){e.superclass.syncUI.call(this);this._getData();this.get("nextButton").toggleClass(e.CSS_HIDDEN,!this._getNextId());this.get("prevButton").toggleClass(e.CSS_HIDDEN,!this._getPrevId());o.trackProductQuickView(this.get("currentId"))},destructor:function(){this._destroyProductItemViewInstance();this.get("lightbox").close()},_bindUIControls:function(){var t=this.get("boundingBox");this._registerEvent(t.delegate("click",function(e){this._setId(this._getNextId());e.halt(true)},"."+e.CSS_NEXT_BUTTON,this));this._registerEvent(t.delegate("click",function(e){this._setId(this._getPrevId());e.halt(true)},"."+e.CSS_PREV_BUTTON,this));this._registerEvent(t.delegate("click",function(e){this.get("lightbox").close();e.stopPropagation()},"."+e.CSS_CLOSE_BUTTON,this));this._registerEvent(a.one("body").on("click",function(e){!this.get("isLightboxOpen")||t.contains(e.target)||this._isProductForm(e.target)||this.get("lightbox").close();e.stopPropagation()},this))},_bindKeyboardControls:function(){this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getNextId())},a.config.win,"down:39",this));this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getPrevId())},a.config.win,"down:37",this))},_getData:function(){a.Data.get({url:"/api/rendering/product-quick-view/"+this.get("currentId"),success:function(e){this._renderModal(e.html)},failure:function(e){this._renderError(e)}},this)},_renderModal:function(e){this.get("contentBox").empty().insert(e);this.set("productsItemViewInstance",new a.Squarespace.SystemCollections.Products.ItemV2({host:this.get("contentBox")}));this.get("isLightboxOpen")?this.get("lightbox").syncUI():this.open();this._executeScripts();this._initializeCheckoutArea()},open:function(){this.get("lightbox").open();this.set("isLightboxOpen",true);a.one(".sqs-style-mode-active")&&a.Squarespace.EscManager.removeTarget(this.get("lightbox"))},_executeScripts:function(){var a=this.get("contentBox");a.all("script").each(function(e){var t=document.createElement("script");t.type="text/javascript";e.getAttribute("src")?t.src=e.getAttribute("src"):t.innerHTML=e.get("innerHTML");e.remove();a.append(t)},this)},_initializeCheckoutArea:function(){var e=this.get("contentBox");r.initializeVariantDropdowns(a.config.win.document,e.getDOMNode());a.Squarespace.CartUtils.initializeAddToCartButtons();"true"===i.get("hasCart")||a.Lang.isValue(i.get("CART"))?a.Squarespace.Singletons.ShoppingCart.load(function(){a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},_renderError:function(e){var t=n("There was an issue loading the quick view of this product. Please see the product's page for full product details.");new a.Squarespace.Widgets.Alert({"strings.title":n("Error: {message}",{message:e&&e.title?e.title:""}),"strings.message":e&&e.error||t})},_getNextId:function(){var e=this.get("products")[this.get("currentGroup")];var t=e.indexOf(this.get("currentId"))+1;var a=e[t];return a||false},_getPrevId:function(){var e=this.get("products")[this.get("currentGroup")];var t=e.indexOf(this.get("currentId"))-1;var a=e[t];return a||false},_setId:function(e){e&&this.set("currentId",e)},_destroyProductItemViewInstance:function(){this.get("productsItemViewInstance")&&this.get("productsItemViewInstance").destroy(true)},_isProductForm:function(e){var t=a.Squarespace.Widgets.AsyncForm.CSS_PREFIX;return e.ancestor("."+t)||e.hasClass("lightbox-close")&&e.siblings("."+t)||e.one("."+t)||e.hasClass(t)}},{CSS_PREFIX:"sqs-product-quick-view",CSS_LIGHTBOX_PREFIX:"sqs-product-quick-view-lightbox",CSS_NEXT_BUTTON:"sqs-product-quick-view-lightbox-next-button",CSS_PREV_BUTTON:"sqs-product-quick-view-lightbox-prev-button",CSS_CLOSE_BUTTON:"sqs-product-quick-view-lightbox-close-button",CSS_HIDDEN:"sqs-product-quick-view-lightbox-element-hidden",ATTRS:{currentId:{value:null},currentGroup:{value:null},products:{value:{}},lightbox:{value:null},prevButton:{valueFn:function(){return a.Node.create(s('<button class="{sub1}"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="21.5,1.3 2.6,23.4 21.5,45.7 "/></g></svg></button>',{sub1:e.CSS_PREV_BUTTON}))}},nextButton:{valueFn:function(){return a.Node.create(s('<button class="{sub1}"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "/></g></svg></button>',{sub1:e.CSS_NEXT_BUTTON}))}},closeButton:{valueFn:function(){return a.Node.create(s('<button class="{sub1}"><svg viewBox="0 0 16 16"><g class="svg-icon"><line fill="none" stroke-miterlimit="10" x1="1.4" y1="1.4" x2="14.4" y2="14.4"/><line fill="none" stroke-miterlimit="10" x1="1.4" y1="14.4" x2="14.4" y2="1.4"/></g></svg></button>',{sub1:e.CSS_CLOSE_BUTTON}))}},isLightboxOpen:{value:false}}})},"1.0",{requires:["squarespace-beforeunload","squarespace-cart-utils","squarespace-escmanager","squarespace-image-loader","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-products-collection-item-v2","squarespace-ss-widget","squarespace-widgets-alert"]})},7532:function(e,t,a){var n=a(24).t;YUI.add("squarespace-products-collection-list-v2",function(a){a.namespace("Squarespace.SystemCollections.Products").ListV2=a.Base.create("systemCollectionsProductsListV2",a.Base,[],{initializer:function(){this._loadImages();this._bindUI();this._syncUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach();a.Array.each(this._onImageLoadEvents,function(e){e.detach()});this._resizeEvent=null;this._tweakChangeEvent=null;this._tweakResetEvent=null;this._onImageLoadEvents=null},_loadImages:function(){this._onImageLoadEvents=[];this.get("images").each(function(e){e.plug(a.Squarespace.Loader2,{load:true,mode:"fill"});this._onImageLoadEvents.push(e.on("load",function(){e.hasClass("ProductList-image--primary")&&e.ancestor(".ProductList-item").addClass("image-is-loaded")}))},this)},_bindUI:function(){this._resizeEvent=a.on("resize",function(){this._syncUI()},a.config.win,this);this._tweakChangeEvent=a.Global.on("tweak:change",this._tweakChangeHandler,this);this._tweakResetEvent=a.Global.on("tweak:reset",this._syncUI,this);window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&a.on("beforeunload",function(){this.destroy(true)},this)},_syncUI:function(){this._adjustSubPixelValues();this.get("images").each(function(e){e.fire("refresh")})},_adjustSubPixelValues:function(){var e=this.get("host").all(".ProductList-item");if(e){e.setStyle("width","");e.setStyle("width",Math.floor(parseInt(e.getStyle("width")[0],10))+"px")}},_tweakChangeHandler:function(e){var t=e.getName();var a=e.getValue();if("tweak-product-list-image-aspect-ratio"===t||"tweak-product-list-item-spacing"===t||"tweak-product-list-filter-display"===t||"tweak-product-list-filter-width"===t)this._syncUI();else if("tweak-product-list-items-per-row"===t){this._previewTweakChangeItemsPerRow();this._syncUI()}else if("tweak-product-list-item-hover-behavior"===t&&a===n("Show Alternate Image")){this._loadImages();this._previewTweakChangeItemHoverBehavior()}},_previewTweakChangeItemsPerRow:function(){var e=parseInt(a.Squarespace.Template.getTweakValue("tweak-product-list-items-per-row"),10);this.get("host").all(".ProductList-item").setStyle("clear","none");this.get("host").all(".ProductList-item:nth-child("+e+"n+1)").setStyle("clear","left");this.get("host").one(".ProductList-grid").setAttribute("data-items-per-row",e)},_previewTweakChangeItemHoverBehavior:function(){var e=this.get("host").one(".ProductList-image--alt");var t=function(){e.setStyle("opacity",1);a.later(1e3,this,function(){e.setStyle("opacity","")})};e.hasClass("loaded")?t():e.once("load",function(){t()})}},{ATTRS:{host:{value:null,validator:function(e){var t=a.one(e);return a.instanceOf(t,a.Node)},writeOnce:true},images:{getter:function(){var e=a.one(".tweak-product-list-item-hover-behavior-show-alternate-image")&&a.one(".tweak-product-list-meta-position-under");if(e&&!a.UA.mobile)return this.get("host").all(".ProductList-image[data-src]");return this.get("host").all(".ProductList-image--primary[data-src]")}}}});var i=[];a.config.win.Squarespace.onInitialize(a,function(){a.all(".ProductList.products-collection-v2").each(function(e){var t=a.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-product-list-items-per-row"];e.one(".ProductList-grid").getDOMNode().dataset.itemsPerRow=t;i.push(new a.Squarespace.SystemCollections.Products.ListV2({host:e}))})});a.config.win.Squarespace.onDestroy(a,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api"]})},7533:function(e,t){YUI.add("squarespace-blog-collection-list",function(t){var o=t.config.win;var e=o.document;var n=200;var l=t.Squarespace.Template.getTweakValue;var a=function(e){if(!e)return;var t=parseInt(l("tweak-blog-list-columns"),10);var a=parseInt(l("tweak-blog-list-spacing"),10);var i=parseFloat(o.getComputedStyle(e).width);while((i-a*(t-1))/t<n)t--;e.setAttribute("data-columns",t)};var i=function(e){if(!e)return;var t=e.querySelectorAll(".BlogList-item-image img");if("true"===l("tweak-blog-list-item-image-show")){var a="stacked"===l("tweak-blog-list-style").toLowerCase();var i="auto"===l("tweak-blog-list-item-image-aspect-ratio-stacked").toLowerCase();if(a&&i)for(var n=0;n<t.length;n++){var s=t[n];s.style.position=null;s.style.top=null;s.style.right=null;s.style.bottom=null;s.style.left=null;s.style.width=null;s.style.height=null;o.ImageLoader.load(s,{load:true,mode:null})}else for(var r=0;r<t.length;r++)o.ImageLoader.load(t[r],{load:true,mode:"fill"})}};var s=function(e){a(e);i(e)};var r=100;var c=false;var d;var u=function(e){c=c||true;d&&clearTimeout(d);d=setTimeout(function(){if(!t||!t.config||!t.config.win)return;s(e);c=false},r)};var g=["tweak-blog-list-columns","tweak-blog-list-spacing"];var p=["tweak-blog-list-style","tweak-blog-list-columns","tweak-blog-list-spacing","tweak-blog-list-item-image-aspect-ratio-grid","tweak-blog-list-item-image-aspect-ratio-stacked","tweak-blog-list-item-image-show","tweak-blog-list-item-image-width"];var h=function(e){var t=e.getName();g.indexOf(t)>=0&&a();p.indexOf(t)>=0&&i()};t.Global.on("tweak:change",h);var f;var m;t.config.win.Squarespace.onInitialize(t,function(){f=e.querySelector(".BlogList");if(f){s(f);m=u.bind(o,f);o.addEventListener("resize",m)}});t.config.win.Squarespace.onDestroy(t,function(){o.removeEventListener("resize",m)})},"1.0",{requires:[]})},7534:function(e,t){YUI.add("squarespace-gallery-collection-list",function(C){var e=C.config.win;var t=C.config.win.document;var a=function(){var g={body:C.one("body"),gallery:C.one(".sqs-system-gallery"),slideWrapper:C.one(".sqs-system-gallery").one(".gallery-wrapper"),slidesAndControls:C.one(".sqs-system-gallery").one(".slides-controls"),circles:C.one(".sqs-system-gallery").one(".circles")},p={show:"show",ready:"sqs-system-gallery-ready",interaction:"sqs-system-gallery-interaction",mouseenterleft:"sqs-system-gallery-hover-slides-left",mouseenterright:"sqs-system-gallery-hover-slides-right",init:"sqs-system-gallery-init",circlesNav:"gallery-navigation-circles",crop:"gallery-auto-crop",iframe:"sqs-system-gallery-video-iframe"},h=null,f=null,t=window.innerWidth;var m=[];var a=[];function v(e,t){var a=C.Squarespace.Template.getTweakValue(e);t?a=parseFloat(a):"string"===typeof a&&(a=a.toLowerCase());"true"===a?a=true:"false"===a&&(a=false);return a}function r(){var e=g.gallery.one(".slide.sqs-active-slide");return e&&"video"===e.getAttribute("data-type")&&e.one("iframe")}function b(){return"grid"!==v("gallery-design")}function y(e){var t=0;var a=e&&e.match(/(\d+):(\d+)/);a&&3===a.length&&(t=a[1]/a[2]);return t}function S(){var e=g.gallery.one(".slide.sqs-active-slide"),t=e&&e.getAttribute("data-slide-id")||null,a=g.gallery.one('.slide-meta[data-slide-id="'+t+'"]');if(a)if(g.body.hasClass(p.crop))a.setStyles({top:null,bottom:null,left:null,width:null});else{if(g.body.hasClass(p.circlesNav)){a.setStyle("top",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2);a.setStyle("bottom",null)}else{a.setStyle("top",null);a.setStyle("bottom",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2)}a.setStyles({left:e.one("img").getComputedStyle("left"),width:e.one("img")._node.clientWidth})}}function o(e,t,a){var i,n,s;if(t){i=t.one(".title");n=t.one(".description");if(i&&i._node.innerHTML||n&&n._node.innerHTML)if(a)s=true;else{t.addClass(p.show);S()}}return s}function q(e){var t=g.gallery.one(".slide.sqs-active-slide"),a=t&&t.one("img"),i=t&&t.getAttribute("data-slide-id")||null,n;g.gallery.all(".slide-meta").removeClass(p.show);e&&Modernizr&&!Modernizr.touch&&g.gallery.addClass(p.interaction);if(r()){g.gallery.addClass(p.iframe);g.gallery.removeClass(p.mouseenterleft);g.gallery.removeClass(p.mouseenterright)}else{g.gallery.removeClass(p.iframe);e&&"Gallery:currentIndexChange"===e.type&&(-1===e.direction?g.gallery.addClass(p.mouseenterleft):g.gallery.addClass(p.mouseenterright))}if(i){o(t,g.gallery.one('.slide-meta[data-slide-id="'+i+'"]'));if(a&&g.body.hasClass(p.circlesNav)){var s=function(){n=Math.max(0,(parseFloat(t._node.clientHeight)-parseFloat(a._node.clientHeight))/2);g.circles.setStyle("bottom",n)};a.get("complete")?s():m.push(a.on("load",s))}}}function i(){var e=v("gallery-loop"),t=v("gallery-auto-crop"),a=v("gallery-autoplay"),i=v("gallery-transitions"),n=1e3*v("galleryAutoplaySpeed",true),s=v("gallery-navigation"),r=v("gallery-aspect-ratio"),o=r.split(" ")[0],l=!b(),c=0;o=parseInt(r.split(":")[1],10)/parseInt(r.split(":")[0],10);r=g.gallery._node.clientWidth*o;g.gallery.removeClass(p.init);g.gallery.removeClass(p.ready);g.gallery.removeClass(p.interaction);g.gallery.removeClass(p.mouseenterleft);g.gallery.removeClass(p.mouseenterright);g.gallery.all(".slide-meta").removeClass(p.show);if(h){c=h.get("currentIndex");g.gallery.all(".sqs-disabled").removeClass("sqs-disabled");g.gallery.all(".sqs-active-slide").removeClass("sqs-active-slide");g.gallery.all(".slide, img").setStyles({visibility:null,left:null,top:null,overflow:null,width:null,height:null});h.destroy()}if(f){g.gallery.all(".thumbnail img[data-src]").each(function(e){e.setStyles({height:null,width:null,top:null,left:null})});f.destroy()}g.gallery.one(".slides-controls").setStyle("height",l?null:r);g.slideWrapper.setStyle("minHeight",l?null:r);h=new C.SQS.Gallery.Gallery2({container:".slides",slides:".slide",currentIndex:c,elements:{next:".next-slide, .simple .next",previous:".previous-slide, .simple .previous",controls:".dots, .numbers, .circles",currentIndex:".current-index",totalSlides:".total-slides"},loop:e,autoplay:!l&&a,autoplayOptions:{randomize:false,timeout:n,pauseOnMouseover:[".thumbnail-wrapper"]},lazyLoad:true,loaderOptions:{mode:l?"auto"===v("aspect-ratio")?"none":"fill":t?"fill":"fit"},design:l?"autocolumns":"stacked",designOptions:{transition:i,lightbox:l,clickBehavior:"auto",gutter:v("gridSpacing",true),columnWidth:v("gridSize",true),aspectRatio:y(v("aspect-ratio"))},historyHash:true});g.gallery.all(".arrow").each(function(e){e.setStyle("top",g.slideWrapper._node.clientHeight/2)});if(!l&&"thumbnails"===s){f=new C.SQS.Gallery.Gallery2({container:".thumbnail-wrapper",currentIndex:c,loaderOptions:{mode:"fill",load:true},lazyLoad:true,design:"strip"});h.addChild(f)}var d=h.after("currentIndexChange",q);q();var u=h.after("image-loaded",S);S();g.gallery.addClass(p.ready);m.push(d,u)}function n(e){if("function"===typeof e){window.throttleTimeout&&clearTimeout(window.throttleTimeout);window.throttleTimeout=setTimeout(e,750)}}function s(e,t){var a=e._event.offsetX||e._event.layerX;g.gallery.addClass(p.interaction);if(e._event.target&&("img"===e._event.target.localName||"sqs-video-opaque"===e._event.target.className||e.target.hasClass("slide")))if(t){g.gallery.removeClass(p.mouseenterleft);g.gallery.removeClass(p.mouseenterright)}else if(a<=e._currentTarget.clientWidth/2){g.gallery.removeClass(p.mouseenterright);g.gallery.addClass(p.mouseenterleft)}else{g.gallery.removeClass(p.mouseenterleft);g.gallery.addClass(p.mouseenterright)}}function l(e){var t=e.keyCode;(37===t||39===t&&b())&&g.gallery.addClass(p.interaction)}function e(){var e=new C.Squarespace.ResizeEmitter({timeout:100});e.on("resize:end",function(){if(window.innerWidth!==t){t=window.innerWidth;n(i)}});a.push(e);Modernizr&&!Modernizr.touch&&m.push(C.on("mousemove",function(e){b()&&s(e,false)},g.gallery.one(".slides-controls")),C.on("mouseleave",function(e){if(b()){s(e,true);g.gallery.removeClass(p.iframe)}},g.gallery.one(".slides-controls")),C.on("mouseenter",function(e){b()&&r()&&g.gallery.addClass(p.iframe)},g.gallery.one(".slides-controls")));m.push(C.on("keydown",l))}function c(a,i){m.push(C.Global.on("tweak:change",function(e){if(e.getName()===a&&"function"===typeof i){var t=e.getValue();"true"===t?t=true:"false"===t&&(t=false);i(t)}}))}function d(){c("gallery-loop",i);c("gallery-transitions",i);c("gallery-auto-crop",i);c("gallery-navigation",function(e){"Thumbnails"!==e||g.gallery.one(".thumbnail-wrapper img[src]")||i();S()});c("gallery-autoplay",function(e){h.set("autoplay",e)});c("gallery-aspect-ratio",function(){i()});c("galleryAutoplaySpeed",function(){n(i)});c("galleryInfoBackground",function(){q()});c("gallery-design",i);c("aspect-ratio",i);c("gridSpacing",i);c("gridSize",i);C.Global&&m.push(C.Global.on(["tweak:reset","tweak:close"],function(e){C.later(500,this,i)},this))}function u(){i();e();C.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount)&&d()}function _(){m=m.filter(function(e){e.detach();return false});a=a.filter(function(e){"function"===typeof e.destroy&&e.destroy();return false});if(h){h.get("container")&&h.get("container").hide();"function"===typeof h.destroy&&h.destroy()}if(f){f.get("container")&&f.get("container").hide();"function"===typeof f.destroy&&f.destroy()}}return{init:u,destroy:_}};var i;e.Squarespace.onInitialize(C,function(){var e=t.querySelector(".sqs-gallery-list");if(e){i=new a;i.init()}});e.Squarespace.onDestroy(C,function(){if(i){i.destroy&&"function"===typeof i.destroy&&i.destroy();i=null}})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-gallery-ng","squarespace-image-loader","squarespace-public-api"]})},7535:function(e,t,a){var s=a(24).t;var r=a(2745);var c=a(5070);var d={READY:"announcementBar:event:ready",UPDATE:"announcementBar:event:update",RESET_VISIBILITY:"announcementBar:event:resetVisibility",CLOSE:"announcementBar:event:close"};YUI.add("squarespace-announcement-bar",function(o){var l="closed";var i="squarespace-announcement-bar";o.namespace("Squarespace.Widgets");var n=o.Squarespace.Widgets.AnnouncementBar=o.Base.create("AnnouncementBar",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._publishEvents();this._addActionListeners()},destructor:function(){o.Array.invoke(this.eventListeners,"detach");this.eventListeners=[]},render:function(e){var t=e||this._checkIfNewMessage();if(t){var a=this._getDropzone();n.superclass.render.call(this,a)}else this._bindTweakEvents()},bindUI:function(){n.superclass.bindUI.call(this);this.get("boundingBox").delegate("click",this._closeBar,"."+this.getClassName("close"),this);this.get("boundingBox").delegate("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||this._closeBar(e)},"."+this.getClassName("close"),this);this._bindTweakEvents();this.after(["textChange","clickthroughUrlChange"],function(){this.get("contentBox").empty();this.get("contentBox").prepend(this.renderTemplate())});this.on("visibleChange",this._checkIfNewMessage,this)},syncUI:function(){n.superclass.syncUI.call(this);var e=parseInt(this.get("style"),10);var t=this.get("text");o.Lang.isObject(t)&&(t=t.html);e!==r.NONE&&t?this.show():this.hide()},getHeight:function(){return this._bb.get("clientHeight")},_bindTweakEvents:function(){o.Global.on("tweak:beforeopen",this._onTweakOpen,this)},_onTweakOpen:function(){var e=this.get("rendered");e||this.render(true);this.show()},_closeBar:function(e){if(o.namespace("Squarespace.Widgets.AnnouncementBar").isClosed())return;e&&e.preventDefault();this.hide();var t=o.one("[data-first-focusable-element]");t&&t.focus();this._recordClose()},_getDropzone:function(){var e=o.one(this.get("dropzone"));if(!o.Lang.isNull(e)){var t=o.Node.create('<div class="sqs-announcement-bar-custom-location"></div>');e.insert(t,0);e=t;this.set("isCustomPositioned",true)}return e},_checkIfNewMessage:function(){var e=true;var t=false;if(localStorage){var a={text:this.get("text"),clickthroughUrl:this.get("clickthroughUrl")};var i=this._getLocalStorageData();if(i){var n=i[l];delete i[l];null===a.clickthroughUrl&&delete a.clickthroughUrl;var s=o.JSON.stringify(a);var r=o.JSON.stringify(i);s===r&&true===n?e=false:t=true}else t=true;if(true===t){a[l]=false;this._saveToLocalStorage(a)}}return e},_getLocalStorageData:function(){var e=i;var t=null;if(localStorage)try{var a=localStorage.getItem(e);t=o.JSON.parse(a)}catch(e){t=null}return t},_saveToLocalStorage:function(e){var t=i;if(localStorage){"string"!==typeof e&&(e=o.JSON.stringify(e));try{localStorage.setItem(t,e)}catch(e){false}}},_recordClose:function(){var e=this._getLocalStorageData();if(e){e[l]=true;this._saveToLocalStorage(e)}},_publishEvents:function(){this.publish(d.RESET_VISIBILITY);this.publish(d.UPDATE);this.publish(d.CLOSE);o.Global.publish(d.READY)},_addActionListeners:function(){this.eventListeners=[this.on(d.RESET_VISIBILITY,function(){o.Squarespace.Widgets.AnnouncementBar.resetVisibility();this.render(true);this.syncUI()}.bind(this)),this.on(d.UPDATE,function(e){this.setAttrs({text:e.text.html.toString(),style:e.style,clickthroughUrl:e.clickthroughUrl});this.get("rendered")||this.render();this.syncUI()}.bind(this)),this.on(d.CLOSE,function(){this._closeBar()}.bind(this))];o.Global.fire(d.READY,{bar:this})}},{CSS_PREFIX:"sqs-announcement-bar",HANDLEBARS_TEMPLATE:"announcement-bar.html",EVENTS:d,ATTRS:{text:{value:null},closeButtonLabel:{value:s("Close Announcement")},isCustomPositioned:{value:false},clickthroughUrl:{value:null},dropzone:{value:".sqs-announcement-bar-dropzone"}}});o.namespace("Squarespace.Widgets.AnnouncementBar").resetVisibility=function(){if(localStorage)try{localStorage.removeItem(i)}catch(e){false}};o.namespace("Squarespace.Widgets.AnnouncementBar").isClosed=function(){var e=false;if(localStorage)try{var t=localStorage.getItem(i);var a=o.JSON.parse(t);o.Lang.isNull(a)||(e=a[l])}catch(e){false}return e};o.config.win.Squarespace.onInitialize(o,function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings||{style:1,text:""};o.namespace("Squarespace.Singletons");if(!o.Squarespace.Singletons.AnnouncementBar){var t=e.text;o.Lang.isObject(t)&&(t=t.html);o.Squarespace.Singletons.AnnouncementBar=new n({text:t,clickthroughUrl:e.clickthroughUrl});var a=c.shouldShowAnnouncementBar({settings:o.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings,context:{pageType:o.config.win.Static.SQUARESPACE_CONTEXT.pageType,collection:o.config.win.Static.SQUARESPACE_CONTEXT.collection}});a&&o.Squarespace.Singletons.AnnouncementBar.render()}})},"1.0",{requires:["base","json","node","squarespace-announcement-bar-template","squarespace-ss-widget"]})},7536:function(e,t){YUI.add("squarespace-announcement-bar-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["announcement-bar.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o,l=this,c="function",d=this.escapeExpression;function u(e,t){var a="",i,n;a+='\n<a\n  class="sqs-announcement-bar-url"\n  ';n=s["if"].call(e,(i=e.clickthroughUrl,null==i||false===i?i:i.newWindow),{hash:{},inverse:l.noop,fn:l.program(2,g,t),data:t});(n||0===n)&&(a+=n);a+='\n  href="'+d((i=(i=e.clickthroughUrl,null==i||false===i?i:i.url),typeof i===c?i.apply(e):i))+'"\n  \n  aria-labelledby="announcement-bar-text-inner-id"\n></a>\n';return a}function g(e,t){return'target="_blank"'}o=s["if"].call(t,(r=t.clickthroughUrl,null==r||false===r?r:r.url),{hash:{},inverse:l.noop,fn:l.program(1,u,i),data:i});(o||0===o)&&(n+=o);n+='\n\n<div class="sqs-announcement-bar-text">\n  <span\n    class="sqs-announcement-bar-close"\n    tabindex="0"\n    role="button"\n    aria-label="';if(o=s.closeButtonLabel)o=o.call(t,{hash:{},data:i});else{o=t.closeButtonLabel;o=typeof o===c?o.apply(t):o}n+=d(o)+'"></span>\n  <div\n    \n    id="announcement-bar-text-inner-id"\n    class="sqs-announcement-bar-text-inner"\n  >\n    ';if(o=s.text)o=o.call(t,{hash:{},data:i});else{o=t.text;o=typeof o===c?o.apply(t):o}(o||0===o)&&(n+=o);n+="\n  </div>\n</div>\n";return n})})();var t="announcement-bar.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7537:function(e,t,a){var s=a(425);var r=a(24).t;var o=a(5055);var l=a(8683);var d=a(8684);var u=a(5070);var g=a(5079);var p=a(5080);var h=a(1622);var i=a(318);var f=i.captureException;YUI.add("squarespace-popup-overlay",function(c){var n=window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn();c.namespace("Squarespace.Widgets");var i=c.Squarespace.Widgets.PopupOverlay=c.Base.create("PopupOverlay",c.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.popupSettings=c.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings||{};this.isHidden=true;this.isSetup=false;this._cb=this.get("contentBox");this.documentHeight=this.getDocumentHeight();this.viewportHeight=c.config.win.innerHeight;this.publish("closed",{emitFacade:true});c.Global.publish("popupOverlay:showing");this.loadPopupJSON();this.showEvent=c.Global.on("popupOverlay:requestShow",this.show,this);this.hideEvent=c.Global.on("popupOverlay:hide",this.hide,this);this.formSubmitEvent=c.Global.on("form:submitSuccess",this._markSubmitted,this)},destructor:function(){this.showEvent.detach();this.showEvent=null;this.hideEvent.detach();this.hideEvent=null;this.formSubmitEvent.detach();this.formSubmitEvent=null;this.popupContainerNode.remove()},getDocumentHeight:function(){var e=c.config.win.document;var t=e.body;var a=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight)},render:function(){this.popupContainerNode=c.Node.create("<div></div>");c.one("body").append(this.popupContainerNode);i.superclass.render.call(this,this.popupContainerNode)},loadPopupJSON:function(){var e=c.config.win.location;var t=e.pathname+e.hash;var a="currentUrl="+encodeURIComponent(t);c.Squarespace.Utils.isInDamaskFrame()&&(a+="&forceVisibility=true");var i=new XMLHttpRequest;i.open("GET","/api/popup-overlay/render?"+a);i.onload=function(){var t=null;try{if(200!==i.status)throw new Error("Could not fetch popup overlay JSON");t=JSON.parse(i.response)}catch(e){f(e);t=null}if(!t||!t.shouldDisplayOnPage){c.Squarespace.Singletons.PopupOverlay.destroy();c.Squarespace.Singletons.PopupOverlay=null;return}var e=g.getLocalStorageData(p.KEY)||{};e[p.VERSION]=this.popupSettings.version;g.saveToLocalStorage(p.KEY,e);n?this._loggedInResponse(t.renderedHtml):this._loggedOutResponse(t.renderedHtml)}.bind(this);i.send()},setupPopupOverlay:function(e){if(this.isSetup||!e)return;this._cb.set("innerHTML",e);var t=this._cb.one(".sqs-slide-container .sqs-slide");var a=t.one(".sqs-popup-overlay-close");if(!n){a.once("click",this._closePopup.bind(this));t.one(".layer-back").once("click",this._closePopup,this);c.Squarespace.EscManager.disable();c.one(c.config.win.document.documentElement).once("keyup",this._closePopup,this)}var i=t.getAttribute("data-slide-layout-id");this.popupSettings.layout=i;c.Squarespace.SlideRendering.Layouts.Factory.create(i,{boundingBox:t,render:true});this.isSetup=true},scrollHandler:function(e,t,a,i){var n=c.config.win.document;var s=n.defaultView&&n.defaultView.scrollY||n.documentElement&&n.documentElement.scrollTop;var r=this.documentHeight-this.viewportHeight;var o;o=r>0?s/r:1;if(o>=this.popupSettings.scrollPercentage/100){var l=c.one(c.config.win);l.detach("scroll",a);l.detach("resize",i);clearTimeout(this.popupTimer);this.setupPopupOverlay(t);this.triggeredBy=d.SCROLL;this.show()}},resizeHandler:function(){this.viewportHeight=c.config.win.innerHeight},_loggedOutResponse:function(e){var t=s(this.scrollHandler,100);var a=s(this.resizeHandler,100);var i=c.one(c.config.win);this.popupSettings.showOnTimer&&(this.popupTimer=setTimeout(function(){this.setupPopupOverlay(e);i.detach("scroll",t);i.detach("resize",a);this.triggeredBy=d.TIME;this.show()}.bind(this),this.popupSettings.timerDelay));if(this.popupSettings.showOnScroll){if(this.documentHeight===this.viewportHeight&&!this.popupSettings.showOnTimer){this.setupPopupOverlay(e);this.triggeredBy=d.SCROLL;this.show();return}i.on("scroll",t,this,e,t,a);i.on("resize",a,this)}},_loggedInResponse:function(e){this.setupResponse=e;if(!this.isHidden){this.setupPopupOverlay(e);this.show()}},_closePopup:function(e){e&&e.preventDefault();if("keyup"===e.type){if(27!==e.charCode)return;e.stopPropagation()}if(!n){var t=e.currentTarget.hasClass("sqs-popup-overlay-close")?r("CLOSE"):r("DISMISS");this._trackEvent(l[t])}this.hide();this._recordClose();c.Squarespace.EscManager.enable();this._resizeEvent&&this._resizeEvent.detach();this.fire("closed")},_recordClose:function(){var e=g.getLocalStorageData(p.KEY);if(e){e[p.CLOSED_DATE]=Date.now();g.saveToLocalStorage(p.KEY,e)}},_markSubmitted:function(){var e=g.getLocalStorageData(p.KEY);if(e){e[p.SUBMITTED]=true;g.saveToLocalStorage(p.KEY,e)}},_trackEvent:function(e){var t=[];var a=null;var i=c.one('div.sqs-slide[data-slide-type="popup-overlay"]');if(i.one(".sqs-slice-buttons"))i.all(".sqs-slice-buttons li a").each(function(e){t.push({buttonText:e.get("innerText"),clickthroughUrl:e.getAttribute("href")})});else if(i.one(".sqs-slice-newsletter")){t.push({buttonText:i.one(".newsletter-form button").get("value"),clickthroughUrl:null});a=i.one(".newsletter-form").getAttribute("data-form-id")}else t=null;h.trackOverlayEvent({pagePath:c.config.win.location.pathname,version:this.popupSettings.version.toString(),action:e,trigger:this.triggeredBy,layoutId:this.popupSettings.layout,buttons:t,formId:a})},hide:function(){this.isHidden=true;var e=this.get("boundingBox");e.removeClass("visible");e.setStyle("display","none")},show:function(){this.isHidden=false;if(!this.isSetup&&this.setupResponse){this.setupPopupOverlay(this.setupResponse);if(!this.isSetup)return}var e=this.get("boundingBox");e.addClass("visible");e.setStyle("display","block");n||this._trackEvent(l.DISPLAY);c.Global.fire("popupOverlay:showing");!n&&c.Squarespace.Singletons.WebsiteOverlaysManager&&c.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar()}},{CSS_PREFIX:"sqs-popup-overlay",ATTRS:{style:{}}});c.config.win.Squarespace.onInitialize(c,function(){var e=c.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings;var t=o.NONE;e&&e.style&&(t=e.style);if(!c.Squarespace.Singletons.PopupOverlay){c.Squarespace.Singletons.PopupOverlay=new i({style:t});var a=u.shouldShowPopupOverlay({context:{pageType:c.config.win.Static.SQUARESPACE_CONTEXT.pageType,collection:c.config.win.Static.SQUARESPACE_CONTEXT.collection},settings:e,isMobile:c.UA.mobile,urlSearch:window.location.search});(n||a)&&c.Squarespace.Singletons.PopupOverlay.render()}});c.config.win.Squarespace.onDestroy(c,function(){c.Squarespace.Singletons.PopupOverlay&&c.Squarespace.Singletons.PopupOverlay.destroy()})},"1.0",{requires:["base","json","node","squarespace-escmanager","squarespace-util","squarespace-slide-rendering-layouts-factory","squarespace-ss-widget"]})},7538:function(e,t,a){var l=a(1596);var c=a(77);YUI.add("squarespace-search-page",function(o){var s=function(e){var t=o.Node.create("<div>");t.set("innerHTML",e);return t.get("text")};o.namespace("Squarespace.Widgets");var r="/search";var a=o.Squarespace.Widgets.SearchPage=o.Base.create("searchPage",o.Squarespace.Widgets.SearchContainer,[],{initializer:function(e){this._isFirstSync=true;this.get("censusEnabled")&&this._trackSearchHit(this.get("searchQuery"),this.get("collectionFilter"),o.config.doc.referrer)},destructor:function(){if(this._resizeEmitter){this._resizeEmitter.destroy();this._resizeEmitter=null}o.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel()},renderUI:function(){a.superclass.renderUI.apply(this,arguments);var e=this.get("inputWrapper");var t=new o.Squarespace.Widgets.SearchInputBox({queryString:this.get("searchQuery"),srcNode:e,boundingBox:e,inputType:"text"});this.set("searchInputBox",t);t.render().focus();this._resizeEmitter=new o.Squarespace.ResizeEmitter({timeout:100});this._initRender()},_initRender:function(){var e=s(this.get("searchQuery"));this.get("inputWrapper").one("input").set("value",e);var t=!o.Lang.isValue(this.get("resultItemEls"));t&&""!==e&&this.get("noticeEl").setContent(this.get("strings.emptyNotice")).toggleClass("hide");this.get("resultsWrapperEl").toggleClass("empty",t);var a=this.get("collectionFilter");""!==a&&this.set("searchFilter",[{name:"collectionId",value:a}]);this._toggleMore(true);this.get("outputEl").removeClass("hide")},bindUI:function(){a.superclass.bindUI.apply(this,arguments);this.get("resultEl").delegate("click",this._onResultClick,".search-result",this);this.after("searchQueryChange",this._updateHistory,this);this.get("inputWrapper").one("input").on("keyup",this._onKeyUp,this);this.get("moreEl").on("click",this._nextPage,this);this._resizeEmitter.on("resize",this._onResize,this)},syncUI:function(){0===this.get("page")&&this.get("outputEl").addClass("hide");if(this._isFirstSync){this._isFirstSync=false;this._loadImages();this.get("outputEl").removeClass("hide")}else{a.superclass.syncUI.apply(this,arguments);this._toggleLoader();setTimeout(this._syncOutput.bind(this),150)}},_syncOutput:function(){var e=this.get("resultsWrapperEl");var t=this.get("page");var a=this.get("perPage");var i=o.Node.create(this._getResultsTemplate());if(o.Lang.isValue(i)){i.all(".sqs-search-ui-item").removeClass("sqs-search-ui-item").addClass("sqs-search-page-item");if(0===t)e.setContent(i);else{var n=i.get("children");var s=n.size();var r=s%a===0?a:s%a;n=n.splice(-r);e.append(n)}this.set("resultItemEls",e.get("children"))}this._loadImages();this._toggleNotice(i);this._toggleMore();this.get("loading")||this.get("outputEl").removeClass("hide")},_loadImages:function(){this.get("contentBox").all("img[data-src]").each(function(e){ImageLoader.load(e,{load:true})})},_toggleNotice:function(e){var t=this.get("noticeEl");var a=this.get("resultsWrapperEl");var i=""!==this.get("searchQuery");var n=!o.Lang.isValue(e)&&!this.get("loading");var s=!n;t.toggleClass("hide",s||!i);a.toggleClass("empty",!o.Lang.isValue(e));if(n){a.empty();t.setContent(this.get("strings.emptyNotice"))}},_toggleLoader:function(){""===this.get("searchQuery")&&this.set("loading",false);var e=o.Lang.isValue(this.get("loading"))&&this.get("loading");var t=this.get("spinnerEls");if(e&&!o.Lang.isValue(this._inputSpinner)&&!o.Lang.isValue(this._moreSpinner)){this._inputSpinner=new o.Squarespace.Spinner({color:"dark",size:"large",render:t.item(0)});this._moreSpinner=new o.Squarespace.Spinner({size:"large",render:t.item(1)})}this.get("inputWrapper").toggleClass("loading",e);this.get("moreEl").toggleClass("loading",e);t.toggleView(e)},_toggleMore:function(e){var t=this.get("moreEl");if(!o.Lang.isValue(this.get("resultItemEls"))||""===this.get("searchQuery")){t.addClass("hide");return}var a=e?this.get("resultEl").getData("count"):this.get("totalCount");t.toggleClass("hide",a-this.get("resultItemEls").size()<=0)},_getResultsTemplate:function(){return o.Squarespace.UITemplates.render(a.TEMPLATE_RESULTS_NAME,this._getSearchDataModel())},_onKeyUp:function(e){o.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel();(e.keyCode<37||e.keyCode>40)&&(this._searchTypingTimeout=o.later(this.get("displayDelay"),this,function(){this.get("searchInputBox").onSubmit()}))},_onResultClick:function(e){e.halt();var t=e.target.ancestor(".search-result",true);var a=t.getData("url");var i=o.Lang.isValue(a)?a:this._getSearchItemUrl(t);this._trackSearchHelper(t);this._redirect(i+"?"+o.QueryString.stringify({rq:this.get("searchQuery")}))},_trackSearchHelper:function(e){var t=e.getAttribute("itemid");var a=this.get("resultItems");if(c(a))return;var i;var n;var s;for(var r=0;r<a.length;r++)if(a[r].id===t){i=a[r].title.replace(/<(.|\n)*?>/g,"");n=a[r].categories;s=a[r].tags;break}l.trackSearch({content_name:i,content_category:n,content_tag:s,search_string:this.get("searchQuery")})},_updateHistory:function(){var e=s(this.get("searchQuery"));if(!o.Lang.isValue(e)||""===e)return;var t=o.config.win.history;var a=e+" - "+o.config.doc.title;var i={};i.q=e;var n=this.get("collectionFilter");""!==n&&(i.f_collectionId=n);t.pushState(i,a,r+"?"+o.QueryString.stringify(i))},_onResize:function(){this._loadImages()},_setSearchQuery:function(e){o.Lang.isValue(e)&&""!==e&&(e=o.Squarespace.Escaping.escapeForHtml(e+""));return o.Lang.isValue(e)?e:""}},{CSS_PREFIX:"sqs-search-page",TEMPLATE_RESULTS_NAME:"search-result.html",HTML_PARSER:{inputWrapper:".sqs-search-page-input",spinnerEls:[".spinner-wrapper"],outputEl:".sqs-search-page-output",noticeEl:".sqs-search-page-notice",resultEl:".sqs-search-page-result",resultsWrapperEl:".sqs-search-page-list .search-results",resultItemEls:[".sqs-search-page-list .search-results .search-result"],moreEl:".sqs-search-page-more"},ATTRS:{searchQuery:{valueFn:function(){var e=o.QueryString.parse(o.config.doc.location.search.substring(1)).q;return this._setSearchQuery(e)},setter:"_setSearchQuery",validator:o.Squarespace.AttrValidators.isString},collectionFilter:{valueFn:function(){var e=o.QueryString.parse(o.config.doc.location.search.substring(1)).f_collectionId;o.Lang.isValue(e)&&""!==e&&(e=o.Squarespace.Escaping.escapeForHtml(e+""));return o.Lang.isValue(e)?e:""},validator:o.Squarespace.AttrValidators.isNullOrString},inputWrapper:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},outputEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},noticeEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},spinnerEls:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList,writeOnce:"initOnly"},resultEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},resultsWrapperEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode},resultItemEls:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList},moreEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},displayDelay:{value:500,validator:o.Squarespace.AttrValidators.isNumber},perPage:{value:20,validator:o.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}});o.config.win.Squarespace.onInitialize(o,function(){o.all(".sqs-search-page").each(function(e){new a({srcNode:e}).render()})})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","querystring","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escaping-utils","squarespace-search","squarespace-search-result-template","squarespace-spinner","squarespace-ss-widget","squarespace-ui-templates","squarespace-util"]})},7539:function(e,t,a){var n=a(24).t;var s=a(1944);var o=a(1622);YUI.add("squarespace-search",function(r){r.namespace("Squarespace");var t=38;var a=40;var i=13;r.Squarespace.Widgets.SearchContainer=r.Base.create("searchContainer",r.Squarespace.SSWidget,[],{bindUI:function(){var e=this.get("searchInputBox");e.after("queryStringChange",this._onSearchInputBoxChange,this);this.after("searchQueryChange",this._onSearchQueryChange,this);this.get("censusEnabled")&&this.after("searchQueryChange",this._trackOnQueryChange,this,this.get("collectionFilter"));this.after("resultItemsChange",this._onSearchResultChange,this);this.after("loadingChange",this.syncUI,this);this.get("contentBox").on("keyup",this._onKeyup,this)},_onSearchQueryChange:function(){this._clearResult();this.set("loading",true);this._search()},_onSearchFilterChange:function(){this._clearResult();this.set("loading",true);this._search()},_onSearchResultChange:function(){this.syncUI()},_clearResult:function(){this.set("resultItems",null);this.set("page",0)},_onSearchInputBoxChange:function(e){this.set("searchQuery",e.newVal)},_onKeyup:function(e){e.keyCode!==t||this.get("searchInputBox").isAutocompleteEnabled()?e.keyCode!==a||this.get("searchInputBox").isAutocompleteEnabled()?e.keyCode===i&&this._onEnter():this._moveSelectedResultItem(1):this._moveSelectedResultItem(-1)},_moveSelectedResultItem:function(e){var t=this.get("contentBox").one(".active");if(r.Lang.isValue(t)){t.removeClass("active");var a=this.get("contentBox").all(".sqs-search-ui-item");var i=a.indexOf(t);var n=a.item(i+e);if(r.Lang.isValue(n)){n.addClass("active");n.scrollIntoView()}}else if(e>0){var s=this.get("contentBox").one(".sqs-search-ui-item");if(r.Lang.isValue(s)){s.addClass("active");s.scrollIntoView()}}},_onEnter:function(){var e=this.get("contentBox").one(".active");r.Lang.isValue(e)||this.get("searchInputBox").isAutocompleteEnabled()||this._redirect(this._getSearchItemUrl(e))},_getSearchItemUrl:function(e){if(!r.Lang.isValue(e))return;var t=e.getAttribute("itemid");if(!r.Lang.isValue(t))return;var a=this._getSearchResultObject(t);return a.itemUrl},_redirect:function(e){r.Lang.isValue(e)&&(document.location.href=e)},_search:function(){var e=this.get("searchQuery");var t=this.get("searchFilter");var a=this.get("page");if(0===e.length)return;var i={q:e,p:a};r.Lang.isValue(t)&&r.Array.each(t,function(e){i["f_"+e.name]=e.value});r.Data.get({url:"/api/search/GeneralSearch",data:i,success:this._searchResultCallback,error:this._searchResultCallbackError},this)},_searchResultCallback:function(e){this.set("loading",false);this.set("facets",e.facets);this.set("totalCount",e.totalCount);var t=this.get("resultItems");var a=this.get("page");if(e.serviceError)false;else if(a>0&&t){t=t.concat(e.items);this.set("resultItems",t)}else this.set("resultItems",e.items)},_searchResultCallbackError:function(){this.set("loading",false);this._errorNotice=this.get("strings.errorNotice")},_getSearchDataModel:function(){var e=this.get("resultItems");var t={loading:this.get("loading"),error:this._errorNotice,items:e};r.Lang.isValue(e)?0===e.length&&(t.notice=this.get("strings.emptyNotice")):t.notice=this.get("strings.instruction");return t},_getSearchResultObject:function(t){return r.Array.find(this.get("resultItems"),function(e){return e.id===t})},_nextPage:function(){var e=this.get("page")+1;this.set("page",e);this._search()},_trackOnQueryChange:function(e,t){this._trackSearchHit(e.newVal,t,r.config.doc.location.href)},_trackSearchHit:function(e,t,a){if(!r.Lang.isValue(e)||""===e)return;var i=[];r.Lang.isValue(t)&&""!==t&&i.push(t);o.track(s.SITE_SEARCH,{query:e,filters:{collectionIds:i},referrer:a})}},{CSS_PREFIX:"sqs-search-container",ATTRS:{strings:{value:{errorNotice:n("Something wrong happened. Please reload."),emptyNotice:n("Your search did not match any documents."),instruction:n("Begin typing your search above and press return to search.")}},searchInputBox:{value:null},searchFilter:{value:[],validator:r.Squarespace.AttrValidators.isArray},page:{value:0,validator:r.Squarespace.AttrValidators.isNumber},searchQuery:{value:"",validator:r.Squarespace.AttrValidators.isString},resultItems:{validator:r.Squarespace.AttrValidators.isNullOrArray},totalCount:{value:0,validator:r.Squarespace.AttrValidators.isNumber},facets:{value:[],validator:r.Squarespace.AttrValidators.isArray},loading:{value:false,validator:r.Squarespace.AttrValidators.isBoolean},censusEnabled:{value:true,validator:r.Squarespace.AttrValidators.isBoolean}}});r.Squarespace.Widgets.SearchInputBox=r.Base.create("searchInputBox",r.Widget,[],{renderUI:function(){var e=this._createSearchNode();this.get("contentBox").append(e)},bindUI:function(){this._enableAutoComplete();var e=this.get("boundingBox").one("form");e.on("submit",this.onSubmit,this);e.on("keydown",this._onKeyDown,this);r.Squarespace.Utils.onPointerAction(this.get("boundingBox").one("input"),this.focus,this);this.after("queryStringChange",this._resetAutoComplete,this)},_onKeyDown:function(e){27!==e.keyCode&&e.stopPropagation()},_autocompleteSelected:function(e){r.later(1,this,function(e){this.set("queryString",e.result.text)},e)},onSubmit:function(e){r.Lang.isValue(e)&&e.preventDefault();var t=this.get("contentBox").one("input").get("value");this.set("queryString",t)},_enableAutoComplete:function(){var e=location.protocol+"//"+location.host+"/api/search/SearchSuggest";var t=new r.DataSource.IO({source:e});var a=this.get("contentBox").one("input");if(this.get("withSearchSuggest")&&!a.ac){a.plug(r.Plugin.AutoComplete,{source:t,requestTemplate:"?q={query}",resultTextLocator:"suggestion",resultListLocator:function(e){return r.JSON.parse(e[0].responseText)}});var i=this.get("boundingBox").one("input").ac;i.on("select",this._autocompleteSelected,this)}},isAutocompleteEnabled:function(){var e=this.get("contentBox").all(".yui3-aclist-item");return e.size()>0},_resetAutoComplete:function(){var e=this.get("boundingBox").one("input");e.set("value",this.get("queryString"));e.ac&&e.unplug("ac");this._enableAutoComplete()},focus:function(){var e=this.get("contentBox").one("input");e.focus();e.set("value",this.get("queryString"));""!==this.get("queryString")&&e.select()},blur:function(){var e=this.get("contentBox").one("input");e.blur()},_createSearchNode:function(){var e=r.Node.create("<input/>");e.setAttrs({placeholder:n("Type to search…"),type:this.get("inputType"),spellcheck:false});e.setAttribute("value",this.get("queryString"));var t=r.Node.create("<form/>");t.append(e);return t}},{CSS_PREFIX:"sqs-search-input",ATTRS:{queryString:{value:"",validator:r.Squarespace.AttrValidators.isString},inputType:{value:"search",validator:r.Squarespace.AttrValidators.isString},withSearchSuggest:{value:false,validator:r.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","squarespace-animations","squarespace-ss-widget","squarespace-util"]})},7540:function(e,t,a){var o=a(24).t;var l=a(6271);YUI.add("squarespace-simple-liking",function(r){var t=r.config.win.Static;r.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:o("No Likes"),TEXT_LIKE_VERB_SINGULAR:o("Like"),TEXT_LIKE_VERB_PLURAL:o("Likes"),TEXT_LIKE_ACTIVATED:o("You like this"),TEXT_LIKE_SUGGEST:o("Click to like"),attached:false,attach:function(){if(this.attached)return;this.attached=true;var s;try{if(localStorage){s=r.JSON.parse(localStorage.getItem("squarespace-likes"));s=s||{};localStorage.setItem("squarespace-likes",r.JSON.stringify(s))}}catch(e){s={}}this.eventHandlers=[];var e=r.delegate("click",function e(t){var a=t.currentTarget;var i=a.getAttribute("data-item-id");if(!i)return;for(var n=0;n<5;++n)r.Squarespace.SimpleLike.burst(a);if(a.hasClass("clicked")||a.hasClass("float"))return;l.like(i).then(function(e){if(true===e.commited){if(a&&a.getDOMNode()){var t=parseInt(a.getAttribute("data-like-count"),10);a.setAttribute("data-like-count",t+1);r.Squarespace.SimpleLike.renderLikeCount(a);a.addClass("clicked")}try{if(localStorage){s[i]=true;localStorage.setItem("squarespace-likes",r.JSON.stringify(s))}}catch(e){console.warn("Unable to save like to local storage: ",e)}}e.error&&(r.Squarespace.Utils.areCookiesEnabled()||r.config.win.alert(o("You need to enable cookies to be able to like something.")))}).catch(function(e){false})},"body",".sqs-simple-like");this.eventHandlers.push(e);r.all(".sqs-simple-like").each(function(a){var e=a.getAttribute("data-item-id");if(!e)return;t.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||a.remove();s[e]&&a.addClass("clicked");l.getLikeCount(e).then(function e(t){a.setAttribute("data-like-count",t);r.Squarespace.SimpleLike.renderLikeCount(a)}).catch(function e(){r.Squarespace.SimpleLike.renderLikeCount(a)})})},detach:function(){this.attached=false;this.eventHandlers.forEach(function(e){e.detach()})},renderLikeCount:function e(t){var a=t&&t.getDOMNode?t.getDOMNode():t;if(!a||!a.ownerDocument||!a.ownerDocument.defaultView)return;var i=t.getAttribute("data-item-id");var n=t.getAttribute("data-like-count");var s=t.one(".like-count");if(!i||!s)return;s.setContent(this.formatLikeText(n))},formatLikeText:function(e){if(0===e)return r.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE;if(1===e)return"1 "+r.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR;return e+" "+r.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL},burst:function(e){var t=e.cloneNode(true);t.one(".like-count")&&t.one(".like-count").remove();var a=e.one(".like-icon");a&&"none"!==a.getStyle("display")||(a=e);t.setStyles({position:"absolute",left:a.getX()+"px",top:a.getY()+"px"});r.one(r.config.doc.body).append(t);var i=new r.Anim({node:t,duration:2,easing:r.Easing.easeOut});i.set("to",{curve:r.Squarespace.SimpleLike.randomCurve(t)});i.on("end",function(){this.get("node").remove()});i.run();t.removeClass("clicked");t.addClass("float")},randomCurve:function(e){var t=[];var a=3;var i=30;var n=Math.floor(2*Math.random())?1:-1;var s=Math.floor(2*Math.random())?1:-1;var r=e.getX();var o=e.getY();var l=0;for(;l<a;++l){r+=Math.floor(Math.random()*i)*n;o+=Math.floor(Math.random()*i)*s;t.push([r,o])}return t}};r.config.win.Squarespace.onInitialize(r,function(){t.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&r.Squarespace.SimpleLike.attach()});r.config.win.Squarespace.onDestroy(r,function(){true===r.Squarespace.SimpleLike.attached&&r.Squarespace.SimpleLike.detach()})},"1.0",{requires:["anim","json","node","squarespace-util"]})},7541:function(e,t,a){a(1486);YUI.add("squarespace-slides",function(a){a.config.win.Squarespace.onInitialize(a,function(){var e=a.one(".sqs-slide-container .sqs-slide");var t=e.getAttribute("data-slide-layout-id");a.Squarespace.SlideRendering.Layouts.Factory.create(t,{boundingBox:e,render:true})})},"1.0",{requires:["squarespace-slide-rendering-layouts-factory"]})},7542:function(e,t,a){var s=a(24).t;var r=a(24).pluralize;var o=a(6271);YUI.add("squarespace-share-buttons",function(l){"use strict";var t=l.config.win;var c=l.config.win.document;var d={CALLBACK_NAMESPACE:"SquarespaceShareButtonCounts"+Date.now(),SERVICE_NAMES:["facebook","linkedin","pinterest"],COUNT_KEYS:{facebook:["share","share_count"],linkedin:["count"],pinterest:["count"]},URL_KEYS:{facebook:"id",linkedin:"url",pinterest:"url"},API_BASE_URLS:{facebook:"https://graph.facebook.com/?id=",linkedin:"https://www.linkedin.com/countserv/count/share?url=",pinterest:"https://widgets.pinterest.com/v1/urls/count.json?source=6&url="}};function a(e,t){try{var a=e[d.URL_KEYS[t]];var i=c.createElement("a");i.href=a;var n=i.pathname.replace(/^\/|\/$/g,"");var s='.Share[data-item-path="'+n+'"] .Share-buttons-item[data-service="'+t+'"]';var r=l.Object.getValue(e,d.COUNT_KEYS[t])||0;var o=c.querySelectorAll(s);Array.prototype.forEach.call(o,function(e){e.querySelector(".Share-buttons-item-count").innerHTML=r})}catch(e){false}}t[d.CALLBACK_NAMESPACE]={facebook:function(e){a(e,"facebook")},linkedin:function(e){a(e,"linkedin")},pinterest:function(e){a(e,"pinterest")}};function i(e){this.container=e.container;this.like=e.like;this.ID=e.id;this.PATH=e.path;this.SHARE_LINK=t.Static.SQUARESPACE_CONTEXT.website.baseUrl+"/"+this.PATH;this.shareButtonClickHandler=this.shareButtonClickHandler.bind(this)}i.prototype={init:function(){d.SERVICE_NAMES.forEach(function(e){var t=this.container.querySelector('.Share-buttons-item[data-service="'+e+'"]');if(!t)return;this.getCount(e)},this);if(this.like){this.initializeLikes();this.isInLocalStorage(this.like)&&this.like.classList.add("is-active")}this.container.addEventListener("click",this.shareButtonClickHandler)},destroy:function(){this.container.removeEventListener("click",this.shareButtonClickHandler)},getCount:function(e){var t=c.createElement("script");t.src=[d.API_BASE_URLS[e],this.SHARE_LINK,"&callback=",d.CALLBACK_NAMESPACE,".",e].join("");c.body.appendChild(t);c.body.removeChild(t)},shareButtonClickHandler:function(e){e.preventDefault();var t=l.one(e.target).ancestor(".Share-buttons-item",true);if(!t||!t.getDOMNode())return;t=t.getDOMNode();if(!t.getAttribute("data-service"))return;this.like&&t===this.like?this.onLike():this.onShare(t)},initializeLikes:function(){o.getLikeCount(this.ID).then(function(e){this.syncLikes(e)}.bind(this)).catch(function(){this.syncLikes()}.bind(this))},syncLikes:function(e){var t=this.like.querySelector(".Share-buttons-item-label");e=e||parseInt(this.like.getAttribute("data-like-count"),10);t.innerHTML=r({one:"{%n} Like",other:"{%n} Likes"},e);this.like.setAttribute("data-like-count",e)},onLike:function(){if(this.like.classList.contains("is-active"))return;o.like(this.ID).then(function(e){if(true===e.commited){this.incrementLike();this.addToLocalStorage(this.like)}e.error&&(l.Squarespace.Utils.areCookiesEnabled()||l.config.win.alert(s("You need to enable cookies to be able to like something.")))}.bind(this)).catch(function(e){false})},incrementLike:function(){var e=parseInt(this.like.getAttribute("data-like-count"),10);e+=1;this.like.classList.add("is-active");this.syncLikes(e)},onShare:function(e){window.open(e.getAttribute("href"),s("Share"),"width=420,height=230,dialog");var t=e.querySelector(".Share-buttons-item-count");t&&(t.innerHTML=parseInt(t.innerHTML,10)+1)},onSharePopupClose:function(e,t){var a=0;var i;var n=function(){if(e.closed||a>150){clearInterval(i);this.getCount(t)}a++};i=setInterval(n.bind(this),200)},getLocalStorageKey:function(e){var t=e.getAttribute("data-service");if(e===this.like)return"squarespace-likes";if(t)return"squarespace-shares-"+t;return null},isInLocalStorage:function(e){try{if(!localStorage||!JSON)return false}catch(e){return false}var t=this.getLocalStorageKey(e);var a=JSON.parse(localStorage.getItem(t));if(a)return true===a[this.ID]},addToLocalStorage:function(e){if(!l.config.win.localStorage||!l.config.win.JSON)return false;var t=this.getLocalStorageKey(e);var a=JSON.parse(localStorage.getItem(t))||{};a[this.ID]=true;localStorage.setItem(t,JSON.stringify(a))},readCookie:function(e){var t=e+"=";var a=c.cookie.split(";");for(var i=0;i<a.length;i++){var n=a[i];while(" "===n.charAt(0))n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}};var n=[];t.Squarespace.onInitialize(l,function(){l.all(".Share").each(function(e){e=e.getDOMNode();var t=new i({container:e,id:e.getAttribute("data-item-identifier"),path:e.getAttribute("data-item-path"),like:e.querySelector(".Share-buttons-item--like")});t.init();n.push(t)})});t.Squarespace.onDestroy(l,function(){n.forEach(function(e){e.destroy()});n.length=0})},"1.0",{requires:[]})},7543:function(e,t,a){var i=a(1927);var n=a(149);YUI.add("squarespace-social-buttons",function(l){l.namespace("Squarespace");var c=l.config.win.Static;var t=l.Squarespace.SocialButton;var d=l.Squarespace.SocialButtons=l.Base.create("socialButtons",l.Base,[],{initializer:function(e){var t=this.get("services");this._buttonConfigs={};this._buttons=[];this._eventHandles=[];if(t.length>0){this._scanForButtons();this._initializeButtons();this._bindEvents();this._renderButtons()}else this._markButtonsAsEmpty()},_markButtonsAsEmpty:function(){l.all(d.SOCIAL_BUTTON_CONTAINER).addClass("empty")},_scanForButtons:function(){var e=l.all(d.SOCIAL_BUTTON_CONTAINER),o=this.get("services");e.each(function(e){var t=e.getAttribute(d.TITLE),a=c.SQUARESPACE_CONTEXT.website.baseUrl+e.getAttribute(d.FULL_URL),i=parseInt(e.getAttribute(d.RECORD_TYPE),10),n=e.getAttribute(d.ASSET_URL),s=e.getAttribute(d.SYSTEM_DATA_ID),r=l.guid(d.ID_PREFIX);this._buttonConfigs[r]={id:r,title:t,url:a,recordType:i,assetUrl:n,systemDataId:s,services:o,node:e}},this)},_initializeButtons:function(){this._buttons=l.Array.map(l.Object.values(this._buttonConfigs),function(e){return new t(e)})},_bindEvents:function(){this._eventHandles.push(this.after("cleanup",this._defaultDestroy,this))},_renderButtons:function(){this._buttons.filter(this._excludeOnlyPinterest,this).forEach(function(e){var t=e.get("id");e.render(this._buttonConfigs[t].node)},this)},destructor:function(){this.fire("cleanup")},_unbindEvents:function(){this._eventHandles.forEach(function(e){e.detach();e=null})},_defaultDestroy:function(){this._destroyButtons();this._unbindEvents();this.fire("destroyed")},_destroyButtons:function(){this._buttons.forEach(function(e){e.destroy()},this)},_excludeOnlyPinterest:function(e){var t=e.get("recordType");if(t!==n.IMAGE&&this._onlyServiceIsPinterest(e))return false;return true},_onlyServiceIsPinterest:function(e){var t=e.get("services");return 1===t.length&&t[0]===i.PINTEREST}},{FULL_URL:"data-full-url",ASSET_URL:"data-asset-url",SYSTEM_DATA_ID:"data-system-data-id",RECORD_TYPE:"data-record-type",ID_PREFIX:"social-",TITLE:"data-title",SOCIAL_BUTTON_CONTAINER:".squarespace-social-buttons",ATTRS:{services:{valueFn:function(){return l.Array.map(l.Object.keys(c.SQUARESPACE_CONTEXT.website.shareButtonOptions||{}),function(e){return parseInt(e,10)})}}}});var e=[];l.config.win.Squarespace.onInitialize(l,function(){l.all(".squarespace-social-buttons").isEmpty()||e.push(new l.Squarespace.SocialButtons)});l.config.win.Squarespace.onDestroy(l,function(){e.forEach(function(e){e.destroy()});e.length=0})},"1.0",{requires:["array-extras","base","node","squarespace-social-button"]})},7544:function(e,t,a){var n=a(24).t;var d=a(276);var s=a(1927);var r=a(853);YUI.add("squarespace-social-button",function(b){b.namespace("Squarespace");var o=s;var l=400;var e=function(e){return e};var c=b.Squarespace.SocialButton=b.Base.create("socialButton",b.Widget,[],{initializer:function(e){this._servicesRendered={};e.services.forEach(function(e){this._servicesRendered[e]=false},this);this._open=false;this._anims={};this._serviceRenderers={};this._serviceRenderers[o.REDDIT]=this._renderReddit;this._serviceRenderers[o.FACEBOOK]=this._renderFacebook;this._serviceRenderers[o.TWITTER]=this._renderTwitter;this._serviceRenderers[o.LINKEDIN]=this._renderLinkedIn;this._serviceRenderers[o.STUMBLE]=this._renderStumble;this._serviceRenderers[o.PINTEREST]=this._renderPinterest;this._serviceRenderers[o.TUMBLR]=this._renderTumblr;this.publish("serviceRendered",{defaultFn:this._defaultServiceRendered,context:this});this.publish("buttonClicked",{defaultFn:this._defaultButtonClicked,preventable:true,context:this});this.publish("close",{defaultFn:this.close,preventable:true,context:this});this.publish("servicesRendered");this._serviceContainer=b.Node.create('<div class="ss-social-button-container"></div>')},_defaultServiceRendered:function(e){var t=e.details[0];this._servicesRendered[t]=true;if(this._allServicesRendered()){this.set("loaded",true);this.fire("servicesRendered",this)}},open:function(){this._open=true;this._openList()},close:function(){this._open=false;this._closeList()},_onClick:function(e){this.fire("buttonClicked",e)},_defaultButtonClicked:function(e){if(this.get("loaded"))this.isOpen()?this.close():this.open();else if(!this.get("loading")){this.once("servicesRendered",function(){this.set("loading",false)},this);this.set("loading",true);this._renderServices();this.open()}},isOpen:function(){return this._open},destructor:function(){this._stopAnimations()},_stopAnimations:function(){b.Object.values(this._anims).forEach(function(e){e.stop();e=null})},_closeList:function(){var e=this.get("contentBox");if(e._node&&e.inDoc()){var t=e.one(".ss-social-list-wrapper"),a;if(t&&t._node&&t.inDoc()){a=new b.Anim({node:t,duration:.3,easing:b.Easing.easeOutStrong,to:{height:0,opacity:0}});this._anims.close=a;a.on("end",function(){t.setStyle("overflow",null);this.fire("listClose")},this);a.run()}}},_openList:function(){var e=this.get("contentBox");if(e._node&&e.inDoc()){var t=e.one(".ss-social-button-wrapper"),a=e.one(".ss-social-list-wrapper"),i=e.one(".ss-social-button-list"),n=t.get("offsetWidth"),s=t.get("offsetHeight"),r=a.get("offsetWidth"),o=Math.abs(n-r),l,c;a.setStyles({left:(n<=r?-1:1)*o/2,top:s});var d=b.DOM.viewportRegion();var u=i.get("region");var g=u.height+u.top;var p=g-(d.height+d.top);var h=d.left-u.left;var f=h>0;var m=20;var v=20;p>0&&a.setStyle("top",parseInt(a.getComputedStyle("top"),10)-p-m);f&&a.setStyle("left",parseInt(a.getComputedStyle("left"),10)+h+v);if(a&&a._node&&a.inDoc()){c=new b.Anim({node:a,duration:.3,easing:b.Easing.easeOutStrong,to:{height:i.get("offsetHeight"),opacity:1}});this._anims.open=c;c.on("end",function(){a.setStyle("overflow","visible");var t=b.config.win.document;b.UA.touchEnabled&&b.one(t.documentElement).setStyle("cursor","pointer");l=b.one(t).on("click",function(e){if(!e.target.ancestor(".ss-social-list-wrapper",true)){this.fire("close");l.detach();l=null;b.one(t.documentElement).setStyle("cursor","")}},this);this.fire("listOpen")},this);c.run()}}},_allServicesRendered:function(){return b.Object.values(this._servicesRendered).every(e)},bindUI:function(){var e=this.get("contentBox"),t=e.one(".ss-social-button-wrapper");this.after("loadingChange",this._onLoadingChange,this);t.on("click",this._onClick,this)},_onLoadingChange:function(){this.get("boundingBox").ancestor(".squarespace-social-buttons").toggleClass("loading",this.get("loading"))},renderUI:function(){var e=this.get("contentBox");e.append('<div class="ss-social-button-wrapper"><div class="ss-social-button"><span class="ss-social-button-icon"></span>'+n("Share")+"</div></div>");e.append('<div class="ss-social-list-wrapper"><div class="ss-social-button-list"></div></div>')},_renderServices:function(){var t=this.get("contentBox").one(".ss-social-button-list");this.get("services").forEach(function(e){e in this._serviceRenderers&&this._serviceRenderers[e].call(this,t)},this)},_defaultTimeoutCb:function(e,t){var a=r(s),i=n("(Social Button) Loading render script for service: {name} too longer than {sub1} seconds. Skipping.",{sub1:c.SCRIPT_TIMEOUT/1e3});return function(){false;this.fire("serviceRendered",e);t&&t.hide()}},_defaultFailureCb:function(e,t){var a=r(s),i=n("(Social Button) Service {name} render script failed to load.");return function(){false;this.fire("serviceRendered",e);t&&t.hide()}},_renderReddit:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url");t.addClass("reddit");t.append(b.Node.create(c.REDDIT_LINK));t.on("click",function(e){window.open("http://reddit.com/submit?url="+encodeURIComponent(a),n("Submit to Reddit"));e.stopImmediatePropagation()});e.append(t);this.fire("serviceRendered",o.REDDIT)},_renderTumblr:function(e){var t=this._serviceContainer.cloneNode(true);var a={url:this.get("url"),name:this.get("title")};var i=b.QueryString.stringify(a);t.addClass("tumblr");t.append(b.substitute(c.TUMBLR_TAG_TEMPLATE,{query:i}));e.append(t);b.Get.script(c.TUMBLR_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.TUMBLR)})},onFailure:this._defaultFailureCb(o.TUMBLR,t),onTimeout:this._defaultTimeoutCb(o.TUMBLR,t),timeout:c.SCRIPT_TIMEOUT,context:this,win:b.config.win})},_renderFacebook:function(e){var t=this._serviceContainer.cloneNode(true);var a=this.get("url");t.addClass("facebook");t.append(b.Node.create(b.substitute(c.FACEBOOK_TAG_TEMPLATE,{url:a})));e.append(t);var i=b.config.win;var n=i.Static.SQUARESPACE_CONTEXT.facebookAppId;var s=i.Static.SQUARESPACE_CONTEXT.facebookApiVersion;var r=b.substitute(c.FACEBOOK_URL,{locale:d.formatLocaleForFacebook(d.getResolvedWebsiteLocale())});b.Get.script(r,{onSuccess:function(){i.FB&&b.later(l,this,function e(){i.FB.init({appId:n,xfbml:false,version:s});i.FB.XFBML&&i.FB.XFBML.parse&&i.FB.XFBML.parse();this.fire("serviceRendered",o.FACEBOOK)})},onFailure:this._defaultFailureCb(o.FACEBOOK,t),onTimeout:this._defaultTimeoutCb(o.FACEBOOK,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderTwitter:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("title"),i=this.get("url");t.append(b.Node.create('<a href="https://twitter.com/share" data-text="'+b.Escape.html(a||"")+'" data-url="'+b.Escape.html(i)+'"class="twitter-share-button">'+n("tweet")+"</a>"));t.addClass("twitter");e.append(t);b.Get.script(c.TWITTER_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.TWITTER)})},onFailure:this._defaultFailureCb(o.TWITTER,t),onTimeout:this._defaultTimeoutCb(o.TWITTER,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderLinkedIn:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url");t.addClass("linkedin");t.append(b.Node.create(b.substitute(c.LINKEDIN_URL_TEMPLATE,{url:a})));e.append(t);window.IN=void 0;b.Get.script(c.LINKEDIN_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.LINKEDIN)})},onFailure:this._defaultFailureCb(o.LINKEDIN,t),onTimeout:this._defaultTimeoutCb(o.LINKEDIN,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderStumble:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url"),i=this.get("id");t.addClass("stumble");t.append(b.Node.create(b.substitute(c.STUMBLE_TAG_TEMPLATE,{url:a,id:i})));e.append(t);b.Get.script(c.STUMBLE_URL,{onSuccess:function(){b.later(l,this,function e(){if(window.STMBLPN){window.STMBLPN.wasProcessLoaded&&(window.STMBLPN.wasProcessLoaded=false);window.STMBLPN.processWidgets()}this.fire("serviceRendered",s.STUMBLE)})},onFailure:this._defaultFailureCb(o.STUMBLE,t),onTimeout:this._defaultTimeoutCb(o.STUMBLE,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderPinterest:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("assetUrl"),i=this.get("url"),n=Static.SQUARESPACE_CONTEXT.website.authenticUrl+e.ancestor(".squarespace-social-buttons").getAttribute("data-full-url");if(this.get("systemDataId")){t.addClass("pinterest");t.append(b.Node.create(b.substitute(c.PINTEREST_TAG_TEMPLATE,{url:encodeURIComponent(a||i),pageUrl:encodeURIComponent(n)})));e.append(t);b.Get.script(c.PINTEREST_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",s.PINTEREST)},this)},onFailure:this._defaultFailureCb(o.PINTEREST,t),onTimeout:this._defaultTimeoutCb(o.PINTEREST,t),timeout:c.SCRIPT_TIMEOUT,context:this})}else this.fire("serviceRendered",o.PINTEREST)}},{TWITTER_URL:"//platform.twitter.com/widgets.js",TUMBLR_URL:"//platform.tumblr.com/v1/share.js",FACEBOOK_URL:"//connect.facebook.net/{locale}/sdk.js",LINKEDIN_URL:"//platform.linkedin.com/in.js",STUMBLE_URL:"http://platform.stumbleupon.com/1/widgets.js",PINTEREST_URL:"//assets.pinterest.com/js/pinit.js",LINKEDIN_URL_TEMPLATE:'<script type="IN/Share" data-url="{url}" data-counter="right"><\/script>',FACEBOOK_TAG_TEMPLATE:'<div id="fb-root"></div><fb:like href="{url}" send="false" layout="button_count" show_faces="true"></fb:like>',PINTEREST_TAG_TEMPLATE:'<a href="//pinterest.com/pin/create/button?url={pageUrl}&media={url}" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="'+n("Pin It")+'" /></a>',TUMBLR_TAG_TEMPLATE:'<a href="https://tumblr.com/share/link?{query}" title="'+n("Share on Tumblr")+'" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(\'https://platform.tumblr.com/v1/share_1T.png\') top left no-repeat transparent;">'+n("Share on Tumblr")+"</a>",SCRIPT_TIMEOUT:5e3,STUMBLE_TAG_TEMPLATE:'<su:badge layout="1" location="{url}"></su:badge>',REDDIT_LINK:'<a href="#"><img src="https://old.reddit.com/static/spreddit7.gif" alt="'+n("submit to reddit")+'" border="0" /></a>',ATTRS:{url:{value:window.location.href},title:{value:document.title||window.location.href},services:{},recordType:{},assetUrl:{value:""},systemDataId:{value:""},loaded:{value:false},loading:{value:false}}})},"1.0",{requires:["anim","base","escape","node","querystring-stringify","squarespace-util","substitute","widget"]})},7545:function(e,t){YUI.add("squarespace-tourdates",function(n){n.namespace("Squarespace.Tourdates");var s=[];n.Squarespace.Tourdates.initializeNode=function(t){var e=!!n.Array.find(s,function(e){return e.get("boundingBox").ancestor(".sqs-block")===t});if(e)return;var a=JSON.parse(t.getAttribute("data-block-json"));var i=new n.Squarespace.Widgets.BandsInTownTourDatesList({artistId:a.artistId,timeframe:a.timeframe,startDate:a.startDate,endDate:a.endDate}).render(t);s.push(i)};n.config.win.Squarespace.onInitialize(n,function e(){n.all(".sqs-block-tourdates[data-block-json]").each(n.Squarespace.Tourdates.initializeNode)});n.config.win.Squarespace.onDestroy(n,function e(){s.forEach(function(e){e.destroy&&e.destroy()});n.all(".sqs-block-tourdates[data-block-json]").each(function(e){e.empty()});s.length=0})},"1.0",{requires:["squarespace-widgets-tourdates-bandsintown"]})},7546:function(e,t,a){var i=a(229);var r=a(2710);var n=a(4209);var o=a(1572);var l=a(2712);var c=a(4189);var d=a(5070);var u=a(522);YUI.add("squarespace-website-overlays-manager",function(s){s.namespace("Squarespace.Frontend").WebsiteOverlaysManager=s.Base.create("websiteOverlaysManager",s.Base,[],{initializer:function(){this._body=s.one(s.config.doc.body);var e=s.config.win.Static.SQUARESPACE_CONTEXT.pageType;e===o.NOT_FOUND&&s.config.win.Static.SQUARESPACE_CONTEXT.collection&&s.config.win.Static.SQUARESPACE_CONTEXT.collection.type===i.SPLASH_PAGE&&(e=o.SPLASH_PAGE);if(e===o.SPLASH_PAGE||e===o.LOCK_SCREEN){this.syncPreviewBar();return}this.syncPreviewBar();this._initializeMobileInfoBar();this._syncSSBadge();this._manageOverlaps();this.after("ssBadgeSettingsChange",this._syncSSBadge,this);this.after("mobileInfoBarSettingsChange",this.showMobileInfoBar)},syncPreviewBar:function(){if(s.config.win.SQUARESPACE_LOGIN)return;var e=this._body.all('img[data-licensed-asset-preview="true"]');var t=this._body.hasClass("has-preview-getty-imgs");if(t||e.size()>0&&!this.previewBar)this.previewBar=new s.Squarespace.LicensedAssets.Widgets.PreviewBar({render:true});else if(this.previewBar){this.previewBar.destroy();this.previewBar=null}},_syncSSBadge:function(){if(u.isSevenOne())return;var e=this.get("ssBadgeSettings");var t=e.type;if(t===l.NONE){if(this._ssBadge){this._ssBadge.destroy();this._ssBadge=null}return}var a=e.visibility===c.SCROLL;var i=e.position;var n=e.devices;this._ssBadge||(this._ssBadge=new s.Squarespace.Widgets.SSBadge({render:this._body}));this._ssBadge.setAttrs({type:t,position:i,autoHide:a,devices:n})},_initializeMobileInfoBar:function(){var e=this._getMobileInfoBarSettings();if(e){this._mobileInfoBar=new s.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:e,style:e.style});this._mobileInfoBar.render()}},showMobileInfoBar:function(){var e=this._getMobileInfoBarSettings(true);this.hideMobileInfoBar();if(e){this._mobileInfoBar=new s.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:e,style:e.style});this._mobileInfoBar.render()}},hideMobileInfoBar:function(){if(this._mobileInfoBar){this._mobileInfoBar.destroy();this._mobileInfoBar=null}},_manageOverlaps:function(){if(u.isSevenOne())return;var e=this._isSSBadgeVisible();var t=this._isMobileInfoBarVisible();var a=this.get("ssBadgeSettings");if(a){var i=a.visibility;var n=i===c.ALWAYS;if(e&&t&&n){this._adjustSSBadgeBottomOffset();s.one(s.config.win).on("scroll",function(){var e=s.config.doc.body.scrollTop;e<=0?this._adjustSSBadgeBottomOffset():this._clearSSbadgeBottomOffset()},this)}}},_getMobileInfoBarSettings:function(e){var t=this.get("mobileInfoBarSettings");var a=null;var i=e||d.shouldShowMobileInformationBar({win:s.config.win,isMobile:s.UA.mobile,settings:t});if(!s.Lang.isUndefined(t)&&i){var n=r.NONE;t.style=parseInt(t.style,10);t.style!==n&&(a=t)}return a},_adjustSSBadgeBottomOffset:function(){this._ssBadge.set("className","sqs-ss-badge-mobile-info-bar-present")},_clearSSbadgeBottomOffset:function(){this._ssBadge.set("className",null)},_isSSBadgeVisible:function(){var e=this._ssBadge;var t=false;if(e){var a=e.get("boundingBox").getStyle("visibility");t="visible"===a}return t},_isMobileInfoBarVisible:function(){var e=this._mobileInfoBar;return!!e}},{ATTRS:{ssBadgeSettings:{getter:function(e){e=e||s.Object.getValue(s.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings"]);return{visibility:e.ssBadgeVisibility,position:e.ssBadgePosition,devices:e.ssBadgeDevices,type:e.ssBadgeType}}},mobileInfoBarSettings:{valueFn:function(){return s.Object.getValue(s.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}}}});s.config.win.Squarespace.onInitialize(s,function(){var e=s.config.win.Static.SQUARESPACE_CONTEXT.pageFeatures||[];-1!==e.indexOf(n.OVERLAYS)&&(s.Squarespace.Singletons.WebsiteOverlaysManager?s.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar():s.Squarespace.Singletons.WebsiteOverlaysManager=new s.Squarespace.Frontend.WebsiteOverlaysManager)})},"1.0",{requires:["base","node","squarespace-licensed-assets-preview-bar","squarespace-mobile-info-bar","squarespace-ss-badge"]})},7547:function(e,t,a){var i=a(24).t;YUI.add("squarespace-licensed-assets-preview-bar",function(e){e.namespace("Squarespace.LicensedAssets.Widgets");e.Squarespace.LicensedAssets.Widgets.PreviewBar=e.Base.create("LicensedAssetPreviewBar",e.Squarespace.Widgets.SSWidget,[],{},{CSS_PREFIX:"sqs-licensed-asset-preview-bar",TEMPLATE:"<span>"+i("This page is using preview images from Getty Images. Please purchase them to remove the watermark.")+"</span>"})},"1.0",{requires:["base","squarespace-ss-widget"]})},7548:function(e,t,a){var n=a(4117);var o=a(2710);var l=a(708);var c=a(213);var d=a(24).t;var u=a(100);YUI.add("squarespace-mobile-info-bar",function(r){var i="location";var a="businessHours";var s=r.namespace("Squarespace.Widgets").MobileInfoBar=r.Base.create("MobileInfoBar",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._scrollNode=r.one(l(r.config.doc));this._content={};this._activeContent=null;this.after("render",function(){r.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})})},bindUI:function(){s.superclass.bindUI.call(this);var e="."+this.getClassName("trigger[data-overlay]");var t="."+this.getClassName("overlay");var a="."+this.getClassName("overlay","content");var i="."+this.getClassName("overlay","close");this._overlay=this._cb.one(t);this._overlayContent=this._overlay.one(a);this._overlayClose=this._overlay.one(i);this._cb.delegate("click",this._handleClose,e,this);this._overlayClose.on("click",this._handleClose,this);var n=r.one(r.config.win);this._registerEvent(n.on("scroll",u(this._autoHideOrClose,100,{leading:true,trailing:true}),this));this._overlay.on("touchmove",this._disableScroll,this);void 0!==window.orientation&&r.one(r.config.win).on("orientationchange",this._onOrientationChange,this)},syncUI:function(){s.superclass.syncUI.call(this);this._addStyleClass(this)},_onOrientationChange:function(){this._updateOverlay()},_autoHideOrClose:function(){if(!this._bb.getDOMNode())return;this.activeScreen&&this._toggleOverlay(this._overlayClose);var e=this._scrollNode.get("scrollTop");var t=this.getClassName("hide");var a=this._bb.hasClass(t);var i=e<=0;a&&i?this._bb.removeClass(t):a||i||this._bb.addClass(t)},_addStyleClass:function(e){if(this._isBarDark()){var t=e.get("boundingBox");t.addClass(e.getClassName("dark"))}},_isBarDark:function(){var e=this.get("style");var t=o.DARK;return e===t},_handleClose:function(e){var t=e.currentTarget;this._toggleOverlay(t)},_toggleOverlay:function(e){if(!e)return;var t=e.getAttribute("data-type");var a=this.getClassName("show","overlay");this._bb.toggleClass(a);if(this._bb.hasClass(a)){this._renderOverlay(t);this.activeScreen=t}else{this._activeContent.setStyle("display",null);this.activeScreen=null}},_renderOverlay:function(e){this._activeContent=this._isContentAvailable(e);if(!this._activeContent){this._activeContent=this._createContent(e);this._content[e]=this._activeContent}this._adjustCloseButton(e);this._activeContent.setStyle("display","block");this._updateOverlay()},_adjustCloseButton:function(e){var t=this._isBarDark();var a=this.getClassName("overlay","close","dark");e!==i||t?this._overlayClose.removeClass(a):this._overlayClose.addClass(a)},_updateOverlay:function(){var e=this.getClassName("show","overlay");if(this._bb.hasClass(e)){var t=this._overlayContent.get("scrollHeight");var a=this._overlayContent.get("clientHeight");t>a?this._overlayContent.setStyle("overflow","scroll"):this._overlayContent.setStyle("overflow",null)}},_createContent:function(e){var t;e===i?t=this._renderLocation():e===a&&(t=this._renderBusinessHours());return t},_renderLocation:function(){var e=this.get("mapTemplate");var t=r.Node.create(e);this._overlayContent.appendChild(t);t=this._renderAddress(t);t=this._renderMap(t);return t},_renderAddress:function(e){var t="."+this.getClassName("address");var a=this._getAddress();e.one(t).setHTML(a);return e},_getAddress:function(){var t=this.get("location");var a="";var i="";var e=["addressTitle","addressLine1","addressLine2","addressCountry"];var n;r.Array.each(e,function(e){n=t[e];if(n){i+='<div data-type="'+e+'">'+n+"</div>";a+=n+" "}});if(a){a=encodeURIComponent(a);a="//maps.google.com?q="+a;var s=this.getClassName("address","link");i+='<a rel="noopener" target="_blank" class="'+s+'" href="'+a+'"></a>'}return i},_renderMap:function(e){var t="."+this.getClassName("map");var a=this.get("location");delete a.markerLat;delete a.markerLng;r.Lang.isUndefined(a.mapZoom)&&(a.mapZoom=12);var i=e.one(t);c("google_maps_map_load_on_site");n.createView({},a,i.getDOMNode()).then(function(e){e.redraw()});return e},_renderBusinessHours:function(){var e=new r.Squarespace.Widgets.BusinessHours;this._addStyleClass(e);e.render(this._overlayContent);return e.get("boundingBox")},_isContentAvailable:function(e){return this._content[e]},_setDefaultContactEmail:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isContactEmailEnabled&&(e=t.contactEmail);return e},_setDefaultContactPhoneNumber:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isContactPhoneNumberEnabled&&(e=t.contactPhoneNumber);return e},_setDefaultLocation:function(e){var t=this.get("website");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isLocationEnabled&&(e=t.location);return e},_setDefaultBusinessHours:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isBusinessHoursEnabled&&(e=t.businessHours);return e},_disableScroll:function(e){var t=this.getClassName("overlay","content");var a=e.target;var i=a.ancestor("."+t);var n=i||a;var s=false;s=!n||"scroll"!==this._overlayContent.getStyle("overflow");s&&e.preventDefault()}},{CSS_PREFIX:"sqs-mobile-info-bar",HANDLEBARS_TEMPLATE:"mobile-info-bar.html",ATTRS:{mobileInfoBarSettings:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}},websiteSettings:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"])}},website:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","website"])}},mapTemplate:{value:'<div><div class="sqs-mobile-info-bar-map"></div><div class="sqs-mobile-info-bar-address"></div></div>'},contactEmail:{value:null,setter:"_setDefaultContactEmail"},contactPhoneNumber:{value:null,setter:"_setDefaultContactPhoneNumber"},location:{value:null,setter:"_setDefaultLocation"},businessHours:{value:null,setter:"_setDefaultBusinessHours"},style:{value:null},strings:{value:{labels:{email:d("Email"),phone:d("Call"),location:d("Map"),hours:d("Hours")}}}}})},"1.0",{requires:["base","node","squarespace-business-hours","squarespace-damask-context-globals","squarespace-mobile-info-bar-template","squarespace-ss-widget"]})},7549:function(e,t,a){var i=a(24).t;var n=a(6822);YUI.add("squarespace-business-hours",function(a){a.namespace("Squarespace.Widgets").BusinessHours=a.Base.create("businessHours",a.Squarespace.Widgets.SSWidget,[],{_setDefaultBusinessHours:function(e){var t=this.get("websiteSettings");a.Lang.isNull(e)&&(e=t.businessHours?t.businessHours:t.get("businessHours"));return e}},{CSS_PREFIX:"sqs-business-hours",HANDLEBARS_TEMPLATE:"business-hours.html",ATTRS:{websiteSettings:{valueFn:function(){return a.Squarespace.Context?a.Squarespace.Context.getInstance().get("websiteSettings"):Static.SQUARESPACE_CONTEXT.websiteSettings}},businessHours:{value:null,setter:"_setDefaultBusinessHours"},strings:{value:{store:{open:i("We are currently<br><span>open</span>"),closed:i("We are currently<br><span>closed</span>")},daysAbbreviated:n()}}}})},"1.0",{requires:["base","node","squarespace-business-hours-template","squarespace-business-hours-utils","squarespace-ss-widget"]})},7550:function(e,t){YUI.add("squarespace-business-hours-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["business-hours.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l,c="function",d=this,u=a.helperMissing,g=this.escapeExpression;function p(e,t){var a="",i,n;a+="\n    ";n=(i=(i=(i=e.strings,null==i||false===i?i:i.store),null==i||false===i?i:i.open),typeof i===c?i.apply(e):i);(n||0===n)&&(a+=n);a+="\n  ";return a}function h(e,t){var a="",i,n;a+="\n    ";n=(i=(i=(i=e.strings,null==i||false===i?i:i.store),null==i||false===i?i:i.closed),typeof i===c?i.apply(e):i);(n||0===n)&&(a+=n);a+="\n  ";return a}s+='\n<div class="sqs-business-hours-store">\n  ';l={hash:{},inverse:d.program(3,h,n),fn:d.program(1,p,n),data:n};o=(r=a.isStoreOpen||t.isStoreOpen,r?r.call(t,t.businessHours,l):u.call(t,"isStoreOpen",t.businessHours,l));(o||0===o)&&(s+=o);s+='\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.monday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.monday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.monday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.tuesday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.tuesday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.tuesday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.wednesday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.wednesday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.wednesday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.thursday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.thursday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.thursday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.friday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.friday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.friday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.saturday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.saturday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.saturday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+g((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.sunday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:n};s+=g((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.sunday),l):u.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.sunday),l)))+"\n  </div>\n</div>\n";return s})})();var t="business-hours.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7551:function(e,t,a){var h=a(908);var f=a(993);var i=a(8685);var m=a(6822);var v=a(6686);var b=a(7452);YUI.add("squarespace-business-hours-utils",function(d){var s=Object.keys(i());function o(e){d.Lang.isUndefined(e)&&(e=new Date);var t=e.getDay();return s[t]}function l(a){var i;d.Array.some(s,function(e,t){if(e===a){i=t-1;return true}});i=-1===i?6:i;return s[i]}function c(e,t){var a=f;d.Lang.isUndefined(e)&&(e=new Date);var i=60*e.getHours();var n=e.getMinutes();d.Lang.isUndefined(t)&&(t=a(e));return i+n+t}function t(e){var t;t=e.match(/am|pm/i)?v.HOUR_12:v.HOUR_24;return t}function r(e){return("0"+e).slice(-2)}function u(e){var t=e.length;return e[t-1]}function g(e,t){var a=t[e];var i;i=d.Lang.isUndefined(a)||!d.Lang.isArray(a.ranges)?[]:a.ranges.slice(0);var n=l(e);var s=t[n];var r;if(s&&d.Lang.isArray(s.ranges)){r=u(s.ranges);r.from>r.to&&i.unshift({from:0,to:r.to})}if(a&&d.Lang.isArray(a.ranges)){r=u(a.ranges);r.from>r.to&&i.unshift({from:r.from,to:v.MAX_TIMESTAMP})}return i}function p(e,t){var a=Math.floor(e/60);var i=e%60;var n="am";var s;if(t===v.HOUR_12){if(24===a)a=12;else if(a>=12){a-=12;n="pm"}i=i&&r(i);a=a||12;s=a+(i?":"+i:"")+n}else{24===a&&(a=0);a=r(a);i=r(i);s=a+":"+i}return s}d.namespace("Squarespace.BusinessHoursUtils").plainTextDays=function(t){var a=m();var i=d.Squarespace.BusinessHoursUtils;var n="";var e=s.slice();e=e.concat(e.shift());d.Array.each(e,function(e){n+=a[e]+": ";n+=i.formatDay(t[e],{markup:false});n+="<br>"});return n};d.namespace("Squarespace.BusinessHoursUtils").formatDay=function(n,s){var r=function(e){return s.markup?e:""};s=d.merge({closed:v.LANG.closed,allDay:v.LANG.allDay,delimeter:" - ",markup:true},s);var e;if(n&&d.Lang.isArray(n.ranges)){var o;var l;var c=t(n.text);e=d.Array.reduce(n.ranges,"",function(e,t,a,i){if(b.isClosedText(n.text)||h(t.to)&&h(t.from))e=r('<div class="closed">'+s.closed+"</div>");else if(t.from===t.to||0===t.from&&1440===t.to){e+=r("<div>");b.isAllDayText(n.text)?e+=n.text:e+=s.allDay;e+=r("</div>")}else{o=p(t.from,c);l=p(t.to,c);e+=r("<div>");e+=o+s.delimeter+l;e+=r("</div>");!s.markup&&a<i.length-1&&(e+=", ")}return e})}else{e=r('<div class="closed">');e+=s.closed;e+=r("</div>")}return e};d.namespace("Squarespace.BusinessHoursUtils").isStoreOpen=function(e,t,a){var i=c(t,a);var n=false;d.Lang.isUndefined(e)&&(e=d.Squarespace.Context?d.Squarespace.getInstance().get("websiteSettings").get("businessHours"):Static.SQUARESPACE_CONTEXT.websiteSettings.businessHours);var s=o(t);var r=g(s,e);d.Array.some(r,function(e){if(d.Lang.isUndefined(e.from)){n=false;return false}if(e.from===e.to){n=true;return true}if(i>=e.from&&i<=e.to){n=true;return true}});return n};d.Handlebars.registerHelper("isStoreOpen",function(e,t){var a=d.Squarespace.BusinessHoursUtils.isStoreOpen(e);if(a)return t.fn(this);return t.inverse(this)});d.Handlebars.registerHelper("dailyHours",function(e,t){var a=d.Squarespace.BusinessHoursUtils;var i=t.hash;var n={closed:i.closed,allDay:i.allDay,delimeter:i.delimeter};d.Lang.isUndefined(n.closed)&&delete n.closed;d.Lang.isUndefined(n.allDay)&&delete n.allDay;d.Lang.isUndefined(n.delimeter)&&delete n.delimeter;var s=a.formatDay(e,n);return new d.Handlebars.SafeString(s)})},"1.0",{requires:["base","handlebars-base","node","squarespace-attr-validators"]})},7552:function(e,t){YUI.add("squarespace-mobile-info-bar-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["mobile-info-bar.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="contactEmail">\n      <a href="mailto:';if(i=n.contactEmail)i=i.call(e,{hash:{},data:t});else{i=e.contactEmail;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n        <span class="sqs-mobile-info-bar-trigger-icon"></span>\n        <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.email),typeof i===o?i.apply(e):i))+"</span>\n      </a>\n    </div>\n  ";return a}function u(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="contactPhoneNumber">\n      <a href="tel:';if(i=n.contactPhoneNumber)i=i.call(e,{hash:{},data:t});else{i=e.contactPhoneNumber;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n        <span class="sqs-mobile-info-bar-trigger-icon"></span>\n        <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.phone),typeof i===o?i.apply(e):i))+"</span>\n      </a>\n    </div>\n  ";return a}function g(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="location" data-overlay="true">\n      <span class="sqs-mobile-info-bar-trigger-icon"></span>\n      <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.location),typeof i===o?i.apply(e):i))+"</span>\n    </div>\n  ";return a}function p(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="businessHours" data-overlay="true">\n      <span class="sqs-mobile-info-bar-trigger-icon"></span>\n      <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.hours),typeof i===o?i.apply(e):i))+"</span>\n    </div>\n  ";return a}s+='\n<div class="sqs-mobile-info-bar-triggers">\n\n  ';r=n["if"].call(t,t.contactEmail,{hash:{},inverse:c.noop,fn:c.program(1,d,i),data:i});(r||0===r)&&(s+=r);s+="\n\n\n  ";r=n["if"].call(t,t.contactPhoneNumber,{hash:{},inverse:c.noop,fn:c.program(3,u,i),data:i});(r||0===r)&&(s+=r);s+="\n\n\n  ";r=n["if"].call(t,t.location,{hash:{},inverse:c.noop,fn:c.program(5,g,i),data:i});(r||0===r)&&(s+=r);s+="\n\n\n  ";r=n["if"].call(t,t.businessHours,{hash:{},inverse:c.noop,fn:c.program(7,p,i),data:i});(r||0===r)&&(s+=r);s+='\n\n</div>\n\n<div class="sqs-mobile-info-bar-overlay">\n  <div class="sqs-mobile-info-bar-overlay-content"></div>\n  <div class="sqs-mobile-info-bar-overlay-close"></div>\n</div>\n';return s})})();var t="mobile-info-bar.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7553:function(e,t,a){var s=a(24).t;var r=a(4187);var l=a(4188);var c=a(2712);var d=a(100);YUI.add("squarespace-ss-badge",function(o){var t={};t[c.BLACK]="black";t[c.WHITE]="white";var a={};a[l.TOP_LEFT]="top-left";a[l.TOP_CENTER]="top-center";a[l.TOP_RIGHT]="top-right";a[l.BOTTOM_LEFT]="bottom-left";a[l.BOTTOM_CENTER]="bottom-center";a[l.BOTTOM_RIGHT]="bottom-right";var i={};i[r.ALL]="all-devices";i[r.DESKTOP_ONLY]="desktop-only";var e=50;o.namespace("Squarespace.Widgets");var n=o.Squarespace.Widgets.SSBadge=o.Base.create("SSBadge",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._coverNode=o.Node.create('<div class="sqs-ss-badge-cover"></div>');this.after("render",function(){o.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})});this.resize=d(this.handleResize.bind(this),e);o.config.win.addEventListener("resize",this.resize)},destructor:function(){this._coverNode.remove(true);o.config.win.removeEventListener("resize",this.resize)},handleResize:function(){this.isMobile()?this.get("boundingBox").addClass("is-mobile"):this.get("boundingBox").removeClass("is-mobile")},isMobile:function(){if(!o.config||!o.config.win)return o.UA.mobile;var e=o.config.win.innerWidth;var t=e<=768;return o.UA.mobile||t},renderUI:function(){n.superclass.renderUI.call(this);this.isMobile()&&this.get("boundingBox").addClass("is-mobile");this.get("contentBox").append('<a href="'+this.get("goTo")+'" target="_blank"><div class="badge-closed"><div class="badge-symbol"></div></div><div class="badge-open"><div class="badge-open-inner"><h2>'+s("Powered by Squarespace")+"</h2></div></div></a>");o.one("body").append(this._coverNode)},syncUI:function(){n.superclass.syncUI.call(this);var e=this.get("boundingBox");e.setAttribute("data-type",t[this.get("type")]);e.setAttribute("data-position",a[this.get("position")]);e.setAttribute("data-devices",i[this.get("devices")]);if(this.get("autoHide")){e.addClass("badge-auto-hide");this._checkAutoHide()}else{e.removeClass("badge-auto-hide");e.addClass("badge-visible")}},bindUI:function(){var e=this.get("contentBox");this.after(["typeChange","positionChange","autoHideChange","devicesChange"],this.syncUI,this);e.on("mouseenter",function(){e.addClass("badge-is-open")});e.on("mouseleave",function(){e.removeClass("badge-is-open")});this._registerEvent(o.one(o.config.win).on("scroll",this._checkAutoHide,this))},_checkAutoHide:function(){if(!this.get("autoHide"))return;var e=this.get("boundingBox");var t=o.one("body");var a=o.one("html");var i=a.get("scrollTop")||t.get("scrollTop");var n=a.get("scrollHeight")||t.get("scrollHeight");var s=o.config.win.innerHeight;var r=i>n-s-50;this._isPositionTop()&&i<50||r?e.addClass("badge-visible"):e.removeClass("badge-visible")},_isPositionTop:function(){var e=[l.TOP_LEFT,l.TOP_CENTER,l.TOP_RIGHT];return-1!==e.indexOf(this.get("position"))}},{CSS_PREFIX:"sqs-ss-badge",ATTRS:{type:{value:c.BLACK,validator:function(e){if(!o.Object.hasValue(c,e)){false;return false}return true}},position:{value:l.BOTTOM_LEFT,validator:function(e){if(!o.Object.hasValue(l,e)){false;return false}return true}},autoHide:{value:true,validator:o.Squarespace.AttrValidators.isBoolean},devices:{value:r.ALL,validator:function(e){if(!o.Object.hasValue(l,e)){false;return false}return true}},goTo:{valueFn:function(){var e=o.QueryString.stringify({channel:"word_of_mouth",subchannel:"customer",source:"badge",campaign:o.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"])});return"https://www.squarespace.com?"+e},validator:o.Squarespace.AttrValidators.isString,readOnly:true}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget"]})},7554:function(e,t,a){var n=a(128);var s=a(87);var r=a(114);var o=a(24).t;var l=a(8686);YUI.add("squarespace-template-picker",function(a){var i=a.Squarespace.TemplatePicker=a.Base.create("TemplatePicker",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._hasTransitionedIn=false;this._hasTransitionedOut=false;this._useRefactoredTemplatePicker="true"===n.get("use-refactored-template-picker")||r.isFeatureEnabled(s.TEMPLATE_SWITCHER_REFACTOR);this._escManagerTarget={close:this.destroy.bind(this)};a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},renderUI:function(){i.superclass.renderUI.apply(this,arguments);var e=a.Node.create('<header class="preview-header"></header>').appendTo(this.get("contentBox"));this._closeButtonEl=e.appendChild('<a class="close-button" href="#"></a>');e.appendChild('<div class="instructions-wrapper"></div>').append('<div class="title">'+this.get("strings.title")+"</div>").append('<div class="description">'+this.get("strings.description")+"</div>");var t=a.Node.create('<div class="preview-viewport"></div>').appendTo(this.get("contentBox"));this._viewportInnerEl=a.Node.create('<div class="inner"></div>').appendTo(t);this._framePlaceholderEl=a.Node.create('<div class="display-placeholder"></div>').appendTo(this._viewportInnerEl);this._loaderEl=a.Node.create('<div class="loading-indicator"><span class="message"></span></div>').appendTo(t);this.get("boundingBox").plug(a.Squarespace.Plugin.ScrollLock);a.one("body").addClass("preview-open");a.later(1,this,function(){this.get("boundingBox").addClass("open")});this.enterLoadingStateWithMessage(o("Loading templates…"));this._framePlaceholderEl.setStyle("display","block");this._showTimer=a.later(i.TRANSITION_IN_DURATION,this,function(){this._hasTransitionedIn=true;this._load();this._iframeSourceTimer&&this._iframeSourceTimer.cancel()})},bindUI:function(){i.superclass.bindUI.apply(this,arguments);this._closeButtonEl.on("click",function(e){e.halt();this.destroy()},this)},_load:function(){if(this._useRefactoredTemplatePicker){this._loadRefactoredTemplatePicker();return}var e=a.Squarespace.TemplateInstallRPC.createConsumer({container:this._viewportInnerEl.getDOMNode(),onLoad:a.bind(this._onLoad,this),installTemplate:a.bind(function(e){this.fire("install-template",{identifier:e.cloneIdentifier})},this),websiteType:this.get("websiteType"),installedTemplates:this.get("installedTemplates"),templateSwitcher:this.get("templateSwitcher")});e.configure({lang:{TEMPLATE_CALL_TO_ACTION:this.get("strings.callToAction")}})},_loadRefactoredTemplatePicker:function(){var e=a.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");this._templateSwitcher=new l({container:this._viewportInnerEl.getDOMNode(),onLoad:a.bind(this._onLoad,this),installTemplate:a.bind(function(e){this.fire("install-template",{identifier:e.cloneIdentifier})},this),websiteType:t})},_onLoad:function(){this.get("boundingBox").addClass("loaded");this._framePlaceholderEl.setStyle("display","none")},_showSpinner:function(){this._hideSpinner();this._spinner=new a.Squarespace.Spinner({color:"light",size:"xx-large",render:this._loaderEl})},_hideSpinner:function(){if(this._spinner){this._spinner.destroy();this._spinner=null}},destroy:function(){a.one("body").removeClass("preview-open");if(!this._hasTransitionedOut){this._hasTransitionedOut=true;this.get("boundingBox").removeClass("open").addClass("fast");a.later(i.TRANSITION_OUT_DURATION,this,function(){i.superclass.destroy.call(this)});this._templateSwitcher&&(this._templateSwitcher=null)}},destructor:function(){this._hideSpinner();if(this._showTimer){this._showTimer.cancel();this._showTimer=null}this._closeButtonEl.remove(true);a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},enterLoadingStateWithMessage:function(e){this.get("boundingBox").removeClass("loaded");this._loaderEl.one("span.message").setContent(e);this._showSpinner()}},{CSS_PREFIX:"sqs-template-picker",TRANSITION_IN_DURATION:500,TRANSITION_OUT_DURATION:300,ATTRS:{strings:{value:{callToAction:o("Install Template"),title:o("Pick a New Template to Install"),description:o("Select a template to install. Installing a template will not affect your live website.")}},websiteType:{valueFn:function(){return a.Squarespace.Context.getInstance().get("website").get("websiteType")}},installedTemplates:{value:[]},templateSwitcher:false}})},"1.0",{requires:["base","node","squarespace-common","squarespace-context","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-spinner","squarespace-ss-widget","squarespace-template-install","squarespace-ui-base"]})},7555:function(e,t,n){var s=n(8688);YUI.add("squarespace-template-install",function(a){var i=n(8689);a.namespace("Squarespace").TemplateInstallRPC={createProvider:function(e){var t=new i.Rpc({},{local:{configure:e.configureFn},remote:{onLoad:{},installTemplate:{},getInstalledTemplates:{}}});a.Squarespace.Signup.show=function(){t.installTemplate.apply(t,arguments)};a.Squarespace.Signup.getInstalledTemplates=function(){t.getInstalledTemplates.apply(t,arguments)};t.onLoad();return t},createConsumer:function(e){var t=new i.Rpc({remote:s.generateURL(e),container:e.container},{local:{onLoad:e.onLoad,installTemplate:e.installTemplate,getInstalledTemplates:function(){return e.installedTemplates}},remote:{configure:{}}});return t}}},"1.0",{requires:[]})},7556:function(e,t,a){var u=a(24).t;var n=a(21);var c=a(24).pluralize;var b=a(128);var i=a(906);var s=a(701);var l=a(4207);var y=a(3418);var d=a(4130);var S=a(4208);var g=a(8131);var o=a(2887);YUI.add("squarespace-comments",function(m){m.namespace("Squarespace");m.Squarespace.Comments=Class.create({initialize:function(e){this.events=[];this.settings={likesAllowed:e.likesAllowed,flagsAllowed:e.flagsAllowed,threaded:e.threaded,approvalRequired:e.approvalRequired,allowAnon:e.allowAnon,avatarsHidden:!e.avatarsOn,readOnly:e.readOnly};this.commentData=new m.Squarespace.CommentData({target:e.identifier,targetType:e.type,publicCommentCount:e.publicCommentCount,settings:this.settings,formatter:m.bind(this.formatData,this)});this.localizedStrings={addComment:u("Add Comment"),approve:u("Approve"),awaitingModeration:u("Awaiting Moderation"),comments:u("Comments"),commentsRestricted:u("Comments Restricted"),delete:u("Delete"),edit:u("Edit"),leastLiked:u("Least Liked"),leaveACommentHere:u("Leave a comment here."),lessLiked:u("Less Liked"),like:u("Like"),likes:u("Likes"),mostLiked:u("Most Liked"),newestFirst:u("Newest First"),oldestFirst:u("Oldest First"),pending:u("Pending"),preview:u("Preview"),postComment:u("Post Comment…"),postReply:u("Post Reply"),reply:u("Reply"),replyToThisCommentHere:u("Reply to this comment here."),report:u("Report"),subscribeViaEmail:u("Subscribe via e-mail"),unmoderated:u("Unmoderated"),unsubscribe:u("Unsubscribe")};this.targetId=e.identifier;this.params=e||{design:{}};this.replyCompleteEvents={};this.threadState=false;this.lastSortTime=new Date;this.lastHashChangeTime=new Date;this.PaginationModes={EXTEND:1,PAGE:2};this.containerEl=m.one(this.params.containerEl);this.params.paginationMode=this.PaginationModes.EXTEND;this.type=s.COMMENT;this.currentPage=1;this.maxComments=50;this.sortOrderLookup=[null];this.sortOrderLookup.push(this.localizedStrings.oldestFirst,this.localizedStrings.newestFirst,this.localizedStrings.mostLiked,this.localizedStrings.leastLiked);this.sortOrder=this.params.sortType;this.commentsEl=m.Node.create('<div class="comments-content"><div class="comment-list"></div></div>');this.settings.readOnly&&this.commentsEl.addClass("read-only");this.commentsEl.appendTo(this.containerEl);this.loadMoreNode=m.Node.create('<div class="load-more"><div class="view-more-btn">'+u("Load More Comments")+"</div></div>");this.fullViewNode=m.Node.create('<div class="full-view-btn">'+u("View full comment thread")+"</div>");this.history=new m.HistoryHash;this.events.push(this.commentsEl.delegate("click",this.onReplyToggleClick,".reply",this),this.commentsEl.delegate("click",this.onLikeClick,".comment:not(.liked):not(.read-only) .like",this),this.commentsEl.delegate("click",this.onUnlikeClick,".comment.liked:not(.read-only) .like",this),this.commentsEl.delegate("click",this.onFlagClick,".comment:not(.flagged):not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onUnflagClick,".comment.flagged:not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onApproveClick,".comment.unmoderated:not(.read-only) .approve",this),this.commentsEl.delegate("click",this.onDeleteClick,".comment:not(.read-only) .delete",this),this.commentsEl.delegate("click",this.replyBtnOnClick,".reply-area-wrapper .comment-btn:not(.read-only)",this),this.commentsEl.delegate("click",this.togglePreview,".reply-area-wrapper .preview-comment",this),this.commentsEl.delegate("click",this.showSubscribe,".subscribe",this),this.commentsEl.delegate("click",this.unsubscribe,".unsubscribe",this),this.history.on("commentIdChange",this.commentIdHashOnChange,this),this.history.on("commentIdRemove",this.commentIdHashOnRemove,this),this.containerEl.delegate("click",function(){var a,i,n;return function(e){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,allowAnonymous:this.settings.allowAnon,overlayOpacity:.5});var t=function(){this.onLoading();this.commentData.visibleComments=0;this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder},this);a.detach();n.detach()};a=SQUARESPACE_LOGIN.once("cancel",function(){i.detach();n.detach()},this);i=SQUARESPACE_LOGIN.once("login",t,this);n=SQUARESPACE_LOGIN.once("guestLogin",t,this);SQUARESPACE_LOGIN.show()}}(),".squarespace-comment-login",this),SQUARESPACE_LOGIN.on("login",function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.moderationMode=this.userHasAccessPermission(i.CONFIG_ACTIVITY_COMMENTS)},this),SQUARESPACE_LOGIN.on("logout",function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.refreshSubscribeControl();this.moderationMode=false},this),this.containerEl.delegate("click",function(e){SQUARESPACE_LOGIN.onLogoutClick()},".squarespace-comment-logout",this),this.containerEl.delegate("focus",function(){this.setAttribute("data-edited",true)},".comment-input"),this.containerEl.delegate("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",false)},".comment-input"),this.containerEl.delegate("focus",function(e){e.target.setAttribute("data-edited",true)},".new-comment-area textArea",this),this.containerEl.delegate("click",this.extendComments,".view-more-btn",this),this.containerEl.delegate("click",this.fullViewOnClick,".full-view-btn",this),this.containerEl.delegate("click",this.commentBtnOnClick,".top-level-comment-area .comment-btn:not(.read-only)",this),this.containerEl.delegate("click",this.togglePreview,".top-level-comment-area .preview-comment",this),this.containerEl.delegate("change",function(e){this.sort(e.target.get("value"))},".hidden-ordering",this));b.set("displayName","",{expires:new Date(0),path:"/"});this.subscribeDialogParams={name:"subscribe",style:"flyout",flyoutPointerDirection:"top",width:320,position:"center",closeable:true,overlay:.5,top:200,discardChangesConfirmation:false,title:u("Subscribe by Email"),primaryTabs:[{title:u("Subscribe by Email"),icon:"/universal/images-v6/standard/icon_invites_24_light.png",fields:[{type:"text",required:true,name:"email",title:u("Email"),fieldStyle:"normal",titleStyle:"inline",submitOnEnter:true,style:"major"},{ctor:m.Squarespace.DialogFields.Description,config:{text:u("Subscribe to this comment thread by email."),padding:[0,0]}}]}],buttons:[{type:"cancel",title:u("Cancel")},{type:"saveAndClose",title:u("Submit")}]}},destroy:function(){this.events.forEach(function(e){e.detach()})},userHasAccessPermission:function(e){if(!m.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]))return false;return m.Array.indexOf(Static.SQUARESPACE_CONTEXT.accessPermissions,e)>=0},doAfterLogin:function(e,t,a){var i,n,s;n=e.once("login",function(){t.call(this);s.detach();i.detach()},a);s=e.once("guestLogin",function(){n.detach();i.detach()});i=e.once("cancel",function(){n.detach();s.detach()})},doAfterGuestLogin:function(e,t,a){var i,n,s;n=e.once("guestLogin",function(){t.call(this);s.detach();i.detach()},a);s=e.once("login",function(){n.detach();i.detach()});i=e.once("cancel",function(){n.detach();s.detach()})},fullViewOnClick:function(){this.history.addValue("commentId",null)},updateTopLevelButton:function(){var e=m.one(".top-level-comment-area .comment-btn"),t={newCommentAreaTop:{authenticatedAccount:null===SQUARESPACE_LOGIN.account?void 0:SQUARESPACE_LOGIN.account},comments:[{}]},a=this.renderToFragment(t),i=a.one(".top-level-comment-area .comment-btn");if(e){e.ancestor(".comment-btn-wrapper").append(i);e.remove(true)}},updateReplyAreaButtons:function(){var e={comments:[{authenticatedAccount:SQUARESPACE_LOGIN.account}]},t=this.renderToFragment(e).one(".reply-area-wrapper .comment-btn");t&&this.commentsEl.all(".reply-area-wrapper .comment-btn").each(function(e){e.insert(t.cloneNode(true),"after");e.remove(true)})},refreshCommentPostButtons:function(){this.updateTopLevelButton();this.updateReplyAreaButtons()},refreshSubscribeControl:function(){SQUARESPACE_LOGIN.account||(Static.SQUARESPACE_CONTEXT.subscribed=false);var e={subscribed:Static.SQUARESPACE_CONTEXT.subscribed,comments:[{}]},t,a=this.renderToFragment(this.scatterData(e)).one(".subscribe-control");if(a){t=m.one(".subscribe-control");t.insert(a,"after");t.remove(true)}},generatePreview:function(e){var t=m.Squarespace.Escaping.escapeForHtml(e.get("value")),a={comments:[{}]},i=null,n=null,s=a.comments[0],r=!e.ancestor(".reply-area-wrapper"),o,l;if(r)o=0;else{l=m.one('.comment[data-commentId="'+e.ancestor(".reply-area-wrapper").getAttribute("data-commentId")+'"]');o=l.hasAttribute("data-depth")?parseInt(l.getAttribute("data-depth"),10)+1:1}s.body=g.sanitize(m.Squarespace.Lang.markdownToHTML(t,true));s.memberAccount=m.clone(SQUARESPACE_LOGIN.account);s.authorName=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||u("Not Logged In");s.addedOn=(new Date).getTime();s.depth=o;n=this.renderToFragment(this.scatterData(a));i=n.one(".comment");i.addClass("comment-preview");if(r)i.addClass("top-level");else{i.setAttribute("data-previewId",l.getAttribute("data-commentId"));i.setAttribute("data-replyTo",l.getAttribute("data-commentId"))}return n},replyBtnOnClick:function(e){var t=e.target.ancestor(".reply-area-wrapper"),a=t.getAttribute("data-commentId"),i=m.one('.comment[data-commentId="'+a+'"]'),n=t.one("textArea"),s=n.get("value");if(""===s.trim())this.showEmptyText();else{var r=this.injectReply(s,i);this.replyTo(t.getAttribute("data-commentId"),s,r,n)}e.stopImmediatePropagation()},subscribe:function(e){m.Data.post({url:"/api/comment/Subscribe",secure:true,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=true;this.refreshSubscribeControl();new m.Squarespace.Widgets.Information({"strings.title":u("Subscribed"),"strings.message":u("Successfully subscribed")})},failure:function(){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.subscribe(e)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Subscribe"),u("Subscribe"),false,["squarespace"])}},this)},unsubscribe:function(t){m.Data.post({url:"/api/comment/Unsubscribe",secure:true,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=false;this.refreshSubscribeControl();new m.Squarespace.Widgets.Information({"strings.title":u("Unsubscribed"),"strings.message":u("Successfully unsubscribed")})},failure:function(e){if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unsubscribe(t)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Unsubscribe"),u("Unsubscribe"),false)}}},this)},showSubscribe:function(e){new m.Squarespace.Widgets.Confirmation({"strings.confirm":u("Subscribe"),"strings.title":u("Subscribe to Thread"),"strings.message":u("Are you sure you wish to subscribe to this comment thread? You will receive updates via the email on file in your profile.")}).on("confirm",this.subscribe,this)},togglePreview:function(e){var t=e.target.ancestor(".reply-area-wrapper"),a;a=t?t.one("textArea"):e.target.ancestor(".top-level-comment-area").one("textArea");if(""!==a.get("value"))if("open"===e.target.getAttribute("data-state")){e.target.setAttribute("data-state","closed");this.hidePreview(a)}else{e.target.setAttribute("data-state","open");this.showPreview(a)}},showPreview:function(e){if(e){var t=this.generatePreview(e),a=t.one(".comment"),i=e.ancestor(".reply-area-wrapper"),n=e.ancestor(".input"),s=!i,r,o,l;a.wrap('<div class="new comment-preview-wrapper closed"></div>');l=a.ancestor(".comment-preview-wrapper");if(s){l.addClass("top-level");m.one(".comment-list").prepend(l)}else{i.insert(l,"after");l.setAttribute("data-commentId",i.getAttribute("data-commentId"))}e.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.edit);n.setStyle("height",n.get("offsetHeight"));r=new m.Anim({node:n,duration:.3,easing:m.Easing.easeOutStrong,to:{height:0}});r.on("start",function(){this._node.setStyle("overflow","hidden")});r.run();o=new m.Anim({node:l,duration:.3,easing:m.Easing.easeOutStrong,to:{height:a.get("offsetHeight")+parseInt(a.getComputedStyle("paddingBottom"),10)+parseInt(a.getComputedStyle("marginBottom"),10)}});o.on("end",function(){this._node.addClass("open")});o.run()}},hideAllPreviews:function(){m.all(".comment-preview-wrapper:not(.top-level)").each(function(e){var t=new m.Anim({node:e,duration:.3,easing:m.Easing.easeOutStrong,to:{height:0}});t.on("end",function(){this._node.remove(true)});t.run()},this);m.all('.preview-comment[data-state="open"]:not(.top-level-preview-btn)').each(function(e){e.setAttribute("data-state","closed");e.set("innerHTML",this.localizedStrings.preview)},this)},hidePreview:function(e){if(e){var t=e.ancestor(".reply-area-wrapper"),a,i,n,s;n=t?m.one('.comment-preview[data-previewId="'+t.getAttribute("data-commentId")+'"]'):m.one(".comment-preview.top-level");e.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.preview);a=new m.Anim({node:e.ancestor(".input"),duration:.3,easing:m.Easing.easeOutStrong,to:{height:e.get("offsetHeight")}});a.on("end",function(){this._node.setStyle("overflow","visible")});a.run();if(n){s=n.ancestor(".comment-preview-wrapper");i=new m.Anim({node:s,duration:.3,easing:m.Easing.easeOutStrong,to:{height:0}});i.on("start",function(){this._node.removeClass("open");this._node.addClass("closed")});i.on("end",function(){this._node.remove(true)});i.run()}}},getTemplateData:function(t,e){m.Data.get({url:"/api/template/GetTemplateSchema",data:{type:s.COMMENTS},success:function(e){this._template=e.html;t.call(this)},failure:e},this)},updateLikedFlaggedState:function(){(this.settings.flagsAllowed||this.settings.likesAllowed)&&this.commentData.getLikesAndFlags({success:function(a){var e=m.one(".comment-list");e.all(".comment").each(function(e){var t=e.getAttribute("data-commentId");this.settings.flagsAllowed&&(a.flagMap[t]?e.addClass("flagged"):e.removeClass("flagged"));this.settings.likesAllowed&&(a.likeMap[t]?e.addClass("liked"):e.removeClass("liked"))},this)}},this)},create:function(){this.userHasAccessPermission(i.CONFIG_ACTIVITY_COMMENTS)&&(this.moderationMode=true);this.getTemplateData(function(){var e=this.history.get("commentId");if(m.Lang.isUndefined(e)){this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder})}else{this.onLoading();this.retrieveThread({onSuccess:this.threadRender,onFailure:function(e){this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder})},order:this.sortOrder,commentId:e})}},function(){})},updateCommentCounts:function(){var e=this.renderToFragment({visibleComments:this.commentData.visibleComments,totalComments:this.commentData.totalComments,comments:[]});0===this.commentData.visibleComments?this.containerEl.addClass("empty"):this.containerEl.removeClass("empty");m.one(".comment-count").set("innerHTML",e.one(".comment-count").get("innerHTML"))},truncateAt:function(e,t){if(!e)return"";if(void 0===t)return e;var a=e.split(" ").slice(0,t).join(" ");return a+(a.length>t?"."===a.substr(a.length-1)?"..":"…":"")},formatAccountData:function(e){return{userAvatarUrl:(e.avatarAssetUrl?e.avatarAssetUrl:"/universal/images-v6/default-avatar.png")+"?format=50w",userHref:e.websiteUrl?"http://"+m.Squarespace.Escaping.escapeForHtml(e.websiteUrl):"",userHtml:e.websiteUrl||"",userName:m.Escape.html(e.displayName||""),userBio:this.truncateAt(m.Squarespace.Escaping.escapeForHtml(e.bio,60))||""}},buildInfoPane:function(e){var t=this.formatAccountData(e);var a=m.Node.create('<div class="squarespace-user-info"></div>');var i=m.Node.create('<div class="user-info-header"></div>');var n=m.Node.create('<div class="avatar"><img src="'+t.userAvatarUrl+'" /></div>');var s=m.Lang.sub('<div class="info"><div class="name">{userName}</div><a class="website" href="{userHref}">{userHtml}</a></div>',t);var r=m.Node.create(s);var o=m.Node.create('<div class="user-info-body"><p>'+t.userBio+"</p></div>");var l=m.Node.create('<div class="user-social-opts"><div class="social-leftcol"></div><div class="social-rightcol"></div><div class="clearfix"></div></div>');i.append(n).append(r);a.append(i).append(o).append(l);return a},showClickOverlay:function(){var e=m.one(document),t=e.get("winHeight"),a=e.get("winWidth");this.overlayEl=m.Node.create('<div class="user-profile-overlay"></div>');this.overlayEl.setStyles({position:"fixed",background:"#000",height:t+"px",width:a+"px",opacity:"0",top:"0px",left:"0px",zIndex:999});m.one(m.config.doc.body).append(this.overlayEl);m.on("click",this.hideUserProfileFlyout,this.overlayEl,this)},showUserProfileFlyout:function(e){if(!e.target.hasClass("squarespace-comment-user-flyout")&&!e.target.ancestor(".squarespace-comment-user-flyout")&&!this.flyoutOpen){var t=e.target.ancestor(".comment").getAttribute("data-commentid"),a=this.commentData.getCommentById(t);var i=a.memberAccount;if(!i)return;var n=m.Node.create('<div class="squarespace-comment-user-flyout"></div>');n.append(this.buildInfoPane(i));n.append('<div class="squarespace-user-activity"><div class="squarespace-activity-header"><div class="title">'+u("Activity")+'</div><div class="description">'+u("Comments and likes across the Squarespace platform")+'</div></div><div class="feed"></div></div>');n.append('<div class="squarespace-comment-user-clearfix"></div>');var s=m.one(document.body);s.append(n);n.setStyles({position:"fixed",left:"50%",top:"50%",opacity:0,zIndex:1e3,transform:"scale(.95)"});n.setStyles({marginTop:-parseInt(n.get("offsetHeight"),10)/2,marginLeft:-parseInt(n.get("offsetWidth"),10)/2});n.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1)"},opacity:{duration:.3,easing:"ease-out",value:1}})}this.flyoutOpen=true;this.showClickOverlay();e.stopImmediatePropagation()},hideUserProfileFlyout:function(e){if(this.flyoutOpen){var t=m.one(".squarespace-comment-user-flyout");t&&t.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1.08)"},opacity:{duration:.4,easing:"ease-out",value:0},on:{end:m.bind(function(){t.remove(true);e.target.remove(true);this.flyoutOpen=false},this)}})}},getThreadNodes:function(e,t){var a=e.getAttribute("data-commentId");t.push(e);m.all('.comment[data-replyTo="'+a+'"]').each(function(e){this.getThreadNodes(e,t)},this)},actualDelete:function(t,a,i){var n=t.target.ancestor(".comment"),s=n.getAttribute("data-commentId"),r,o,l=this.lastSortTime,c=this.lastHashChangeTime,e=function(e){if(l===this.lastSortTime&&c===this.lastHashChangeTime){r=m.Node.create('<div class="delete-anim-wrapper"></div>');n.insert(r,"after");i.forEach(function(e){r.append(e);var t=m.one('.reply-area-wrapper[data-commentId="'+e.getAttribute("data-commentId")+'"]');t&&t.remove(true)});o=new m.Anim({node:r,duration:.5,easing:m.Easing.easeOutStrong,to:{height:0}});o.on("end",function(){r.remove(true);i.length>1&&this.commentData.removeCommentsByIds(i.map(function(e){return e.getAttribute("data-commentId")}).filter(function(e){return e!==s}));this.updateCommentCounts()},this);o.run()}},d=function(e){if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.actaulDelete(t,a,i)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Delete Comments"),u("Delete Comments"),false)}else e.authorizationFail&&new m.Squarespace.Widgets.Alert({"strings.title":u("Authorization Failure"),"strings.message":u("You are not allowed to perform that action.")})};this.commentData._delete({comments:[s],spam:a,success:e,failure:d},this)},onDeleteClick:function(e){var t,a=e.target.ancestor(".comment"),i=function(){var e=[];this.getThreadNodes(a,e);return e},n=i.call(this),s=function(){n.forEach(function(e){if(e.hasClass("unmoderated"))e.removeClass("pending-delete");else{var t=new m.Anim({node:e,duration:.3,easing:m.Easing.easeOutStrong,to:{opacity:1}});t.on("end",function(){this._node.removeClass("pending-delete")});t.run()}})},r=function(){s();this.actualDelete(e,true,n)},o=function(){s();this.actualDelete(e,false,n)},l=function(){s()};n.forEach(function(e){if(e.hasClass("unmoderated"))e.addClass("pending-delete");else{var t=new m.Anim({node:e,duration:.3,easing:m.Easing.easeOutStrong,to:{opacity:.5}});t.on("end",function(){this._node.addClass("pending-delete")});t.run()}});t=new m.Squarespace.Widgets.Confirmation({style:m.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,"strings.reject":u("Delete"),"strings.confirm":u("Delete & Report Spam"),"strings.title":c({one:"Delete Comment",other:"Delete {%n} Comments"},n.length),"strings.message":c({one:"Are you sure you wish to delete this comment?",other:"Are you sure you wish to delete these comments?"},n.length)});t.on("cancel",l,this);t.on("reject",o,this);t.on("confirm",r,this)},onApproveClick:function(e){var t=e.target.ancestor(".comment");this.approve(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},approve:function(t,a){var e=function(e){this.updateCommentCounts()},i=function(e){if(e.loginRequired){a.addClass("unmoderated");SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.approve(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Approve Comments"),u("Approve Comments"),false)}};a.removeClass("unmoderated");this.commentData.approve({comments:[t],success:e,failure:i},this)},onUnlikeClick:function(e){var t=e.target.ancestor(".comment");this.unlike(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},unlike:function(a,t){var i=t.one(".likes"),e=function(){if(i){var e={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(a).likeCount}}]},t=this.renderToFragment(this.scatterData(e)).one(".likes");i.replace(t)}},n=function(e){t.addClass("liked");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unlike(a,t)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Dislike Comment"),u("Dislike Comment"),false)}};t.removeClass("liked");this.commentData.unlike({id:a,success:e,failure:n},this)},onFlagClick:function(t){var e=function(){var e=t.target.ancestor(".comment");this.flag(e.getAttribute("data-commentId"),e)};new m.Squarespace.Widgets.Confirmation({"strings.title":u("Flag Comment"),"strings.message":u("Are you sure you wish to flag this comment as inappropriate?")}).on("confirm",e,this);t.stopImmediatePropagation()},flag:function(a,i){var e=function(){},t=function(e){i.removeClass("flagged");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});var t;this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.flag(a,i);t.detach()},this);t=SQUARESPACE_LOGIN.once("cancel",function(){i.removeClass("flagged")},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Flag Comment"),u("Flag Comment"),false)}else e.error&&new m.Squarespace.Widgets.Alert({"strings.title":u("Failed to Flag Comment"),"strings.message":e.error})};i.addClass("flagged");this.commentData.flag({id:a,success:e,failure:t},this)},onUnflagClick:function(e){var t=e.target.ancestor(".comment");this.unflag(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},unflag:function(t,a){var e=function(){},i=function(e){a.addClass("flagged");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,opacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unflag(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Unflag Comment"),u("Unflag Comment"),false)}};a.removeClass("flagged");this.commentData.unflag({id:t,success:e,failure:i},this)},onLikeClick:function(e){var t=e.target.ancestor(".comment");this.like(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},like:function(t,a){var i=a.one(".likes"),n=a.getAttribute("data-commentid"),e=function(){if(i&&!m.Lang.isNull(a._node)){var e={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(n).likeCount}}]},t=this.renderToFragment(this.scatterData(e)).one(".likes");i.replace(t)}},s=function(e){a.removeClass("liked");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.like(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Like Comment"),u("Like Comment"),false)}else e.error&&new m.Squarespace.Widgets.Alert({"strings.title":u("Failed to Like Comment"),"strings.message":e.error})};a.addClass("liked");this.commentData.like({id:t,success:e,failure:s},this)},addLoadMoreControls:function(e){var t=m.one(".load-more");t&&t.remove(true);!this.threadState&&this.commentData.page<this.commentData.numPages&&this.containerEl.append(this.loadMoreNode.cloneNode(true))},addFullViewControls:function(e){var t=m.one(".full-view-btn");t&&t.remove(true);this.threadState&&this.containerEl.one(".comment-list").insert(this.fullViewNode.cloneNode(true),"before")},onReplyToggleClick:function(e){var i=e.target.ancestor(".comment"),t=i.getAttribute("data-commentid"),a=m.one('.reply-area-wrapper[data-commentid="'+t+'"]'),n=m.one(m.config.doc.body),s,r,o=m.bind(function(e,t){if(e){e.setStyles({overflow:"hidden",height:a.get("offsetHeight")});e.one(".input").setStyle("height","auto");m.one('.comment[data-commentid="'+e.getAttribute("data-commentId")+'"]').fire("reply-close");s=new m.Anim({node:a,duration:.3,easing:m.Easing.easeOutStrong,to:{height:0}});s.on("end",function(){},this);s.run()}},this),l=m.bind(function(e){if(e){var t,a;a=e.one(".new-comment-area").cloneNode(true);a.setStyles({visibility:"hidden",display:"block",position:"absolute"});i.append(a);t=a.get("offsetHeight");a.remove(true);m.one('.comment[data-commentid="'+e.getAttribute("data-commentId")+'"]').fire("reply-open");this.hideAllPreviews();r=new m.Anim({node:e,duration:.3,easing:m.Easing.easeOutStrong,to:{height:Math.max(t,190)+15}});r.on("end",function(){this._node.setStyle("height","auto");var e=this._node.getY()+this._node.get("offsetHeight")-(n.get("docScrollY")+n.get("winHeight")),t=n.get("scrollTop"),a;if(e>=0){a=new m.Anim({node:n,duration:.3,easing:m.Easing.easeOutStrong,to:{scrollTop:t+e}});a.run()}});r.run()}},this),c=function(e){return e.hasClass("reply-open")};if(c(i)){i.removeClass("reply-open");this.hideAllPreviews();o(a)}else{a.one(".reply-area").setAttribute("replyid",t);m.all(".comment.reply-open").each(function(e){e.removeClass("reply-open");var t=m.one('.reply-area-wrapper[data-commentid="'+e.getAttribute("data-commentid")+'"]');o(t)});var d=a.one("textArea");this.replyCompleteEvents[i.getAttribute("data-commentId")]||(this.replyCompleteEvents[i.getAttribute("data-commentId")]=this.once("reply-complete",function(e){o(a,function(){this.one(".input").setStyle("height","auto")});this.replyCompleteEvents[i.getAttribute("data-commentId")]=null},this));d.on("focus",function(){this.setAttribute("data-edited",true)});d.on("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",false)});i.addClass("reply-open");l(a)}e.stopImmediatePropagation()},escapeComment:function(e){e.authorName=m.Squarespace.Escaping.escapeForHtml(e.authorName);e.authorUrl=m.Squarespace.Escaping.escapeForHtml(e.authorUrl);e.authorEmail=m.Squarespace.Escaping.escapeForHtml(e.authorEmail);if(e.memberAccount){e.memberAccount.displayName=m.Squarespace.Escaping.escapeForHtml(e.memberAccount.displayName);e.memberAccount.bio=m.Squarespace.Escaping.escapeForHtml(e.memberAccount.bio)}},addReplyArea:function(e){var t=m.one(".reply-area-wrapper"),a,i,n,s;if(t){t.one(".preview-comment").setAttribute("data-state","closed").set("innerHTML",this.localizedStrings.preview);a=t.cloneNode(true);a.setAttribute("data-commentId",e.getAttribute("data-commentId"));a.setAttribute("data-depth",e.getAttribute("data-depth"));s=a}else{i={comments:[{id:e.getAttribute("data-commentId"),depth:e.getAttribute("data-depth")}]};n=this.renderToFragment(i);s=n.one(".reply-area-wrapper").cloneNode(true)}s.setStyle("height",null);e.insert(s,"after")},prependComment:function(e){var t=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||u("Not Logged In"),a=m.one(".top-level-comment-area .comment-input"),i=m.one(".top-level.comment-preview"),n=false,s,r;if(i){i.one(".author").set("innerHTML",m.Escape.html(t));r=i.ancestor(".comment-preview-wrapper")}else{i=this.generatePreview(a).one(".comment-preview");n=true;i.wrap('<div class="comment-preview-wrapper"></div>');r=i.ancestor(".comment-preview-wrapper");m.one(".comment-list").prepend(r)}i.removeClass("comment-preview");i.addClass("pending");m.one(".top-level-comment-area .preview-comment").setAttribute("data-state","closed");this.hidePreview(a);if(n){s=new m.Anim({node:r,duration:.3,easing:m.Easing.easeOutStrong,to:{height:i.get("offsetHeight")+parseInt(i.getComputedStyle("marginBottom"),10)}});s.on("end",function(){i.unwrap()});s.run()}else i.unwrap();this.containerEl.removeClass("empty");this.makeMostRecent(i);return i},injectReply:function(e,t){var a=t.getAttribute("data-commentId"),i=m.one('.comment-preview-wrapper[data-commentId="'+a+'"]'),n=m.one('.reply-area-wrapper[data-commentId="'+a+'"]').one("textArea"),s=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||u("Not Logged In"),r=false,o;if(i){o=i.one(".comment-preview");o.one(".author").set("innerHTML",m.Escape.html(s))}else{o=this.generatePreview(n).one(".comment-preview");r=true;o.wrap('<div class="comment-preview-wrapper"></div>');i=o.ancestor(".comment-preivew-wrapper")}t.hasAttribute("data-depth")&&o.setAttribute("data-depth",parseInt(t.getAttribute("data-depth"),10)+1);o.unwrap();o.removeClass("comment-preview");o.addClass("pending");t.removeClass("reply-open");t.fire("reply-complete");r&&n.ancestor(".reply-area-wrapper").insert(o,"after");this.makeMostRecent(o);this.fire("reply-complete",{node:o});return o},makeMostRecent:function(e){if(e.hasClass("comment")){m.all(".comment.pending.most-recent").each(function(e){e.ancestor(".most-recent-anim-wrapper")||e.removeClass("most-recent")});e.addClass("most-recent")}},fullDataRender:function(){this.render(this.commentData.formatted);this.commentList=m.one(".comment-list")},threadRender:function(){this.render(this.commentData.formattedThread);this.commentList=m.one(".comment-list");this.commentList.one('.comment[data-commentId="'+this.commentData.currentThreadRoot+'"]').addClass("target")},showEmptyText:function(){new m.Squarespace.Widgets.Alert({"strings.title":u("Enter Comment Text"),"strings.message":u("Enter text in the field above to post a comment.")})},showModerationNotification:function(){new m.Squarespace.Widgets.Alert({className:"okay","strings.title":u("Comment Awaiting Moderation"),"strings.message":u("Your comment has been successfully posted and is awaiting moderation.")})},showCommentSuccessNotification:function(){new m.Squarespace.Widgets.Alert({className:"okay","strings.title":u("Comment Posted"),"strings.message":u("Your comment has been successfully posted.")})},showPostCommentNotification:function(e){e.status===d.AWAITING_MODERATION&&this.showModerationNotification()},squarespaceAdminOnly:function(){return Static.SQUARESPACE_CONTEXT.website.cloneable&&!this.userHasAccessPermission(i.ADMIN)},commentBtnOnClick:function(e){var t=m.one(".top-level-comment-area .comment-input");var a=t.get("value");if(""===a.trim())this.showEmptyText();else{var i=this.prependComment(a);this.submitTopLevel(a,i,t)}e.stopImmediatePropagation()},updateWithMemberAccount:function(e,t){if(t&&!SQUARESPACE_LOGIN.account){var a=e.one(".author");a&&a.setContent(m.Escape.html(t.displayName));var i=e.one(".avatar img");i&&t.avatarAssetUrl&&i.setAttribute("src",t.avatarAssetUrl)}},submitTopLevel:function(s,r,o){if(!m.Squarespace.Utils.areCookiesEnabled()){new m.Squarespace.Widgets.Alert({"strings.title":u("Comments disallowed"),"strings.message":u("This browser does not accept cookies, which is a requirement for commenting. You can allow cookies by changing your browser's settings.")});return}this.setPosting(r,!this.approvalRequired||!this.moderationMode);var l=o.get("value");o.set("value","");this.addComment({onSuccess:function(e){this.updateCommentCounts();if(!m.Lang.isNull(r._node)){this.setPosted(r);r.setAttribute("data-commentId",e.comment.id);e.comment.status===d.APPROVED&&r.removeClass("pending");this.addReplyArea(r);this.updateWithMemberAccount(r,e.comment.memberAccount);this.showPostCommentNotification(e.comment)}},onFailure:function(e){o.set("value",l);if(e.errors)if(e.errors.anonEmail||e.errors.authorEmail||e.errors.authorName){var t=r.one(".author");e.errors.anonEmail&&new m.Squarespace.Widgets.Alert({className:"okay","strings.title":u("Comment Failed"),"strings.message":e.errors.anonEmail});var a=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this);var i=function(){this.submitTopLevel(s,r,o);m.Lang.isNull(t)&&!m.Lang.isNull(t._node)||t.set("innerHTML",m.Escape.html(SQUARESPACE_LOGIN.account.displayName));if(SQUARESPACE_LOGIN.account.avatarAssetUrl){var e=r.one(".avatar");e.one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl)}a.detach()};var n=function(){this.submitTopLevel(s,r,o);var e=b.get("displayName");!e||m.Lang.isNull(t)||m.Lang.isNull(t._node)||t.set("innerHTML",m.Escape.html(e));a.detach()};SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,i,this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,n,this);SQUARESPACE_LOGIN.showCommentLogin(u("Post Comment"),u("Post Comment"),this.settings.allowAnon)}else this.showPostCommentNotification(e.comment)},body:s},this)},removeMostRecentPending:function(){var e=m.one(".comment.most-recent"),t,a;e.ancestor(".comment-preview-wrapper")&&e.unwrap();e.wrap('<div class="most-recent-anim-wrapper"></div>');a=e.ancestor(".most-recent-anim-wrapper");a.setStyles({overflow:"hidden",height:e.get("offsetHeight")});t=new m.Anim({node:a,duration:.3,easing:m.Easing.easeOutStrong,to:{height:0}});t.on("end",function(){this._node.remove(true)});t.run()},onLoading:function(){var e=m.one(".comments-content"),t=m.Node.create('<div class="comment-event-capture"></div>'),a;t.setStyles({position:"absolute",top:e.getY(),left:e.getX(),width:e.get("offsetWidth"),height:e.get("offsetHeight"),zIndex:1e3});t.on("hover",function(e){e.stopImmediatePropagation()});t.on("click",function(e){e.stopImmediatePropagation()});m.one(m.config.doc.body).append(t);a=new m.Anim({node:e,duration:.3,easing:m.Easing.easeOutStrong,to:{opacity:.3}});a.run()},commentIdHashOnChange:function(e){if(!(m.Lang.isNull(e.newVal)||m.Lang.isUndefined(e.newVal))){this.threadState=true;this.lastHashChangeTime=new Date;this.onLoading();this.retrieveThread({commentId:e.newVal,order:this.sortOrder,onSuccess:function(){this.threadRender()}})}},commentIdHashOnRemove:function(){this.threadState=false;this.lastHashChangeTime=new Date;this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder},this)},retrieveThread:function(t,a){this.threadState=true;var e=function(e){this.threadState=false;t.onFailure.call(a||this,e)};this.commentData.getThread({order:t.order,commentId:t.commentId,success:t.onSuccess,failure:e},a||this)},retrieveComments:function(t,a){var e=m.bind(function(e){this.lastPollTime=new Date;t.onSuccess.call(a||this,e);this.updateLikedFlaggedState()},this);this.commentData.get({order:t.order,page:t.page,since:t.since||"",success:e,failure:t.onFailure},this)},addComment:function(t,a){var e=m.bind(function(e){m.Lang.isFunction(t.onSuccess)&&(t||n).onSuccess.call(a||this,e);b.set("displayName","",{expires:new Date(0),path:"/"})},this);var i={body:t.body,replyTo:t.replyTo,success:e,failure:t.onFailure};i.name=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName")||"";i.email=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.email:b.get("email")||"";i.authorUrl=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.websiteUrl:b.get("websiteUrl")||"";this.commentData.post(i,a||this)},setPosting:function(e,t){e.all(".posting-text").each(function(e){e.removeClass("visible")});var a=e.one(".posting-text"+(t?".moderated":""));a&&a.addClass("visible")},setPosted:function(e){var t=e.all(".posting-text");t&&t.each(function(e){e.removeClass("visible")})},replyTo:function(n,s,r,o){this.setPosting(r,!this.approvalRequired||!this.moderationMode);var l=o.get("value");o.set("value","");this.addComment({body:s,replyTo:n,onSuccess:function(e){this.updateCommentCounts();if(!m.Lang.isNull(o._node)){this.setPosted(r);r.setAttribute("data-commentId",e.comment.id);e.comment.status===d.APPROVED&&r.removeClass("pending");this.addReplyArea(r);this.updateWithMemberAccount(r,e.comment.memberAccount);this.showPostCommentNotification(e.comment)}},onFailure:function(e){o.set("value",l);if(e.errors&&(e.errors.anonEmail||e.errors.authorEmail||e.errors.authorName)){var t,a;e.errors.anonEmail&&new m.Squarespace.Widgets.Alert({className:"okay","strings.title":u("Comment Failed"),"strings.message":e.errors.anonEmail});var i=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this);t=function(){this.replyTo(n,s,r,o);m.one('.comment[data-replyTo="'+n+'"] .author').set("innerHTML",m.Escape.html(SQUARESPACE_LOGIN.account.displayName));r.one(".author").set("innerHTML",m.Escape.html(SQUARESPACE_LOGIN.account.displayName));if(SQUARESPACE_LOGIN.account.avatarAssetUrl){var e=r.one(".avatar");e.one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl)}i.detach()};a=function(){this.replyTo(n,s,r,o);var e=b.get("displayName");m.Lang.isNull(e)||m.one('.comment[data-replyTo="'+n+'"] .author').set("innerHTML",m.Escape.html(e));i.detach()};SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,t,this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,a,this);SQUARESPACE_LOGIN.showCommentLogin(u("Log In to Post Reply"),u("Post Reply"),this.settings.allowAnon)}}},this)},extendComments:function(){this.currentPage=this.currentPage+1;var e=this.lastSortTime,t=this.lastHashChangeTime;this.retrieveComments({order:this.sortOrder,onSuccess:function(){e===this.lastSortTime&&t===this.lastHashChangeTime&&this.attachComments.call(this)},page:this.currentPage},this)},attachComments:function(){var e=this.commentData.formatted;e.comments=this.commentData.getFormattedPage(this.currentPage);var t=this.renderToFragment(e);this.updateCommentCounts();var a=m.one(".comment-list");t.all(".comment, .reply-area-wrapper").each(function(e){a.append(e)});this.containerEl.one(".load-more").remove(true);this.addLoadMoreControls()},sort:function(e){var a=this.sortOrderLookup[e];b.set("commentSortOrder",e);this.sortOrder=e;this.currentPage=1;var t=function(e){this.lastSortTime=new Date;this.fullDataRender(e);var t=m.one(".comment-sort");t.one("span").set("innerHTML",a);t.one("select").set("value",this.sortOrder)};this.onLoading();this.retrieveComments({order:this.sortOrder,onSuccess:t,page:this.currentPage})},formatData:function(e,t,a){var i,n={comments:[]},s;t=t||{};a=a||{};var r=this.squarespaceAdminOnly()||this.settings.readOnly;n.noAvatars=this.settings.avatarsHidden;n.likesAllowed=this.settings.likesAllowed;n.newCommentAreaTop={authenticatedAccount:SQUARESPACE_LOGIN.account,readOnly:r};n.commentSortTitle=this.sortOrderLookup[this.sortOrder];n.sortOldestFirst=this.sortOrder===l.OLDEST_FIRST;n.sortNewestFirst=this.sortOrder===l.NEWEST_FIRST;n.sortMostLiked=this.sortOrder===l.MOST_LIKED;n.sortLeastLiked=this.sortOrder===l.LEAST_LIKED;n.totalComments=this.commentData.totalComments;n.visibleComments=this.commentData.visibleComments;n.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;for(var o=0;o<e.length;o++){s=e[o];s.unmoderated=s.status===d.AWAITING_MODERATION;s.moderationMode=this.moderationMode;s.readOnly=r;s.flagsAllowed=this.settings.flagsAllowed;if(s.memberAccount){s.authorName=s.memberAccount.displayName;s.authorUrl=s.memberAccount.websiteUrl}s.authorUrl&&!/^https?:\/\//.test(s.authorUrl)&&(s.authorUrl="http://"+s.authorUrl);i=s.id;if(this.settings.likesAllowed){s.likesAllowed={likes:c({one:"{%n} Like",other:"{%n} Likes"},s.likeCount)};t[i]&&(s.likesAllowed.liked=true)}a[i]&&(s.flagged=true);s.threaded=this.settings.threaded;n.comments.push(s)}return n},scatterData:function(e){var t=this.squarespaceAdminOnly()||this.settings.readOnly;e.noAvatars=this.settings.avatarsHidden;e.likesAllowed=this.settings.likesAllowed;e.newCommentAreaTop={};e.newCommentAreaTop.readOnly=t;e.newCommentAreaTop.authenticatedAccount=SQUARESPACE_LOGIN.account;e.commentSortTitle=this.sortOrderLookup[this.sortOrder];e.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;0===this.commentData.totalComments&&(e.noComments=true);var a={};for(var i=0;i<e.comments.length;i++){a=e.comments[i];a.flagsAllowed=this.settings.flagsAllowed;a.moderationMode=this.moderationMode;if(a.memberAccount){a.authorName=a.memberAccount.displayName;a.authorUrl=a.memberAccount.websiteUrl}a.authorUrl&&(a.authorUrl.startsWith("http://")||a.authorUrl.startsWith("https://")||(a.authorUrl="http://"+a.authorUrl));a.readOnly=t;if(this.settings.likesAllowed){a.likesAllowed||(a.likesAllowed={likeCount:0});a.likesAllowed.likeCount=0===a.likesAllowed.likeCount?void 0:a.likesAllowed.likeCount}a.threaded=this.settings.threaded;e.likeMap&&e.likeMap[a.id]&&void 0!==a.likesAllowed&&(a.likesAllowed.liked=true);e.flagMap&&e.flagMap[a.id]&&(a.flagged=true);e.comments[i]=a}return e},render:function(e){var t=this.renderToFragment(e),a=this.commentsEl,i,n=m.one(".comment-event-capture");e.comments.length?this.containerEl.removeClass("empty"):this.containerEl.addClass("empty");a.empty();a.append(t);i=new m.Anim({node:a,duration:.3,easing:m.Easing.easeOutStrong,to:{opacity:1}});i.on("end",function(){n.remove(true)});i.run();this.addFullViewControls();switch(this.params.paginationMode){case this.PaginationModes.PAGE:break;case this.PaginationModes.EXTEND:this.addLoadMoreControls();break;default:break}this.fire("render")},renderToFragment:function(a){for(var e=0;e<a.comments.length;e++){this.escapeComment(a.comments[e]);a.comments[e].body=g.sanitize(a.comments[e].body)}a.localizedStrings=this.localizedStrings;a.commentAnonAllowed=this.settings.allowAnon;var t=m.Node.create(o(this._template,a)),i=t.all(".comment");var n=window.navigator.userAgent.toLowerCase();var s=n.indexOf("safari/")>-1||n.indexOf("chrome/")>-1;var r=t.one(".new-comment-area");s&&r&&r.addClass("logged-in-commenting-unsupported");i.each(function(e,t){e.setAttribute("data-commentId",a.comments[t].id)});return t}});m.augment(m.Squarespace.Comments,m.EventTarget);var v=null;m.config.win.Squarespace.onInitialize(m,function(){var a=m.config.win.Static;var e=a.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;var t;if(e){t=m.one(".squarespace-comments");if(t&&e&&""!==e){window.disqus_shortname=e;var i=t.getAttribute("id");var n="disqus_thread";i!==n&&t.setAttribute("id",n);m.Get.script("//"+e+".disqus.com/embed.js",{win:m.config.win})}return}t=m.one(".squarespace-comments");var s,r,o=a.SQUARESPACE_CONTEXT.websiteSettings;if(t&&!o.disqusShortname){var l=t.getAttribute("data-item-id");var c=t.getAttribute("data-collection-id");var d=parseInt(t.getAttribute("data-comment-state"),10);var u=parseInt(t.getAttribute("data-public-comment-count"),10);s=l||c;if(s){r=l?S.ITEM:S.COLLECTION;var g=false,p=false;r===S.ITEM&&d===y.DISABLED&&(0===u?g=true:p=true);if(!g){var h=function(){m.use("squarespace-comments",function(e){v=new e.Squarespace.Comments({containerEl:t,identifier:s,type:r,publicCommentCount:u,likesAllowed:o.commentLikesAllowed,flagsAllowed:o.commentFlagsAllowed,threaded:o.commentThreaded,approvalRequired:o.commentApprovalRequired,allowAnon:o.commentAnonAllowed,avatarsOn:o.commentAvatarsOn,readOnly:p,sortType:b.get("commentSortOrder")||o.commentSortType});v.create()})};var f=function(){m.use("squarespace-comments",function(e){var t=function(){e.Data.get({url:"/api/auth/CheckAuthentication",secure:true,success:function(t){null!==t.member&&e.use("squarespace-management",function(e){a.SQUARESPACE_CONTEXT.authenticatedAccount=t.member;SQUARESPACE_LOGIN.params=e.merge(SQUARESPACE_LOGIN.params,{redirectAfterCancel:false,redirectAfterLogin:false});SQUARESPACE_LOGIN.onLoginComplete&&SQUARESPACE_LOGIN.onLoginComplete(t.member)});h()},failure:h})};if(e.Data.TRANSPORT_READY)t();else{false;e.once("io:xdrReady",t)}})};a.SQUARESPACE_CONTEXT.authenticatedAccount||a.SQUARESPACE_CONTEXT.website.cloneable?h():f()}}}});m.config.win.Squarespace.onDestroy(m,function(){if(v){v.destroy();v=null}})},"1.0",{requires:["anim","event","history","node","selector-css3","squarespace-comment-data","squarespace-dialog","squarespace-dialog-description","squarespace-escaping-utils","squarespace-login","squarespace-markdown","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","transition"]})},7557:function(e,t,a){var s=a(4130);var r=a(21);YUI.add("squarespace-comment-data",function(n){n.namespace("Squarespace");n.Squarespace.CommentData=Class.create({initialize:function(e){if(void 0===e)throw new Error("You must provide a configuration object.");if(void 0===e.target)throw new Error("You must provide a target id.");if(void 0===e.targetType)throw new Error("You must provide a target type.");this.settings=e.settings||{approvalRequired:false,allowAnon:true,threaded:true};this.formatter=e.formatter||function(e){return e};this.page=1;this.data={comments:[]};this.topLevelComments=0;this.visibleComments=0;this.totalComments=e.publicCommentCount||0;this.commentsPerPage=50;this.target=e.target;this.targetType=e.targetType;this.idToIndex={};this.comments=[];this.likeMap={};this.flagMap={};this.formatted={};this.currentThreadRoot="";this.formattedThread={};this.pageIntervals=[]},useSecure:function(){return window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()},getCommentById:function(e){return this.comments[this.idToIndex[e]]},removeCommentById:function(e){var t=this.idToIndex[e];if(!n.Lang.isUndefined(t)){this.comments.splice(t,1);this.calculatePagination()}},removeCommentsByIds:function(e){e.forEach(function(e){var t=this.idToIndex[e];if(!n.Lang.isUndefined(t)){this.comments.splice(t,1);this.visibleComments-=1;this.totalComments-=1}},this);this.calculatePagination()},getFormattedPage:function(e){var t=this.pageIntervals[e-1];if(t)return Array.prototype.slice.apply(this.comments,t);return null},fullBookkeeping:function(e){var t=0,a={};this.comments=[];this.pageIntervals=[];this.idToIndex={};for(t=0;t<e.comments.length;t++){a=e.comments[t];this.idToIndex[a.id]=t;this.comments[t]=a}this.pageIntervals.push([0,void 0]);this.flagMap=e.flagMap;this.likeMap=e.likeMap;this.commentSettings=e.commentSettings;this.visibleComments=e.visibleComments;this.topLevelComments=this.formatted.topLevelComments||this.topLevelComments;this.totalComments=e.totalComments?e.totalComments:this.totalComments;this.reformat();this.topLevelComments=e.topLevelComments;this.numLikes=e.numLikes;this.numPages=Math.ceil(this.topLevelComments/this.commentsPerPage)},addCommentData:function(e){this.comments.splice((this.idToIndex[e.parentId]||-1)+1,0,e);this.calculatePagination()},calculatePagination:function(){var e=50,t=0,a,i,n;this.idToIndex={};this.pageIntervals=[[0,void 0]];for(n=0;n<this.comments.length;n++){i=this.comments[n];this.idToIndex[i.id]=n;if(!i.parentId){t+=1;if(t>e){a=this.pageIntervals[this.pageIntervals.length-1];a[1]=t-1;this.pageIntervals.push([a[1],void 0]);t=0}}}},appendBookkeeping:function(e){var t=0,a={};this.pageIntervals[this.pageIntervals.length-1][1]=this.comments.length;for(t=0;t<e.comments.length;t++){a=e.comments[t];this.idToIndex[a.id]=this.comments.length+1;this.comments.push(a)}this.pageIntervals.push([this.pageIntervals[this.pageIntervals.length-1][1],void 0]);this.likeMap=n.merge(this.likeMap,e.likeMap);this.flagMap=n.merge(this.flagMap,e.flagMap);this.visibleComments+=e.visibleComments;this.reformat()},reformat:function(){this.formatted=this.formatter(this.comments,this.likeMap,this.flagMap)},like:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.likeCount+=1;this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};n.Data.post({url:"/api/comment/LikeComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},unlike:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.likeCount=Math.max(t.likeCount-1,0);this.reformat()}(a.success||r).call(i||this,e)};n.Data.post({url:"/api/comment/UnlikeComment",secure:true,data:{commentId:a.id},success:e,failure:a.failure},this)},flag:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.flagCount+=1;this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};n.Data.post({url:"/api/comment/FlagComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},_delete:function(t,a){var e=function(e){t.comments.forEach(function(e){this.removeCommentById(e.id)},this);this.visibleComments-=t.comments.length;this.totalComments-=t.comments.length;(t.success||r).call(a||this,e)};n.Data.post({url:"/api/comment/admin/DeleteComments",secure:true,data:{markAsSpam:t.spam,comments:n.Lang.isArray(t.comments)?t.comments:[t.comments]},success:e,failure:t.failure?n.bind(t.failure,a||this):void 0},this)},approve:function(t,a){var e=function(e){t.comments.forEach(function(e){var t=this.getCommentById(e.id);t&&(t.status=s.APPROVED)},this);this.totalComments+=1;(t.success||r).call(a||this,e)};n.Data.post({url:"/api/comment/admin/ApproveComments",secure:true,data:{comments:n.Lang.isArray(t.comments)?t.comments:[t.comments]},success:e,failure:t.failure?n.bind(t.failure,a||this):void 0},this)},unflag:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.flagCount=Math.max(t.flagCount-1,0);this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};n.Data.post({url:"/api/comment/UnflagComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},post:function(t,a){var e={targetId:this.target,targetType:this.targetType,body:t.body,replyToId:t.replyTo,authorName:t.name||"",authorEmail:t.email||"",authorUrl:t.authorUrl||""},i=function(e){if(e.comment.status===s.APPROVED){this.addCommentData(e.comment);this.visibleComments+=1;this.totalComments+=1;t.replyTo||(this.topLevelComments+=1);this.reformat()}(t.success||r).call(a||this,e)};n.Data.post({url:"/api/comment/CreateComment",secure:!!Static.SQUARESPACE_CONTEXT.authenticatedAccount,data:e,success:i,failure:t.failure?n.bind(t.failure,a||this):void 0},this)},getPage:function(e,t,a){t<=this.numPages&&this.get({sortBy:e.order,page:t,success:e.success,failure:e.failure},a)},getSince:function(e,t,a){this.get({since:t,success:e.success,failure:e.failure},a)},getThread:function(a,i){var e=function(e){this.currentThreadRoot=a.commentId;var t=e.comments[0].comment.depth;e.comments=n.Array.map(e.comments,function(e){return e.comment});e.comments.forEach(function(e){e.depth=e.depth-t});this.formattedThread=this.formatter(e.comments,{},{});n.Lang.isFunction(a.success)&&a.success.call(i||this,e)},t=function(e){n.Lang.isFunction(a.failure)&&a.failure.call(i||this,e)};n.Data.get({url:"/api/comment/GetThread",secure:this.useSecure(),data:{sortBy:a.order,commentId:a.commentId},success:e,failure:t},this)},get:function(t,a){var e=function(e){this.page=t.page;t.page<=1?this.fullBookkeeping(e):t.page>1&&this.appendBookkeeping(e);t.success&&t.success.call(a||this,e)};n.Data.get({url:"/api/comment/GetComments",secure:this.useSecure(),data:{targetId:this.target,targetType:this.targetType,since:t.since||"",page:t.page,sortBy:t.order},success:e,failure:t.failure},this)},getLikesAndFlags:function(t,a){var e=n.Array.map(this.comments,function(e){return e.id});n.Data.get({url:"/api/comment/GetLikesFlags",secure:this.useSecure(),data:{ids:e},success:function(e){t.success&&n.Lang.isFunction(t.success)&&t.success.call(a||this,e)},failure:function(e){t.failure&&n.Lang.isFunction(t.failure)&&t.failure.call(a||this,e)}})}})},"1.0",{requires:["squarespace-util"]})},7558:function(e,t){YUI.add("squarespace-mixins-loadable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Loadable=a.Base.create("Loadable",a.Base,[],{initializer:function(){var e=this.get("loadable");var t=this.get("loadOnInitialize");if(a.Lang.isValue(e)){this._bindLoadable();t&&e.load()}else t&&false;this.after("loadableChange",this._bindLoadable,this)},destructor:function(){this._beforeLoadHandler&&this._beforeLoadHandler.detach();this._afterLoadHandler&&this._afterLoadHandler.detach();this._afterBindHandler&&this._afterBindHandler.detach()},_bindLoadable:function(){var e=this.get("loadable");this._beforeLoadHandler=a.Do.before(function(){this._set("loading",true)},e,"load",this);this._afterLoadHandler=e.after(["load","error"],function(){this.get("destroyed")||this._set("loading",false)},this);this._afterBindHandler=a.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},loading:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},loadOnInitialize:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]})},7562:function(e,t,a){var d=a(128);var u=a(517);var g=a(6269);var p=a(8703);var h=a(8704);var f=a(6274);var m=a(6392);var n=a(1005);var s=a(1596);YUI.add("squarespace-commerce",function(r){r.namespace("Squarespace.Commerce");var o=r.config.win.Static;var l=function(e){var t=e.target;var a=t.get("totalQuantity");var i=t.get("subtotalAmount");m.syncAll({items:a,subtotal:n.formatter.format(i)})};var c=function(){if(o.SQUARESPACE_CONTEXT.product){var e=o.SQUARESPACE_CONTEXT.product;var t=r.Object.getValue(o.SQUARESPACE_CONTEXT,["product","variants"]);t&&t.length>0?a(e):i(e)}};var a=function(e){var t=r.Object.getValue(e,["variants"]);if(!t)return;var a=t.map(function(e){return e.sku});var i=t.map(function(e){return{id:e.sku,quantity:null,item_price:e.price.decimalValue,attributes:e.attributes}});var n=e.name;s.trackViewProductPage({content_ids:a,content_type:"product",contents:i,content_name:n})};var i=function(e){var t=e.id;var a=e.name;var i=r.Object.getValue(e,["price","decimalValue"]);s.trackViewProductPage({content_ids:[t],content_type:"product",contents:[{id:t,quantity:null,item_price:i}],content_name:a})};r.Squarespace.Commerce.initializeCommerce=function(){g.initializeVariantDropdowns(r.config.win.document);p.initializeProductBlocks(r.config.win.document);h(r.config.win.document);try{c()}catch(e){u.trackCaughtError("common","trackViewProduct issue",e.stack)}r.Squarespace.CartUtils.initializeAddToCartButtons();var e=r.Lang.isValue(r.one(".sqs-custom-cart"))||r.Lang.isValue(r.one(".sqs-has-custom-cart"));if(!r.Squarespace.Commerce.isExpressCheckout()&&!f(r.config.win)&&!e){var t=r.one(".sqs-cart-dropzone");if(r.Lang.isNull(t))if(r.Lang.isValue(r.one(".absolute-cart-box")))t=r.one(".absolute-cart-box");else{t=r.Node.create('<div class="absolute-cart-box"></div>');r.one(r.config.doc.body).append(t)}var a=t.one(".sqs-pill-shopping-cart");var i=r.Widget.getByNode(a);i||new r.Squarespace.Widgets.PillShoppingCart({model:r.Squarespace.Singletons.ShoppingCart,useLightCart:o.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.useLightCart,render:t})}if(!f(r.config.win)){m.mountAll();r.Squarespace.Singletons.ShoppingCart.after("load",l);r.Squarespace.Singletons.ShoppingCart.on("change",l)}var n=window.UserAccountApi;var s=n&&n.isUserAuthenticated();s||"true"===d.get("hasCart")||r.Lang.isValue(d.get("CART"))?r.Squarespace.Singletons.ShoppingCart.load(function(){r.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):r.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")};r.Squarespace.Commerce.destroyCommerce=function(){m.unmountAll();r.Squarespace.Singletons.ShoppingCart.detach("load",l);r.Squarespace.Singletons.ShoppingCart.detach("change",l)};r.config.win.Squarespace.onInitialize(r,r.Squarespace.Commerce.initializeCommerce);r.config.win.Squarespace.onDestroy(r,r.Squarespace.Commerce.destroyCommerce)},"1.0",{requires:["event-base-ie","overlay","squarespace-cart-utils","squarespace-commerce-utils","squarespace-models-shopping-cart","squarespace-pill-shopping-cart"]})},7563:function(e,t,a){var r=a(24).pluralize;var o=a(1005);YUI.add("squarespace-pill-shopping-cart",function(n){n.namespace("Squarespace.Widgets");var t=n.Squarespace.Widgets.PillShoppingCart=n.Base.create("pillShoppingCart",n.Squarespace.Widgets.SSWidget,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").plug(n.Squarespace.Animations.Scalable,{duration:.25});this._hide(true);var e=this.get("contentBox");e.setAttribute("data-test","continue-to-cart");e.addClass(this.get("useLightCart")?"light":"dark")},bindUI:function(){t.superclass.bindUI.call(this);this.get("model").on("change",this.syncUI,this);this.get("contentBox").on("click",function(){n.config.win.Y.Squarespace.Utils.isInDamaskFrame()?n.Squarespace.Singletons.Location.setFrameUrl("/cart"):n.config.win.location="/cart"})},syncUI:function(){t.superclass.syncUI.call(this);var i=this.get("model");var n=i.get("totalQuantity");var s=this.get("contentBox");var e=function(){var e=r({one:"item",other:"items"},n);s.one(".total-quantity").setContent(n>100?"100+":n);s.one(".suffix").setContent(e);var t=i.get("subtotalAmount");var a={trimZeroFractions:true};s.one(".subtotal .price").setContent(o.formatter.format(t,a))};if(n>0){e();this._show()}else{this._hide();e()}},_show:function(){var e=this.get("boundingBox");if(e.hasClass("sqs-scalable-hidden"))e.show();else{var t=n.Easing.easeOutStrong;var a=new n.Anim({node:e,to:{opacity:.7},duration:.2,easing:t});var i=new n.Anim({node:e,to:{opacity:1},duration:.5,easing:t});a.on("end",function(){i.run()});a.run()}},_hide:function(e){var t=this.get("boundingBox");t.hasClass("sqs-scalable-hidden")||t.hide(e)}},{CSS_PREFIX:"sqs-pill-shopping-cart",HANDLEBARS_TEMPLATE:"pill-shopping-cart.html",ATTRS:{model:{value:null,validator:function(e){return n.instanceOf(e,n.Squarespace.Models.ShoppingCart)}},useLightCart:{value:false}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-models-shopping-cart","squarespace-pill-shopping-cart-template","squarespace-ss-widget"]})},7564:function(e,t){YUI.add("squarespace-pill-shopping-cart-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["pill-shopping-cart.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<div class="icon"></div>\n\n<div class="details">\n  <span class="total-quantity"></span>\n  <span class="suffix"></span>\n</div>\n\n<span class="subtotal">\n  <span class="price"></span>\n</span>\n'})})();var t="pill-shopping-cart.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7565:function(e,t,a){var i=a(309);var r=a(1714);YUI.add("squarespace-content-item-types-editor",function(s){s.namespace("Squarespace");s.Squarespace.ContentItemEditorVariants={MINIMAL:1,DIALOG:3,IMAGE_ALT_TEXT:4};s.Squarespace.ContentItemEditorFactory=new(s.Base.create("ContentItemEditorFactory",s.Base,[],{initializer:function(){this.EDITORS_BY_RECORDTYPE={};this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.TEXT]=s.Squarespace.ContentItemEditor.Text;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.IMAGE]=s.Squarespace.ContentItemEditor.Image;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.QUOTE]=s.Squarespace.ContentItemEditor.Quote;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.LINK]=s.Squarespace.ContentItemEditor.Link;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.VIDEO]=s.Squarespace.ContentItemEditor.Video;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.EVENT]=s.Squarespace.ContentItemEditor.Event;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.GALLERY]=s.Squarespace.ContentItemEditor.Gallery;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.AUDIO]=s.Squarespace.ContentItemEditor.Audio;this.EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.KBARTICLE]=s.Squarespace.ContentItemEditor.KBArticle;this.MINIMAL_EDITORS_BY_RECORDTYPE={};this.MINIMAL_EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.IMAGE]=s.Squarespace.ContentItemEditor.ImageMinimal;this.MINIMAL_EDITORS_BY_RECORDTYPE[s.Squarespace.RecordType.VIDEO]=s.Squarespace.ContentItemEditor.VideoMinimal;this.PRODUCT_IMAGE_MINIMAL_EDITOR=s.Squarespace.ContentItemEditor.ProductImageMinimal;this.PRODUCT_EDITORS_BY_PRODUCTTYPE={};this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.DIGITAL]=s.Squarespace.ContentItemEditor.ProductDigital;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.PHYSICAL]=s.Squarespace.ContentItemEditor.ProductPhysical;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.SERVICE]=s.Squarespace.ContentItemEditor.ProductService;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.GIFT_CARD]=s.Squarespace.ContentItemEditor.ProductGiftCard},getEditor:function(e,t){r.mark("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor");t=s.Lang.isObject(t)?t:{};var a;var i=e.get("recordType");var n=t;s.Lang.isValue(t.variant)||(n=s.merge({variant:s.Squarespace.ContentItemEditorVariants.DIALOG},t));n.variant===s.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT?a=s.Squarespace.ContentItemEditor.ImageAltText:n.variant===s.Squarespace.ContentItemEditorVariants.MINIMAL?a=i===s.Squarespace.RecordType.IMAGE&&t.parentItem&&t.parentItem.get("recordType")===s.Squarespace.RecordType.STORE_ITEM?this.PRODUCT_IMAGE_MINIMAL_EDITOR:this.MINIMAL_EDITORS_BY_RECORDTYPE[i]:i===s.Squarespace.RecordType.STORE_ITEM&&(a=this.PRODUCT_EDITORS_BY_PRODUCTTYPE[e.get("structuredContent").get("productType")]);a=a||this.EDITORS_BY_RECORDTYPE[i];if(a){r.measure("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor");return a}throw new Error("No ContentItemEditor has been found for this item: "+i)}}))},"1.0",{requires:["squarespace-content-item-types-audio","squarespace-content-item-types-event","squarespace-content-item-types-gallery","squarespace-content-item-types-image","squarespace-content-item-types-kbarticle","squarespace-content-item-types-link","squarespace-content-item-types-product-digital","squarespace-content-item-types-product-giftcard","squarespace-content-item-types-product-physical","squarespace-content-item-types-product-service","squarespace-content-item-types-quote","squarespace-content-item-types-text","squarespace-content-item-types-video","squarespace-util-authenticated"]})},7566:function(e,t,a){var s=a(24).t;YUI.add("squarespace-content-item-types-audio",function(i){var e={title:s("Edit {presentationName}"),width:800,height:480,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.audio"]},{$include:"tabs.options.audio"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};i.namespace("Squarespace.ContentItemEditor");var n=i.Squarespace.ContentItemEditor.Audio=i.Base.create("AudioContentItemEditor",i.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){n.superclass._dialogOnReady.call(this);var e=this.get("dialog");var t=e.getField("audioTrack");t.on("dataChange",function(e){e.newVal&&this._bindListenersToAudioItem(e.newVal)},this);this._bindListenersToAudioItem(t.get("data"));this._bindFileUploadBehaviors("audioTrack")},_bindListenersToAudioItem:function(e){var a=this.get("dialog");e.on("titleChange",function(e){var t=a.getField("title");t&&""===t.get("data").trim()&&t.set("data",e.newVal)},this);e.get("structuredContent").on("artistNameChange",function(e){var t=a.getField("artistName");t&&""===t.get("data").trim()?t.set("data",e.newVal):t||console.warn("Could not set artistName field, tried to set new data `"+e.newVal+"`.")},this)},getDialogData:function(){var e=n.superclass.getDialogData.call(this);e.audioTrack=this.get("model");e.artistName=e.structuredContent.artistName;return e},sanitizeDialogData:function(e){var t=n.superclass.sanitizeDialogData.call(this,e);i.Array.each(["systemDataId","systemDataOrigin","mediaProcessingState","systemDataSourceType","systemDataVariants","filename"],function(e){t.audioTrack?t[e]=t.audioTrack.get(e):t[e]=null});var a={};t.audioTrack&&(a=t.audioTrack.get("structuredContent").toJSON());t.structuredContent=i.merge(a,{title:t.title,artistName:t.artistName});delete t.audioTrack;delete t.mediaProcessingState;return t}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["squarespace-content-item-types-base"]})},7567:function(e,t,a){var i=a(100);var c=a(24).t;var n=a(1595);var s=a(794);var r=a(114);var o=a(87);var d=a(1570);var u=a(1332);var g=a(1089);var l=a(729);var p=a(8707);var h=l.createLogger("content-item dialog","black");YUI.add("squarespace-content-item-types-base",function(l){l.namespace("Squarespace.ContentItemEditor");var a=l.Squarespace.ContentItemEditor.Base=l.Base.create("ContentItemEditor",l.Squarespace.ModelEditorDialog,[],{initializer:function(){if(this.constructor===a)throw new Error("You cannot instantiate the BaseContentItemEditor.");var e=this.get("dialog");var t=this.get("model");e.on("button-duplicate",i(this._confirmAndDuplicate.bind(this),500));e.on("button-saveAndPublish",this._saveAndPublish,this);e.on("remove-requested",this._confirmAndRemoveItem,this);e.on("ready",this._dialogOnReady,this);this._isNew=t.isNew();this._isNew&&this.plug(l.Squarespace.ModelEditorPlugins.AutoSave)},_confirmAndDuplicate:function(){var e=this.get("dialog");var t={};var a=true;var i=e.canClose(this.save.bind(this,t,this._duplicate.bind(this),a),this._duplicate.bind(this),function e(){});true===i&&this._duplicate()},trackDuplicate:function(e){this.trackAction(g.duplicateCollectionItem,e)},_duplicate:function(){var r=this.get("dialog");var o=this.get("model");var e=o.get("collectionId");r.updateTitle(l.Squarespace.DialogStates.LOADING);r.showSaveOverlay();l.Squarespace.ContentCollectionCache.getCollectionById(e,function e(s){u.copy(o.get("id"),l.Squarespace.WorkflowStates.DRAFT).then(function e(t){this.trackDuplicate(o);var a=new l.Squarespace.Models.ContentItem(t);r.hideSaveOverlay();r.fire("duplicate",a);var i=l.Squarespace.ContentItemEditorFactory.getEditor(a);var n=new i({model:a,isDuplicateItemEditor:true});this.fire("duplicate",n);r.on("canceled",function e(){n.show();n.once(["savingClose","nonSavingClose"],function(){s.items.add(a)})});r.cancel()}.bind(this)).catch(function e(t){this._createErrorAlert(c("An error occured while duplicating this item"));r.hideSaveOverlay()}.bind(this))}.bind(this))},_saveAndPublish:function(e){e.halt();var t=this.get("dialog");var a=this.get("model");a.set("workflowState",l.Squarespace.WorkflowStates.PUBLISHED);var i=t.getField("workflow");var n=i.getValue();var s=(new Date).getTime();"draft"!==n.state&&(s=n.date);i.set("data",{state:"published",date:s},{silent:true});t.saveAndClose()},_dialogOnReady:function(){this._bindFileUploadBehaviors("mainImage");this._bindCommentConfirm();this._bindWorkflowDialogFieldChange()},_bindWorkflowDialogFieldChange:function(){var a=this.get("dialog");var e=a.getField("workflow");e&&e.on("dataChange",function(e){if(true===e.silent)return;var t=l.Squarespace.ObjectBuilder.make({buttons:this.get("dialogConfig.buttons")},this.get("dialogConfigContext"),{id:this._isNew?null:this.get("model").get("id"),workflowState:this._getWorkflowStateForString(e.newVal.state),onlySetAttrsOnSave:this.get("onlySetAttrsOnSave")});a.setButtons(t.buttons)},this)},_bindFileUploadBehaviors:function(e){var a=this.get("dialog").getField(e);var i=this.get("model");a&&a.after("dataChange",function(){var e=a.get("data");if(e){var t=a.get("data").get("id");i.get("id")!==t&&i.set("id",t)}else i.get("id")&&i.clearFileData()},this)},_bindCommentConfirm:function(){var e=this.get("dialog").getField("commenting");e&&e.on("dataChange",function(e){var t=s.getState().commentsEnabled;var a="disable"===e.prevVal.state&&"allow"===e.newVal.state;if(t||!a)return;d.save(s.getMergedWebsiteSettings({commentsEnabled:true,commentEnableByDefault:false}),false);new l.Squarespace.Widgets.Confirmation({"strings.title":c("Commenting Enabled"),"strings.message":c("To enable comments on all posts, adjust the default comment option in Comments Settings"),"strings.confirm":c("Go to Settings"),"strings.cancel":c("Ok")}).on("confirm",function(){this.set("autoSaveAnnotation",true);l.Squarespace.Singletons.Location.go("/settings/blogging/comments")},this)},this)},_confirmAndRemoveItem:function(e){var t;var a;var i=this.getPresentationName();var n=this.get("extendedDeleteMessage");var s=this.get("model");if(this._isNew){t=c("Discard {presentationName}",{presentationName:i});a=c("Are you sure you wish to discard this {sub1}?",{sub1:i.toLowerCase()})}else{t=c("Remove {presentationName}",{presentationName:i});a=c("Are you sure you wish to remove this {sub1}? {extended}",{sub1:i.toLowerCase(),extended:n})}new l.Squarespace.Widgets.Confirmation({"strings.title":t,"strings.message":a}).on("confirm",function e(){this._removeItem(s)},this)},_removeItem:function(e){h("Delete item via dialog",{item:e});this.trackAction(g.deleteCollectionItemFromModal,e);e.destroy({remove:true});this.destroy()},getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.mainImage=this.get("model");e.workflow={state:l.Squarespace.ContentItemUtils.getWorkflowStateIdentifier(e.workflowState),date:e.publishOn};e.commenting={state:l.Squarespace.ContentItemUtils.getCommentStateIdentifier(e.commentState),date:e.commentDisableOn};e.gallery=this.get("model");e.clickthroughUrl&&(e.clickthroughUrl={url:e.clickthroughUrl});l.Squarespace.ContentItemUtils.setDataForCustomType(e,this.getCustomTypeConfiguration(),this);return e},sanitizeDialogData:function(e){delete e.author;delete e.mainImage;delete e.mediaProcessingState;var t=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"];for(var a=0;a<t.length;a++)l.Lang.isDate(e[t[a]])&&(e[t[a]]=e[t[a]].getTime());e.commentState=l.Squarespace.CommentStates["allow"===e.commenting.state?"ENABLED":"DISABLED"];e.commentDisableOn=e.commenting.date;delete e.commenting;e.workflowState=this._getWorkflowStateForString(e.workflow.state);e.publishOn=e.workflow.date;delete e.workflow;e.tags=e.tags||[];e.categories=e.categories||[];delete e.id;delete e.gallery;l.Lang.isObject(e.clickthroughUrl)&&(e.clickthroughUrl=e.clickthroughUrl.url);l.Squarespace.ContentItemUtils.sanitizeDataForCustomType(e,this.getCustomTypeConfiguration(),this);e.excerpt&&e.excerpt.html&&p.shouldTrimExcerpt(e.excerpt.html)&&(e.excerpt.html=p.trimExcerptHTML(e.excerpt.html));return e},_getWorkflowStateForString:function(e){if("published"===e)return l.Squarespace.WorkflowStates.PUBLISHED;if("scheduled"===e)return l.Squarespace.WorkflowStates.SCHEDULED;if("needsreview"===e)return l.Squarespace.WorkflowStates.NEEDS_REVIEW;if("draft"===e)return l.Squarespace.WorkflowStates.DRAFT},_getTemplateContext:function(){var i=this.get("model").toJSON();var e=this.get("model").get("collectionId");var n=r.isFeatureEnabled(o.NESTED_CATEGORIES);l.Squarespace.ContentCollectionCache.getCollectionById(e,function(e){var t="products"===e.get("typeName");var a=n&&t?"/p/":"/";i.urlPrefix="/"+e.get("urlId")+a;i.collectionType=e.get("typeName")||c("Collection")});i.presentationName=this.getPresentationName();i.model=this.get("model");i.editor=this;i.onlySetAttrsOnSave=this.get("onlySetAttrsOnSave");return i},getTemplateContext:function(){var e=this._getTemplateContext();l.Squarespace.ContentItemUtils.sanitizeTemplateContextForCustomType(e,this.getCustomTypeConfiguration());return e},getPresentationName:function(){var e=this.get("model");var t=e.get("recordType");return l.Squarespace.Enums.RecordType.titleForValue(t)},getCustomTypeConfiguration:function(){var e=this.get("model").get("customContent.customType");if(e){var t=n.getCustomType(e);if(t)return t}return null},_getDialogConfig:function(){var e=l.clone(this.get("editorConfiguration"));l.Squarespace.ContentItemUtils.setConfigurationForCustomType(e,this.getCustomTypeConfiguration(),this);e=l.merge({initialDataByReference:true},e);return e},validateFields:function(){var e=this.get("dialog");var t=e.getField("title");if(t){var a=t.get("data");if(l.Lang.isString(a)&&a.length>200)return{title:c("Title Can't Exceed 200 Characters")}}return null}},{ATTRS:{editorConfiguration:{value:{}},autoSaveAnnotation:{value:false},dialogConfig:{getter:"_getDialogConfig"},dialogConfigContext:{value:l.Squarespace.ContentItemEditorSettings},extendedDeleteMessage:{value:""},isDuplicateItemEditor:{value:false},collection:{}}})},"1.0",{requires:["squarespace-content-item-types-enum-record-type","squarespace-content-item-types-settings","squarespace-content-item-utils","squarespace-dialog-description","squarespace-enum","squarespace-model-editor","squarespace-models-content-collection","squarespace-models-content-item","squarespace-object-builder","squarespace-widgets-confirmation"]})},7568:function(e,t,a){var i=a(24).t;YUI.add("squarespace-content-item-types-enum-record-type",function(e){var t=function(e,a){this.values=e;for(var t=0;t<this.values.length;t++){var i=this.values[t];this[i[0]]=i[1]}var n=this;for(var s in a)(function(t){n[t]=function(){var e=a[t].apply(n,arguments);if(n.values.indexOf(e)>=0)return e[1];return e}})(s)};e.namespace("Squarespace.Enums").RecordType=new t([["TEXT",1,"text",i("Text")],["IMAGE",2,"image",i("Image")],["QUOTE",4,"quote",i("Quote")],["LINK",5,"link",i("Link")],["CHAT",6,"chat"],["AUDIO",7,"audio",i("Track")],["VIDEO",8,"video",i("Video")],["REVIEW",10,"review"],["STORE_ITEM",11,"store_item"],["EVENT",12,"event",i("Event")],["THREAD",13,"thread"],["GALLERY",14,"gallery",i("Gallery")],["BINARY",15,"binary"],["CSSASSET",16,"css-asset"],["TWEAKASSET",17,"tweak-asset"],["DIGITALGOOD",18,"digital-good"],["ATTACHMENT",19,"attachment"],["EXPORT_WORDPRESS",20,"wordpress-export"],["EXPORT_INTERNAL",21,"json-export"],["TWEET",50,"tweet"],["RSS",51,"rss"],["CHECKIN",52,"checkin"],["DELICIOUS",53,"delicious"],["KBARTICLE",54,"kbarticle","KBArticle"]],{valueForString:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][2]===e)return this.values[t];return null},stringForValue:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][1]===e)return this.values[t][2];return null},titleForValue:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][1]===e)return this.values[t][3];return null}})},"1.0",{requires:[]})},7569:function(e,t,a){var r=a(5808);var o=a(24).t;var l=a(8708);var c=a(1236);var d=a(2021);var u=a(1949);var g=a(1309);var p=a(4129);var h=a(3448);var f=a(8709);var m=a(6250);var v=a(4119);var b=a(207);var i=a(8730);var y=a(1715);var S=i.getValueFnByKey;var q=["strong","em","underline","link","divider","align",["blockType",{availableBlockTypes:["p2","h1","h2","h3","code"]}],"divider","blockQuote","orderedList","unorderedList","divider","strikethrough","superscript","subscript","divider","indent","outdent","undo","redo","clearFormatting"];YUI.add("squarespace-content-item-types-settings",function(n){var t=n.namespace("Squarespace").ContentItemEditorSettings={};t.fields={};t.fields.url={ctor:n.Squarespace.DialogFields.Url,config:{name:"urlId",prefix:"{urlPrefix}",filter:u.URL_SLUG_WITH_SLASH,additionalValidators:["optional-on-creation","url-slug-required-if-exists","url-slug-max-length"],"strings.title":S("url"),"strings.description":S("whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove"),"strings.placeholder":"…"}};t.fields.author={ctor:n.Squarespace.DialogFields.Select,config:{name:"authorId",prefix:"","strings.title":o("Author"),className:"thin dark",icon:"user",options:{$valueFn:function(e){var t=[];if(Static.SQUARESPACE_CONTEXT.memberAccountNames)for(var a in Static.SQUARESPACE_CONTEXT.memberAccountNames)t.push({value:a,label:n.Escape.html(Static.SQUARESPACE_CONTEXT.memberAccountNames[a].displayName)});else t.push({value:0,label:o("Automatic")});e.authorId&&!Static.SQUARESPACE_CONTEXT.memberAccountNames[e.authorId]&&(e.author?t.push({label:n.Escape.html(e.author.displayName),value:e.authorId}):t.push({value:e.authorId,label:""}));return t}},defaultValue:{$valueFn:function(){return Static.SQUARESPACE_CONTEXT.authenticatedAccount.id}}}};t.fields.sourceUrl={ctor:n.Squarespace.DialogFields.Text,config:{name:"sourceUrl",strings:{title:o("Source URL"),placeholder:o("http://…"),description:S("sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading")},className:"thin"}};t.fields.wysiwyg={ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:227,classNames:"major"}};t.fields.layout={$when:function(e){return!e.disableLayout},ctor:n.Squarespace.DialogFields.Layout,config:{name:"body",contentItem:{$valueFn:function(e){return e.model},$dontRecurse:true},itemClass:{$valueFn:function(e){return e.model.name}}}};t.fields.excerpt={ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarOptions:q,type:d.SchemaTypes.CLASSIC,editorHeight:147,classNames:"major",title:o("Excerpt"),"strings.title":o("Excerpt"),description:o("Excerpts are used most often on the {collectionType|lower} list page."),preserveWhitespace:false}};t.fields.mainImage={ctor:{$valueFn:function(e){if(e.recordType===n.Squarespace.RecordType.STORE_ITEM)return n.Squarespace.DialogFields.FileImage;return n.Squarespace.DialogFields.FileImageLicensed}},config:{contentType:"image",name:"mainImage",width:250,height:250,square:true,imageDestination:y.CONTENT_ITEM_MAIN_IMAGE,mode:g.ITEM,strings:{title:o("Thumbnail Image")},asyncUploadUrlFn:{$valueFn:function(e){return e.model.getMainImageUploadUrl.bind(e.model)}},preflight:{$valueFn:function(e){var i=e.model;return function(a){if(i.get("id"))a();else{i.once("save",function(){var t=e.editor.get("dialog").getField("mainImage");i.getMainImageUploadUrl(function(e){t.uploader.set("uploadURL",e);a()})},i);e.editor.autoSave()}}}}}};t.fields.clickthroughUrl={ctor:n.Squarespace.DialogFields.CreateLink,config:{name:"clickthroughUrl","strings.title":o("Clickthrough URL"),disableNewWindow:true}};t.fields.title={ctor:n.Squarespace.DialogFields.Text,countHeight:true,config:{name:"title",className:"large","strings.placeholder":S("enterTitle"),escapeText:true},$when:function(e){return!e.disableTitle}};t.fields.childItemsGrid={ctor:n.Squarespace.DialogFields.ContentItemGrid,config:{name:"gallery",width:300,height:340,contentItemImageOptions:{showWorkflowState:false,showActionOverlay:true,actionOverlayButtons:[n.Squarespace.ActionOverlayButtons.EDIT_IMAGE,n.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showActionTray:false,acceptTypes:["image","video"],uploadPreflight:{$valueFn:function(t){var a=t.model;return function(e){if(a.get("id"))e();else{a.once("save",function(){e()},a);t.editor.autoSave()}}}}}};t.fields.tags={ctor:n.Squarespace.DialogFields.Stringset,config:{mode:"input",requestUrl:"/api/commondata/GetAutoCompleteTags",name:"tags",title:o("Tags"),maxMemberChars:c.MAX_TAG_LENGTH,addText:o("Click to add tags."),emptyText:o("No tags added."),memberClass:"tag",editorLabel:o("Add Tags"),description:o("Click to edit tags."),collectionId:"{collectionId}"}};t.fields.categories={ctor:n.Squarespace.DialogFields.Stringset,config:{mode:"select",name:"categories",title:o("Categories"),requestUrl:"/api/commondata/GetCollectionCategories",maxMemberChars:c.MAX_CATEGORY_LENGTH,addText:o("Click to add categories."),emptyText:o("No categories added."),memberClass:"category",editorLabel:o("Pick Categories"),description:o("Click to choose categories."),canAddMembers:true,addMemberText:o("Create Category"),collectionId:"{collectionId}"}};t.fields.productVariantsPricingPlaceholder={ctor:n.Squarespace.DialogFields.VariantsPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Pricing & Variants")}};t.fields.productDigitalPricingPlaceholder={ctor:n.Squarespace.DialogFields.DigitalPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Pricing")}};t.fields.productGiftCardPricingPlaceholder={ctor:n.Squarespace.DialogFields.GiftCardPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Values")}};t.fields.featured={ctor:n.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":S("featured"),"strings.description":S("someTemplatesAndBlocksWillHighlightFlaggedAsFeatured")}};t.fields.passthrough={ctor:n.Squarespace.DialogFields.Check,name:"passthrough",config:{"strings.title":S("titleShouldLinkToSourceUrl")}};t.groups={type:"splitter"};t.groups.tagging={type:"stack",fields:[{$include:"fields.tags"},{$include:"fields.categories"}]};t.groups.commenting={ctor:n.Squarespace.DialogFields.LegacyStateflow,config:{name:"commenting",allowNever:true,states:{allow:{title:o("Comments On"),optionDesc:S("commentsAreAllowedOnThis"),stateDesc:o("Disable comments [DURATION].")},disable:{title:o("Comments Off"),optionDesc:o("No comments allowed."),stateDesc:o("No comments allowed.")}},stateOrder:["allow","disable"]}};t.groups.publishingWorkflow={ctor:n.Squarespace.DialogFields.LegacyStateflow,config:{name:"workflow",states:{published:{title:o("Published"),optionDesc:S("publishThisNow"),stateDesc:o("Published on [DATE].")},scheduled:{title:o("Scheduled"),optionDesc:S("publishThisInTheFuture"),stateDesc:o("Publish [DURATION].")},needsreview:{title:o("Needs Review"),optionDesc:S("markThisForReview"),stateDesc:S("willBeAddedToReviewQueue")},draft:{title:o("Draft"),optionDesc:S("saveThisForLaterEditing"),stateDesc:S("thisWillNotBeVisible")}},stateOrder:["published","scheduled","needsreview","draft"]}};t.tabs={};t.tabs.primary={};t.tabs.primary.base={tabTitle:o("Content"),fields:[{type:"splitter",countHeight:true,fields:[{$include:["groups.tagging",{width:.36}],$update:{tags:{style:"thin"}}},{$include:"groups.commenting",$concat:true,$update:{".commenting":{width:.29},statepicker:{direction:"up",style:"minor"}}},{$include:"groups.publishingWorkflow",$concat:true,$update:{".workflow":{width:.35},statepicker:{direction:"up",style:"minor"}}}]}]};t.tabs.primary.text={icon:p.getIconUrl("text",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.image={icon:p.getIconUrl("image",24,"light-solid"),fields:[{type:"splitter",fields:[{ctor:n.Squarespace.DialogFields.FileImageLicensed,config:{height:248,width:.35,constrainMethod:"contain",contentType:"image",mode:g.ITEM,name:"mainImage",uploadMessage:o("Add a thumbnail image"),title:"",description:"",imageDestination:y.CONTENT_ITEM_MAIN_IMAGE,asyncUploadUrlFn:{$valueFn:function(e){return e.model.getMainImageUploadUrl.bind(e.model)}}}},{type:"stack",width:.65,fields:[{$include:["fields.title",{"config.strings.placeholder":o("Title")}]},{$include:["fields.wysiwyg",{"config.editorHeight":322}]}]}]}]};t.tabs.primary.quote={icon:p.getIconUrl("quote",24,"light-solid"),fields:[{type:"textarea",name:"quote",height:140,countHeight:true,title:o("Enter a quote…"),titleStyle:"inline",style:"title"},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarOptions:q,type:d.SchemaTypes.CLASSIC,editorHeight:227,classNames:"major"}}]};t.tabs.primary.link={icon:p.getIconUrl("link",24,"light-solid"),fields:[{$include:["fields.title",{"config.strings.placeholder":o("Enter a link title…")}]},{$include:["fields.title",{"config.name":"url","config.strings.placeholder":o("Enter a link URL…")}]},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.video={icon:p.getIconUrl("video",24,"light-solid"),fields:[{type:"splitter",fields:[{type:"stack",width:.3,fields:[{ctor:n.Squarespace.DialogFields.Description,config:{name:"customThumbDescription",text:o("<strong>Custom Thumbnail</strong> Upload an image to be used with the image overlay.")}},{$include:["fields.mainImage",{"strings.title":"","config.height":220,"config.width":220,"config.contentLabel":o("video thumbnail")}]},{ctor:n.Squarespace.DialogFields.Description,config:{name:"automaticThumbDescription",text:""}},{name:"overlay",ctor:n.Squarespace.DialogFields.Check,config:{"strings.title":o("Use Thumbnail")}}]},{type:"stack",width:.7,fields:[{ctor:n.Squarespace.DialogFields.Oembed,config:{name:"oembed",filter:"video","strings.description":o("<strong>Paste the URL</strong> of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.")}},{$include:"fields.title"},{$when:function(e){return t.tabs.primary.video.isLayoutField(e.body)},$include:["fields.layout",{height:190}]},{$when:function(e){return!t.tabs.primary.video.isLayoutField(e.body)},$include:["fields.wysiwyg",{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:217,classNames:"major"}}]}]}]}],isLayoutField:function(e){return n.Lang.isValue(e)&&n.Lang.isValue(e.layout)||"4fa14d3ce4b08a53fa26468e"===Static.SQUARESPACE_CONTEXT.website.id}};t.tabs.primary.event={icon:p.getIconUrl("event",32,"light-solid"),fields:[{$include:["fields.title",{title:o("Enter a event title..")}]},{type:"splitter",countHeight:true,fields:[{ctor:n.Squarespace.DialogFields.DateTimePicker,config:{name:"startDate",direction:"down",width:.5,"strings.title":"","strings.description":o("Start on [DATE]."),dateFormat:"llllLT"}},{ctor:n.Squarespace.DialogFields.DateTimePicker,config:{name:"endDate",direction:"down",width:.5,dateFormat:"llllLT","strings.title":"","strings.description":o("End on [DATE]."),"strings.errorMessage":o("End time must be later than start time."),validator:function(e){var t=e;var a=this.get("dialog").getField("startDate").get("data");if(null===t)return true;var i=1e3*Math.floor(a/1e3);var n=1e3*Math.floor(t/1e3);if(n<i)return false;return true}}}]},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.gallery={icon:p.getIconUrl("gallery",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.childItemsGrid",{"config.width":739,"config.height":135}]},{$include:["fields.layout",{height:150}]}]};t.tabs.primary.audio={icon:p.getIconUrl("audio",24,"light-solid"),fields:[{type:"splitter",height:600,fields:[{type:"stack",width:.35,fields:[{ctor:n.Squarespace.DialogFields.FileAudio,disableEdit:{$valueFn:function(e){return n.Lang.isValue(e.model.get("proxyForId"))}},height:248,constrainMethod:"contain",contentType:"audio",mode:g.ITEM,name:"audioTrack",uploadMessage:o("Add an audio track")},{$include:["fields.title",{"config.name":"artistName","config.strings.title":o("Artist Name"),"config.strings.placeholder":o("Enter an artist name…"),"config.className":"thin","config.submitOnEnter":true}]}]},{type:"stack",width:.65,height:600,fields:[{$include:["fields.title",{"config.submitOnEnter":true,"config.strings.placeholder":S("enterTitle")}]},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:300,classNames:"major"}}]}]}]};t.tabs.primary.product={};t.tabs.primary.product.base={icon:p.getIconUrl("products",32,"light"),fields:[{type:"splitter",fields:[{type:"stack",width:.33,fields:[{$include:["fields.childItemsGrid",{"config.height":392,"config.contentItemImageOptions.actionOverlayButtons":[n.Squarespace.ActionOverlayButtons.IMAGE_INFO,n.Squarespace.ActionOverlayButtons.EDIT_IMAGE,n.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]}]},{type:"stack",width:.67,verticalSpan:true,fields:[{$include:["fields.title",{"config.strings.placeholder":S("enterName")}]},{name:"pricingPlaceholder"},{type:"stack",float:"none",fields:[{ctor:n.Squarespace.DialogFields.Check,config:{name:"isSubscribable","strings.title":o("Subscription Product"),"strings.description":o("Charges customers on a recurring basis.")+" <a href="+b.COMMERCE_SUBSCRIPTIONS+' target="_blank"class="learn-more-link" onclick="event.stopPropagation();">'+o("Learn more")+"</a>"},$when:function(e){return v.isSubscribableProductTypeForMerchant(e.structuredContent.productType)}},{ctor:n.Squarespace.DialogFields.SubscriptionDetailsPlaceholder,config:{name:"subscriptionDetails"},$when:function(e){return v.isSubscribableProductTypeForMerchant(e.structuredContent.productType)}}]},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarOptions:q,type:d.SchemaTypes.CLASSIC,editorHeight:156,classNames:"major",title:o("Brief Description")}}]}]},{type:"splitter",fields:[{$include:["groups.tagging",{width:.39}]},{ctor:n.Squarespace.DialogFields.LegacyStateflow,direction:"up",style:"minor",name:"workflow",width:.5,states:{published:{title:o("Visible"),optionDesc:o("Currently visible in your storefront."),stateDesc:o("Made visible on [DATE].")},scheduled:{title:o("Scheduled"),optionDesc:o("Remains hidden from your storefront until scheduled date."),stateDesc:o("Will be visible [DURATION].")},draft:{title:o("Hidden"),optionDesc:o("Not visible in your storefront."),stateDesc:o("Not visible in your storefront.")}},stateOrder:["published","scheduled","draft"]}]}]};t.tabs.product={};t.tabs.product.variantsPhysical={tabTitle:o("Pricing & Variants"),name:"variants_tab",fields:[{ctor:n.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:true,measurementStandard:{$valueFn:function(){return n.Squarespace.Context.getInstance().get("websiteSettings").get("storeSettings").measurementStandard}},productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.variantsService={tabTitle:o("Pricing & Variants"),name:"variants_tab",fields:[{ctor:n.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:false,productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.variantsGiftCard={tabTitle:o("Values"),name:"values_tab",fields:[{ctor:n.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:false,isGiftCard:true,productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.upload={tabTitle:o("Pricing & Upload"),name:"variants_tab",fields:[{type:"splitter",fields:[{ctor:n.Squarespace.DialogFields.File,config:{name:"digitalGoods",title:o("Digital Goods"),contentType:"file",recordType:n.Squarespace.RecordType.DIGITALGOOD,childAsset:true,mode:g.CHILD,maxSize:300,childType:l.DIGITAL_GOODS,constrainMethod:"contain",height:200,width:.27,description:o("Customers will receive this file after purchase."),preflight:{$valueFn:function(n){var s=n.model;return function(e){var t=n.editor;var a=t.get("dialog").getField("digitalGoods");var i=function(){var e=a.get("data");e&&e.set("parentId",s.get("id"));a.refreshItemPostData();a.set("uploadUrl","/api/content/product-pages/"+s.get("collectionId")+"/products/"+s.get("id")+"/digital-good")};if(s.get("id")){i();s.clearChildGroup("digitalGoods",e)}else{s.once("save",function(){i();e&&e()});t.autoSave()}}}}}},{type:"stack",width:.5,fields:[{ctor:n.Squarespace.DialogFields.MoneyText,width:.5,name:"priceCents","strings.title":o("Price")},{ctor:n.Squarespace.DialogFields.MoneyText,width:.5,name:"salePriceCents","strings.title":o("Sale Price")},{ctor:n.Squarespace.DialogFields.Check,width:.5,name:"onSale",config:{"strings.title":o("On Sale"),"strings.description":o("Charge customers the sale price.")}}]}]}]};t.tabs.product.additionalInfo={tabTitle:o("Additional Info"),name:"additionalInfo",fields:[{ctor:n.Squarespace.DialogFields.Description,config:{title:o("Additional Info"),text:o("Put additional info on your product page: a longer description, videos, or other content."),padding:[0,10]}},{$include:["fields.layout",{height:310}]}]};t.tabs.product.workflow={tabTitle:o("Form"),name:"workflow",fields:[{type:"splitter",fields:[{ctor:n.Squarespace.DialogFields.Description,config:{width:.5,name:"additionalInformationDescription",title:o("Collect Additional Information"),text:o("Create a Product Form that shoppers will be prompted to fill out when adding this product to their cart. You can create a new custom Product Form for this product or select to apply an existing Product Form you have created for other products.")}},{ctor:n.Squarespace.DialogFields.FormSelector,config:{width:.5,name:"additionalFieldsFormId",formType:n.Squarespace.FormType.PRODUCT}}]}]};t.tabs.options={};t.tabs.options.default={tabTitle:o("Options"),name:"options",scroll:true,fields:[{type:"splitter",countHeight:true,fields:[{$include:["fields.mainImage",{width:.4}]},{type:"stack",width:.6,fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.passthrough",$when:function(e){return e.enablePassthrough}}]}]},{$include:"fields.excerpt",$when:function(e){return e.enableExcerpt}},{$include:"fields.featured",$when:function(e){return e.enableFeatured}}]};t.tabs.options.image=n.merge(t.tabs.options.default,{fields:[{type:"splitter",fields:[{type:"stack",fields:[{$include:["fields.url",{width:.6}]},{$include:["fields.author",{width:.4}]},{type:"splitter",fields:[{$include:["fields.sourceUrl",{"config.width":420}]},{$include:["fields.clickthroughUrl",{"config.width":284}]}]},{$include:"fields.featured"}]}]}]});t.tabs.options.video=t.tabs.options.audio=n.merge(t.tabs.options.default,{fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.featured",$when:function(e){return e.enableFeatured}}]});t.tabs.options.product=n.merge(t.tabs.options.default,{fields:[{type:"splitter",fields:[{$include:["fields.mainImage",{width:.35}]},{type:"stack",width:.65,fields:[{$include:["fields.url",{title:o("Product URL"),config:{name:"urlId",prefix:"{urlPrefix}",filter:u.URL_SLUG_WITH_SLASH,"strings.title":o("Product URL"),"strings.description":o("While Squarespace generates URLs for your products automatically, you can optionally create a custom URL."),"strings.placeholder":"…"}}]},{ctor:n.Squarespace.DialogFields.Check,config:{name:"useCustomAddButtonText","strings.title":o("Use Custom Add Button Label"),"strings.description":o('Default button label is "Add To Cart" and "Purchase" when express checkout is enabled.')}},{ctor:n.Squarespace.DialogFields.Text,config:{name:"customAddButtonText"}},{ctor:n.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":o("Featured Product"),"strings.description":o('Some templates and blocks will highlight products marked as "featured".')}}]}]}]});t.tabs.location={tabTitle:o("Location"),name:"Location",fields:[{type:"splitter",fields:[{ctor:n.Squarespace.DialogFields.Map,config:{name:"location",title:o("Enter a location…"),titleStyle:"inline",height:400,googleTrackingContext:{productPage:"location-tab",productSection:"panel"}}}]}]};var e={type:"splitter",fields:[{ctor:n.Squarespace.DialogFields.Description,config:{title:o("Social"),text:o("Select the accounts below you would like to update when you post this item.")}},{name:"shareStates",ctor:n.Squarespace.DialogFields.ItemPush,config:{pushedServices:{$valueFn:function(e){return e.pushedServices}},published:{$valueFn:function(e){return e.workflowState===n.Squarespace.WorkflowStates.PUBLISHED}},pendingPushedServices:{$valueFn:function(e){return e.pendingPushedServices}},models:{$valueFn:function(){return n.Squarespace.Models.ConnectedAccounts.loadFromStore()},$dontRecurse:true},recordType:{$valueFn:function(e){if(e.model)return e.model.get("recordType");return null}}}}]};t.tabs.social={tabTitle:o("Share"),name:"social",scroll:true,fields:[e]};var a={ctor:n.Squarespace.DialogFields.ReactDialogField,config:{component:h,name:"createEmailDraftComponent",props:{model:{$valueFn:function(e){return e.model.toJSON()}}}}};t.tabs.share={tabTitle:o("Share"),name:"share",fields:[a,e]};function i(e){return""===e}function s(){var e=m.getState();var t={seoDescription:e.seoDescription,seoImageId:e.seoSocialSharingImageId,seoTitle:e.seoTitle,seoHidden:e.isHidden};t=r(t,i);return{isDirty:e.isDirty,seoData:t}}t.tabs.seo={tabTitle:o("SEO"),name:"seo",reactData:{component:f,props:{collectionId:{$valueFn:function(e){return e.id}},getData:{$valueFn:function(){return s}},isContentItem:true}}};t.tabs.seoSocial={tabTitle:o("Social"),name:"seoSocial",reactData:{component:f,props:{collectionId:{$valueFn:function(e){return e.id}},getData:{$valueFn:function(){return s}},isContentItem:true,isSocialTab:true}}};t.buttons=[{type:"cancel",title:o("Cancel")},{type:"remove",title:o("Delete")},{$value:{type:"duplicate",title:o("Duplicate")},$when:function(e){var t=e.editor&&e.editor.get("editorConfiguration")||{};var a=true!==t.minimal;var i=n.Lang.isString(e.id);return a&&i}},{type:"saveAndClose",title:{$valueFn:function(e){if(e.onlySetAttrsOnSave)return o("Apply");return o("Save")}}},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:o("Save & Publish")},$when:function(e){if(e.onlySetAttrsOnSave)return false;return-1!==[n.Squarespace.WorkflowStates.DRAFT,n.Squarespace.WorkflowStates.NEEDS_REVIEW].indexOf(e.workflowState)}}]},"1.0",{requires:["squarespace-context","squarespace-dialog-check","squarespace-dialog-content-item-grid","squarespace-dialog-create-link","squarespace-dialog-datetime-picker","squarespace-dialog-description","squarespace-dialog-digital-pricing-placeholder","squarespace-dialog-giftcard-pricing-placeholder","squarespace-dialog-subscription-details-placeholder","squarespace-dialog-fields","squarespace-dialog-file-audio","squarespace-dialog-file-image","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-form-selector","squarespace-dialog-html","squarespace-dialog-item-push","squarespace-dialog-layout","squarespace-dialog-legacy-stateflow","squarespace-dialog-map","squarespace-dialog-money-text","squarespace-dialog-oembed","squarespace-dialog-pricing-placeholder","squarespace-dialog-select","squarespace-dialog-stringset","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-variants-pricing-placeholder","squarespace-dialog-variants-table","squarespace-dialog-wysiwyg","squarespace-enum","squarespace-models-connected-accounts","squarespace-react-dialog-field","squarespace-tab-view"]})},7570:function(e,t,a){var s=a(24).t;var r=a(229);YUI.add("squarespace-dialog-content-item-grid",function(i){i.namespace("Squarespace");var n=i.Squarespace.DialogFields.ContentItemGrid=i.Base.create("contentItemGridField",i.Squarespace.DialogField2,[i.WidgetParent],{initializer:function(e){this._initializeDataAndGrid();this.after("dataChange",this._initializeDataAndGrid,this);this._edited=false},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._contentItemGrid&&this._contentItemGrid.destroy()},renderUI:function(){n.superclass.renderUI.call(this);var e=this._loadingEl=i.Node.create('<div class="loading-state"></div>');var t=this._loadingSpinner=new i.Squarespace.Spinner({size:50,color:"dark",render:e});t.spin();this.get("contentBox").append(e);this.get("hasFullScreenToggle")&&(this._nodeExpander=this.get("contentBox").plug(i.Squarespace.Plugins.NodeExpander).NodeExpander)},bindUI:function(){n.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this.on("dataChange",function(e){this._contentItemGrid.set("model",e.newVal)},this);this.on("uploadPreflightChange",function(e){this._contentItemGrid.set("uploadPreflight",e.newVal)});if(this.get("hasFullScreenToggle")){var t=this.get("dialog");if(i.Lang.isValue(t)){var a="sqs-node-expander-active";this._nodeExpander.on("expand-start",function(e){t.el.addClass(a);t.overlayEl.addClass(a)},this);this._nodeExpander.on("contract-end",function(e){t.el.removeClass(a);t.overlayEl.removeClass(a)},this)}this._nodeExpander.on("expand-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize")*(4/3));this._contentItemGrid.requestImageRenderingSync()},this);this._nodeExpander.on("contract-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize"));this._contentItemGrid.requestImageRenderingSync()},this)}},syncUI:function(){n.superclass.syncUI.call(this);this.get("dataLoaded")?this._setLoadedState():this._setLoadingState()},didDataChange:function(){return this._edited},show:function(){n.superclass.show.call(this);this.syncUI()},_initializeDataAndGrid:function(){this.set("dataLoaded",false);var t=this.get("data");var e={};var a=this.get("pageSize");i.Lang.isValue(a)&&(e.limit=a);if(t.isNew()){this._buildContentItemGrid();this.set("dataLoaded",true)}else if(t instanceof i.Squarespace.Models.ContentItem){this.get("acceptTypes")||this.set("acceptTypes",["image"]);this._buildContentItemGrid();this.set("dataLoaded",true)}else t.items.load(e,i.bind(function(e){e&&new i.Squarespace.Widgets.Alert({"strings.title":s("Missing Content"),"strings.message":s("We could not locate this content.")});this.get("acceptTypes")||this.set("acceptTypes",t.getTemplateConfiguration().get("acceptTypes"));this._buildContentItemGrid();this.set("dataLoaded",true)},this))},_buildContentItemGrid:function(){var e=this._contentItemGrid;e&&e.destroy();this._contentItemGrid=new i.Squarespace.ContentItemGrid({model:this.get("data"),collectionConfiguration:this.get("collectionConfiguration")||new i.Model({acceptTypes:this.get("acceptTypes")}),itemEditorOptions:{variant:this.get("itemEditorVariant"),parentDialog:this.get("dialog"),anchorToImageWidget:true,defaultWorkflowState:i.Squarespace.WorkflowStates.PUBLISHED},selectorAnchorNode:this.get("selectorAnchorNode"),imageSize:this.get("imageSize"),minMargin:10,showEmptyState:false,dragRegion:this.get("contentBox"),uploadPreflight:this.get("uploadPreflight"),contentItemImageOptions:this.get("contentItemImageOptions"),showAddIcon:this.get("showAddIcon"),loadByViewport:false,showActionTray:this.get("showActionTray")});this._registerEvent(this._contentItemGrid.after(["addChild","addChildComplete","removeChild","childEdited"],function(){this.fire("edited")},this))},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading");var e=this._contentItemGrid;e.get("rendered")?e.syncUI():e.render(this.get("contentBox"))},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=i.later(500,this,function(){this._loadingEl.setStyle("marginTop",this.get("contentBox").get("offsetHeight")/2-this._loadingSpinner.get("size")/2);this.get("boundingBox").addClass("content-loading")})}},{CSS_PREFIX:"sqs-content-item-grid-field",ASYNC_DATA:true,ATTRS:{data:{getter:function(e){if(!(e instanceof i.Squarespace.Models.ContentCollection||e instanceof i.Squarespace.Models.ContentItem)){var t=s("Transient Gallery {transientGalleryId}",{transientGalleryId:i.Squarespace.Utils.getGuid()});return new i.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:r.GALLERY_BLOCK,ordering:i.Squarespace.CollectionOrdering.USER,title:t,navigationTitle:t,enabled:true,urlId:i.Squarespace.Utils.getGuid()})}return e},validator:function(e){return e instanceof i.Squarespace.Models.ContentCollection||e instanceof i.Squarespace.Models.ContentItem}},dataLoaded:{value:false},acceptTypes:{},collectionConfiguration:{},contentItemImageOptions:{value:{showActionOverlay:true,actionOverlayButtons:[i.Squarespace.ActionOverlayButtons.EDIT_IMAGE,i.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}},itemEditorVariant:{valueFn:function(){return i.Squarespace.ContentItemEditorVariants.MINIMAL}},selectorAnchorNode:{valueFn:function(){return this.get("contentBox")}},cloneInitialData:{value:false},uploadPreflight:{},showAddIcon:{value:false},imageSize:{value:105},pageSize:{value:null},hasFullScreenToggle:{value:false},showActionTray:{value:true},type:{}}})},"1.0",{requires:["base","squarespace-content-item-grid","squarespace-content-item-types-editor","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-node-expander","squarespace-spinner","squarespace-util","squarespace-widgets-alert","widget-parent"]})},7571:function(e,t,a){var i=a(24).t;var o=a(1595);var s=a(2028);var n=a(1925);var l=a(596);var d=a(869).default;var u=a(1516);var g=a(1579);var p=a(516);var h=a(599);var f=a(390);YUI.add("squarespace-content-item-grid",function(c){c.namespace("Squarespace");var t=46;var a=8;var r=c.Squarespace.ContentItemGrid=c.Base.create("ContentItemGrid",c.Squarespace.Widgets.SSWidget,[c.WidgetParent,c.WidgetChild,c.Squarespace.Mixins.ContentCollectionBulkActionable,c.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(e){if(!this.get("model"))throw new Error('ContentItemGrid: Missing attribute "model".');this.publish("itemSaved",{emitFacade:true,bubbles:true});this.publish("addChildComplete",{emitFacade:true});this._workflow=new c.Squarespace.LicensedAssets.Workflow},destructor:function(){this.get("model").get("destroyed")||this.get("model").items.detach(this.get("id")+"|*");this.get("rendered")&&this._ddDelegate.destroy();this._resizeEmitter&&this._resizeEmitter.destroy();this._uploader&&this._uploader.destroy();this._workflow.destroy();this._workflow=null},renderUI:function(){r.superclass.renderUI.call(this);if(this.get("loadByViewport")){var e=this.get("contentBox").ancestor(function(e){return e.getComputedStyle("overflowY").match(/scroll|auto/)});e&&!e.test("html,body")||(e=c.one(c.config.win));this._scrollEl=e}},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this.get("id");var a=this.get("model").items;this._setupDragBehaviors();this.on("*:adobe-image-editor-start",function(){this.set("keyBindingsEnabled",false);this.deselectAll()},this);this.on("*:adobe-image-editor-finish",function(){this.set("keyBindingsEnabled",true)},this);this.on("*:remove",function(e){this.removeItems(new c.ArrayList(e.target))},this);this.on("*:purchaseRequest",this._onPurchaseRequest,this);this.on("*:licensingDetails",this._onLicensingDetails,this);this._workflow.on("downloadRequest",this._onDownloadRequest,this);this._workflow.on("imagePicked",this._onImagePicked,this);this._resizeEmitter=new c.Squarespace.ResizeEmitter;this._resizeEmitter.on("resize",this._refreshStylesheet,this);this.after(["minMarginChange","imageSizeChange"],function(){this._refreshStylesheet();this._refreshImages()},this);this._ddDelegate.on("reorder:reordered",this._onDDReordered,this);c.on(t+"|keydown",this._onKeydown,c.config.doc,this);this.get("showActionTray")&&this.on("selectionChange",function(e){e.stopPropagation();this.updateActionTray()},this);this.on("*:onSelect",this._onSelect);this.get("showAddIcon")&&this.get("boundingBox").delegate("click",this.handleAddContentRequest,".add-item",this);e.delegate("click",function(e){this._uploader||this.handleAddContentRequest()},".empty-state",this);this.after(["addChild","removeChild"],function(){this._checkEmptyState();this._refreshStylesheet();c.soon(this._syncAddIcon.bind(this))},this);this._registerEvent(a.after(t+"|add",function(e){if(!e.model.get("id"))return;if(!e.onReorder&&!e.onUpload){this._addItemWidget(e.model);this.get("loadByViewport")&&this._loadItemImagesInViewport()}},this));this._registerEvent(a.after(t+"|remove",function(e){c.Lang.isValue(e.model)&&e.model.isLicensedAssetPreview()&&this._workflow.trackPreviewRemovalEvent(e.model.get("licensedAssetPreview").assetId);e.onReorder||this._removeItemWidget(e.model)},this));if(this.get("loadByViewport")){this._scrollEl.on("scroll",this._loadItemImagesInViewport,this);this._resizeEmitter.on("resize:end",this._loadItemImagesInViewport,this)}this._registerEvent(this.get("model").after("idChange",function(){this._uploader&&this._uploader.set("uploadURL",this._getUploadURL())},this))},_onSelect:function(e){var a=e.target;if(this.get("selected")>0){var i;if(e.shiftKey){i=this.get("selection");var t=this.toJSON();t=t.sort(function(e,t){var a=e.get("item").get("displayIndex");var i=t.get("item").get("displayIndex");return a-i});var n=t.map(function(e,t){if(i.indexOf(e)>-1)return t;if(e===a)return t;return null}).filter(function(e){return null!==e});var s=Math.min.apply(Math,n);var r=Math.max.apply(Math,n);for(var o=0;o<t.length;o++){var l=t[o];s<=o&&o<=r&&l.set("selected",1)}return}if(!e.shiftKey&&!e.ctrlKey&&!e.metaKey){i=this.get("selection");i.isEmpty()||i.each(function(e){if(e===a)return;e.set("selected",0)})}}a.set("selected",0!==a.get("selected")?0:1)},syncUI:function(){r.superclass.syncUI.call(this);var e=this.get("contentBox");this._clearElements();this._widgetMap={};var t=this.get("model");var a=t.items;this._stylesheet||(this._stylesheet=c.Node.create('<style type="text/css"></style>'));this.get("boundingBox").appendChild(this._stylesheet);var i=t.get("typeName");i&&e.addClass("collection-type-"+i);var n=this.get("collectionConfiguration").get("acceptTypes");var s=false;c.Array.each(n,function(e){var t=o.getCustomType(e);var a=!!t&&"image"===t.base;("image"===e||a)&&(s=true)});if(s){this._uploader=this._createUploader();this._uploader.render(e)}this._validateItemsDisplayIdx(a);a.each(function(e,t){this._addItemWidget(e)},this);this._ddDelegate.syncTargets();this._checkEmptyState();this._refreshStylesheet();if(this.get("showAddIcon")){this._addIconEl||(this._addIconEl=c.Node.create('<button class="add-item" tabindex="-1"></button>'));this._syncAddIcon();this.get("boundingBox").append(this._addIconEl)}this.get("loadByViewport")&&this._loadItemImagesInViewport();this._updateUploaderLimit()},_syncAddIcon:function(){var e=this.get("contentBox");this._addIconEl&&this._addIconEl.setStyle("marginRight",e.get("offsetWidth")-e.get("clientWidth"))},requestImageRenderingSync:function(){this.get("loadByViewport")&&this._loadItemImagesInViewport();this._refreshStylesheet();this.each(function(e){var t=e.get("contentBox").one("img");t&&t.loader&&t.loader.fire("refresh")},this)},_validateItemsDisplayIdx:function(e){var a=[];e.each(function(e,t){e.get("displayIndex")!==t&&a.push({item:e,displayIndex:t})});if(0===a.length)return;var t=this._shouldCommitDisplayIndexErrors(a[0].item);for(var i=0;i<a.length;i++){this.LOG.warn("Need to update %s with (old: %s) (new: %s)",a[i].item.get("id"),a[i].item.get("displayIndex"),a[i].displayIndex);if(t){this.LOG.warn("Committing display index change...");a[i].item.set("displayIndex",a[i].displayIndex);a[i].item.save()}}c.Squarespace.Logger.log("updatedDisplayIndex",{committed:t,modelName:this.get("model").name,numberOfObjectsToUpdate:a.length})},_shouldCommitDisplayIndexErrors:function(e){return e.get("recordType")!==c.Squarespace.RecordType.STORE_ITEM},removeItems:function(e){var a=this.get("model");var i=this.get("onDelete");var n=function(){return null};var t=c.bind(function(){var t=[];e.each(function(e){if(e.get("item").get("id")){t.push(e.get("item"));e.remove()}},this);t.length>0&&a.items.removeItems(t,n,i)},this);if(e.size()===a.items.size())t();else{var s=e.item(0).get("boundingBox");var r=[];while(c.Widget.getByNode(s)){var o=s.plug(c.Squarespace.PositionAnimator).positionAnimator;o.hold();r.push(o);s=s.next()}t();c.Array.each(r,function(e){e.release()})}this._updateUploaderLimit()},_onDownloadRequest:function(e){var t=e.request;var a=t.get("url");var i=t.get("licensedAssetPreview");var n=t.get("licensedAssetId");var s=null;if(c.Lang.isValue(this._lastActivePreview)){s=this._lastActivePreview.get("item").get("displayIndex");this.removeItems(new c.ArrayList(this._lastActivePreview))}this._saveFromUrl(a,i,n,s)},_onImagePicked:function(e){e.cloneItemId&&this._uploadPreflight(function(){var a=this.get("model");n.copy(e.cloneItemId,l.PUBLISHED,a.get("id")||null).then(function(e){var t=new c.Squarespace.Models.ContentItem(c.merge(e.data,{displayIndex:a.get("nextDisplayIndex")}));this.get("model").items.add(t)}.bind(this))}.bind(this))},_saveFromUrl:function(e,t,a,i){var n={};if(this._uploader){this._uploadImageProcessor(n);c.Lang.isValue(i)&&(n.postData.index=i);this._addImagePlaceholder(n);c.Lang.isValue(t)&&(n.postData.licensedAssetPreview=t);c.Lang.isValue(a)&&(n.postData.licensedAssetId=a);n.postData.fileUrl=e;this._uploadPreflight(function(){n.postData.collectionId=this.get("model").get("id");c.Data.post({url:this._getUploadURL(),data:n.postData,success:function(e){this._imageUploadComplete(n,e);this._uploader._processResponse(e,n)}},this)}.bind(this))}},_uploadPreflight:function(e){var t=this.get("uploadPreflight");c.Lang.isValue(t)?t(e):e()},_onPurchaseRequest:function(e){var t=e.target.get("item");var a=t.get("licensedAssetPreview");var i=t.get("assetUrl");this._lastActivePreview=e.target;this._workflow.showPurchaseDetails(a,i)},_onLicensingDetails:function(e){var t=e.target.get("item");var a=t.get("licensedAssetId");var i=t.get("assetUrl");this._workflow.showLicensingDetails(a,i)},_createNewContentItemAndShowEditor:function(e,t){var a=this.get("itemEditorOptions");if(e.customContent&&"licensed"===e.customContent.customType){this._lastActivePreview=null;this._workflow.showImagePicker();c.Lang.isFunction(t)&&t();return}e.recordType===c.Squarespace.RecordType.IMAGE&&c.Object.getValue(a,["variant"])===c.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT&&(a.variant=c.Squarespace.ContentItemEditorVariants.MINIMAL);if(e.recordType===c.Squarespace.RecordType.IMAGE&&a.variant===c.Squarespace.ContentItemEditorVariants.MINIMAL&&c.Lang.isValue(this._uploader)){this._uploader.openFileSelectDialog();c.Lang.isFunction(t)&&t();this._registerEvent(this._uploader.after(["uploadcomplete","uploadcancel"],function(){this._uploader.destroy(true);this._uploader=this._createUploader();this._uploader.render(this.get("contentBox"))},this));return}var i=this.get("model");var n;if(c.instanceOf(this.get("model"),c.Squarespace.Models.ContentCollection)){n=new c.Squarespace.Models.ContentItem(c.merge(e,{displayIndex:i.get("nextDisplayIndex"),collectionId:i.get("id")}));if(c.Squarespace.ContentItemUtils.isStandardGalleryItem(n,i)){n.save(function(){d.showCollectionItemSettingsEditor(n.getAttrs(),null,true);c.Lang.isFunction(t)&&t()});return}}else n=new c.Squarespace.Models.ContentItem(c.merge(e,{displayIndex:i.get("nextDisplayIndex"),collectionId:i.get("collectionId"),parentId:i.get("id")}));n.get("recordType")===c.Squarespace.RecordType.STORE_ITEM&&p.trackSelectProductType(h(n.getAttrs().structuredContent.getAttrs().productType),f.ProductEditor.YUI_EDITOR);var s=new(c.Squarespace.ContentItemEditorFactory.getEditor(n,this.get("itemEditorOptions")))({model:n});var r=n.on("save",function(e){this.fire("itemSaved");c.Object.getValue(e,"options.headers.X-AutoSave".split("."))||i.items.add(n)},this);s.on("visibleChange",function(e){if(!e.newVal){r.detach();n.get("unsaved")?n.destroy({remove:true}):n.isNew()&&n.destroy()}});var o=this.get("itemEditorOptions.defaultWorkflowState");o&&n.set("workflowState",o);s.on("visibleChange",function(e){e.newVal?this.set("keyBindingsEnabled",false):this.set("keyBindingsEnabled",true)},this);if(c.instanceOf(this.get("model"),c.Squarespace.Models.ContentCollection)&&i.isNew()){this._registerEvent(i.on("save",function(){n.set("collectionId",i.get("id"));c.Lang.isFunction(t)&&t();s.show()}));i.save()}else{c.Lang.isFunction(t)&&t();s.show()}},_addItemWidget:function(e){var t=this.get("defaultChildType");var a=new t(c.merge(this.get("contentItemImageOptions"),{item:e,parentModel:this.get("model"),itemEditorOptions:this.get("itemEditorOptions"),preventLoad:this.get("loadByViewport")}));c.Do.before(function(){this.set("keyBindingsEnabled",false);this.deselectAll()},a,"editItem",this);c.Do.after(function(){c.Do.currentRetVal.on("visibleChange",function(e){e.newVal||this.set("keyBindingsEnabled",true)},this)},a,"editItem",this);this._widgetMap[e.get("clientId")]=a;this.add(a);return a},_removeItemWidget:function(e){var t=e.get("clientId");var a=this._widgetMap[t];if(a){a.remove();delete this._widgetMap[t]}},_loadItemImagesInViewport:function(){var e=this._scrollEl;var n=e.get("scrollTop");var s=n+e.get("region").height;var r=[];this.each(function(e){var t=e.get("boundingBox").get("region");var a=t.top;var i=t.bottom;if(a>=n&&a<=s||i>=n&&i<=s){r.push(e);e.set("preventLoad",false)}},this)},_insertChildBeforeUploader:function(t){this._uploader?t.after("render",function(){this._uploader.get("boundingBox").insert(t.get("boundingBox"),"before")},this):t.after("render",function(){var e=this.get("contentBox").get("children").filter(function(e){return e!==t.get("boundingBox").getDOMNode()});e.isEmpty()||e.item(e.size()-1).insert(t.get("boundingBox"),"after")},this)},_createUploader:function(){var a=new c.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:true,autoUpload:true,fileFilters:[{description:i("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif"}],uploadLimit:this.get("uploadLimit")-this.size(),processFile:c.bind(this._uploadImageProcessor,this),addPlaceholder:c.bind(this._addImagePlaceholder,this),fileComplete:c.bind(this._imageUploadComplete,this),createJob:c.bind(this._createImageProcessingJob,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),uploadURL:this._getUploadURL()});a.after(this.get("id")+"|uploaderror",function(e){var t=e.fileData||a.fileDataFromFile(e.file);t.placeholder.setContent(a.makeDefaultErrorBlock(t));c.Widget.getByNode(t.placeholder).get("item").set("mediaProcessingState",c.Squarespace.MediaProcessingState.ERROR)});return a},_updateUploaderLimit:function(){this._uploader&&this._uploader.set("uploadLimit",this.get("uploadLimit")-this.size())},_doPreflightThenSetUploadURL:function(e){var t=this.get("uploadPreflight")||function(e){e()};t(function(){this._updateUploadURL();e()}.bind(this))},_updateUploadURL:function(){this.uploader&&this.uploader.set("uploadURL",this._getUploadURL())},_getUploadURL:function(){var e=this.get("model");var t=e.get("id");if(c.instanceOf(e,c.Squarespace.Models.ContentCollection))return"/api/galleries/"+t+"/images";return this._getChildItemsUploadURL()},_getChildItemsUploadURL:function(){var e=this.get("model");var t=e.get("id");var a=e.get("recordType");var i=e.get("collectionId");var n=s.getChildImageUploadUrl({recordType:a,parentId:t,collectionId:i});return n},_checkEmptyState:function(){this.isEmpty()?this._renderEmptyState():this._removeEmptyState()},_renderEmptyState:function(){var e=this.get("contentBox");e.addClass("empty");if(this.get("showEmptyState")){e.addClass("show-empty-state");var t=this.get("strings.emptyTitle");var a=this.get("strings.emptyDesc");if(this._uploader)this._uploader.set("selectButtonLabel",'<div class="title">'+t+'</div><div class="desc">'+a+"</div>");else{this._emptyStateEl||(this._emptyStateEl=c.Node.create('<div class="empty-state"><div class="icon"></div><div class="text"><div class="title">'+t+'</div><div class="desc">'+a+"</div></div></div>"));e.append(this._emptyStateEl)}}},_removeEmptyState:function(){var e=this.get("contentBox");if(this.get("showEmptyState")){e.removeClass("show-empty-state");this._uploader?this._uploader.set("selectButtonLabel",this.get("strings.uploadText")):this._emptyStateEl&&this._emptyStateEl.inDoc()&&this._emptyStateEl.remove()}this.get("contentBox").removeClass("empty")},_refreshStylesheet:function(){var e=this.get("boundingBox");var t=e.get("offsetWidth");var a=this.get("defaultChildType");var i="";if(this.isEmpty()){i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader { min-width: 100%; width: 100%; height: 100%; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: 100%; height: 100%; margin: 0 auto; padding: 0; } "}else{var n=this.get("imageSize");var s=this.get("minMargin");var r=Math.floor(t/(n+2*s));var o=100/r;n=Math.ceil(t/r)-2*s;var l="."+a.CSS_PREFIX;i+=" #"+e.get("id")+".sqs-content-item-grid "+l+", .sqs-content-item-grid .sqs-uploader { min-width: "+n+"px; width: "+o+"%; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader { height: "+(n+2*s)+"px; }";i+=" #"+e.get("id")+".sqs-content-item-grid "+l+"-content { width: "+n+"px; height: "+n+"px; margin: 0 auto; padding: "+s+"px 0; }";i+=" #"+e.get("id")+".sqs-content-item-grid "+l+"-content .inside { width: "+n+"px; height: "+n+"px; }";i+=" #"+e.get("id")+" "+l+":nth-child("+r+"n) { margin-right: 0; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: "+n+"px; height: "+n+"px; margin: 0 auto; padding: "+s+"px 0; } "}this._stylesheet.set("innerHTML",i);this.fire("stylesheetUpdated")},_refreshImages:function(){this.get("contentBox").all("img[data-src]").each(function(e){e.refresh()})},_clearElements:function(){this._addIconEl&&this._addIconEl.inDoc()&&this._addIconEl.remove();this._stylesheet&&this._stylesheet.remove();this._uploader&&this._uploader.destroy();this._removeEmptyState();this.removeAll()},_setupDragBehaviors:function(){var e=this.get("defaultChildType");var t="."+e.CSS_PREFIX;var a={container:this.get("contentBox"),nodes:t,enableDragReorder:true,dragReorderConfig:{selectedClassSelector:t+".selected",enableGrouping:true},enableDragScroll:true,dragConfig:{groups:[this.get("id")]}};this.get("useBoundingBoxAsScrollNode")&&(a.scrollNode=this.get("boundingBox"));this._ddDelegate=new c.SQS.DDWrappers.DD.Delegate(a)},_onKeydown:function(e){if(!this.get("keyBindingsEnabled"))return;if(e.target.ancestor("input, textarea",true))return;if(!this.get("selection"))return;if(e.keyCode===t||e.keyCode===a){this.removeSelected();e.halt()}},_onDDReordered:function(e){var t=e.reordered;var a=t[0].newIndex;var i=c.Array.map(t,function(e){var t=e.node;return c.Widget.getByNode(t).get("item")},this);this.get("model").items.reorderItems(i,a)},_afterAddChild:function(e){c.WidgetParent.prototype._afterAddChild.call(this,e);this._insertChildBeforeUploader(e.child);this._ddDelegate.syncTargets()},_uploadImageProcessor:function(e){var t=this.get("model");var a=this._uploader.fileDataFromFile(e.file);a&&(e.item||(e.item=a.item));var i=e.index;if(e.item)i=e.item.get("displayIndex");else{var n=t.get("nextDisplayIndex");c.Lang.isNumber(i)&&t instanceof c.Squarespace.Models.ContentCollection?i+=n:i=n}var s={contentType:"image",process:"true",index:i};false;var r=t.get("id");var o=t.get("collectionId");if(o){s.collectionId=o;s.parentItemId=r||t.get("parentId")}else s.collectionId=r;e.postData=s;if(e.invalid){var l=e.invalid[0];new c.Squarespace.Widgets.Alert({"strings.title":l.title,"strings.message":l.message})}},_addImagePlaceholder:function(e){var t=new c.Squarespace.Models.ContentItem({mediaProcessingState:c.Squarespace.MediaProcessingState.QUEUED,displayIndex:e.postData.index,recordType:c.Squarespace.RecordType.IMAGE});this.get("model").items.add(t,{onUpload:true});e.item=t;var a=this._addItemWidget(t);this.get("loadByViewport")&&this._loadItemImagesInViewport();this._updateUploaderLimit();return a.get("contentBox").one(".inside")},_imageUploadComplete:function(e,t){if(e.item){var a=t.media[0];e.item.setAttrs(a);var i=d.getCollection(a.collectionId);if(u(i)){var n=this.get("model");g.trackUploadImage({imageId:a.id,productId:n.get("id"),productName:n.get("title"),productType:h(n.get("productType")),productSection:"product-editor",productEditor:f.ProductEditor.YUI_EDITOR})}}},_createImageProcessingJob:function(e,t){if(!t.job){false;return null}if(!e.item){if(window.SQUARESPACE_SENTRY){window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:"Image processing job response for image #"+(t&&t.media&&t.media[0]?t.media[0].id:"unknown"),level:"debug"});window.SQUARESPACE_SENTRY.captureMessage("Appears user canceled upload but image was still uploaded.")}return}e.item.setAttrs(t.media[0]);var a=new c.Squarespace.ImageProcessingJob(c.merge(t.job,{started:true}));a.set("collection",this.get("model"));return a},moveSelection:function(e){var a=[];this._moveSelectionAnimatorsToRelease=a;var i=this.get("defaultChildType");this.each(function(e){if(c.instanceOf(e,i)){var t=e.get("boundingBox").plug(c.Squarespace.PositionAnimator).positionAnimator;t.hold();a.push(t)}});c.Squarespace.Mixins.ContentCollectionBulkActionable.prototype.moveSelection.apply(this,arguments)},_uiMoveSelection:function(e,t){var a=this.get("contentBox");e=e.toJSON();t||(e=e.reduce(function(e,t){e.unshift(t);return e},[]));e.forEach(function(e){t?a.append(e.get("boundingBox")):a.prepend(e.get("boundingBox"))});var i=this._moveSelectionAnimatorsToRelease;if(!i){false;return}i.forEach(function(e){e.release()});var n=this.get("boundingBox");var s=null;s=t?n.get("scrollHeight"):0;n.anim({scroll:[0,s]}).run()}},{CSS_PREFIX:"sqs-content-item-grid",ASYNC_DATA:true,ATTRS:{defaultChildType:{value:c.Squarespace.ContentItemImage},model:{validator:function(e){return c.instanceOf(e,c.Squarespace.Models.ContentCollection)||c.instanceOf(e,c.Squarespace.Models.ContentItem)}},collection:{getter:function(){return this.get("model")}},collectionConfiguration:{setter:function(e){if(!c.instanceOf(e,c.Model))return new c.Model(e);return e}},uploadLimit:{value:250},contentItemImageOptions:{value:{}},imageSize:{value:100},minMargin:{value:20},strings:{value:{uploadText:i("Upload images"),emptyTitle:i("Add Items"),emptyDesc:i("This collection is empty. Click here to add your first item.")}},multiple:{value:true},showAddIcon:{value:false},showEmptyState:{value:true},windowScrollOnDrag:{value:false},scrollNode:{value:null},keyBindingsEnabled:{value:true},uploadPreflight:{},loadByViewport:{value:true},useBoundingBoxAsScrollNode:{value:false},onDelete:{value:null}}})},"1.0",{requires:["base","dd-delegate","event-key","squarespace-async-task-synchronizer","squarespace-content-collection-bulk-actionable","squarespace-content-item-image","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-item-utils","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog-content-selector","squarespace-dialog-flow","squarespace-dom-emitters-resize","@sqs/yui-dd-wrappers/drag-selection","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-licensed-assets-workflow","squarespace-logger","squarespace-models-content-collection","squarespace-models-content-item","squarespace-ss-widget","squarespace-ui-base","squarespace-uploader","squarespace-util-authenticated","squarespace-widgets-alert","widget-child","widget-parent"]})},7572:function(e,t,a){var o=a(24).t;var l=a(24).pluralize;var c=a(149);var i=a(596);YUI.add("squarespace-content-collection-bulk-actionable",function(r){r.namespace("Squarespace.Mixins");r.Squarespace.Mixins.ContentCollectionBulkActionable=r.Base.create("ContentCollectionBulkActionable",r.Base,[],{initializer:function(){this._renderHandle=r.Do.after(this._renderActionTray,this,"renderUI",this);this._bindHandle=r.Do.after(this._bindActionTray,this,"bindUI",this)},destructor:function(){r.Lang.isValue(this._actionTray)&&this._actionTray.destroy(true);this._actionTray=null;if(this._loadEventHandle){this._loadEventHandle.detach();this._loadEventHandle=null}this._renderHandle.detach();this._bindHandle.detach()},_renderActionTray:function(){var e=r.Squarespace.NodeUtils.getClosestScrollingAncestor(this.get("contentBox"));if(!e)return;var t=this.get("actionTrayCtor");this._actionTray=new t({"strings.title":o("{count} {label} Selected"),buttons:this._getTrayButtons(),render:e.ancestor(),scrollNode:e})},_bindActionTray:function(e){this._loadEventHandle=this.get("model").after("load",function(){r.Lang.isValue(this._actionTray)&&this._syncActionTray()},this);this.get("multiple")&&this.after("selectedChange",function(e){1!==e.newVal&&1!==e.prevVal||this._syncActionTray()})},_syncActionTray:function(){this._actionTray.set("buttons",this._getTrayButtons())},_getButtonConfig:function(){var e=this._buttonConfigCache;if(e)return e;this._buttonConfigCache={selection:{$valueFn:function(e){if(1===this.get("selected"))return{label:o("Unselect All"),action:this.deselectAll,context:this,className:"light no-frame"};return{label:o("Select All"),action:this.selectAll,context:this,className:"light no-frame"}}.bind(this)},moveToCollection:{label:o("Move"),action:this.moveSelected,context:this,className:"dark no-frame"},remove:{label:o("Remove"),action:this.removeSelected,context:this,className:"dark no-frame"},hide:{label:o("Hide"),action:this.hideSelection,context:this},show:{label:o("Show"),action:this.showSelection,context:this},moveToBeginning:{label:o("Move To Top"),action:this.moveSelection.bind(this,false),context:this},moveToEnd:{label:o("Move To Bottom"),action:this.moveSelection.bind(this,true),context:this},schedule:{label:o("Schedule"),action:this.scheduleSelection,context:this}};return this._getButtonConfig()},moveSelection:function(t){var a=this.get("selection");var e=this.get("selection").toJSON().map(function(e){return e.get("item")});var i=null;i=t?this.get("collection").items.size()-e.length:0;this.get("model").items.reorderItems(e,i,function(e){if(e){false;new r.Squarespace.Widgets.Confirmation({"strings.title":o("Something Went Wrong"),"strings.message":o("There was an error performing the desired action.The system administrators have been notified.")});return}this._uiMoveSelection(a,t)}.bind(this))},_uiMoveSelection:function(e,t){false},hideSelection:function(){var e=this.get("selection");var a=new r.Parallel;e.each(function(e){var t=e.get("item");t.set("workflowState",i.DRAFT);t.save({source:"bulk-save-operation"},a.add())});a.done(function(){new r.Squarespace.Widgets.Information({"strings.title":o("Save Successful"),"strings.message":o("The selected items have been successfully hidden.")});this.deselectAll()}.bind(this))},showSelection:function(){var e=this.get("selection");var a=new r.Parallel;e.each(function(e){var t=e.get("item");t.set("workflowState",i.PUBLISHED);t.save({source:"bulk-save-operation"},a.add())});a.done(function(){new r.Squarespace.Widgets.Information({"strings.title":o("Save Successful"),"strings.message":o("The selected items have been successfully shown.")});this.deselectAll()}.bind(this))},scheduleSelection:function(){new r.Squarespace.Widgets.Confirmation({"strings.title":o("Not Yet Implemented"),"strings.message":o("This feature has not yet been implemented!")})},_getTrayButtons:function(){var t=this._getButtonConfig();var e=this.get("buttonsOrder").map(function(e){return t[e]}).filter(function(e){return!!e});return r.Squarespace.ObjectBuilder.makeArray(e)},updateActionTray:function(){this._registerTimer(r.later(0,this,function(){var e=this.get("selection");var t=0;e&&(true===this.get("multiple")?1===e.size()&&e.item(0)===this.get("activeDescendant")||(t=e.size()):e!==this.get("activeDescendant")&&(t=1));this._actionTray.set("count",t)}))},removeSelected:function(){var e=this.get("selection");e&&new r.Squarespace.Widgets.Confirmation({"strings.title":o("Remove Selected?"),"strings.message":o("Are you sure you wish to remove your selection? This action cannot be undone.")}).on("confirm",function(){this.removeItems(e)},this)},removeItems:function(e){var t=[];e.each(function(e){e.get("item").get("id")&&t.push(e.get("item"));e.set("selected",0);e.destroy()},this);t.length>0&&this.get("model").items.removeItems(t)},moveSelected:function(){var i=this.get("model");var e=this.get("multiple");var s=new r.Squarespace.EditingDialog({width:380,height:300,overlay:.5,style:"flyout",savingText:e&&l({one:"Moving Item…",other:"Moving Items…"},this.get("selection").size()),buttons:[{type:"cancel",title:o("Cancel")},{type:"moveItems",title:e&&l({one:"Move Item…",other:"Move Items…"},this.get("selection").size())}],tabs:[{title:o("Select Destination Collection"),scroll:true,icon:"/universal/images-v6/icons/icon-import-16-light.png",fields:[{ctor:r.Squarespace.DialogFields.ContentSelector,config:{name:"content-selector",showCollectionTagsAndCategories:false,collectionFilter:this._getMovementCandidateFilter(),excludeCollectionIds:[i.get("id")]}}]}]});s.on("show",function(){this.set("dragSelectionEnabled",false)},this);s.on("dismiss",function(){this.set("dragSelectionEnabled",true)},this);s.on("button-moveItems",function(){var e=s.getField("content-selector").get("data");r.Lang.isArray(e)&&(e=e[0]);if(!e){new r.Squarespace.Widgets.Alert({"strings.title":o("No Collection Selected"),"strings.message":o("Please select a collection to move the selected items to.")});return}s.showSaveOverlay();s.updateTitle(r.Squarespace.DialogStates.SAVING);r.Squarespace.ContentCollectionCache.getCollectionById(e.id,function(a){var n=[];var e=this.get("selection");e.each(function(e){n.push(e.get("item"))},this);a._fetchItemCount(a.get("id")).then(function(e){var t=r.Squarespace.Upsell.getMaxItemCountForCollection(a);n.length+e>t?new r.Squarespace.Widgets.Alert({"strings.title":o("Move Cancelled"),"strings.message":o("Size limit of destination will be exceeded if selected items are moved.")}).on("confirm",function(){s.cancel()}):i.items.moveItems(n,a,r.bind(function(e,t){s.cancel();var a=n.some(function(e){return e.get("recordType")===c.STORE_ITEM});if(e)new r.Squarespace.Widgets.Alert({"strings.title":o("Move Failed"),"strings.message":o("{error} Please try again.",{error:e.error})}).on("confirm",function(){s.cancel()});else if(t.numOfUrlConflictsFixed>0&&a){var i;i=1===n.length?o("The product you moved has a new URL. Edit the product to customize it."):l({one:"One of the products you moved has a new URL. Edit the product to customize it.",other:"Some of the products you moved have new URLs. Edit the products to customize them."},t.numOfUrlConflictsFixed);new r.Squarespace.Widgets.Alert({"strings.message":i}).on("confirm",function(){s.cancel()})}},this))}).catch(function(e){new r.Squarespace.Widgets.Alert({"strings.title":o("Move Cancelled"),"strings.message":o("Something went wrong while moving items. Please try again.")}).on("confirm",function(){s.cancel()})})},this)},this);s.show()},_getMovementCandidateFilter:function(){var e=this.get("model").getTemplateConfiguration();return r.Squarespace.ContentCollectionUtils.getCollectionFilter(e.get("collectionType"),e.get("ordering"))},_hasValidCollectionsToMoveTo:function(){return r.Squarespace.ContentCollectionUtils.filterCollections(this._getMovementCandidateFilter(),[this.get("model").get("id")]).length>0},_buttonsOrderValueFn:function(){var e=[];this.get("multiple")&&e.push("selection");this.get("moveable")&&this._hasValidCollectionsToMoveTo()&&e.push("moveToCollection");e.push("remove");return e}},{ATTRS:{showActionTray:{value:true},moveable:{value:false},multiple:{value:true},actionTrayCtor:{value:r.Squarespace.Widgets.ActionTray},buttonsOrder:{valueFn:"_buttonsOrderValueFn"}}})},"1.0",{requires:["base","squarespace-content-collection-utils","squarespace-dialog","squarespace-models-content-collection","squarespace-node-utils","squarespace-object-builder","squarespace-tray","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","squarespace-upsell-product-violations"]})},7573:function(e,t,a){var l=a(43);var f=a(318);var c=a(4196);YUI.add("squarespace-object-builder",function(m){var a=m.namespace("Squarespace.StringTemplate");a.filters={lower:function(e){return(e||"").toLowerCase()},capitalize:function(e){if(e.length<=1)return e;return e.charAt(0).toUpperCase()+e.slice(1)},withIndefiniteArticle:function(e){false;var t=["a","e","i","o","u"];if(0===e.length)return e;if(-1!==t.indexOf(e.charAt(0).toLowerCase()))return"an "+e;return"a "+e}};function e(e,p,h){h=m.merge(a.filters,h);var t=/\{(\s*)([^\s|]+)((?:\|[^}]+)?)(\s*)\}/g;return e.replace(t,function e(t,a,i,n,s){var r=p[i];var o=false;"undefined"===typeof r&&(o=true);if(n)try{var l=n.split("|").filter(function(e){return e});for(var c=0,d=l.length;c<d;c++){var u=l[c].split(/[:,\s]+/g);var g=u.shift();if(g)if(h[g])r=h[g](r,u,p);else{if(!("'"===g[0]&&"'"===g[g.length-1]||'"'===g[9]&&'"'===g[g.length-1]))throw new Error("Unknown filter: `"+g+'` in "'+t+'"');r=r||g.slice(1,-1)}}}catch(e){f.captureException(e);return t}if(o&&!r&&false)try{throw new Error("Template var `"+i+"` not found in context. String: "+t)}catch(e){console.error(e);f.captureException(e)}return a+(r||"")+s})}a.template=e;function v(){var e=Array.prototype.slice.call(arguments);var t=e.shift();var a=e[e.length-1];var i="prependArrays"===a;"prependArrays"===a||"appendArrays"===a?e.pop():a=null;for(var n=0,s=e.length;n<s;n++)if(e[n])for(var r in e[n])a&&e[n][r]&&m.Lang.isArray(e[n][r])?t[r]=(i?e[n][r]:t[r]||[]).concat((i?t[r]:e[n][r])||[]):t[r]=e[n][r];return t}function r(e,t){if(e instanceof m.Base)return;for(var a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;if(e[a]instanceof m.Base)continue;if(e[a]instanceof m.Node)continue;if(m.Lang.isFunction(e[a]))continue;var i=e[a];for(var n=0;n<t.length;n++){if("undefined"===typeof t[n].test||t[n].test(e[a],a,e)){t[n].each&&t[n].each(e[a],a,e);t[n].map&&(e[a]=t[n].map(e[a],a,e))}if("undefined"===typeof e[a])break}null===e[a]||"object"!==typeof e[a]||i.$dontRecurse||r(e[a],t);if(e[a]instanceof Array)for(var s=0;s<t.length;s++)("undefined"===typeof t[s].postTest||t[s].postTest(e[a]))&&t[s].post&&(e[a]=t[s].post(e[a],a,e))}return e}function n(e,t,f){var a={include:{test:function(e){return e&&e.$include},map:function(e){var t;var a=e.$include;m.Lang.isArray(a)||m.Lang.isObject(a[0])||(a=[a]);for(var i=0,n=a.length;i<n;i++){var s=a[i];var r;if("string"===typeof s){var o=s.split(".");r=f;for(var l=0,c=o.length;l<c;l++){if(!r[o[l]])throw new Error("Bad path `"+s+"`: `"+o[l]+"` not found.");r=m.clone(r[o[l]])}}else{if("object"===typeof s)for(var d in s)if("string"===typeof d&&-1!==d.indexOf(".")){var u=d.split(".");var g=r;while(0!==u.length){var p=u.shift();if(0===u.length){g[p]=s[d];break}var h=[p].concat(u).join(".");if(g.hasOwnProperty(h)){u=[h];continue}g.hasOwnProperty(p)||(g[p]={});g=g[p]}delete s[d]}r=s}t=v(t||(m.Lang.isArray(r)?[]:{}),r,"prependArrays")}e.$update&&(t.$update=e.$update);e.$concat&&(t.$concat=e.$concat);e.$when&&(t.$when=e.$when);return t}},update:{test:function(e){return e&&e.$update},each:function(e){var t=[];var a=e.$update;delete e.$update;function i(a,i){return function(e,t){return t===a&&e===i}}function n(i){return function(e,t,a){m.mix(a,i,true)}}for(var s in a)"."===s[0]?t.push({test:i("name",s.slice(1)),each:n(a[s])}):t.push({test:i("type",s),each:n(a[s])});return r(e,t)}},when:{test:function(e){return e&&e.$when},map:function(e){if(m.Lang.isFunction(e.$when)&&e.$when(f)){if(e.$value)return e.$value;delete e.$when;return e}return}},value:{test:function(e){return e&&e.$value},map:function(e){return f[e.$value]}},valueFn:{test:function(e){return e&&e.$valueFn},map:function(e){var t=e.$valueFn(f);e.$concat&&(t.$concat=e.$concat);return t}},template:{test:function(e,t,a){if("string"!==typeof e)return false;if(a.$escape)return false;if(!m.Squarespace.StringTemplate)return false;if(c.isCoreCmsVariant(c.WYSIWYG_SKIP_TEMPLATE)){var i="wysiwyg"===a.engine;if(i)return false}if("source"===a.engine||"source"===l(a,"wysiwyg.engine")){var n="markdown"===a.mode||"markdown"===l(a,"wysiwyg.mode");var s="htmlmixed"===a.mode||"htmlmixed"===l(a,"wysiwyg.mode");if(n||s)return false}return true},map:function e(t){var a=m.Squarespace.StringTemplate.template(t,f);return a}},concat:{postTest:function(e){var t=false;if(e&&e instanceof Array)for(var a=0;a<e.length;a++)e[a]&&e[a]instanceof Array&&e[a].$concat&&(t=t||e[a].$concat);return t},post:function(e,t,a){var i=[];for(var n=0;n<e.length;n++)e[n]&&e[n]instanceof Array&&e[n].$concat?i=i.concat(e[n]):i.push(e[n]);return i}},trim:{postTest:function(e){return m.Lang.isArray(e)},post:function(e,t,a){var i=e.filter(function(e){return!m.Lang.isUndefined(e)});e.$concat&&(i.$concat=e.$concat);return i}}};return r(m.merge(t),e.map(function(e){return a[e]}))}function s(e,t,a){var i=n(["include","update"],e,t);i=n(["when","value","valueFn","template","concat","trim"],i,a);return i}var o=m.namespace("Squarespace.ObjectBuilder");o.operations=["include","update","when","value","template","concat","trim"];o.walkObject=r;o.build=n;o.make=s;o.makeArray=function(e,t,a){var i=[];i.push({obj:e});t&&i.push(t);a&&i.push(a);return s.apply(o,i).obj}},"1.0",{requires:["oop"]})},7574:function(e,t,a){var s=a(24).t;var o=a(24).pluralize;var l=a(595);var c=a(1306);YUI.add("squarespace-tray",function(r){r.namespace("Squarespace.Widgets");var t=r.Squarespace.Widgets.Tray=r.Base.create("tray",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._buttonWidgets=[]},destructor:function(){this._emptyButtons()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this.after(e+"|stringsChange",this._afterStringsChange);this.after(e+"|buttonsChange",this._afterButtonsChange)},syncUI:function(){t.superclass.syncUI.call(this);this._uiUpdateText();this._uiSetButtons(this.get("buttons"))},_afterButtonsChange:function(e){this._uiSetButtons(e.newVal,e.animate)},_afterStringsChange:function(e){this._uiUpdateText()},_uiUpdateText:function(){var e=this.get("contentBox");e.one(".title").empty().setContent(r.Escape.html(this.get("strings.title")));e.one(".title").setAttribute("title",r.Escape.html(this.get("strings.title")));e.one(".subtitle").empty().setContent(this.get("strings.subtitle"))},_emptyButtons:function(){r.Array.invoke(this._buttonWidgets,"destroy");this._buttonWidgets=[]},_registerButtonWidget:function(e){this._buttonWidgets.push(e)},_uiSetButtons:function(e,t){var s=this.get("contentBox").one(this.getProperty("CONTROLS_CONTAINER"));if(!s)throw new Error("No CONTROLS_CONTAINER in the template to put buttons in.");if(t){s.plug(r.Squarespace.Plugins.SizeAnimator);s.sizeAnimator.hold()}this._emptyButtons();s.empty();r.Array.each(e,function(a,e,t){var i=this._createButtonWidget(a);this._registerButtonWidget(i);var n=s;i.on(this.get("id")+"|click",function(e){if(!a.allowMouseEvents){e.halt();e.stopImmediatePropagation()}this.fire("button-click",{button:i,buttonConfig:a,originalClickEvent:e});if(a.action){e.button=i;e.buttonConfig=a;var t=a.action;r.Lang.isString(t)&&(t=this[t]);t.call(a.context||this,e)}},this);i.get("boundingBox").addClass("label-"+l.createUrlSafeString(a.label));a.container&&(n=this.get("contentBox").one(a.container));i.render(n)},this);t&&s.sizeAnimator.release()},_createButtonWidget:function(e){return new(this.get("buttonCtor"))({"strings.text":e.label,className:e.className})}},{CSS_PREFIX:"sqs-tray",CONTROLS_CONTAINER:".buttons",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:""}},buttonCtor:{value:r.Squarespace.Widgets.Button},buttons:{value:[],validator:function(e,t){for(var a=1;a<e.length;a++){var i=e[a];if(!i.label){false;return false}}return true}}}});var e=r.Squarespace.Widgets.HeaderTray=r.Base.create("headerTray",r.Squarespace.Widgets.Tray,[r.WidgetParent,r.WidgetChild],{renderUI:function(){e.superclass.renderUI.call(this);this.get("loading")?this._startSpinner():this._stopSpinner()},bindUI:function(){e.superclass.bindUI.call(this);this.after(this.get("id")+"|loadingChange",function(e){e.newVal?!!this.get("rendered")&&this._startSpinner():this._stopSpinner()},this)},_startSpinner:function(){this._uiUpdateText();var e=this.get("contentBox").one(".spinner-wrapper");this._spinnerTimer&&this._spinnerTimer.cancel();this._spinner=new r.Squarespace.Spinner({render:e,color:"dark"})},_stopSpinner:function(){if(this._spinnerTimer){this._spinnerTimer.cancel();this._spinnerTimer=null}if(this._spinner){this._spinner.destroy();this._spinner=null}},_createButtonWidget:function(e){var t={"strings.text":e.label,href:e.href,name:e.name,className:e.className,active:e.active,testAttribute:e.testAttribute};return new r.Squarespace.Widgets.Button(t)}},{CSS_PREFIX:"sqs-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{loading:{value:false,validator:r.Lang.isBoolean}}});var a=r.Squarespace.Widgets.LibraryManagerHeaderTray=r.Base.create("libraryManagerHeaderTray",r.Squarespace.Widgets.HeaderTray,[],{_uiSetButtons:function(){a.superclass._uiSetButtons.apply(this,arguments)},bindUI:function(){a.superclass.bindUI.call(this);this.get("inlineTitleEditingEnabled")&&this.get("contentBox").one(".header .title").on("click",this._navigateFrameToPageRoot,this);this.get("searchFieldEnabled")&&this._attachQuickSearchKeyBindings()},_navigateFrameToPageRoot:function(){c.setUrl(this.get("collection").get("fullUrl"))},_attachQuickSearchKeyBindings:function(){this._registerEvent(r.one(r.config.win).on("keyup",function(e){if(e.target.test("textarea,input,[contenteditable]"))return;var t=70;if([t].indexOf(e.keyCode)>-1){e.stopImmediatePropagation();this.revealQuickSearch()}},this))},revealQuickSearch:function(e){if(this._quickSearch){this._quickSearch.destroy();this._quickSearch=null}var t=this.get("contentBox").one(".search.sqs-button");if(!t){false;return}this._quickSearch=this._createQuickSearch();this._quickSearch.render(t);t.addClass("active");r.later(10,this,function(){this._quickSearch.get("boundingBox").addClass("show")});this._quickSearch.on("attemptedClose",function(){this._quickSearch.destroy();this._quickSearch=null;t.removeClass("active")},this)},_createQuickSearch:function(){var e=new r.Squarespace.ContentManagerWidgets.ProductQuickSearch({collectionId:this.get("collection").get("id"),itemIdRequestHandler:this.get("itemIdRequestHandler")});e.addTarget(this);return e}},{CSS_PREFIX:"sqs-library-manager-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="filters"></div><div class="pagination"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{collection:{validator:r.Squarespace.AttrValidators.isInstanceOf("Y.Squarespace.Models.ContentCollection")},inlineTitleEditingEnabled:{value:true},searchFieldEnabled:{value:false},itemIdRequestHandler:{value:function(){}}}});var i=r.Squarespace.Widgets.TabbedHeaderTray=r.Base.create("tabbedHeaderTray",r.Squarespace.Widgets.HeaderTray,[],{initializer:function(){this.publish("tab-switch-requested",{emitFacade:true,defaultFn:this._updateActiveButtonClass,context:this,preventable:true});this.after(this.get("id")+"|button-click",function(e){null!==e.button.ancestor(this.getProperty("CONTROLS_CONTAINER"))&&this.fire("tab-switch-requested",{button:e.button})},this)},_createButtonWidget:function(e){var t={"strings.text":e.label,href:e.href,name:e.name,className:e.className,active:e.active};return new r.Squarespace.Widgets.TabButton(t)},_uiSetButtons:function(){i.superclass._uiSetButtons.apply(this,arguments);var t=this.get("defaultTab");var e=this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children");if(0===e.size())return;t?e.each(function(e){e.hasClass("name-"+t)&&e.addClass("active")},this):e.item(0).addClass("active")},_updateActiveButtonClass:function(i){this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children").each(function(e,t,a){e.toggleClass("active",i.button.get("boundingBox")===e)},this)}},{CSS_PREFIX:"sqs-tabbed-header-tray",CONTROLS_CONTAINER:".tabs",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="tabs"></div><div class="buttons"></div></div>',ATTRS:{defaultTab:{}}});var n=r.Squarespace.Widgets.ActionTray=r.Base.create("actionTray",r.Squarespace.Widgets.Tray,[],{renderUI:function(){r.Squarespace.Widgets.ActionTray.superclass.renderUI.call(this)},bindUI:function(){var e=this.get("id");this.get("contentBox").on(e+"|click",function(e){e.halt()});this.after(e+"|visibleChange",this._afterVisibleChange);this.after([e+"|buttonsChange",e+"|countChange",e+"|showThresholdChange",e+"|stringsChange"],this._afterUIAttributeChange)},syncUI:function(){this._uiSetCount(this.get("count"));this._uiSetButtons(this.get("buttons"));this._uiSetTitle(this.get("strings.title"));this._uiSetSubtitle(this.get("strings.subtitle"))},_afterVisibleChange:function(e){if(!e.newVal)return;var t=this.get("boundingBox");var a=this.get("scrollNode");var i=0;a&&(i=a.get("offsetWidth")-a.get("clientWidth"));t.setStyle("right",null);i&&t.setStyle("right",parseInt(t.getStyle("right"),10)+i+"px")},_afterUIAttributeChange:function(e){switch(e.attrName){case"showThreshold":case"count":this._uiSetCount();return;case"buttons":this._uiSetButtons(this.get("buttons"));return;case"strings":"strings.subtitle"===e.subAttrName?this._uiSetSubtitle(this.get("strings.subtitle")):"strings.title"===e.subAttrName?this._uiSetTitle(this.get("strings.title")):this._uiSetCount();return;default:false}},_uiSetCount:function(){var e=this.get("count");this.get("contentBox").one(".description .top").setContent(o({one:"{%n} Item selected",other:"{%n} Items selected"},e));var t=this.get("showThreshold");e>=t?this.show():this.hide()},_uiSetSubtitle:function(e){this.get("contentBox").one(".bottom").setContent(e)},_uiSetTitle:function(e){this.get("contentBox").one(".top").setContent(e)},_setEnabled:function(e){e||this.hide();return e},show:function(){if(!this.get("enabled"))return;n.superclass.show.call(this)},enable:function(){this.set("enabled",true)},disable:function(){this.set("enabled",false)}},{CSS_PREFIX:"sqs-action-tray",TEMPLATE:'<div class="action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:s("This action will be applied to all selected items above.")}},visible:{value:false},enabled:{value:true,setter:"_setEnabled",lazyAdd:false},buttons:{value:[],validator:function(e,t){for(var a=1;a<e.length;a++){var i=e[a];if(!i.action){false;return false}if(!i.label){false;return false}}return true}},count:{value:0},showThreshold:{value:1},scrollNode:{valueFn:function(){return this.get("boundingBox").siblings(r.Squarespace.NodeUtils.isScrollable).item(0)}}}});r.Squarespace.Widgets.ProductGridActionTray=r.Base.create("ProductGridAcionTray",r.Squarespace.Widgets.ActionTray,[],{},{CSS_PREFIX:"sqs-product-grid-action-tray",TEMPLATE:'<div class="product-grid-action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{buttonCtor:{value:r.Squarespace.Widgets.VanillaButton}}})},"1.0",{requires:["array-invoke","base","squarespace-attr-validators","squarespace-content-manager-widgets-product-quick-search","squarespace-dialog-button","squarespace-dialog-tab","squarespace-node-utils","squarespace-plugin-sizeanimator","squarespace-spinner","squarespace-ss-widget","squarespace-util"]})},7575:function(e,t,a){var l=a(24).t;var n=a(425);YUI.add("squarespace-content-manager-widgets-product-quick-search",function(a){a.namespace("Squarespace.ContentManagerWidgets");var e=500;var i=300;a.Squarespace.ContentManagerWidgets.ProductQuickSearch=a.Base.create("QuickSearch",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("onResult");this.publish("onSearchClear");this.publish("attemptedClose");this.after("queryChange",n(this._registerCallback(function(e){this._afterQueryChange(e.newVal)}),e,{leading:false,trailing:true}))},_afterQueryChange:function(t){if(0===t.length){this._clearSearch();return}a.Data.get({url:"/api/search/GeneralSearch",data:{q:t,f_collectionId:this.get("collectionId"),size:i},success:function(e){if(e.serviceError){false;return}this._exposeResults(e.items,t)},failure:function(e){console.error("ERROR: ",e)}},this)},_sortAndSanitizeItems:function(e){var t=this.get("itemIdRequestHandler");if(!t){false;return e}var n=t();e=e.filter(function(e){if(n.indexOf(e.id)>-1)return true;false;return false});return e.sort(function(e,t){var a=n.indexOf(e.id);var i=n.indexOf(t.id);if(a<i)return-1;if(a>i)return 1;return 0})},_exposeResults:function(e,t){if(t!==this.get("query")){false;return}e=this._sortAndSanitizeItems(e);this.fire("onResult",{results:e});var a=null;e.length>0&&(a=e[0].id);this.setAttrs({resultItems:e,focusedItemId:a})},_clearSearch:function(){this.fire("onSearchClear");this.get("contentBox").one(".thumb").addClass("hidden")},renderUI:function(){this.get("contentBox").appendChild('<input type="text" placeholder='+l("Search Products")+"/>");this.get("contentBox").appendChild('<div class="thumb hidden"><div class="message"></div><div class="prev"></div><div class="next"></div></div>')},bindUI:function(){var e=this.get("boundingBox");var t=this.get("contentBox").one('input[type="text"]');this.after(["resultItemsChange","focusedItemIdChange"],function(e){var t=this.get("resultItems");var a=this.get("focusedItemId");var i=this.get("contentBox");var n=i.one(".message");var s=i.all(".prev,.next");i.one(".thumb").removeClass("hidden");var r=t.length>0;if(r){var o=t.map(function(e){return e.id}).indexOf(a);n.setContent(l("{currentIndex} of {totalLength}",{currentIndex:o+1,totalLength:t.length}))}else n.setContent(l("No results"));n.toggleClass("no-results",!r);s.toggleClass("hidden",!r)});this._registerTimer(a.later(300,this,function(){t.focus();t.on("blur",function(e){0===e.target.get("value").trim().length&&this.fire("attemptedClose")},this)}));t.on("keyup",function(e){var t=27;var a=13;this.set("query",e.target.get("value"));e.keyCode===t&&this.fire("attemptedClose");if(e.keyCode===a&&this.get("resultItems").length>0){var i=e.shiftKey?-1:1;var n=this._getIncrementedFocusedItemId(i);this.set("focusedItemId",n)}e.stopPropagation()},this);this.get("contentBox").one(".thumb").delegate("click",function(e){var t=1;e.target.hasClass("prev")&&(t=-1);var a=this._getIncrementedFocusedItemId(t);this.set("focusedItemId",a);e.halt()},".prev,.next",this);e.on("click",function(e){if(e.target.test("input")){e.stopPropagation();return}e.halt()},this)},_getIncrementedFocusedItemId:function(e){var t=this.get("resultItems");var a=this.get("focusedItemId");var i=t.map(function(e){return e.id});var n=i.indexOf(a);var s=n+e;s>i.length-1?s=0:s<0&&(s=i.length-1);return i[s]}},{CSS_PREFIX:"sqs-quick-search",ATTRS:{query:{value:""},collectionId:{value:""},focusedItemId:{value:null},resultItems:{value:[]},itemIdRequestHandler:{value:null}}})},"1.0",{requires:["squarespace-ss-widget"]})},7576:function(e,t){YUI.add("squarespace-dialog-tab",function(e){e.namespace("Squarespace.DialogFields");var t=e.namespace("Squarespace.DialogFields").TabButton=e.namespace("Squarespace.Widgets").TabButton=e.Base.create("tabButton",e.Squarespace.DialogFields.Button,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").removeClass("sqs-button")}},{CSS_PREFIX:"sqs-tab"})},"1.0",{requires:["base","node","squarespace-dialog-button"]})},7577:function(e,t){YUI.add("squarespace-plugin-sizeanimator",function(n){var s=false;n.namespace("Squarespace.Plugins").SizeAnimator=n.Base.create("SizeAnimator",n.Plugin.Base,[],{hold:function(){var e=this.get("host");this._width=e.get("offsetWidth");this._height=e.get("offsetHeight")},release:function(){var t=this.get("host");var a=n.Node.create("<div></div>");var e=t.get("offsetWidth");var i=t.get("offsetHeight");if(e===this._width&&this._height===i){s&&console.log("[sizeanimator release] no change.");return}t.get("children").each(function(e){a.append(e)});a.setStyles({width:e,height:i});s&&console.log("[sizeanimator release]",e,this._width);t.appendChild(a);t.addClass("sqs-sizeanimator-animating");t.anim({width:e,height:i},{from:{width:this._width,height:this._height},end:function(){t.removeClass("sqs-sizeanimator-animating");t.setStyles({width:null,height:null});if(a._node){a.get("children").each(function(e){t.append(e)});a.remove()}}}).run()}},{NS:"sizeAnimator",ATTRS:{}})},"1.0",{requires:["base","plugin"]})},7578:function(e,t,a){var r=a(128);var l=a(149);var c=a(596);var s=a(24).t;var d=a(34);var u=a(1028);var g=a(1332);var h=a(1116);var f=a(1391);var m=a(2218);var v=a(1720);var b=a(1942);var y=a(1309);var S=a(598);var q=a(0);var _=a(60);var C=a(1926);var E=a(869).default;var k=a(1089);var w=a(516);YUI.add("squarespace-content-item-image",function(p){p.namespace("Squarespace");var i={};i[l.TEXT]="text";i[l.IMAGE]="image";i[l.QUOTE]="quote";i[l.LINK]="link";i[l.CHAT]="chat";i[l.AUDIO]="audio";i[l.VIDEO]="video";i[l.REVIEW]="review";i[l.STORE_ITEM]="store_item";i[l.EVENT]="event";i[l.THREAD]="thread";i[l.GALLERY]="gallery";var o={};o[l.TEXT]={confirmationTitle:s("Remove text"),confirmationMessage:s("Are you sure you wish to remove this text?")};o[l.IMAGE]={confirmationTitle:s("Remove image"),confirmationMessage:s("Are you sure you wish to remove this image?")};o[l.QUOTE]={confirmationTitle:s("Remove quote"),confirmationMessage:s("Are you sure you wish to remove this quote?")};o[l.LINK]={confirmationTitle:s("Remove link"),confirmationMessage:s("Are you sure you wish to remove this link?")};o[l.CHAT]={confirmationTitle:s("Remove chat"),confirmationMessage:s("Are you sure you wish to remove this chat?")};o[l.AUDIO]={confirmationTitle:s("Remove audio"),confirmationMessage:s("Are you sure you wish to remove this audio?")};o[l.VIDEO]={confirmationTitle:s("Remove video"),confirmationMessage:s("Are you sure you wish to remove this video?")};o[l.REVIEW]={confirmationTitle:s("Remove review"),confirmationMessage:s("Are you sure you wish to remove this review?")};o[l.STORE_ITEM]={confirmationTitle:s("Remove product"),confirmationMessage:s("Are you sure you wish to remove this product?")};o[l.EVENT]={confirmationTitle:s("Remove event"),confirmationMessage:s("Are you sure you wish to remove this event?")};o[l.THREAD]={confirmationTitle:s("Remove thread"),confirmationMessage:s("Are you sure you wish to remove this thread?")};o[l.GALLERY]={confirmationTitle:s("Remove gallery"),confirmationMessage:s("Are you sure you wish to remove this gallery?")};o.FALLBACK={confirmationTitle:s("Remove item"),confirmationMessage:s("Are you sure you wish to remove this item?")};var n=p.Squarespace.ContentItemImage=p.Base.create("ContentItemImage",p.Squarespace.SSWidget,[p.WidgetChild],{initializer:function(){this.publish("adobe-image-editor-start",{emitFacade:true});this.publish("adobe-image-editor-finish",{emitFacade:true});this.publish("remove",{emitFacade:true});this.publish("purchaseRequest",{emitFacade:true});this.publish("licensingDetails",{emitFacade:true});this.publish("image-preview-loaded",{emitFacade:false});this.actionListener=new u(d);this.actionListener.addActionListener(g.CONTENT_BROWSER_DELETE_ITEM,this._onContentBrowserDeleteItem.bind(this))},_onContentBrowserDeleteItem:function(e){this.get("item").get("id")===e&&this.get("item").destroy()},destructor:function(){this.get("item").detach(this.get("id")+"|*");this.get("animation")&&this.get("contentBox").unplug(this.get("animation"));if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}if(this._imageEditorEl){_.unmountComponentAtNode(this._imageEditorEl.getDOMNode());this._imageEditorEl.remove(true)}},getDragSelectableRegionNode:function(){return this.get("contentBox").one("img")},isValidMouseDownTarget:function(e){if(this.get("contentBox").one("img"))return!!e.ancestor("img",true);return true},renderUI:function(){var e=this.get("contentBox");e.addClass([n.CSS_PREFIX,"content"].join("-"));var t=i[this.get("item").get("recordType")];"store_item"===t&&(t="product");e.addClass("item-type-"+t);if(r.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")){e.appendChild(p.Node.create('<div class="index">'+this.get("item").get("displayIndex")+"</div>"));e.appendChild(p.Node.create('<div class="itemId">'+this.get("item").get("id")+"</div>"))}e.appendChild(p.Node.create('<div class="inside"></div>'));var a=this._imageEditorEl=p.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');e.append(a)},bindUI:function(){r.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&this.get("item").after("displayIndexChange",function(e){this.get("contentBox").one(".index").setHTML(e.newVal)},this);var e=this.get("boundingBox");var t=this.get("contentBox");var a=this.get("id");var i=this.get("item");var n=i.get("items");this._registerEvent(i.after(["titleChange","workflowStateChange","save"],function(e){if(p.Lang.isValue(e.options)&&"mediaFocalPointChange"===e.options.source)return;this.syncUI()},this));this._registerEvent(i.after(["mediaFocalPointChange","assetUrlChange"],function(e){e.source===g.CONTENT_BROWSER_SETTINGS_SAVED&&this.syncUI()},this));this._registerEvent(i.after("workflowStateChange",function(e){e.newVal===c.DELETED&&this.fire("remove")},this));if(this._useFirstChild()){this._currentSyncRequest=null;var s=p.bind(function(t){this._registerEvent(t.after(a+"|mediaProcessingStateChange",function(e){0===n.indexOf(t)&&this.syncUI()},this))},this);n.each(function(e){s(e)},this);this._registerEvent(n.after(a+"|add",function(e){var t=e.model;0===e.index&&t.get("mediaProcessingState")===p.Squarespace.MediaProcessingState.READY&&this.syncUI();s(t)},this));this._registerEvent(n.after(a+"|remove",function(e){0===e.index&&this.syncUI()},this))}else this._registerEvent(i.after(a+"|mediaProcessingStateChange",this.syncUI,this));e.on("click",function(e){this.isValidMouseDownTarget(e.target)&&this.fire("onSelect",{shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey})},this);this._hasEditableAction()&&e.on(["dblclick","contextmenu"],function(e){if(e.metaKey)return;e.halt();this._openEditItem();this.get("item").get("recordType")===l.STORE_ITEM&&w.trackClickEditProduct("collection-panel")},this);this.get("animation")&&t.plug(this.get("animation"),{onlyUseOpacity:true});this.on("animationChange",function(e){e.prevVal&&this.get("contentBox").unplug(e.prevVal);e.newVal&&this.get("contentBox").plug(e.newVal,{onlyUseOpacity:true})},this);t.delegate("click",function(){this.fire("remove")},".image-processing-error a",this);this.after("preventLoadChange",this.syncUI,this)},_hasEditableAction:function(){return this.get("actionOverlayButtons").indexOf(p.Squarespace.ActionOverlayButtons.IMAGE_INFO)>-1},_bindJobs:function(){if(this.actionListener)return;this.actionListener=new u(d);var e=function(e){var t=this.get("item");var a=t.get("id");var i=p.Array.find(e,function(e){var t=m.getJobById(e);return t.data&&t.data.contentItemId&&t.data.contentItemId===a});if(i){t.save();this.actionListener.removeAllActionListeners();this.actionListener=null}}.bind(this);this.actionListener.addActionListener(f.COMPLETE,e)},syncUI:function(){if(this.get("preventLoad"))return;var e=this.get("contentBox");var t=p.bind(function(){this._hideProgressIndicator();this.get("contentBox").one(".inside").empty()},this);var a=p.bind(function(){var e=this.get("item");var t=this._getRenderingImageItem();var a=t?t.get("mediaProcessingState"):p.Squarespace.MediaProcessingState.READY;switch(a){case p.Squarespace.MediaProcessingState.QUEUED:case p.Squarespace.MediaProcessingState.PROCESSING:this._showProgressIndicator({showCancel:true});break;case p.Squarespace.MediaProcessingState.READY:this._showImage(t||e);this.get("showActionOverlay")&&this._showActionOverlay();break;default:if(this._usePlaceholder()){this._showImage(t||e);this.get("showActionOverlay")&&this._showActionOverlay()}else if(this.get("hasFileData"))this._showError();else{this._showImage(new p.Model({assetUrl:"/universal/images-v6/configuration/no-image.png"}));this.set("actionOverlayButtons",[p.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]);this._showActionOverlay()}break}},this);if(this.get("animation")){e.plug(this.get("animation"));e.once("hidden",function(){if(!this.get("destroyed")){t();a()}this._registerTimer(p.later(20+200*Math.random(),this,function(){this.get("destroyed")||e.show()}))},this);e.hide()}else if(!this.get("destroyed")){t();a()}},editItem:function(){var e=this.get("item");var t=this.get("itemEditorOptions");this.get("parentModel")instanceof p.Squarespace.Models.ContentItem&&(t=p.merge(t,{parentItem:this.get("parentModel")}));var a=p.Squarespace.ContentItemEditorFactory.getEditor(e,t);var s=new a({model:e,parentDialog:this.get("itemEditorOptions.parentDialog")});this.get("itemEditorOptions.anchorToImageWidget")&&s.set("anchorNode",this.get("boundingBox"));e.load({forceReload:true},function e(t,a){if(!t)try{var i=this.get("parentModel");var n=i.get("typeName");k.editCollectionItem({itemId:a.id,collectionType:n,collectionId:i.get("id")})}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track edit collection failed")}s.show()}.bind(this));return s},_openEditItem:function(){var e=this.get("item");if(p.Squarespace.ContentItemUtils.isStandardGalleryItem(e,this.get("parentModel"))){if(e.get("mediaProcessingState")===p.Squarespace.MediaProcessingState.QUEUED)return;E.showCollectionItemSettingsEditor(e.getAttrs())}else this.editItem()},_uiSetChildSelected:function(e){this.get("boundingBox").toggleClass("selected",!!e)},_showProgressIndicator:function(e){var t=this.get("contentBox").one(".inside");t.addClass("processing");var a=t.plug(p.Squarespace.Plugin.ProgressSpinner,{show:true,showCancel:e.showCancel,spinnerSize:this.get("progressSpinnerSize")})[p.Squarespace.Plugin.ProgressSpinner.NS];a.once("cancel",function(e){this.fire("remove");if(window.SQUARESPACE_SENTRY){var t=this.get("item");window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:(true,t.get("id")),level:"debug"})}},this)},_hideProgressIndicator:function(){var e=this.get("contentBox").one(".inside");if(e&&e.hasClass("processing")){e.removeClass("processing");e.unplug(p.Squarespace.Plugin.ProgressSpinner)}},_showError:function(){var e=p.Node.create('<div class="image-processing-error"><p>'+s("Something went wrong.")+'<br /><a href="#" class="remove">'+s("Remove")+"</a></p></div>");e.one("p a.remove").once("click",function(e){e.halt();this.fire("remove")},this);this.get("contentBox").one(".inside").appendChild(e)},_getRenderingImageItem:function(){if(this._useFirstChild())return this.get("item").get("items").item(0);return this.get("item")},_showImage:function(t){var e=this.get("contentBox");var a=p.Node.create('<img data-load="false" data-src="'+t.get("assetUrl")+'" data-image-dimensions="'+t.get("originalSize")+'" />');e.one(".inside").appendChild(a);a.setStyles({visibility:"hidden"});e.setStyles({backgroundImage:null,backgroundSize:null});if(t.get("hasFileData")&&this._showFocalPoint()){var i=a.plug(p.Squarespace.Plugin.FocalPoint,{focalPoint:t.get("mediaFocalPoint")}).focalPoint;i.on("focalPointChanged",function(e){t.set("mediaFocalPoint",e.focalPoint);t.save({fields:["mediaFocalPoint"],source:"mediaFocalPointChange"})},this);i.on("focalPointChange",function(e){t.set("mediaFocalPoint",e.newVal)})}var n=this._registerTimer(p.later(1e3,this,function(){!this.get("destroyed")&&a.getDOMNode()&&a.inDoc()&&this._showProgressIndicator({showCancel:false})}));a.once("load",function(){n&&n.cancel();this._hideProgressIndicator();var e=this.get("animation");e?this._registerTimer(p.later(20+200*Math.random(),this,function(){if(this.get("destroyed")||!a.getDOMNode()||!a.inDoc())return;a.setStyles({visibility:null});if(e){a.plug(e);a.hide(true);a.show();this._showItemSpecificInformation()}})):a.setStyles({visibility:null});this.fire("image-preview-loaded")},this);a.once("error",function(){n&&n.cancel();a.setAttribute("src","/universal/images-v6/configuration/no-image.png")},this);a.loader||a.plug(p.Squarespace.Loader2,{mode:this.get("imageLoaderMode"),load:true,fixedRatio:this.get("imageLoaderUseFixedRatioRenderer")})},_showItemSpecificInformation:function(){var e=this.get("item");var t=this.get("contentBox").one(".inside");var a=t.one("img");var i=a.get("width");var n=a.get("offsetLeft");var s=a.get("offsetTop");var r;switch(this.get("item").get("recordType")){case p.Squarespace.RecordType.STORE_ITEM:break;case p.Squarespace.RecordType.IMAGE:var o=e.get("workflowState");if(this.get("showWorkflowState")&&o!==p.Squarespace.WorkflowStates.PUBLISHED){var l=p.Node.create('<div class="flag-wrapper"><div class="flag-text">'+p.Squarespace.ContentItemUtils.getWorkflowStateCopy(o)+"</div></div>");l.setStyles({width:i,height:a.get("height"),left:n,top:s});t.append(l)}break;default:var c=p.Node.create('<div class="type-icon"></div>');c.setStyles({top:s+5,left:n+5});t.append(c);var d=e.get("workflowState");if(this.get("showWorkflowState")&&d!==p.Squarespace.WorkflowStates.PUBLISHED){var u=p.Node.create('<div class="flag-wrapper"><div class="flag-text">'+p.Squarespace.ContentItemUtils.getWorkflowStateCopy(d)+"</div></div>");u.setStyles({width:i,height:a.get("height"),left:n,top:s});t.append(u)}var g=this.get("item").get("title");if(g){r=p.Node.create('<div class="information"><div class="title">'+g+"</div></div>");r.setStyles({width:i,left:n,bottom:s});t.append(r);break}}},_addBuyButton:function(e){e.unshift("buy");var t=p.Array.indexOf(e,"edit-image");var a=-1!==t;a&&e.splice(t,1)},_addLicensingButton:function(e){e.unshift("getty")},_showActionOverlay:function(){this._actionOverlay&&this._actionOverlay.destroy();var e=this.get("contentBox");var t=[].concat(this.get("actionOverlayButtons"));var a=this.get("item");if(a.isLicensedAssetPreview())this._addBuyButton(t);else if(a.isLicensedAsset()){var i=p.Squarespace.LicensedAssets.Manager.getById(a.get("licensedAssetId"));i.then(function(e){e.source===S.GETTY&&this._addLicensingButton(t)}.bind(this))}e.plug(p.Squarespace.Plugin.ActionOverlay,{buttons:t,position:this.get("item").get("mediaFocalPoint").y>=.5?"top":"bottom"});var n=this._actionOverlay=e.actionOverlay;var s=p.Squarespace.ActionOverlayButtons.EDIT_IMAGE;n.on("button-"+s,function(e){_.render(q.createElement(C,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:true}),this._imageEditorEl.getDOMNode())},this);n.on("button-"+p.Squarespace.ActionOverlayButtons.IMAGE_INFO,function(){this._openEditItem()},this);n.on("button-"+p.Squarespace.ActionOverlayButtons.REMOVE_IMAGE,function(){var e=this.get("item").get("recordType");var t=o[e]?o[e].confirmationTitle:o.FALLBACK.confirmationTitle;var a=o[e]?o[e].confirmationMessage:o.FALLBACK.confirmationMessage;new p.Squarespace.Widgets.Confirmation({"strings.title":t,"strings.message":a}).on("confirm",function(){this.fire("remove")},this)},this);n.on("button-buy",function(){this.fire("purchaseRequest")},this);n.on("button-getty",function(){this.fire("licensingDetails")},this);var r=e.one("img");r&&r.focalPoint&&r.focalPoint.on("focalPointChanged",function(e){n.set("position",e.focalPoint.y>=.5?"top":"bottom")},this);n.render()},_onSaveEditedImage:function(e){var t=this.get("item");var a=v.getUploadToken();var i=b(e,t.get("recordType"),t.get("parentId")?y.CHILD:y.ITEM,{replaceItemId:t.get("id")});Object.keys(i).forEach(function(e){void 0===i[e]&&delete i[e]});this._bindJobs();h.uploadFile(a,"/api/commondata/SaveMedia",i);t.set("mediaProcessingState",p.Squarespace.MediaProcessingState.QUEUED);this._onCloseEditingImage()},_onCloseEditingImage:function(){_.render(q.createElement(C,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:false}),this._imageEditorEl.getDOMNode())},_usePlaceholder:function(){var e=p.Squarespace.RecordType;var t=[e.VIDEO,e.TEXT,e.STORE_ITEM];return-1!==t.indexOf(this.get("item").get("recordType"))},_useFirstChild:function(){var e=p.Squarespace.RecordType;var t=[e.STORE_ITEM,e.GALLERY];return-1!==t.indexOf(this.get("item").get("recordType"))},_showFocalPoint:function(){return this.get("item").get("recordType")===p.Squarespace.RecordType.IMAGE}},{CSS_PREFIX:"sqs-content-item-image",ATTRS:{item:{validator:function(e){return p.instanceOf(e,p.Squarespace.Models.ContentItem)}},parentModel:{validator:function(e){return p.instanceOf(e,p.Squarespace.Models.ContentCollection)||p.instanceOf(e,p.Squarespace.Models.ContentItem)}},animation:{value:p.Squarespace.Animations.Fadeable},showActionOverlay:{value:false},actionOverlayButtons:{value:[p.Squarespace.ActionOverlayButtons.IMAGE_INFO,p.Squarespace.ActionOverlayButtons.EDIT_IMAGE,p.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showWorkflowState:{value:true},progressSpinnerSize:{value:30},itemEditorOptions:{value:{}},preventLoad:{value:false},imageLoaderMode:{value:"fit"},imageLoaderUseFixedRatioRenderer:{value:false}}})},"1.0",{requires:["base","squarespace-animations","squarespace-commerce-utils","squarespace-content-item-types-editor","squarespace-content-item-utils","squarespace-enum","squarespace-image-loader","squarespace-licensed-assets-manager","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-plugin-progress-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-confirmation","widget-child"]})},7579:function(e,t){YUI.add("squarespace-licensed-assets-manager",function(i){i.namespace("Squarespace.LicensedAssets");var e=i.Base.create("LicensedAssetsManager",i.Base,[],{buy:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.post({url:"/api/licensed-assets",data:a.toJSON(),success:e,failure:t,json:true},this)},this)},getById:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.get({url:"/api/licensed-assets/"+a,success:e,failure:t},this)},this)},getDownloadUrl:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.get({url:"/api/licensed-assets/"+a.id+"/download-url",success:e,failure:t},this)},this)}});i.Squarespace.LicensedAssets.Manager=new e},"1.0",{requires:["base","squarespace-promises"]})},7580:function(e,t,a){var d=a(24).t;var u=a(34);var g=a(149);var p=a(801);var h=a(6663);a(651);var f=a(728);var m=a(1595);var v=a(6250);var b=a(229);var y=a(523);var S=a(309);var q=a(515);var _=a(522);var C=a(1306);var E=a(1246);var k=a(869).default;var w=a(2206);var T=a(3457);var I=a(87);var A=a(114);var x=a(516);var L=a(599);var D=a(390);var i=a(3068);var N=i.shouldShowProductComposer;var O=i.ProductCreationWizard;var R=i.buildShellContentItem;var P=3;var B=370;var M=600;var F="ADD_POST_REFRESH_KEY";YUI.add("squarespace-content-item-types-selector",function(o){var r={};r[o.Squarespace.Enums.RecordType.IMAGE]=d("Upload Image");r[o.Squarespace.Enums.RecordType.VIDEO]=d("Add Video");var l={};l[o.Squarespace.Enums.RecordType.DIGITALGOOD]=d("Squarespace will automatically send customers a secure link to the file lasting 24 hours after initial access.");l[o.Squarespace.Enums.RecordType.STORE_ITEM]=d("A package must be shipped by the merchant.");var e=p.isFeatureEnabled(f.GIFT_CARDS);var t=p.isFeatureEnabled(f.COVID_TEMP_GIFT_CARDS_MESSAGING);var a=p.isFeatureEnabled(f.COMMERCE);var i=h.getUpsellCopy(f.GIFT_CARDS);var c=[{title:d("Physical"),value:"store-item-physical",description:d("A package must be shipped by the merchant."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:S.PHYSICAL},{title:d("Digital"),value:"store-item-digital-good",description:d("Customers receive a secure link to the file lasting 24 hours after the first download."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:S.DIGITAL},{title:d("Service"),value:"store-item-service",description:d("A service must be rendered. Services do not have shipping costs applied."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:S.SERVICE},{title:d("Gift Card"),value:"store-item-gift-card",description:d(t?"Customers can apply Gift Cards toward future purchases, and they never expire. Selling Gift Cards is included for free with your plan until September 1, 2020.":"Customers can apply a gift card towards future purchases."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:S.GIFT_CARD,upsellLocked:!e&&a,upsellInfo:i}];var n=5.59*q.GRID_PX;function s(){var s=[];o.Array.each(this.get("model").get("acceptTypes"),function(e){var t=o.Squarespace.Enums.RecordType.valueForString(e);var a=o.Squarespace.Enums.RecordType.titleForValue(t);r[t]&&(a=r[t]);var i=m.getCustomType(e);if(o.Lang.isNull(t)&&!!i){t=o.Squarespace.Enums.RecordType.valueForString(i.base);a=i.title}if(!t){new o.Squarespace.Widgets.Alert({"strings.title":d("Custom Type Configuration Not Found"),"strings.message":d('Configuration not found for accept type "{acceptType}". Please double check the collection configuration.',{acceptType:e})});return null}t!==o.Squarespace.Enums.RecordType.IMAGE||i||s.push({icon:"licensed",title:d("Search Images"),value:"licensed-image",recordType:o.Squarespace.Enums.RecordType.IMAGE,customType:"licensed"});if(t===o.Squarespace.Enums.RecordType.STORE_ITEM)s=s.concat(c);else{var n=o.Squarespace.Enums.RecordType.stringForValue(t);if(!o.Lang.isValue(a)){console.warn('Could not find title for acceptType "'+e+'"');return null}s.push({icon:n,title:a,value:e,description:l[t],recordType:t,customType:i?i.name:null})}},this);s=s.filter(function(e){return null!==e});return s}o.namespace("Squarespace.ContentItemTypes").Selector=o.Base.create("ContentItemTypesSelector",o.Squarespace.ModelEditorDialog,[],{initializer:function(){var i=this.get("dialog");i.on("datachange",function(e){var t=e.get("data");var a=this.get("onContentItemTypeSelected");if(!a)throw new Error("No onContentItemTypeSelected handler function?");i.updateTitle(o.Squarespace.DialogStates.LOADING);i.showSaveOverlay();a(this.getContentItemConfiguration(t),function(){i.hideSaveOverlay();i.close()})},this)},getContentItemConfiguration:function(t){var e=o.Array.find(this.get("acceptTypes"),function(e){return e.value===t});var a={recordType:e.recordType};e.customType&&(a.customContent={customType:e.customType});e.recordType===o.Squarespace.Enums.RecordType.STORE_ITEM&&(a.structuredContent={productType:e.productType});return a},getDialogConfig:function(){var e=this.get("model");var t=this.get("acceptTypes");var a=Math.min(t.length,P);var i=e.get("collectionType")===b.PRODUCTS;i&&(a=1);return{width:{$valueFn:function(){if(i)return M;return B}},height:{$valueFn:o.bind(function(){return Math.ceil(t.length/a)*n},this),$when:o.bind(function(){return t.length>a&&a>1},this)},name:{$valueFn:function(){if(i)return"productType";return"content type"}},overlay:.5,style:"flyout",closeOthers:false,discardChangesConfirmation:false,flyoutPointerDirection:"centered",loadingText:d("Loading…"),tabs:[{title:{$valueFn:function(){if(i)return d("Select Product Type");return e.get("addText")}},icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:o.Squarespace.DialogFields.MultiOption,config:{numeric:false,options:t,columns:a}}]}]}}},{ATTRS:{onContentItemTypeSelected:{},acceptTypes:{valueFn:s},dialogConfig:{valueFn:"getDialogConfig"}}});o.namespace("Squarespace.Mixins").AddContentItemHandlerMixin=o.Base.create("AddContentItemHandlerMixin",o.Base,[],{_createNewContentItemAndShowEditor:function(e,t){if(this.pendingAddItemAndEnterInlineEditMode)return;var a=this.get("collection");var i=this._createNewContentItem(e);i.get("recordType")===g.STORE_ITEM&&x.trackSelectProductType(L(i.getAttrs().structuredContent.getAttrs().productType),D.ProductEditor.YUI_EDITOR);o.Lang.isFunction(t)&&t();if(this.shouldEnterInlineEditMode(a)){this.pendingAddItemAndEnterInlineEditMode=true;i.set("body",{raw:false,layout:{columns:12,rows:[]}});i.autoSave(function(){a.items.add(i);C.addLoadHandler(F,function(){setTimeout(function(){C.removeLoadHandler(F);E.setEditing(true);C.enableEditing();var e=i.getAttrs();T(e)&&k.addItem(e);this.pendingAddItemAndEnterInlineEditMode=false}.bind(this),100)}.bind(this));C.setUrl(i.get("fullUrl"))}.bind(this));return}if(o.Squarespace.ContentItemUtils.isStandardGalleryItem(i,a)){i.save(function(){k.showCollectionItemSettingsEditor(i.getAttrs(),null,true);o.Lang.isFunction(t)&&t()});return}var n=i.on("save",function(e){e.options&&e.options.headers&&e.options.headers["X-AutoSave"]||a.items.add(i)},this);var s=new(o.Squarespace.ContentItemEditorFactory.getEditor(i,this.get("itemEditorOptions")))({model:i});s.on("visibleChange",function(e){if(!e.newVal){n.detach();i.get("unsaved")?i.destroy({remove:true}):i.isNew()&&i.destroy()}});s.show({licensed:e.customContent&&"licensed"===e.customContent.customType});return s},shouldEnterInlineEditMode:function(e){if(!_.isSevenOne())return false;if(e.get("ordering")===y.CHRONOLOGICAL)return true;if(A.isFeatureEnabled(I.BLOG_EVENT_ITEM_SETTINGS)&&w(k.getCollection(e.get("id"))))return true;return e.get("collectionType")===b.PORTFOLIO},_createNewContentItem:function(e){var t=this.get("collection");var a={collectionId:t.get("id")};t.get("ordering")!==y.USER&&t.get("ordering")!==y.MUSIC_ALBUM||(a.displayIndex=t.get("nextDisplayIndex"));e.recordType===g.EVENT&&(a.title="");return new o.Squarespace.Models.ContentItem(o.merge(e,a))},handleAddContentRequest:function(e){var n=this.get("collection");u.recycle(v);var t=new o.Squarespace.ContentItemTypes.Selector({model:this.get("collectionConfiguration"),onContentItemTypeSelected:o.bind(this._createNewContentItemAndShowEditor,this)});var a=t.get("acceptTypes");var i=this.get("selectorAnchorNode");var s=o.bind(t.show,t);0===a.length?new o.Squarespace.Widgets.Alert({"strings.title":d("Configuration Error"),"strings.message":d("There are no valid accept types defined for the collection type {sub1}.",{sub1:this.get("collectionConfiguration").get("title")})}):1===a.length?s=o.bind(function(){this._createNewContentItemAndShowEditor(t.getContentItemConfiguration(a[0].value))},this):i&&t.set("anchorNode",i);function r(){n.isNew()?s():n.load({},function(){o.Squarespace.ProductViolations.isAllowedToAddItemToCollection(n,1).then(s)},this)}if(n.get("type")===b.PRODUCTS&&N()){this._wrappedProductCreationWizard||(this._wrappedProductCreationWizard=new O({collectionId:n.get("id"),collectionItemCount:n.items.size(),onRequestClose:function(){this._wrappedProductCreationWizard.close();this._wrappedProductCreationWizard.destroy()}.bind(this),onProductCreated:function(e){var t=new o.Squarespace.Models.ContentItem(R(e));var a=o.Squarespace.ContentItemEditorFactory.getEditor(t);var i=new a({model:t});n.items.add(t);i.show();this._wrappedProductCreationWizard.close();this._wrappedProductCreationWizard.destroy()}.bind(this),onUnsupportedProductTypeSelection:function(){this._wrappedProductCreationWizard.close();this._wrappedProductCreationWizard.destroy();r()}.bind(this)}));this._wrappedProductCreationWizard.show();return}r();e&&e.analytics&&e.analytics.productPage&&n.get("type")===b.PRODUCTS&&x.trackClickAddProduct(e.analytics.productPage)}},{ATTRS:{damask:{},itemEditorOptions:{value:{}},collectionConfiguration:{},collection:{},selectorAnchorNode:{}}})},"1.0",{requires:["squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-item-utils","squarespace-enum","@sqs/layout-engine/layout-builder","squarespace-model-editor","squarespace-models-content-item","squarespace-singletons-location","squarespace-upsell-product-violations","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},7581:function(e,t,a){var y=a(24).t;var A=a(802);var S=a(701);var g=a(5328);YUI.add("@sqs/layout-engine/layout-builder",function(I){I.namespace("SQS.LayoutEngine.Layout");I.SQS.LayoutEngine.Layout.Builder=I.Base.create("LayoutBuilder",I.Plugin.Base,[I.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(e){this.publish("layoutRendered",{defaultFn:function(e){e.layout.all(".sqs-block:not(.yui3-dd-dragging)").getDOMNodes().forEach(function(e){I.Widget.getByNode(e).fire("layout-rendered")});I.SQS.LayoutEngine.Events.fire("layout-engine:layout-rendered",{node:e.layout})},emitFacade:true});this._blockSet=new i;this._registerEvent(this._blockSet.on("add",this._onBlockSetAdd,this),this._blockSet.on("remove",this._onBlockSetRemove,this));var t=this.get("host");var a=this._getContent();t.addClass("sqs-layout sqs-grid-"+this.get("columns"));if(!a){a=this.toJSON();this._setContent(a)}t.empty();this._cleanupImportedHTML(a);this.fromJSON(t,a)},_onBlockSetAdd:function(e){var t=e.block;t.addTarget(this);t.get("model").layout=this.get("layout");this._registerEvent(t.get("model").after("change",this.syncDOMToContent,this),t.after("destroy",function(){var e=this.get("host").LayoutEditor;e&&e.cleanGrid()},this))},_onBlockSetRemove:function(e){var t=e.block;t.removeTarget(this);this.syncDOMToContent()},fromJSON:function(e,t){var a=this.get("host");var i=new I.Parallel;this._isBuildingFromJSON=true;var n=this._fromJSON(e,t,i);this._isBuildingFromJSON=false;a.addClass("sqs-layout-rendering");setTimeout(function(){i.done(I.bind(function(){a.removeClass("sqs-layout-rendering");this.fire("layoutRendered",{layout:e});this.syncDOMToContent(true);this.fire("syncContentFromJSON")},this))}.bind(this),0);return n},_fromJSON:function(e,t,a){var i=null;var n=null;I.Lang.isString(t.collectionId)&&(i=t.collectionId);I.Lang.isString(t.contentItemId)&&(n=t.contentItemId);this.blocks=[];t.blocks?this._renderBlocks(t.blocks,e,a,i,n):t.rows?this._renderRows(t.rows,e,a,i,n):t.columns&&this._renderColumns(t.columns,e,a,i,n);return e},_renderRows:function(e,a,i,n,s){e.forEach(function(e){var t=this.createRow();a.append(t);e.collectionId=n;e.contentItemId=s;this._fromJSON(t,e,i)},this)},_renderColumns:function(a,i,n,s,r){a.forEach(function(e){var t=this.createColumn(null,a.length>1?e.span:null);i.append(t);e.collectionId=s;e.contentItemId=r;this._fromJSON(t,e,n)},this)},_renderBlocks:function(e,t,a,i,n){var s=this.get("editController").get("blogApp");e.forEach(function(e){e.collectionId=i;e.contentItemId=n;this._renderBlock(e,t,a)},this)},_renderBlock:function(e,t,a){var i;if(!I.Lang.isNumber(e.type))return;var n=g.BlockTypeKeys;var s=this.get("editController");var r=s.getRenderableBlocks(this.get("editMode"));var o=s.get("blogApp");var l=o&&o.get("isNewPost");var c=n[e.type];var d=c?r.get(c):null;if(I.Lang.isValue(d)){var u=d.isSchemaBlock?I.SQS.LayoutEngine.SchemaBase:d.ctor;i=new u({editMode:this.get("editMode"),editController:s,id:e.id,model:e.value,stack:a,type:e.type,isNewBlock:e.isNewBlock||l,collectionId:e.collectionId,contentItemId:e.contentItemId});this.registerBlock(i);this._registerEvent(i.on("save",this.syncDOMToContent,this))}else i=new I.SQS.LayoutEngine.Block.Unrenderable({editMode:this.get("editMode"),editController:s,id:e.id,model:e.value,stack:a,type:e.type});i.render(t);return i},createRow:function(e){return I.Node.create('<div class="sqs-row"></div>').setContent(e)},createColumn:function(e,t){I.Lang.isValue(t)||(t=this.get("columns"));var a=Math.min(t,this.get("columns"));return I.Node.create('<div class="sqs-col sqs-col-'+a+'"></div>').setContent(e)},toJSON:function(e){e=e||this.get("host");var i={};if(!e)throw new Error("Invalid node passed toJSON().");if(e.hasClass("sqs-row")){i.columns=[];e.get("children").filter(".sqs-col").each(function(e){i.columns.push(this.toJSON(e))},this)}else if(e.hasClass("sqs-col")||e.hasClass("sqs-layout")){e.test("[class*='sqs-col-']")?i.span=I.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"sqs-col-"):e.test("[class*='sqs-grid-']")?i.span=I.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"sqs-grid-"):e.test("[class*='columns-']")?i.span=I.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"columns-"):console.error("Cannot find r.span from the wrappers");var n=[];var s=[];e.get("children").each(function(e){if(e.test(".sqs-row")){if(0!==n.length){s.push({columns:[{span:i.span,blocks:I.clone(n,true)}]});n=[]}s.push(this.toJSON(e))}else if(e.test(".sqs-block")){var t=I.Widget.getByNode(e);var a;a=t?t.toJSON():{id:e.getAttribute("id"),type:e.getData("block-type"),value:I.JSON.parse(e.getData("block-json"))};if(!a)throw new Error("Block has no JSON.");n.push(a)}},this);if(0===s.length)i.blocks=n;else{if(0!==n.length){(I.Lang.isUndefined(i.span)||I.Lang.isNull(i.span))&&console.error("Block column span is invalid: ",i.span);s.push({columns:[{span:i.span,blocks:I.clone(n,true)}]})}i.rows=s}}if(i.rows&&0===i.rows.length||i.columns&&0===i.columns.length){delete i.rows;delete i.columns;i.blocks=[];e.get("children").filter(".sqs-block").each(function(e){var t=e.getData("block");t&&i.blocks.push(t.toJSON())},this)}return i},syncDOMToContent:function(e){if(this._isBuildingFromJSON)return;this._setContent(this.toJSON(),true===e)},syncBlockContentFromJSON:function(e,i){var t=I.SQS.LayoutEngine.Layout.Utils.getBlocksFromJSON(e);t.forEach(function(e){var t=this._blockSet.getById(e.id);t.set("editable",true);var a=JSON.stringify(t.get("model").toJSON())===JSON.stringify(e.value);if(!a){t.get("model").setAttrs(e.value,{silent:i||false});i&&t._renderBlock&&t._renderBlock()}}.bind(this));this._setContent(e)},_setContent:function(e,t){this.get("layout").setAttrs(e,{silent:t})},_getContent:function(){return this.get("layout").toJSON()},registerBlock:function(e){this._blockSet.add(e)},deregisterBlock:function(e){this._blockSet.remove(e)},deregisterBlocks:function(e){I.Array.each(e,function(e){this._blockSet.remove(e)},this)},_cleanupImportedHTML:function(e){if(e.rows)this._cleanupImportedHTML(e.rows);else if(I.Lang.isArray(e.columns))this._cleanupImportedHTML(e.columns);else if(I.Lang.isArray(e))for(var t=0;t<e.length;t++)this._cleanupImportedHTML(e[t]);else if(e.blocks){var a=[];for(var i=0;i<e.blocks.length;i++)if(e.blocks[i].type==S.HTML&&e.blocks[i].value&&e.blocks[i].value.html){var n=I.guid();var s=e.blocks[i].value.html;var r=s.toLowerCase();if((-1!==r.indexOf("<iframe")||-1!==r.indexOf("<img"))&&f(r,"<iframe")+f(r,"<img")<125){var o;var l=I.Node.create('<div id="'+n+'"/>');try{l.setContent("<div>"+s+"</div>")}catch(e){console.error("Skipping over error while trying to clean import html: ",e);continue}var c=v(l,"iframe, img");c=I.one(c);if(c.get("id")!=n){var d=m(c.get("childNodes"),l,this.get("editController").isMobileApp());a.push({find:e.blocks[i],replaceWith:d})}}}if(a.length>0)for(var u=0;u<a.length;u++){var g=a[u];var p=[e.blocks.indexOf(g.find),1];for(var h=0;h<g.replaceWith.length;h++)p.push(g.replaceWith[h]);e.blocks.splice.apply(e.blocks,p)}}function f(e,t){return e.split(t).length-1}function m(e,c,d){var u=[];var g;var p=new RegExp("/static/([a-z0-9]{24})/([a-z0-9]{24})/([a-z0-9]{24})/[a-z0-9]{13}","i");e.each(function(e){if(I.one(e).test("iframe")){g=I.SQS.LayoutEngine.PageLayoutTools.makeBlock(S.EMBED,{html:e.get("outerHTML"),resolvedBy:"manual",title:"",url:""});u.push(g)}else if(I.one(e).test("img")&&p.test(e.get("src"))){var t=c.one('img[src="'+e.getAttribute("src")+'"]');var a=null;if(t){a=t.ancestor("a");a&&a.test("a")||(a=null)}var i=e.get("src").match(p);var n=[];for(var s=0;s<i.length;s++)24==i[s].length&&n.push(i[s]);var r=null;3==n.length&&(r=n[2]);if(!r){window.trackClientError&&window.trackClientError({url:document.location.href,message:y("Error creating image block from imported html. Could not find valid objectId."),file:"builder.js",line:"LayoutBuilder._cleanupImportedHTML / makeNewBlocks"});console.error("Error cleaning up an image: ",e);return}var o="";""!=I.Lang.trim(e.get("title"))?o=e.get("title"):""!=I.Lang.trim(e.get("alt"))&&(o=e.get("alt"));var l={description:o,linkTo:a?a.getAttribute("href"):"",newwindow:!!a&&a.hasAttribute("_blank"),imageId:r};d&&(l.image={assetUrl:e.get("src"),id:r});g=I.SQS.LayoutEngine.PageLayoutTools.makeBlock(S.IMAGE,l);u.push(g)}else if(I.one(e).test("img")){g=I.SQS.LayoutEngine.PageLayoutTools.makeBlock(S.CODE,{wysiwyg:{engine:"code",mode:"htmlmixed",isSource:false,source:""},html:'<img src="'+e.get("src")+'" title="'+e.get("title")+'" alt="'+e.get("alt")+'"/>'});u.push(g)}else if(!!e.getContent()&&""!==b(e)){if(!g||g.type==S.EMBED||g.type==S.IMAGE||g.type==S.CODE){g=I.SQS.LayoutEngine.PageLayoutTools.makeBlock(S.HTML,{html:"",wysiwyg:{html:""}});u.push(g)}g.value.html+=e.get("outerHTML")}});return u}function v(e,l){var c=[];var t=["h1","h2","h3","h4","h5","h6","p","ul","ol","li","blockquote"];var a=["a","strong","em","b","i","cite"];var i={ul:["li","ol","ul"],ol:["li","ul","ol"],li:["ol","ul","li"],blockquote:["ul","ol","li","p"]};var n={li:["ul","ol"]};var s=["br","table","tr","div"];var r=I.Node.create("<div></div>");var d=[];var u="";var g=[];var o="";var p=false;function h(e,t){t(e);e=e.firstChild;while(e){h(e,t);e=e.nextSibling}}function f(e){var t=e.tagName;t=t?t.toLowerCase():"textNode";t="b"===t?"strong":t;t="i"===t?"em":t;return t}function m(e){return I.Array.indexOf(a,f(e))>=0}function v(e){return I.Array.indexOf(t,f(e))>=0}function b(e){return I.Array.indexOf(s,f(e))>=0}function y(e){return 3==e.nodeType&&""!=I.Lang.trim(I.one(e).get("text"))}function S(e,t,a){var i=[];var n=[];for(var s=t.length-1;s>=0;s--){var r=t[s];var o=false;p&&s===t.length-1&&r===f(e)?o=true:"strong"!==r||a.ancestor(r)?"em"!==r||a.ancestor(r)?a.ancestor(r)||(o=true):a.ancestor("i")||(o=true):a.ancestor("b")||(o=true);o?n.push(r):i.unshift(r)}return{closed:n,nodes:i}}function q(e,t){return I.Array.indexOf(t,f(e))>=0}function _(){var e;var t;for(e=d.length-1;e>=0;e--)w(d[e]);for(e=g.length-1;e>=0;e--){t=0===e;E(g[e],t)}}function C(e,t){if(0===g.length)if(n.hasOwnProperty(e)){o+="<p>";g.push("p")}else{o+="<"+e+">";g.push(e)}else if(i.hasOwnProperty(g[g.length-1])&&I.Array.indexOf(i[g[g.length-1]],e)>=0)if(u.length>0)T(e);else{o+="<"+e+">";g.push(e)}}function E(e,t){w(null,true);o+="</"+e+">";c.push(o);o="";t&&g.pop();0===g.length&&p&&(p=false)}function k(e,t){d.push(e);if("a"==e){var a=t.getAttribute("target");var i="";I.Lang.isValue(a)&&a.length>0&&(i=A(' target="{targetAttribute}"',{targetAttribute:a}));u+='<a href="'+t.get("href")+'"'+i+">"}else u+="<"+e+">"}function w(e,t){e&&(u+="</"+e+">");if(t){o+=u;u=""}}function T(e){o+=u;u="";g.push(e);c.push(o);o="<"+e+">";p=true}h(e._node,function(e){var t;var a=I.one(e);var i=f(e);var n=a.get("text");var s=S(e,d,a);var r=S(e,g,a);if(s.closed.length>0){d=s.nodes;for(t=0;t<s.closed.length;t++)w(s.closed[t])}if(r.closed.length>0){g=r.nodes;for(t=0;t<r.closed.length;t++)E(r.closed[t])}if(a.test(l))c.push(a.get("outerHTML"));else if(m(e)){if("a"===i&&a.one(">"+l))return;q(e,d)||k(i,a)}else if(v(e))C(i,e);else if(y(e)){if(""!=I.Lang.trim(n)){g.length||C("p",e);n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;");u+=n}}else if(b(e))if(g.length>0){var o=g[g.length-1];E(o,true);C(o,e)}else if(u.length>0){for(t=d.length-1;t>=0;t--)w(d[t]);C("p",e);E("p",true)}});_();c.length<=1&&c.push("<p></p>");r.append(I.Node.create(c.join("")));return I.Node.create(r.get("innerHTML"))._node}}},{NS:"LayoutBuilder",ATTRS:{columns:{valueFn:function(){return this.get("layout").get("columns")}},editController:{writeOnce:true,validator:function(e){return I.instanceOf(e,I.SQS.LayoutEngine.EditControllerBase)}},layout:{writeOnce:true,validator:function(e){return I.instanceOf(e,I.SQS.LayoutEngine.Models.PageLayout)}},editMode:{writeOnce:true,validator:function(e){return I.SQS.LayoutEngine.Layout.EditMode.isValid(e)}}}});var i=I.Base.create("BlockSet",I.Base,[],{initializer:function(){this._blockMap={}},add:function(e){if(this._containsBlock(e))return;this._blockMap[e.get("id")]=e;e.after("destroy",function(){this.remove(e)},this);this.fire("add",{block:e})},getById:function(e){var t=this._blockMap[e];if(I.Lang.isValue(t))return t;return null},_containsBlock:function(e){return e&&I.Lang.isValue(this._blockMap[e.get("id")])},remove:function(e){if(!this._containsBlock(e))return;delete this._blockMap[e.get("id")];this.fire("remove",{block:e})}});I.SQS.LayoutEngine.PageLayoutTools={sanitizeImportedECB:function(e){if(this.isEmptyECB(e)&&I.Lang.isValue(e.get("html"))){var t=e.get("html");e.get("layout").setAttrs({rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:[this.makeBlock(S.HTML,{html:t,wysiwyg:{html:t}})]}]}]}]}]})}},isEmptyECB:function(e){var t=this.getBlocks(e.get("layout").toJSON());if(0===t.length)return true;if(1===t.length){var a=t[0];if(a.type===S.HTML){if(!a.value)return true;return""===a.value.html}}return false},convertLayoutToNewColumnCount:function(e,t){e.set("columns",t);e.get("rows").each(a);function a(e){var t=[];I.Array.each(e.columns||e.get("columns"),i)}function i(e){e.span=t;e.rows&&I.Array.each(e.rows,a)}},getBlocks:function(e){var t=[];if(e&&e.rows)for(var a=0;a<e.rows.length;a++)t=t.concat(this._getBlocksRow(e.rows[a]));return t},_getBlocksRow:function(e){var t=[];if(e.columns)for(var a=0;a<e.columns.length;a++)t=t.concat(this._getBlocksColumn(e.columns[a]));return t},_getBlocksColumn:function(e){var t=[];if(e.rows)for(var a=0;a<e.rows.length;a++)t=t.concat(this._getBlocksRow(e.rows[a]));e.blocks&&(t=t.concat(e.blocks));return t},getSimpleEditableContentBlock:function(e){var t={columns:12,rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:Array.prototype.slice.call(arguments)}]}]}]}]};e||(t=I.JSON.stringify(t));return{layout:t,legacyPromotedLayout:false}},getSimpleHTMLEditableContentBlock:function(e,t){return this.getSimpleEditableContentBlock(I.SQS.LayoutEngine.PageLayoutTools.makeBlock(S.HTML,{engine:"wysiwyg",html:e,source:e},t))},makeBlock:function(e,t){return{type:e,id:I.Squarespace.Utils.getGuid(),value:t}}};function e(e){return!m.node.get("children").item("0").compareTo(e)}function b(e){var t=[];if(3==e.get("nodeType"))return e.get("nodeValue");e.get("childNodes").each(function(e){t.push(b(e))});return t.join(" ")}},"1.0",{requires:["array-invoke","base","json","node","squarespace-util","@sqs/layout-engine/layout-utils","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-utils","@sqs/layout-engine/models-layout"]})},7582:function(e,t,a){var n=a(704);YUI.add("@sqs/layout-engine/layout-utils",function(i){i.namespace("SQS.LayoutEngine.Layout");i.SQS.LayoutEngine.Layout.Utils={getBlocksFromJSON:function(e){var a=[];var i=function(t){t&&t.blocks&&Array.isArray(t.blocks)?a=a.concat(t.blocks):(n(t)||Array.isArray(t))&&Object.keys(t).forEach(function(e){i(t[e])})};i(e);return a},getValFromClass:function(e,t){return parseInt((e.get("className").match(new RegExp("(?:\\s|^)"+t+"(\\d+?)(?:\\s|$)"))||["",""])[1],10)},isBlock:function(e){e=e instanceof i.Widget?e.get("boundingBox"):i.one(e);return null!==e&&e.test(".sqs-block")},getColumnWidth:function(e){return i.SQS.LayoutEngine.Layout.Utils.getValFromAncestralClass(e,"sqs-col-")},getValFromAncestralClass:function(e,t){if(e.ancestor('[class*="'+t+'"]',true))return i.SQS.LayoutEngine.Layout.Utils.getValFromClass(e.ancestor('[class*="'+t+'"]',true),t);return-1},convertToValueInPixel:function(e){if(i.Lang.isNumber(e))return e;var t={px:1,em:16,pt:4/3,"%":.16};var a=(e.match(/\D+$/)||["px"])[0];return(parseInt(e,10)||0)*(t[a]||1)}}},"1.0",{requires:["base"]})},7583:function(e,t,a){var i=a(5328);YUI.add("@sqs/layout-engine/block/generic-base",function(t){var a=t.SQS.LayoutEngine.Block.GenericBase=t.Base.create("block-generic-base",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.SQS.LayoutEngine.Mixins.EventRegistrar],{renderUI:function(){a.superclass.renderUI.call(this);var e="sqs-block-"+i.BlockTypeKebab[this.get("type")];this.get("boundingBox").addClass(e);this.get("contentBox").addClass(e+"-content")},bindUI:function(){a.superclass.bindUI.call(this);var e=0;this._registerEvent(this.get("boundingBox").on("click",function(){Date.now()-e<500&&t.SQS.LayoutEngine.Events.fire("layout-engine:edit-block",{block:this});e=Date.now()}.bind(this)))}},{CSS_PREFIX:"sqs-schema-block",ATTRS:{isSchemaBlock:{value:true}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events","@sqs/layout-engine/block-schema-editor-base"]})},7584:function(e,t,a){var l=a(24).t;var i=a(5328);var n=a(100);var s=a(972);var c=false;function d(e){return s(e.replace(/[-|_]/g," ").toLowerCase())}YUI.add("@sqs/layout-engine/block-model-sync-base",function(o){o.namespace("SQS.LayoutEngine.Block");o.SQS.LayoutEngine.Block.ModelSyncBase=o.Base.create("block-modelsync",o.SQS.LayoutEngine.Block.Base,[],{initializer:function(){"MODELSYNC"===this.get("blockTypeName")&&o.Lang.isValue(this.get("type"))&&this.set("blockTypeName",i.BlockTypeKeys[this.get("type")]);this._networkListener=o.Global.on("network:online",this._onNetworkReconnect.bind(this))},renderUI:function(){this._renderBlock()},bindUI:function(){this.get("model").after("change",n(function(e){c&&console.log("[le] modelsync-base - model changed",e);this._renderBlock(e)},this.get("contentRefreshRate"),true,true),this)},_onNetworkReconnect:function(){this.get("isDisplayingOfflineState")&&this._renderBlock()},_updateOfflineState:function(e){var t=e.error&&0===e.status;this.set("isDisplayingOfflineState",t)},_renderStarted:function(){c&&console.log("[le] modelsync-base - _renderBlock",this)},_renderFinished:function(){c&&console.log("[le] modelsync-base - _renderBlock finished",this);this.fire("widget:contentUpdate");this.set("stack",null)},_renderBlock:function e(){this._renderStarted();var t=d(this.get("blockTypeName"));var a=o.bind(this._renderFinished,this);var i=this.get("stack");i&&(a=i.add(a));try{var n={};var s=this.toJSON();s.value&&s.value.collectionId?n.collectionId=s.value.collectionId:this.get("collectionId")&&(n.collectionId=this.get("collectionId"));this.get("contentItemId")&&(n.contentItemId=this.get("contentItemId"));n.widgetJSON=JSON.stringify(s);o.Data.post({url:"/api/widget/GetWidgetRendering",data:n,success:function(e){c&&console.log("[le] modelsync-base - _renderBlock post success",e);if(null!==this.get("contentBox").getDOMNode()){this._renderSuccess(e);this._updateOfflineState(e);a();return}console.warn("[le] modelsync-base - _renderBlock post success - no dom node in response")},failure:function(e){c&&console.log("[le] modelsync-base - _renderBlock post failure",e);if(null!==this.get("contentBox").getDOMNode()){this._renderError(e);this._updateOfflineState(e);a();return}console.warn("[le] modelsync - _renderBlock post failure - no dom node")}},this)}catch(e){var r=l("Error: {blockName} Block could not be rendered.",{blockName:t});e instanceof TypeError&&console.warn(o.Lang.sub("Error: {message}",e));this._renderError({error:r})}},_cleanWidgetContent:function(){var e=this.get("contentBox").one(".sqs-state-message, .state-message");o.Lang.isValue(e)&&this.get("model").get("aspectRatio")&&e.wrap("<div></div>")},_setWidgetContent:function(){var e=this.get("contentBox");if(!e.getDOMNode())return;e.empty();e.insert(this.get("widgetContent"));this._cleanWidgetContent()},_renderSuccess:function(e){c&&console.log("[le] modelsync-base _renderSuccess",e);this.set("widgetContent",e.html);this._setWidgetContent()},_renderError:function(e){var t=l("Error: {sub1} Block could not be rendered.",{sub1:d(this.get("blockTypeName"))});var a=this._getNewStateMessageNode({classNames:"error",title:e&&e.title,message:e&&e.error||t});this.get("boundingBox").addClass("sqs-block-error");this.get("contentBox").empty();this.get("contentBox").append(a)},_getNewStateMessageNode:function(e){e=o.merge({classNames:"warning",message:l("There was an error.")},e);var t=o.Node.create('<div class="sqs-blockStatus"><div class="sqs-blockStatus-box">'+(e.title?'<div class="sqs-blockStatus-box-title">'+e.title+"</div>":"")+'<div class="sqs-blockStatus-box-message">'+e.message+"</div></div></div>");if(o.Lang.isValue(e.button)){e.button=o.merge({text:"OK",classNames:""},e.button);var a=o.Node.create('<div class="sqs-blockStatus-box-button">'+e.button.text+"</div>").appendTo(t.one(".sqs-blockStatus-box"));o.Lang.isFunction(e.button.onClick)&&a.on("click",e.button.onClick)}return t},_getStackFinished:function(){var e=this.get("stack");if(e)return e.add();return function(){}},destructor:function(){if(this._networkListener){this._networkListener.detach();this._networkListener=null}}},{CSS_PREFIX:"sqs-block-modelsync",MODEL:o.Model,ATTRS:{stack:{},widgetContent:{value:""},isDisplayingOfflineState:{value:false},collectionId:{},contentItemId:{},contentRefreshRate:{value:200}}})},"1.0",{requires:["base","model","node","@sqs/layout-engine/block-base"]})},7585:function(e,t,a){var n=a(24).t;var s=a(802);var r=a(701);var o=false;var l=function(){};YUI.add("@sqs/layout-engine/block-base",function(i){i.namespace("SQS.LayoutEngine.Block");i.SQS.LayoutEngine.Block.Base=i.Base.create("block-base",i.Widget,[],{initializer:function(e){e&&e.model||this._setDefaultContent();i.before(this._renderUIBlock,this,"renderUI");i.after(this._bindUIBlock,this,"bindUI");i.after(this._syncUIBlock,this,"syncUI");this.publish("resized",{emitFacade:true,defaultFn:this._updateBlockSizing});this.publish("blockModelChange",{emitFacade:true});this.envInit()},envInit:function(){},_setDefaultContent:function(){var e=this.get("defaultContentModel");i.Lang.isValue(e)&&this.get("model").setAttrs(e)},_renderUIBlock:function(){this.get("boundingBox").addClass("sqs-block "+this.get("classNames"));this.get("contentBox").addClass("sqs-block-content");this.get("boundingBox").setAttribute("id","block-"+this.get("id"));this._addSizeAndFloatClasses()},_bindUIBlock:function(){this.get("model").after("*:change",this._fireModelChange,this);this.after("editableChange",this.syncEditable,this);this.after("visibleChange",this.syncVisible,this);this.after("focusedChange",this._syncFocused,this);this.after("selectedChange",this._syncSelected,this)},_syncUIBlock:function(){this.get("editable")&&this.syncEditable();this.syncVisible()},_sizeAttrChanged:i.SQS.LayoutEngine.Block.Utils.getWhitelistingFn(["floatDir","hSize","vSize","dimensions","aspectRatio"]),_fireModelChange:function(e){this._sizeAttrChanged(e.changed)&&this.fire("resized");this.fire("blockModelChange",{blockType:this.get("type"),changed:e.changed})},_bindDOM:l,syncEditable:function(){var e=this.get("editor");if(!e){console.warn("[le] No Editor configured for "+this.get("blockTypeName")+" block");return}var t=this.get("editable");if(t)if(this.hasPlugin(e.NS))o&&console.log("[le] There is no valid editor plugin for this block",this);else{o&&console.log("[le] Plugging in a new editor instance for block",this);this.plug(e,this.get("editorConfig"))}else if(this.hasPlugin(e.NS)){o&&console.log("[le] Unplugging editor for block",this);this.unplug(e.NS)}},syncVisible:function(){this.get("boundingBox").toggleClass("sqs-block-hidden",!this.get("visible"))},_syncFocused:function(e){this._uiSetFocused(e.newVal)},_syncSelected:function(e){this._uiSetSelected(e.newVal)},_uiSetFocused:function(e,t){this.get("boundingBox").toggleClass("sqs-block-focused",!!e)},_uiSetSelected:function(e){this.get("boundingBox").toggleClass("sqs-selected",!!e)},_updateBlockSizing:function(){var e=this.get("model");this._removeSizeAndFloatClasses();this._addSizeAndFloatClasses();!e.get("floatDir")&&i.Lang.isValue(e.get("hSize"))&&e.set("hSize",null)},_removeSizeAndFloatClasses:function(){var e=this.get("boundingBox");var t=/(?:\s|^)(sqs-col-\d+?|sqs-float-\w+?|vsize-\d+?)(?=\s|$)/g;e.set("className",e.get("className").replace(t,""))},_addSizeAndFloatClasses:function(){var e=this.get("boundingBox");var t=this.get("model");var a=t.get("floatDir");var i=t.get("hSize");var n=t.get("vSize");a&&i&&e.addClass("sqs-float-"+a+" sqs-col-"+i);n&&e.addClass("vsize-"+n)},inPromotedLayout:function(){var e=this.get("contentBox");return i.Lang.isValue(e.ancestor('[data-type="promoted-block"]',false,function(e){return e.hasClass("sqs-layout")}))},toJSON:function(){var e={type:this.get("type"),id:this.get("id"),value:this.get("model").toJSON()};delete e.value.promoted;return e},queueForDestruction:function(e){e=e||{};this.hide();this.get("boundingBox").addClass("sqs-destroyme");e.coalescing||i.SQS.LayoutEngine.Events.fire("layout-engine:delete-block",this)},removeBlock:function(){var e=this.get("boundingBox");e.ancestor(".sqs-block-remover")&&e.unwrap();this.queueForDestruction();var t=this.get("boundingBox").ancestor(".sqs-layout");var a=this.get("editController");a.cleanGrids(t);a.alignInsertPoints(t)},isEmpty:function(){return false},destructor:function(){var e=this.get("id")+"|*";i.Global.detach(e);i.detach(e);this.unplug();this.get("boundingBox").purge(true)},getGuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()+e()},getProperty:function(e){var t=this.constructor;var a=this.constructor[e];while(i.Lang.isUndefined(a)){if(!t.superclass)break;t=t.superclass.constructor;if(i.Lang.isUndefined(t))break;a=t[e]}return a}},{THROTTLE_DATACHANGE_TIME_MS:1e4,MODEL:i.Model,ATTRS:{blockTypeName:{valueFn:function(){return this.name.split("block-")[1].replace(/-/g,"_").toUpperCase()}},type:{valueFn:function(){return r[this.get("blockTypeName")]}},id:{getter:function(e){var t=e;if(!i.Lang.isValue(t)){t=this.getGuid();this.set("id",t)}return t}},model:{writeOnce:true,lazyAdd:false,value:{},setter:function(e){if(i.instanceOf(e,i.Model))return e;return new(this.getProperty("MODEL"))(e||{})}},classNames:{valueFn:function(){var e=this.name.split("block-")[1];return e.replace(/(?:\-v\d)?$/,function(e,t,a){if(e)return s("-block {wholeString}-block",{wholeString:a});return"-block"})}},floatDir:{value:null},hSize:{value:null},vSize:{},tabIndex:{value:null},focused:{setter:function(e){if(!this.get("editable"))return false;return e}},editable:{value:false},editController:{writeOnce:true,validator:function(e){return i.instanceOf(e,i.SQS.LayoutEngine.EditControllerBase)}},editor:{readOnly:true,valueFn:function(){return i.SQS.LayoutEngine.Block.Editor.Base}},editMode:{writeOnce:true,validator:function(e){return i.SQS.LayoutEngine.Layout.EditMode.isValid(e)}},editOnStart:{value:false,validator:i.Lang.isBoolean},mobileEditor:{readOnly:true,value:null},editorConfig:{value:null},isWidgetParent:{readOnly:true,value:false},isNewBlock:{value:false},defaultContentModel:{},floatable:{value:true},focusHandler:{valueFn:function(){return i.SQS.LayoutEngine.Singletons.BlockFocusHandler}},lockedLayout:{valueFn:function(){var e=this.get("boundingBox");var t=i.Lang.isValue(e)?e.ancestor(".sqs-layout"):null;return i.Lang.isValue(t)&&t.hasClass("sqs-locked-layout")}},promoted:{value:false,validator:i.Lang.isBoolean},strings:{value:{promoteAction:n("Promote this block"),unpromoteAction:n("Unpromote this block")}}}});var e=i.SQS.LayoutEngine.Block.ParentBase=i.Base.create("block-parent-base",i.SQS.LayoutEngine.Block.Base,[i.WidgetParent],{syncEditable:function(){e.superclass.syncEditable.call(this);var t=this.get("editable");this.each(function(e){e.set("editable",t)},this)},toJSON:function(){return e.superclass.toJSON.apply(this,arguments)}},{ATTRS:{editor:{readOnly:true,value:null},isWidgetParent:{value:true},multiple:{value:true}}})},"1.0",{requires:["base","event","model","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/block-utils","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/events","widget-parent","widget"]})},7586:function(e,t,a){var i=a(6826);YUI.add("@sqs/layout-engine/block-editor-base",function(n){var e=function(){};n.namespace("SQS.LayoutEngine.Block.Editor");n.SQS.LayoutEngine.Block.Editor.Base=n.Base.create("blockEditorBase",n.Plugin.Base,[n.SQS.LayoutEngine.Mixins.EventRegistrar],{_syncEditableButtons:e,_onFocus:e,_onBlur:e,beforeLayoutDrag:e,afterLayoutDrag:e,envInit:e,initializer:function(){var e=this.get("host");this._model=e.get("model");this._bb=e.get("boundingBox");this._cb=e.get("contentBox");this.editingEventListeners=[];this._createEditingOverlay();this._syncEditableButtons();this._bindEvents();this._executeOrBindPlugInsertPoint();this.once("initializedChange",this._onceInitializedChange,this);this.envInit()},_bindEvents:function(){this._setEditingEvent(this.get("editingEvent"));this.on("editingButtonsChange",this._syncEditableButtons,this);this.onHostEvent("editableChange",this._onBlur,this);this.afterHostEvent("dropped",this._afterDropped,this);this.after("editingChange",this._afterEditingChange,this);this.on("editingEventChange",this._onEditingEventChange,this);this.after("dropZoneLockedChange",this._afterDropZoneLockedChange,this);this.after(["resizableChange","resizeNodeChange"],this._syncResizable,this);this.afterHostEvent("blockEditor|focusedChange",this._afterFocusedChange,this);this._handles.push(this._model.after("blockEditor|floatDirChange",this._floatChange,this));this._handles.push(this.get("host").get("boundingBox").on("gesturemovestart",function(e){i(".yui3-resize-handle",true)&&e.stopPropagation()}));this.on("remove",this.removeBlock,this)},_onceInitializedChange:function(){this._initFocused();this._syncResizable();this._initEditable();this._initLockedLayout();this._initLayoutDrop()},_initLockedLayout:function(){var e=this.get("host").get("boundingBox");e.toggleClass("sqs-block-locked-layout",this.get("lockedLayout"))},_createEditingOverlay:function(){var e=this.get("editingOverlay");e&&e.appendTo(this._bb)},_executeOrBindPlugInsertPoint:function(){if(!this._layoutHasInsertPoints())return;if(this._canPlugInsertPointsNow())this._plugInsertPoint();else{this._handles.push(this.onceAfterHostEvent("renderedChange",function(e){this._canPlugInsertPointsNow()&&this._plugInsertPoint()},this));this.afterHostEvent("layout-rendered",this._plugInsertPoint,this)}},_canPlugInsertPointsNow:function(){var e=this.get("host");var t=e.get("contentBox");return e.get("rendered")&&!t.ancestor(".sqs-layout-rendering")},_updateModel:function(e){this._model.setAttrs(e);this.get("host").get("isNewBlock")&&this.get("host").set("isNewBlock",false)},_afterFocusedChange:function(e){if(e.newVal){this._onFocus();this._syncResizable()}else this._onBlur()},_afterEditingChange:function(e){n.Lang.isValue(this._bb.getDOMNode())&&this._bb.toggleClass("sqs-block-editing",e.newVal)},_initEditable:function(){var e=this.get("host");if(e.get("editable")){this._bb.addClass("sqs-block-editable");var t=this.get("defaultEditingMode");var a=e.get("editOnStart");t&&a&&this._enableEditing()}},_initFocused:function(){var e=this.get("host");(e.get("isNewBlock")||e.get("editOnStart"))&&e.get("focusHandler").giveBlockSyntheticFocus(e)},_syncResizable:function(){this._setBlockResizable(this.get("resizable")&&this.get("host").get("focused"))},_hasResizablePlugin:function(){var e=n.SQS.LayoutEngine.Block.Plugin.Resizable;var t=this.get("host");return t.hasPlugin(e.NS)},_setBlockResizable:function(e){var t=n.SQS.LayoutEngine.Block.Plugin.Resizable;var a=this.get("host");var i=this._hasResizablePlugin();e&&!i?a.plug(t,{resizeNode:this.get("resizeNode"),blockEditor:this}):!e&&i&&a.unplug(t.NS)},cleanBlock:function(){this._syncEditableButtons()},_initLayoutDrop:function(){this.get("lockedLayout")||(this.drop=new n.SQS.LayoutEngine.Layout.Drop({node:this._bb,groups:["blocks"],lock:!!this._model.get("floatDir")}))},_plugInsertPoint:function(){this.get("host").hasPlugin(n.SQS.LayoutEngine.Layout.InsertPoint.NS)||this.get("host").plug(n.SQS.LayoutEngine.Layout.InsertPoint,{layoutNode:this._bb.ancestor(".sqs-layout"),divideSelectors:this.get("selectorsForInsertPoints")})},_layoutHasInsertPoints:function(){return this.get("host").get("editController").get("supportsInsertPoints")&&!this.get("host").get("editController").isMobileApp()&&!this.get("lockedLayout")},_floatChange:function(){this.set("dropZoneLocked",!!this._model.get("floatDir"));this._bb.one(".sqs-helper")&&(this.get("host").get("model").get("floatDir")?this._bb.one(".sqs-helper").show():this._bb.one(".sqs-helper").hide())},_afterDropped:function(e){e.target.blockEditor.syncPromoteOverlay&&e.target.blockEditor.syncPromoteOverlay();var t=this._cb.ancestor(".sqs-layout").all(".sqs-block").getDOMNodes();n.Array.each(t,function(e){var t=n.Widget.getByNode(e);t.set("promoted",this._model.layout.isPromotedBlock(t))},this)},_afterDropZoneLockedChange:function(e){this.drop&&this.drop.set("lock",e.newVal)},_onEditingEventChange:function(e){this._setEditingEvent(e.newVal)},_setEditingEvent:function(e){if(this.editingEventListeners.length>0){n.Array.each(this.editingEventListeners,function(e){e.detach()});this.editingEventListeners=[]}if(e){n.Lang.isString(e)&&(e=[e]);n.Array.each(e,function(t){var e=this.get("host").get("boundingBox").on(t,function(e){"contextmenu"===t&&e.halt();this._enableEditing()},this);this.editingEventListeners.push(e)},this)}},_enableEditing:function(){this.set("editing",true)},_disableEditing:function(){this.set("editing",false)},removeBlock:function(e){this.get("host").removeBlock(true===e);this._model.destroy({remove:true});this.destroy()},destructor:function(){this.get("host").detach("blockEditor|*");this.get("host").get("model").detach("blockEditor|*");if(this.editingEventListeners){n.Array.each(this.editingEventListeners,function(e){e.detach()});this.editingEventListeners=null}this.drop&&this.drop.destroy();var e=this.get("editingOverlay");n.Lang.isValue(e)&&e.remove(true);this.get("host").get("boundingBox").removeClass("sqs-block-editable");this.get("host").get("boundingBox").removeClass("sqs-block-editing");this.get("host").unplug(n.SQS.LayoutEngine.Layout.InsertPoint);this._setBlockResizable(false);this._editingButtons&&this._editingButtons.destroy();this._model=null;this._bb=null;this._cb=null}},{NS:"blockEditor",ATTRS:{editing:{value:false,setter:function(e){return!!(e&&this.get("host").get("editable"))}},editingOverlay:{valueFn:function(){return null},validator:function(e){return null===e||e instanceof n.Node}},dropZoneLocked:{value:false},lockedLayout:{getter:function(){return this.get("host").get("lockedLayout")}},selectorsForInsertPoints:{value:"",validator:n.Lang.isString},minHSize:{value:1,validator:n.Lang.isNumber},resizable:{value:false},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizeDefaultSize:{value:75},resizeSnapToDefaultSize:{value:true},snapToThreshold:{value:10,validator:n.Lang.isNumber},editingEvent:{value:null,lazyAdd:false},editingButtons:{value:false},includeEdit:{value:true},defaultEditingMode:{value:false}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-utils","@sqs/layout-engine/widget-resize"]})},7587:function(e,t){YUI.add("@sqs/layout-engine/event-registrar",function(a){a.namespace("SQS.LayoutEngine.Mixins");a.SQS.LayoutEngine.Mixins.EventRegistrar=a.Base.create("event-registrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},7588:function(e,t,a){var s=a(43);var l=a(6826);YUI.add("@sqs/layout-engine/layout-block-focus-handler",function(r){r.namespace("SQS.LayoutEngine.Singletons");r.namespace("SQS.LayoutEngine.Block");var i=false;var n=["#avpw_holder",".dialog-choose-image-picker-url",".dialog-content-type.flyout",".dialog-minimal-video-editor.flyout",".dialog-screen-overlay",".image-picker-overlay",".ReactModal__Overlay",".sqs-image-picker",".sqs-item-view",".sqs-prevent-block-focus-change",".sqs-widgets-confirmation",".sqs-widgets-confirmation-overlay",".sqs-wysiwyg-toolbar-mobile",".sqsp-tooltip",".workflow-flyout",".CCModalOverlay"].join(", ");var o=r.SQS.LayoutEngine.Block.BlockFocusHandler=r.Base.create("BlockFocusHandler",r.Base,[],{mouseMoveThreshold:10,initializer:function(){var e=r.SQS.LayoutEngine._hDocFocus;this._ensureDefaultFocusIsRemoved();if(!e){e={};e=r.SQS.LayoutEngine._hDocFocus=r.one(r.config.doc).on("gesturemovestart",r.bind(this._onDocMouseDown,this));r.config.doc.addEventListener("click",this._captureClicks.bind(this),{capture:true});e.listeners={count:0}}e.listeners[r.stamp(this,true)]=true;e.listeners.count++},_captureClicks:function e(t){if(this.isClosingDialog){if(t.target.className.indexOf("confirmation-button")>-1)return;t.preventDefault();t.stopImmediatePropagation();t.stopPropagation()}},isSquarespaceApp:function(){return r.Object.hasKey(window,"MOBILEAPP")},_getBlockDialog:function(e){return s(e,"blockEditor.configDialog")},_isDialogOpen:function(e){var t=this._getBlockDialog(e);return t&&t.get("visible")},_getBlockFromNode:function(e){var t=r.Lang.isValue(e)?l(e,".sqs-block",true):null;return r.Widget.getByNode(t)},_getContentItemFromNode:function(e){var t=null;r.Lang.isValue(e)&&(t=l(e,".sqs-html, .sqs-image",true,".sqs-block"));return r.Widget.getByNode(t)},getCurrentlyFocused:function(){return{block:o._activeBlock,content:o._activeContentItem,target:o._activeTarget}},_ensureDefaultFocusIsRemoved:function(){r.Widget._hDocFocus&&r.Widget._hDocFocus.detach()},mouseUpPropagationStopped:function(e){this.fire("mouseUpStopped",e)},preventBlockFocus:function(){this._detachMouseEvents()},_isSelectBlockEvent:function(e){return e&&("macintosh"===r.UA.os&&e.metaKey||"macintosh"!==r.UA.os&&e.ctrlKey)},_isFocusMaintainingEvent:function(e){return e&&l(e.target,n,true)},_isActiveBlockDialogEvent:function(e){var t=o._activeBlock;if(!e||!t)return false;if(!this._isDialogOpen(t))return false;var a=this._getBlockDialog(t).get("dialog");var i=[a].concat(a.childDialogs);for(var n=0;n<i.length;n++){var s=i[n];if(s.el&&(s.el===e.target||s.el.contains(e.target)))return true}return false},_onDocMouseDown:function(e){var t=r.one(r.config.doc);this._touchPos={x:e.pageX,y:e.pageY,scrollTop:r.config.doc.body.scrollTop};this._detachMouseEvents();this._ensureDefaultFocusIsRemoved();this._hDocMouseMove=t.on("gesturemove",r.bind(this._onDocMouseMove,this));this._hDocMouseUp=t.on("gesturemoveend",r.bind(this._onDocMouseUp,this));this._preventedMouseup=this.on("mouseUpStopped",this._onMouseUpStopped,this)},_onDocMouseMove:function(e){var t=this._touchPos;var a=this.mouseMoveThreshold;var i=Math.abs(t.x-e.pageX);var n=Math.abs(t.y-e.pageY);(i>a||n>a)&&(!this.isSquarespaceApp()&&e&&l(e.target,".sqs-block-html .sqs-wysiwyg-editor",true)?this._onDocMouseUp(e):this._detachMouseEvents())},_onDocMouseUp:function(e){this._detachMouseEvents();this._onDocFocus(e)},_onMouseUpStopped:function(e){e.target=e.details[0].target;this._onDocMouseUp(e)},_handleFocusChange:function(e){if(!e||!e.target)return;var t=o._activeBlock;var a=this._getBlockFromNode(e.target);if(t===a){this._handleContentItemFocusChange(e);return}if(t&&this._isDialogOpen(t)){this._handleDialogOpenFocusChange(t,a,e);return}this._handleBlockFocusChange(t,a,e)},_handleContentItemFocusChange:function(e){var t=r.Lang.isValue(e)?this._getContentItemFromNode(e.target):null;var a=o._activeContentItem;if(this._shouldBlockContentItemFocusChange(t,a,e)){a&&this._blurChild(a);t&&this._focusChild(t)}},_handleDialogOpenFocusChange:function(e,t,a){this.isClosingDialog=true;var i=this._getBlockDialog(e).get("dialog");var n=r.bind(function(){this.isClosingDialog=false;t&&this._focusBlock(t,a);this._blurBlock(e)},this);var s=r.bind(function(){this.isClosingDialog=false},this);this._onDialogClose(i,n,s);i.close(a,false)},_handleBlockFocusChange:function(e,t,a){t&&this._focusBlock(t,a);if(e){this._blurBlock(e,a);t||(o._activeBlock=null)}},_onDocFocus:function(e){if(this.isSquarespaceApp())return;if(this._isFocusMaintainingEvent(e))return;if(this._isActiveBlockDialogEvent(e))return;var t=e?e.target:null;o._activeTarget=t;var a=this._isSelectBlockEvent(e);a||this._handleFocusChange(e);if(!r.UA.mobile){var i=this._getBlockFromNode(t);var n=r.Lang.isValue(i)&&i.get("selected")>0;if(!n){if(!a){this._deselectAllSelectedBlocks();return}this._toggleBlockSelected(i)}}},giveBlockSyntheticFocus:function(e){var t=o._activeBlock;if(t===e)return false;this._handleBlockFocusChange(t,e)},_shouldBlockContentItemFocusChange:function(e,t,a){if(void 0===a)return true;if(l(a.target,n,true))return false;if(e===t||!r.Lang.isValue(e)&&!r.Lang.isValue(t))return false;return true},_focusBlock:function(e,t){e._domFocus=true;e._set("focused",true,{src:"ui"});if(e.get("isWidgetParent")&&r.Lang.isValue(t)){var a=this._getContentItemFromNode(t.target);this._shouldBlockContentItemFocusChange(a,o._activeContentItem,t)&&this._focusChild(a)}o._activeBlock=e;i&&console.log("[BlockFocusHandler]","focusing block",e._cssPrefix)},_focusChild:function(e){if(!e)return;e._domFocus=true;e._set("focused",true,{src:"ui"});e.get("boundingBox").addClass("sqs-content-item-focused");o._activeContentItem=e;i&&console.log("[BlockFocusHandler]","focusing content",e._cssPrefix)},focusBlock:function(e){var t=null;var a=null;if(e instanceof r.Node){a=e;t=r.Widget.getByNode(l(a,".sqs-block",true))}else e instanceof r.SQS.LayoutEngine.Block.Base&&(t=e);if(!r.Lang.isValue(t)){console.warn("[BlockFocusHandler] Could not find a block to focus.",e);return}this._focusBlock(t,{target:a})},_blurChild:function(e){e._domFocus=false;var t=e.get("boundingBox");if(!e.get("destroyed")&&t.getDOMNode()){e._set("focused",false,{src:"ui"});t.removeClass("sqs-content-item-focused")}else console.warn("Not blurring ... childWidget is either destroyed or its boundingBox no longer exists.");o._activeContentItem===e&&(o._activeContentItem=null)},_blurActiveNodeInside:function(e,t){var a=r.one(r.config.doc.activeElement);var i=e.get("boundingBox").getDOMNode();var n=r.Lang.isValue(a)&&r.Lang.isValue(l(a,function(e){return e===i},true));var s=t&&l(t.target,"textarea, input, [contenteditable=true]",true);n&&!s&&a.blur()},_blurBlock:function(e,t){e._domFocus=false;e.get("boundingBox").getDOMNode()?e._set("focused",false,{src:"ui"}):console.warn("Not blurring ... block boundingBox no longer exists.");e.get("isWidgetParent")&&e.each(this._blurChild,this);this._blurActiveNodeInside(e,t);o._activeBlock===e&&(o._activeBlock=null)},blurBlock:function(e){e instanceof r.Node&&(e=r.Widget.getByNode(e));this._blurBlock(e)},blurAllBlocks:function(){this._onDocFocus()},_selectBlock:function(e){if(!r.Lang.isValue(e))return;if(e.get("selected")>0)return;e._set("selected",1,{src:"ui"})},_deselectBlock:function(e){if(!r.Lang.isValue(e))return;if(!e.get("selected"))return;e.get("focused")&&this._blurBlock(e);e._set("selected",0,{src:"ui"})},_toggleBlockSelected:function(e){if(!r.Lang.isValue(e))return;if(e.get("selected")>0){this._deselectBlock(e);return}this._selectBlock(e)},_deselectAllSelectedBlocks:function(){var e=r.all(".sqs-selected.sqs-block");e.size()>0&&e.each(function(e){var t=r.Widget.getByNode(e);this._deselectBlock(t)},this)},_onDialogClose:function(e,t,a){var i;var n;i=e.once("dismiss",function e(){n.detach();"function"===typeof t&&t()},this);n=e.once("cancel-close",function e(){i.detach();"function"===typeof a&&a()},this)},_detachMouseEvents:function(){this._hDocMouseMove&&this._hDocMouseMove.detach();this._hDocMouseUp&&this._hDocMouseUp.detach();this._preventedMouseup&&this._preventedMouseup.detach()},destructor:function(){r.Widget.prototype._unbindDOM.call(this);this._detachMouseEvents()}});r.namespace("SQS.LayoutEngine.Singletons");r.SQS.LayoutEngine.Singletons.BlockFocusHandler=new o},"1.0",{requires:["base","model","event","widget","widget-parent"]})},7589:function(e,t,a){var n=a(100);YUI.add("@sqs/layout-engine/layout-insert-point-controller",function(i){i.namespace("SQS.LayoutEngine.Layout");i.SQS.LayoutEngine.Layout.InsertPointController=i.Base.create("insertPointController",i.Base,[],{initializer:function(){this._insertPointGroups=[];this._layoutNodesToAlign=[];this._resizeEmitter=new i.SQS.LayoutEngine.ResizeEmitter;this.after("visibleChange",this._afterVisibleChange,this);this.after("enabledChange",this._afterEnabledChange,this)},destructor:function(){this.toggleDisabled.cancel();this._disable();this._resizeEmitter.destroy();this._debounceAlignInsertPoints.cancel();this.destroyAllInsertPoints()},registerInsertPoint:function(e,t){if(!t){console.log("[IPC] No layout node found.");e.destroy();return}var a=this._findInsertPointGroup(t);i.Lang.isNull(a)&&(a=this._initNewInsertPointGroup(t));a.insertPoints.push(e);this._setInsertPointNodes();a.events.push(e.after("insertPointsChange",this._setInsertPointNodes,this))},deregisterInsertPoint:function(e,t){var a=this._findInsertPointGroup(t);if(!i.Lang.isNull(a)){a.insertPoints.remove(e);0===a.insertPoints.length&&this._deleteInsertPointGroup(a)}},_findInsertPointGroup:function(t){return i.Array.find(this._insertPointGroups,function(e){return e.layoutNode===t})},_initNewInsertPointGroup:function(e){var t={layoutNode:e,insertPoints:[],events:[]};e.LayoutBuilder&&t.events.push(e.LayoutBuilder.on("widget:contentUpdate",function(){this.alignInsertPoints(e)},this));e.LayoutEditor&&t.events.push(e.LayoutEditor.on("destroy",function(){this.destroyAllInsertPoints(e)},this));this._insertPointGroups.push(t);return t},_deleteInsertPointGroup:function(e){i.Array.each(e.events,function(e){e.detach()});this._insertPointGroups.remove(e)},destroyAllInsertPoints:function(t){var e=this._insertPointGroups;e.length>1&&i.Lang.isValue(t)&&(e=i.Array.filter(e,function(e){return e.layoutNode===t}));i.Array.each(e,function(e){i.Array.each(e.insertPoints,function(e){e.destroy()});this._deleteInsertPointGroup(e)},this)},alignInsertPoints:function(e,t){i.Lang.isValue(e)&&-1===i.Array.indexOf(this._layoutNodesToAlign,e)&&this._layoutNodesToAlign.push(e);t?this._alignInsertPoints(true):this._debounceAlignInsertPoints()},_alignInsertPoints:function(t){if(!t&&!this.get("enabled"))return;var e=this._insertPointGroups;var a=this._layoutNodesToAlign;e.length>1&&a.length&&(e=i.Array.filter(e,function(e){return i.Array.indexOf(a,e.layoutNode)>-1}));i.Array.each(e,function(e){i.Array.each(e.insertPoints,function(e){e.align(t)})},this);this.set("visible",true);this._layoutNodesToAlign=[]},_debounceAlignInsertPoints:n(function(){this._alignInsertPoints()},50),_setInsertPointNodes:function(){this.set("insertPointNodes",i.all(".sqs-layout-insert-point"))},hide:function(){this.set("visible",false)},show:function(){this.set("visible",true);this.alignInsertPoints()},_afterEnabledChange:function(e){e.newVal?this._enable():this._disable()},_afterVisibleChange:function(e){this.toggleVisible(e.newVal)},toggleVisible:function(e){i.one("html").toggleClass("sqs-hide-insert-points",!e)},toggleDisabled:n(function(e){this._toggleDisabled(e)},30),_toggleDisabled:function(e){if(e){this.disable();return}i&&i.config&&i.config.doc&&!i.config.doc.querySelector(".sqs-block-editing:not(.sqs-block-html)")&&this.enable()},disable:function(){this.setAttrs({visible:false,enabled:false})},_disable:function(){this._mousemove&&this._mousemove.detach();this._resizeEmitter.detachAll()},enable:function(){this.set("enabled",true)},_enable:function(){this.alignInsertPoints();this._mousemove=i.one(i.config.doc).on("mousemove",i.throttle(this._onMouseMove,100),this);this._resizeEmitter.on("resize:start",this.hide,this);this._resizeEmitter.on("resize:end",this.show,this)},_onMouseMove:function(e){var s=e.pageX;var r=e.pageY;var o=80;var l=80;var c=12;i.Lang.isValue(this.get("insertPointNodes"))&&this.get("insertPointNodes").each(function(e){var t=e.getXY();var a=s-(t[0]+c);var i=r-(t[1]+c);var n;n=Math.abs(i)<=l&&"row"===e.getData("ipType")?1:Math.floor(1/(Math.pow(a,2)/Math.pow(o,2)+Math.pow(i,2)/Math.pow(l,2)));if(n!==e.lastScale){e.toggleClass("sqs-fullsize",n>=1);e.lastScale=n}})}},{ATTRS:{enabled:{value:false},visible:{value:false},insertPointNodes:{}}});i.namespace("SQS.LayoutEngine.Singletons");i.SQS.LayoutEngine.Singletons.InsertPointController=new i.SQS.LayoutEngine.Layout.InsertPointController},"1.0",{requires:["base","node","event","@sqs/layout-engine/resize-emitters","@sqs/layout-engine/layout-insert-block-menu-web-base"]})},7590:function(e,t){YUI.add("@sqs/layout-engine/resize-emitters",function(n){n.namespace("SQS.LayoutEngine");n.SQS.LayoutEngine.ResizeEmitter=n.Base.create("ResizeEmitter",n.Base,[],{initializer:function(){this.resizeEvent=n.on("resize",this._handleResize,n.config.win,this);this.after("resizingChange",this._afterResizingChange);if(this._requiresSizeCalculating()){this.on("resize:end",this._resetSize);this._resetSize()}},destructor:function(){if(this.timer){this.timer.cancel();this.timer=null}this.resizeEvent.detach();this.resizeEvent=null},_resetSize:function(){this.setAttrs({width:n.config.win.innerWidth,height:n.config.win.innerHeight})},_afterResizingChange:function(e){var t=e.newVal?"resize:start":"resize:end";this.fire(t)},_getWindowDiff:function(e){var t=n.config.win["inner"+e.capitalize()];var a=this.get(e);return Math.abs(t-a)},_requiresSizeCalculating:function(){return this.get("threshold")>0||n.Lang.isValue(this.get("axis"))},_canEmitResizeEvent:function(){var e;var t;var a=this.get("axis");var i=this.get("threshold");if(n.Lang.isValue(a)){t=a===this.constructor.AXES.X?"width":"height";e=this._getWindowDiff(t)>i}else e=this._getWindowDiff("width")>i||this._getWindowDiff("height")>i;return e},_handleResize:function(){if(!this.get("resizing")){if(this._requiresSizeCalculating()&&!this._canEmitResizeEvent())return;this.set("resizing",true)}this.timer&&this.timer.cancel();this.timer=n.later(this.get("timeout"),this,function(){if(!n.Env)return;this.set("resizing",false)});this.fire("resize")}},{AXES:{X:"x",Y:"y"},ATTRS:{axis:{validator:function(e){return n.Object.values(this.constructor.AXES).includes(e)}},height:{},resizing:{validator:n.Lang.isBoolean,value:false},threshold:{validator:n.Lang.isNumber,value:0},timeout:{value:300},width:{}}})},"1.0",{requires:["base","event","node"]})},7591:function(e,t,a){var c=a(7592);var i=a(708);var n=a(5328);var d=a(8731);var s=a(5166);var r=a(24).t;YUI.add("@sqs/layout-engine/layout-insert-block-menu-web-base",function(l){l.namespace("SQS.LayoutEngine.Layout");var e=l.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase=l.Base.create("layoutInsertBlockMenuBase",l.Overlay,[l.WidgetParent,l.SQS.LayoutEngine.Layout.InsertBlockMenuMixin],{initializer:function(){l.Event.defineOutside("mousedown");this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._search=new l.SQS.LayoutEngine.Layout.BlockSearch;this._search.set("placeHolderText",this.get("searchPlaceHolderText"));this.add(this._search);this._cb.plug(l.SQS.LayoutEngine.Copies.Plugin.ScrollLock)},bindUI:function(){this.get("boundingBox").on("mousedownoutside",this._onMouseDownOutside,this);this.after("search:dataChange",this._searchFilter,this);this.on("search:submit",this._selectIcon,this)},renderUI:function(){this._search.render(this._cb);this._renderMenuIcons(this._getInsertableBlockItems());this.get("visible")||this._cb.hide()},destructor:function(){this.get("contentBox").unplug(l.SQS.LayoutEngine.Plugin.ScrollLock);this._search=null;this._selectedIcon=null;this._noResultBlock=null;this._hideOnScroll&&this._hideOnScroll.detach()},_onMouseDownOutside:function(e){this.get("align.node")&&e.target.getDOMNode()===this.get("align.node").getDOMNode()||this.hide()},_searchFilter:function(e){l.SQS.LayoutEngine.Events.fire("layout-engine:block-menu-search-query-change",{query:e.newVal});if(e.newVal){l.Array.invoke(this._categoryLabels,"hide");this._cb.addClass("sqs-searching")}else{l.Array.invoke(this._categoryLabels,"show");this._cb.removeClass("sqs-searching")}this._selectedIcon=null;var i=[];var n="string"===typeof e.newVal?c(e.newVal.replace().trim().toLowerCase()):"";l.Array.each(this._icons,function(e){var t=[e.get("label")].concat(e.get("tags"));var a=l.Array.find(t,function(e){return"string"===typeof e&&c(e.toLowerCase()).indexOf(n)>-1});if(n&&!a)e.hide();else{i.push(e);e.show()}},this);var t=i.length>0;var a=n.length>2;if(a&&t){var s=l.Array.map(i,function(e){return e.get("label")});var r=[];for(var o=0;o<s.length;o++)-1!=s.slice(o+1).indexOf(s[o])&&r.push(s);r.length>0&&l.Array.each(i,function(e){e.get("categoryLabel").show()})}if(t){this._selectedIcon=i[0];this._noResultBlock.hide()}else this._noResultBlock.show()},_selectIcon:function(){if(this._selectedIcon){var e=this._selectedIcon.get("boundingBox");this.hideMenu();this.createBlock(e,"search");this._selectedIcon=null}},_getInsertableBlockItems:function(){throw new Error("_getInsertableBlockItems not implemented")},_getBlockLabelInstance:function(e){return l.SQS.LayoutEngine.Block.Label},_renderMenuIcons:function(e){var s=this.get("editController").getRenderableBlocks(this.get("editMode"));var r=this.get("blockIcon");var o=l.merge(n.BlockTypeKeys,d);this._categoryLabels=[];l.Array.each(e,function(e){var i=this.add({type:this._getBlockLabelInstance(e),label:e.label,meta:e.meta||{},render:this._cb}).item(0);var n=l.Node.create('<div class="sqs-block-icon-container"></div>');this._categoryLabels.push(i);this._cb.append(n);l.Array.each(e.items,function(e){var t=s.get(o[e]);var a=new r(t);a.set("categoryLabel",i);a.set("defaultContentModel",t.defaultContentModel);a.render(n);this._icons.push(a)},this)},this);this._noResultBlock=l.Node.create('<div class="sqs-no-results-block">'+this.get("noResultsText")+"</div>");this._cb.append(this._noResultBlock);this._noResultBlock.hide()},_getDefaultDropInfo:function(){var e=this.get("targetNode");return{node:e,region:e.get("region"),direction:this.get("direction"),layout:this.get("layoutNode").LayoutEditor}},_onScroll:function(){var n=this._cb.get("region").top;var e=l.Array.map(this._categoryLabels,function(e,t){var a=e.get("boundingBox").get("region");var i=n-a.top;return i>0?i:null},this);for(var t=this._categoryLabels.length-1;t>=0;t--)this._categoryLabels[t].get("contentBox").setStyle("top",e[t])},show:function(){l.Lang.isValue(this.get("zIndexBase"))&&this.set("zIndex",this.get("zIndexBase")+1);this._cb.show();e.superclass.show.call(this);this._bindHideOnScroll();this.autoFocusSearch()},autoFocusSearch:function(){if(s())return;l.later(50,this,function(){this._search.focus()})},hide:function(){e.superclass.hide.call(this);this._cb.show();this._search.clearSearch(false);this._cb.set("scrollTop",0);l.Lang.isValue(this._hideOnScroll)&&l.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach()},hideMenu:function(){this._cb.hide();this._cb.set("scrollTop",0);l.DD.DDM.activeDrag||this.hide()},_bindHideOnScroll:function(){var t=this.get("layoutScrollNode");var a=t.get("scrollTop");var i=15;l.Lang.isValue(this._hideOnScroll)&&l.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach();this._hideOnScroll=t.on("scroll",function(){var e=Math.abs(t.get("scrollTop")-a);if(e>i){this._hideOnScroll.detach();this.hide()}},this)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{render:{value:true},blockIcon:{valueFn:function(){return l.SQS.LayoutEngine.LayoutInsert.BlockIconBase}},constrain:{value:true},tabIndex:{value:0},visible:{value:false},noResultsText:{value:r("No Results")},width:{value:420},height:{value:542},zIndex:{value:30011},direction:{value:"top"},targetNode:{getter:function(e){if(e)return e;var t=this.get("layoutNode");if(t&&t.getDOMNode()){var a=t.get("children").filter(".sqs-row");return a.item(a.size()-1)}}},scrollNode:{getter:function(e){var t=this.get("layoutNode").ancestor(".sqs-layout-scroll");return t||l.one(i(l.config.doc))}},layoutScrollNode:{getter:function(){var e=this.get("layoutNode").ancestor(".sqs-layout-scroll");return e||l.one(l.config.doc)}},layoutNode:{},zIndexBase:{}}})},"1.0",{requires:["@sqs/layout-engine/block-label","@sqs/layout-engine/block-search","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-block-icon-base","@sqs/layout-engine/layout-insert-block-menu-mixin","@sqs/layout-engine/plugin-scroll-lock","array-invoke","event-outside","overlay","widget-parent"]})},7594:function(e,t){YUI.add("@sqs/layout-engine/block-label",function(e){var t=e.namespace("SQS.LayoutEngine.Block").Label=e.Base.create("blockLabel",e.Widget,[e.WidgetChild],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").empty();this.get("contentBox").setHTML(this.get("label"))}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null}}})},"1.0",{requires:["base","widget","widget-child"]})},7595:function(e,t,a){var i=a(24).t;YUI.add("@sqs/layout-engine/block-search",function(t){t.namespace("SQS.LayoutEngine.Layout");var e=t.SQS.LayoutEngine.Layout.BlockSearch=t.Base.create("search",t.Widget,[t.WidgetChild,t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){this.publish("clear")},renderUI:function(){e.superclass.renderUI.call(this);this.get("contentBox").append('<input type="text">');this.get("contentBox").append('<div class="btn-clear hidden">Clear</div>');this._searchField=this.get("contentBox").one("input[type]");this._searchField.setAttribute("autocomplete","off");this._searchField.setAttribute("data-test",this.get("testAttribute"));this._searchField.setAttribute("name",this.get("name"));this._searchField.setAttribute("placeholder",this.get("placeHolderText"))},bindUI:function(){e.superclass.bindUI.call(this);this.after("dataChange",this._afterDataChange);this._searchField.after("valuechange",this._afterValueChange,this);this._searchField.on("click",function(e){e.halt()});this._searchField.after("keyup",function(e){if(13===e.keyCode){t.SQS.LayoutEngine.Events.fire("layout-engine:block-menu-search-query-enter",{query:this.get("data")});this.fire("submit")}else 27===e.keyCode?e.halt():this.fire("keyup",e)},this);this._registerEvent(this.get("contentBox").delegate("click",function(){this.fire("clear")},".btn-clear",this));this.on("clear",this.clearSearch,this,true);this.after("dataChange",this._checkForEmptySearch)},clearSearch:function(e){this.set("data","");e&&this.focus()},focus:function(){this._searchField.focus()},_afterValueChange:function(e){e.dataSync||this.set("data",e.newVal,{dataSync:true})},_afterDataChange:function(e){e.dataSync||this._searchField.set("value",e.newVal||"",{dataSync:true})},_checkForEmptySearch:function(e){this.get("contentBox").one(".btn-clear").toggleClass("hidden",""===e.newVal)}},{CSS_PREFIX:"sqs-search",ATTRS:{testAttribute:{value:"search"},placeHolderText:{value:i("Search Content Blocks")},name:{value:"search"}}})},"1.0",{requires:["base","widget","widget-child","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events"]})},7596:function(e,t){YUI.add("@sqs/layout-engine/events",function(e){e.namespace("SQS.LayoutEngine");var t=new e.EventTarget;t.publish("layout-engine:grid-cleaned");t.publish("layout-engine:remove-requested",{emitFacade:true,defaultFn:function(e){t.fire("layout-engine:remove-confirmed",e)}});t.publish("layout-engine:remove-confirmed");t.publish("layout-engine:open-block-menu");t.publish("layout-engine:block-menu-shown");t.publish("layout-engine:block-menu-hidden");t.publish("layout-engine:block-menu-search-query-change");t.publish("layout-engine:block-menu-search-query-enter");t.publish("layout-engine:edit-block");t.publish("layout-engine:insert-block");t.publish("layout-engine:delete-block");e.Lang.isValue(e.SQS.LayoutEngine.Events)||(e.SQS.LayoutEngine.Events=t)},"1.0",{requires:["event"]})},7597:function(e,t){YUI.add("@sqs/layout-engine/layout-insert-block-icon-base",function(e){e.namespace("SQS.LayoutEngine.LayoutInsert");e.SQS.LayoutEngine.LayoutInsert.BlockIconBase=e.Base.create("blockIcon",e.Widget,[],{renderUI:function(){this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},queueForDestruction:function(){this.get("boundingBox").addClass("sqs-destroyme")}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{categoryLabel:{},ctor:{value:null},defaultContentModel:{},floatable:{valueFn:function(){var e=this.get("ctor");var t=e.ATTRS.floatable||e.superclass.constructor.ATTRS.floatable;if(t&&void 0!==t.value)return t.value;return true}},id:{},label:{},tags:{}}})},"1.0",{requires:["base","widget"]})},7598:function(e,t,a){var s=a(1090);var u=a(708);var i=a(6251);var n=function(){};YUI.add("@sqs/layout-engine/layout-insert-block-menu-mixin",function(d){d.namespace("SQS.LayoutEngine.Layout");d.SQS.LayoutEngine.Layout.InsertBlockMenuMixin=d.Base.create("layout-insert-block-menu-mixin",d.Base,[],{initializer:function(){this._icons=[];this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._ec=this.get("editController");window.MOBILEAPP||this._initDragDelegate(this._getDragDelegateConfig());this._initClickDelegate();this.on("focusedChange",this._onFocusedChange,this);this._bindInstrumentationEvents()},destructor:function(){this._destroyScrollAnim();this.dragDelegate&&this.dragDelegate.destroy();this._detachClickDelegate();this._bb=null;this._cb=null;this._ec=null;this.debouncedDragDrag&&this.debouncedDragDrag.cancel()},_bindInstrumentationEvents:function(){this.after("visibleChange",function(e){var t=d.Object.getValue(d.config.win,"Static.IN_BACKEND".split("."));var a=e.newVal?"layout-engine:block-menu-shown":"layout-engine:block-menu-hidden";d.SQS.LayoutEngine.Events.fire(a,{backend:t})},this)},renderUI:function(){this._renderMenuIcons(d.Array.filter(this._getInsertableBlockItems(),d.Lang.isValue))},_getInsertableBlockItems:function(){return[]},_renderMenuIcons:function(e){console.warn("Unimplemented method _renderMenuIcons.")},_getDragDelegateConfig:function(){return null},_initDragDelegate:function(e){this.dragDelegate=new d.SQS.LayoutEngine.Layout.DragDelegate(d.merge({container:this._bb,nodes:this.get("nodes"),dragConfig:{groups:["blocks"],clickTimeThresh:i.DRAG_CLICK_TIME_THRESHOLD},enableDragScroll:true,scrollNode:this.get("scrollNode"),dragProxyConfig:{cloneNode:true,hideOriginalNode:false,moveOnEnd:false,flyBack:false,containerNode:d.one(d.config.doc.body)},extraSyncShims:true,editController:this.get("editController")},e));this.dragDelegate.before("drag:start",this._ec.layoutBeforeDragStart,this._ec);this.dragDelegate.on("drag:start",this._dragStart,this);this.dragDelegate.on("drag:end",this._dragEnd,this);this.after("scrollNodeChange",function(e){this.dragDelegate.set("scrollNode",e.newVal)},this)},_initClickDelegate:function(){var e=d.UA.mobile?"tap":"click";this.clickDelegate=d.delegate(e,this._onClick,this._bb,this.get("nodes"),this)},_detachClickDelegate:function(){this.clickDelegate&&this.clickDelegate.detach()},_dragStart:function(e){this._detachClickDelegate();this._ec.set("selection",null);this._ec.set("dropInfo",null);this._ec.layoutDragStart(this.get("layoutNode"));this.hideMenu()},_dragDrag:function(e){var t=this.get("isDragging");t&&e.pageX>d.config.doc.body.offsetWidth-this._menuWidth/3?this.set("isDragging",false):!t&&e.pageX<d.config.doc.body.offsetWidth-this._menuWidth&&this.set("isDragging",true)},_dragEnd:function(e){this.hide();this.createBlock(d.DD.DDM.activeDrag.get("node"),"dragDrop");this._ec.layoutDragEnd();this._initClickDelegate()},_onClick:function(e){e.preventDefault();this.hideMenu();this.createBlock(e.target,"click")},_getDefaultDropInfo:function(){return null},createBlock:function(e,t){"dragDrop"!==t&&this._ec.set("dropInfo",this._getDefaultDropInfo());if(!d.Object.getValue(this._ec.get("dropInfo"),["node","_node"])){console.warn("[block-menu] No target node to drop a new block around.");return}var a=this._instantiateNewBlock(e,t);if(!a)return;a.trackEngagementCreate&&a.trackEngagementCreate({interaction:t});this._ec.set("selection",a.get("boundingBox"));this._ec.insertBlockToLayout();this._afterNewBlockInsert(a)},_instantiateNewBlock:function(e,t){var a;var i;var n=d.Widget.getByNode(e);var s=n.get("ctor");var r=true;var o={editable:false,visible:false,isNewBlock:true,editOnStart:r,editMode:this.get("editMode"),editController:this.get("editController")};if(e.hasClass("sqs-destroyme")){e.removeClass("sqs-destroyme");return null}var l=this._ec.get("dropInfo").node;l&&(a=l.ancestor(".sqs-layout"));o.render=a||true;i=n.get("defaultContentModel");i&&(o.defaultContentModel=i);return new s(o)},_afterNewBlockInsert:function(e){var t=e.get("boundingBox");var a=this.get("layoutNode")||t.ancestor(".sqs-layout");var i=a[d.SQS.LayoutEngine.Layout.Builder.NS].get("layout");e.onceAfter("editableChange",function(){setTimeout(this._scrollToBlockNode.bind(this,t),300)},this);e.setAttrs({editable:true,collectionId:d.Lang.isValue(i)?i.get("collectionId"):null})},_scrollToBlockNode:function(e){this._destroyScrollAnim();var t=this.get("scrollNode").getDOMNode();var a=e.getDOMNode();if(!t||!a)return;var i=this._getScrollOffsets(a,t);if(!i)return;var n={onEnd:this._destroyScrollAnim.bind(this)};this._scrollAnim=s(t,i,n)},_getScrollOffsets:function(e,t){var a=0;var i=0;if(u(d.config.doc)===t){var n=d.config.win.innerHeight;var s=e.getBoundingClientRect();var r=44;if(s.top>0&&s.top<n-r)return;var o=d.config.doc.documentElement.getBoundingClientRect();var l=66;a=s.left-o.left;i=s.top-o.top-l}else{var c=22;a=e.offsetLeft;i=e.offsetTop-c}return{left:a,top:i}},_destroyScrollAnim:function(){if(this._scrollAnim){this._scrollAnim.isRunning()&&this._scrollAnim.pause();this._scrollAnim=null}},hideMenu:n,_onFocusedChange:n},{ATTRS:{nodes:{value:".sqs-blockicon"},scrollNode:{},layoutNode:{},editController:{valueFn:function(){console.error("Block Menu Error, must pass editController instance")}}}})},"1.0",{requires:["anim","anim-easing","base","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/layout-drag"]})},7599:function(e,t){YUI.add("@sqs/layout-engine/layout-drag",function(y){y.namespace("SQS.LayoutEngine.Layout");y.SQS.LayoutEngine.Layout.DragDelegate=y.Base.create("LayoutDragDelegate",y.SQS.DDWrappers.DD.Delegate,[],{initializer:function(){this.dd.plug(y.SQS.DDWrappers.Plugin.DDSuperProxy,this.get("dragProxyConfig"));this.before("drag:start",this._beforeDragStart);this.after("drag:start",this._afterDragStart);this.on("drag:over",this._dragOver);this.on("drag:end",this._dragEnd);this.on("scroll:start",this._onDDScrollStart);this.on("scroll:end",this._onDDScrollEnd);y.UA.mobile&&this.get("preventScrollOnTouch")&&this._preventScrollOnTouch();var e=this.get("editController");this.after("edgeInfoChange",e.processEdgeInfo,e)},_preventScrollOnTouch:function(){this.on("drag:mouseDown",function(e){e.ev.preventDefault()},this);this.get("container").on("touchmove",function(e){this.dd.get("lock")||e.preventDefault()},this)},_beforeDragStart:function(){y.DD.DDM.syncActiveShims();this.get("blockFocusHandler").preventBlockFocus();this.get("blockFocusHandler").blurAllBlocks();var e=y.DD.DDM.activeDrag.get("node");var t=y.Widget.getByNode(e);this.dd.setAttrs({dragWidget:t,dragNodeRegion:e.get("region")})},_afterDragStart:function(){this.get("extraSyncShims")&&y.later(250,this,function(){y.DD.DDM.syncActiveShims()})},_dragOver:function(e){if(e.drop.get("lock"))return;var t=this.getNearestEdge();t&&this.set("edgeInfo",t)},_dragEnd:function(){var e=y.DD.DDM.activeDrag.get("node");y.Object.getValue(e,"_node")&&e.setStyles({position:null,top:null,left:null});this.dd.setAttrs({dragWidget:null,dragNodeRegion:null})},getNearestEdge:function(){var e=null;var t=y.DD.DDM.activeDrop;var a=t.get("node");var i=a.ancestor(".sqs-block:not(.sqs-destroyme)",true,".sqs-layout");if(!i)return e;var n=a.get("region");var s=n.left;var r=n.top;var o=n.width+parseInt(a.getComputedStyle("marginLeft"),10)+parseInt(a.getComputedStyle("marginRight"),10);var l=n.height+parseInt(a.getComputedStyle("marginTop"),10)+parseInt(a.getComputedStyle("marginBottom"),10);var c=y.DD.DDM.activeDrag.mouseXY;var d={x:c[0]<s+o/2?"left":"right",y:c[1]<r+l/2?"top":"bottom"};var u="left"===d.x?c[0]-s:s+o-c[0];var g="top"===d.y?c[1]-r:r+l-c[1];var p=o;var h=Math.min(o,l);var f=u/p*100;var m=g/h*100;var v=f<m?d.x:d.y;var b=f<m?u:g;isNaN(b)||(e={node:a,direction:v,distance:b,quad:d,region:n});return e},_onDDScrollStart:function(e){this.set("edgeInfo",null);this._updateInsertMarkerLock(true);y.one("html").addClass("scrolling scrolling-"+e.direction)},_onDDScrollEnd:function(e){e.isScrollLocked||this._updateInsertMarkerLock(false);var t=y.one("html");t.removeClass("scrolling");t.removeClass("scrolling-down");t.removeClass("scrolling-up")},_updateInsertMarkerLock:function(e){var t=this.get("editController");t&&t.toggleInsertMarkerLock(e)}},{ATTRS:{container:{valueFn:function(){return y.one(y.config.doc.body)},lazyAdd:false},nodes:{value:".sqs-block"},groups:{value:null,lazyAdd:false},invalid:{value:".sqs-dd-invalid",validator:y.Lang.isString},editController:{value:null},edgeInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},extraSyncShims:{value:false,validator:y.Lang.isBoolean},scrollNode:{setter:function(e){return e.hasClass("sqs-layout")&&e.ancestor(".sqs-layout-scroll")||e}},preventScrollOnTouch:{value:false},dragProxyConfig:{value:{}},blockFocusHandler:{valueFn:function(){return y.SQS.LayoutEngine.Singletons.BlockFocusHandler}}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-delegate","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/layout-engine/scroll-into-view"]})},7600:function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-delegate",function(o){o.namespace("SQS.DDWrappers.DD");var a=9;var t=o.Node.create("<div>Temp Node</div>");var e=false;e&&(o.DD.DDM._debugShim=true);var i=o.SQS.DDWrappers.DD.Delegate=o.Base.create("ddDelegate",o.DD.Delegate,[o.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(e){this._syncDragReorderPlugin();this.after(["enableDragReorderChange","dragReorderConfigChange"],this._syncDragReorderPlugin);this._syncDragScrollPlugin();this.after(["enableDragScrollChange","dragScrollConfigChange","scrollNodeChange"],this._syncDragScrollPlugin);this._syncDragConstrainedPlugin();this.after(["enableDragConstrainedChange","dragConstrainedConfigChange"],this._syncDragConstrainedPlugin);this.on("scroll:end",function(){var e=o.Plugin.DDConstrained;this.dd[e.NS]&&this.dd[e.NS].resetCache()});this.on("reorder:sync",function(){o.later(300,this,this.syncTargets)})},destructor:function(){if(this._scrollListener){this._scrollListener.detach();this._scrollListener=null}this._cancelDragUnlockDelay();this.dd.unplug();this.unplug()},_syncDragReorderPlugin:function(){var e=o.SQS.DDWrappers.DD.Reorder;this._syncPlugin(e,this.get("dragReorderConfig"),this.get("enableDragReorder"))},_syncDragScrollPlugin:function(){var e=o.SQS.DDWrappers.DD.Scroll;this._syncPlugin(e,this.get("dragScrollConfig"),this.get("enableDragScroll"))},_syncDragConstrainedPlugin:function(){var e=o.Plugin.DDConstrained;this._syncPlugin(e,this.get("dragConstrainedConfig"),this.get("enableDragConstrained"))},_syncPlugin:function(e,t,a){var i=this.dd.hasPlugin(e.NS);a?i?this.dd[e.NS].setAttrs(t):this.dd.plug(e,o.merge(t,{bubbleTargets:this})):i&&this.dd.unplug(e.NS)},_onDragMouseDownMobile:function(){this._cancelDragUnlockDelay();this._preventDragStartOnScrollMobile();this.dd.set("lock",true);this._dragUnlockDelay=o.later(this.dd.get("clickTimeThresh"),this,function(){this.dd.set("lock",false)})},_cancelDragUnlockDelay:function(){if(this._dragUnlockDelay){this._dragUnlockDelay.cancel();this._dragUnlockDelay=null}},_preventDragStartOnScrollMobile:function(){var e=this.get("scrollEmitterNode");this._scrollListener&&this._scrollListener.detach();this._scrollListener=e.on(["scroll","overScroll"],function(){this._scrollListener.detach();this._cancelDragUnlockDelay()},this)},_afterDragEnd:function(){o.DD.DDM._noShim=this._shimState;var e=this.dd.get("node");this.set("lastNode",e);e&&o.Lang.isValue(e._node)&&e.removeClass(o.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",t)},syncTargets:function(){i.superclass.syncTargets.apply(this,arguments);if(this.dd.get("dragging")){var e=o.Plugin.DDConstrained;this.dd[e.NS]&&this.dd[e.NS].resetCache();var t=o.SQS.DDWrappers.DD.Scroll;this.dd[t.NS]&&this.dd[t.NS].resetCache()}},createDrop:function(e,t){var a=this.dd.get("dragging");if(a){if(e===this.dd.get("dragNode")||e===this.dd.get("node"))return;i.superclass.createDrop.apply(this,arguments);e.drop._activateShim()}else i.superclass.createDrop.apply(this,arguments)},_delMouseDown:function(e){var t=e.currentTarget;var a=this.dd;var i=t;var n=this.get("dragConfig");var s=this.get("nodes");var r=this.get("invalidHandles");if(t.test(s)&&!t.test(this.get("invalid"))&&(!r||!e.target.ancestor(r,true,s))){this._shimState=o.DD.DDM._noShim;o.DD.DDM._noShim=true;this.set("currentNode",t);a.set("node",t);n&&n.dragNode?i=n.dragNode:a.proxy&&(i=o.DD.DDM._proxy);a.set("dragNode",i);a._prep();a.fire("drag:mouseDown",{ev:e})}}},{ATTRS:{invalidHandles:{value:""},enableDragReorder:{value:false},dragReorderConfig:{value:{},setter:function(e){return o.merge({nodesSelector:this.get("nodes"),container:this.get("container")},e)}},enableDragConstrained:{value:false},dragConstrainedConfig:{value:{},setter:function(e){return o.merge({constrain:this.get("container")},e)}},enableDragScroll:{valueFn:function(){return this.get("enableDragReorder")}},dragScrollConfig:{value:{},getter:function(e){var t=o.merge(e,{scrollNode:this.get("scrollNode"),scrollEmitterNode:this.get("scrollEmitterNode"),contentNode:this.get("container").one(this.get("nodes"))||this.get("container")});if(this.get("enableDragConstrained")){var a=this.get("dragConstrainedConfig.constrain");a instanceof o.Node&&t.scrollNode.contains(a)&&(t.constraintNode=a)}return t}},scrollNode:{valueFn:function(){return o.one(this.get("container")).ancestor(function(e){var t=e.getComputedStyle("overflowY");return"auto"===t||"scroll"===t},true)||o.one(o.config.doc.body)}},scrollEmitterNode:{valueFn:function(){var e=this.get("scrollNode");if(e.test("html, body")){var t=e.getDOMNode();while(t.nodeType!==a)t=t.parentNode;return o.one(t)}return e}},target:{value:true}}})},"1.0",{requires:["base","dd","dd-constrain","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-reorder","@sqs/yui-dd-wrappers/dd-scroll","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},7601:function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-behaviors",function(s){var r="node";var i="nodes";var o="offsetHeight";var l="offsetWidth";var c="dragNode";var d="dragging";var a="drag:afterMouseDown";var n="container";var u=300;s.mix(s.DD.DDM,{bindTouchEvents:function(){var a=false;var i;function e(t){return function(e){clearTimeout(i);if(Array.from(e.targetTouches)>1)return;if("touchstart"===e.type){i=setTimeout(function(){n(t,e);a=true},u);return}if("touchend"===e.type){n(t,e);a=false;return}if(!a){a=false;return}e.preventDefault();n(t,e)}}function n(e,t){var a=t.touches[0];var i=a?a.target:t.target;var n=s.config.doc.createEvent("Event");n.initEvent(e,true,true);Object.keys(t).forEach(function(e){n[e]=t[e]});a&&Object.keys(a.__proto__).forEach(function(e){n[e]=a[e]});i.dispatchEvent(n)}s.config.doc.addEventListener("touchstart",e("mousedown"),true);s.config.doc.addEventListener("touchmove",e("mousemove"),{passive:false});s.config.doc.addEventListener("touchend",e("mouseup"),true)},_setupListeners:function(){this._createPG();this._active=true;s.one(s.config.doc).on("gesturemove",s.throttle(s.bind(this._move,this),this.get("throttleTime")),{standAlone:true});s.UA.mobile&&this.bindTouchEvents()},_pg_size:function(){if(this.activeDrag){var e=s.one(document.documentElement);var t=Math.max(e.get("scrollHeight"),e.get("docHeight"));var a=Math.max(e.get("scrollWidth"),e.get("docWidth"));this._pg.setStyles({position:"fixed",height:t+"px",width:a+"px"})}},_move:function(e){if(this.activeDrag&&false===this.activeDrag.get("lock")&&this.activeDrag.get("dragNode")&&this.activeDrag.get("dragNode").getDOMNode()){this.activeDrag._move.call(this.activeDrag,e);this._dropMove()}},_createPG:function(){var e=s.Node.create("<div></div>"),t=s.one("body"),a;e.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});e.set("id",s.stamp(e));e.addClass(s.DD.DDM.CSS_PREFIX+"-shim");t.prepend(e);this._pg=e;a=s.one("win");s.on("window:resize",s.bind(this._pg_size,this));a.on("scroll",s.bind(this._pg_size,this))},_pg_activate:function(){this._pg||this._createPG();var e=this.activeDrag.get("activeHandle"),t="auto";e&&(t=e.getStyle("cursor"));"auto"===t&&(t=this.get("dragCursor"));this._pg_size();this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:t});this._attachEventsOnPgActivate()},_pg_deactivate:function(){this._pg.setStyle("display","none");this._pg.detachAll();if(this._mouseEventsOutsideWindow){s.Array.invoke(this._mouseEventsOutsideWindow,"detachAll");this._mouseEventsOutsideWindow=[]}},_attachEventsOnPgActivate:function(){this._pg.on("mousemove",s.throttle(s.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",s.bind(this._end,this));this._mouseEventsOutsideWindow=[];this._pg.on("mouseleave",function(){var t=[0,0];var e=s.config.win;var a;var i;while(e.frameElement){a=e.frameElement.getClientRects()[0];t[0]+=a.left;t[1]+=a.top;e=e.parent;i=true}this._mouseEventsOutsideWindow.push(s.one(e).on("mousemove",s.throttle(s.bind(function(e){if(i){e.clientX-=t[0];e.clientY-=t[1];e.pageX=s.config.doc.body.scrollLeft+e.clientX;e.pageY=s.config.doc.body.scrollTop+e.clientY}this._move(e)},this),this.get("throttleTime"))),s.one(e).on("mouseup",s.bind(this._end,this)));this._pg.once("mouseenter",function(){if(this._mouseEventsOutsideWindow){s.Array.invoke(this._mouseEventsOutsideWindow,"detachAll");this._mouseEventsOutsideWindow=[]}},this)},this)}},true);var e=s.clone(s.DD.Drop.prototype._createShim);s.DD.Drop.prototype._createShim=function(){if(null===this.get(r)._node)return;if(!s.Env)return;e.call(this)};s.mix(s.DD.Drag.ATTRS,{dragDelegate:{value:null}},true);var t=s.clone(s.DD.Drag.prototype._unprep);s.mix(s.DD.Drag.prototype,{_prep:function(){this._dragThreshMet=false;var e=this.get(r);e.addClass(s.DD.DDM.CSS_PREFIX+"-draggable");this.get("dragDelegate")||e.on(s.DD.Drag.START_EVENT,s.bind(this._handleMouseDownEvent,this));e.on("mouseup",s.bind(this._handleMouseUp,this));e.on("dragstart",s.bind(this._fixDragStart,this))},_unprep:function(){if(null===this.get(r)._node)return;t.call(this)},start:function(){var e=s.DD.DDM;if(!this.get("lock")&&!this.get(d)){var t=this.get(r),a,i,n;this._startTime=(new Date).getTime();e._start();t.addClass(e.CSS_PREFIX+"-dragging");this.fire("drag:start",{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});t=this.get(c);if(this.proxy){this.get(r).removeClass(e.CSS_PREFIX+"-dragging");t.addClass(e.CSS_PREFIX+"-dragging")}n=this.nodeXY;a=t.get(l);i=t.get(o);this.get("startCentered")&&this._setStartPosition([n[0]+a/2,n[1]+i/2]);this.region={0:n[0],1:n[1],area:0,top:n[1],right:n[0]+a,bottom:n[1]+i,left:n[0]};this.set(d,true)}return this},_defMouseDownFn:function(e){var t=e.ev;this._dragThreshMet=false;this._ev_md=t;if(this.get("primaryButtonOnly")&&t.button>1)return false;if(this.validClick(t)){this._fixIEMouseDown(t);0!==s.DD.Drag.START_EVENT.indexOf("gesture")&&(this.get("haltDown")?t.halt():t.preventDefault());this._setStartPosition([t.pageX,t.pageY]);s.DD.DDM.activeDrag=this;!this.get("clickTimeThresh")&&this.get("clickPixelThresh")||(this._clickTimeout=s.later(this.get("clickTimeThresh"),this,this._timeoutCheck))}this.fire(a,{ev:t})}},true);s.mix(s.DD.Delegate.prototype,{initializer:function(){var e=this.get("container");e instanceof s.Node||!s.Lang.isFunction(e.getDOMNode)||this.set("container",s.Node(e.getDOMNode()));this._handles=[];var t=this.get(n);var a=s.merge({clickTimeThresh:this.get("clickTimeThresh"),clickPixelThresh:this.get("clickPixelThresh"),dragDelegate:this,bubbleTargets:this},this.get("dragConfig"));a.node=this.get("dragNode").cloneNode(true);this.get("handles")&&(a.handles=this.get("handles"));this.dd=new s.DD.Drag(a);this.dd.after("drag:end",s.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",s.bind(this._onNodeChange,this));this.dd.after("drag:mouseup",function(){this._unprep()});this._handles.push(s.delegate(s.DD.Drag.START_EVENT,s.bind(this._delMouseDown,this),t,this.get(i)));this._handles.push(s.on("mouseenter",s.bind(this._onMouseEnter,this),t));this._handles.push(s.on("mouseleave",s.bind(this._onMouseLeave,this),t));s.later(50,this,this.syncTargets);s.DD.DDM.regDelegate(this)}},true)},"1.0",{requires:["array-invoke","dd","dd-scroll","oop","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy"]})},7602:function(e,t){YUI.add("@sqs/yui-dd-wrappers/copies-position-animator",function(c){c.namespace("SQS.DDWrappers.Copies.PositionAnimator");c.SQS.DDWrappers.Copies.PositionAnimator=c.Base.create("PositionAnimator",c.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop"));this.set("originalLeft",this.get("host").get("offsetLeft"));this.previousPosition=this.get("host").getStyle("position")},release:function(e){var t=this.get("host").get("offsetTop");var a=this.get("host").get("offsetLeft");var i=this.get("baseSpeed")+(e?0:.2*Math.random());var n=e?0:200*Math.random();var s=this.get("originalTop")-t;var r=this.get("originalLeft")-a;this.get("host").setStyles({position:"relative",top:s,left:r,transition:"none"});var o=this;var l=this.get("host").anim({top:0,left:0},{from:{top:s,left:r},duration:i,end:function(){if(!this.get("node")._node)return;this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null});o.get("releasedFn")&&o.get("releasedFn")();o.fire("released")}});c.later(n,l,l.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:false},baseSpeed:{value:.2}}})},"1.0",{requires:["base","node","plugin"]})},7603:function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-superproxy",function(g){var p="dd-flying-back";g.namespace("SQS.DDWrappers.Plugin").DDSuperProxy=g.Base.create("DDSuperProxy",g.Plugin.DDProxy,[],{_init:function(){var e=g.DD.DDM;if(!e._proxy){e._createFrame();g.on("domready",g.bind(this._init,this));return}this._hands||(this._hands=[]);var t,a,i=this.get("host"),n=i.get("dragNode");n.compareTo(i.get("node"))&&e._proxy&&i.set("dragNode",e._proxy);g.each(this._hands,function(e){e.detach()});t=e.on("ddm:start",g.bind(function(){e.activeDrag===i&&i.get("node").inDoc()&&e._setFrame(i)},this));a=i.on("drag:end",g.bind(function(){if(this.get("flyBack"))this._flyBackAndCleanupProxy();else{this.get("moveOnEnd")&&i.get("node").setXY(i.lastXY);this._cleanupProxy()}},this));this._hands=[t,a]},clone:function(){var e=this.get("host");var t=e.get("node");var a=t.cloneNode(true);delete a._yuid;a.setAttribute("id",g.guid());a.setStyle("position","absolute");a.all('input[type="radio"]').removeAttribute("name");this.get("cloneClass")&&a.addClass(this.get("cloneClass"));this.get("containerNode").appendChild(a);e.set("dragNode",a);if(this.get("hideOriginalNode")){this._originalHostVisiblity=t.getStyle("visibility");t.setStyles({visibility:"hidden"})}return a},_cleanupProxy:function(){var e=this.get("host");var t=e.get("node");var a=e.get("dragNode");this.get("hideOnEnd")?a.setStyle("display","none"):this.get("hideOriginalNode")&&t.setStyles({visibility:this._originalHostVisiblity||null});if(this.get("cloneNode")){a.remove();e.set("dragNode",g.DD.DDM._proxy)}},_flyBackAndCleanupProxy:function(){var e=this.get("host");var t=e.get("node");var a=e.get("dragNode");var i=t.getDOMNode().getBoundingClientRect();var n=a.getDOMNode().getBoundingClientRect();var s=n.top-i.top;var r=n.left-i.left;this._cleanupProxy();var o=[];t.addClass(p);t.setStyles({transition:"none",zIndex:Math.pow(10,6)});t.setStyles({transform:"translate("+r+"px, "+s+"px)"});var l=this.get("flyBackDuration");var c="transform";g.UA.webkit&&(c="-webkit-transform");o.push({requireTicks:1,transition:c+" "+l+"s cubic-bezier(0.445, 0.05, 0.55, 0.95)"});o.push({requireTicks:1,transform:"translate(0px, 0px)"});function d(){t.setStyles({zIndex:null,transition:null});t.removeClass(p)}function u(){if(0===o.length)return;if(g.Lang.isNumber(o[0].requireTicks)&&o[0].numTicks!==o[0].requireTicks){g.Lang.isNumber(o[0].numTicks)?o[0].numTicks++:o[0].numTicks=0;g.config.win.requestAnimationFrame(u);return}var e=o.shift();g.UA.webkit&&e.transform&&(e.webkitTransform=e.transform);t.setStyles(e);g.config.win.requestAnimationFrame(u);0===o.length&&g.later(44,this,function(){d()})}g.config.win.requestAnimationFrame(u)}},{NS:"proxy",ATTRS:{cloneNode:{value:true},hideOriginalNode:{value:true},cloneClass:{value:null},movingClass:{value:null},flyBack:{value:true},flyBackDuration:{value:.3},moveOnEnd:{value:true},hideOnEnd:{value:false},containerNode:{getter:function(e){return e||this.get("host").get("node").get("parentNode")}}}})},"1.0",{requires:["anim","dd-proxy"]})},7604:function(e,t){var l={globalGrid:22};function a(n,s,r){var o;return function(){var e=this,t=arguments;var a=function(){o=null;r||n.apply(e,t)};var i=r&&!o;clearTimeout(o);o=setTimeout(a,s);i&&n.apply(e,t)}}YUI.add("@sqs/yui-dd-wrappers/dd-reorder",function(d){var s="dd-drag-grouped-item";var r=2;d.namespace("SQS.DDWrappers.DD");var o=d.SQS.DDWrappers.DD.Reorder=d.Base.create("reorder",d.Plugin.Base,[d.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("reorder");this.publish("reordered");this.publish("sync",{emitFacade:true,defaultFn:this._syncDropShims});this.onHostEvent("drag:start",this._onDragStart);this.onHostEvent("drag:enter",this._onDragEnter);this.onHostEvent("drag:align",this._onDragAlign);this.onHostEvent("drag:end",this._onDragEnd);this._plugProxyToHost()},_plugProxyToHost:function(){var e=this.get("host");var t=d.SQS.DDWrappers.Plugin.DDSuperProxy;var a=this.getAttrs(["movingClass","cloneClass"]);e.hasPlugin(t.NS)?e[t.NS].setAttrs(a):e.plug(t,a)},_onDragStart:function(){var t=this._getAllReorderableNodes();var e=this._filterReorderingNodesFrom(t);var a=e.length>1;var i=this.get("host").get("node");var n=this.get("host").get("dragNode");e.forEach(function(e){e.setData("startIndex",t.indexOf(e));a&&e!==i&&e.addClass(s)});if(a){e.length>1&&n.append(d.Lang.sub(o.TEMPLATE_ITEMS_COUNT,{count:e.length}));this.fire("sync")}this.set("reorderingNodes",e)},_filterReorderingNodesFrom:function(e){var t=this.get("selectedClassSelector");var a=this.get("host").get("node");var i=[a];if(this.get("enableGrouping")&&a.test(t)){var n=e.filter(function(e){e=d.one(e);return e!==a&&e.test(t)});i=i.concat(d.Array.map(n.getDOMNodes(),d.Node))}return i},_onDragEnter:function(e){if(e.drop.get("node").hasClass(s))return;var t=this._reorderNodes(e.drop.get("node"),e.drag.get("node"));this._fireReorderEvent(t)},_fireReorderEvent:function(a){var e=this.get("host");var i=e.get("node").getData("startIndex");var n=a;this.get("enableGrouping")&&d.Array.some(this.get("reorderingNodes").slice(1),function(e){var t=e.getData("startIndex");if(t<a||t===a&&t>i){n--;return false}return true});this.fire("reorder",{reorder:{node:e.get("node"),proxyNode:e.get("dragNode"),newIndex:a,visibleIndex:n}})},_onDragAlign:function(e){if(!this.get("enableGrouping"))return;var t=this.get("host").get("dragNode");var a={};a.top=parseInt(t.getComputedStyle("top"),10);a.left=parseInt(t.getComputedStyle("left"),10);var i=this.get("reorderingNodes");var n=i.length;var s=Math.pow(10,5);i.slice(1).forEach(function(e,t){if(t+1>r){e.setStyles({visibility:"hidden"});return}e.setStyles({top:a.top+(t+1)*l.globalGrid,left:a.left+(t+1)*l.globalGrid,zIndex:s+(n-t)})});t.setStyles({zIndex:s+n})},_onDragEnd:function(e){var t=this.get("reorderingNodes");t.length>1&&this._insertGroupNodesInOrder(t);var i=this._getAllReorderableNodes();var n=false;var a=d.Array.map(t,function(e){var t=e.getData("startIndex");var a=i.indexOf(e);e.clearData("startIndex");n||t===a||(n=true);return{node:e,newIndex:a,oldIndex:t}}).sort(function(e,t){return t.newIndex<e.newIndex});n&&this.fire("reordered",{reordered:this.get("enableGrouping")?a:a[0],allSiblings:i});this.set("reorderingNodes",[]);i.unplug(d.SQS.DDWrappers.Copies.PositionAnimator.NS)},_getAllReorderableNodes:function(){var e=this.get("nodesSelector");var t=this.get("cloneClass");t&&(e+=":not(."+t+")");this.get("enableGrouping")&&(e+=":not(."+s+")");return this.get("container").all(e)},_insertGroupNodesInOrder:function(e){d.Array.invoke(e,"removeClass",s);this._reorderNodes(e[0],e.slice(1));e.slice(1).forEach(function(e){e.setStyles({top:null,left:null,zIndex:null,visibility:null})})},_getNodesInBetween:function(e,t){var a=Math.min.apply(Math,e);var i=Math.max.apply(Math,e);var n=this.get("host").get("node").getDOMNode();return t.slice(a,i+1).filter(function(e){return e!==n})},_reorderNodes:function(t,e){var a=this._getAllReorderableNodes();var i=d.Lang.isArray(e);var n=i?e[0]:e;var s=a.indexOf(t);var r=a.indexOf(n);var o=[s,r];i&&o.push(a.indexOf(e[e.length-1]));var l=this._getNodesInBetween(o,a);this._rememberCurrentPosition(l);if(i){var c=t.getData("startIndex");e.forEach(function(e){if(e.getData("startIndex")<c)t.insert(e,"before");else{t.insert(e,"after");t=e}})}else t.insert(n,r<s?"after":"before");this._animateToMovedPosition(l);return s},_rememberCurrentPosition:function(e){e.each(function(e){e.positionAnimator||e.plug(d.SQS.DDWrappers.Copies.PositionAnimator,{releasedFn:this._syncDropShims});e.positionAnimator.hold()},this)},_animateToMovedPosition:function(e){e.each(function(e){e.positionAnimator.release(true)},this)},_syncDropShims:a(function(){d.DD.DDM.syncActiveShims(true)},30)},{TEMPLATE_ITEMS_COUNT:'<div class="dd-reorder-items-count">{count}</div>',NS:"dd-reorder",ATTRS:{container:{valueFn:function(){return this.get("host").get("container")},getter:function(e){if("string"===typeof e)return d.one(e);return e},validator:function(e){return"string"===typeof e||e instanceof d.Node}},nodesSelector:{value:""},selectedClassSelector:{value:".selected"},enableGrouping:{value:false},movingClass:{value:"yui3-dd-super-proxy-moving"},cloneClass:{value:"yui3-dd-super-proxy-clone"},reorderingNodes:{value:[]}}})},"1.0",{requires:["array-invoke","base","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},7605:function(e,t){YUI.add("@sqs/yui-dd-wrappers/mixins-event-registrar",function(a){a.namespace("SQS.DDWrappers.Mixins");a.SQS.DDWrappers.Mixins.EventRegistrar=a.Base.create("eventRegistrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},7606:function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-scroll",function(r){r.namespace("SQS.DDWrappers.DD");var s={NONE:0,UP:-1,DOWN:1};var a={};r.Object.each(s,function(e,t){a[e]=t.toLowerCase()});var o=r.SQS.DDWrappers.DD.Scroll=r.Base.create("scroll",r.Plugin.Base,[r.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("start");this.publish("end");this._registerEvent(this.get("host").before("drag:start",this._prepareScrollOnDragStart,this));this.onHostEvent("drag:drag",this._forceContentNodeDimension);this.onHostEvent("drag:end",this._cleanScrollPrep);this.onHostEvent("drag:enter",this._onDragEnterDropZone);this.onHostEvent("drag:exit",this._onDragExitDropZone);this.after("lockedChange",this._syncDirectionAndRelativeMouseY);this.after("directionChange",this._afterDirectionChange);this.after("scrollingChange",this._afterScrollingChange);this.set("isScrollNodeBody");this.after("scrollNodeChange",this.set.bind(this,"isScrollNodeBody"))},destructor:function(){this._cleanScrollPrep();this._stopScroll()},_afterScrollingChange:function(e){e.newVal?this.fire("start",{direction:a[this.get("direction")]}):this.fire("end",{isScrollLocked:this.get("locked")})},_prepareScrollOnDragStart:function(){var e=this.get("scrollNode");var t=this.get("contentNode");var a=this.get("isScrollNodeBody");var i=e.get("scrollHeight");var n=a?r.config.win.innerHeight:e.get("clientHeight");this._dragListener&&this._dragListener.detach();if(i>n){var s=e.get("region");a&&(s=r.merge(s,{bottom:s.top+n,height:n}));this._dragListener=this.onHostEvent("drag:drag",this._syncDirectionAndRelativeMouseY);this.setAttrs({scrollNodeRegion:s,scrollTopLimit:this._getScrollTopLimit(i,n),locked:Boolean(r.DD.DDM.activeDrop&&r.DD.DDM.activeDrop.get("lockScroll")),lockableTargets:r.Array.filter(r.DD.DDM.targets,function(e){return e.get("lockScroll")})})}this.setAttrs({contentNodeHeight:t.getComputedStyle("height"),contentNodeWidth:t.getComputedStyle("width")});e.setStyle("overflowX","hidden")},resetCache:function(){var e=this.get("scrollNode");var t=this.get("contentNode");var a=e.get("scrollHeight");var i=this.get("isScrollNodeBody")?r.config.win.innerHeight:e.get("clientHeight");this.setAttrs({scrollTopLimit:this._getScrollTopLimit(a,i),contentNodeHeight:t.getComputedStyle("height")})},_getScrollTopLimit:function(e,t){var a=0;var i=e-t;var n=this._getConstraintNodeOffset();if(n){a=o.clampValue(n.top,a,i);i=o.clampValue(n.bottom-t,a,i)}return{min:a,max:i}},_getConstraintNodeOffset:function(e){var t=this.get("constraintNode");if(!t)return null;var a=t.get("region");var i=this.get("contentNode").get("region");e="number"===typeof e?e:30;return{top:a.top-e-i.top,bottom:a.bottom+e-i.top}},_cleanScrollPrep:function(){if(this._dragListener){this._dragListener.detach();this._dragListener=null}if(this._delayTimer){this._delayTimer.cancel();this._delayTimer=null}this.set("direction",s.NONE);this.get("scrollNode").setStyle("overflowX",null);var e=this.get("contentNode");e&&e.getDOMNode()&&e.setStyles({height:null,width:null})},_afterDirectionChange:function(e){if(this._delayTimer){this._delayTimer.cancel();this._delayTimer=null}if(e.newVal===s.NONE){this._stopScroll();return}this._delayTimer=r.later(this.get("initialDelay"),this,this._startScroll)},_syncDirectionAndRelativeMouseY:function(){if(this.get("locked")){this.set("direction",s.NONE);return}this.set("relativeMouseY",this._getRelativeMouseY());this.set("direction",this._getNewScrollDirection())},_getRelativeMouseY:function(){var e=this.get("scrollNodeRegion");var t=this.get("host").mouseXY[1];this.get("isScrollNodeBody")&&(t+=e.top-this._getCurrentScrollTop());return{top:t-e.top,bottom:e.bottom-t}},_getNewScrollDirection:function(){var e=this.get("relativeMouseY");var t=this.get("pixelThreshold");var a=this.get("scrollTopLimit");var i=s.NONE;var n=this._getCurrentScrollTop();e.top<=t?n>a.min&&(i=s.UP):e.bottom<=t&&n<a.max&&(i=s.DOWN);return i},_startScroll:function(){if(r.Lang.isValue(this._scrollAnim))return;this._bindScrollEvents();this._scrollAnim=new r.Anim({node:this.get("scrollNode"),duration:.24,easing:"easeNone",to:{scroll:[0,this._getNextScrollTop()]}});this._scrollAnim.on("end",this._onScrollAnimEnd,this);this._scrollAnim.on("tween",this._getSyncActiveDragPosFn(),this);this.set("scrolling",true);this._scrollAnim.run()},_bindScrollEvents:function(){var e=this.get("scrollEmitterNode");var t=o.NS;e.detach(t+"|*");e.on(t+"|scroll",r.throttle(r.bind(function(){this._scrollAnim&&this._repositionLockableDropTargets()},this),20),this)},_getWeightedScrollSpeed:function(){var e=this.get("direction");var t=this.get("pixelThreshold");var a=this.get("relativeMouseY")[e===s.UP?"top":"bottom"];return Math.min(this.get("defaultSpeed")*(t-a)/t,this.get("maxSpeed"))},_getNextScrollTop:function(){var e=this.get("scrollTopLimit");var t=this.get("direction")*this._getWeightedScrollSpeed();return o.clampValue(this._getCurrentScrollTop()+t,e.min,e.max)},_getCurrentScrollTop:function(){return this.get("scrollNode").get("scrollTop")},_onScrollAnimEnd:function(){var e=this._getNextScrollTop();var t=this._getCurrentScrollTop();if(e!==t){this._scrollAnim.set("to.scroll",[0,e]);this._scrollAnim.run()}else{this.set("direction",s.NONE);this.set("scrolling",false)}},_getSyncActiveDragPosFn:function(){var a=this.get("host");var i=this._getCurrentScrollTop();if(!this.get("isScrollNodeBody"))return function(){a._alignNode(a.mouseXY)};return function(){var e=this._getCurrentScrollTop();var t=e-i;a.mouseXY=[a.mouseXY[0],a.mouseXY[1]+t];a._alignNode(a.mouseXY);i=e}},_stopScroll:function(){this.get("scrollEmitterNode").detach(o.NS+"|*");var e=this._scrollAnim;if(e){if(e.get("running")){e.detach("end");e.stop()}this._destroyScrollAnim()}this.set("scrolling",false);r.DD.DDM.syncActiveShims()},_destroyScrollAnim:function(){this._scrollAnim.destroy(true);this._scrollAnim=null},_onDragEnterDropZone:function(e){e.drop.get("lockScroll")&&this.set("locked",true)},_onDragExitDropZone:function(e){e.drop.get("lockScroll")&&this.set("locked",false)},_repositionLockableDropTargets:function(){r.Array.each(this.get("lockableTargets"),function(e){e.sizeShim()})},_forceContentNodeDimension:function(){this.get("contentNode").setStyles({width:this.get("contentNodeWidth"),height:this.get("contentNodeHeight")})}},{clampValue:function(e,t,a){return Math.max(t,Math.min(e,a))},NS:"ddScroll",ATTRS:{scrollNode:{value:null},isScrollNodeBody:{setter:function(){return this.get("scrollNode").test("body, html")}},scrollEmitterNode:{value:null,writeOnce:true},contentNode:{value:null,setter:function(e){var t=this.get("scrollNode");if(this.get("isScrollNodeBody"))return t;var a=e&&e.ancestor(function(e){return e&&e.ancestor()===t},true);a=a||(t.get("children").item(0)||t);return a}},constraintNode:{value:null},scrollNodeRegion:{value:null},contentNodeHeight:{value:"0px"},contentNodeWidth:{value:"0px"},scrollTopLimit:{value:{min:0,max:0}},relativeMouseY:{value:{top:0,bottom:0}},locked:{value:false},scrolling:{value:false},direction:{value:s.NONE},lockableTargets:{value:[]},initialDelay:{value:150},maxSpeed:{value:r.UA.mobile?300:800},defaultSpeed:{value:r.UA.mobile?150:400},pixelThreshold:{value:80}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},7607:function(e,t){YUI.add("@sqs/layout-engine/scroll-into-view",function(g){"use strict";g.Node.prototype.scrollIntoView=function(){var e=g.Node.getDOMNode(this.get("offsetParent"));if(!e)return this;var t={top:this.get("offsetTop"),bottom:this.get("offsetTop")+this.get("offsetHeight"),left:this.get("offsetLeft"),right:this.get("offsetLeft")+this.get("offsetWidth")};t.move=function(e,t){this.top+=t;this.bottom+=t;this.left+=e;this.right+=e};while(1){while(1){var a=null===e.offsetParent;var i=g.one(e),n=g.Node.getDOMNode(i)===g.config.doc.body,s=n?g.DOM.winWidth():e.clientWidth,r=n?g.DOM.winHeight():e.clientHeight;if(e.scrollWidth-i.horizMarginBorderPadding()>s||e.scrollHeight-i.vertMarginBorderPadding()>r)break;if(a)return this;t.move(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);e=e.offsetParent||e.parentNode}var o=a?g.config.doc.documentElement.scrollLeft||g.config.doc.body.scrollLeft:e.scrollLeft;var l=a?g.config.doc.documentElement.scrollTop||g.config.doc.body.scrollTop:e.scrollTop;var c={top:l,bottom:l+(a?g.DOM.winHeight():e.clientHeight),left:o,right:o+(a?g.DOM.winWidth():e.clientWidth)};var d=0;"hidden"==i.getStyle("overflowY")||(t.top<c.top?d=t.top-c.top:t.bottom>c.bottom&&(d=Math.min(t.bottom-c.bottom,t.top-c.top)));var u=0;"hidden"==i.getStyle("overflowX")||(t.left<c.left?u=t.left-c.left:t.right>c.right&&(u=Math.min(t.right-c.right,t.left-c.left)));if(a){(u||d)&&window.scrollBy(u,d);break}e.scrollLeft+=u;e.scrollTop+=d;t.move(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);e=e.offsetParent}return this}},"1.0",{requires:["dom-screen","@sqs/layout-engine/dimensions"]})},7608:function(e,t){YUI.add("@sqs/layout-engine/dimensions",function(i){"use strict";var t=null;var e=["marginLeft","borderLeftWidth","paddingLeft","paddingRight","borderRightWidth","marginRight"];var a=["marginTop","borderTopWidth","paddingTop","paddingBottom","borderBottomWidth","marginBottom"];i.Node.emToPx=function(e){if(!t){t=i.config.doc.createElement("div");t.style.position="absolute";t.style.top="-10000px";t.style.left="-10000px";t.style.visibility="hidden";t.style.width="10em";t.style.height="10em";i.config.doc.body.appendChild(t)}return(e||1)*(t.offsetWidth/10)};i.Node.prototype.totalWidth=function(){return this._node.offsetWidth+this.parseDimensionStyle("marginLeft")+this.parseDimensionStyle("marginRight")};i.Node.prototype.totalHeight=function(){return this._node.offsetHeight+this.parseDimensionStyle("marginTop")+this.parseDimensionStyle("marginBottom")};i.Node.prototype.insideWidth=function(){return this._node.clientWidth-this.parseDimensionStyle("paddingLeft")-this.parseDimensionStyle("paddingRight")};i.Node.prototype.insideHeight=function(){return this._node.clientHeight-this.parseDimensionStyle("paddingTop")-this.parseDimensionStyle("paddingBottom")};i.Node.prototype.horizMarginBorderPadding=function(){return i.Array.reduce(e,0,function(e,t){return e+this.parseDimensionStyle(t)},this)};i.Node.prototype.vertMarginBorderPadding=function(){return i.Array.reduce(a,0,function(e,t){return e+this.parseDimensionStyle(t)},this)};i.Node.prototype.parseDimensionStyle=function(e){var t=this.getComputedStyle(e);if(!t||!/^[0-9]/.test(t))return 0;var a=parseFloat(t,10);/em$/.test(t)&&(a*=i.Node.emToPx(1));return Math.round(a)}},"1.0",{requires:["node-style","array-extras"]})},7609:function(e,t){YUI.add("@sqs/layout-engine/plugin-scroll-lock",function(o){o.namespace("SQS.LayoutEngine.Copies.Plugin").ScrollLock=o.Base.create("ScrollLock",o.Plugin.Base,[],{initializer:function(e){var s=this.get("host");var r=s.getDOMNode();this.listener=function(e){e.stopPropagation();if(!o.Lang.isNumber(r.scrollTop)){e.preventDefault();return false}var t=parseInt(s.getComputedStyle("height"),10);var a=r.scrollTop;var i=r.scrollHeight-t;var n=e.wheelDelta||-e.detail;if(a<=0&&n>0||a>=i&&n<0){e.preventDefault();return false}};if(r.addEventListener){r.addEventListener("mousewheel",this.listener);r.addEventListener("DOMMouseScroll",this.listener);r.addEventListener("MozMousePixelScroll",this.listener)}else r.attachEvent&&r.attachEvent("onmousewheel",this.listener)},destructor:function(){var e=this.get("host").getDOMNode();if(e.removeEventListener){e.removeEventListener("mousewheel",this.listener);e.removeEventListener("DOMMouseScroll",this.listener);e.removeEventListener("MozMousePixelScroll",this.listener)}else e.detachEvent&&e.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},7610:function(e,t){YUI.add("@sqs/layout-engine/block-plugin-resizable",function(m){m.namespace("SQS.LayoutEngine.Block.Plugin.Resizable");m.SQS.LayoutEngine.Block.Plugin.Resizable=m.Base.create("resizableBlock",m.Plugin.Base,[],{initializer:function(e){m.after(this._initResize,this,"renderUI");m.after(this._initResize,this,"syncUI");m.after(this._initResize,this,"_renderBlock");m.after(this._initResize,this,"_renderSuccess");this.get("host").get("rendered")?this._initResize():this.afterHostEvent("renderedChange",this._initResize,this)},destructor:function(){this._destroyResize()},_toggleResize:function(e){e?this._initResize():this._destroyResize()},_syncAspectRatio:function(){var e=this.get("model");var t=e.get("aspectRatio");var a=e.get("dimensions");var i=e.get("vSize");t=i?this._calculateAspectRatio():t||(a?a.height/a.width*100:75);this.get("host").get("model").set("aspectRatio",t,{silent:true})},_initResize:function(){var e;var t=this.get("host");var a=this.get("resizeNode");var i=t.hasPlugin(m.SQS.LayoutEngine.WidgetResize.NS);e={resizeNode:a,wrap:false,minHeight:1};t.plug(m.SQS.LayoutEngine.WidgetResize,e);var n=a.one(".yui3-resize-handles-wrapper");this.get("host").get("boundingBox").appendChild(n);i||this._bindResizeEvents()},_destroyResize:function(){var e=this.get("resizeNode");this.get("host").unplug(m.SQS.LayoutEngine.WidgetResize);if(!this.get("blockEditor").get("resizable")&&!m.Lang.isValue(this.get("model").get("aspectRatio"))){var t=e.one(".sqs-intrinsic");if(t){t.setStyle("paddingBottom",null);t.removeClass("sqs-intrinsic");var a=t.one(".sqs-intrinsic-content");a&&a.removeClass("sqs-intrinsic-content")}}e.setStyles({width:null,height:null,border:null,margin:null,padding:null});e.one(".yui3-resize-handles-wrapper")&&e.one(".yui3-resize-handles-wrapper").remove(true)},_bindResizeEvents:function(){var e=this.get("host")[m.SQS.LayoutEngine.WidgetResize.NS];e.on("resize:start",this._nullVSize,this);e.on("resize:resize",this._adjustNodePosition,this);e.on("resize:resize",this._updateAspectRatio,this);e.on("resize:end",this._resetMouseDelta,this);e.after("resize:end",this._updateAspectRatio,this);e.on("resize:start",this._disableInsertPoints,this);e.on("resize:end",this._enableInsertPoints,this)},_disableInsertPoints:function(){m.SQS.LayoutEngine.Singletons.InsertPointController.disable()},_enableInsertPoints:function(){m.SQS.LayoutEngine.Singletons.InsertPointController.enable()},_nullVSize:function(e){m.SQS.LayoutEngine.Singletons.InsertPointController.hide();var t=this.get("model");if(m.Lang.isValue(t.get("vSize"))){this._syncAspectRatio();t.set("vSize",null,{silent:true})}},_adjustNodePosition:function(e){var t=this.get("resizeNode");var a=t[m.Plugin.Resize.NS];var i=this.get("snapToThreshold");var n=t.get("region");var s=this.get("host").get("boundingBox").get("region");var r=a.get("activeHandleNode");var o=r.get("region");var l=this.get("model").get("dimensions");var c=a.delegate.dd;var d=c.mouseXY[1];m.Lang.isNumber(this._mouseDelta)||(this._mouseDelta=o.bottom-o.height/2-d);var u;var g;if(l){u=n.width/l.width;g=parseInt(l.height,10)*u}else{u=.75;g=n.height}var p=n.top+(s.bottom-n.bottom);var h=g+p;var f=h-o.height/2;d>h-i&&d<h+i&&(c.actXY[1]=f)},_calculateAspectRatio:function(){var e=this.get("resizeNode").get("region");var t=parseInt(this.get("resizeNode").getStyle("paddingLeft"),10);t+=parseInt(this.get("resizeNode").getStyle("paddingRight"),10);var a=parseInt(this.get("resizeNode").getStyle("paddingBottom"),10);a+=parseInt(this.get("resizeNode").getStyle("paddingTop"),10);m.Lang.isNumber(a)||(a=0);m.Lang.isNumber(t)||(t=0);return 100*(e.height-a)/(e.width-t)},_updateAspectRatio:function(e,t){var a=this._calculateAspectRatio();t?this.get("model").set("aspectRatio",a,{silent:true}):this.get("model").set("aspectRatio",a)},_resetMoustDelta:function(e){this.mouseDelta=null;this.get("host").get("editController").alignInsertPoints()}},{NS:"resizableBlock",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},model:{valueFn:function(){return this.get("host").get("model")}},blockEditor:{value:null}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/widget-resize"]})},7611:function(e,t){YUI.add("@sqs/layout-engine/widget-resize",function(s){s.namespace("SQS.LayoutEngine").WidgetResize=s.Base.create("widget-resize",s.Plugin.Base,[],{initializer:function(){this._timers=[];this._host=this.get("host");this.on("resizeNodeChange",this._removeOldPlugin,this);this.on(["resizeVerticallyChange","resizeNodeChange"],this._resizeVerticallyChange,this);this.on("resize:start",this._onResizeStart,this);this.on("resize:resize",this._onResizeResize,this);this.on("resize:end",this._onResizeEnd,this);this.on("resize:mouseUp",this._onResizeMouseUp,this);this.once("resize:ready",this._initSyntheticDblClick,this);this._resizeVerticallyChange();this._initSyntheticDblClick()},_initSyntheticDblClick:function(){var t=null;var a=null;var i=this.get("resizeNode").resize;var n=s.bind(function(){if(a){a.detach();a=null}t=t||i.delegate.on("drag:mouseDown",function(e){t.detach();t=null;a=i.delegate.on("drag:mouseDown",function(e){i.fire("handle-dblclick");n()},this);s.later(300,this,n)},this)},this);n()},_resizeVerticallyChange:function(){var e=this.get("resizeVertically");var t=this.get("resizeNode");if(e&&t&&!t.resize){this.resizeV&&this.resizeV.destroy();t.plug(s.Plugin.Resize,{handles:this.get("handles"),wrap:this.get("wrap"),defMinHeight:this.get("minHeight")});this.resizeV=t.resize;this.resizeV.plug(s.SQS.LayoutEngine.Plugin.ResizeGrid,{contentNode:this.get("contentNode"),resizeNode:this.get("resizeNode"),layoutNode:this.get("layoutNode")});t.resize.on("resize:start",this.fire,this);t.resize.after("resize:resize",this.fire,this);t.resize.on("resize:end",this.fire,this)}this._timers.push(s.later(0,this,this.resetResizeWrapperSize))},_removeOldPlugin:function(e){e.prevVal&&e.prevVal.hasPlugin(s.Plugin.Resize.NS)&&e.prevVal.unplug(s.Plugin.Resize)},_onResizeStart:function(e){var t=this._host.get("boundingBox");t.addClass("sqs-resizing")},_onResizeResize:function(e){var t=this._host.get("boundingBox").get("region");var a=t.height/t.width*100;this.set("aspectRatio",a)},_onResizeEnd:function(e){this._host.get("boundingBox").removeClass("sqs-resizing");this.resetResizeWrapperSize()},resetResizeWrapperSize:function(){this._timers.push(s.later(0,this,function(){var e=this.get("resizeNode");var t=this._host.get("boundingBox");var a={height:null,width:null};e.setStyles(a);e!==t&&t.setStyles(a);this.resizeV&&this.resizeV.get("wrapper").setStyles(a)}))},destructor:function(){this.get("resizeNode").unplug(s.Plugin.Resize);this._host=null;while(0!==this._timers.length)this._timers.shift().cancel();this._timers=null}},{NS:"WidgetResize",ATTRS:{aspectRatio:{value:null},handles:{value:["b"],validator:s.Lang.isArray},minHeight:{value:50,validator:s.Lang.isNumber},resizeVertically:{value:true,lazyAdd:false},resizeNode:{valueFn:function(){this.get("host").get("boundingBox")}},contentNode:{valueFn:function(){var e=this.get("resizeNode");if(e.hasClass("sqs-block"))return e.one(".sqs-block-content");return e}},layoutNode:{valueFn:function(){return this.get("resizeNode").ancestor(".sqs-layout")}},wrap:{value:true}}})},"1.0",{requires:["resize","resize-plugin","@sqs/layout-engine/plugin-resize-grid"]})},7616:function(e,t){YUI.add("@sqs/layout-engine/plugin-resize-grid",function(t){t.namespace("SQS.LayoutEngine.Plugin.ResizeGrid");var a=t.SQS.LayoutEngine.Plugin.ResizeGrid=t.Base.create("resizeGrid",t.Plugin.Base,[t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){var e=t.Array.filter(["resizeNode","contentNode","layoutNode"],function(e){return!this.get(e)},this);if(e.length)console.log("Warning - The following properties are missing and required for %s: %s",a.NS,e.join());else{this._bindResizeEvents();this._bindMouseEvents()}},_updateContentOffsets:function(){var e=this.get("resizeNode").getDOMNode().getBoundingClientRect();var t=this.get("contentNode").getDOMNode().getBoundingClientRect();var a=this.get("layoutNode").getDOMNode().getBoundingClientRect();var i=e.bottom-t.bottom;var n=(t.top-a.top)%this.get("gridSize");this.setAttrs({contentGridOffset:n,contentPaddingOffset:i})},_bindResizeEvents:function(){var e=this.get("host");this._registerEvent(e.on("resize:start",this._updateContentOffsets,this),e.after("resize:align",this._afterResizeAlign,this))},_bindMouseEvents:function(){this._registerEvent(t.one("body").on("mousemove",function(e){this.set("enabled",e.shiftKey)},this))},_afterResizeAlign:function(){this._checkHeight()},_snapHeightToGrid:function(e){var t=this.get("gridSize");var a=this.get("contentPaddingOffset");var i=this.get("contentGridOffset");var n=a-i;return Math.round((e-n)/t)*t+n},_checkHeight:function(){if(this.get("enabled")){var e=this.get("host");var t=e.info;var a=this._snapHeightToGrid(t.offsetHeight);t.offsetHeight!==a&&e._checkSize("offsetHeight",a)}}},{NS:"resizeGrid",ATTRS:{gridSize:{value:20},contentPaddingOffset:{value:null},contentGridOffset:{value:null},resizeNode:{value:null},contentNode:{value:null},layoutNode:{value:null},enabled:{value:false}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar"]})},7617:function(e,t){YUI.add("@sqs/layout-engine/layout-drop",function(g){g.namespace("SQS.LayoutEngine.Layout").Drop=g.Base.create("LayoutDrop",g.DD.Drop,[],{initializer:function(){g.DD.DDM.activeDrag&&this._activateShim()},_activateShim:function(){var e=g.DD.DDM;var t="node";if(!e.activeDrag)return false;if(this.get("lock"))return false;var a=this.get(t);if(this.inGroup(e.activeDrag.get("groups"))){a.removeClass(e.CSS_PREFIX+"-drop-active-invalid");a.addClass(e.CSS_PREFIX+"-drop-active-valid");e._addValid(this);this.overTarget=false;this.get("useShim")||(this.shim=this.get(t));this.sizeShim()}else{e._removeValid(this);a.removeClass(e.CSS_PREFIX+"-drop-active-valid");a.addClass(e.CSS_PREFIX+"-drop-active-invalid")}},sizeShim:function(){var e=g.DD.DDM;var t="node";var a="offsetHeight";var i="offsetWidth";if(!e.activeDrag)return false;if(this.get("lock"))return false;if(!this.shim){g.later(100,this,this.sizeShim);return false}var n=this.get(t);var s=n.get(a);var r=n.get(i);var o=this.get("padding");var l=n.getXY();var c,d,u;r=r+o.left+o.right;s=s+o.top+o.bottom;l[0]=l[0]-o.left;l[1]=l[1]-o.top;if(e.activeDrag.get("dragMode")===e.INTERSECT){c=e.activeDrag;d=c.get(t).get(a);u=c.get(t).get(i);s+=d;r+=u;l[0]=l[0]-(u-c.deltaXY[0]);l[1]=l[1]-(d-c.deltaXY[1])}this.get("useShim")&&this.shim.setStyles({height:s+"px",width:r+"px",top:l[1]+"px",left:l[0]+"px"});this.region={0:l[0],1:l[1],area:0,top:l[1],right:l[0]+r,bottom:l[1]+s,left:l[0]}}},{ATTRS:{lockScroll:{value:false}}})},"1.0",{requires:["base","dd-drop"]})},7618:function(e,t){YUI.add("@sqs/layout-engine/block-utils",function(a){a.namespace("SQS.LayoutEngine.Block");a.SQS.LayoutEngine.Block.Utils={getWhitelistingFn:function(t){return function(e){return a.SQS.LayoutEngine.Block.Utils.checkWhitelist(t,e)}},checkWhitelist:function(t,e){a.Lang.isArray(e)||(e=a.Object.keys(e));return a.Array.every(e,function(e){return-1!==a.Array.indexOf(t,e)})}}},"1.0",{requires:["base"]})},7619:function(e,t,a){var i=a(708);var c=false;var n=function(){};YUI.add("@sqs/layout-engine/edit-controller-base",function(p){p.namespace("SQS.LayoutEngine.Layout").EditMode=p.SQS.LayoutEngine.enumFactory({WEB_APP:1,MOBILE_APP:2,SECTION:3});p.namespace("SQS.LayoutEngine");p.SQS.LayoutEngine.EditControllerBase=p.Base.create("editcontroller",p.Base,[p.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){c&&console.log("[le] edit-controller-base - initializer");this._scrollNodes=[];this.changedLayouts=[];this.after("editingChange",this._syncEditing,this);this.after("dropInfoChange",this._afterDropInfoChange,this)},_syncEditing:function(e){if(e.silent)return;c&&console.log("[le] edit-controller-base - _syncEditing",e);e.newVal?this._enableEditing():this._disableEditing()},_afterDropInfoChange:function(e){e.newVal?this.alignInsertMarker(e.newVal):this.hideInsertMarker()},getLayoutNodes:function(){return p.all(".sqs-layout")},pluginLayoutBuilder:function(e,t,a,i){var n=p.SQS.LayoutEngine.Layout.Builder.NS;if(!e.hasPlugin(n)){p.Lang.isValue(a)||(a=this.get("defaultEditMode"));e.plug(p.SQS.LayoutEngine.Layout.Builder,{editController:this,layout:t,editMode:a,startupBlockId:i})}return e[n]},destroyLayoutBuilder:function(e){e.unplug(p.SQS.LayoutEngine.Layout.Builder.NS)},pluginLayoutEditor:function(e){c&&console.log("[le] edit-controller-base - plugin a layout editor for",e);var t=e.layoutNode;var a=e.layoutModel;var i=e.scrollNode||this.get("scrollNode");var n=e.editMode||this.get("defaultEditMode");var s=e.startupBlockId||null;var r=e.layoutTutorialPromise||p.when();var o=e.dragDropLock;this.get("editing")||this.set("editing",true,{silent:true});t.hasPlugin(p.SQS.LayoutEngine.Layout.Builder.NS)||this.pluginLayoutBuilder(t,a,n,s);var l=t.plug(p.SQS.LayoutEngine.Layout.Editor,{editMode:n,editController:this,scrollNode:i,forceSingleColumn:this.get("forceSingleColumn"),markdownMode:this.get("markdownMode"),columns:p.SQS.LayoutEngine.Layout.Utils.getValFromClass(t,"sqs-grid-"),startupBlockId:s,layoutTutorialPromise:r,dragDropLock:o})[p.SQS.LayoutEngine.Layout.Editor.NS];p.one(p.config.doc.body).addClass("sqs-layout-editing");this.initializeBlockTrash();return l},initializeBlockTrash:function(){if(this._blockTrashInstance)return;this._blockTrashInstance=new p.SQS.LayoutEngine.Layout.BlockTrash({editController:this})},getBlockTrashInstance:function(){this.initializeBlockTrash();return this._blockTrashInstance},destroyBlockTrashInstance:function(){if(this._blockTrashInstance){this._blockTrashInstance.destroy();this._blockTrashInstance=null}},destroyLayoutEditor:function(e){var t=p.SQS.LayoutEngine.Layout.Editor.NS;this.destroyLayoutBuilder(e);this._destroyInsertMarkerInstance();this._destroyInsertMenus();e.unplug(t);var a=this.getLayoutNodes().some(function(e){return e.hasPlugin(t)});a||p.one(p.config.doc.body).removeClass("sqs-layout-editing")},layoutBeforeDragStart:function(){this.getLayoutNodes().each(function(e){p.Lang.isObject(e.LayoutEditor)&&e.LayoutEditor.beforeDrag()},this)},layoutDragStart:function(e){p.one("html").addClass("sqs-dragging-block");this.changedLayouts.push(e);this.setInsertMarkerLayout(e)},processEdgeInfo:function(e){var t=e.newVal;if(!t||!p.DD.DDM.activeDrag){this.set("dropInfo",null);return}var a=this.get("dropBlockInfo");var i=this._getDropTarget(t.node);var n=a.ancestors;var s=a.parentLayout;var r=i.getData("isAdjacentToBlockEdge");var o=t.direction;var l=this.getType(i);var c=this._getClosestBlock(i);if(!a.blockNode||a.blockNode!==c){var d=".sqs-block, .sqs-col, .sqs-row, .sqs-layout";n=c.ancestors(d,true,".sqs-layout");s=n.shift();this.set("dropBlockInfo",{blockNode:c,parentLayout:s,ancestors:n})}var u=p.DD.DDM.activeDrag.get("dragWidget");if(!u)return;var g=u.get("floatable")&&"content"===l&&this._isHorizontalDirection(o);g||!this.get("forceSingleColumn")&&1!==s.LayoutEditor.get("columns")||(o=t.quad.y);if(this._isTraversableDirection(o,r)){i=this._getTraversedDropNode(i,o,t);l=this.getType(i);g=g&&"content"===l}if("content"===l){if(!g&&this._isHorizontalDirection(o)){i=i.ancestor(this.get("contentParentBlockSelector"));l=this.getType(i)}}else if("block"===l&&this._isHorizontalDirection(o)&&this._isOnlyBlockInColumn(i)){i=i.ancestor(".sqs-col");l=this.getType(i)}this.set("dropInfo",{node:i,type:l,direction:o,region:this._getDropRegion(i,t),shouldFloat:g,isSelf:"hidden"===i.getStyle("visibility")})},_getClosestBlock:function(e){var t=this.getType(e);if("content"===t)return e.ancestor(".sqs-block");return e},_getDropTarget:function(e){if(e.hasClass("sqs-content-overlay"))return e.getData("alignNode");return e},_getDropRegion:function(e,t){if(e===t.node)return t.region;return e.get("region")},_isTraversableDirection:function(e,t){var a=true;t&&void 0!==t[e]&&(a=t[e]);return a},_getTraversableDepth:function(e,t,a){var i=a.size();var n=0;while(e&&this._canTraverseToParent(e,t)){n++;e=a.item(--i)}return n},_canTraverseToParent:function(e,t){var a=e.hasClass("sqs-col");var i=!this.get("forceSingleColumn");return a&&this._isVerticalDirection(t)||i&&this._canTraverseHorizontallyFromColumn(t,e)||!a&&i&&this._isHorizontalDirection(t)||this._canTraverseVerticallyFromBlockOrRow(t,e)},_getTraversedDropNode:function(e,t,a){var i=this.get("dropBlockInfo.ancestors");this.get("forceSingleColumn")&&(i=i.filter(".sqs-block"));var n=this._getTraversableDepth(e,t,i);if(n){var s=i.size();var r=s-n;var o=Math.min(a.region.width,a.region.height)/4;var l=Math.floor(s*a.distance/o);l=Math.max(r,Math.min(s,l));e=i.item(l)||e}return e},_isHorizontalDirection:function(e){return"left"===e||"right"===e},_isVerticalDirection:function(e){return"top"===e||"bottom"===e},_canTraverseHorizontallyFromColumn:function(e,t){return"left"===e&&!t.previous(".sqs-col")||"right"===e&&!t.next(".sqs-col")},_canTraverseVerticallyFromBlockOrRow:function(e,t){return"top"===e&&!t.previous(".sqs-block, .sqs-row")||"bottom"===e&&!t.next(".sqs-block, .sqs-row")},_isOnlyBlockInColumn:function(e){return 0===e.siblings(".sqs-block:not(.sqs-float), .sqs-row").size()},getType:function(e){if(!e)return"unknown";if(e.hasClass("sqs-block")||e.hasClass("free-block"))return"block";if(e.hasClass("sqs-col"))return"column";if(e.hasClass("sqs-row"))return"row";if(e.ancestor(this.get("contentParentBlockSelector")))return"content"},layoutDragEnd:function(){p.one("html").removeClass("sqs-dragging-block");this.insertBlockToLayout();this.getLayoutNodes().each(function(e){e.hasPlugin(p.SQS.LayoutEngine.Layout.Editor.NS)&&e.LayoutEditor.afterDrag();e.hasPlugin(p.SQS.LayoutEngine.Layout.Builder.NS)&&e.LayoutBuilder.fire("widget:contentUpdate")},this);this.changedLayouts.length&&this.cleanGrids()},insertBlockToLayout:function(){var t=this.get("dropInfo");var e=this.get("selection");if(!p.Lang.isValue(t)||!p.Lang.isValue(t.node)||!e)return;var a=this._getBlockNodeListFromSelection(e,t);if(a.size()){var i=t.node.ancestor(".sqs-layout");if(!i)return;var n=[];var s=false;a.each(function(e){i.LayoutEditor.insertBlock(e,t);n.push(p.Widget.getByNode(e))});p.Array.each(this.changedLayouts,function(e){e===i?s=true:e.LayoutBuilder.deregisterBlocks(n)});s||this.changedLayouts.push(i);this.cleanGrids();p.Array.each(n,function(e){if(e&&!e.get("destroyed")){i.LayoutBuilder.registerBlock(e);e.show()}});this.setAttrs({dropInfo:null,dropBlockInfo:{},selection:null})}},_getBlockNodeListFromSelection:function(e,t){if(e){if(p.SQS.LayoutEngine.Layout.Utils.isBlock(e)&&!e.hasClass("sqs-destroyme"))return new p.NodeList(e);if(!p.Lang.isValue(t))return new p.NodeList(e)}return new p.NodeList},cleanGrids:function(e){if(e)p.Lang.isArray(e)||(e=[e]);else{e=this.changedLayouts||[];this.changedLayouts=[]}e.forEach(function(e){e.LayoutEditor.cleanGrid()},this)},_enableEditing:function(){p.one("html").addClass("sqs-page-editing")},_disableEditing:function(){p.one("html").removeClass("sqs-page-editing");p.detach("editCtrl|*");this.getLayoutNodes().each(function(e){if(e.hasPlugin(p.SQS.LayoutEngine.Layout.Editor.NS)){var t=e.LayoutEditor.dragDelegate;t.detach("editCtrl|*");t.dd.detach("editCtrl|*");e.unplug(p.SQS.LayoutEngine.Layout.Editor)}},this)},enableInsertPoints:n,disableInsertPoints:n,alignInsertPoints:n,enableDragSelection:n,disableDragSelection:n,isMobileApp:function(){return false},getRenderableBlocks:function(e){var t=e.enumName;p.Lang.isValue(this._renderableBlockMap)||this._initRenderableBlocksMap();var a=this._renderableBlockMap[t];if(!p.Lang.isValue(a)){var i=this._renderableBlockCtorMap[t];if(!p.Lang.isValue(i))return null;a=this._renderableBlockMap[t]=new i}return a},getInsertMenu:function(e,t){p.Lang.isValue(this._insertMenuMap)||this._initInsertMenuCtorMap();if(p.Lang.isValue(t))return this._upsertInsertMenu(e,t);return this._insertMenuMap[e.enumName]},_upsertInsertMenu:function(e,t){var a=this._insertMenuMap[e.enumName];if(p.Lang.isValue(a))a.setAttrs(t);else{var i=this._insertMenuCtorMap[e.enumName];if(!p.Lang.isValue(i))return null;a=this._insertMenuMap[e.enumName]=new i(p.merge(t,{editController:this}))}return a},_destroyInsertMenus:function(){if(!this._insertMenuMap)return;Object.keys(this._insertMenuMap).forEach(function(e){this._insertMenuMap[e].destroy()}.bind(this));this._insertMenuMap={}},_initRenderableBlocksMap:function(){this._renderableBlockCtorMap={};this._renderableBlockMap={};p.Array.each(this.get("renderableBlockSet"),function(e){p.Lang.isValue(e.ctor)&&(this._renderableBlockCtorMap[e.editMode.enumName]=e.ctor)},this)},_initInsertMenuCtorMap:function(){this._insertMenuCtorMap={};this._insertMenuMap={};p.Array.each(this.get("insertMenuSet"),function(e){p.Lang.isValue(e.ctor)&&(this._insertMenuCtorMap[e.editMode.enumName]=e.ctor)},this)},_createInsertMarkerInstance:function(e){this._insertMarkerInstance=new p.SQS.LayoutEngine.Layout.InsertMarker({render:e})},setInsertMarkerLayout:function(e){var t=this._insertMarkerInstance;if(!t||t&&t.get("destroyed"))this._createInsertMarkerInstance(e);else if(e!==t.get("render")){this._destroyInsertMarkerInstance();this._createInsertMarkerInstance(e)}},_destroyInsertMarkerInstance:function(){if(this._insertMarkerInstance){this._insertMarkerInstance.destroy();delete this._insertMarkerInstance}},alignInsertMarker:function(e){var t=this._insertMarkerInstance;if(!p.Lang.isObject(e)||!t)return;if(!t.get("locked")){t.set("info",e);t.show()}},hideInsertMarker:function(){this._insertMarkerInstance&&this._insertMarkerInstance.hide()},toggleInsertMarkerLock:function(e){this._insertMarkerInstance&&this._insertMarkerInstance.set("locked",e)},updateInsertMarkerConstrainNode:function(e){var t=this._insertMarkerInstance;if(!t)return;p.Lang.isValue(e)&&t.set("constrainZIndex",e);t.positionConstrainNode()},hideBlockMenus:function(){p.Object.each(this._insertMenuMap,function(e){e.hide()})},destructor:function(){p.one(p.config.doc).detach("editCtrl|*");this.getLayoutNodes().each(function(e){this.destroyLayoutEditor(e)}.bind(this));p.Object.each(this._insertMenuMap,function(e){e.destroy(true)});this._insertMenuMap=null;this.set("editing",false)}},{ATTRS:{contentParentBlockSelector:{getter:function(e){if(!p.Lang.isValue(e))return"";return e},setter:function(e,t){var a=this.get(t);if(0===a.length)return e;if(a.indexOf(e)>-1)return a;return a+", "+e}},editing:{value:false},scrollNode:{valueFn:function(){return p.one(i(p.config.doc))},lazyAdd:false},dropInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},dropBlockInfo:{value:{blockNode:null,ancestors:null,parentLayout:null}},selection:{},markdownMode:{value:false},forceSingleColumn:{value:false},renderableBlockSet:{valueFn:function(){console.error("Edit Controller Error: renderableBlockSet not implemented")}},insertMenuSet:{valueFn:function(){console.error("Edit Controller Error: insertMenuSet not implemented")}},supportsInsertPoints:{value:false}}})},"1.0",{requires:["array-invoke","base","event","json-parse","node","parallel","plugin","promise","@sqs/layout-engine/enum-factory","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/layout-trash","@sqs/layout-engine/models-layout"]})},7620:function(e,t){YUI.add("@sqs/layout-engine/enum-factory",function(s){s.namespace("SQS.LayoutEngine").enumFactory=function(e){var i=function(){throw new Error("Can't Instantiate Enumerations")};var n=i.prototype={constructor:i,toString:function(){return this.enumName},valueOf:function(){return this.value},toJSON:function(){return this.enumName}};i.values=[];s.Object.each(e,function(e,t){var a=function(){};a.prototype=n;a.enumName=t;a.value=e;i[t]=a;i.values.push(a)});i.each=function(t,a){s.Array.each(this.values,function(e){t.call(a,e)})};i.isValid=function(e){if(!s.Lang.isValue(e))return false;var t=i[e.enumName];return s.Lang.isValue(t)&&e===t};return i}},"1.0",{requires:[]})},7621:function(e,t,a){var o=a(701);var l=a(5328).BlockTypeKeys;var s=a(6251);var n=a(708);var r=false;var c=new RegExp("^[\\s]*$");var d="[\\u200B-\\u200D\\uFEFF]";YUI.add("@sqs/layout-engine/layout-editor",function(f){var i=f.SQS.LayoutEngine.Layout.Utils.getValFromClass;f.namespace("SQS.LayoutEngine.Layout");f.SQS.LayoutEngine.Layout.Editor=f.Base.create("LayoutEditor",f.Plugin.Base,[],{initializer:function(e){this._host=this.get("host");this._builder=this._host.LayoutBuilder;this._layout=this._builder.get("layout");this.toggleBlocksEditable(true);this.cleanGrid();if(!window.MOBILEAPP&&!this.get("dragDropLock")){this._initDD(e);this._initColumnResizer();this._initFloatResizer()}this._host.addClass("sqs-editing");this.get("layoutTutorialPromise").then(function(){!this.get("destroyed")&&this._layout.isBlank()&&this._toggleInsertPointGuide(true)}.bind(this))},destructor:function(){this.get("editController").hideBlockMenus();this._host.removeClass("sqs-editing");this.toggleBlocksEditable(false);this._toggleInsertPointGuide(false);if(this._insertPointClickedListener){this._insertPointClickedListener.detach();this._insertPointClickedListener=null}this._destroyDD();this._destroyFloatResizer();this._destroyColumnResizer();this._destroyResizeHelperNodes();this._handleEmptyLayoutOnDestroy();this._host=null},_isBlogApp:function(){return this.get("editController").isMobileApp()},_initDD:function(e){if(this.get("lockedLayout"))return;var t=[".sqs-dd-invalid",".sqs-edit-dialog-open",".sqs-helper",".sqs-block-locked-layout"];var a=[".sqs-dd-invalid-handle",".sqs-block-focused .sqs-dd-invalid-handle-on-focus",".sqs-selected .sqs-dd-invalid-handle-on-focus"];var i=this._isBlogApp();var n=this.dragDelegate=new f.SQS.LayoutEngine.Layout.DragDelegate({container:this._host,nodes:".sqs-block",invalid:t.join(", "),invalidHandles:a.join(", "),dragConfig:{groups:["blocks"],clickTimeThresh:i?600:s.DRAG_CLICK_TIME_THRESHOLD,haltDown:!i&&null},extraSyncShims:!i,enableDragScroll:true,scrollNode:this.get("scrollNode"),editController:this.get("editController"),dragProxyConfig:{cloneNode:true,hideOriginalNode:true,moveOnEnd:false,flyBack:false}});n.dd.removeInvalid("textarea");n.before("drag:start",this._beforeDragStart,this);n.on("drag:start",this._onDragStart,this);n.after("drag:end",this._afterDragEnd,this);this.on("dragDropLockChange",function(t){n.set("lockTarget",t.newVal);f.Array.each(f.DD.DDM.targets,function(e){if(this._host.contains(e.get("node")))if(t.newVal){e.set("lock",true);e._deactivateShim()}else{e.set("lock",false);e._activateShim()}},this);this.get("editController").toggleInsertMarkerLock(t.newVal)},this)},_destroyDD:function(){if(this.dragDelegate){this.dragDelegate.destroy();this.dragDelegate=null}},_initColumnResizer:function(){this.resizers=new f.DD.Delegate({container:this._host,nodes:".sqs-helper",invalid:".no-editing .sqs-helper, .sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",dragConfig:{groups:["resizers"],move:false}});this.resizers.on("drag:mouseDown",this._onResizerDragMousedown,this);this.resizers.on("drag:start",this._onResizerDragStart,this);this.resizers.on("drag:drag",this._onResizerDragDrag,this);this.resizers.on("drag:end",this._onResizerDragEnd,this)},_destroyColumnResizer:function(){if(this.resizers){this.resizers.destroy();this.resizers=null}},_onResizerDragMousedown:function(e){var t=e.target.get("node");var a=t.ancestor(".sqs-row",true);this.calcGridStops(a)},calcGridStops:function(e){var t=parseInt(e.getStyle("width"),10);var a=parseInt(e.getStyle("paddingLeft"),10);var i=e.ancestor(".sqs-col");var n=this.get("columns");var s=i?this.getElSize(i):n;var r=t/s;var o=e.getXY()[0];this.gridStops=[];for(var l=0;l<n-1;l++)this.gridStops.push(o+a+Math.round(r*(l+1)))},_onResizerDragStart:function(e){var t=e.target.get("node");var a=e.target.nodeXY[0];var i=this.get("gutterSize");f.one("html").addClass("sqs-resizing-column");this.leftColumn=t.ancestor(".sqs-col");this.rightColumn=this.leftColumn.next();this.leftOrigSize=this.getElSize(this.leftColumn);this.rightOrigSize=this.getElSize(this.rightColumn);this.origResizerPos=this.xToColumn(a+i/2);this._host.addClass("sqs-resizing");this.leftColumn.addClass("sqs-resizing sqs-resizing-left");this.rightColumn.addClass("sqs-resizing sqs-resizing-right");this.saveOriginalSizes(t.ancestor(".sqs-row"));this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},xToColumn:function(e){var t=(this.gridStops[1]-this.gridStops[0])/2;var a=this.gridStops[0];var i=this.gridStops[this.gridStops.length];if(e<a)return 0;if(e>i)return this.get("columns")-1;for(var n=0;n<this.gridStops.length;n++){var s=this.gridStops[n];if(e>s-t&&e<s+t)return n}},_onResizerDragDrag:function(e){var t;var a;var i;var n;var s;var r;var o;var l=e.target.mouseXY[0];var c=this.gridStops[1]-this.gridStops[0];var d=this.get("columns");for(var u=0,g=this.gridStops.length;u<g;u++){var p=this.gridStops[u];if(l<this.gridStops[0]-c){t=this.getMinColSize(this.leftColumn);a=this.rightOrigSize+this.leftOrigSize-t;this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a)}else if(l>this.gridStops[this.gridStops.length-1]+c){a=this.getMinColSize(this.rightColumn);t=this.leftOrigSize+this.rightOrigSize-a;this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a)}else if(l>p-c/2&&l<p+c/2){o=u-this.origResizerPos;t=this.leftOrigSize+o;a=this.rightOrigSize-o;i=this.getMinColSize(this.leftColumn);n=this.getMinColSize(this.rightColumn);s=this.getMaxColSize(this.leftColumn);r=this.getMaxColSize(this.rightColumn);if(t<i||t>s||a<n||a>r)break;if(t===this.getElSize(this.leftColumn))break;t=Math.min(Math.max(1,t),d);a=Math.min(Math.max(1,a),d);this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a);break}}},_onResizerDragEnd:function(){var e=this._host.all(".sqs-col");f.one("html").removeClass("sqs-resizing-column");this._host.all(".sqs-col.sqs-resizing").each(function(e){var i=this.getElSize(e);e.get("children").filter(".sqs-float-left, .sqs-float-right").each(function(e){var t=this.getElSize(e);if(t>i+1){var a=f.Widget.getByNode(e);a&&a.get("model").set("floatDir",null)}},this);e.all(".sqs-block").each(function(e){f.Widget.getByNode(e).fire("resized")})},this);this._host.removeClass("sqs-resizing");e.removeClass("sqs-resizing-left");e.removeClass("sqs-resizing-right");e.removeClass("sqs-resizing");this.cleanGrid();this.get("editController").enableInsertPoints();this.get("editController").enableDragSelection()},getBlockNodes:function(e){var t=this._host.all(".sqs-block:not(.sqs-destroyme)");var a=this._host.all(".sqs-block-markdown .sqs-block").getDOMNodes();var i=t.filter(function(e){return-1===a.indexOf(e)});return e?i.filter(e):i},getBlocks:function(){var a=[];var e=this.getBlockNodes();e.each(function(e){var t=f.Widget.getByNode(e);t&&a.push(t)},this);return a},beforeDrag:function(){f.Array.each(this.getBlocks(),function(e){e.blockEditor&&e.blockEditor.beforeLayoutDrag()},this)},afterDrag:function(){f.Array.each(this.getBlocks(),function(e){e.blockEditor&&e.blockEditor.afterLayoutDrag()},this)},toggleBlocksEditable:function(t){r&&console.log("[le] editor - toggleBlogsEditable",t,this);f.Array.each(this.getBlocks(),function(e){r&&console.log("[le] editor - toggleBlogsEditable block",e);t?this._enableEditingBlock(e):this._disableEditingBlock(e)},this)},_enableEditingBlock:function(e){var t=e.get("boundingBox").getAttribute("id");var a=this.get("startupBlockId");var i={editOnStart:t===a,editable:true,promoted:this._layout.isPromotedBlock(e)};t===a&&f.Lang.isFunction(e.ensureLoadedThenShowDialog)?e.ensureLoadedThenShowDialog(function(){e.setAttrs(i)}):e.setAttrs(i)},_disableEditingBlock:function(e){e.setAttrs({editable:false,promoted:this._layout.isPromotedBlock(e),isNewBlock:false})},_beforeDragStart:function(e){this.get("editController").layoutBeforeDragStart()},_onDragStart:function(){var e=f.DD.DDM.activeDrag.get("node");var a=f.Widget.getByNode(e);var t=f.all(".sqs-selected");var i=this.get("editController");i.set("selection",e);t.each(function(e){var t=f.Widget.getByNode(e);f.Lang.isValue(t)&&t!==a&&t.set("selected",0)});i.layoutDragStart(this.get("host"))},_afterDragEnd:function(){this.get("editController").layoutDragEnd()},_initFloatResizer:function(){this.floatResizers=new f.DD.Delegate({container:this.get("host"),nodes:".sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",invalid:".no-editing .sqs-helper",dragConfig:{move:false}});this.floatResizers.dd.addToGroup("floaters");this.floatResizers.on("drag:mouseDown",this._onFloatResizerDragMousedown,this);this.floatResizers.on("drag:start",this._onFloatResizerDragStart,this);this.floatResizers.on("drag:drag",this._onFloatResizerDragDrag,this);this.floatResizers.on("drag:end",this._onFloatResizerDragEnd,this)},_onFloatResizerDragMousedown:function(e){this.get("editController").layoutBeforeDragStart()},_onFloatResizerDragStart:function(e){f.one("html").addClass("sqs-dragging-block");var t=e.target.get("node").ancestor(".sqs-col");var a=f.Widget.getByNode(e.target.get("node"));this._currentWidth=a.get("model").get("hSize");this._minWidth=Math.max(a.blockEditor.get("minHSize"),1);this._maxWidth=parseInt(i(t,"sqs-col-"),10);this._steps=parseInt(t.get("region").width/this._maxWidth,10);this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},_onFloatResizerDragDrag:function(e){var t=f.Widget.getByNode(e.target.get("node"));var a=Math.floor((e.target.mouseXY[0]-e.target.startXY[0])/this._steps);this._isFloatingRight(t)&&(a*=-1);var i=a+this._currentWidth;if(i>=this._minWidth&&i<=this._maxWidth){this._newHSize=i;this._removeHSizeClasses(t);t.get("boundingBox").addClass("sqs-col-"+i)}},_isFloatingRight:function(e){return"right"===e.get("model").get("floatDir")},_removeHSizeClasses:function(e){var t=e.get("boundingBox");var a=/(?:\s|^)(sqs-col-\d+?)(?=\s|$)/g;t.set("className",t.get("className").replace(a,""))},_onFloatResizerDragEnd:function(e){var t=f.Widget.getByNode(e.target.get("node"));var a={hSize:this._newHSize};this._newHSize===this._maxWidth&&(a.floatDir=null);t.get("model").setAttrs(a);t.get("boundingBox").removeClass("yui3-dd-dragging");f.one("html").removeClass("sqs-dragging-block");this.afterDrag();this.get("editController").enableInsertPoints();this.get("editController").enableDragSelection();this._builder.syncDOMToContent();this._newHSize=null},_destroyFloatResizer:function(){if(this.floatResizers){this.floatResizers.destroy();this.floatResizers=null}},getBlockByNode:function(e){return f.Widget.getByNode(e.ancestor(".sqs-block",true))},_handleColumnInsertBlock:function(t,e){"left"===t.direction||"right"===t.direction?this.insertColumn(t.node,e,t.direction):"bottom"===t.direction?t.node.append(e):"top"===t.direction&&(e.filter?t.node.prepend(e.filter(function(e){return!t.node.get("children").item("0").compareTo(e)})):t.node.prepend(e))},_unfloatBlockByNode:function(e){if(this._blockIsFloating(e)){var t=f.Widget.getByNode(e);t&&t.get("model").set("floatDir",null)}},_handleFloatingBlockEdgeCases:function(e,t){var a=e.node.previous();a===t&&(this._blockIsFloating(a)||this._unfloatBlockByNode(a.previous()));this._blockIsFloating(a)&&(e.node=this._getTopFloatingBlock(a))},_handleBlockInsertBlock:function(e,t){if("top"===e.direction){this._handleFloatingBlockEdgeCases(e,t);e.node.insert(t,"before")}else"bottom"===e.direction?e.node.insert(t,"after"):"left"!==e.direction&&"right"!==e.direction||(0===e.node.siblings("*:not(.sqs-helper)").size()?this.insertColumn(e.node.ancestor(".sqs-col",true),t,e.direction):this.splitBlock(e.node,t,e.direction))},_handleContentInsertBlock:function(e,t){var a=e.node.getData("alignNode")||e.node;var i=this.getBlockByNode(a);var n=i.get("boundingBox");var s=n.previous();if("bottom"===e.direction)a.next()?i.blockEditor.split(a,t):n.insert(t,"after");else{if(a.previous())i.blockEditor.split(a.previous(),t);else if(s&&s.test("[class*=sqs-float-]")){s=s.previous(".sqs-block:not(.sqs-float-left):not(.sqs-float-right)")||s;s.insert(t,"after")}else n.insert(t,"before");if("left"===e.direction||"right"===e.direction){var r=Math.floor(this.getParentSize(n)/2);r>0&&f.Widget.getByNode(t).get("model").setAttrs({hSize:r,floatDir:e.direction})}}},_handleRowBlockInsert:function(e,t){"left"===e.direction?this.insertColumn(e.node.one(".sqs-col:first-child"),t,e.direction):"right"===e.direction?this.insertColumn(e.node.one(".sqs-col:last-child"),t,e.direction):"top"!==e.direction&&"bottom"!==e.direction||this.insertRow(e.node,t,e.direction)},_blockShouldFloatInContent:function(e){if("left"===e.direction||"right"===e.direction){var t=e.node.getData("alignNode")||e.node;var a=this.getBlockByNode(t);var i=a?a.get("boundingBox"):t;var n=Math.floor(this.getParentSize(i)/2);return n>0}return false},_getTopFloatingBlock:function(e){if(!e||!e.previous()||this._blockIsFloating(e)&&!this._blockIsFloating(e.previous()))return f.Lang.isValue(e)?e:null;return this._getTopFloatingBlock(e.previous())},_blockIsFloating:function(e){var t=f.Widget.getByNode(e);return f.Lang.isValue(t)&&!!(t.get("model")&&t.get("model").get("floatDir"))},insertBlock:function(e,t){var a=false;var i=t;var n=f.Widget.getByNode(e);this._builder.registerBlock(n);f.Object.getValue(i,"type")||(i.type=this.getType(i.node));if(!i||!i.type||!n)return;var s=f.SQS.LayoutEngine.Layout.Utils.getColumnWidth(n.get("contentBox"));if("content"===i.type){a=this._blockShouldFloatInContent(i);this._handleContentInsertBlock(i,e)}else"block"===i.type?this._handleBlockInsertBlock(i,e):"column"===i.type?this._handleColumnInsertBlock(i,e):"row"===i.type&&this._handleRowBlockInsert(i,e);a||n.get("model").setAttrs({hSize:null,floatDir:null});this._builder.syncDOMToContent();n.fire("dropped",{dropInfo:i,floating:!!a,oldCol:s});n.set("visible",true);f.SQS.LayoutEngine.Events.fire("layout-engine:insert-block",n)},insertRow:function(e,t,a){var i=this._builder;var n=i.get("columns");var s=i.createColumn(t,n);var r=i.createRow(s);var o="top"===a?"before":"after";e.insert(r,o)},insertColumn:function(e,t,a){var i=e.ancestor(".sqs-row");var n=i.get("children").filter(".sqs-col");var s=n.size();var r=this.getMaxAvailableSpace(e)-this._getMinColumnsWidth(n);var o=Math.floor(this.getParentSize(e)/(s+1));t.test(".sqs-block")?o=Math.max(o,this.getMinBlockSize(t)):t.test(".sqs-col")&&(o=Math.max(o,this.getMinColSize(t)));var l=o<1||o>r;if(l){"left"===a?e.prepend(t):"right"===a&&e.append(t);return false}var c=this._builder.createColumn(t,0);e.insert(c,"left"===a?"before":"after");this.saveOriginalSizes(e.ancestor(".sqs-row"));this.resizeColumn(c,Math.round(o));return true},getParentSize:function(e){var t=e.ancestor(".sqs-col");return null!==t?this.getElSize(t):this._builder.get("columns")},getMaxAvailableSpace:function(e){if(e.ancestor(".sqs-col"))return this.getMaxColSize(e.ancestor(".sqs-col"));return this.getMaxColSize(e)},getElSize:function(e){return i(e,"sqs-col-")},_foldColumnsSize:function(e,t){var a=0;e.each(function(e){a+=parseInt(t.call(this,e),10)},this);return a},_getMinColumnsWidth:function(e){return this._foldColumnsSize(e,this.getMinColSize)},_getColumnsWidth:function(e){return this._foldColumnsSize(e,this.getElSize)},resizeColumn:function(t,e,s){var r=this.getParentSize(t);var a=t.ancestor(".sqs-row").get("children").filter(".sqs-col");var i=a.filter(function(e){return e!==t.getDOMNode()});var n=r-this._getMinColumnsWidth(i);if(!s&&(0===e||0===i.size()||n<1))return false;this.saveOriginalSizes(t.ancestor(".sqs-row"));var o=this.getElSize(t);var l=o+e;var c=Math.min(n,l);var d=this._getResizeInfo(i);var u=this._getColumnsWidth(i);var g;var p=e;var h=e>0?-1:1;while(p!==g&&0!==p){g=p;f.Array.each(d,function(e,t){var a=e.node;var i=this.getElSize(a);var n=this.getMinColSize(a);if(0!==p&&i+h>=n&&r>=u+h){this.setElSize(a,i+h,s);p+=h}else while(0!==p&&i+h<n&&h>0&&r>=u+h){i+=h;this.setElSize(a,i,s);p+=h}},this)}i.each(function(e){e.all(" > .sqs-block").each(function(e){var t=f.Widget.getByNode(e);t&&t.fire("resized")})});0!==p&&console.error("[le] Column resizing has leftovers");this.setElSize(t,c,s)},_getResizeInfo:function(e){var a=[];e.each(function(e,t){a.push({node:e,idx:t,min:this.getMinColSize(e),size:this.getElSize(e)})},this);a.length>1&&a.sort(function(e,t){return e.size-e.min-(t.size-t.min)});return a},getMinColSize:function(e){var t=e.get("children").filter(".sqs-row");var n=1;t>0&&0!==n?t.each(function(e,t){var a=e.get("children").filter(".sqs-col");var i=a.size();a.each(function(e){i+=this.getMinColSize(e)-1},this);n=Math.max(n,i)},this):e.all(".sqs-block").each(function(e){var t=f.Widget.getByNode(e);t.blockEditor&&(n=Math.max(n,this.getMinBlockSize(t)))},this);return parseInt(n,10)},getMinBlockSize:function(e){e instanceof f.Node&&(e=f.Widget.getByNode(e));if(!f.Lang.isValue(e)){console.warn("[le] Error, cannot get minimum block size of a non-block");return 1}if(!f.Lang.isValue(e.blockEditor))return 1;return parseInt(e.blockEditor.get("minHSize")||1,10)},getMaxColSize:function(e){var t=e.ancestor(".sqs-col");var a=t?this.getElSize(t):this.get("columns");e.siblings(".sqs-col").each(function(e){a-=this.getMinColSize(e)},this);return a},saveOriginalSizes:function(e){e.all(".sqs-col").each(function(e){this.cleanOriginalSizes(e);e.addClass("origsize-"+this.getElSize(e))},this);e.all(".sqs-block").each(function(e){if(this.getElSize(e)){this.cleanOriginalSizes(e);e.addClass("origsize-"+this.getElSize(e))}},this)},getElOrigSize:function(e){return i(e,"origsize-")},setElSize:function(e,a,t){var i=this.getElSize(e);var c=this.getElOrigSize(e)||i;var n=this.getMinColSize(e);a=!t&&a<n?n:a;e.all(".sqs-block").each(function(e){var t=this.getElOrigSize(e);t&&this.setElSize(e,Math.max(1,Math.floor(a/c*t)))},this);this.updateColumnSize(e,a,i);e.get("children").filter(".sqs-row").each(function(e){var o=a-c;var l=o;e.get("children").filter(".sqs-col").each(function(e,t){var a=this.getElOrigSize(e)||this.getElSize(e);var i=this.getMinColSize(e);var n=a/c;var s=o>0?Math.min(l,Math.ceil(n*o)):Math.max(l,Math.floor(n*o));var r=Math.max(i,a+s);s=r-a;r=a+s;l-=s;this.setElSize(e,r)},this)},this)},updateColumnSize:function(e,t,a){if(!e||t===a)return;f.Lang.isValue(a)&&e.removeClass("sqs-col-"+a);e.addClass("sqs-col-"+t);this._builder.syncDOMToContent()},getColSpace:function(e){return this.getElSize(e)-this.getMinColSize(e)},splitBlock:function(e,t,a){var i=this.getParentSize(e);var n="left"===a?"before":"after";if(0===Math.floor(i/2)){e.insert(t,n);return}var s=this._builder.createRow();e.insert(s,"before");var r=this._builder.createColumn(e,i);var o=this._builder.createColumn(t,0);s.append(r);r.insert(o,n);this.resizeColumn(o,Math.round(i/2))},getClassName:function(e){return f.ClassNameManager.getClassName(e)},getType:function(e){if(e.hasClass("sqs-block")||e.hasClass("free-block"))return"block";if(e.hasClass("sqs-col"))return"column";if(e.hasClass("sqs-row"))return"row";if(e.ancestor(this.get("editController").get("contentParentBlockSelector"),true))return"content";if(e.hasClass("sqs-layout"))return"layout";e.hasClass("sqs-layout-insert-point")||e.hasClass("sqs-layout-insert-point-container")||console.log("Unknown node type (tagName: %s, class: %s, id: %s)",e.get("tagName"),e.get("class"),e.get("id"))},cleanGrid:function(e){this.get("forceSingleColumn")&&this.collapseGrid();this.cleanBlocks();this.cleanColumns();this.cleanRows();f.SQS.LayoutEngine.Events.fire("layout-engine:grid-cleaned")},collapseGrid:function(){var e=this._host.all(".sqs-row > .sqs-col");if(e.size()<2)return;var t=this._host.one(".sqs-row").one("> .sqs-col");var a=this._host.all(".sqs-row > .sqs-col > *");a.each(function(e){t.appendChild(e)},this);e.each(function(e){e!==t&&e.remove()},this);this.resizeColumn(t,12,true)},cleanBlocks:function(){var e=this.getBlockNodes();this._handleEmptyLayout(e);e.each(function(e){var t=f.Widget.getByNode(e);if(!t)throw new Error("[cleanBlocks] Could not find the corresponding block widget for node");if(t.get("destroyed"))return;if(e.hasClass("sqs-col-Infinity")){e.removeClass("sqs-col-Infinity");this.cleanOriginalSizes(e)}t.blockEditor&&t.blockEditor.cleanBlock();t.get("model").get("floatDir")&&!this._isBlockFloatValid(e)&&t.get("model").set("floatDir",null);var a=e.get("children").filter(".sqs-helper").item(0);t.get("model").get("floatDir")?f.Lang.isNull(a)&&this._appendResizerNodeTo(e):a&&a.remove()},this);this.deleteQueuedBlocks()},_handleEmptyLayout:function(e){var t=0===e.size();var a=f.Array.some(e.getDOMNodes(),function(e){e=f.one(e);return!e.hasClass("sqs-float-left")&&!e.hasClass("sqs-float-right")});this.get("lockedLayout")||!t&&a||this._insertTextBlockAtEnd(this._host.one(".sqs-row .sqs-col"));this._host.toggleClass("empty",t)},_handleEmptyLayoutOnDestroy:function(){var e=this.get("host");var t=this.getBlockNodes();var a=t.size();var i=this.get("markdownMode")?"markdown":"html";(0===a||1===a&&t.item(0).hasClass("sqs-block-"+i)&&this._isBlank(t.item(0).get("textContent")))&&e.addClass("empty")},_isBlank:function(e){return!f.Lang.isValue(e)||c.test(e.replace(/&nbsp;/g,"").replace(new RegExp(d,"g"),""))},_toggleInsertPointGuide:function(e){this._host.toggleClass("le-guide-on",e);if(this._insertPointClickedListener){this._insertPointClickedListener.detach();this._insertPointClickedListener=null}e&&(this._insertPointClickedListener=f.Global.once("LayoutInsertPoint:click",this._toggleInsertPointGuide.bind(this,false)))},_isBlockFloatValid:function(e){var t=e.next();if(!t)return false;var a=f.Widget.getByNode(t);if(!a)return false;var i=a.get("model");if(i&&i.get("floatDir"))return this._isBlockFloatValid(t);return t.test(this.get("editController").get("contentParentBlockSelector"))},deleteQueuedBlocks:function(){var e=this.get("host");var t=e.all(".sqs-destroyme");var a=false;if(0===t.size())return;t.each(function(e){var t=f.Widget.getByNode(e);a||e.next(".sqs-block, .sqs-row")||(a=true);if(t&&!t.get("destroyed")){t.destroy();this._builder.deregisterBlock(t)}},this);a&&this.get("editController").alignInsertPoints(e,true)},_insertTextBlockAtEnd:function(e){var t=f.Widget.getByNode(e.all(".sqs-block").pop());var a=t&&parseInt(t.get("type"),10);if(!t||f.Lang.isNumber(a)&&a!==o.HTML&&a!==o.MARKDOWN){var i=this.get("markdownMode")?o.MARKDOWN:o.HTML;var n=this.get("editController").getRenderableBlocks(this.get("editMode"));var s=n.get(l[i]).ctor;var r=new s({editable:true,render:e,visible:true,editMode:this.get("editMode"),editController:this.get("editController")});this._builder.registerBlock(r);this._builder.syncDOMToContent()}},_appendResizerNodeTo:function(e){e.appendChild('<div class="sqs-helper"><div class="sqs-resizer"><div class="sqs-line"></div></div></div>')},_destroyResizeHelperNodes:function(){this.get("host").all(".sqs-helper").remove(true)},cleanColumns:function(){this._host.all(".sqs-row > .sqs-col").each(function(e,t){var a=0===e.all("> *:not(.sqs-helper)").size();var i=this._host.all(".sqs-col").size()>1;if(a&&i){this.resizeColumn(e,-1*this.getElSize(e),true);var n=e.siblings(".sqs-col");e.remove();n.each(function(e){e.all(".sqs-block").each(function(e){var t=f.Widget.getByNode(e);t&&t.fire("resized",{source:"columnChanged"})})});return}this.cleanOriginalSizes(e);this._isBlogApp()&&this._insertTextBlockAtEnd(e);e.one("> .sqs-helper")||this._appendResizerNodeTo(e)},this)},cleanOriginalSizes:function(t){var e=t.get("className").split(" ");f.Array.each(e,function(e){"origsize"===e.substring(0,8)&&t.removeClass(e)},this)},cleanRows:function(){this._host.all(".sqs-row").each(function(t){var e=t.get("parentNode");var a=t.get("children").filter(".sqs-col");var i=t.next()&&"row"===this.getType(t.next())?t.next():null;var n=i?i.get("children").filter(".sqs-col"):null;if(0===t.all(".sqs-block").size()&&this._host.all(".sqs-row").size()>1){t.remove();return}if("column"===this.getType(e)&&1===a.size()){a.each(function(e){e.get("children").filter(".sqs-helper").remove();t.insert(e.get("children"),"after")},this);t.remove()}if(1===a.size()&&i&&1===n.size()){i.one(".sqs-col").prepend(t.one(".sqs-col").get("children"));t.remove()}},this)}},{NS:"LayoutEditor",ATTRS:{scrollNode:{valueFn:function(){return f.one(n(f.config.doc))},lazyAdd:false},columns:{value:12},gutterSize:{value:24},dragDropLock:{value:false},lockedLayout:{valueFn:function(){return this.get("host").hasClass("sqs-locked-layout")},readOnly:true},id:{valueFn:function(){return"layout-"+f.Squarespace.Utils.getGuid()}},forceSingleColumn:{value:false},markdownMode:{getter:function(){return!!f.Object.getValue(window,"Static.SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split("."))}},editController:{writeOnce:true,validator:function(e){return f.instanceOf(e,f.SQS.LayoutEngine.EditControllerBase)}},editMode:{writeOnce:true,validator:function(e){return f.SQS.LayoutEngine.Layout.EditMode.isValid(e)}},layoutTutorialPromise:{value:f.when()},startupBlockId:{value:null,validator:f.Lang.isString}}})},"2.0",{requires:["base","dd-delegate","dd-scroll","event-custom-base","plugin","promise","squarespace-util","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-drag","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/scroll-into-view"]})},7622:function(e,t){YUI.add("@sqs/layout-engine/layout-insert-marker",function(u){var g=u.SQS.LayoutEngine.Layout.Utils.convertToValueInPixel;var t=u.namespace("SQS.LayoutEngine.Layout").InsertMarker=u.Base.create("insert-marker",u.Overlay,[],{renderUI:function(){this.constrainNode=this._createConstrainNode();u.soon(this.positionConstrainNode.bind(this))},bindUI:function(){this.after("infoChange",this._syncInfoToMarker,this);this.after("lockedChange",this._onLockedChange,this);this.on("floatChange",function(e){var t=this.getClassName("float");this.get("boundingBox").toggleClass(t,!!e.newVal)},this);u.DD.DDM.on("insertMarker|ddm:end",this.hide,this)},_onLockedChange:function(e){e.newVal?this.hide():this.show()},positionConstrainNode:function(){if(!this.constrainNode)return;var e=this.get("boundingBox");if(!e||!e.inDoc())return;var t=e.get("parentNode");if(!t)return;var a=t.ancestor(".sqs-layout",true)||u.one(".sqs-layout.sqs-editing");if(!a)return;var i=u.one(u.config.doc.body);var n=a.ancestor(".sqs-layout-wrapper")||a.ancestor(".sqs-content-manager")||i;var s=n.get("region");var r=n===i?0:s.top;this.constrainNode.setStyles({left:Math.max(s.left,0),right:Math.max(u.config.win.innerWidth-s.right,0),top:Math.max(r,0),bottom:Math.max(u.config.win.innerHeight-s.bottom,0),height:"auto",zIndex:this.get("constrainZIndex")})},_createConstrainNode:function(){var e=u.Node.create('<div class="'+t.CSS_PREFIX+'-constrain"></div>');u.one("body").append(e);return e},_syncInfoToMarker:function(){var e=this.get("info");if(!e||!e.node){console.warn("There is no marker info nor info node.");return}if(this.get("locked"))return;var t=e.node;var a=e.type;var i=e.direction;var n=e.region;var s=u.WidgetPositionAlign;var r=false;var o;var l;var c={node:t,points:[]};switch(i){case"top":c.points=[s.LC,s.TL];r=true;break;case"bottom":c.points=[s.LC,s.BL];r=true;break;case"left":c.points=[s.TC,s.TL];break;case"right":c.points=[s.TC,s.TR]}var d;if(e.isSelf){d=u.DD.DDM.activeDrag.get("dragNodeRegion");l=d.width;o=d.height;c.points=[s.TL,s.TL];this.set("float",true)}else if(e.shouldFloat){d=u.DD.DDM.activeDrag.get("dragNodeRegion");l=n.width/2;o=d&&0!==d.height?l*(d.height/d.width):l*(9/16);c.points[0]="left"===i?s.TL:s.TR;this.set("float",true)}else{if(r){o=this.get("lineThickness");l="content"===a?t.ancestor(".sqs-block").get("clientWidth"):n.width}else{o="column"===a?n.height:n.bottom-n.top;l=this.get("lineThickness")}this.set("float",false)}this.setAttrs({width:l,height:o,align:c})},destructor:function(){this.constrainNode&&this.constrainNode.remove();u.DD.DDM.detach("insertMarker|*")},_getRegion:function(e){var t;if(e){e=u.Node.one(e);e&&(t=e.get("region"))}else{t=this._posNode.get("viewportRegion");t.height=u.config.win.innerHeight;t.bottom=t.height+u.config.win.pageYOffset}return t},_getCollapsedVerticalMargin:function(e,t,a){var i=0;switch(a){case"top":i=Math.max(g(t.getStyle("marginBottom")),g(e.getStyle("marginTop")));break;case"bottom":i=Math.max(g(e.getStyle("marginBottom")),g(t.getStyle("marginTop")))}return i},move:function(){var e="xy";var t=arguments;var a=u.Lang.isArray(t[0])?t[0]:[t[0],t[1]];var i=u.one("html");if(i.hasClass("scrolling"))return;var n=this.get("info");var s=n.node;var r="content"===n.type;if(r){var o=s.ancestor(".sqs-block");var l;var c=0;var d=0;o&&(c="right"===n.direction?g(o.getStyle("paddingRight")):-1*g(o.getStyle("paddingLeft")));if("top"===n.direction||this.get("float")){l=s.previous();d=null===l&&o?-1*g(o.getStyle("paddingTop")):l?-1*this._getCollapsedVerticalMargin(s,l,n.direction)/2:-1*g(s.getStyle("marginTop"))/2}else if("bottom"===n.direction){l=s.next();d=null===l&&o?g(o.getStyle("paddingBottom")):l?this._getCollapsedVerticalMargin(s,l,n.direction)/2:g(s.getStyle("marginBottom"))/2}a=[a[0]+c,a[1]+d]}this.set(e,a)}},{CSS_PREFIX:"sqs-layout-insert-marker",ATTRS:{zIndex:{value:8951},constrainZIndex:{valueFn:function(){this.get("zIndex")},validator:function(e){return u.Lang.isString(e)||u.Lang.isNumber(e)}},info:{value:{node:null,type:"",direction:"",region:null,shouldFloat:false,isSelf:false},lazyAdd:false},locked:{value:false},lineThickness:{valueFn:function(){return u.UA.mobile?2:3}}}})},"1.0",{requires:["node","event","overlay","@sqs/layout-engine/layout-utils"]})},7623:function(e,t){YUI.add("@sqs/layout-engine/layout-trash",function(t){t.namespace("SQS.LayoutEngine.Layout");t.SQS.LayoutEngine.Layout.BlockTrash=t.Base.create("blocktrash",t.Widget,[],{initializer:function(){var e=this.get("id");this.blockToRemove=null;this.drop=new t.SQS.LayoutEngine.Layout.Drop({node:this.get("boundingBox"),groups:["blocks"],lockScroll:true});this.drop.on(["drop:enter","drop:over"],this._onDropOver,this);this.drop.on("drop:hit",this._onDropHit,this);this.drop.on("drop:exit",this._onDropExit,this);t.DD.DDM.before(e+"|ddm:end",this._beforeDDMEnd,this);this.after("markerLockChange",this._updateMarkerLock,this)},_onDropOver:function(){this.blockToRemove=t.DD.DDM.activeDrag.get("node");this.set("markerLock",true)},_onDropExit:function(){this.blockToRemove=null;this.set("markerLock",false)},_beforeDDMEnd:function(){var e=t.Widget.getByNode(this.blockToRemove);e&&e.queueForDestruction();this.set("markerLock",false);t.one(t.config.doc).detach(this.get("id")+"|scroll");this.blockToRemove=null},_updateMarkerLock:function(e){this.get("editController").toggleInsertMarkerLock(e.newVal)},destructor:function(){var e=this.get("id");this.drop.detach();this.drop.destroy();t.DD.DDM.detach(e+"|*");t.one(t.config.doc).detach(e+"|scroll")}},{CSS_PREFIX:"sqs-blocktrash",ATTRS:{render:{value:true},markerLock:{value:false},editController:{value:null},winHeight:{valueFn:function(){return t.config.win.innerHeight},lazyAdd:false}}})},"1.0",{requires:["dd","widget","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-insert-marker"]})},7624:function(e,t,a){var d=a(701);var u=a(8732);var g=a(1393);YUI.add("@sqs/layout-engine/models-layout",function(r){var i={type:d.HTML,value:{html:""}};var n={type:d.MARKDOWN};var s=[d.HTML,d.MARKDOWN];var o=function(e){if(!e.rows)return[];var t=[];var a=function(e){if(t.length>2)return;e.columns&&e.columns.length>0&&e.columns.forEach(function(e){if(t.length>2)return;e.rows&&e.rows.length>0&&e.rows.forEach(a);e.blocks&&e.blocks.length>0&&(t=t.concat(e.blocks))})};e.rows.forEach(a);return t.slice(0,2)};var l=r.namespace("SQS.LayoutEngine.Models").PageLayout=r.Base.create("PageLayout",r.Model,[],{toJSON:function(){var e=l.superclass.toJSON.call(this);e.rows=this.get("rows").toJSON();delete e.promotedBlockTypes;delete e.parentLayout;return e},isEmpty:function(){var e=o(this.toJSON());if(1!==e.length)return 0===e.length;var t=e[0];var a=t.value&&t.value.html||"";return s.includes(t.type)&&u(a)},isBlank:function(){var e=o(this.toJSON());if(1!==e.length)return 0===e.length;var t=e[0];var a=t.value&&t.value.html||"";return(t.type===n.type||t.type===i.type)&&g(a)},_getDefaultRows:function(){return[{columns:[{span:this.get("columns"),blocks:[this._getDefaultBlock()]}]}]},_getDefaultBlock:function(){var e=window.Static||{};if(r.Object.getValue(e,"SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split(".")))return n;return i},togglePromote:function(e){var t;var a;if(this.get("legacyPromotedLayout")){var i=this._getPromotedBlockInfo(this.toJSON(),this.get("promotedBlockTypes"));r.Lang.isValue(i)&&(t=i.block.id)}else t=this.get("promotedBlockId");if(r.Lang.isValue(t)){var n=r.one("#block-"+t);a=r.Widget.getByNode(n)}if(a===e){this.set("promotedBlockId",null);e.set("promoted",false)}else{this.set("promotedBlockId",e.get("id"));e.set("promoted",true);r.Lang.isValue(a)&&a.set("promoted",false)}this.set("legacyPromotedLayout",false)},isPromotedBlock:function(e){var t=this.get("promotedBlockId");var a=this.get("legacyPromotedLayout");if(r.Lang.isValue(e)&&e.inPromotedLayout){var i=e.get("id");if(a)return e.inPromotedLayout();return t===i}return false},_getPromotedBlockInfo:function(e,t){if(!this.get("legacyPromotedLayout"))return this._findBlockById(this.get("promotedBlockId"),e);if(r.Lang.isArray(e.rows)&&e.rows.length>0)return this._getPromotedBlockInfo(e.rows[0],t);if(r.Lang.isArray(e.columns)&&e.columns.length>0)return this._getPromotedBlockInfo(e.columns[0],t);if(r.Lang.isArray(e.blocks)&&e.blocks.length>0){var a=e.blocks[0];if(r.Lang.isValue(a.floatDir))return false;if(-1===t.indexOf(a.type))return false;return{block:a,span:e.span,parentBlocksList:e.blocks}}},_findBlockById:function(t,e){var a=function(e){return e.id===t};var i=[e];while(i.length>0){var n=i.shift();if(r.Lang.isArray(n.rows))i.push.apply(i,n.rows);else if(r.Lang.isArray(n.columns))i.push.apply(i,n.columns);else if(r.Lang.isArray(n.blocks)){var s=r.Array.find(n.blocks,a,this);if(r.Lang.isValue(s))return{block:s,span:n.span,parentBlocksList:n.blocks}}}return false},_findPromotedBlock:function(e){r.Array.find(e.blocks,function(e){return e.get("id")===this.get("promotedBlockId")})},getMainPageLayout:function(e){var t=r.clone(this.toJSON());var a=this._getPromotedBlockInfo(t,e);r.Lang.isObject(a)&&a.span==this.get("columns")&&a.parentBlocksList.remove(a.block);var i=new l(r.merge(t,{columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")}));return i},getPromotedPageLayout:function(e){var t=this.toJSON();var a=this._getPromotedBlockInfo(t,e);if(!r.Lang.isObject(a)||a.span!==this.get("columns"))return new l({columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});var i=r.clone(a.block);var n=new l({rows:[{columns:[{blocks:[i],span:a.span}]}],parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});return n}},{ATTRS:{rows:{valueFn:"_getDefaultRows",setter:function(e){if(r.Lang.isArray(e)){0===e.length&&(e=this._getDefaultRows());return new c({items:e})}if(r.instanceOf(e,c))return e}},columns:{value:12},legacyPromotedLayout:{value:true,validator:r.Lang.isBoolean,getter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.get("legacyPromotedLayout");return e},setter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.set("legacyPromotedLayout",e);return e}},promotedBlockId:{value:null,getter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.get("promotedBlockId");return e},setter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.set("promotedBlockId",e);return e}},promotedBlockTypes:{value:[],validator:r.Lang.isArray},parentLayout:{value:null},collectionId:{value:null},parentItemId:{value:null}}});var t=r.namespace("SQS.LayoutEngine.Models").EditableContentBlock=r.Base.create("EditableContentBlock",r.Model,[],{toJSON:function(){var e=t.superclass.toJSON.call(this);e.layout=this.get("layout").toJSON();r.Lang.isValue(e.updatedOn)||(e.updatedOn=new Date);e.updatedOn=e.updatedOn.getTime();return e},_setLayout:function(e,t,a){var i=this.get("layout");if(r.instanceOf(i,l)){i.setAttrs(e,a);return i}if(r.instanceOf(e,l))return e;return new l(e)}},{ATTRS:{layout:{valueFn:function(){return new l},setter:"_setLayout"},updatedOn:{setter:function(e){if(r.Lang.isNumber(e))return new Date(e);if(r.Lang.isDate(e))return e;console.warn("Invalid updatedOn field set: ",e);return r.Attribute.INVALID_VALUE}}}});var a=r.Base.create("BlockList",r.ModelList,[],{});r.Base.create("Column",r.Model,[],{},{ATTRS:{blocks:{value:[],setter:function(e){if(r.Lang.isArray(e))return new a({items:e});if(r.instanceOf(e,a))return e}}}});var e=r.Base.create("Row",r.Model,[],{});var c=r.Base.create("RowList",r.ModelList,[],{model:e})},"1.0",{requires:["base","model","model-list"]})},7625:function(e,t,a){var i=a(5800);var n=a(1007);var s=a(1048);var r=a(895);YUI.add("@sqs/layout-engine/block-schema-editor-base",function(a){a.namespace("SQS.LayoutEngine.Block.Editor").SchemaBase=a.Base.create("schema-editor-base",a.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){this.get("host").get("isNewBlock")&&this.onceAfter("initializedChange",function(){this.set("editing",true)},this);this.after("editingChange",this.syncEditor,this);this.get("host").get("model").after("change",this.updateHost,this);this.get("eventNames").forEach(function(e){this.publish(e,{prefix:"EditingDialog",broadcast:2,emitFacade:true})}.bind(this))},syncEditor:function(e){if(this.get("editing")){var t=this.getEditorConfig();this.setParams(t);this.openEditor(t);return}this.closeEditor()},getEditorConfigKey:function(){var e=this.get("host");var t=e.get("blockTypeName").toLowerCase();return t},getEditorConfig:function(){var e=this.getEditorConfigKey();var t=i[this.getEditorConfigKey()];if(!t){console.log("No schema for blockType:"+e);return}return a.merge(this.get("defaultEditorConfig"),t)},openEditor:function(){},closeEditor:function(){},updateHost:function(){this.get("host").syncUI()},setParams:function(e){if(!e)return;this.params=a.merge({},e)}},{NS:"blockEditor",ATTRS:{defaultEditorConfig:{valueFn:function(){return{name:"editor-block-"+r(this.get("blockTypeName")).replace(/(^legacy\-|\-legacy$|\-v2$)/,"")}}},editingButtons:{value:true},eventNames:{value:[]},blockTypeName:{valueFn:function(){return s(n(this.get("host").get("blockTypeName")))}}}})},"1.0",{requires:["@sqs/layout-engine/block-editor-base"]})},7626:function(e,t,a){var i=a(517);var l=a(229);var n=a(87);var c=a(149);var s=a(24).t;var d=a(1089);var u=a(869).default;var g=a(1516);var r=a(114);var p=a(516);var h=a(599);var f=a(1338);var m=a(390);var v=a(183);var b=a(309);var y=a(3421);YUI.add("squarespace-model-editor",function(o){o.Squarespace.ModelEditorDialog=o.Base.create("ModelEditorDialog",o.Base,[],{initializer:function(){this.saving=false;this.publish("nonSavingClose",{emitFacade:true});this.publish("savingClose",{emitFacade:true});var a=this.get("dialog");this.on("visibleChange",function(e){if("dialog"===e.source)return;if(e.newVal===e.prevVal)return;var t=this.get("dialogConfig");a.detachAll(this.get("id")+"|*");o.detachAll(this.get("id")+"|*");if(!t)throw new Error("You need a DialogConfig for ModelEditorDialog to work!");e.newVal?this._showDialog():this._hideDialog()},this);this.on("modelChange",function(e){e.prevVal&&e.prevVal.detachAll(this.get("id")+"|*")},this);a.on("send-requested",this._onSendRequested,this);a.on("auto-save-requested",this.autoSave,this);a.on(["close","dismiss"],function(e){this.saving?this.fire("savingClose"):this.fire("nonSavingClose");this.set("visible",false,{source:"dialog"})},this)},destructor:function(){this.get("visible")&&this.set("visible",false)},_onSendRequested:function(e){var t=this.get("dialog");var a=this.validateFields();if(o.Lang.isValue(a))t.showErrors(a);else{this.saving=true;this.save()}},_showDialog:function(){var e=this.get("dialog");var t=this.get("dialogConfig");var a=o.Squarespace.ObjectBuilder.make(o.clone(t,this),this.get("dialogConfigContext"),this.getTemplateContext());var i=this.get("parentDialog");o.Lang.isValue(i)&&(a.parentDialog=i);e.setParams(a);e.setInitialData(this.getDialogData());var n={};var s=this.get("anchorNode");var r=this.get("flyoutPointerDirection");s&&(n.anchor=s);r&&(n.flyoutPointerDirection=this.get("flyoutPointerDirection"));e.show(n)},_hideDialog:function(){this.get("model").detachAll(this.get("id")+"|*");this.get("dialog").params.discardChangesConfirmation=false;this.get("dialog").close()},validateFields:function(){var e=this.get("dialog").getErrors();if(0===e.errors)return null},save:function(e,i,n){e=e||{};var t=this.get("dialog");var a=this.get("model");var s=a.getAttrs();a.setAttrs(this.sanitizeDialogData(t.getData()));if(this.get("onlySetAttrsOnSave")){this._saveResponseHandler(null,s,i,n);return}a.save(e,o.bind(function e(t,a){if(t&&a instanceof XMLHttpRequest)try{t=o.merge(t,JSON.parse(a.response))}catch(e){}this._saveResponseHandler(t,s,i,n)},this))},autoSave:function(e){e=e||{};var t=this.get("model");t.setAttrs(this.sanitizeDialogData(this.get("dialog").getData()));t.autoSave(e)},trackAction:function(e,t){try{var a=t.get("id");var i=t.get("collectionId");if(!a||!i||a===i)return;var n=u.getCollection(i);if(!n)return;if(g(n))return;var s=t.get("recordType");var r="blog";n.collectionType===l.COLLECTION_TYPE_GENERIC&&s===c.EVENT&&(r="events");e({itemId:a,collectionType:r,collectionId:i})}catch(e){console.error(e)}},trackSave:function(e,t){this.trackAction(d.saveCollectionItem,e,t);var a=e.get("collectionId");var i=u.getCollection(a);if(g(i)){var n=t;var s=e.getAttrs();var r=s.title;var o=h(e.get("productType"));var l=m.ProductEditor.YUI_EDITOR;var c=s.id;n.excerpt&&s.excerpt&&n.excerpt.html!==s.excerpt.html&&p.trackEditProductDescription(r,o,l,c);if(n.tags!==s.tags){f(n.tags,s.tags).forEach(function(e){p.trackRemoveTag(r,o,l,c,e)});f(s.tags,n.tags).forEach(function(e){p.trackAssignTag(r,o,l,c,e)})}if(n.categories!==s.categories){f(n.categories,s.categories).forEach(function(e){p.trackRemoveCategory(r,o,l,c,e)});f(s.categories,n.categories).forEach(function(e){p.trackAssignCategory(r,o,l,c,e)})}n.workflowState!==s.workflowState&&p.trackChangeVisibility(r,o,l,c,y.mapWorkflowStateToString(s.workflowState));n.additionalFieldsFormId!==s.additionalFieldsFormId&&p.trackAssignForm(r,o,l,c);n.relatedProductsStrategy===s.relatedProductsStrategy?"categories"===s.relatedProductsStrategy&&this._getRelatedCategoriesValue(n)!==this._getRelatedCategoriesValue(s)?p.trackChangeRelatedProducts(r,o,l,c,this._getRelatedCategoriesValue(s)):"tags"===s.relatedProductsStrategy&&n.relatedTags[0]!==s.relatedTags[0]&&p.trackChangeRelatedProducts(r,o,l,c,s.relatedTags[0]):n.relatedProductsStrategy!==s.relatedProductsStrategy&&("categories"===s.relatedProductsStrategy?p.trackChangeRelatedProducts(r,o,l,c,this._getRelatedCategoriesValue(s)):"tags"===s.relatedProductsStrategy?p.trackChangeRelatedProducts(r,o,l,c,s.relatedTags[0]):p.trackChangeRelatedProducts(r,o,l,c,"no-value-selected"));e.get("productType")===b.DIGITAL?n.onSale!==s.onSale&&p.trackToggleOnSale(r,o,l,c,s.onSale):v(n.variants,s.variants)||s.variants.forEach(function(t){var e;n.variants&&(e=n.variants.find(function(e){return e.id===t.id}));e?t.onSale!==e.onSale&&p.trackToggleOnSale(r,o,l,c,t.onSale):t.onSale&&p.trackToggleOnSale(r,o,l,c,t.onSale)})}},_getRelatedCategoriesValue:function(e){var t=r.isFeatureEnabled(n.NESTED_CATEGORIES);return t?e.relatedCategoryIds[0]:e.relatedCategories[0]},_saveResponseHandler:function(e,t,a,i){var n=this.get("dialog");var s=this.get("model");if(e){if(e.errors)n.showErrors(e.errors);else{this._createErrorAlert(e);n.allowEditing()}s.setAttrs(t)}else{this.trackSave(s,t);a&&a();i||this.hide()}this.saving=false},_createErrorAlert:function(e){var t=String(e.code).charAt(0);var a;"4"===t||"5"===t?a=e.message||this.get("strings.errorMessage"):o.Lang.isString(e)?a=e:o.Lang.isObject(e)&&(e.error?a=e.error:e.message&&(a=e.message));i.trackCaughtError("damask","ModelEditorDialog._createErrorAlert ["+this.name+"]: "+a);if(a)return new o.Squarespace.Widgets.Alert({"strings.title":this.get("strings.errorTitle"),"strings.message":a})},getTemplateContext:function(){return this.get("model")},getDialogData:function(){return this.get("model").toJSON()},sanitizeDialogData:function(e){return e},show:function(){this.set("visible",true)},hide:function(){this.set("visible",false)}},{ATTRS:{model:{},onlySetAttrsOnSave:{value:false},dialog:{readOnly:true,valueFn:function(){return new o.Squarespace.EditingDialog}},dialogConfig:{},dialogConfigContext:{value:{}},anchorNode:{value:null},flyoutPointerDirection:{value:null},visible:{value:false},parentDialog:{value:null},strings:{value:{errorMessage:s("Please try again."),errorTitle:s("Error")}}}});o.namespace("Squarespace.ModelEditorPlugins");o.Squarespace.ModelEditorPlugins.AutoSave=o.Base.create("ModelEditorPluginAutoSave",o.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){this._autoSaveRequest=o.later(5e3,this,this.requestAutoSave)},this);var e=o.bind(function(){if(this._autoSaveRequest){this._autoSaveRequest.cancel();this._autoSaveRequest=null}},this);var t=this.get("host").get("dialog");t&&t.on(["close","dismiss"],function(){e()},this);this.beforeHostMethod("_hideDialog",e,this);this.beforeHostMethod("autoSave",function(){this.get("host").get("model").once("save",function(){e();this._autoSaving=false},this)},this)},requestAutoSave:function(){if(this._autoSaving||!this.get("host").get("dialog").isVisible())return;this._autoSaving=true;this.get("host").autoSave()}},{NS:"autoSavePlugin"});o.Squarespace.ModelEditorPlugins.LoadBeforeShowing=o.Base.create("ModelEditorPluginLoadBeforeShowing",o.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){var e=this.get("host");var t=e.get("dialog");var a=e.get("model");t.updateTitle(o.Squarespace.DialogStates.LOADING);t.showSaveOverlay();var i=this.get("id")+"|load";a.onceAfter(i,this.initDialogWithBlockModelData,this);a.load({forceReload:true},o.bind(this._loadErrorCallback,this))},this)},initDialogWithBlockModelData:function(){var e=this.get("host");var t=e.get("dialog");var a=e.getDialogData();t.setInitialData(a);t.setData(a);t.hideSaveOverlay();t.clearEdited()},_loadErrorCallback:function(e,t){if(e){if(t instanceof XMLHttpRequest)try{e=o.merge(e,JSON.parse(t.response))}catch(e){}var a=this.get("host");var i=a._createErrorAlert(e);i&&i.on("confirm",function(){a.get("dialog").close()},this)}}},{NS:"loadBeforeShowing"})},"1.0",{requires:["plugin","squarespace-dialog","squarespace-object-builder","squarespace-ss-widget","squarespace-ui-base","squarespace-widgets-alert"]})},7627:function(e,t){YUI.add("squarespace-singletons-location",function(r){r.namespace("Squarespace.Singletons");var e=r.Base.create("damaskLocation",r.Base,[],{go:function e(t,a){var i=this.get("controller").get("router");var n=i.getCurrentLocation().pathname;var s=a&&(a.shimmy||a.focus);i.push(t);t===n&&s&&r.Global.fire("shimmy",a.shimmy)},goBack:function e(){this.get("controller").get("router").goBack()},goUp:function e(){this.get("controller").get("router").goUp()},getFrameUrl:function(){return this.get("controller").getFrameUrl()},getPanelPath:function(){return this.get("controller").getPanelPath()},setFrameUrl:function(e){this.get("controller").setFrameUrl(e)},setFrameUrlOrRefresh:function(e){this.get("controller").setFrameUrlOrRefresh(e)},requestFrameRefresh:function(){this.get("controller").requestFrameRefresh()},goToCollection:function(e,t){e=e||"";var a="/pages/"+e;this.go(a,t)},goToContentItem:function(e,t){var a="/pages/"+e.get("collectionId")+"/"+e.get("id");this.go(a,r.merge({safeUrl:true},t))},pointFrameToCollection:function(e,t){if(r.Squarespace.Navigation.ListUtils.isCollectionInIndex(e)&&e.get("enabled")){this.pointFrameToCollectionInIndex(e,t);return}var a=this.get("controller").get("contentBridge").getCollectionUrl(e);t?this.setFrameUrlOrRefresh(a):this.setFrameUrl(a)},pointFrameToContentItem:function(e,t){var a=e.get("fullUrl");t?this.setFrameUrlOrRefresh(a):this.setFrameUrl(a)},pointFrameToCollectionInIndex:function(e,t){var a=r.Squarespace.Navigation.ListUtils.getParentCollection(e);var i=e.get("id");var n=a.get("id");this.get("controller").get("contentBridge").ensureCollectionInStackedIndexIsOnScreen(i,n,t)}},{ATTRS:{controller:{getter:function(e){if(!r.Lang.isValue(e))return CONFIG_PANEL;return e},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Base)}}});r.Lang.isValue(r.Squarespace.Singletons.Location)||(r.Squarespace.Singletons.Location=new e)},"1.0",{requires:["base","squarespace-attr-validators","squarespace-navigation-list-utils"]})},7628:function(e,t,a){var r=a(24).t;YUI.add("squarespace-dialog-flow",function(s){s.namespace("Squarespace");s.Squarespace.DialogFlow=s.Base.create("dialogFlow",s.Base,[],{initializer:function(e){this.set("options",e.options);this.set("title",e.title);this.set("fieldName",e.fieldName);this.set("initialField",e.initialField)},showPrescreen:function(t){var e=this.get("fieldName");var a=this.get("initialField");var i=[];s.Lang.isUndefined(t)&&(t={});s.Lang.isUndefined(a)||i.push(a);i.push({ctor:s.Squarespace.DialogFields.Description,config:{title:this.get("subtitle"),text:this.get("description")}},{ctor:s.Squarespace.DialogFields.MultiOption,config:{name:e,options:this.get("options"),optionClickCb:this.get("optionClickCb"),columns:this.get("optionColumns")}});var n=this._prescreen=new s.Squarespace.EditingDialog({name:this.get("fieldName"),overlay:.5,width:this.get("width"),style:"flyout",initialData:t,closeOthers:false,buttons:[{type:"cancel",title:r("Cancel")}],discardChangesConfirmation:false,primaryTabs:[{title:this.get("title"),icon:this.get("icon")||"/universal/images-v6/icons/icon-plus-16-light.png",fields:i}]});n.on("ready",function(){n.getField(e).after("dataChange",function(e){n.close();this.proceed(t,e.newVal)},this)},this);n.show()},close:function(){this._prescreen.close()},proceed:function(e,t){e[this.get("fieldName")]=t;var a=this.get("nextDialogGenerator");if(!a){this.fire("proceed",{valueChoice:t});return}var i=a(e);if(i instanceof s.Squarespace.DialogFlow)i.showPrescreen(e);else{if(!(i.constructor instanceof s.Squarespace.EditingDialog.constructor))throw void 0===i?new Error("nextDialog not specified"):new Error("Unsupported Dialog");i.show()}}},{NS:"dialogFlow",ATTRS:{description:{value:""},fieldName:{value:""},nextDialogGenerator:{value:null},options:{value:[]},optionClickCb:{value:null},optionColumns:{value:1},subtitle:{value:""},title:{value:""},width:{value:550}}})},"1.0",{requires:["base","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option"]})},7629:function(e,t,a){var r=a(4156);YUI.add("squarespace-dialog-multi-option",function(s){var e=s.namespace("Squarespace.DialogFields").MultiOption=s.Base.create("multiOption",s.Squarespace.DialogField2,[],{initializer:function(e){this.get("data")||s.Lang.isUndefined(e.defaultValue)||this.set("data",e.defaultValue);this._selectedOptionEl=null;this.publish("option-click",{broadcast:2})},renderUI:function(){e.superclass.renderUI.call(this);this._renderTitle();this._renderOptions()},bindUI:function(){this._registerEvent(this.get("contentBox").delegate("click",this._onOptionClick,".option",this));this.after("optionsChange",this._renderOptions);this.after("optionsChange",this.syncUI);this.after("stringsChange",this._renderTitle)},syncUI:function(){e.superclass.syncUI.call(this);this._setupOptionWidths();this._setHeight()},selectOption:function(t){this.get("contentBox").all(".option").each(function(e){this._optionMatchesData(e,t)&&this._selectOption(e)},this)},_renderTitle:function(){var e=this.get("strings.title");var t=this.get("contentBox");var a=t.one(".title");e&&s.Lang.isNull(a)?t.append(s.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):e?a.empty().setHTML(this.get("strings.title")):e||s.Lang.isNull(a)||a.remove(true)},_renderOptions:function(){var n=this.get("contentBox");var e=this.get("options");n.all(".option").remove();s.Array.each(e,function(e){if(e.section){n.append(s.Node.create('<div class="option-label">'+e.section+"</div>"));return}var t=s.Node.create(s.Lang.sub('<div class="option" data-value="{value}" data-test="MultiOption {value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',e));t.setData(e);var a=t.one(".option-content");var i=e.description;i&&a.append(s.Node.create('<div class="option-description">'+i+"</div>"));e.childNode instanceof s.Node&&a.append(e.childNode);e.icon?t.addClass("icon-"+e.icon):t.addClass("no-icon");n.append(t);this._optionMatchesData(t)&&this._markSelected(t);e.locked&&t.addClass("locked");if(e.upsellLocked){"object"!==typeof e.upsellInfo&&(e.upsellInfo={});t.addClass("upsell-locked");t.one(".option-title").insert('<span class="option-logo"></span>',"after");this._registerEvent(t.on("click",function(){t.one(".option-logo button").getDOMNode().click()}));r.renderLogo({node:t.one(".option-logo").getDOMNode(),analyticsId:"commerce-add-product",featureGateClass:".sqs-featuregate-logo",upsellCopyOverrides:e.upsellInfo})}},this)},_setHeight:function(){var e=this.get("contentBox");var t=this.get("options");var a=e.one(".option");if(!a)return;var i=parseFloat(a.getComputedStyle("height"));var n=parseFloat(a.getComputedStyle("paddingTop"))+parseFloat(a.getComputedStyle("paddingBottom"));var s=this.get("columns")||t.length;var r=Math.ceil(t.length/s);e.setStyle("height",Math.ceil((i+n)*r))},_selectOptions:function(){this.get("contentBox").all(".option").each(function(e){this._optionMatchesData(e)&&this._selectOption(e)},this)},_optionMatchesData:function(e,t){s.Lang.isUndefined(t)&&(t=this.get("data"));var a=e.getData("value");if(this.get("numeric"))return t===s.Number.parse(a);s.Lang.isObject(a)&&s.Lang.isObject(t)&&false;return t===a},_onOptionClick:function(e){var t=e.target.hasClass("option")?e.target:e.target.ancestor(".option");var a=this.get("optionClickCb");if(!t.hasClass("upsell-locked")&&!t.hasClass("locked")){e.halt();this._selectOption(t)}s.Lang.isFunction(a)&&a(this.get("data"));this.fire("option-click",{option:this.get("data")})},_markSelected:function(e){if(e===this._selectedOptionEl)return;this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected");e.addClass("selected");this._selectedOptionEl=e},_selectOption:function(e){if(e===this._selectedOptionEl)return;this._markSelected(e);var t=e.getData("value");if(this.get("numeric")){var a=s.Number.parse(t);s.Lang.isNumber(a)&&(t=a)}this.set("data",t);if(this.get("submitOnSelect")){var i=this.get("dialog");s.Lang.isValue(i)&&i.saveAndClose()}},_setupOptionWidths:function(){var e=this.get("columns")||this.get("options").length;parseInt(e,10)>0&&this.get("boundingBox").addClass(this.getClassName("columns-"+e))}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(e){return this.get("numeric")?s.Number.parse(e):e}},options:{value:null},optionClickCb:{value:null,setter:function(e){if(!s.Lang.isFunction(e))return null;return e}},submitOnSelect:{value:false},columns:{value:null},numeric:{value:false,validator:s.Lang.isBoolean},readOnly:{value:true}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2"]})},7631:function(e,t,a){var s=a(24).t;var r=a(598);YUI.add("squarespace-licensed-assets-workflow",function(i){i.namespace("Squarespace.LicensedAssets");var n={CLEAR_EVENT:"getty_clear",PURCHASE_EVENT:"getty_purchase",IMAGE_PREVIEW_EVENT:"getty_image_preview",LICENSED_ASSET_REMOVE:"licensed_asset_remove"};i.Squarespace.LicensedAssets.Workflow=i.Base.create("LicensedAssetsWorkflow",i.Base,[i.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this._imagePicker=new i.Squarespace.ImagePicker.Widgets.Selector({imageDestination:this.get("imageDestination"),disableImageReuse:this.get("disableImageReuse")});this._previewDetails=new i.Squarespace.LicensedAssets.Widgets.Details;this._bindEvents()},destructor:function(){this._imagePicker.destroy();this._previewDetails.destroy();this._imagePicker=null;this._previewDetails=null},showImagePicker:function(){this._imagePicker.render();this._imagePicker.show()},showPurchaseDetails:function(e,t){this._trackEvent(n.PURCHASE_EVENT,e.assetId);this._previewDetails.get("rendered")||this._previewDetails.render();this._previewDetails.setAttrs({isOpen:true,licensedAssetPreview:new i.Squarespace.LicensedAssets.Models.Preview(e),previewUrl:t})},showLicensingDetails:function(e,t){i.Squarespace.LicensedAssets.Manager.getById(e).then(function(e){new i.Squarespace.Widgets.Alert({"strings.title":s("You Can Use This Image on Your Site"),"strings.message":s('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:e.originUrl})})})},trackPreviewRemovalEvent:function(e){this._trackEvent(n.CLEAR_EVENT,e,r.GETTY)},trackLicensedAssetRemovalEvent:function(e,t){this._trackEvent(n.LICENSED_ASSET_REMOVE,e,t)},_bindEvents:function(){this._imagePicker.on("downloadRequest",this._fireDownloadRequest,this);this._imagePicker.on("imagePicked",this._fireImagePicked,this);this._previewDetails.on("downloadRequest",this._fireDownloadRequest,this)},_fireDownloadRequest:function(e){e.target.hide();e.stopPropagation();var t=e.request;var a=t.get("licensedAssetPreview");i.Lang.isValue(a)&&this._trackEvent(n.IMAGE_PREVIEW_EVENT,a.get("assetId"));this.requestDownload(e.request)},_fireImagePicked:function(e){this.fire("imagePicked",e)},_trackEvent:function(e,t,a){i.Squarespace.Analytics.trackInternal(e,{assetId:t,assetSource:a})}},{ATTRS:{imageDestination:{},disableImageReuse:{value:false}}})},"1.0",{requires:["base","squarespace-image-picker-download-request","squarespace-image-picker-selector","squarespace-licensed-assets-details","squarespace-licensed-assets-manager","squarespace-licensed-assets-preview","squarespace-util","squarespace-widgets-alert"]})},7632:function(e,t){YUI.add("squarespace-image-picker-download-request",function(e){e.namespace("Squarespace.ImagePicker").DownloadRequest=e.Base.create("DownloadRequest",e.Model,[],{},{ATTRS:{url:{value:null},licensedAssetPreview:{value:null},licensedAssetId:{value:null},isPurchased:{value:false}}})},"1.0",{requires:["base","model"]})},7633:function(e,t,a){var i=a(0);var n=a(60);var s=a(1028);var r=a(34);var o=a(2581);var l=a(1602);var c=a(1174);YUI.add("squarespace-image-picker-selector",function(t){t.namespace("Squarespace.ImagePicker.Widgets");t.Squarespace.ImagePicker.Widgets.Selector=t.Base.create("ImagePickerSelector",t.Squarespace.Widgets.SSWidget,[t.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this.publish("imagePicked",{emitFacade:true,bubbles:true})},destructor:function(){if(this._actionListener){this._actionListener.removeAllActionListeners();this._actionListener=null}l.closeImagePicker();n.unmountComponentAtNode(this.get("contentBox").getDOMNode())},bindUI:function(){this._actionListener=new s(r);this._actionListener.addActionListener(l.CLOSE_IMAGE_PICKER,function(){this.set("isShow",false)}.bind(this));this.on("isShowChange",this._onShowChange,this)},show:function(){this.set("isShow",true)},_onShowChange:function(e){if(e.newVal){n.render(i.createElement(o,{onUnlicensedPreview:this._fireDownloadRequest.bind(this),onLicensedPreview:function(e){e.licensedAssetId?this._firePurchasedPreviewRequest(e):this.fire("imagePicked",e)}.bind(this),loadOnInit:true,imageDestination:this.get("imageDestination"),disableImageReuse:this.get("disableImageReuse")}),this.get("contentBox").getDOMNode());l.openImagePicker()}else setTimeout(function(){if(this.get("isShow"))return;n.unmountComponentAtNode(this.get("contentBox").getDOMNode())}.bind(this),300)},_fireDownloadRequest:function(e){e.licensedAssetPreview=new t.Squarespace.LicensedAssets.Models.Preview(e.licensedAssetPreview);this.requestDownload(e)},_firePurchasedPreviewRequest:function(e){this.requestDownload(e).then(function(){l.finishLoadingImage();l.closeImagePicker()}).catch(function(){c.showError()})}},{CSS_PREFIX:"sqs-image-picker-selector",ATTRS:{isShow:{value:false},imageDestination:{},disableImageReuse:{value:false}}})},"1.0",{requires:["base","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget-parent"]})},7634:function(e,t){YUI.add("squarespace-image-picker-has-download-request",function(e){e.namespace("Squarespace.ImagePicker.DownloadRequest");e.Squarespace.ImagePicker.HasDownloadRequest=e.Base.create("HasDownloadRequest",e.Plugin.Base,[],{initializer:function(){this.publish("downloadRequest",{emitFacade:true,bubbles:true})},requestDownload:function(a){e.instanceOf(a,e.Squarespace.ImagePicker.DownloadRequest)||(a=new e.Squarespace.ImagePicker.DownloadRequest(a));return e.Squarespace.Promises.create(function(e,t){this.fire("downloadRequest",{request:a});e()},this)}})},"1.0",{requires:["base","plugin","squarespace-image-picker-download-request","squarespace-promises"]})},7635:function(e,t){YUI.add("squarespace-licensed-assets-preview",function(e){e.namespace("Squarespace.LicensedAssets.Models");e.Squarespace.LicensedAssets.Models.Preview=e.Base.create("LicensedAssetPreview",e.Model,[],{},{ATTRS:{assetId:{validator:e.Squarespace.AttrValidators.isNullOrString},source:{validator:e.Squarespace.AttrValidators.isValueIn(e.Squarespace.LicensedAssetSource)},artist:{validator:e.Lang.isString},collectionName:{validator:e.Lang.isString},collectionId:{validator:e.Squarespace.AttrValidators.isNullOrString},title:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},7636:function(e,t,a){var i=a(0);var n=a(60);var s=a(2582);YUI.add("squarespace-licensed-assets-details",function(e){e.namespace("Squarespace.LicensedAssets.Widgets");var t=e.Squarespace.LicensedAssets.Widgets.Details=e.Base.create("LicensedAssetDetails",e.Widget,[e.Squarespace.ImagePicker.HasDownloadRequest],{destructor:function(){this.get("rendered")&&n.unmountComponentAtNode(this.get("mountNode"));this._changeBinding&&this._changeBinding.detach()},renderUI:function(){t.superclass.renderUI.apply(this,arguments);this._renderLicenseImage()},bindUI:function(){t.superclass.bindUI.apply(this,arguments);this._changeBinding=this.after(["licensedAssetPreviewChange","isOpenChange","previewUrlChange"],this._renderLicenseImage.bind(this))},_renderLicenseImage:function(){var e=this.get("licensedAssetPreview");n.render(i.createElement(s,{assetPreview:e?e.toJSON():null,previewUrl:this.get("previewUrl"),isOpen:this.get("isOpen"),onRequestClose:this._close.bind(this),onPurchaseSuccess:this._onPurchaseSuccess.bind(this)}),this.get("mountNode"))},_close:function(){this.set("isOpen",false)},_onPurchaseSuccess:function(e){this._close();this.requestDownload({url:e.url,licensedAssetId:e.licensedAssetId,isPurchased:true})}},{CONTENT_TEMPLATE:null,ATTRS:{isOpen:{validator:e.Squarespace.AttrValidators.isBoolean,value:false},licensedAssetPreview:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.LicensedAssets.Models.Preview)},mountNode:{getter:function(){return this.get("contentBox").getDOMNode()},readOnly:true},previewUrl:{validator:e.Squarespace.AttrValidators.isNullOrString,value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget"]})},7637:function(e,t){YUI.add("squarespace-plugin-node-expander",function(a){a.namespace("Squarespace.Plugins").NodeExpander=a.Base.create("NodeExpander",a.Plugin.Base,[],{initializer:function(){var e=this.get("node");e.addClass("sqs-node-expander");this._button=e.appendChild('<div class="sqs-node-expander-wrapper"><div class="sqs-node-expander-button"></div></div>');this._placeholderNode=a.Node.create("<div></div>");this._resizeEmitter=new a.Squarespace.ResizeEmitter;this.publishEvents();this.bindEvents();this._escManagerTarget={close:this.toggleExpanded.bind(this)}},publishEvents:function(){this.publish("expand-start",{emitFacade:true,defaultFn:this._expand});this.publish("expand-end",{emitFacade:true});this.publish("contract-start",{emitFacade:true,defaultFn:this._contract});this.publish("contract-end",{emitFacade:true});this.publish("expand-resized",{emitFacade:true,defaultFn:this._syncExpandedSizing})},bindEvents:function(){a.Squarespace.Utils.onPointerAction(this._button,this.toggleExpanded,this);this.after("expandedChange",function(e){this._button.toggleClass("sqs-node-expander-active",!!e.newVal);e.newVal?this.fire("expand-start"):this.fire("contract-start")},this);this._resizeEmitter.on("resize",function(e){if(!this.get("expanded"))return;if(this._expandSizingRequest){this._expandSizingRequest.cancel();this._expandSizingRequest=null}this._expandSizingRequest=a.later(500,this,function(){this.fire("expand-resized")})},this)},_syncExpandedSizing:function(){var e=this._placeholderNode.get("region");this.get("node").setStyles({top:-1*e.top,left:-1*e.left,width:a.config.win.innerWidth,height:a.config.win.innerHeight})},_expand:function(){var e=this.get("node");e.insert(this._placeholderNode.setStyles({width:e.get("offsetWidth"),height:e.get("offsetHeight")}),"after");var t=e.get("region");e.addClass("sqs-node-expander-active");e.addClass("sqs-node-expander-expanding");e.setStyles({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:101});e.anim({top:-1*t.top,left:-1*t.left,width:a.config.win.innerWidth,height:a.config.win.innerHeight},{duration:.5,end:function(){this.fire("expand-end");e.removeClass("sqs-node-expander-expanding")}},this).run();a.Squarespace.EscManager.addTarget(this._escManagerTarget)},_contract:function(){var e=this.get("node");var t=this._placeholderNode.get("region");e.addClass("sqs-node-expander-contracting");e.anim({top:0,left:0,width:t.width,height:t.height,zIndex:101},{end:function(){this._placeholderNode.remove();e.removeClass("sqs-node-expander-contracting");e.removeClass("sqs-node-expander-active");e.setStyles({position:null,top:null,left:null,right:null,bottom:null});this.fire("contract-end")}},this).run();a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},hideButton:function(){this._button&&this._button.addClass("sqs-node-expander-wrapper-hidden")},showButton:function(){this._button&&this._button.removeClass("sqs-node-expander-wrapper-hidden")},toggleExpanded:function(){this.set("expanded",!this.get("expanded"))},destructor:function(){this._button.detachAll();this._button.remove(true);this._button=null;this.get("node").removeClass("sqs-node-expander")}},{NS:"NodeExpander",ATTRS:{expanded:{value:false},node:{valueFn:function(){return this.get("host")}}}})},"1.0",{requires:["base","node","plugin","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-util"]})},7638:function(e,t,a){var u=a(24).t;var i=a(595);YUI.add("squarespace-dialog-create-link",function(d){d.namespace("Squarespace.DialogFields");var e=d.Squarespace.DialogFields.CreateLink=d.Base.create("createLink",d.Squarespace.DialogField2,[],{initializer:function(){this.get("strings.placeholderText")||this.set("strings.placeholderText",u("Click to add URL…"));this._edited=false},destructor:function(){this._removeBlurHandler();this._editingWindow=null;this._editingWindowTabs=null;this._clearButton=null;this._linkTextField=null;this._placeholder=null},renderUI:function(){e.superclass.renderUI.call(this);d.Squarespace.ContentStatsCache.isEmpty()?d.Squarespace.ContentStatsCache.load(this._registerCallback(function(){this._verifyLink(d.bind(this._customRender,this))},this)):this._verifyLink(d.bind(this._customRender,this))},getErrors:function(){var e=this.get("data.url");if(this._isExternalTabActive()&&!!e&&e.length>0&&!i.isSlash(e)&&!i.isProperUrl(e)&&!i.isIP(e)&&!i.isAnchor(e)&&!i.isTel(e)&&!i.isSms(e)&&!i.isMailto(e)&&!i.isJavascript(e)&&!i.isFtp(e)&&!i.isInternalUrl(e))return[u("Please enter a valid URL")];return[]},_isExternalTabActive:function(){return"external"===this._editingWindowTabs.getActiveChildId()},_customRender:function(e){var t=this.get("width");t&&this.get("contentBox").setStyles({width:t});var a=this.get("contentBox");this.get("condensed")&&a.addClass("condensed");this.get("strings.title")&&a.append(d.Node.create('<div class="title">'+this.get("strings.title")+"</div>"));this.get("withLinkText")&&(this._linkTextField=new d.Squarespace.DialogFields.Text({name:"text","strings.title":u("Link Text"),className:"thin",render:a,data:this.get("data.text")}));this._editingWindow=d.Node.create('<div class="editing-window"></div>');this.get("showPlaceholder")||this._editingWindow.addClass("without-placeholder");a.append(this._editingWindow);this._editingWindowTabs=this._createTabs(e);this._editingWindowTabs.render(this._editingWindow);if(this.get("showPlaceholder")){var i=this.get("data.url");this._placeholder=d.Node.create('<div class="placeholder"><div class="link-icon"></div><div class="inner">'+d.Escape.html(i||this.get("strings.placeholderText"))+"</div></div>");this._set("errorFlyoutAnchor",this._placeholder);this._clearButton=d.Node.create('<div class="clear'+(i?"":" hidden")+'"></div>');this._placeholder.append(this._clearButton);this._editingWindow.insert(this._placeholder,"before");this._editingWindow.addClass("hidden");this._editingWindow.setStyle("height",0);this._editingWindow.one(".sqs-tab-view").setStyle("opacity",0)}else{this._editingWindow.setStyle("height",this._getOpenWindowHeight());this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus();this._set("errorFlyoutAnchor",this._editingWindow)}this.fire("rendered");this._customBindUI()},_customBindUI:function(){this.get("withLinkText")&&this._linkTextField.after("dataChange",function(e){var t=this.get("data")||{};t.text=e.newVal;this.set("data",t)},this);if(this.get("showPlaceholder")){this._placeholder.on("click",function(e){if(e.target.hasClass("clear"))this._clear();else{e.halt();this._placeholder.hasClass("open")?this._closeEditingWindow():this._openEditingWindow()}},this);this.after("dataChange",this._setPlaceholderText,this)}this._editingWindowTabs.before("tab-switch-requested",function(e){if(this._editingWindowTabs.getActiveChildId()==e.tabId)return;if(!this._placeholder||this._placeholder.hasClass("open")){this._editingWindow.one(".sqs-tab-view-children").setStyle("opacity",0);this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();var t=this._editingWindow.anim({height:this._getOpenWindowHeight(e.tabId)},{duration:.2,end:function(){this._editingWindow.one(".sqs-tab-view-children").anim({opacity:1},{duration:.1}).run();this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this});t.on("tween",function(){this.fire("animating")},this);t.run()}},this);this.get("required")&&this.after("dataChange",function(e){this.hideError()},this)},didDataChange:function(){return this._edited},isEmpty:function(){var e=this.get("data.url");return!e||""===e},_verifyLink:function(i){var e=this._getLinkType(this.get("data.url"));if("external"===e)i();else if("files"===e){var t=this._getSelectedFile();d.Data.get({url:d.Squarespace.API_ROOT+"content-items",data:{recordType:d.Squarespace.RecordType.ATTACHMENT,urlId:t},success:function(e){var t=d.Object.getValue(e,["results"]);var a=d.Lang.isArray(t)&&t.length>0;i(!a)},failure:function(e){i()}},this)}else if("content"===e){var a=this._getSelectedContent();var n=d.Array.find(d.Squarespace.ContentCollectionCache.toArray(),function(e){return e.get("urlId")==a.urlId});if(n)if(a.filter){var s=a.filter;var r=false;var o=d.Squarespace.ContentStatsCache.getByCollectionId(n.get("id"));o&&"category"===s.type?d.Array.each(o.getCategoriesAsStringArray(),function(e){e===s.name&&(r=true)}):o&&d.Array.each(o.getTagsAsStringArray(),function(e){e===s.name&&(r=true)});r?i():i(true)}else i();else i(true)}},_createTabs:function(e){var t=this._getLinkType(this.get("data.url"));var a=this.get("data.url");var i=this.get("data.newWindow");var n=this.get("disableNewWindow");var s;var r;e&&(t="external");"files"===t?s=this._getSelectedFile():"content"===t&&(r=this._getSelectedContent());var o={external:{label:u("External"),id:"external",ctor:d.Squarespace.Views.ExternalLinkTab,config:{onDataChange:d.bind(function(e,t,a){var i=null;d.Lang.isValue(e)&&""!==e&&(i={url:e,newWindow:t,text:this.get("data.text")});this.set("data",i);if(a){this.get("showPlaceholder")&&this._closeEditingWindow();this.fire("close")}this._edited=true},this),linkUrl:"external"===t?a:null,newWindow:i,disableNewWindow:n,className:"light"===this.get("className")?"dark":"light"}},files:{label:u("Files"),id:"files",ctor:d.Squarespace.Views.FileManagerTab,config:{onDataChange:d.bind(function(e,t){this.set("data",{url:e?"/s/"+e:null,newWindow:t,text:this.get("data.text")});this._edited=true},this),selectedFile:"files"==t?s:null,newWindow:i,disableNewWindow:n}},content:{label:u("Content"),id:"content",ctor:d.Squarespace.Views.ExistingContentLinkTab,config:{onDataChange:d.bind(function(e,t,a){var i="/"+e.urlId;e.filter&&(i=i+"?"+e.filter.type+"="+encodeURIComponent(e.filter.name));this.set("data",{url:i,newWindow:t,text:this.get("data.text")});a||this.fire("close");this._edited=true},this),selectedContent:"content"==t?r:null,newWindow:i,disableNewWindow:n}}};var l=this.get("renderTabs");var c=[];d.Object.each(l,function(e,t){e&&c.push(o[t])});return new d.Squarespace.Widgets.TabView({widgets:c,initialTabId:t})},_createBlurHandler:function(){this._blurHandler=d.one("body").on("click",function(e){var t=this.get("contentBox");t.contains(e.target)||this._closeEditingWindow()},this);this._registerEvent(this._blurHandler)},_removeBlurHandler:function(){if(this._blurHandler){this._blurHandler.detach();this._blurHandler=null}},_openEditingWindow:function(){this.hideError();this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.anim({height:this._getOpenWindowHeight()},{duration:.2,start:function(){this._placeholder.addClass("open");this._editingWindow.removeClass("hidden")},end:function(){this._createBlurHandler();this._editingWindow.one(".sqs-tab-view").anim({opacity:1},{duration:.1}).run();this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this}).run()},_closeEditingWindow:function(e){this._removeBlurHandler();this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.one(".sqs-tab-view").anim({opacity:0},{duration:.1,start:function(){this._editingWindow.anim({height:0},{duration:.2,end:function(){this._placeholder&&this._placeholder.removeClass("open");this._editingWindow&&this._editingWindow.addClass("hidden");e&&this._editingWindowTabs&&this._editingWindowTabs.switchTabs("external")},context:this}).run();this.get("data.url")&&this._clearButton.removeClass("hidden")},context:this}).run()},_clear:function(){this.set("data",null);this._clearButton.addClass("hidden");if(this._placeholder.hasClass("open"))this._closeEditingWindow(true);else{this._setPlaceholderText();this._editingWindowTabs.switchTabs("external")}d.Object.each(this._editingWindowTabs.getChildWidgets(),function(e){e.reset()},this)},_setPlaceholderText:function(){var e=this.get("data.url");if(e&&"http://"===e.substring(0,7)){var t=e.substring(7);var a="http://";var i="https://";(t.length>0&&t.length<7||"https:/"===t)&&(t!==a.substring(0,t.length)&&t!==i.substring(0,t.length)||(e=t))}var n=e||this.get("strings.placeholderText");this._placeholder.one(".inner").setHTML(d.Escape.html(n))},_getLinkType:function(e){if(e&&"/"===e.charAt(0)){if("/s/"===e.substring(0,3))return"files";return"content"}return"external"},_getSelectedFile:function(){var e=this.get("data.url").split("/");return e[e.length-1]},_getSelectedContent:function(){var e=this.get("data.url").split("?");var t;var a={urlId:e[0].substring(1)};var i=e[1];if(i){t=d.QueryString.parse(i);t.category?a.filter={type:"category",name:t.category}:t.tag&&(a.filter={type:"tag",name:t.tag})}return a},_getOpenWindowHeight:function(e){var t=e||this._editingWindowTabs.getActiveChildId();var a=this.get("disableNewWindow");var i=this.get("condensed");var n;var s;switch(t){case"external":n=s=a?92:116;break;case"files":n=a?318:342;s=a?252:276;break;case"content":n=a?318:342;s=a?232:256;break}return i?s:n}},{CSS_PREFIX:"sqs-create-link",ATTRS:{data:{setter:function(e){if(d.Lang.isObject(e)){var t=this._getLinkType(e.url);var a=this.get("renderTabs");a[t]||(e.url="")}return e}},condensed:{value:false,validator:d.Squarespace.AttrValidators.isBoolean},disableNewWindow:{value:false,validator:d.Squarespace.AttrValidators.isBoolean},renderTabs:{value:{external:true,files:true,content:true}},showPlaceholder:{value:true,validator:d.Squarespace.AttrValidators.isBoolean},withLinkText:{value:false,validator:d.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-text","squarespace-existing-content-link-tab","squarespace-external-link-tab","squarespace-file-manager-tab","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-tab-view"]})},7639:function(e,t,a){var i=a(24).t;YUI.add("squarespace-existing-content-link-tab",function(n){n.namespace("Squarespace.Views");var t=n.Squarespace.Views.ExistingContentLinkTab=n.Base.create("ExistingContentLinkTab",n.Squarespace.View,[],{template:"existing-content-link-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._contentOptions=new n.Squarespace.DialogFields.ContentSelector({data:this.get("selectedContent")});this.get("disableNewWindow")||(this._newWindowField=new n.Squarespace.DialogFields.Check({name:"newWindow","strings.title":i("Open in New Window"),data:this.get("newWindow")}))},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._contentOptions.render(e.one(".content-options"));this.get("disableNewWindow")||this._newWindowField.render(e.one(".existing-content-link-tab"));this.bindUI()},bindUI:function(){this._contentOptions.on("dataChange",function(e){this.set("selectedContent",e.newVal);this._dataChanged()},this);this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged(true)},this)},reset:function(){this.set("selectedContent",null);this._contentOptions.clearSelected()},_dataChanged:function(e){var t=this.get("onDataChange");if(n.Lang.isFunction(t)){var a=this.get("selectedContent");var i=this.get("newWindow");t(a,i,e)}}},{ATTRS:{onDataChange:{value:null},selectedContent:{value:null},disableNewWindow:{value:false},newWindow:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-html","squarespace-dialog-text","squarespace-existing-content-link-tab-template","squarespace-models-template-navigation-list","squarespace-ss-widget","squarespace-ui-base","squarespace-util-authenticated","squarespace-view"]})},7640:function(e,t){YUI.add("squarespace-existing-content-link-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["existing-content-link-tab.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<div class="existing-content-link-tab">\n  <div class="content-options"></div>\n</div>\n'})})();var t="existing-content-link-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7641:function(e,t,a){var i=a(24).t;YUI.add("squarespace-external-link-tab",function(a){var t=a.namespace("Squarespace.Views").ExternalLinkTab=a.Base.create("ExternalLinkTab",a.Squarespace.View,[],{template:"external-link-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._protocolRegex=/(?:^#)|(?:^\.{0,2}\/)|(?:^mailto:)|^[a-z]+:\/\//;this._defaultProtocol="http://";this._initialLinkUrl=this.get("linkUrl");this._input=new a.Squarespace.DialogFields.Text({data:"#"==this.get("linkUrl")?null:this.get("linkUrl"),"strings.placeholder":i("http://…")});this.get("disableNewWindow")||(this._newWindowField=new a.Squarespace.DialogFields.Check({name:"newWindow","strings.title":i("Open in New Window"),data:this.get("newWindow"),className:this.get("className")}))},destructor:function(){this._newWindowField&&this._newWindowField.destroy()},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._input.render(e.one(".link"));this.get("disableNewWindow")||this._newWindowField.render(e.one(".external-link-tab"));this.bindUI()},bindUI:function(){var e=this._input.get("contentBox").one("input");e.on("valuechange",this._inputChange,this);e.on("key",function(e){this._dataChanged(true);e.halt()},"down:13",this);this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged()},this);this.get("container").one(".visit").on("click",this._visit,this)},reset:function(){this.set("linkUrl","");this.set("newWindow",false);this.get("container").one('input[type="text"]').set("value","")},_inputChange:function(){var e=this._linkTrim(this._input.get("contentBox").one("input").get("value"));e&&!this._protocolRegex.test(e)&&-1===e.indexOf(":")&&(e=this._defaultProtocol+e);this.set("linkUrl",e);this._dataChanged()},_visit:function(){var e=this._input.get("contentBox").one("input").get("value");if(e){this._protocolRegex.test(e)||(e=this._defaultProtocol+e);window.open(e,"visitLink")}},_dataChanged:function(e){var t=this.get("onDataChange");a.Lang.isFunction(t)&&t(this.get("linkUrl"),this.get("newWindow"),e)},_linkTrim:function(e){var t=/(?:^[^!-~]+)|(?:\s+$)/g;return(e||"").replace(t,"")}},{ATTRS:{disableNewWindow:{value:false},linkUrl:{value:null},newWindow:{value:false},externalServiceProviderType:{value:null},onDataChange:{value:null}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-text","squarespace-external-link-tab-template","squarespace-view"]})},7642:function(e,t){YUI.add("squarespace-external-link-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["external-link-tab.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<div class="external-link-tab">\n  <div class="link">\n    <button class="visit" title="Visit URL"></button>\n  </div>\n</div>\n'})})();var t="external-link-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7643:function(e,t,a){var r=a(24).t;YUI.add("squarespace-file-manager-tab",function(i){var n=r("Add a file");var a=r("Uploading file…");var s=r("Uploaded ");var t=i.namespace("Squarespace.Views").FileManagerTab=i.Base.create("FileManagerTab",i.Squarespace.View,[],{template:"file-manager-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._options=new i.Squarespace.DialogFields.MultiOption({data:this.get("selectedFile")?"existing":"new",options:[{value:"new",title:r("New File"),icon:"new"},{value:"existing",title:r("Existing File"),icon:"existing"}]});this._frames=new i.Squarespace.DialogFields.MultiFrame({data:this.get("selectedFile")?"existing":"new",frames:[{name:"new",fields:[]},{name:"existing",fields:[{ctor:i.Squarespace.DialogFields.FileManager,config:{name:"selectFile",data:this.get("selectedFile")}}]}]});this._uploader=new i.Squarespace.Uploader({process:false,autoUpload:true,uploadURL:"/api/uploads/files"});this._spinnerEl=i.Node.create('<div class="spinner"></div>');this.get("disableNewWindow")||(this._newWindowField=new i.Squarespace.DialogFields.Check({name:"newWindow","strings.title":r("Open in New Window"),data:this.get("newWindow")}))},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._options.render(e.one(".options"));this._frames.render(e.one(".frames"));this._frames.get("contentBox").all(".frame").each(function(e){if("new"===e.getAttribute("data-name")){this._uploader.set("dragAndDropArea",e);this._uploader.render(e);var t=this._uploader.get("contentBox");this._uploaderIcon=t.one(".icon");this._uploaderText=t.one(".text");this._spinnerEl.hide();this._uploaderIcon.append(this._spinnerEl)}},this);this.get("disableNewWindow")||this._newWindowField.render(e.one(".file-manager-tab"));this.bindUI()},bindUI:function(){this._options.on("dataChange",function(e){this._frames.switchFrames(e.newVal);if("existing"===e.newVal){var t=this._frames.get("contentBox");t.one(".search input").focus();t.set("scrollLeft",0)}},this);this._frames.getField("selectFile").on("dataChange",function(e){this.set("selectedFile",e.newVal);this._dataChanged()},this);this._uploader.set("processFile",i.bind(function(e){if(e.invalid){var t=e.invalid[0];new i.Squarespace.Widgets.Alert({"strings.title":t.title,"strings.message":t.message})}else{this._uploaderIcon.addClass("loading");this._uploaderText.setContent(a);this._spinner=new i.Squarespace.Spinner({color:"dark",size:"large",render:this._spinnerEl});this._spinnerEl.show();e.postData={contentType:"binary",recordType:i.Squarespace.RecordType.ATTACHMENT,useFilenameAsUrlId:"true"}}},this));this._uploader.set("fileComplete",i.bind(function(e,t){var a=t.media[0];this.set("selectedFile",a.urlId);this._spinnerEl.anim({opacity:0},{duration:1.25,start:function(){this._uploaderText.setContent(s+i.Escape.html(t.media[0].filename))},end:function(){this._spinnerEl.hide();this._dataChanged();new i.Squarespace.Widgets.Information({"strings.title":r("File Uploaded"),"strings.message":r("Your file has been successfully uploaded.")});i.later(1e3,this,function(){this._uploaderIcon.removeClass("loading");this._uploaderText.setContent(n);var e=this._frames.getField("selectFile");e.set("data",a.urlId,{silent:true});e.updateFullList();this._options.selectOption("existing")})},context:this}).run()},this));this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged()},this)},reset:function(){this.set("selectedFile",null);this._options.selectOption("new");this._frames.set("data",null);this.set("newWindow",false);this._frames.get("contentBox").all(".attachment").removeClass("selected")},_dataChanged:function(){var e=this.get("onDataChange");if(i.Lang.isFunction(e)){var t=this.get("selectedFile");var a=this.get("newWindow");e(t,a)}}},{ATTRS:{selectedFile:{value:null},onDataChange:{value:null},disableNewWindow:{value:false},newWindow:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-file-manager","squarespace-dialog-html","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-file-manager-tab-template","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-view","squarespace-widgets-alert","squarespace-widgets-information"]})},7644:function(e,t,a){var l=a(24).t;YUI.add("squarespace-dialog-file-manager",function(o){o.namespace("Squarespace.DialogFields").FileManager=o.Base.create("fileManager",o.Squarespace.DialogField2,[],{initializer:function(){this._activeEditingEl=false;this._committing=false;this._deletePrompt=false;this._selectedLoaded=false;this._reloadFromFirstPage()},renderUI:function(){var e=this.get("contentBox");e.prepend('<div class="search"></div><div class="attachments"></div>');e.one(".attachments").plug(o.Squarespace.Plugin.ScrollLock);var t=new o.Squarespace.DialogFields.Text({"strings.placeholder":l("search")});t.render(e.one(".search"));this._searchInput=t.get("contentBox").one("input");this.renderAttachments()},renderAttachments:function(){var e=this.get("contentBox");e.one(".attachments").empty().append(this.renderTemplate())},bindUI:function(){var t=this.get("contentBox");t.delegate("valuechange",function(e){this.set("searchQuery",e.newVal)},".search input",this);this.after("searchQueryChange",this._reloadFromFirstPage,this);this._searchInput.on("click",this._cancelAttachmentEdit,this);var e=t.one(".attachments");e.plug(o.Plugin.ScrollInfo);e.scrollInfo.on("scroll",this._onScroll,this);t.delegate("mouseenter",function(e){if(!this._activeEditingEl&&!this._deletePrompt){t.all(".attachments .attachment").removeClass("active");e.currentTarget.addClass("active")}},".attachments .attachment",this);t.delegate("mouseleave",function(e){this._activeEditingEl||this._deletePrompt||e.currentTarget.removeClass("active")},".attachments .attachment",this);t.delegate("click",this._onAttachmentListClick,".attachments",this);t.delegate("click",this._enterAttachmentEditMode,".attachment .edit",this);t.delegate("key",this._commitAttachmentEdit,"press:13","input",this);t.delegate("click",this._onRemoveClick,".attachments .attachment .remove",this)},updateFullList:function(){this.set("searchQuery","");this._reloadFromFirstPage()},_reloadFromFirstPage:function(){var a=this.get("loadedItemsModel");a.reset();var e=this.get("searchQuery");var i=e.length>0;var n;if(i){n=this.get("searchResultsCurrentPageModel");n.set("searchQuery",e)}else n=this.get("allItemsCurrentPageModel");n.firstPage();n.load({},o.bind(function(){a.add(n);var t=this.get("data");if(o.Lang.isString(t)){this._selectedLoaded=false;a.some(function(e){if(e.get("urlId")===t){a.add(a.remove(e),{index:0});this._selectedLoaded=true;return true}},this);this._selectedLoaded||i||this._loadSelected()}this.renderAttachments()},this))},_loadNextPage:function(){var a;a=this.get("searchQuery").length>0?this.get("searchResultsCurrentPageModel"):this.get("allItemsCurrentPageModel");if(!a.get("hasNextPage"))return;a.nextPage();a.load({},o.bind(function(){var t=this.get("data");o.Lang.isString(t)&&a.some(function(e){if(e.get("urlId")===t){this._selectedLoaded?a.remove(e):this._selectedLoaded=true;return true}},this);this.get("loadedItemsModel").add(a);this.renderAttachments()},this))},_loadSelected:function(){o.Data.get({url:o.Squarespace.API_ROOT+"content-items",data:{recordType:o.Squarespace.RecordType.ATTACHMENT,urlId:this.get("data")},success:function(e){var t=o.Object.getValue(e,["results"]);if(this._selectedLoaded||!o.Lang.isArray(t)||0===t.length)return;this._selectedLoaded=true;var a=new o.Squarespace.Models.ContentItem;a.setAttrs(t[0]);this.get("loadedItemsModel").add(a,{index:0});this.renderAttachments()}},this)},_selectAttachment:function(e,t){if(this._activeEditingEl)return;e=e.ancestor(".attachment",true);var a=e.getAttribute("data-urlId");e.addClass("selected");this.set("data",a,{silent:t})},_onScroll:function(e){var t=e.currentTarget.get("host");var a=t.get("scrollHeight")-t.get("scrollTop")-t.height();0===a&&this._loadNextPage()},_onAttachmentListClick:function(e){if(e.target.ancestor(".edit, .remove, .filename input",true))return;this._activeEditingEl?this._commitAttachmentEdit():e.target.ancestor(".attachment",true)&&this._selectAttachment(e.target.ancestor(".attachment",true))},_onRemoveClick:function(e){this._activeEditingEl&&this._cancelAttachmentEdit();this._promptDeleteAttachment(e)},_enterAttachmentEditMode:function(e){this._activeEditingEl&&this._cancelAttachmentEdit(e);this._activeEditingEl=e.currentTarget.ancestor(".attachment");this._activeEditingEl.addClass("editing");this._activeEditingEl.one(".filename input").select();e.halt(true)},_cancelAttachmentEdit:function(e){if(e&&e.target.ancestor(".edit, .remove, .filename-editable",true))return;if(this._committing||!this._activeEditingEl)return;this._activeEditingEl.removeClass("editing");var t=this._activeEditingEl.one(".filename");t.one("input.filename-editable").set("value",t.one(".filename-text").get("text"));this._activeEditingEl=false;e&&e.halt(true)},_commitAttachmentEdit:function(e){this._committing=true;if(!this._activeEditingEl)return;var t=this._activeEditingEl.getAttribute("data-id");var a=this._activeEditingEl.getAttribute("data-urlId");var i=this._activeEditingEl.one(".filename input.filename-editable");var n=i.get("value");var s=a===this.get("data");if(a===n)return;var r=this.get("loadedItemsModel").getById(t);r.set("filename",n).save(function(e,t){if(o.Lang.isNull(e)){s&&this.set("data",t.urlId,{silent:true});this._activeEditingEl.setAttribute("data-urlId",t.urlId);this._activeEditingEl.one(".filename-text").set("text",n);this._activeEditingEl.removeClass("editing");this._activeEditingEl=false}else{var a=o.Object.getValue(e,["errors","name"]);o.Lang.isString(a)&&new o.Squarespace.Widgets.Alert({"strings.title":l("File Name Error"),"strings.message":a})}this._committing=false}.bind(this))},_promptDeleteAttachment:function(e){e.halt(true);this._deletePrompt=true;var t=e.currentTarget.ancestor(".attachment",true);var a=t.getAttribute("data-id");var i=t.getAttribute("data-urlId");o.Squarespace.Fluent.Confirm({"strings.confirm":l("Delete"),"strings.title":l("Delete File"),"strings.message":l("Are you sure you want to delete this file?")}).then(o.bind(function(){this._deletePrompt=false;this._deleteAttachment(a,i)},this),o.bind(function(){this._deletePrompt=false},this))},_deleteAttachment:function(e,t){var a=this.get("loadedItemsModel").getById(e);a.destroy({remove:true},o.bind(function(e){if(o.Lang.isNull(e)){t===this.get("data")&&this.set("data",null,{silent:true});this._reloadFromFirstPage()}else console.error(e)},this))},_getHBTemplateContext:function(){return{attachments:this.get("loadedItemsModel").toJSON(),searchQuery:this.get("searchQuery"),selectedUrlId:this.get("data"),strings:this.get("strings")}}},{CSS_PREFIX:"sqs-file-manager",ASYNC_DATA:true,HANDLEBARS_TEMPLATE:"dialog-file-manager.html",ATTRS:{searchQuery:{value:"",validator:o.Lang.isString},loadedItemsModel:{value:new o.ModelList,validator:o.Squarespace.AttrValidators.isInstanceOf(o.ModelList)},allItemsCurrentPageModel:{value:new o.Squarespace.Models.AttachmentsList({pageSize:6}),validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.AttachmentsList)},searchResultsCurrentPageModel:{value:new o.Squarespace.Models.SearchedAttachmentsList({pageSize:6}),validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.SearchedAttachmentsList)},strings:{value:{noResultsFound:l("No results found…"),noFiles:l("You have not uploaded any files yet")}}}})},"1.0",{requires:["base","node-scroll-info","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-file-manager-template","squarespace-dialog-text","squarespace-fluent-confirmation","squarespace-hb-compare","squarespace-models-attachments-list","squarespace-models-content-item","squarespace-plugin-scroll-lock","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},7645:function(e,t){YUI.add("squarespace-dialog-file-manager-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-file-manager.html"]=e(function(e,t,o,a,i){this.compilerInfo=[4,">= 1.0.0"];o=this.merge(o,e.helpers);i=i||{};var n="",s,l=this,c=o.helperMissing,d="function",u=this.escapeExpression;function r(e,t,a){var i="",n,s,r;i+='\n<div class="attachment ';r={hash:{compare:e.urlId},inverse:l.noop,fn:l.program(2,g,t),data:t};s=(n=o.if_eq||e.if_eq,n?n.call(e,a.selectedUrlId,r):c.call(e,"if_eq",a.selectedUrlId,r));(s||0===s)&&(i+=s);i+='" data-urlId="';if(s=o.urlId)s=s.call(e,{hash:{},data:t});else{s=e.urlId;s=typeof s===d?s.apply(e):s}i+=u(s)+'" data-id="';if(s=o.id)s=s.call(e,{hash:{},data:t});else{s=e.id;s=typeof s===d?s.apply(e):s}i+=u(s)+'">\n  <div class="filename">\n    <span class="filename-text">';if(s=o.filename)s=s.call(e,{hash:{},data:t});else{s=e.filename;s=typeof s===d?s.apply(e):s}i+=u(s)+'</span>\n    <input class="filename-editable" type="text" value="';if(s=o.filename)s=s.call(e,{hash:{},data:t});else{s=e.filename;s=typeof s===d?s.apply(e):s}i+=u(s)+'" />\n  </div>\n  <div class="buttons">\n    <div class="edit"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-edit-12-dark.png" /></div>\n    <div class="remove"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-close-9-dark.png" /></div>\n  </div>\n</div>\n';return i}function g(e,t){return"selected"}function p(e,t){var a="",i;a+="\n  ";i=o["if"].call(e,e.searchQuery,{hash:{},inverse:l.program(7,f,t),fn:l.program(5,h,t),data:t});(i||0===i)&&(a+=i);a+="\n";return a}function h(e,t){var a="",i;a+='\n  <div class="empty empty-search">\n    <div class="text">'+u((i=(i=e.strings,null==i||false===i?i:i.noResultsFound),typeof i===d?i.apply(e):i))+"</div>\n  </div>\n  ";return a}function f(e,t){var a="",i;a+='\n  <div class="empty empty-files">\n    <div class="icon"></div>\n    <div class="text">'+u((i=(i=e.strings,null==i||false===i?i:i.noFiles),typeof i===d?i.apply(e):i))+"</div>\n  </div>\n  ";return a}s=o.each.call(t,t.attachments,{hash:{},inverse:l.program(4,p,i),fn:l.programWithDepth(1,r,i,t),data:i});(s||0===s)&&(n+=s);n+="\n";return n})})();var t="dialog-file-manager.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7646:function(e,t){YUI.add("squarespace-models-attachments-list",function(e){var t=e.namespace("Squarespace.Models").AttachmentsList=e.Base.create("AttachmentsList",e.Squarespace.Models.ModelList,[e.Squarespace.Mixins.PaginatedModelList],{model:e.Squarespace.Models.ContentItem,url:e.Squarespace.API_ROOT+"content-items?recordType={recordType}"},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.RangePaginator({models:this,orderBy:"addedOn",orderDirection:e.Squarespace.OrderDirection.DESCENDING})}},recordType:{value:e.Squarespace.RecordType.ATTACHMENT,readOnly:true},pageSize:{validator:e.Lang.isNumber,value:20,setter:function(e){this.get("paginator").set("limit",e)}}}});e.namespace("Squarespace.Models").SearchedAttachmentsList=e.Base.create("SearchedAttachmentsList",t,[],{url:e.Squarespace.API_ROOT+"content-items/search?transient=true&recordType={recordType}&q={searchQuery}"},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.OffsetPaginator({models:this,orderBy:"addedOn",orderDirection:e.Squarespace.OrderDirection.DESCENDING})}},searchQuery:{validator:e.Lang.isString,value:""}}})},"1.0",{requires:["squarespace-models-model-list","squarespace-models-range-paginator","squarespace-models-offset-paginator","squarespace-models-content-item","squarespace-model-sync-rest","squarespace-mixins-paginated-model-list","base"]})},7647:function(e,t,a){YUI.add("squarespace-models-range-paginator",function(n){n.namespace("Squarespace.Models");var a=n.Squarespace.Models.RangePaginator=n.Base.create("RangePaginator",n.Squarespace.Models.Paginator,[],{initializer:function(){n.Do.before(function(e){var t=n.JSON.parse(e);var a=t.previousPageStart;var i=t.nextPageStart;this._set("previousPageStart",a||null);this._set("nextPageStart",i||null)},this.get("models"),"parse",this)},firstPage:function(){a.superclass.firstPage.call(this);this._set("previousPageStart",null);this._set("nextPageStart",null);this._set("start",null);this.set("pageAction",n.Squarespace.PageAction.NEXT)},previousPage:function(){a.superclass.previousPage.call(this);this._set("start",this.get("previousPageStart"));this.set("pageAction",n.Squarespace.PageAction.PREVIOUS)},nextPage:function(){a.superclass.nextPage.call(this);this._set("start",this.get("nextPageStart"));this.set("pageAction",n.Squarespace.PageAction.NEXT)},currentPage:function(){a.superclass.currentPage.call(this);this._set("pageAction",n.Squarespace.PageAction.NEXT)},_getPaginationParams:function(){var e=a.superclass._getPaginationParams.call(this);e.pageAction=this.get("pageAction");var t=this.get("start");n.Lang.isValue(t)&&(e.start=t);return e}},{ATTRS:{pageAction:{value:n.Squarespace.PageAction.NEXT,validator:function(e){if(n.Object.hasValue(n.Squarespace.PageAction,e))return true;false;return false}},start:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString,readOnly:true},previousPageStart:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString,setter:function(e){return e},readOnly:true},nextPageStart:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString,setter:function(e){return e},readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-paginator"]})},7648:function(e,t){YUI.add("squarespace-dialog-multi-frame",function(n){var a=n.namespace("Squarespace.DialogFields").MultiFrame=n.Base.create("multiFrame",n.Squarespace.DialogField2,[],{initializer:function(){this.get("data")||this.set("data",this.get("frames")[0])},destructor:function(){this._frameWrapper=null},renderUI:function(){a.superclass.renderUI.call(this);this._frameWrapper=n.Node.create('<div class="multi-frame-wrapper"></div>');this.get("contentBox").append(this._frameWrapper);this.get("frames").forEach(this._renderFrameAndChildFields,this);this.get("variableHeight")&&this.get("boundingBox").addClass("variable-height")},syncUI:function(){a.superclass.syncUI.call(this);this._syncFrameSize();this._syncVisibleFrame();this.get("rendered")?this._syncAnimateClass():n.soon(this._syncAnimateClass.bind(this));if(this.get("variableHeight")){var e=this.get("contentBox").one('[data-name="'+this.get("data")+'"]');var t=e.get("offsetHeight");this.set("height",t)}},_renderFrameAndChildFields:function(e){var t=n.Node.create('<div class="frame" data-name="'+e.name+'"></div>');t.appendTo(this._frameWrapper);e.fields.forEach(this._renderField.bind(this,t))},_renderField:function(e,t){var a=n.merge(t.config,{render:e,childType:t.ctor});var i=this.get("dialog");if(i){a.dialog=i;a.data=i.params.initialData[a.name]}this.add(a)},_syncAnimateClass:function(){this._frameWrapper.toggleClass("animate-switch",this.get("animate"))},_syncFrameSize:function(){this._frameWrapper.setAttribute("data-frame-size",this.get("frames").length)},_syncVisibleFrame:function(){this._frameWrapper.setAttribute("data-frame-visible-index",this._getFrameIndex(this.get("data")))},switchFrames:function(e){this.set("data",e);this._syncVisibleFrame()},getField:function(t){var a;this.each(function(e){e.get("name")===t&&(a=e)},this);return a},_getFrameIndex:function(e){var t=this.get("frames");for(var a=0;a<t.length;a++)if(t[a].name===e)return a}},{CSS_PREFIX:"sqs-multi-frame",ATTRS:{variableHeight:{value:false},animate:{value:true},frames:{value:null},readOnly:{value:true}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7649:function(e,t){YUI.add("squarespace-file-manager-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["file-manager-tab.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};return'<div class="file-manager-tab">\n  <div class="options"></div>\n  <div class="frames"></div>\n</div>\n'})})();var t="file-manager-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7650:function(e,t){YUI.add("squarespace-dialog-digital-pricing-placeholder",function(e){e.namespace("Squarespace");e.Squarespace.DialogFields.DigitalPricingPlaceholder=e.Base.create("digitalPricingPlaceholder",e.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){}},{CSS_PREFIX:"sqs-digital-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},7651:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-pricing-placeholder",function(t){t.namespace("Squarespace");var a=t.namespace("Squarespace.DialogFields").PricingPlaceholder=t.Base.create("pricingPlaceholder",t.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){a.superclass.renderUI.call(this);this.get("boundingBox").addClass("field-wrapper").addClass("major");this.get("contentBox").one(".placeholder").plug(t.Squarespace.Plugin.PulseWarn,{iterations:1,color:"#C1B12E"});if(this.get("data.variants")&&0===this.get("data.variants").length){var e={sku:t.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:false,qtyInStock:1,len:0,width:0,height:0,attributes:{}};this.get("data").variants.push(e)}this._edited=false},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this);this.after("dataChange",function(){this._edited=true;this.syncUI()},this)},syncUI:function(){var e={structuredContent:this.get("data")};this.get("contentBox").one(".pricing").empty().setHTML(t.Squarespace.Commerce.priceString(e))},didDataChange:function(){return this._edited},pulseWarn:function(){this.get("contentBox").one(".placeholder").pulseWarn.warn()}},{CSS_PREFIX:"sqs-pricing-placeholder",HANDLEBARS_TEMPLATE:"dialog-pricing-placeholder.html",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-pricing-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-plugin-pulsewarn","squarespace-util-authenticated"]})},7652:function(e,t,a){var i=a(21);YUI.add("squarespace-damask-panel-mixin-pusher",function(n){n.namespace("Squarespace.Damask.Panel");n.Squarespace.Damask.Panel.MixinPusher=n.Base.create("MixinPusher",n.Base,[],{initializer:function(){this._afterPusherBindUIEvent=n.Do.after(this._bindActiveChanges,this,"bindUI",this);this._afterPusherSyncUIEvent=n.Do.after(this._syncActiveState,this,"syncUI",this)},destructor:function(){this._afterPusherBindUIEvent.detach();this._afterPusherSyncUIEvent.detach()},push:function(e){this.get("activationPromise")().then(n.bind(this._activate,this,e),n.bind(this._dontActivate,this,e))},_bindActiveChanges:function(){this._registerPushEvent();this.after("activeChange",function(e){this._syncActiveState(e.newVal)})},_registerPushEvent:function(){this._registerEvent(this.get("contentBox").on("click",this.push,this))},_activate:function(e){var t=this.get("pathname");var a=this.get("router");a.cacheAttrs(t,this.get("childPanelConfig"));a.push(t)},_dontActivate:i,_syncActiveState:function(e){var t=this.get("boundingBox");var a=this.getClassName("selected");var i=n.Lang.isBoolean(e)&&e||this.get("active");t.toggleClass(a,i)}},{ATTRS:{active:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},childPanelConfig:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},isPusher:{value:true,readOnly:true,validator:n.Squarespace.AttrValidators.isBoolean},name:{validator:n.Squarespace.AttrValidators.isString},pathParams:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},href:{validator:n.Squarespace.AttrValidators.isNullOrString},newWindow:{value:false,validator:function(e){return n.Squarespace.AttrValidators.isBoolean(e)&&n.Lang.isValue(this.get("href"))}},path:{validator:n.Squarespace.AttrValidators.isNullOrString},pathname:{},router:{},activationPromise:{validator:n.Squarespace.AttrValidators.isFunction,value:function(){return n.when(null)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-singletons-location","squarespace-util"]})},7653:function(e,t){YUI.add("squarespace-dialog-pricing-placeholder-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-pricing-placeholder.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){return'\n      <div class="variant-count"></div>\n    '}s+='<div class="field-lhs">\n  '+c((r=(r=t.strings,null==r||false===r?r:r.title),typeof r===l?r.apply(t):r))+'\n</div>\n\n  <div class="placeholder">\n\n    <div class="pricing"></div>\n\n    ';o=a["if"].call(t,t.hasVariants,{hash:{},inverse:d.noop,fn:d.program(1,u,n),data:n});(o||0===o)&&(s+=o);s+='\n\n    <div class="prompt">\n      '+c((r=(r=t.strings,null==r||false===r?r:r.prompt),typeof r===l?r.apply(t):r))+"&nbsp;&rarr;\n    </div>\n  </div>\n";return s})})();var t="dialog-pricing-placeholder.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7654:function(e,t){YUI.add("squarespace-hb-product-price-string",function(t){t.Handlebars.registerHelper("price-string",function(e){return new t.Handlebars.SafeString(t.Squarespace.Commerce.priceString(e))})},"1.0",{requires:["handlebars-base","squarespace-commerce-utils"]})},7655:function(e,t,a){var i=a(309);YUI.add("squarespace-hb-product-types",function(e){e.Handlebars.registerHelper("product-physical",function(e){var t=this.structuredContent;return t.productType===i.PHYSICAL?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-digital",function(e){var t=this.structuredContent;return t.productType===i.DIGITAL?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-service",function(e){var t=this.structuredContent;return t.productType===i.SERVICE?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-variants",function(e){var t=this.structuredContent;var a=t.productType;return a===i.PHYSICAL||a===i.SERVICE?e.fn(this):e.inverse(this)})},"1.0",{requires:["handlebars-base","squarespace-util"]})},7656:function(e,t){YUI.add("squarespace-plugin-pulsewarn",function(l){l.namespace("Squarespace.Plugin");l.Squarespace.Plugin.PulseWarn=l.Base.create("pulseWarn",l.Plugin.Base,[],{initializer:function(e){this.config=e;this.set("color",e.color);this.set("useClass",e.useClass);this.set("targetClass",e.targetClass);this.set("iterations",e.iterations);this.get("host").addClass("pulse-warnable");l.Lang.isUndefined(e.interval)||this.set("interval",e.interval);this._timer=null},destructor:function(){if(this._timer){this._timer.cancel();this._timer=null}},warn:function(){var e=this.get("host");var t=this.get("iterations");var a=e.getStyle("backgroundColor");var i=this.get("color");if(!l.Lang.isNull(this._timer)){this._timer.cancel();this._timer=null}if(this.get("useClass")){var n=this.get("targetClass");var s=this.get("interval");this.fire("start");e.addClass(n);this._timer=l.later(s,this,function(){if(0===t){e.removeClass(n);this.fire("stop");this._timer.cancel();this._timer=null;return}e.hasClass(n)?e.removeClass(n):e.addClass(n);t--},{},true)}else{var r=new l.Anim({node:e,to:{backgroundColor:i,opacity:.8},easing:this.get("easingUp"),duration:this.get("duration")});var o=new l.Anim({node:e,to:{backgroundColor:a,opacity:1},easing:this.get("easingDown"),duration:this.get("duration")});r.on("end",function(){t>0&&o.run();t--});o.on("end",function(){t>0?r.run():this.fire("stop")},this);this.fire("start");r.run()}}},{NS:"pulseWarn",ATTRS:{useClass:{value:false},iterations:{value:3},color:{value:"#c1b12e"},interval:{value:2e3},duration:{value:.7},easingUp:{value:l.Easing.easeInSine},easingDown:{value:l.Easing.easeOutSine}}})},"1.0",{requires:["anim","base","plugin"]})},7657:function(e,t,a){var i=a(24).t;var n=a(802);YUI.add("squarespace-dialog-giftcard-pricing-placeholder",function(a){a.namespace("Squarespace");var t=a.Squarespace.DialogFields.GiftCardPricingPlaceholder=a.Base.create("giftCardPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},renderUI:function(){t.superclass.renderUI.call(this);this._setAmountCount()},syncUI:function(){t.superclass.syncUI.call(this);this._setAmountCount()},_setAmountCount:function(){var e=this.get("data.variants").length;0===e&&(e=1);var t=e<=1?"":a.Node.create(n('<span class="separator">—</span>'+i("{numVariants} values"),{numVariants:e}));this.get("contentBox").one(".variant-count").setHTML(t)},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.hasVariants=true;return e}},{CSS_PREFIX:"sqs-giftcard-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},7658:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-subscription-details-placeholder",function(t){t.namespace("Squarespace");var e=t.namespace("Squarespace.DialogFields").SubscriptionDetailsPlaceholder=t.Base.create("SubscriptionDetailsPlaceholder",t.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("field-wrapper").addClass("major");this._edited=false},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this);this.after("dataChange",function(){this._edited=true;this.syncUI()},this)},syncUI:function(){var e=this.get("data");this.get("contentBox").one(".details-text").empty().setHTML(t.Squarespace.Commerce.merchantSubscriptionDetailsString(e))},didDataChange:function(){return this._edited}},{CSS_PREFIX:"sqs-subscription-details-placeholder",HANDLEBARS_TEMPLATE:"dialog-subscription-details-placeholder.html",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-subscription-details-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-util-authenticated"]})},7659:function(e,t){YUI.add("squarespace-dialog-subscription-details-placeholder-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-subscription-details-placeholder.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression;s+='<div class="placeholder">\n\n  <div class="details-text">'+l((r=(r=t.strings,null==r||false===r?r:r.details),typeof r===o?r.apply(t):r))+'</div>\n\n  <div class="prompt">\n    '+l((r=(r=t.strings,null==r||false===r?r:r.prompt),typeof r===o?r.apply(t):r))+"&nbsp;&rarr;\n  </div>\n</div>\n";return s})})();var t="dialog-subscription-details-placeholder.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7660:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-file-audio",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.FileAudio=e.Base.create("fileAudio",e.Squarespace.DialogFields.FileRequiresProcessing,[],{},{CSS_PREFIX:"sqs-file-audio-processing",FILE_FILTER:{description:i("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"},PROCESSING_JOB:e.Squarespace.AudioProcessingJob,PROCESSING_COPY:i("Processing and identifying"),ATTRS:{contentType:{value:"audio"},contentLabel:{value:i("an audio file")}}})},"1.0",{requires:["base","squarespace-dialog-file-requires-processing","squarespace-job-manager"]})},7661:function(e,t,a){var i=a(8987);var n=a(24).t;var r=a(24).pluralize;YUI.add("squarespace-dialog-form-builder",function(s){s.namespace("Squarespace.DialogFields");var a=s.Squarespace.DialogFields.FormBuilder=s.Base.create("formBuilder",s.Squarespace.DialogField2,[s.WidgetParent],{initializer:function(){this._fieldSelector=this._createFieldSelector();this._edited=false},destructor:function(){this._fieldSelector.destroy();this._ddDelegate&&this._ddDelegate.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._childrenContainer=this._fieldContainer=e.appendChild('<div class="field-container"></div>');this._addFieldButton=e.appendChild('<div class="add-field-button"><div class="title"><span class="title-text">'+n("Add Form Field")+"</span></div></div>");this._setupDragAndDrop()},bindUI:function(){a.superclass.bindUI.call(this);this._fieldSelector.on("datachange",function(e){var t=e.getValue();var a=this._validateFieldSelection(t);if(a){var i=a.title;var n=a.description;new s.Squarespace.Widgets.Alert({"strings.title":i,"strings.message":n});return}this._fieldSelector.close();this.addField(s.clone(t),true)},this);this.on("change",function(){this.fire("dataChange",{noSyncUI:true});this._edited=true},this);this._addFieldButton.on("click",function(e){e.halt();this._openFieldSelector()},this);this.on("*:editingChange",function(e){e.newVal&&this.closeChildren(e.target)},this);this.on("*:removeClicked",function(e){this._confirmFieldRemoval(e.target)},this);this.on("*:fieldChange",function(e){this.fire("change")},this);this.on("*:destroy",function(){this._ddDelegate.syncTargets()},this);this._ddDelegate.on("reorder:reordered",function(e){var t=e.reordered;this._reorderField(t.oldIndex,t.newIndex)},this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.removeAll();e.each(function(e){e.destroy()});var t=this.get("data");s.Array.each(t,function(e){s.Squarespace.FormEditingUtils.resolveFieldId(e,t);this._renderFieldWidget(e)},this)},didDataChange:function(){return this._edited},closeChildren:function(t){var a=s.Lang.isValue(t);this.each(function(e){!e.get("editing")||a&&e===t||e.closeEdit()})},addField:function(e,t){var a=this.get("data");s.Squarespace.FormEditingUtils.resolveFieldTitle(e,a);s.Squarespace.FormEditingUtils.resolveFieldId(e,a);this._renderFieldWidget(e,t);a.push(e);this.fire("change")},removeField:function(e){var a=e.get("field").id;this._removeFieldWidget(e);var t=this.get("data");var i;s.Array.each(t,function(e,t){e.id===a&&(i=t)},this);t.splice(i,1);this.fire("change")},lockField:function(t){this.each(function(e){e.get("field").id===t.id&&e.lock()},this)},unlockField:function(t){this.each(function(e){e.get("field").id===t.id&&e.unlock()},this)},getFieldWidget:function(t){var a;this.each(function(e){e.get("field").id===t.id&&(a=e)},this);return a},_setupDragAndDrop:function(){var e=".sqs-form-builder-field";this._ddDelegate=new s.SQS.DDWrappers.DD.Delegate({container:this._fieldContainer,nodes:e,handles:[e+" .field-drag-handle-wrapper"],enableDragReorder:true,enableDragScroll:true,enableDragConstrained:true,dragConstrainedConfig:{stickY:true}})},_reorderField:function(e,t){var a=this.get("data");var i=a.splice(e,1)[0];a.splice(t,0,i);this.add(this.remove(e),t);this.fire("change")},_renderFieldWidget:function(e,t){var n=this.add(new s.Squarespace.Widgets.FormBuilderField({field:e})).item(0);if(t){n.once("editingChange",function(){var e=this.get("boundingBox");var t=e.get("scrollTop");var a=n.get("boundingBox").getY();var i=t+a-e.getY();e.set("scrollTop",i)},this);n.openEdit();n.focusAndSelect()}this._ddDelegate.syncTargets()},_removeFieldWidget:function(e){var a=e.get("boundingBox");var i=[];var t=this.get("contentBox");var n=t.all(".add-field-button, .sqs-form-builder-field");n.each(function(e){if(e===a)return;e.plug(s.Squarespace.PositionAnimator);var t=e.positionAnimator;t.hold();i.push(t)});e.blur();this.remove(e);e.destroy(true);s.Array.each(i,function(e){e.release()})},_openFieldSelector:function(){var e=this.get("dialog");s.Lang.isValue(e)&&e.addChildDialog(this._fieldSelector);this._fieldSelector.show({anchor:this._addFieldButton})},_confirmFieldRemoval:function(e){var t=this.get("minimumLength");var a=this.get("isMailChimpConnected");a&&"email"===e.get("field").type?new s.Squarespace.Widgets.Alert({"strings.title":n("Cannot Remove Field"),"strings.message":n("MailChimp requires an email field.")}):this.get("data").length-1<t?new s.Squarespace.Widgets.Alert({"strings.title":n("Cannot Remove Field"),"strings.message":r({one:"This form must have at least {%n} field",other:"This form must have at least {%n} fields"},t)}):new s.Squarespace.Widgets.Confirmation({"strings.title":n("Remove"),"strings.message":n("Are you sure you wish to remove this field?")}).on("confirm",function(){this.removeField(e)},this)},_validateFieldSelection:function(e){var t="email"===e.type;var a=this._hasEmailField();var i=this.get("isMailChimpConnected");if(t&&i&&a)return{title:n("Email Field Not Added"),description:n("Only one email field can be added to a MailChimp-connected form.")}},_hasEmailField:function(){var t=false;s.Array.each(this.get("data"),function(e){"email"===e.type&&(t=true)});return t},_createFieldSelector:function(){var e=this._getFieldOptions();var t=Math.min(e.length,5);return new s.Squarespace.EditingDialog({closeOthers:false,loadingText:n("Loading…"),closingText:n("Creating…"),style:"flyout",flyoutPointerDirection:"centered",width:100*t,overlay:.5,primaryTabs:[{title:n("Add Form Field"),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:s.Squarespace.DialogFields.MultiOption,config:{name:"fieldOptions",titleStyle:"top",className:"button round square",defaultValue:null,iconDropPx:20,buttonStyle:true,columns:t,alwaysShowTitles:true,options:e}}]}]})},_getFieldOptions:function(){var a=this.get("excludedFieldTypes");return s.Array.reject(i,function(t){var e=s.Array.find(a,function(e){return e.type===t.value.type});return null!==e})}},{CSS_PREFIX:"sqs-form-builder",ATTRS:{data:{value:[],validator:s.Squarespace.AttrValidators.isArray},isMailChimpConnected:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},minimumLength:{value:1,validator:s.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{value:[],validator:s.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","node","squarespace-attr-validators","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-form-builder-field","squarespace-form-editing-utils","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},7662:function(e,t,a){var i=a(24).t;YUI.add("squarespace-form-builder-field",function(t){t.namespace("Squarespace.Widgets");var a=t.Squarespace.Widgets.FormBuilderField=t.Base.create("formBuilderField",t.Squarespace.Widgets.SSWidget,[t.WidgetChild,t.Squarespace.Mixins.Expandable],{initializer:function(){this.publish("removeClicked",{emitFacade:true});var e=this.get("field");this._titleField=new t.Squarespace.DialogFields.Text({name:"fieldTitle",data:e.title});"hidden"===e.type&&(e.key=this._cleanTitleForHidden(e.title));this._editor=new t.Squarespace.Widgets.FormBuilderFieldEditor({field:e})},destructor:function(){this._titleField.destroy();this._editor.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._editButton=e.one(".edit-field");this._editorWrapper=e.one(".editor-wrapper");this._set("expandableNode",this._editorWrapper);this._editorWrapper.hide(true);this._titleField.render(e.one(".field-title"));this._editor.render(this._editorWrapper)},bindUI:function(){a.superclass.bindUI.call(this);this.after("editingChange",this.syncUI,this);this._editor.on("change",function(e){this.fire("fieldChange")},this);this._bindTitleField();this._bindEditButton();this._bindRemoveButton()},syncUI:function(){a.superclass.syncUI.call(this);if(this.get("editing")){this._editButton.setContent(this.get("strings.doneText"));this.open()}else{this._editButton.setContent(this.get("strings.editText"));this.close()}var e=this.get("field").locked;this.get("contentBox").toggleClass("field-locked",e)},openEdit:function(){this._set("editing",true)},closeEdit:function(){this._set("editing",false)},focusAndSelect:function(){var e=this._titleField;e.focus();e.select()},lock:function(){this.get("field").locked=true;this.fire("fieldChange");this.syncUI()},unlock:function(){this.get("field").locked=false;this.fire("fieldChange");this.syncUI()},_bindTitleField:function(){var e=this._titleField;var a=this.get("field");e.after("dataChange",function(e){a.title=e.newVal;if("hidden"===a.type){var t=this._cleanTitleForHidden(a.title);this._editor.item(0).set("data",t)}this.fire("fieldChange")},this)},_bindEditButton:function(){this._editButton.on("click",function(){if(this.get("animating"))return;this.get("editing")?this.closeEdit():this.openEdit()},this)},_bindRemoveButton:function(){this.get("contentBox").one(".remove-field").on("click",function(e){e.halt();this.fire("removeClicked")},this)},_cleanTitleForHidden:function(e){var t=e.trim().replace(/\W/g,"_").toUpperCase();0!==t.indexOf("SQF_")&&(t="SQF_"+t);return t}},{CSS_PREFIX:"sqs-form-builder-field",HANDLEBARS_TEMPLATE:"form-builder-field.html",ATTRS:{strings:{value:{editText:i("Edit"),doneText:i("Done")},validator:t.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},field:{value:null,validator:t.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},editing:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},animating:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","squarespace-animations","squarespace-attr-validators","squarespace-dialog-text","squarespace-form-builder-field-editor","squarespace-form-builder-field-template","squarespace-mixins-expandable","squarespace-ss-widget","widget-child"]})},7663:function(e,t,a){var i=a(24).t;var n=a(207);var s=a(6038);YUI.add("squarespace-form-builder-field-editor",function(l){var t={MAX_CHARACTER_LIMIT:1e5};var c={description:{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"description","strings.description":i("A description / instructions for this field."),"strings.placeholder":i("Description")}},required:{ctor:l.Squarespace.DialogFields.Check,config:{name:"required","strings.title":i("Required")}},placeholder:{ctor:l.Squarespace.DialogFields.Text,config:{name:"placeholder",className:"thin","strings.placeholder":i("Placeholder text")}},maxLength:{ctor:l.Squarespace.DialogFields.NumericText,config:{name:"maxLength",className:"thin","strings.title":i("Character Limit (optional)"),"strings.validationFailMessage":i("Please enter a number between 1 and {max}",{max:t.MAX_CHARACTER_LIMIT}),displayFormatter:function e(t){return t||""},validator:function(e){return 0===e.length||l.Lang.isNumber(e)&&e>0&&e<t.MAX_CHARACTER_LIMIT}}},currencySymbol:{ctor:l.Squarespace.DialogFields.Text,config:{name:"currencySymbol",className:"thin","strings.placeholder":i("Currency symbol"),maxLength:1}},showCountryCode:{ctor:l.Squarespace.DialogFields.Check,config:{name:"showCountryCode","strings.title":i("Show Country Code")}},options:{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"options","strings.placeholder":i("Options"),"strings.description":i("Enter options one per line.")}},underline:{ctor:l.Squarespace.DialogFields.Check,config:{name:"underline","strings.title":i("Underline")}},key:{ctor:l.Squarespace.DialogFields.Text,config:{name:"key",className:"thin",disabled:true,"strings.placeholder":i("Key"),"strings.description":i('<strong>This is a hidden field.</strong> Hidden fields can be used to collect variables from the URL in your form submissions. To fill in this field, include the variable from the box above in the query string for this page. <a target="_blank" href="{url}">Learn more</a>',{url:n.HIDDEN_FORM_FIELD})}},value:{ctor:l.Squarespace.DialogFields.Text,config:{name:"value",className:"thin","strings.placeholder":i("Default Value"),"strings.description":i("If no value is passed through the query string, the default value above will be used.")}}};l.namespace("Squarespace.Widgets");var a=l.Squarespace.Widgets.FormBuilderFieldEditor=l.Base.create("FormBuilderFieldEditor",l.Squarespace.Widgets.SSWidget,[l.WidgetParent],{renderUI:function(){a.superclass.renderUI.call(this);var o=this.get("field");var e=s[o.type];var t=e.map(function e(t){var a=l.merge({},c[t]);var i=o[t];if(l.Lang.isValue(i)){"options"===t&&(i=i.join("\n"));a.config.data=i}var n=a.ctor;var s=a.config;var r=new n(s);return r});this.add(t)},bindUI:function(){a.superclass.bindUI.call(this);var i=this.get("field");this.each(function(e){var a=e.get("name");e.after("dataChange",function(e){var t=e.newVal;if("options"===a){t=t.split("\n");t=l.Array.map(t,function(e){return e.trim()})}i[a]=t;this.fire("change",{fieldName:a,data:t})},this)},this)}},{CSS_PREFIX:"sqs-form-builder-field-editor",ATTRS:{field:{value:null}}})},"1.0",{requires:["base","node","widget-parent","squarespace-ss-widget","squarespace-dialog-check","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-numeric-text"]})},7664:function(e,t){YUI.add("squarespace-form-builder-field-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["form-builder-field.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression;s+='<div class="field-control-bar">\n  <div class="field-drag-handle-wrapper">\n    <div class="field-drag-handle"></div>\n  </div>\n\n  <div class="field-type-icon '+l((r=(r=t.field,null==r||false===r?r:r.type),typeof r===o?r.apply(t):r))+'"></div>\n\n  <div class="field-title"></div>\n\n  <div class="field-controls">\n    <div class="edit-field">'+l((r=(r=t.strings,null==r||false===r?r:r.editText),typeof r===o?r.apply(t):r))+'</div>\n    <div class="remove-field">&times;</div>\n  </div>\n</div>\n\n<div class="editor-wrapper"></div>\n';return s})})();var t="form-builder-field.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7665:function(e,t){YUI.add("squarespace-mixins-expandable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Expandable=a.Base.create("Expandable",a.Base,[],{initializer:function(){this.publish("expandableOpened");this.publish("expandableClosed");this.after("expandableNodeChange",function(e){var t=e.newVal;t.plug(a.Squarespace.Animations.Expandable,{duration:this.get("expandDuration")})},this)},open:function(e){var t=this.get("expandableNode");if(t.hasClass("expandable-hidden")){t.once("opened",function(){this._set("animating",false);this._set("isOpen",true);this.fire("expandableOpened")},this);this._set("animating",true);t.show(e)}},close:function(e){var t=this.get("expandableNode");if(!t.hasClass("expandable-hidden")){t.once("closed",function(){this._set("animating",false);this._set("isOpen",false);this.fire("expandableClosed")},this);this._set("animating",true);t.hide(e)}}},{ATTRS:{expandableNode:{valueFn:function(){return this.get("contentBox")},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Node)},expandDuration:{value:.2,validator:a.Squarespace.AttrValidators.isNumber,readOnly:true},isOpen:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},animating:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-attr-validators"]})},7666:function(e,t,a){var n=a(595);YUI.add("squarespace-form-editing-utils",function(i){i.namespace("Squarespace");i.Squarespace.FormEditingUtils={resolveFieldTitle:function(t,e){var a=0;i.Array.each(e,function(e){e.type===t.type&&a++},this);a>0&&(t.title=t.title+" "+a)},resolveFieldId:function(e,t){if(e.id)return;i.Lang.isValue(e.title)||i.Squarespace.FormEditingUtils.resolveFieldTitle(e,t);e.id=i.guid(n.createUrlSafeString(e.type)+"-")}}},"1.0",{requires:[]})},7667:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-form-preview",function(t){t.namespace("Squarespace.DialogFields");var a=t.Squarespace.DialogFields.FormPreview=t.Base.create("formPreview",t.Squarespace.DialogField2,[],{initializer:function(){this._formPreview=new t.Squarespace.Widgets.FormPreview({form:this.get("data"),hideSubmitButton:true});this._emptyMessage=t.Node.create('<div class="no-fields">'+i("No fields. Use the form builder to add some.")+"</div>")},destructor:function(){this._formPreview.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._formPreview.render(e);e.append(this._emptyMessage)},syncUI:function(){a.superclass.syncUI.call(this);this._formPreview.syncUI();if(this.get("data").get("fields").length>0){this._emptyMessage.hide();this._formPreview.show()}else{this._formPreview.hide();this._emptyMessage.show()}}},{CSS_PREFIX:"sqs-dialog-preview-form",ATTRS:{data:{value:null,validator:function(e){return t.instanceOf(e,t.Squarespace.Models.Form)}},readOnly:{value:true}}})},"1.0",{requires:["base","json","node","squarespace-dialog-field-2","squarespace-form-preview","squarespace-models-form"]})},7668:function(e,t,a){var i=a(701);var l=a(1937);var c=a(5415);var d=a(24).t;var n=a(2887);var s=a(228);var u=a(2751);var r=false;YUI.add("squarespace-form-preview",function(o){o.namespace("Squarespace.Widgets");var e=o.Squarespace.Widgets.FormPreview=o.Base.create("formPreview",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){false;s.get("/api/template/GetTemplateSchema",{params:{type:i.FORM}}).then(this.onTemplateSchemaLoaded.bind(this))},onTemplateSchemaLoaded:function e(t){false;if(!this.get("destroyed")){this._template=t.data;this.syncUI()}},destructor:function(){this._template=null},makeHandleChange:function(e){return function e(t){false;this.syncUI()}},bindUI:function(){e.superclass.bindUI.call(this);this.after(["useLightboxChange","lightboxHandleTextChange","buttonAlignmentChange"],this.makeHandleChange("[FormPreview] Block Model changed, redraw preview"),this);this.get("form").after("change",this.makeHandleChange("[FormPreview] Form Model changed, redraw preview"),this)},syncUI:function e(){var t=this.get("contentBox");var a=t.getDOMNode();if(!a)return;false;if(!this._template||!this._template.html){false;return}var i=this.get("form");i.get("type")!==o.Squarespace.FormType.NEWSLETTER_BLOCK&&i.get("type")!==o.Squarespace.FormType.SLIDE&&i.set("disclaimerMessage",null);var n=this.get("useLightbox");var s={showTitle:n,useLightbox:n,lightboxHandleText:this.get("lightboxHandleText")||d("Open Form"),buttonAlignment:this.get("buttonAlignment"),formFields:i.get("fields"),formSubmitButtonText:i.get("submitButtonText"),formSubmissionMessage:i.get("submissionMessage"),hideSubmitButton:this.get("hideSubmitButton"),formId:i.get("id"),disclaimerMessage:i.get("disclaimerMessage"),captchaEnabled:i.get("captchaEnabled"),captchaAlignment:i.get("captchaAlignment"),captchaTheme:i.get("captchaTheme")};false;var r=this.evaluateTemplate(s);t.empty().setHTML(r);u(t.getDOMNode());i.get("captchaEnabled")&&c.isCaptchaEnabled()&&l.render(o.config.win,t.one(".captcha-container").getDOMNode())},evaluateTemplate:function(e){try{return n(this._template.html,o.merge({},e,{localizedStrings:this._template.localizedStrings}))}catch(e){return e.message}}},{CSS_PREFIX:"sqs-preview-form",ATTRS:{form:{value:null,validator:function(e){return o.instanceOf(e,o.Squarespace.Models.Form)}},useLightbox:{value:false},lightboxHandleText:{value:d("Open Form")},hideSubmitButton:{value:false}}})},"1.0",{requires:["base","json","node","squarespace-enum","squarespace-models-form","squarespace-ss-widget"]})},7669:function(e,t,a){var r=a(24).t;YUI.add("squarespace-dialog-form-selector",function(i){i.namespace("Squarespace.DialogFields");var n={};n[i.Squarespace.FormType.PRODUCT]=i.Squarespace.ProductFormModelEditor;var s=i.Squarespace.DialogFields.FormSelector=i.Base.create("formSelector",i.Squarespace.DialogField2,[],{initializer:function(){i.Squarespace.FormCache.load(i.bind(function(){this._set("dataLoaded",true)},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("contentBox");this.get("dataLoaded")||this.get("boundingBox").addClass("content-loading");var t=e.appendChild('<div class="loading-state"><div class="spinner"></div><div class="text">'+r("Loading...")+"</div></div>");new i.Squarespace.Spinner({size:20,color:"dark",render:t.one(".spinner")}).spin();var a=this.get("strings.noFormMessage");this._noFormEl=e.appendChild('<div class="no-form"><div class="name">'+a+"</div></div>");this._addFormEl=e.appendChild('<div class="add-form"><div class="title"><div class="title-icon"></div><div class="title-text">'+r("Create New Form")+"</div></div></div>")},bindUI:function(){s.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this._bindFormCache();this.get("contentBox").delegate("click",function(e){var t=e.currentTarget;if(e.target.test(".edit")){this._editForm(t);return}if(t.hasClass("selected"))return;var a=t.hasClass("no-form");var i=t.getAttribute("data-form-id");var n=a?null:i;this.set("data",n,{noSyncUI:true});this._updateSelectedFormNode()},".form, .no-form",this);this._addFormEl.on("click",this._addForm,this)},syncUI:function(){s.superclass.syncUI.call(this);if(this.get("dataLoaded")){this._setLoadedState();this.get("contentBox").all(".form").remove(true);var e=this.get("formType");var t=i.Squarespace.FormCache.filterByType(e);i.Array.each(t,this._addFormNode,this);this._updateSelectedFormNode()}else this._setLoadingState()},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading")},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=i.later(500,this,function(){this.get("boundingBox").addClass("content-loading")})},_bindFormCache:function(){var e=i.Squarespace.FormCache;this._registerEvent(e.after("reset",this.syncUI,this));this._registerEvent(e.after("add",function(e){this._addFormNode(e.model)},this));this._registerEvent(e.after("remove",function(e){var t=e.model;this._removeFormNode(t);if(t.get("id")===this.get("data")){this.set("data",null,{noSyncUI:true});this._updateSelectedFormNode()}},this));this._registerEvent(e.after("*:save",function(e){this._updateFormNode(e.target)},this))},_addFormNode:function(e){var t=i.Node.create('<div class="form" data-form-id="'+e.get("id")+'"><div class="name">'+e.get("name")+'</div><div class="edit">'+r("Edit")+"</div></div>");e.get("id")===this.get("data")&&t.addClass("selected");t.setData("form",e);this._addFormEl.insert(t,"before");return t},_updateFormNode:function(e){var t=this._getFormNode(e.get("id"));var a=t.one(".name");var i=e.get("name");i!==a.getHTML()&&a.setHTML(i)},_removeFormNode:function(e){this._getFormNode(e.get("id")).remove(true)},_getFormNode:function(e){return this.get("contentBox").one('[data-form-id="'+e+'"]')},_updateSelectedFormNode:function(){var e=this.get("contentBox").one(".selected");e&&e.removeClass("selected");var t=this.get("data");t?this._getFormNode(t).addClass("selected"):this._noFormEl.addClass("selected")},_editForm:function(e){var t=n[this.get("formType")];var a=e.getData("form");new t({model:a}).show()},_addForm:function(){var e=this.get("formType");var t=n[e];var a=new i.Squarespace.Models.Form({type:e,name:r("New Form"),useLightbox:false});a.onceAfter("save",function(){i.Squarespace.FormCache.add(a);this.set("data",a.get("id"),{noSyncUI:true});this._updateSelectedFormNode()},this);new t({model:a}).show()}},{CSS_PREFIX:"sqs-form-selector",ATTRS:{data:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},formType:{value:i.Squarespace.FormType.BLOCK,validator:function(e){if(!i.Object.hasValue(i.Squarespace.FormType,e)){false;return false}return true},writeOnce:"initOnly"},dataLoaded:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,readOnly:true},strings:{value:{noFormMessage:r("No Form Required")},validator:i.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-editor-form-product","squarespace-enum","squarespace-models-form","squarespace-spinner"]})},7670:function(e,t,a){var s=a(24).t;var i=a(6694);YUI.add("squarespace-editor-form-product",function(n){n.namespace("Squarespace");n.Squarespace.ProductFormModelEditor=n.Base.create("productFormModelEditor",n.Squarespace.FormModelEditor,[],{initializer:function(){this.get("dialog").on("remove-requested",this._confirmAndRemove,this)},_confirmAndRemove:function(){var e=this.get("model");var t=e.isNew();var a=s(t?"Discard Form":"Delete Form");var i;i=s(t?"Are you sure you wish to discard this form?":'Are you sure you wish to delete this form? Any products that are currently using this form in their Workflow settings will be set to "No Form Required".');new n.Squarespace.Widgets.Confirmation({"strings.title":a,"strings.message":i}).on("confirm",function(){e.destroy({remove:true});this.destroy()},this)}},{ATTRS:{dialogConfigStrings:{value:{title:s("Edit Product Form"),loadingText:s("Editing Product Form…")}},fieldsets:{valueFn:function(){return[i.BUILD]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-ui-base","squarespace-widgets-confirmation"]})},7671:function(e,t,a){var c=a(24).t;var d=a(801);var u=a(728);var s=a(683);var g=a(211);var p=a(6694);var i=a(207);var n=a(5415);var r=a(2611);var h=a(2610);var f=a(516);var m=a(390);YUI.add("squarespace-editor-form",function(o){o.namespace("Squarespace");var l=o.Squarespace.FormModelEditor=o.Base.create("formModelEditor",o.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var e=a.getField("formFields");var t=a.getField("formPreview");e&&t&&e.on("change",t.syncUI,this);if(this.hasFieldset(p.CAPTCHA)){this._syncModelFieldWithPreview("captchaEnabled");this._syncModelFieldWithPreview("captchaTheme");this._syncModelFieldWithPreview("captchaAlignment");this._updateCaptchaOptionsByFieldChange()}},this)},hasFieldset:function(e){return-1!==this.get("fieldsets").indexOf(e)},_updateCaptchaOptionsByFieldChange:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;t.after("dataChange",this._updateCaptchaOptionsByFieldChange);if(false===t.get("data")){e.getField("captchaTheme").hide();e.getField("captchaAlignment").hide()}else{e.getField("captchaTheme").show();e.getField("captchaAlignment").show()}},_syncModelFieldWithPreview:function(t){var e=this.get("dialog");var a=e.getField(t);if(!a)return;a.after("dataChange",function(e){this._formCopy.set(t,e.newVal)},this)},getDialogData:function(){var e=this.get("model").toJSON();var t=this._formCopy=new o.Squarespace.Models.Form(e);var a={};if(this.hasFieldset(p.BUILD)){a.formName=t.get("name");a.formFields=t.get("fields");a.formPreview=t}this.hasFieldset(p.STORAGE)&&this._setStorageBackendsData(a,t);if(this.hasFieldset(p.ADVANCED)){a=o.merge(a,t.getAttrs(["submitButtonText"]));this.hasFieldset(p.DISCLAIMER)&&(a=o.merge(a,t.getAttrs(["disclaimerMessage"])));a=o.merge(a,t.getAttrs(["submissionMessage","submissionHTML"]));var i=t.get("successRedirect");i&&(a=o.merge(a,{successRedirect:{url:i}}))}this.hasFieldset(p.CAPTCHA)&&(a=o.merge(a,t.getAttrs(["captchaEnabled","captchaTheme","captchaAlignment"])));return a},sanitizeDialogData:function(e){e=l.superclass.sanitizeDialogData.call(this,e);var t={};this.hasFieldset(p.BUILD)&&(t.name=e.formName);this.hasFieldset(p.STORAGE)&&(t.backendConnectionConfigs={emailConnect:o.merge(e.emailConnect,{backendType:s.EMAIL}),googleDocsConnect:o.merge(e.googleDocsConnect,{backendType:s.GOOGLE}),mailchimpConnect:o.merge(e.mailchimpConnect,{backendType:s.MAILCHIMP}),campaignsConnect:o.merge(e.campaignsConnect,{backendType:s.CAMPAIGNS}),zapierConnect:o.merge(e.zapierConnect,{backendType:s.ZAPIER})});if(this.hasFieldset(p.ADVANCED)){t.submissionMessage=e.submissionMessage;t.submissionHTML=e.submissionHTML;t.submitButtonText=e.submitButtonText;e.successRedirect?"string"===typeof e.successRedirect?t.successRedirect=e.successRedirect:"object"===typeof e.successRedirect&&e.successRedirect.url&&(t.successRedirect=e.successRedirect.url):t.successRedirect=""}this.hasFieldset(p.DISCLAIMER)&&(t.disclaimerMessage=e.disclaimerMessage);if(this.hasFieldset(p.CAPTCHA)){t.captchaEnabled=e.captchaEnabled;t.captchaTheme=e.captchaTheme;t.captchaAlignment=e.captchaAlignment}this._formCopy.setAttrs(t);return this._formCopy.toJSON()},_setStorageBackendsData:function(t,e){var a=e.get("connectedBackends");o.Lang.isValue(a)&&o.Array.each(a,function(e){o.Lang.isValue(e.backendId)&&this._setStorageBackendData(t,e)},this)},_setStorageBackendData:function(e,t){var a=t.backendId;var i=t.socialConfig;switch(t.backendType){case s.EMAIL:e.emailConnect={connectionState:g.CONNECTED,email:a};break;case s.GOOGLE:e.googleDocsConnect={connectionState:g.CONNECTED,username:i.profileUserName,socialConfig:i,spreadsheetName:t.config.spreadsheetName};break;case s.MAILCHIMP:var n=!!(t.config&&"true"===t.config.useSingleOptIn);e.mailchimpConnect={connectionState:g.CONNECTED,username:i.profileUserName,useSingleOptIn:n,socialConfig:i,list:a};break;case s.ZAPIER:e.zapierConnect={connectionState:g.CONNECTED,url:a};break;case s.CAMPAIGNS:e.campaignsConnect={connectionState:g.CONNECTED,listId:a};break}},_onSendRequested:function(e){if(this.hasFieldset(p.STORAGE)){var t=d.isFeatureEnabled(u.MAILCHIMP_INTEGRATION);var a=this.sanitizeDialogData(this.get("dialog").getData()).backendConnectionConfigs;var i=false;for(var n in a)if(a.hasOwnProperty(n)){var s=a[n];(t||"mailchimpConnect"!==n)&&(i=i||s&&s.connectionState===g.CONNECTED);if(i)break}if(!i){var r=new o.Squarespace.Widgets.Alert({"strings.title":c("No Storage Configured"),"strings.message":c("Must configure a storage option before saving this form.")});r.on("confirm",function(){this.get("dialog").allowEditing()}.bind(this));return}}"productFormModelEditor"===this.name&&(this.get("model").get("id")||f.trackCreateForm(m.ProductEditor.YUI_EDITOR));l.superclass._onSendRequested.call(this,e)},_getTabConfigs:function(){var t=[];o.Array.each(this.get("fieldsets"),function(e){switch(e){case p.BUILD:t.push({tabTitle:c("Build"),fields:this._getBuildFieldConfigs()});break;case p.STORAGE:t.push({tabTitle:c("Storage"),fields:this._getStorageFieldConfigs()});break;case p.ADVANCED:t.push({tabTitle:c("Advanced"),scroll:true,fields:this._getAdvancedFieldConfigs()});break;case p.CAPTCHA:n.isCaptchaEnabled()&&t.push({tabTitle:c("Captcha"),scroll:true,fields:this._getCaptchaFieldConfigs()});break}},this);t[0].icon="/universal/images-v6/icons/icon-form-16-light.png";return t},_getBuildFieldConfigs:function(){return[{ctor:o.Squarespace.DialogFields.Text,config:{name:"formName","strings.title":c("Form Name")}},{type:"splitter",fields:[{type:"stack",name:"formBuilder",width:.5,fields:[{ctor:o.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",content:"<strong>"+c("Manage Form Fields")+"</strong>",className:"manageFormFieldsTitle"}},{ctor:o.Squarespace.DialogFields.FormBuilder,config:{name:"formFields",minimumLength:this.get("minimumLength"),excludedFieldTypes:this.get("excludedFieldTypes")}}]},{type:"stack",name:"preview",width:.5,fields:[{ctor:o.Squarespace.DialogFields.HTML,config:{name:"formPreviewTitle",content:"<strong>"+c("Live Form Preview")+"</strong>"}},{ctor:o.Squarespace.DialogFields.FormPreview,config:{name:"formPreview"}}]}]}]},_getStorageFieldConfigs:function(){var t=[];o.Array.each(this.get("acceptedBackendTypes"),function(e){switch(e){case s.GOOGLE:t.push({ctor:o.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect"}});break;case s.MAILCHIMP:d.isFeatureEnabled(u.MAILCHIMP_INTEGRATION)&&t.push({ctor:o.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect"}});break;case s.EMAIL:t.push({ctor:o.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}});break;case s.ZAPIER:d.isFeatureEnabled(u.FORMS_API)&&t.push({ctor:o.Squarespace.DialogFields.ZapierServiceConnect,config:{name:"zapierConnect",getZapsConnected:o.bind(function(){var e=this.get("model");return e.getConnBackend(s.ZAPIER).length},this)}});break;case s.CAMPAIGNS:t.push({ctor:o.Squarespace.DialogFields.CampaignsServiceConnect,config:{name:"campaignsConnect"}});break}},this);return t},_getAdvancedFieldConfigs:function(){var e=[];e.push({ctor:o.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":c("Submit Button Label"),"strings.placeholder":c("Submit")}});if(this.hasFieldset(p.DISCLAIMER)){e.push({ctor:o.Squarespace.DialogFields.Description,config:{name:"disclaimerDescription",title:c("Disclaimer"),text:c("Displayed below the input field.")}});e.push({ctor:o.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimerMessage",editorHeight:125,classNames:"disclaimer"}})}e.push({ctor:o.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:c("Post-Submit Redirect"),text:c("If provided, the user will be redirected upon form submission.")}});e.push({ctor:o.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}});e.push({ctor:o.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:c("Post-Submit Message"),text:c("Display this message to users after they submit your form.")}});e.push({ctor:o.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}});e.push({ctor:o.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:c("Post-Submit HTML"),text:c("HTML to be rendered in addition to the Post-Submit Message.")}});e.push({ctor:o.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}});return e},_getCaptchaFieldConfigs:function(){return[{ctor:o.Squarespace.DialogFields.Description,config:{name:"captchaDescription",title:c("Google ReCaptcha"),text:c('Prevent spam and abuse by asking visitors to check I’m not a robot before submitting. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:i.GOOGLE_RECAPTCHA_SETUP})}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"captchaEnabled","strings.title":c("Add Google reCaptcha")}},{ctor:o.Squarespace.DialogFields.Select,config:{name:"captchaTheme","strings.title":c("Theme"),defaultValue:h.LIGHT,className:"thin dark",numeric:true,options:[{value:h.LIGHT,label:c("Light")},{value:h.DARK,label:c("Dark")}]}},{ctor:o.Squarespace.DialogFields.Select,config:{name:"captchaAlignment","strings.title":c("Alignment"),defaultValue:r.LEFT,className:"thin dark",numeric:true,options:[{value:r.LEFT,label:c("Left")},{value:r.CENTER,label:c("Center")},{value:r.RIGHT,label:c("Right")}]}}]}},{ATTRS:{dialogConfigStrings:{value:{title:c("Form"),loadingText:c("Editing Form…")},validator:o.Squarespace.AttrValidators.isObject},fieldsets:{valueFn:function(){return[p.BUILD,p.STORAGE,p.ADVANCED,p.CAPTCHA]},validator:o.Squarespace.AttrValidators.isArray},minimumLength:{value:0,validator:o.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{values:[],validator:o.Squarespace.AttrValidators.isArray},buttons:{value:[{type:"cancel",title:c("Cancel")},{type:"remove",title:c("Delete Form")},{type:"saveAndClose",title:c("Save")}],validator:o.Squarespace.AttrValidators.isArray},acceptedBackendTypes:{valueFn:function(){return o.Object.values(s)}},model:{value:null,validator:function(e){return o.instanceOf(e,o.Squarespace.Models.Form)}},dialogConfig:{getter:function(){var e=this.get("dialogConfigStrings");var t={name:"editForm",title:e.title,loadingText:e.loadingText,closeOthers:false,overlay:.7,style:"flyout",flyoutPointerDirection:"hidden",initialDataByReference:true,width:850,height:454,buttons:this.get("buttons"),tabs:this._getTabConfigs()};return t}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-email-service-connect","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-google-docs-service-connect","squarespace-dialog-html","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-text","squarespace-dialog-wysiwyg","squarespace-dialog-zapier-service-connect","squarespace-enum","squarespace-model-editor","squarespace-models-form","squarespace-ui-base","squarespace-widgets-alert"]})},7672:function(e,t,a){var n=a(24).t;var s=a(1336);var r=a(211);YUI.add("squarespace-dialog-email-service-connect",function(a){a.namespace("Squarespace.DialogFields");var i=a.Squarespace.DialogFields.EmailServiceConnect=a.Base.create("emailServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-service-connect-content");this._addressField=new a.Squarespace.DialogFields.Text({name:"address",className:"thin","strings.title":n("Email Address"),data:this.get("data.email")})},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this._addressField;t.render(e.one(".fields"));this._addressFieldInput=t.get("contentBox").one("input");this._messageEl=e.one(".text .message")},bindUI:function(){i.superclass.bindUI.call(this);this.get("contentBox").on("click",function(e){var t=this.get("data.connectionState");var a=e.target;t===r.CONNECTED&&a.hasClass("icon")?this._disconnect():t===r.DISCONNECTED&&a.hasClass("connect")&&this._connect()},this);this._addressField.get("contentBox").one("input").after("keyup",function(e){13===e.keyCode&&this._connect()},this);this.after("dataChange",function(){this._messageEl.setContent(this._getSendingToMessage())},this)},_getSendingToMessage:function(){return n("Sending to {email}",{email:this.get("data.email")})},_getHBTemplateContext:function(){return{title:n("Email"),connect:n("Connect"),sendingTo:this._getSendingToMessage()}},_connect:function(){var e=this._addressField.get("data").trim();if(s.isValidEmail(e)){var t=this.get("data")||{};t.email=e;t.connectionState=r.CONNECTED;this.set("data",t)}else new a.Squarespace.Widgets.Alert({"strings.title":n("Invalid Email Address"),"strings.message":n("You must provide a valid email address.")})},_disconnect:function(){var e=this.get("data");e.email=null;e.connectionState=r.DISCONNECTED;this.set("data",e)}},{CSS_PREFIX:"sqs-email-service-connect",HANDLEBARS_TEMPLATE:"dialog-email-service-connect.html",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-email-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},7673:function(e,t){YUI.add("squarespace-dialog-email-service-connect-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-email-service-connect.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression;s+='<div class="sqs-content-inner">\n\n  <div class="text">\n    <div class="title">';if(r=a.title)r=r.call(t,{hash:{},data:n});else{r=t.title;r=typeof r===o?r.apply(t):r}s+=l(r)+'</div>\n    <div class="message">';if(r=a.sendingTo)r=r.call(t,{hash:{},data:n});else{r=t.sendingTo;r=typeof r===o?r.apply(t):r}s+=l(r)+'</div>\n  </div>\n\n  <div class="fields"></div>\n\n  <div class="connect">';if(r=a.connect)r=r.call(t,{hash:{},data:n});else{r=t.connect;r=typeof r===o?r.apply(t):r}s+=l(r)+'</div>\n  <div class="icon"></div>\n\n</div>\n';return s})})();var t="dialog-email-service-connect.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7674:function(e,t,a){var i=a(211);YUI.add("squarespace-dialog-service-connect",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ServiceConnect=e.Base.create("serviceConnect",e.Squarespace.DialogField2,[],{initializer:function(){if(this.constructor===t)throw new Error("DialogFields.ServiceConnect: This is an abstract class and is not meant to be used on its own.");this._edited=false},renderUI:function(){t.superclass.renderUI.call(this)},bindUI:function(){t.superclass.bindUI.call(this);this.onceAfter("dataChange",function(){this._edited=true},this);this.after(["disabledChange","connectionInProgressChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this.get("data.connectionState")===i.PENDING?this._setInProgressState():this.get("data.connectionState")===i.CONNECTED?this._setConnectedState():this._setDisconnectedState()},didDataChange:function(){return this._edited},_setInProgressState:function(){this.get("contentBox").removeClass("connected").removeClass("not-connected").addClass("in-progress")},_setConnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("not-connected").addClass("connected")},_setDisconnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("connected").addClass("not-connected")},_connect:function(){throw new Error("DialogFields.ServiceConnect: _connect must be implemented by the extending class.")},_disconnect:function(){throw new Error("DialogFields.ServiceConnect: _disconnect must be implemented by the extending class.")}},{CSS_PREFIX:"sqs-service-connect",ATTRS:{data:{value:{connectionState:i.DISCONNECTED}},connectionInProgress:{getter:function(){return this.get("data.connectionState")===i.PENDING}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7675:function(e,t,a){var i=a(24).t;var n=a(0);var s=a(60);var r=a(8988);var o=a(5996);var l=a(211);YUI.add("squarespace-dialog-google-docs-service-connect",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.GoogleDocsServiceConnect=e.Base.create("googleDocsServiceConnect",e.Squarespace.DialogField2,[],{initializer:function(e){this.reactElement=n.createElement(r,{initialData:e.data})},renderUI:function(){this.reactInstance=s.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){s.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){return o.getState().isDirty},_getErrors:function(){var e=[];var t=o.getState();t.isConnected&&t.showFormNameRequiredError&&e.push(i("Spreadsheet name required."));return e}},{ATTRS:{data:{getter:function(){var e=o.getState();return{connectionState:e.isConnected?l.CONNECTED:l.DISCONNECTED,username:e.username,socialConfig:e.googleDriveConfig,spreadsheetName:e.googleDriveSpreadsheetName}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7677:function(e,t,a){var i=a(24).t;var n=a(0);var s=a(60);var r=a(8991);var o=a(5390);var l=a(5956);var c=a(211);YUI.add("squarespace-dialog-mailchimp-service-connect",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.MailChimpServiceConnect=e.Base.create("mailChimpServiceConnect",e.Squarespace.DialogField2,[],{initializer:function(e){this.reactElement=n.createElement(r,{initialData:e.data})},renderUI:function(){this.reactInstance=s.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){s.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){return l.getState().isDirty},_getErrors:function(){var e=[];var t=l.getState();if(t.mailChimpConfig.isMailChimpConnected&&!t.mailChimpConfig.mailChimpListId){o.mailChimpValidationError();e.push(i("Select a list"))}return e}},{ATTRS:{data:{getter:function(){var e=l.getState();return{connectionState:e.mailChimpConfig.isMailChimpConnected?c.CONNECTED:c.DISCONNECTED,username:e.mailChimpConfig.mailChimpUsername,useSingleOptIn:e.mailChimpConfig.mailChimpUseSingleOptIn,socialConfig:e.mailChimpConfig.mailChimpOAuthConfig,list:e.mailChimpConfig.mailChimpListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7678:function(e,t,a){var i=a(24).t;var n=a(24).pluralize;var s=a(0);var r=a(60);var o=a(5961);var l=a(651);var c=a(211);YUI.add("squarespace-dialog-zapier-service-connect",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ZapierServiceConnect=e.Base.create("ZapierServiceConnect",e.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(e){this.get("contentBox").addClass("sqs-service-connect-content");this.zapsConnected=e.getZapsConnected()},renderUI:function(){t.superclass.renderUI.call(this)},bindUI:function(){t.superclass.bindUI.call(this);this.after("connectionInProgressChange",function(){this.get("contentBox").setContent(this.renderTemplate())},this);this.get("contentBox").on("click",function(e){var t=this.get("data.connectionState");var a=e.target;t===c.CONNECTED||t===c.PENDING?a.hasClass("icon")&&this._disconnect():this._onConnect();e.stopPropagation()},this)},_onConnect:function(){if(l.isTrial()){this._showFeatureGateModal(this._openZapierWindow);return}var e=this.get("data");e.connectionState=c.PENDING;this.set("data",e);this.set("connectionInProgress",true)},_disconnect:function(){var e=this.get("data");e.url=null;e.connectionState=c.DISCONNECTED;this.set("data",e);this.set("connectionInProgress",false)},_openZapierWindow:function(){window.open("https://support.squarespace.com/hc/en-us/articles/360000641507/","_blank")},_showFeatureGateModal:function(e){var t=document.createElement("div");document.body.appendChild(t);var a=s.createElement(o,{isOpen:true,isTrial:true,onRequestClose:function(){r.unmountComponentAtNode(t);t.remove();e()}});r.render(a,t)},_getHBTemplateContext:function(){var e=this.get("data.connectionState")===c.CONNECTED;var t=this.get("connectionInProgress");return{title:i("Zapier"),connectedMessage:n({one:"{%n} Zap connected",other:"{%n} Zaps connected"},this.zapsConnected),pendingMessage:i("Awaiting Connection to Zapier"),clickToConnect:i("Click to connect"),connected:e,connectionInProgress:t}}},{CSS_PREFIX:"sqs-zapier-service-connect",HANDLEBARS_TEMPLATE:"dialog-zapier-service-connect.html"})},"1.0",{requires:["base","squarespace-dialog-zapier-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},7679:function(e,t){YUI.add("squarespace-dialog-zapier-service-connect-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-zapier-service-connect.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n      <div class="message">';if(i=n.connectedMessage)i=i.call(e,{hash:{},data:t});else{i=e.connectedMessage;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n    ";return a}function u(e,t){var a="",i;a+="\n      ";i=n["if"].call(e,e.connectionInProgress,{hash:{},inverse:c.program(6,p,t),fn:c.program(4,g,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function g(e,t){var a="",i;a+='\n        <div class="message">';if(i=n.pendingMessage)i=i.call(e,{hash:{},data:t});else{i=e.pendingMessage;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n      ";return a}function p(e,t){var a="",i;a+='\n        <div class="connect">';if(i=n.clickToConnect)i=i.call(e,{hash:{},data:t});else{i=e.clickToConnect;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n      ";return a}s+='<div class="sqs-content-inner">\n  <div class="text">\n    <div class="title">';if(r=n.title)r=r.call(t,{hash:{},data:i});else{r=t.title;r=typeof r===o?r.apply(t):r}s+=l(r)+"</div>\n\n    ";r=n["if"].call(t,t.connected,{hash:{},inverse:c.program(3,u,i),fn:c.program(1,d,i),data:i});(r||0===r)&&(s+=r);s+='\n  </div>\n\n  <div class="icon"></div>\n</div>\n';return s})})();var t="dialog-zapier-service-connect.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7680:function(e,t,a){var S=a(0);var q=a(24).t;var _=a(515);var C=a(149);YUI.add("squarespace-dialog-item-push",function(b){var y="tumblr";b.namespace("Squarespace.DialogFields").ItemPush=b.Base.create("itemPushDialogField",b.Squarespace.DialogField2,[],{initializer:function(e){this._widgets=[];this.isEmpty=true;b.Lang.isValue(this.get("dialog"))||this.show(true)},destructor:function(){b.Array.each(this._widgets,function(e){b.Object.each(e,function(e,t){b.Lang.isValue(e)&&e.destroy()})})},_isPushable:function(e){return b.Squarespace.ConnectedAccountCapabilities.can(e,b.Squarespace.ConnectedAccountCapabilities.PUSH)},_addEmptyMessage:function(){var e=['<div class="instructions">',"<p>",q("You do not have any accounts connected to your site configured for pushing content. Press the button below to connect an account."),"<p>","<p>",'<div class="add-account">',"<a>",q("Connect Account"),"</a>","</div>","<p>","</div>"].join("");var t='<div class="instructions"><p>'+q("You do not have any accounts connected to your site configured for pushing content. Go to your site management page to add an account.")+"</p></div>";var a=this.get("contentBox");if(Static.IN_BACKEND){a.append(e);a.one(".add-account").on("click",this._onAddAccountClick,this)}else a.append(t)},_onAddAccountClick:function(){new b.Squarespace.Widgets.Confirmation({showOverlay:true,"strings.title":q("Add Account"),"strings.message":q("All unsaved changes to this item will be lost. Are you sure you want to leave?")}).on("confirm",function(){b.Lang.isValue(this.get("dialog"))&&(this.get("dialog").params.discardChangesConfirmation=false);this._guideToConnectedAccounts()},this)},_guideToConnectedAccounts:function(){b.Squarespace.Singletons.Location.go("/settings/connected-accounts");b.Lang.isValue(this.get("dialog"))&&this.get("dialog").close()},show:function(){if(this._shownOnce)return;this._shownOnce=true;var e=this.get("models").filter(this._isPushable);e.length&&b.Array.each(e,this._renderAccount,this);this.isEmpty&&this._addEmptyMessage()},bindUI:function(){this.get("contentBox").delegate("click",this._hidePushedMessage,".already-pushed-msg",this)},_hidePushedMessage:function(e){var t=e.target.ancestor(".account",true);var a=t.one(".sqs-toggle-button");var i=b.Widget.getByNode(a);i&&i.set("active",true);t.removeClass("pushed")},_renderAccount:function(t){var e=t.get("pushEnabled");var a=t.get("pushAvailable");if(!e||!a)return;if(t.get("serviceName")===y&&this.get("recordType")===C.IMAGE)return;this.isEmpty=false;var i=this.get("contentBox");var n=i.appendChild('<div class="account"></div>');var s=t.get("hash");var r=this.get("pushedServices")[s];var o=this.get("pendingPushedServices")[s];var l=b.Array.some(this._initialData,function(e){return e.connectedAccountId===t.get("id")&&e.pushEnabled})&&!r&&!(this.get("published")&&o);var c=new b.Squarespace.Widgets.ConnectedAccount({model:t,editable:false});c.render(n);var d=new b.Squarespace.Widgets.ToggleButton;d.after("activeChange",function(){this.fire("edited");t.get("serviceName")!==y&&n.toggleClass("pushing",d.get("active"))},this);d.render(n);if(this.get("published")&&o){n.addClass("pushed").addClass("pushing");n.one(".sqs-toggle-button").insert('<div class="pending-push-msg"><div class="title">'+q("Content Push Pending")+'</div><div class="msg">This content is being sent to <span class="service-name">'+t.get("serviceName")+"</span>.</div></div>","after")}else if(r){n.addClass("pushed").addClass("pushing");n.one(".sqs-toggle-button").insert('<div class="already-pushed-msg"><div class="title">'+q("Content Already Pushed")+'</div><div class="msg">'+q('This content has already been sent to <span class="service-name">{serviceName}</span>. Click to re-send.',{serviceName:t.get("serviceName")})+"</div></div>","after")}d.set("active",l);var u=null;if(t.get("serviceName")===y)n.appendChild('<div class="desc">'+q("Content will be pushed to Tumblr in its entirety. No post format is needed.")+"</div>");else{var g=n.appendChild('<div class="format" type="text" spellcheck="false"><div class="structured-input"></div></div>');var p=b.Array.find(this._initialData,function(e){return e.connectedAccountId===t.get("id")});var h=b.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]);var f=b.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]);var m=this.get("contentBox").one(".structured-input").getDOMNode().offsetWidth;var v=function(e){var t={overflowWrap:"break-word",display:"inline-block",maxWidth:m,paddingBottom:_.GRID_PX/2};return S.createElement("span",{style:t},e)};u=new b.Squarespace.DialogFields.StructuredInput({exampleTemplate:v,name:"defaultPushMessage",placeholder:"%t %u",variables:{"%t":{title:q("Title"),description:q("The title of this post."),exampleText:q("New Post Title")},"%a":{title:q("Author"),description:q("The author of this post."),exampleText:f},"%u":{title:q("URL"),description:q("The URL to this post."),exampleText:h+"/blog-post"}},data:p?p.message:t.get("defaultPushMessage"),render:g.one(".structured-input")})}this._widgets.push({account:c,toggle:d,format:u})}},{CSS_PREFIX:"sqs-dialog-item-push",ATTRS:{data:{getter:function(){if(!this._shownOnce)return this._initialData||[];return b.Array.map(this._widgets,function(e){var t=e.account.get("model");return{message:e.format&&e.format.get("data"),connectedAccountId:t.get("id"),pushEnabled:e.toggle.get("active")}})}},pushedServices:{value:{}},pendingPushedServices:{value:{}},models:{valueFn:function(){return new b.Squarespace.Models.ConnectedAccounts}},published:{value:false},recordType:{value:null}}})},"1.0",{requires:["base","squarespace-connected-account-capabilities","squarespace-connected-account-widget","squarespace-dialog-field-2","squarespace-models-connected-accounts","squarespace-singletons-location","squarespace-dialog-structured-input","squarespace-toggle","squarespace-widgets-confirmation"]})},7681:function(e,t){YUI.add("squarespace-connected-account-capabilities",function(i){var e=i.namespace("Squarespace.ConnectedAccountCapabilities");var t=e.PULL=1;var a=e.PUSH=2;var n=e.ICON=4;var s=e.NONE=0;var r={applepodcast:n,bandsintown:n,behance:n,chownow:n,codepen:n,dribbble:n,dropbox2017:s,dropbox:s,email:n,facebook:n|a,fivehundredpix:n|t,flickr:t|n,foursquare:n|t,github:n,goodreads:n,google:n,googleplay:n,googlesearchconsole:s,houzz:n,imdb:n,instagram:n|t,itunes:n,linkedin:n|a,medium:n,meetup:n,pinterest:n|a,rdio:n,reddit:n,smugmug:n,snapchat:n,soundcloud:n,spotify:n,stitcher:n,stumbleupon:n,thedots:n,tidal:n,tripadvisor:n,tumblr:n|a,twitch:n,twitter:t|a|n,vevo:n,vimeo:n,vine:n,vsco:n,yelp:n,youtube:n};e.can=function(e,t){var a=r[e.get("serviceName")];if(!i.Lang.isValue(a))return false;return a&t};e.get=function(e){return r[e.get("serviceName")]}},"1.0",{requires:[]})},7682:function(e,t,a){var n=a(24).t;var s=a(2367);var r=a(213);YUI.add("squarespace-connected-account-widget",function(i){i.Handlebars.registerHelper("serviceNameForDisplay",function(e){return i.Squarespace.ConnectedAccountConfigs[e.serviceName].displayName});i.Handlebars.registerHelper("screenNameForDisplay",function(e){var t=e.serviceName;if("tumblr"===t){if(e.metaData&&e.metaData.primaryBlog){var a=i.Array.find(e.metaData.blogs,function(e){return e.primary});if(a)return e.screenname+" ("+a.title+")"}}else if(e.serviceId===i.Squarespace.ExternalServiceProviders.CHOWNOW)return"Company ID: "+e.screenname;if(!e.screenname&&e.title)return e.title;return e.screenname});i.namespace("Squarespace.Widgets").ConnectedAccount=i.Base.create("connectedAccountWidget",i.Widget,[i.WidgetChild],{initializer:function(){this._editor=i.Squarespace.ConnectedAccountEditors.create(this.get("model"));this._bindEditorEvents(this._editor);this.publish("reauthenticate",{emitFacade:true});this.publish("account-removed")},destructor:function(){this._editor.destroy();this._modelChangeHandle&&this._modelChangeHandle.detach()},_bindEditorEvents:function(e){var t=e.get("dialog");t.on("button-reset",this._resetSubscription,this);t.on("remove-requested",this._remove,this)},_remove:function(){var e=this.get("model").get("serviceName");r("interface_click",{identifier:"connected-account-disconnect",serviceName:e});var t=new i.Squarespace.Widgets.Confirmation({"strings.title":n("Disconnect Account"),"strings.message":n("Are you sure you want to disconnect this account?")});t.on("cancel",function(){r("interface_click",{identifier:"connected-account-disconnect-cancel",serviceName:e})});t.on("confirm",function(){r("interface_click",{identifier:"connected-account-disconnect-confirm",serviceName:e});this.get("model").destroy({remove:true},i.bind(function(e){if(!e){s.refreshConnectedAccounts();this.fire("account-removed");this.destroy()}},this))},this)},_resetSubscription:function(){this.get("model").resetSubscription();new i.Squarespace.Widgets.Information({"strings.title":n("Account Reset"),"strings.message":n("Your connected account has been reset. Social blocks are being populated with the latest activity. This may take a few minutes.")})},bindUI:function(){var e=this.get("model");e&&(this._modelChangeHandle=e.after("change",this.syncUI,this));this.get("boundingBox").on("click",function(){this.get("editable")&&this._edit()},this);this.get("contentBox").delegate("click",this._reauthenticate,".reauthenticate",this)},syncUI:function(){this.get("contentBox").setContent(i.Squarespace.UITemplates.renderAsNodeOrDocFrag("connected-account.html",this.get("model").getAttrs()))},_reauthenticate:function(e){e.halt();this.fire("reauthenticate")},_edit:function(){var e=this.get("model");var t="pinterest"===e.get("serviceName");var a=null===e.get("metaData");t&&a?this._showPinterestPitchDialog(e.get("id")):this.showEditor()},_showPinterestPitchDialog:function(t){var a=new i.Squarespace.EditingDialog({width:400,title:n("Connect to Pinterest"),fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:n("By connecting your Pinterest account to your website, you will verify for Pinterest that you own it and receive access to Pinterest Analytics where you can see what people Pin from your website.")}},{ctor:i.Squarespace.Widgets.Button,config:{"strings.text":n("Connect"),onClick:function(){a.close();var e=new i.Squarespace.SocialAuthenticator;e._startOAuth("pinterest",t);e.after("account-added",function(){this.showEditor()},this)},context:this}}],buttons:[{title:n("Close"),type:"cancel"}]});a.on("close",this.showEditor,this);a.show()},showEditor:function(){this._editor.show()}},{CSS_PREFIX:"sqs-connected-account",ATTRS:{model:{},editable:{value:true,validator:i.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-connected-account-configs","squarespace-connected-account-editors","squarespace-connected-account-template","squarespace-dialog","squarespace-models-connected-accounts","squarespace-social-authenticator","squarespace-ui-templates","squarespace-widgets-confirmation","squarespace-widgets-information","widget","widget-child"]})},7683:function(e,t,a){var i=a(24).t;YUI.add("squarespace-connected-account-configs",function(e){e.namespace("Squarespace").ConnectedAccountConfigs={applepodcast:{displayName:i("Apple Podcasts"),icon:"applepodcast"},bandsintown:{displayName:i("Bandsintown"),icon:"bandsintown"},behance:{displayName:i("Behance"),icon:"behance"},chownow:{displayName:i("ChowNow"),icon:"chownow"},codepen:{displayName:i("CodePen"),icon:"codepen"},dribbble:{displayName:i("Dribbble"),icon:"dribbble"},dropbox:{displayName:i("Dropbox"),icon:"dropbox"},dropbox2017:{displayName:i("Dropbox"),icon:"dropbox2017"},email:{displayName:i("Email"),icon:"email"},facebook:{displayName:i("Facebook"),icon:"facebook"},fivehundredpix:{displayName:i("500px"),icon:"fivehundredpix"},flickr:{displayName:i("Flickr"),icon:"flickr"},foursquare:{displayName:i("Foursquare Swarm"),icon:"foursquare"},github:{displayName:i("GitHub"),icon:"github"},goodreads:{displayName:i("Goodreads"),icon:"goodreads"},googleplay:{displayName:i("Google Play"),icon:"googleplay"},googlesearchconsole:{displayName:i("Google Search Console"),icon:"googlesearchconsole"},houzz:{displayName:i("Houzz"),icon:"houzz"},imdb:{displayName:i("IMDb"),icon:"imdb"},instagram:{displayName:i("Instagram"),icon:"instagram"},itunes:{displayName:i("iTunes Store"),icon:"itunes"},linkedin:{displayName:i("LinkedIn"),icon:"linkedin"},medium:{displayName:i("Medium"),icon:"medium"},meetup:{displayName:i("Meetup"),icon:"meetup"},pinterest:{displayName:i("Pinterest"),icon:"pinterest"},rdio:{displayName:i("Rdio"),icon:"rdio"},reddit:{displayName:i("Reddit"),icon:"reddit"},smugmug:{displayName:i("SmugMug"),icon:"smugmug"},snapchat:{displayName:i("Snapchat"),icon:"snapchat"},soundcloud:{displayName:i("SoundCloud"),icon:"soundcloud"},spotify:{displayName:i("Spotify"),icon:"spotify"},stitcher:{displayName:i("Stitcher"),icon:"stitcher"},stumbleupon:{displayName:i("StumbleUpon"),icon:"stumbleupon"},thedots:{displayName:i("The Dots"),icon:"thedots"},tidal:{displayName:i("TIDAL"),icon:"tidal"},tripadvisor:{displayName:i("TripAdvisor"),icon:"tripadvisor"},tumblr:{displayName:i("Tumblr"),icon:"tumblr"},twitch:{displayName:i("Twitch"),icon:"twitch"},twitter:{displayName:i("Twitter"),icon:"twitter"},vevo:{displayName:i("Vevo"),icon:"vevo"},vimeo:{displayName:i("Vimeo"),icon:"vimeo"},vine:{displayName:i("Vine"),icon:"vine"},vsco:{displayName:i("VSCO"),icon:"vsco"},yelp:{displayName:i("Yelp"),icon:"yelp"},youtube:{displayName:i("YouTube"),icon:"youtube"}}},"1.0",{requires:[]})},7684:function(e,t){YUI.add("squarespace-connected-account-editors",function(i){var n={tumblr:i.Squarespace.TumblrAccountEditor};i.namespace("Squarespace").ConnectedAccountEditors={create:function(e){var t=e.get("serviceName");var a=n[t];a=a||i.Squarespace.ModelEditorDialog;return new a({model:e,dialogConfigContext:i.Squarespace.ConnectedAccountDialogSettingsContext,dialogConfig:i.Squarespace.ConnectedAccountDialogSettings.get(t)})}}},"1.0",{requires:["squarespace-connected-account-dialog-settings","squarespace-model-editor","squarespace-tumblr-connected-account-editor"]})},7685:function(e,t,a){var q=a(24).t;var _=a(207);var C="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral";YUI.add("squarespace-connected-account-dialog-settings",function(d){d.namespace("Squarespace");var e=d.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]);var t=d.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]);var a=d.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]);var i=d.Squarespace.ConnectedAccountCapabilities;var n=function(e){return i.can(e,i.PULL)};var s={pushToggle:{title:q("Show Push Option"),description:q("When posting on Squarespace, show this account as a cross-publishing option.")},pullToggle:{title:q("Download Data"),description:q("When new items are posted to this account, download them to Squarespace for publishing on your site.")},iconToggle:{title:q("Show Social Icon"),description:q("Most templates have built-in social icons, but you can also display icons anywhere on your site using the Social Links Block.")},tumblrMetaData:{title:q("Primary Blog"),description:q("Select the blog content will be pushed to.")},profileUrl:{title:q("Profile URL"),description:q("Enter the URL to your profile. Social icons on the site will link to this."),placeholder:q("http://…")}};var r={ctor:d.Squarespace.DialogFields.StructuredInput,config:{name:"defaultPushMessage","strings.title":q("Default Posting Format"),"strings.description":q("When posting to this service from Squarespace, this will be the default message format used."),placeholder:"%t %u",value:q("New post %t from %a."),variables:{"%t":{title:q("Title"),description:q("The title of this post."),exampleText:q("New Post Title")},"%a":{title:q("Author"),description:q("The author of this post."),exampleText:t},"%u":{title:q("URL"),description:q("The URL to this post."),exampleText:a+"/blog-post"}}}};var o=function(e,t){t.get("dialog").fire("remove-requested")};var l={ctor:d.Squarespace.DialogFields.Button,config:{"strings.text":q("Disconnect"),onClick:o,id:"connectedAccountsDialogDisconnectButton"}};var c=function(t){return function(e){return e.get("serviceName")!==t}};var u=function(e){return"facebook"!==e.get("serviceName")||e.get("metaData")&&(e.get("metaData.isPageAccount")||e.get("metaData.managedPages").length)};var g={$valueFn:function(e){return r},$when:function(e){return c("tumblr")(e)&&u(e)}};var p={$value:{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.pushToggle.title,"strings.description":s.pushToggle.description,name:"pushEnabled"}},$when:u};var h={};h[i.NONE]=[];h[i.PULL|i.PUSH|i.ICON]=[{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.iconToggle.title,"strings.description":s.iconToggle.description,name:"iconEnabled"}},{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.pullToggle.title,"strings.description":s.pullToggle.description,name:"pullEnabled"}},p,g,{ctor:d.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":s.profileUrl.title,"strings.description":s.profileUrl.description,"strings.placeholder":s.profileUrl.placeholder,submitOnEnter:true}},l];h[i.PULL|i.ICON]=[{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.iconToggle.title,"strings.description":s.iconToggle.description,name:"iconEnabled"}},{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.pullToggle.title,"strings.description":s.pullToggle.description,name:"pullEnabled"}},{ctor:d.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":s.profileUrl.title,"strings.description":s.profileUrl.description,"strings.placeholder":s.profileUrl.placeholder,submitOnEnter:true}},l];h[i.ICON]=[{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.iconToggle.title,"strings.description":s.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:d.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":s.profileUrl.title,"strings.description":s.profileUrl.description,"strings.placeholder":s.profileUrl.placeholder,description:"",submitOnEnter:true}},$when:c("email")},l];h[i.ICON|i.PUSH]=[{ctor:d.Squarespace.DialogFields.Check,config:{"strings.title":s.iconToggle.title,"strings.description":s.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:d.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":s.profileUrl.title,"strings.description":s.profileUrl.description,"strings.placeholder":s.profileUrl.placeholder,submitOnEnter:true}},$when:c("tumblr")},p,g,l];d.Squarespace.ConnectedAccountDialogSettingsContext={buttons:[{type:"cancel",title:q("Cancel")},{type:"remove",title:q("Disconnect")},{$value:{type:"reset",title:q("Reset Data")},$when:n},{type:"saveAndClose",title:q("Save")}]};var f=function(e){return d.clone(h[d.Squarespace.ConnectedAccountCapabilities.get(e)])};var m=function(e){var t=e.get("serviceName");return q("{typeName} Settings",{typeName:d.Squarespace.ConnectedAccountConfigs[t].displayName})};var v={style:"flyout",flyoutPointerDirection:"centered",verticalHeight:"fit",overlay:.5,name:"social-account-settings",closeOthers:false,width:600,tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:m},fields:{$valueFn:f}}],buttons:{$include:"buttons"}};var b=function(e,t){var a=d.clone(v);a.tabs[0].fields=t;return a};var y=function(e){var t=e.get("metaData.managedPages");return{ctor:d.Squarespace.DialogFields.FacebookMetaData,name:"metaData",config:{pages:d.Array.map(t,function(e){return{label:e.name,value:e.id}})}}};var S={pinterest:d.merge(v,{width:600,tabs:[{scroll:true,title:{$valueFn:m},fields:{$valueFn:function(e){var t=f(e);var a=true;if(!a)return t;var i=e.get("metaData");var n=false;var s=false;var r=false;var o=false;var l=false;if(d.Lang.isObject(i))switch(i.domainVerificationStatus){case d.Squarespace.PinterestDomainVerificationState.FAILED:case d.Squarespace.PinterestDomainVerificationState.PROCESSED:n=true;break;case d.Squarespace.PinterestDomainVerificationState.USER_PROFILE_CONFIG_PROBLEM:r=true;break;case d.Squarespace.PinterestDomainVerificationState.NONE:case d.Squarespace.PinterestDomainVerificationState.PENDING:s=true;break;case d.Squarespace.PinterestDomainVerificationState.SUCCEEDED:o=true;break}else{l=true;n=true}if(!l){var c=d.Array.map(i.boardConnections,function(e){return{label:q("{sub1} (Board)",{sub1:e.name}),value:e.id}});t.splice(t.length-1,0,{ctor:d.Squarespace.DialogFields.PinterestMetaData,config:{name:"metaData",boards:c,required:true}})}n?t.splice(t.length-1,0,{ctor:d.Squarespace.DialogFields.Description,config:{padding:[15,0],title:q("Reconnect account"),text:q("Please reconnect your Pinterest account to enable Pinterest Analytics for your website.")}}):r?t.unshift({ctor:d.Squarespace.DialogFields.Error,config:{padding:[15,0],text:q("<b>Verification of your website's domain with Pinterest failed.</b> Please ensure the website you have configured in your Pinterest profile matches your Squarespace website's domain. Reconnect your Pinterest account to attempt verification again.")}}):s?t.splice(t.length-1,0,{ctor:d.Squarespace.DialogFields.Description,config:{padding:[15,0],text:q("Your website is being verified by Pinterest to enable Pinterest Analytics for your website. Please check back later.")}}):o&&t.splice(t.length-1,0,{ctor:d.Squarespace.DialogFields.Description,config:{padding:[15,0],title:q("Pinterest Analytics Activated"),text:q('You can now see what people are Pinning from your site. Visit <a href="https://analytics.pinterest.com/domain" target="_blank">Pinterest Analytics</a>.')}});return t}}}]}),googlesearchconsole:d.merge(v,{width:600,tabs:[{scroll:true,title:{$valueFn:m},fields:[{$valueFn:function(e){return f(e)[0]}},{ctor:d.Squarespace.DialogFields.Description,config:{text:q('<a href="https://www.google.com/webmasters/tools/home" target="_blank">Google Search Console</a> is an integration with Google that helps you monitor and maintain your site\'s presence in Google Search results.')}},{ctor:d.Squarespace.DialogFields.Description,config:{text:q("By disconnecting, you will no longer receive Google Search Console data within the Analytics panel.")}},l]}]}),facebook:d.merge(v,{width:600,tabs:[{scroll:true,icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:m},fields:{$valueFn:function(e){var t=f(e);u(e)?t.splice(t.length-1,0,y(e)):t.splice(t.length-1,0,{ctor:d.Squarespace.DialogFields.Description,config:{padding:[15,0],title:q("Reconnect to Enable Push Targets"),text:q('If you have a Facebook Page, please reconnect your Facebook account to enable pushing to your account. <a href="{helpLink}" target="_blank">Learn more.</a>',{helpLink:_.FACEBOOK_PUSH})}});return t}}}]}),tumblr:d.merge(v,{tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:m},fields:[{$valueFn:function(e){return f(e)[0]}},{$value:{ctor:d.Squarespace.DialogFields.Description,config:{title:s.tumblrMetaData.title,text:s.tumblrMetaData.description,padding:[20,0]}},$when:function(e){return e.get("metaData")}},{$valueFn:function(e){var t=e.get("metaData");var a=t.blogs;var i=[];d.Array.each(a,function(e,t){i.push({value:e.name,label:e.title||e.name})},this);return{ctor:d.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"primaryBlog",options:i,width:.3}}},$when:function(e){return e.get("metaData")}},l]}]}),dropbox:d.merge(b(v,[{ctor:d.Squarespace.DialogFields.Description,config:{title:q("Dropbox Connection Activated"),text:q("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.")}},{ctor:d.Squarespace.DialogFields.Description,config:{title:q("Instructions"),text:q('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:e}),padding:[10,0]}},l]),{width:600}),dropbox2017:d.merge(b(v,[{ctor:d.Squarespace.DialogFields.Description,config:{title:q("Dropbox Connection Activated"),text:q("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.")}},{ctor:d.Squarespace.DialogFields.Description,config:{title:q("Instructions"),text:q('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:e}),padding:[10,0]}},l]),{width:600}),chownow:d.merge(b(v,[{ctor:d.Squarespace.DialogFields.Description,config:{text:q('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don’t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:C,chowNowHelpLink:_.CHOWNOW})}},{ctor:d.Squarespace.DialogFields.Text,config:{name:"userName",title:q("ChowNow Company ID"),submitOnEnter:true}},{ctor:d.Squarespace.DialogFields.Check,config:{name:"iconEnabled","strings.title":s.iconToggle.title,"strings.description":s.iconToggle.description}},l]),{width:600})};d.Squarespace.ConnectedAccountDialogSettings={get:function(e){return d.clone(S[e]||v)}}},"1.0",{requires:["squarespace-connected-account-capabilities","squarespace-connected-account-configs","squarespace-dialog-description","squarespace-dialog-error","squarespace-dialog-facebook-meta-data","squarespace-dialog-fields","squarespace-dialog-pinterest-meta-data","squarespace-dialog-select","squarespace-dialog-structured-input"]})},7686:function(e,t){YUI.add("squarespace-dialog-error",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.Error=i.Squarespace.DialogFields.ErrorField=i.Base.create("ErrorField",i.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-error");i.Lang.isArray(e)&&e.length>0&&this._descEl.setStyles({paddingTop:e[0],paddingBottom:e[1]});this._attachNode("text")},bindUI:function(){t.superclass.bindUI.call(this);this.after(["textChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("text")},_attachNode:function(e){var t=this.get(e);if(i.Lang.isString(t)&&t.length>0){var a=i.Node.create('<div class="'+e+'">'+t+"</div>");this._descEl.append(a)}},_getAsString:function(e){if(!i.Lang.isValue(e))return"";return e+""},setText:function(e){this.set("text",e)}},{CSS_PREFIX:"sqs-error",TEMPLATE:'<div class="custom-field-error"></div>',ATTRS:{text:{value:"",getter:this._getAsString},className:{value:"",validator:i.Lang.isString},padding:{value:[],validator:i.Lang.isArray},focusable:{value:false}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},7687:function(e,t,a){var n=a(24).t;YUI.add("squarespace-dialog-facebook-meta-data",function(i){i.namespace("Squarespace.DialogFields").FacebookMetaData=i.Base.create("fbMetaData",i.Squarespace.DialogField2,[],{initializer:function(e){var t=e.data.isPageAccount;var a="";this._pageSelect=new i.Squarespace.DialogFields.Select({"strings.title":n("Push Target"),"strings.placeholder":n("None selected"),"strings.description":n("Select the page to which posts will be pushed. Posts will be published on behalf of the page."),name:"pages",options:t?[{label:n("This Page"),value:a}]:this.get("pages"),data:t?a:e.data.selectedPageId,className:"thin dark"});this.add(this._pageSelect)},bindUI:function(){this.on("dataChange",this.syncUI,this);var e=this.get("id");this._pageSelect.after(e+"|dataChange",function(e){var t=this.get("data");e.newVal?t.selectedPageId=e.newVal:delete t.selectedPageId;this.set("data",t)},this)},syncUI:function(){},didDataChange:function(){var e=this._initialData;var t=this.get("data");return e.selectedPageId!==t.selectedPageId}},{CSS_PREFIX:"sqs-facebook-metadata",ATTRS:{data:{value:{},setter:function(t){i.Array.each(t.managedPages,function(e){t.selectedPageId&&e.id===t.selectedPageId?e.selected=true:e.selected=false})}},pages:{}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-select"]})},7688:function(e,t,a){var n=a(24).t;YUI.add("squarespace-dialog-pinterest-meta-data",function(i){var t=i.namespace("Squarespace.DialogFields").PinterestMetaData=i.Base.create("pinterestMetaData",i.Squarespace.DialogField2,[],{initializer:function(e){var t=this.get("boards");var a=this.add({childType:i.Squarespace.DialogFields.Select,"strings.title":n("Push Target"),"strings.placeholder":n("Select Board"),"strings.description":n("Select the board to which Pins will be pushed. If you don't yet have a board you can create one on Pinterest and reconnect your account."),name:"boards",options:t,data:e.data.selectedBoardId,className:"thin dark"});this._pushTargetSelect=a.item(0);i.after(this._setupErrorFlyoutAnchor,this,"renderUI")},bindUI:function(){this.on("dataChange",this.syncUI);this.on("select:dataChange",function(e){var t=this.get("data");e.newVal?t.selectedBoardId=e.newVal:delete t.selectedBoardId;this.set("data",t)},this)},didDataChange:function(){var e=this._initialData;var t=this.get("data");return e.selectedBoardId!==t.selectedBoardId},_setupErrorFlyoutAnchor:function(){this._set("errorFlyoutAnchor",this._pushTargetSelect.get("boundingBox").one(".select-facade"))},showError:function(e){t.superclass.showError.call(this,n("Select a Pinterest board to push content to."))},isEmpty:function(){var e=this.get("data");return e.boardConnections.length>0&&!e.selectedBoardId}},{CSS_PREFIX:"sqs-pinterest-metadata",ATTRS:{data:{value:{},setter:function(t){i.Array.each(t.boardConnections,function(e){e.selected=e.id===t.selectedBoardId})}},boards:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-select"]})},7689:function(e,t,a){var i=a(0);var n=a(60);var s=a(6688);YUI.add("squarespace-dialog-structured-input",function(e){var t=e.namespace("Squarespace.DialogFields").StructuredInput=e.Base.create("structuredInputDialog",e.Squarespace.DialogField2,[e.WidgetParent],{onChange:function(e){this.set("data",e)},syncUI:function(){t.superclass.syncUI.call(this);n.render(i.createElement(s,{exampleTemplate:this.get("exampleTemplate"),onChange:this.onChange.bind(this),placeholder:this.get("placeholder"),value:this.get("data"),variables:this.get("variables")}),this.get("contentBox").getDOMNode())},destructor:function(){n.unmountComponentAtNode(this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-structured-input-field",ATTRS:{data:{value:""},variables:{},placeholder:"",exampleTemplate:function(){}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},7690:function(e,t){YUI.add("squarespace-tumblr-connected-account-editor",function(a){a.namespace("Squarespace").TumblrAccountEditor=a.Base.create("tumblrAccountEditor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(t){t.metaData.primaryBlog=t.primaryBlog;a.Array.each(t.metaData.blogs,function(e){e.primary=t.primaryBlog===e.name});return t},getDialogData:function(){var e=a.Squarespace.TumblrAccountEditor.superclass.getDialogData.call(this);e.primaryBlog=e.metaData.primaryBlog;return e}})},"1.0",{requires:["base","squarespace-model-editor"]})},7691:function(e,t){YUI.add("squarespace-connected-account-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["connected-account.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o,l,c="function",d=this.escapeExpression,u=this,g=n.helperMissing;function p(e,t){var a="",i;a+='\n    <div class="icon">\n      <img src="';if(i=n.iconUrl)i=i.call(e,{hash:{},data:t});else{i=e.iconUrl;i=typeof i===c?i.apply(e):i}a+=d(i)+'" />\n    </div>\n  ';return a}function h(e,t){var a="",i;a+='\n    <div class="icon default ';if(i=n.serviceName)i=i.call(e,{hash:{},data:t});else{i=e.serviceName;i=typeof i===c?i.apply(e):i}a+=d(i)+'"></div>\n  ';return a}function f(e,t){return'\n    <div class="unauthorized-message">\n      <strong>Unauthorized</strong> &mdash; Remove or <a class="reauthenticate">reauthenticate</a> this account for continued usage.\n    </div>\n  '}s+='<div class="';if(r=n.serviceName)r=r.call(t,{hash:{},data:i});else{r=t.serviceName;r=typeof r===c?r.apply(t):r}s+=d(r)+'">\n  ';r=n["if"].call(t,t.iconUrl,{hash:{},inverse:u.program(3,h,i),fn:u.program(1,p,i),data:i});(r||0===r)&&(s+=r);s+='\n  <div class="names">\n    <div class="user">';l={hash:{},data:i};s+=d((r=n.screenNameForDisplay||t.screenNameForDisplay,r?r.call(t,t,l):g.call(t,"screenNameForDisplay",t,l)))+'</div>\n    <div class="service ';if(o=n.serviceName)o=o.call(t,{hash:{},data:i});else{o=t.serviceName;o=typeof o===c?o.apply(t):o}s+=d(o)+'">';l={hash:{},data:i};s+=d((r=n.serviceNameForDisplay||t.serviceNameForDisplay,r?r.call(t,t,l):g.call(t,"serviceNameForDisplay",t,l)))+"</div>\n  </div>\n  ";o=n["if"].call(t,t.unauthorized,{hash:{},inverse:u.noop,fn:u.program(5,f,i),data:i});(o||0===o)&&(s+=o);s+="\n</div>";return s})})();var t="connected-account.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7692:function(e,t,a){var i=a(3054);var n=a(411);YUI.add("squarespace-models-connected-accounts",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.ConnectedAccounts=e.Base.create("ConnectedAccounts",e.ModelList,[e.Squarespace.ModelSync.REST,e.Squarespace.ModelListParse],{model:e.Squarespace.Models.ConnectedAccount},{loadFromStore:function(){return new e.Squarespace.Models.ConnectedAccounts({websiteId:n.getState().id,items:i.getState().connectedAccounts||[]})},ATTRS:{websiteId:{value:null}}})},"1.0",{requires:["base","model","model-list","squarespace-model-list-parse","squarespace-model-sync-rest","squarespace-models-connected-account","squarespace-util"]})},7693:function(e,t,a){var i=a(2367);YUI.add("squarespace-models-connected-account",function(e){e.namespace("Squarespace.Models");var t=e.Base.create("ConnectedAccount",e.Model,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.REST_API_ROOT+"social-accounts/{id}",root:e.Squarespace.REST_API_ROOT+"social-accounts",initializer:function(e){this.after("save",function(e){i.refreshConnectedAccounts()})},resetSubscription:function(){e.Data.post({url:"/api/config/ResetSocialAccountSubscription",data:{connectedAccountId:this.get("id")}},this)}},{ATTRS:{unauthorized:{getter:function(){return this.get("accountState")===e.Squarespace.AccountStates.UNAUTHORIZED}},hash:{readOnly:true,getter:function(){return this.get("serviceName").toLowerCase()+"-"+this.get("userId")}},userName:{validator:e.Lang.isString,value:null},accountState:{value:e.Squarespace.AccountStates.ACTIVE},websiteId:{value:null},profileUrl:{validator:e.Lang.isString,value:null},serviceId:{validator:e.Lang.isNumber},serviceName:{validator:e.Lang.isString},pullEnabled:{validator:e.Lang.isBoolean,value:false},pushEnabled:{validator:e.Lang.isBoolean,value:true},autoPushEnabled:{validator:e.Lang.isBoolean,value:false},iconEnabled:{validator:e.Lang.isBoolean},userId:{validator:e.Lang.isString},iconURL:{validator:e.Lang.isString},defaultPushMessage:{validator:e.Lang.isString},screenName:{validator:e.Lang.isString},collectionId:{validator:e.Lang.isString},metaData:{validator:e.Lang.isObject,value:null}}});e.Squarespace.Models.ConnectedAccount=t},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-util","squarespace-enum"]})},7694:function(e,t,a){var n=a(24).t;var r=a(1939);var o=a(2590);var i=a(207);var l=a(404);var c=a(2367);var s="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral";var d={};d[l.APPLEPODCAST]={name:n("Apple Podcasts"),description:""};d[l.BANDSINTOWN]={name:n("Bandsintown"),description:""};d[l.BEHANCE]={name:n("Behance"),description:""};d[l.CODEPEN]={name:n("CodePen"),description:""};d[l.MEDIUM]={name:n("Medium"),description:""};d[l.MEETUP]={name:n("Meetup"),description:""};d[l.RDIO]={name:n("Rdio"),description:""};d[l.TWITCH]={name:n("Twitch"),description:""};d[l.VEVO]={name:n("Vevo"),description:""};d[l.VINE]={name:n("Vine"),description:""};d[l.VSCO]={name:n("VSCO"),description:""};d[l.YELP]={name:n("Yelp"),description:""};d[l.HOUZZ]={name:n("Houzz"),description:""};d[l.REDDIT]={name:n("Reddit"),description:""};d[l.STUMBLEUPON]={name:n("StumbleUpon"),description:""};d[l.IMDB]={name:n("IMDb"),description:""};d[l.GOODREADS]={name:n("Goodreads"),description:""};d[l.STITCHER]={name:n("Stitcher"),description:""};d[l.THEDOTS]={name:n("The Dots"),description:""};d[l.TRIPADVISOR]={name:n("TripAdvisor"),description:""};d[l.TIDAL]={name:n("TIDAL"),description:""};d[l.DRIBBBLE]={name:n("Connect to Dribbble"),accountName:n("Dribbble Username"),description:n("Enter your Dribbble account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};d[l.SNAPCHAT]={name:n("Connect to Snapchat"),accountName:n("Snapchat Username"),description:n("Enter your Snapchat account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};d[l.PINTEREST]={name:n("Connect to Pinterest"),accountName:n("Pinterest Username"),description:n("Enter your Pinterest account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};d[l.SMUGMUG]={name:n("Connect to SmugMug"),accountName:n("SmugMug Nickname"),description:n("Enter your SmugMug account nickname to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};d[l.CHOWNOW]={name:n("Connect to ChowNow"),accountName:n("ChowNow Company ID"),description:n('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don’t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:s,chowNowHelpLink:i.CHOWNOW})};d[l.EMAIL]={name:n("Add Email"),accountName:n("Email Address"),description:n("Enter your Email Address to add it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};d[l.ITUNES]={name:n("iTunes Store"),description:n('Enter a URL to create an icon that links to the iTunes Store, App Store, iBooks Store, or Mac App Store. Find iTunes URLs with <a href="https://linkmaker.itunes.apple.com" target="_blank">Apple\'s Link Maker tool</a>.')};d[l.GOOGLEPLAY]={name:n("Google Play"),description:n('Copy and paste a URL from <a href="http://play.google.com" target="_blank">play.google.com</a> to create an icon that links to Google Play music, apps, books, magazines, movies, or TV shows. ')};YUI.add("squarespace-social-authenticator",function(s){var t=function(e){return{loadingText:n("Loading…"),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:false,tabs:[{title:e.name,icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:e.description,padding:[10,10]}},{ctor:s.Squarespace.DialogFields.Text,config:{"strings.title":e.accountName,name:"username",submitOnEnter:true,required:true}}]}],buttons:[{type:"cancel",title:n("Cancel")},{type:"saveAndClose",title:e.name}]}};var a=function(e){var t=[];e.description&&e.description.length>0&&t.push({ctor:s.Squarespace.DialogFields.Description,config:{text:e.description,padding:[10,10]}});t.push({ctor:s.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":n("{serviceName} URL",{serviceName:e.name}),"strings.placeholder":n("http://"),submitOnEnter:true,required:true}});t.push({ctor:s.Squarespace.DialogFields.Text,config:{"strings.title":n("Label"),data:e.name,name:"username",required:true}});return{loadingText:n("Loading…"),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:false,title:n("Create {serviceName} Link",{serviceName:e.name}),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:t,buttons:[{type:"cancel",title:n("Cancel")},{type:"saveAndClose",title:n("Add")}]}};var i=t(d[l.SMUGMUG]);s.Squarespace.SocialAuthenticator=s.Base.create("socialAuthenticator",s.Base,[],{initializer:function(){this.publish("account-added");this.publish("oauth-completed")},destructor:function(){if(this._connectedAccountEditor){this._connectedAccountEditor.destroy();this._connectedAccountEditor=null}},addAccount:function(){var t=new s.Squarespace.EditingDialog(this.accountPickerDialogConfig());t.show();var e=t.getField("caption-position");e.set("optionClickCb",function(e){t.cancel();this.addNewAccountDialog(e)}.bind(this))},addNewAccountDialog:function(e){switch(e){case"smugmug":var t=new s.Squarespace.EditingDialog(i);t.once("send-requested",function(){this._startOAuth(e,null,{nickname:t.getData().username});t.cancel()},this);t.show();break;case"twitter":case"instagram":this._startOAuth(e,null,{startSubscription:true});break;case"dribbble":case"email":case"itunes":case"googleplay":case"bandsintown":case"behance":case"codepen":case"medium":case"meetup":case"rdio":case"twitch":case"vevo":case"vine":case"vsco":case"yelp":case"houzz":case"reddit":case"stumbleupon":case"chownow":case"snapchat":case"imdb":case"goodreads":case"stitcher":case"tidal":case"applepodcast":case"thedots":case"tripadvisor":this._createNonOAuthAccount(e);break;default:this._startOAuth(e)}},_getDialogConfigForService:function(e){switch(e){case l.DRIBBBLE:case l.SNAPCHAT:case l.PINTEREST:case l.EMAIL:case l.CHOWNOW:return t(d[e]);case l.APPLEPODCAST:case l.BANDSINTOWN:case l.BEHANCE:case l.CODEPEN:case l.GOODREADS:case l.GOOGLEPLAY:case l.HOUZZ:case l.IMDB:case l.ITUNES:case l.MEDIUM:case l.MEETUP:case l.RDIO:case l.REDDIT:case l.STITCHER:case l.STUMBLEUPON:case l.THEDOTS:case l.TIDAL:case l.TRIPADVISOR:case l.TWITCH:case l.VEVO:case l.VINE:case l.VSCO:case l.YELP:return a(d[e])}return null},_createNonOAuthAccount:function(t){var e=l[t.toUpperCase()];if(this._isOnlyOneOfTypeAllowed(e)){var a=this._getExistingAccount(e);if(a){this._showEditorForExistingAccount(a);return}}var i=new s.Squarespace.EditingDialog(this._getDialogConfigForService(e));var n=function(){c.createNonOAuthAccount(e,t,i.getData()).then(function(e){i.close();this._refreshConnectedAccounts(e.account);s.Squarespace.Analytics.trackInternal("engagement_connected_account_add",{serviceName:t})}.bind(this))};i.once("send-requested",n,this);i.show()},_isOnlyOneOfTypeAllowed:function(e){for(var t in o)if(o[t]===e)return true;return false},_getExistingAccount:function(t){var e=s.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();return s.Array.find(e,function(e){return e.get("serviceId")===t})},_showEditorForExistingAccount:function(e){this._connectedAccountEditor=new s.Squarespace.Widgets.ConnectedAccount({model:e});this._connectedAccountEditor.showEditor()},_startOAuth:function(a,e,t){t=t||{};e&&(t.existingAccountId=e);r.authenticate({serviceProvider:a,urlParams:{authenticationType:"website"},customParameters:t}).then(function(e){var t=e.socialConfig;if(!t)return;this.fire("oauth-completed");this._refreshConnectedAccounts(t)}.bind(this)).catch(function(e){if(window.SQUARESPACE_SENTRY){var t="Issue with ExternalAuthentication: "+a;e&&e.data?window.SQUARESPACE_SENTRY.captureMessage(t+" "+e.data):window.SQUARESPACE_SENTRY.captureMessage(t)}})},reauthenticate:function(a,e){r.authenticate({serviceProvider:a,urlParams:{authenticationType:"website"},customParameters:e?{existingAccountId:e}:null}).then(function(){this.fire("oauth-completed")}.bind(this)).catch(function(e){if(window.SQUARESPACE_SENTRY){var t="Issue with ExternalAuthentication: "+a;e&&e.data?window.SQUARESPACE_SENTRY.captureMessage(t+" "+e.data):window.SQUARESPACE_SENTRY.captureMessage(t)}})},_refreshConnectedAccounts:function(a){c.refreshConnectedAccounts().then(function(){if(!a)return;var e=s.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var t=s.Array.find(e,function(e){return e.get("id")===a.externalAuthenticationId||e.get("id")===a.id});this.fire("account-added",{account:t})}.bind(this))},accountPickerDialogConfig:function(){var e=s.Array.map(this.get("accounts"),function(e){return{value:e,title:s.Squarespace.ConnectedAccountConfigs[e].displayName,icon:s.Squarespace.ConnectedAccountConfigs[e].icon}},this);return{loadingText:n("Loading…"),style:"flyout",width:700,overlay:.5,closeOthers:false,flyoutPointerDirection:"centered",verticalHeight:"fit",primaryTabs:[{title:n("Add Account"),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:s.Squarespace.DialogFields.MultiOption,config:{name:"caption-position",hideDisabled:true,defaultValue:"normal",className:"round square button icon32",iconDropPx:32,columns:6,options:e}}]}]}}},{ATTRS:{accountTypes:{value:[]},accounts:{value:["facebook","twitter","tumblr","dropbox2017","foursquare","instagram","flickr","youtube","vimeo","linkedin","dribbble","pinterest","smugmug","fivehundredpix","email","github","soundcloud","spotify","itunes","googleplay","bandsintown","behance","codepen","medium","meetup","rdio","twitch","vevo","vine","vsco","yelp","houzz","reddit","stumbleupon","chownow","snapchat","imdb","goodreads","stitcher","tidal"],validator:function(e){if(!s.Lang.isArray(e))return false;var t=s.Array.find(e,function(e){return!s.Object.hasKey(s.Squarespace.ConnectedAccountConfigs,e)});return null===t}}}})},"1.0",{requires:["array-extras","base","squarespace-connected-account-configs","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-models-connected-accounts"]})},7695:function(e,t){YUI.add("squarespace-dialog-layout",function(n){n.namespace("Squarespace.DialogFields");n.namespace("Squarespace.Block.Editor");var e=n.Squarespace.DialogFields.Layout=n.Base.create("Layout",n.Squarespace.DialogField2,[],{initializer:function(){this._didDataChange=false},destructor:function(){var e=this.get("editController");e.destroyLayoutEditor(this.getLayoutNode());e.destroyBlockTrashInstance();this._imageLoaderRefreshHandle&&this._imageLoaderRefreshHandle.detach();var t=n.Array.some(n.Squarespace.Block.Editor.OPEN_DIALOGS,function(e){return e.layout===this.get("contentBox")},this);while(t&&n.Squarespace.Block.Editor.OPEN_DIALOGS&&n.Squarespace.Block.Editor.OPEN_DIALOGS.length)n.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();if(this._ecb){this._ecb.destroy();this._ecb=null}},renderUI:function(){this.get("scroll")||this.get("contentBox").one(".sqs-layout-scroll").plug(n.Squarespace.Plugin.ScrollLock);this._nodeExpander=this.get("contentBox").one(".sqs-layout-wrapper").plug(n.Squarespace.Plugins.NodeExpander).NodeExpander},bindUI:function(){var e=this.get("dialog");var t=this.get("editController");if(n.Lang.isValue(e)){this.after("focusedChange",function(e){this._replugImageLoader();if(e.newVal){t.alignInsertPoints(this.getLayoutNode());t.updateInsertMarkerConstrainNode()}},this);this._bindExpanderEvents(e);e.on("ready",this._onReady,this)}this._registerEvent(this.get("contentBox").one(".add-block").on("click",function(e){this.get("editController").showBlockMenu({align:{node:e.target,points:[n.WidgetPositionAlign.BR,n.WidgetPositionAlign.BR]},layoutNode:this.getLayoutNode()});this.get("dialog").fire("button-click",{type:"add-block"})},this))},syncUI:function(){var e=this._getECB().get("layout");var t=this.get("editController");var a=t.getBlockTrashInstance().get("boundingBox");this.get("boundingBox").append(a);var i=this.get("id");e.detach(i+"|*");this._didDataChange=false;this._registerEvent(e.after(i+"|change",function(e){if(e.changed.rows&&"setInitialData"!==e.source){this._didDataChange=true;this.get("dialog").setEdited()}},this))},_bindExpanderEvents:function(t){var a=this.get("editController");var i="sqs-node-expander-active";if(n.Lang.isValue(t)){this._nodeExpander.on("expand-start",function(e){t.el.addClass(i);t.overlayEl.addClass(i)},this);this._nodeExpander.on("contract-end",function(e){t.el.removeClass(i);t.overlayEl.removeClass(i)},this)}this._nodeExpander.on(["expand-start","contract-start"],function(){a.disableInsertPoints()});this._nodeExpander.on(["contract-end","expand-end"],function(e){a.enableInsertPoints();a.updateInsertMarkerConstrainNode()},this);this._nodeExpander.on(["contract-end","expand-end","expand-resized"],function(e){a.alignInsertPoints()},this)},show:function(){e.superclass.show.apply(this,arguments);this._hasLayoutEditor()||this._pluginLayout()},didDataChange:function(){return this._didDataChange},_hasLayoutEditor:function(){return!!this.getLayoutNode()[n.SQS.LayoutEngine.Layout.Editor.NS]},getLayoutEditor:function(){return this.getLayoutNode()[n.SQS.LayoutEngine.Layout.Editor.NS]||null},getLayoutNode:function(){return this.get("contentBox").one(".sqs-layout")},_pluginLayout:function(){n.SQS.LayoutEngine.PageLayoutTools.sanitizeImportedECB(this._getECB());var t=this._getECB().get("layout");var e=this.get("dialog")?this.get("dialog").getInitialData():this.get("contentItem");var a=n.Object.getValue(e,"collectionId");var i=n.Object.getValue(e,"id");t.set("collectionId",a);t.set("contentItemId",i);i||this.get("contentItem").once("idChange",function(e){t.set("contentItemId",e.newVal)});this._syncLayoutBuilderAndEditor()},_syncLayoutBuilderAndEditor:function(){var e=this.getLayoutNode();var t=this._getECB().get("layout");var a=this.get("editController");a.destroyLayoutEditor(e);a.pluginLayoutEditor({layoutNode:e,layoutModel:t,scrollNode:e});if(!this._imageLoaderRefreshHandle){var i=n.SQS.LayoutEngine.Events;this._imageLoaderRefreshHandle=i.on("layout-engine:grid-cleaned",function(){n.Squarespace.ImageLoadManager.refreshAll()})}},createLoadingOverlay:function(){this._loadingOverlay=this.get("contentBox").plug(n.Squarespace.Plugins.LoadingOverlay,{spinnerConfig:{size:"extra-large",color:"dark"}}).loadingOverlay},hideLoadingOverlay:function(){this._loadingOverlay.set("visible",false)},_getECB:function(){n.Lang.isValue(this._ecb)||(this._ecb=new n.SQS.LayoutEngine.Models.EditableContentBlock);return this._ecb},_setData:function(e,t,a){if(e){this._getECB().setAttrs(e,a);this._hasLayoutEditor()&&this._syncLayoutBuilderAndEditor()}},_getData:function(e){if(!this.get("rendered"))return e;var t=this._ecb.toJSON();return t},_onReady:function(){var e=this.getLayoutNode();var t=this.get("editController");t.alignInsertPoints(e);t.setInsertMarkerLayout(e);n.Lang.isValue(this.get("dialog"))&&this._registerTimer(n.later(500,this,function(){t.updateInsertMarkerConstrainNode(this.get("dialog").zIndex+1)}))},_replugImageLoader:function(){this.get("contentBox").all("img").each(function(e){if(e.hasPlugin(n.Squarespace.Loader2.NS)){var t=e.getAttribute("src");if(!n.Lang.isValue(t)||0===t.length){e.unplug(n.Squarespace.Loader2);e.plug(n.Squarespace.Loader2)}}})},CONTENT_TEMPLATE:'<div><div class="sqs-layout-wrapper"><div class="sqs-layout-scroll"><div class="sqs-layout"></div></div><button class="add-block" tabindex="-1"></button></div></div>'},{CSS_PREFIX:"sqs-dialog-layout-wrapper",ATTRS:{data:{lazyAdd:false,setter:"_setData",getter:"_getData"},dialog:{getter:function(e){if(n.Object.isEmpty(e))return this.get("panel");return e}},editController:{getter:function(){return n.Squarespace.LayoutEngine.EditController.getInstance()}},contentItem:{value:null},panel:{value:null},scroll:{value:false}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-block-editor-dialog","squarespace-dialog","squarespace-dialog-field-2","squarespace-layout-engine-edit-controller","squarespace-image-loader","@sqs/layout-engine/layout-builder","@sqs/layout-engine/events","@sqs/layout-engine/models-layout","squarespace-plugin-loading-overlay","squarespace-plugin-node-expander","squarespace-plugin-scroll-lock","squarespace-util-authenticated","widget-position-align"]})},7696:function(e,t,a){var s=a(24).t;var r=a(1007);var o=a(1048);var l=a(895);var c=a(0);var d=a(60);var u=a(1004);var g=a(4156);var p=a(5961);var h=a(651);var f=a(1698);var m=a(4111);var v=a(1434);var b=a(2575);var y=a(6702);var S=a(87);var q=a(114);var _="tutorial-add-premium-block";var C="CMSV7Events";YUI.add("squarespace-block-editor-dialog",function(i){i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.OPEN_DIALOGS=[];var n=i.Squarespace.Block.Editor.Dialog=i.Base.create("block-editor-dialog",i.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){this.configDialog=this._initConfigDialog();this._bindDialogEvents()},destructor:function(){if(this.configDialog){this.configDialog.destroy();this.configDialog=null}this._model.detach(C+"|*:change")},_afterEditingChange:function(e){var t=this.get("host");if(e.newVal&&this.configDialog){var a=g.isBlockTypeFeatureGated(t.get("type"));var i=!u.isTutorialCompleted(_);a&&i?this._showPremiumConfirmationThenShowDialog():this._showDialog()}n.superclass._afterEditingChange.apply(this,arguments);t.hasPlugin("insertPoint")&&t.insertPoint.toggleInsertPointsDisabled(e.newVal)},_showDialog:function(){var e=this.get("host");this.configDialog.setAttrs({anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection")});this.configDialog.set("visible",true);var t=this.configDialog.get("dialog");if(g.renderMenu({node:t.bodyEl.getDOMNode(),blockType:e.get("type"),isEditing:true})){var a=t.bodyEl.getDOMNode();var i=a.querySelector(".sqs-featuregate-menu")||{};var n=i.clientHeight||0;t.bodyEl.setHeight(a.clientHeight+n)}},_showPremiumConfirmationThenShowDialog:function(){if(!this.confirmationModalContainer){this.confirmationModalContainer=document.createElement("div");document.body.appendChild(this.confirmationModalContainer)}var e=c.createElement(p,{isOpen:true,isTrial:h.isTrial(),onRequestClose:function(){u.markTutorialCompleted(_);d.unmountComponentAtNode(this.confirmationModalContainer);this.confirmationModalContainer.remove();this.confirmationModalContainer=null;this._showDialog()}.bind(this)});d.render(e,this.confirmationModalContainer)},_plugInsertPoint:function(){n.superclass._plugInsertPoint.call(this);this.get("host").insertPoint.toggleInsertPointsDisabled(this.get("editing"))},_getModelEditor:function(){console.error("No Model Editor configured for: "+this.get("blockName"))},_initConfigDialog:function(){var e=this._getModelEditor();if(!i.Lang.isValue(e))return null;var t=new e({id:"editorDialog",model:this._model,anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection"),zIndex:9e3});var a=i.merge(this.get("defaultEditorConfig"),t.get("dialogConfig"));t.set("dialogConfig",a);return t},_bindDialogEvents:function(){if(i.Lang.isNull(this.configDialog))return;var e=this.configDialog.get("dialog");e.on("shown",function(){this._bb.addClass("sqs-edit-dialog-open");while(i.Squarespace.Block.Editor.OPEN_DIALOGS.length)i.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();i.Squarespace.Block.Editor.OPEN_DIALOGS.push({dialog:e,layout:this.get("host").get("boundingBox").ancestor(".sqs-layout")});this.bindInstrumentation()},this);e.on("dismiss",this._onModelEditorDismiss,this);this.configDialog.on("nonSavingClose",function(){if(this.get("revertResizingOnCancel")){this._model.get("vSize")!==e.getData().vSize&&this._model.set("vSize",e.getData().vSize,{silent:true});this._model instanceof i.SQS.LayoutEngine.BlockModel.Image||this._model.get("aspectRatio")!==e.getData().aspectRatio&&this._model.set("aspectRatio",e.getData().aspectRatio)}},this);e.on("render-anchor",function e(t){this._updateModel(this.configDialog.sanitizeDialogData(t))},this);e.on("remove-requested",function(){new i.Squarespace.Widgets.Confirmation({"strings.title":s("Remove Block"),"strings.message":s("Are you sure you want to remove this block?"),className:"sqs-prevent-block-focus-change question",render:e.el&&e.el.ancestor("body")||true}).on("confirm",function(){e.close(e,true);this.fire("remove")},this)},this)},_onModelEditorDismiss:function(e){var a=this.configDialog.get("dialog");this._disableEditing();this._bb.removeClass("sqs-edit-dialog-open");i.Squarespace.Block.Editor.OPEN_DIALOGS=i.Array.filter(i.Squarespace.Block.Editor.OPEN_DIALOGS,function(e,t){return e.dialog!==a},this);this._model.detach(C+"|*:change")},bindInstrumentation:function(){this.keysQueued=[];this.keysSent=[];this.instrumentationBindingTimer=i.config.win.setTimeout(function(){this.instrumentationBindingTimer=null;this.instrumentModel()}.bind(this),1e3)},instrumentModel:function(){this._model.detach(C+"|*:change");this._model.after(C+"|*:change",function(e){if(this.get("host").get("isNewBlock"))return;this.queueFieldForInstrumentation(Object.keys(e.changed))},this)},queueFieldForInstrumentation:function(e){if(this.instrumentationTimer){i.config.win.clearTimeout(this.instrumentationTimer);this.instrumentationTimer=null}e.forEach(function(e){if(this.keysSent.includes(e))return;if(this.keysQueued.includes(e))return;this.keysQueued.push(e)}.bind(this));this.keysQueued.length>0&&(this.instrumentationTimer=i.config.win.setTimeout(function(){var t=this.get("host");var a=y.BlockTypeKeys[t.get("type")];var i=this._model.layout.get("collectionId");if(!i){var e=f.getState().collectionId;e&&(i=e)}this.keysQueued.forEach(function(e){b.editBlockField({blockId:t.get("id"),blockType:a,fieldName:e,collectionId:i});this.keysSent.push(e)}.bind(this));this.keysQueued=[]}.bind(this),100))}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){return o(r(this.get("host").get("blockTypeName")))}},editing:{value:false},editingEvent:{valueFn:function(){return["dblclick"]}},editingButtons:{value:true},editingOverlay:{valueFn:function(){return i.Node.create('<div class="sqs-editing-overlay"></div>')}},dialogEditorAnchorNode:{getter:function(){if(q.isFeatureEnabled(S.MOBILE_PREVIEW_PAGE_EDITING)&&m.getState().view===v.PHONE)return i.one(i.config.win.top.document.body.querySelector("#sqs-site-frame"));return this.get("host").get("contentBox")}},dialogFlyoutPointerDirection:{getter:function(){if(q.isFeatureEnabled(S.MOBILE_PREVIEW_PAGE_EDITING)&&m.getState().view===v.PHONE)return"left";return null}},revertResizingOnCancel:{value:true},defaultEditingMode:{value:true},defaultEditorConfig:{valueFn:function(){var e=l(this.get("host").get("blockTypeName"));var t=[{title:s("Cancel"),type:"cancel"},{title:s("Apply"),type:"saveAndClose"}];return{name:"editor-block-"+e.replace(/(^legacy\-|\-legacy$|\-v2$)/,""),buttons:t,closeOthers:false,style:"flyout",flyoutPointerDirection:"hidden",draggable:9!==i.UA.ie&&10!==i.UA.ie}}}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/block-image","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-model-image","squarespace-dialog","squarespace-model-editor","squarespace-widgets-confirmation"]})},7697:function(e,t,a){var i=a(24).t;var n=a(701);var s=a(5811);var l=a(6857);var c={designLayout:"design-layout",imagePosition:"image-position",combinationAnimation:"combination-animation",individualImageAnimation:"individual-animation",individualTextAnimation:"individual-text-animation"};YUI.add("@sqs/layout-engine/block-image",function(r){var a=["caption-hidden","caption-below","caption-overlay","caption-overlay-hover"];r.namespace("SQS.LayoutEngine.Block");r.SQS.LayoutEngine.Block.Image=r.Base.create("block-image",r.SQS.LayoutEngine.Block.ParentBase,[r.SQS.LayoutEngine.Mixins.EventRegistrar,r.SQS.LayoutEngine.Block.MixinAnimatedBlock],{initializer:function(){this._debug=false},renderUI:function(e){var t=this.get("model");this._renderEditableImage();this._renderEditableCaption();this._toggleValidCaptionOrientationClass();var a=this.get("contentBox");var i="design-layout-"+t.get("designLayout")+" image-position-"+t.get("imagePosition");a.addClass(i);a.setAttribute("data-scrolled",true);this._renderTitles();this._renderButton();var n=t.get("designLayout");n&&n.match(/poster|card|overlap|collage|stack/)?a.addClass("image-block-v2"):a.removeClass("image-block-v2")},_renderEditableImage:function(e){var t=r.Node.create("<div></div>");var a=this.get("contentBox");a.appendChild(t);this.contentImage=this.add({editor:this.get("imageContentEditor"),childType:this.get("imageContentWidget"),editable:this.get("editable"),model:this._getImageContentModelJSON(),render:t}).item(0);this.contentImage.set("editing",true);this.contentImage.addTarget(this)},_renderEditableCaption:function(e){this.contentCaption=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("description.html"),placeholderText:i("Write a caption here…"),type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentCaption.get("boundingBox").addClass("image-caption-wrapper sqs-image-caption");this.contentCaption.get("contentBox").addClass("image-caption");this.get("contentBox").addClass("image-block-outer-wrapper")},_toggleValidCaptionOrientationClass:function(){var t=this.get("contentBox");var e=this.get("editController").isMobileApp()?"caption-below":this.get("model").get("layout");r.Array.each(a,function(e){t.removeClass("layout-"+e)},this);t.addClass("layout-"+e)},_renderTitles:function(){this.cardWrapper=r.Node.create('<div class="image-card-wrapper sqs-image-card image-block-animation-text"></div>');this.card=r.Node.create('<div class="image-card sqs-dynamic-text-container"></div>');this.cardWrapper.appendChild(this.card);this.get("contentBox").appendChild(this.cardWrapper);this.contentTitle=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("title.html"),placeholderText:i("Write a title here…"),render:this.card,type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentTitle.get("boundingBox").addClass("image-title-wrapper");this.contentTitle.get("contentBox").addClass("image-title sqs-dynamic-text");this.contentSubtitle=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("subtitle.html"),placeholderText:i("Write a subtitle here…"),render:this.card,type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentSubtitle.get("boundingBox").addClass("image-subtitle-wrapper");this.contentSubtitle.get("contentBox").addClass("image-subtitle sqs-dynamic-text")},_renderButton:function(){var e=this.get("contentBox").one(".image-card");var t=this.get("model").get("buttonText");if(e&&!e.one(".image-button")){var a=t||this.get("addButtonText");var i=r.Node.create('<div class="image-button-wrapper"><div class="image-button sqs-dynamic-text"><div class="image-button-inner"><a href="">'+a+"</a></div></div></div>");e.appendChild(i);this._syncButtonVisibility()}},_syncButtonText:function(){var e=this.get("contentBox").one(".image-button a");var t=this.get("model").get("buttonText");e.setContent(t)},_syncButtonVisibility:function(){var e=this.get("contentBox").one(".image-button-wrapper");var t=this.get("model").get("imageLink");e&&"button"===t?e.setStyle("display","block"):e.setStyle("display","none")},_getImageContentModelJSON:function(){var e=this.get("model");var t=e.get("designLayout");var a;t&&!t.match(/inline|poster|stack/)||(a=e.get("aspectRatio"));var i={imageId:e.get("imageId"),aspectRatio:a,scale:e.get("scale"),collectionId:r.Lang.isValue(e.layout)?e.layout.get("collectionId"):null,stretch:e.get("stretch")};var n=e.get("vSize");r.Lang.isValue(n)&&(i.vSize=n);if(this.get("editController").isMobileApp()&&e.get("image")){i.baseAssetUrl=e.get("image.assetUrl");i.dimensions=e.get("image.originalSize");i.focalPoint=e.get("image.mediaFocalPoint")}return i},_getHTMLContentModelJSON:function(e){var t=this.get("model");return{html:t.get(e)||""}},bindUI:function(){var o=this.get("model");var a=this.contentImage.get("model");var e=this.contentCaption?this.contentCaption.get("model"):null;var t=this.contentTitle?this.contentTitle.get("model"):null;var i=this.contentSubtitle?this.contentSubtitle.get("model"):null;r.Array.each(["imageId","scale"],function(t){a.after(t+"Change",function(e){if(e.silent)return;this._debug&&console.log("[le/block/image] syncing to image block model "+t+"Change (prevVal: "+e.prevVal+") (newVal: "+e.newVal+")");o.set(t,e.newVal)},this)},this);a.on("aspectRatioChange",function(e){if(e.silent)return;this._debug&&console.log("[le/block/image] syncing `aspectRatio` to image block model (prevVal: %s) (newVal: %s)",e.prevVal,e.newVal);o.set("aspectRatio",e.newVal)},this);e&&e.after("htmlChange",function(e){o.set("description.html",e.newVal,{source:e.source})});this.after("editableChange",this.syncUI,this);var n=o.get("vSize");r.Lang.isValue(n)&&this._registerEvent(o.on("vSizeChange",function(e){a.set("vSize",e.newVal)},this));this._registerEvent(o.after("stretchChange",function(){a.set("stretch",o.get("stretch"));this._syncStretch()},this),a.after("dimensionsChange",function(){this._syncStretch()},this),o.after("layoutChange",function(){this._toggleValidCaptionOrientationClass()},this),o.after("filenameChange",function(e){a.setItemData({filename:e.newVal})}));t&&i&&this._registerEvent(t.after("htmlChange",function(e){o.set("title.html",e.newVal,{source:e.source})}),i.after("htmlChange",function(e){o.set("subtitle.html",e.newVal,{source:e.source})}));this._registerEvent(o.after("buttonTextChange",function(){this._syncButtonText()},this),o.after("imageLinkChange",function(){this._syncButtonVisibility();this._syncDynamicElements()},this));o.after(["designLayoutChange","imagePositionChange","combinationAnimationChange","individualTextAnimationChange","individualImageAnimationChange"],function e(t){var a=this.get("contentBox");var i=this._getImageContentModelJSON();var n=o.get("designLayout");this.contentImage.set("model",i);this.contentImage.get("model").setAttrs({designLayout:i.designLayout,aspectRatio:i.aspectRatio,imagePosition:i.imagePosition,combinationAnimation:i.combinationAnimation,individualImageAnimation:i.individualImageAnimation,individualTextAnimation:i.individualTextAnimation});n&&n.match(/poster|card|overlap|collage|stack/)?a.addClass("image-block-v2"):a.removeClass("image-block-v2");this.contentImage._adjustImage();this.updateAnimationClassname(t,c,a);var s="individualImageAnimation"===t.attrName||"individualTextAnimation"===t.attrName;if(s){var r=c.combinationAnimation+"-custom";a.addClass(r)}this.rerunAnimation(a)},this);var s=this.contentImage.get("boundingBox");this._registerEvent(s.delegate("click",this._onImageClick,"img",this));this._registerEvent(this.get("model").after("linkToChange",this._syncLinkTo,this));e&&this._updateInsertPointOnHeightChange();this._registerEvent(o.after("designLayoutChange",this._syncDynamicElements,this),r.SQS.LayoutEngine.Events.after("layout-engine:grid-cleaned",function(){r.later(1,this,this._syncDynamicElements)},this),r.Global.after("tweak:change",this._syncDynamicElements,this));this.contentCaption.on("blur",function(){var e=l(o.get("designLayout"),o.get("description.html"),o.get("filename")||a.get("filename"));var t=r.SQS.LayoutEngine.ContentItem.getCtor();new t({id:o.get("imageId"),altText:e}).save({fields:["altText"]})},this)},_updateInsertPointOnHeightChange:function(){var e=this.contentCaption.get("boundingBox");var t=e.getComputedStyle("transitionDuration");var a=r.Array.map(t.split(","),function(e){return 1e3*parseFloat(e,100)});var i=Math.max.apply(this,a);r.Lang.isNumber(i)&&i>0&&this.after("focusedChange",function(e){this.contentCaption.isEmpty()&&r.later(i,this,this.fire,"widget:contentUpdate")})},syncUI:function(){var e=this.get("model").get("layout");var t=!this.get("model").get("imageId")||!this.get("editable")&&("caption-hidden"===e||!this.contentCaption.get("model").get("html"));t?this.contentCaption.hide():this.contentCaption.show();this._syncLinkTo();this._syncStretch()},_syncStretch:function(){var e=this.contentCaption.get("boundingBox");if(!e.getDOMNode())return;if(this.get("model").get("stretch")){e.setStyle("maxWidth",null);return}var t=this.contentImage.get("model").get("dimensions");e.setStyle("maxWidth",t?t.width:null)},_onImageClick:function(){var e=this.get("model").get("linkTo");var t=this.get("model").get("newwindow");r.Lang.isString(e)&&e.length>0&&(t?window.open(e):window.top.location=e)},_syncLinkTo:function(){var e=this.contentImage.get("boundingBox").one("img");if(!r.Lang.isValue(e))return;var t=this.get("model").get("linkTo");r.Lang.isString(t)&&t.length>0?e.setStyle("cursor","pointer"):e.setStyle("cursor","auto")},_syncDynamicElements:function(){var e=this.get("contentBox");if(e.getDOMNode()){e.toggleClass("sqs-narrow-width",e.get("offsetWidth")<415);var t=e.one(".sqs-dynamic-text-container");t&&s(t.getDOMNode())}},destructor:function(){this.clearAnimationTimeout()}},{CSS_PREFIX:"sqs-block-image",MODEL:r.SQS.LayoutEngine.BlockModel.Image,ATTRS:{htmlContentEditor:{},htmlContentEditorType:{value:"simple"},defaultContentModel:{},imageContentWidget:{valueFn:function(){return r.SQS.LayoutEngine.BlockContent.Image}},stack:{},type:{value:n.IMAGE},addButtonText:{value:i("Add Button Text")}}})},"1.0",{requires:["base","model","widget-parent","@sqs/layout-engine/event-registrar","@sqs/layout-engine/block-model-image","@sqs/layout-engine/block-content-html","@sqs/layout-engine/block-content-image","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-animated-block"]})},7698:function(e,t,a){var i=a(114);var n=a(522);var s=a(87);var o=a(5804);var l=a(6857);var c=i.isFeatureEnabled(s.GLOBAL_ANIMATIONS)&&n.isSevenOne();YUI.add("@sqs/layout-engine/block-model-image",function(r){r.namespace("SQS.LayoutEngine.BlockModel");r.SQS.LayoutEngine.BlockModel.Image=r.Base.create("ImageBlockModel",r.Model,[],{initializer:function(){var e=this.get("description");e||this.set("description",{html:""});this._initializedImageId=this.get("imageId");this.on("imageIdChange",function(e){null!==e.newVal||this._isInitializedImageId(e.prevVal)||this._destroyImage(e.prevVal)});var t=this.get("title");t||this.set("title",{engine:"wysiwyg",source:"",html:""})},_isInitializedImageId:function(e){return this._initializedImageId===e},_destroyImage:function(e){var t=r.SQS.LayoutEngine.ContentItem.getCtor();new t({id:e}).destroy({remove:true})},sync:function(e,t,a){var i=r.SQS.LayoutEngine.ContentItem.getCtor();if("create"===e||"update"===e){var n=l(this.get("designLayout"),this.get("description.html"),this.get("filename"));new i({id:this.get("imageId"),filename:this.get("filename"),altText:n}).save({fields:["filename","altText"]})}if("delete"===e){var s=this.get("imageId");s&&!this._isInitializedImageId(s)&&this._destroyImage(s)}a()},toJSON:function(){return{imageId:this.get("imageId"),linkTo:this.get("linkTo"),newwindow:this.get("newwindow"),imageLink:this.get("imageLink"),buttonText:this.get("buttonText"),lightbox:this.get("lightbox"),lightboxTheme:this.get("lightboxTheme"),combinationAnimation:this.get("combinationAnimation"),individualImageAnimation:this.get("individualImageAnimation"),individualTextAnimation:this.get("individualTextAnimation"),vSize:this.get("vSize"),aspectRatio:this.get("aspectRatio"),layout:this.get("layout"),stretch:this.get("stretch"),description:this.get("description"),floatDir:this.get("floatDir"),hSize:this.get("hSize"),title:this.get("title"),subtitle:this.get("subtitle"),designLayout:this.get("designLayout"),imagePosition:this.get("imagePosition"),mapping:this.get("mapping")}}},{ATTRS:{layout:{value:"caption-below"},linkTo:{value:""},newwindow:{value:false},imageLink:{value:"none"},buttonText:{value:""},lightbox:{value:false},lightboxTheme:{value:"dark"},combinationAnimation:{valueFn:function(){return c?o.SITE_DEFAULT.value:o.NONE.value}},individualImageAnimation:{valueFn:function(){return c?o.SITE_DEFAULT.value:o.NONE.value}},individualTextAnimation:{valueFn:function(){return c?o.SITE_DEFAULT.value:o.NONE.value}},stretch:{value:false},filename:{value:null},mapping:{value:null},description:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},aspectRatio:{value:null},title:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},subtitle:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},designLayout:{value:"inline"},imagePosition:{value:"left"}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},7699:function(e,t){YUI.add("@sqs/layout-engine/content-item-content-item",function(t){t.namespace("SQS.LayoutEngine.ContentItem");t.SQS.LayoutEngine.ContentItem.getCtor=function(){var e=t.Object.getValue(t,"Squarespace.Models.ContentItem".split("."));return e||t.SQS.LayoutEngine.ContentItem.Reference}},"1.0",{requires:["@sqs/layout-engine/content-item-reference"]})},7700:function(e,t,a){var i=a(851);var s=a(149);var r=a(596);var o=a(3418);YUI.add("@sqs/layout-engine/content-item-reference",function(n){n.namespace("SQS.LayoutEngine.ContentItem");var a=n.SQS.LayoutEngine.ContentItem.Reference=n.Base.create("Item",n.Model,[n.SQS.LayoutEngine.ModelSync.REST],{root:"content-items",url:"content-items/{id}",initializer:function(e){this._needsJobListener&&this._bindJobListener();this._updateNextDisplayIndex();n.Do.after(function(){var e=this.get("collectionId");var t="/api/";n.Lang.isValue(e)&&(t+="content-collections/"+e+"/");t+=n.Do.currentRetVal;return new n.Do.AlterReturn("Adding prefix to url.",t)},this,"getURL",this)},destructor:function(){this._jobListener&&this._jobListener.detach()},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.structuredContent;n.Lang.isValue(t)&&(e.structuredContent=t.toJSON());e.items=[];return e},serialize:function(e){var t=this.toJSON();delete t.items;delete t.author;delete t.fullUrl;delete t.assetUrl;delete t.resolved;delete t.postItemInjectCode;delete t.promotedBlock;delete t.promotedBlockType;delete t.nextDisplayIndex;delete t.mediaIsUploading;delete t.hasFileData;delete t.isGlobalFakeContentItem;delete t.childrenGroups;return n.JSON.stringify(t)},save:function(e,t){this.isNew()||!(n.Lang.isObject(e)&&e.fields)?a.superclass.save.call(this,e,t):this._saveFields(e.fields,t)},autoSave:function(e,t){if(n.Lang.isFunction(e)){t=e;e={}}else n.Lang.isValue(e)||(e={});e.headers=n.merge(e.headers,{"X-AutoSave":true});this.save(e,t)},like:function(t){n.Data.post({url:this.getURL()+"/sentiment/like",success:function(e){n.Lang.isFunction(t)&&t(null,e)},failure:function(e){n.Lang.isFunction(t)&&t(e,null)}},this)},dislike:function(t){n.Data.post({url:this.getURL()+"/sentiment/dislike",success:function(e){n.Lang.isFunction(t)&&t(null,e)},failure:function(e){n.Lang.isFunction(t)&&t(e,null)}},this)},clearFileData:function(){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});n.Data.post({url:"/api/commondata/ClearEmbeddedAsset",data:{itemId:this.get("id")}})},clearChildGroup:function(e,t){n.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:e,itemId:this.get("id")},success:function(e){n.Lang.isFunction(t)&&t(null,e)},failure:function(e){n.Lang.isFunction(t)&&t(e,null)}})},getAssetUrlForFormat:function(e){return n.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:e})},getId:function(){return this.get("id")},_needsJobListener:function(){var e=this.get("mediaprocessingState");return e===i.QUEUED||e===i.PROCESSING},_bindJobListener:function(){if(!Static||!Static.JOB_MANAGER)return;this._jobListener=Static.JOB_MANAGER.on("completed",function(e){var t=this.get("id");var a=e.get("data.contentItemId");var i=e.get("data.globalContentItemId");if(a===t){this.load();this._jobListener.detach()}else if(n.Lang.isValue(i)&&i===t){n.Data.get({url:"/api/rest/global-content-items/"+i,success:function(e){this.set("assetUrl",e.assetUrl);this.setAttrs(e)}},this);this._jobListener.detach()}},this)},_updateNextDisplayIndex:function(){var e=0;this._set("nextDisplayIndex",e)},_saveFields:function(e,t){if(e.length>1)throw"Saving multiple fields is not currently supported.";var a=e[0];var i={field:a,itemId:this.get("id"),value:this.get(a)};n.Data.post({url:"/api/commondata/SaveItemField",data:n.merge({},i),success:function(e){n.Lang.isFunction(t)&&t(null,e.item)},failure:function(e){n.Lang.isFunction(t)&&t.call(e,null)}},this)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case s.EMBED:case s.VIDEO:return n.SQS.LayoutEngine.ContentItem.Embed;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var e=n.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);if(e)return e.id;return null}},proxyForId:{value:null},recordType:{value:s.TEXT,writeOnce:true},childType:{value:null},addedOn:{valueFn:function(){return(new Date).getTime()},writeOnce:"initOnly"},updatedOn:{value:null,writeOnce:"initOnly"},publishOn:{valueFn:function(){return(new Date).getTime()}},unsaved:{value:null},urlId:{value:null},title:{value:null},body:{value:null},excerpt:{value:null},displayIndex:{value:0},starred:{value:false},passthrough:{value:false},tags:{value:[]},categories:{value:[]},workflowState:{setter:function(e){return e},value:r.DRAFT},systemDataId:{value:null},systemDataVariants:{value:null},systemDataOrigin:{value:null},contentType:{value:null},filename:{value:null},dataSize:{value:null},sourceUrl:{value:null},mediaProcessingState:{value:null},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(e){if(n.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},colorData:{value:null},clickthroughUrl:{value:null},location:{value:null},customContent:{value:null},likeCount:{value:0},dislikeCount:{value:0},commentCount:{value:0},publicCommentCount:{value:0},commentState:{valueFn:function(){var e=n.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"]);var t=e.commentEnableByDefault;var a=e.commentsEnabled;if(t||a)return o.ENABLED;return o.DISABLED}},commentDisableOn:{valueFn:function(){var e=n.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);if(e)return n.Date.addDays(new Date,e).getTime();return null}},pushedServices:{value:{}},shareStates:{value:[]},structuredContent:{valueFn:function(){var e=this._getStructuredContentCtor();if(n.Lang.isNull(e))return null;return new e},setter:function(e){if(e instanceof n.Model)return e;var t=this._getStructuredContentCtor();if(n.Lang.isNull(t))return null;return new t(e)}},childrenGroups:{value:{}},author:{value:null},fullUrl:{value:null},assetUrl:{value:null,getter:function(e){if(n.SQS.LayoutEngine.UrlUtils.isSecure())return n.SQS.LayoutEngine.UrlUtils.securifyURL(e);return e}},resolved:{value:false},postItemInjectCode:{value:null},promotedBlock:{value:null},promotedBlockType:{value:null},nextDisplayIndex:{value:0,readOnly:true},mediaIsUploading:{value:false},hasFileData:{getter:function(){var e=this.get("mediaProcessingState");var t=e===i.QUEUED;if(this.get("isGlobalFakeContentItem"))return!this.isNew();if("USER_UPLOAD"===this.get("systemDataOrigin")&&t)return true;if(t)return true;return n.Lang.isValue(this.get("systemDataId"))}},isGlobalFakeContentItem:{value:false}}})},"1.0",{requires:["base","json","model","@sqs/layout-engine/model-sync-rest","@sqs/layout-engine/content-item/embed","@sqs/layout-engine/url-utils"]})},7701:function(e,t){YUI.add("@sqs/layout-engine/model-sync-rest",function(o){function e(){this._ioConfigCache={}}e.prototype={sync:function(e,t,a){o.Lang.isValue(t.timeout)||(t.timeout=1e7);o.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(e,t){this._ioConfigCache[e.id]=o.merge(t,{})},_retrieveAndEvict:function(e){var t=this._ioConfigCache[e];this._ioConfigCache[e]=null;return t},_isCrumbFailure:function(e){return e&&e.crumbFail&&e.crumb},_sendSyncIORequest:function(e){var t=o.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(t,e);return t},_onSyncIOEnd:function(e,t){this._retrieveAndEvict(e);o.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(e,t,a){var i=this._retrieveAndEvict(e);var n={};var s=t.responseText;o.Lang.isValue(s)&&s.trim()&&(n=o.JSON.parse(s));if(this._isCrumbFailure(n)){var r=n.crumb;o.ModelSync.REST.CSRF_TOKEN=r;o.Env.CSRF_TOKEN=r;i.headers["X-CSRF-Token"]=r;this._sendSyncIORequest(i)}else o.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(e,t,a){var i=a.callback;if(i){var n={};var s=t.responseText;o.Lang.isValue(s)&&s.trim()&&(n=o.JSON.parse(s));i({code:t.status,msg:t.statusText,responseJSON:n},t)}}};o.mix(e,o.ModelSync.REST,false,null,1);o.namespace("SQS.LayoutEngine.ModelSync");o.SQS.LayoutEngine.ModelSync.REST=e},"1.0",{requires:["model-sync-rest"]})},7702:function(e,t){YUI.add("@sqs/layout-engine/content-item/embed",function(e){e.namespace("SQS.LayoutEngine.ContentItem");e.SQS.LayoutEngine.ContentItem.Embed=e.Base.create("Embed",e.Model,[],{},{ATTRS:{_type:{value:"Embed",validator:function(e){return"Embed"===e},readOnly:true},embed:{value:null},oembed:{value:null},overlay:{value:true}}})},"1.0",{requires:["base","model"]})},7703:function(e,t){YUI.add("@sqs/layout-engine/url-utils",function(e){e.namespace("SQS.LayoutEngine");var a="https:";var i=new RegExp("^((https?:)?//)+","i");var n=e.SQS.LayoutEngine.UrlUtils={isSecure:function(e){var t=null;0===arguments.length?t=window.location.protocol:e&&(t=(e+"").toLowerCase().substring(0,6));return t===a},securifyURL:function(e){if(!e||e.startsWith("data:"))return e;return a+"//"+this._stripProtocolAndSlashes(e)},toRelativeProtocol:function(e){if(!e)return e;return"//"+this._stripProtocolAndSlashes(e)},securifyBlockEmbed:function(e,i){if(!this.isSecure()||!e)return;var t=e.all("object embed, iframe");var n=t.size();t.each(function(e,t){var a=e.getAttribute("src");a&&e.setAttribute("src",this.securifyURL(a));if(i&&n===t+1){e.setStyle("display","none");e.setStyle("display",null)}},this)},_stripProtocolAndSlashes:function(e){return(e+"").replace(i,"")},ensureProtocol:function(e){e=e.search(/^https?:\/\//i)<0?"http://"+e.replace(/^(\/\/)+/,""):e.replace(i,function(e,t){return t});return e},isSlash:function(e){return"/"===e},isProperUrl:function(e){var t=/^(https?:)?(\/\/)?[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,3}(\S*)?$/i;return e.search(t)>-1},isIP:function(e){return e.search(/^(https?:)?(\/\/)?[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/i)>-1},isAnchor:function(e){return n._doesStringStartWith(e,"#")&&e.length<100},isTel:function(e){return n._doesStringStartWith(e,"tel:")&&e.length<50},isMailto:function(e){return n._doesStringStartWith(e,"mailto:")&&e.length<1e3},isJavascript:function(e){return n._doesStringStartWith(e,"javascript:")&&e.length<250},isFtp:function(e){return n._doesStringStartWith(e,"ftp:")&&e.length<100},isInternalUrl:function(e){return n._doesStringStartWith(e,"\\/[^\\/]")&&e.length<150},_doesStringStartWith:function(e,t){return!!e&&0===e.search(new RegExp("^"+t+".+"))},addQueryParam:function(e,t,a){var i;var n=e.split("#");if(n.length>1){i=n.slice(1).join();e=n[0]}var s=-1!==e.indexOf("?")?"&":"?";e+=s+t+"="+a;i&&(e+="#"+i);return e},isLinkExternal:function(e){if(!e.match(i))return false;var t=this._stripProtocolAndSlashes(e);var a=t.split("/")[0];return a.toLowerCase()!==location.host.toLowerCase()},_getNode:function(e){var t=document.createElement("a");t.href=e;return t},getPath:function(e){e=this._getNode(e);return e.pathname},getSearch:function(e){e=this._getNode(e);return e.search},getHash:function(e){e=this._getNode(e);return e.hash},pathMatches:function(e,t){e=this._getNode(e);t=this._getNode(t);return e.pathname==t.pathname},createUrl:function(e,t){var a=e;t&&(a+=t);a=a.replace(/\//g,"");return n.createUrlWithSlash(a)},createUrlWithSlash:function(e){e=e.trim().replace(new RegExp("[ ]+","g")," ").replace(new RegExp("[ ]","g"),"-").replace(new RegExp("[^a-zA-Z0-9/\\-]","g"),"").replace(new RegExp("[\\.\\-]{2,}","g"),"-").replace(new RegExp("[\\.\\/]{2,}","g"),"/").toLowerCase();return e}}},"1.0",{requires:[]})},7704:function(e,t,a){var i=a(24).t;var n=a(1393);YUI.add("@sqs/layout-engine/block-content-html",function(t){t.namespace("SQS.LayoutEngine.BlockContent");t.SQS.LayoutEngine.BlockContent.Html=t.Base.create("html",t.Widget,[t.WidgetChild,t.SQS.LayoutEngine.BlockContent.Base,t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(e){e&&e.model||this.set("model",{});var t=this.get("boundingBox");t.addClass("sqs-dd-invalid-handle");if(this.get("copyReferenceNodeClassNames")){var a=this.get("referenceNode").get("className");t.addClass(a)}},bindUI:function(){this._registerEvent(this.get("model").after("change",this._syncEmptyState,this))},syncUI:function(){var e=this.get("model").get("html");var t=this.get("parent");(t&&t.get("editController").isMobileApp()||!this.get("editable")||-1===["visual","wysiwyg"].indexOf(this.get("model").get("engine")))&&this.get("contentBox").set("innerHTML",e);this.hasPlugin("contentEditor")&&this.contentEditor.syncEditorUI(e);this._syncEmptyState()},isEmpty:function(){return n(this.get("model").get("html"))},_syncEmptyState:function(){var e=this.get("boundingBox");e&&e.getDOMNode()&&e.toggleClass("sqs-empty",this.isEmpty())},setContent:function(e,t){this.get("model").set("html",e||"",t);this.syncUI();this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-html",ATTRS:{model:{lazyAdd:false,writeOnce:true,setter:function(e){if(t.instanceOf(e,t.SQS.LayoutEngine.ContentModel.Html))return e;if(t.Lang.isObject(e))return new t.SQS.LayoutEngine.ContentModel.Html(e)}},placeholderText:{value:i("Write here…")},editor:{},enableDelete:{value:false},isSingleLine:{value:false},hasHyperlink:{value:true},tabIndex:{value:null},type:{value:"full"},referenceNode:{},copyReferenceNodeClassNames:{value:false}}});t.namespace("SQS.LayoutEngine.ContentModel");t.SQS.LayoutEngine.ContentModel.Html=t.Base.create("HtmlContentModel",t.Model,[],{},{ATTRS:{engine:{value:"wysiwyg"},source:{value:""},html:{value:""}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-content-base","@sqs/layout-engine/event-registrar","widget","widget-child"]})},7705:function(e,t){YUI.add("@sqs/layout-engine/block-content-base",function(a){var e=function(){};a.namespace("SQS.LayoutEngine.BlockContent");var t=a.SQS.LayoutEngine.BlockContent.Base=function e(){a.before(this._bindUIBlock,this,"bindUI");a.before(this._syncUIBlock,this,"syncUI")};t.prototype={_bindDOM:e,_bindUIBlock:function(){this.after("editableChange",this.syncUI,this)},_syncUIBlock:function(){this.syncEditable()},syncEditable:function(){var e=this.get("editable");var t=this.get("editor");if(!a.Lang.isValue(t))return;e&&!this.hasPlugin(t.NS)?this.plug(t):!e&&this.hasPlugin(t.NS)&&this.unplug(t)},toJSON:function(){var e=this.get("model").toJSON();delete e.id;return e},destructor:function(){this.unplug()},_onDocFocus:e};t.ATTRS={tabIndex:{value:null},editable:{value:false,lazyAdd:false}}},"1.0",{requires:[]})},7706:function(e,t,a){var s=a(24).t;var i=a(851);var n=a(729);var o=n.createLogger("block-content/image","orange",false);var l=n.createWarningLogger("block-content/image");var c=n.createGroup("%c[block-content/image]","orange",[],false);var d=[i.QUEUED,i.PROCESSING];var u=[i.ERROR,i.DOWNLOAD_ERROR,i.ERROR_TOO_LARGE,i.ERROR_FILE_NOT_FOUND,i.ERROR_UNSUPPORTED_IMAGE_TYPE];YUI.add("@sqs/layout-engine/block-content-image",function(r){r.namespace("SQS.LayoutEngine.BlockContent");var n=r.SQS.LayoutEngine.BlockContent.Image=r.Base.create("image",r.Widget,[r.WidgetChild,r.SQS.LayoutEngine.BlockContent.Base],{destructor:function(){this.emptyImageNode()},render:function(){o("ImageBlockContent - render");var t=this.get("model");if(!t.isEmpty()&&!t.isImageDataLoaded()){var a=r.Lang.isValue(this.get("parent"));if(a){var i=r.bind(function(){this.get("parent").set("stack",null)},this);var e=this.get("parent").get("stack");e&&(i=e.add(i))}o("ImageBlockContent - Loading image data");t.loadImageData().then(r.bind(function e(){o("ImageBlockContent - Loaded image data: ",{baseAssetUrl:t.get("baseAssetUrl"),dimensions:t.get("dimensions")});r.Lang.isValue(this.get("boundingBox"))&&r.Lang.isValue(this.get("boundingBox").getDOMNode())&&this.syncUI();a&&i();this.fire("image-loaded")},this))}n.superclass.render.apply(this,arguments)},syncUI:function(){if(!this.get("contentBox").getDOMNode()){o("ImageBlockContent - image contentBox no longer present to render into");return}c.group("syncUI");this._syncImageRendering();this._syncAspectRatio();this._syncStretch();this._adjustImage();c.groupEnd()},bindUI:function(){var n=this.get("model");n.after(["imageIdChange","completedChange","errorChange"],this.syncUI,this);n.after(["dimensionsChange","stretchChange"],function(e){if(e.silent)return;this._syncStretch()},this);n.after(["aspectRatioChange","dimensionsChange","stretchChange"],function(e){if(e.silent)return;this._syncAspectRatio()},this);n.after(["focalPointChange","aspectRatioChange","dimensionsChange","stretchChange"],function e(t){if(t.silent)return;this._syncImageRendering();this._adjustImage()},this);r.Lang.isValue(n.get("vSize"))&&n.after("vSizeChange",function(e){if(e.silent)return;var t=this.get("contentBox").get("offsetHeight");var a=this.get("contentBox").get("offsetWidth");var i=t/a*100;o("ImageBlockContent - vSizeChange - recalculating aspectRatio",i);n.set("aspectRatio",i)},this)},emptyImageNode:function(){if(this.imgNode){this.imgNode.remove(true);this.imgNode=null}},showEmptyImageState:function(){var t=this.get("model");var e=this.get("boundingBox");e.addClass("sqs-empty");this.emptyImageNode();if(t.get("error")){o("ImageBlockContent - Image emptied with error",t.get("error"));this.set("editing",false);if(!this.errorNode){e.addClass("sqs-error");this.errorNode=this.get("contentBox").appendChild('<div class="error-wrapper"><div class="message"></div><a href="#" class="clear">Clear</a></div>');this.errorNode.one("a.clear").on("click",function(e){e.halt();this.errorNode.remove();this.errorNode=null;this.set("editing",true);t.setAttrs({error:null,imageId:null})},this)}this.errorNode.one(".message").setContent(t.get("error"))}},_imageStateIsEmpty:function(){var e=this.get("model");return e.isEmpty()||e.get("error")||!e.get("isBase64")&&e.get("processing")},_syncImageRendering:function(){o("ImageBlockContent - _syncImageRendering");var e=this.get("boundingBox");if(!e.getDOMNode())return;if(this._imageStateIsEmpty()){this.showEmptyImageState();return}if(this.errorNode){this.errorNode.remove();this.errorNode=null;e.removeClass("sqs-error")}if(!this.imgNode){this.imgNode=r.Node.create("<img>");this.imgNode.on("load",this._fireContentUpdate,this);this.get("contentBox").append(this.imgNode)}e.removeClass("sqs-empty")},_syncAspectRatio:function(e){var t=this.get("model");var a=t.get("aspectRatio")||75;var i=t.get("dimensions");var n=this.get("contentBox");if(!n.getDOMNode())return;var s=t.get("vSize");if(r.Lang.isValue(s)){o("ImageBlockContent - Applying vSize value",s,"(pixel value: "+24*s+")");n.setStyle("paddingBottom",24*s);return}if(!a){o("ImageBlockContent - Image not loaded or missing aspect ratio, calculating...");if(i){o("ImageBlockContent - Applying evaluated aspectRatio (from dimensions)",a);a=i.height/i.width*100}else{o("ImageBlockContent - Evaluating `aspectRatio` to 75% (no dimensions found)");a=75}}a=parseFloat(a)+"%";o("ImageBlockContent - Applying aspectRatio",a);n.setStyle("paddingBottom",a)},_syncStretch:function(){var e=this.get("boundingBox");var t=this.get("model");var a=t.get("stretch");var i=t.get("dimensions");var n=!a&&r.Lang.isValue(i);if(!e.getDOMNode())return;e.setStyle("maxWidth",n?i.width:null);e.toggleClass("stretch",n)},_attemptToEvaluateDimensions:function(){var t=this.get("model");if(r.Lang.isValue(t.get("baseAssetUrl"))){o("ImageBlockContent - Dimensions missing, attempting to evaluate dimensions in the browser");var a=new Image;a.addEventListener("load",r.bind(function e(){o("ImageBlockContent - Image dimensions after load",{width:a.width,height:a.height});t.set("dimensions",{width:a.width,height:a.height});this.syncUI()},this));a.src=t.get("baseAssetUrl")}},_adjustImage:function(){if(!this.imgNode){l("_adjustImage called without an imgNode in existence.");return}o("ImageBlockContent - _adjustImage");var e=this.get("model");var t=this.get("boundingBox");if(e.isEmpty()||!e.isImageDataLoaded()||!t.getDOMNode())return;var a=e.get("dimensions");if(!r.Lang.isValue(a)){this._attemptToEvaluateDimensions();return}t.addClass("sqs-intrinsic intrinsic");var i=e.get("focalPoint").split(",");var n={x:parseFloat(i[0]),y:parseFloat(i[1])};var s={focalPoint:n,mode:"fill",fixedRatio:true,stretch:e.get("stretch")};e.get("isBase64")||(s.source=e.get("baseAssetUrl"));e.get("dimensions")&&(s.dimensions=e.get("dimensions"));o("ImageBlockContent - Image adjusted, triggering load with ImageLoader",s);this.imgNode&&ImageLoader.load(this.imgNode,s)},_fireContentUpdate:function(){o("ImageBlockContent - _fireContentUpdate");this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-image",ATTRS:{model:{writeOnce:true,setter:function(e){if(r.Lang.isObject(e))return new r.SQS.LayoutEngine.ContentModel.Image(e);if(r.instanceOf(e,r.SQS.LayoutEngine.ContentModel.Image))return e},value:{},lazyAdd:false},tabIndex:{value:null},editor:{valueFn:function(){console.error("Must implement Image Editor")}}}});r.namespace("SQS.LayoutEngine.ContentModel");r.SQS.LayoutEngine.ContentModel.Image=r.Base.create("ImageContentModel",r.Model,[],{initializer:function(){this.setImageContentItem({id:this.get("imageId"),collectionId:this.get("collectionId")});this.after("imageIdChange",function(e){o("ImageContentModel - imageIdChange",{newId:e.newVal});if(!e.newVal){this.set("dimensions",null);this.set("processing",null);this.set("error",null);this.set("baseAssetUrl",null);this.set("aspectRatio",null);this.set("stretch",false);this.set("licensedAssetPreview",null);this.set("licensedAssetId",null);return}this.setImageContentItem({id:e.newVal,collectionId:this.get("collectionId")})},this)},setImageContentItem:function(e){var t=r.SQS.LayoutEngine.ContentItem.getCtor();this._imageContentItem=new t(e);this._imageContentItem.after("mediaProcessingStateChange",function(e){if(e.newVal===i.READY){o("ImageContentModel - image MediaProcessingState.READY");this.loadImageData()}},this);return this._imageContentItem},getImageContentItemField:function(e){return this._imageContentItem.get(e)},setItemData:function(e){this._imageContentItem.setAttrs(e);r.Lang.isString(e.id)&&this.set("imageId",e.id)},isEmpty:function(){return!this.get("imageId")&&!this.get("isBase64")},isImageDataLoaded:function(){var e=this.get("baseAssetUrl");return r.Lang.isValue(e)},loadImageData:function e(){var t=!r.Lang.isValue(this._itemPromise)||"pending"!==this._itemPromise.getStatus();if(!t)return this._itemPromise;o("ImageContentModel - loadImageData");this._itemPromise=new r.Promise(r.bind(function(t,e){this._imageContentItem.load(r.bind(function(e){c.group("ImageContentModel - content item loaded",this._imageContentItem);e?e.notFound?this.set("error",s("The requested image could not be found.")):this.set("error",e.error):this.applyAttrsFromContentItem(this._imageContentItem);c.groupEnd();t();this._itemPromise=null},this))},this));return this._itemPromise},applyAttrsFromContentItem:function(e){c.group("applyAttrsFromContentItem. Ensure no syncUIs!");var t=e.get("mediaProcessingState");if(-1!==u.indexOf(t))this.set("error",s("There was an error while processing the image."));else if(-1!==d.indexOf(t))this.set("processing",true);else{this.set("licensedAssetPreview",e.get("licensedAssetPreview"));this.set("licensedAssetId",e.get("licensedAssetId"));this.set("processing",false);this.set("baseAssetUrl",e.get("assetUrl"));this.set("dimensions",e.get("originalSize"),{silent:true});this.set("focalPoint",e.get("mediaFocalPoint"),{silent:true});this.set("filename",e.get("filename"));var a=this.get("dimensions");if(!r.Lang.isValue(this.get("aspectRatio"))&&r.Lang.isValue(a)){var i=a.height/a.width*100;this.set("aspectRatio",i,{silent:true})}}c.groupEnd()},saveFocalPoint:function(){this._imageContentItem.set("mediaFocalPoint",this.get("focalPoint"));this._imageContentItem.save({fields:["mediaFocalPoint"]})},reset:function(){this.set("aspectRatio",void 0);this.set("baseAssetUrl",void 0)}},{ATTRS:{imageId:{},isBase64:{},baseAssetUrl:{value:null},dimensions:{setter:function(e){if(r.Lang.isString(e)){var t=e.split("x");return{width:t[0],height:t[1]}}if(r.Lang.isValue(e))return e}},aspectRatio:{setter:function(e){e=parseFloat(e);return r.Lang.isNumber(e)?e:null}},focalPoint:{value:"0.5, 0.5",setter:function(e){if(r.Lang.isObject(e))return e.x+","+e.y;return e||"0.5, 0.5"}},scale:{value:"cover",setter:function(e){return"cover"===e||"contain"===e?e:"cover"}},filename:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString},licensedAssetPreview:{value:null},licensedAssetId:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["model","widget","widget-child","promise","@sqs/layout-engine/content-item-content-item","@sqs/layout-engine/block-content-base"]})},7707:function(e,t){YUI.add("@sqs/layout-engine/block-mixin-animated-block",function(e){var t=250;e.SQS.LayoutEngine.Block.MixinAnimatedBlock=e.Base.create("animatedBlock",e.Base,[],{clearAnimationTimeout:function(){this._retriggerAnimationTimeout&&window.clearTimeout(this._retriggerAnimationTimeout)},isInDefaultView:function(e){if(!e)return false;var t=e.getDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)return false;return true},updateAnimationClassname:function e(t,a,i){if(!this.isInDefaultView(i))return;var n=i.getDOMNode().ownerDocument.documentElement;this._blockAnimationScrollTop=n.scrollTop;i.addClass("animation-disabled");var s=a[t.attrName];var r=s+"-"+t.prevVal;var o=s+"-"+t.newVal;i.removeClass(r);i.addClass(o)},rerunAnimation:function e(a){this.clearAnimationTimeout();if(!this.isInDefaultView(a))return;a.removeClass("animation-loaded");this._retriggerAnimationTimeout=window.setTimeout(function(){if(this.isInDefaultView(a)){a.removeClass("animation-disabled");if(this._blockAnimationScrollTop){var e=a.getDOMNode().ownerDocument.documentElement;var t=Math.max(this._blockAnimationScrollTop-1,0);e.scrollTo(e.scrollLeft,t);e.scrollTo(e.scrollLeft,this._blockAnimationScrollTop);this._blockAnimationScrollTop=null}a.addClass("animation-loaded")}}.bind(this),t)}},{})},"1.0",{requires:["base"]})},7708:function(e,t,a){var i=a(5166);a(8994);YUI.add("squarespace-layout-engine-edit-controller",function(t){t.namespace("Squarespace.LayoutEngine");var a=t.Squarespace.LayoutEngine.EditController=t.Base.create("editcontroller",t.SQS.LayoutEngine.EditControllerWebApp,[t.Squarespace.GlobalEventBubbler],{initializer:function(){a.superclass.initializer.call(this);this.bubbleEventsToGlobal()}},{ATTRS:{renderableBlockSet:{value:[{ctor:t.Squarespace.Layout.RenderableBlocksWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.WEB_APP},{ctor:t.Squarespace.Layout.RenderableBlocksWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.SECTION}]},insertMenuSet:{valueFn:function(){return[{ctor:t.Squarespace.Layout.InsertBlockMenuWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.WEB_APP,editController:this},{ctor:t.Squarespace.Layout.InsertBlockMenuSection,editMode:t.SQS.LayoutEngine.Layout.EditMode.SECTION,editController:this}]}}}});a.getInstance=function(){var e;return function(){if(!t.Lang.isValue(e)){e=new a;t.on("beforeunload",function(){e.get("destroyed")||e.destroy();e=null})}return e}}();if(i()){t.use("@sqs/layout-engine/tablet-dd-overrides");t.SQS.DDWrappers.DragSelection.ATTRS.enabled={value:false,readOnly:true}}},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/edit-controller-web-app","squarespace-global-event-bubbler","squarespace-layout-insert-block-menu-section","squarespace-layout-insert-block-menu-web-app","squarespace-layout-renderable-blocks-web-app"]})},7709:function(e,t,a){var i=a(100);var r=a(53);var o=a(32);YUI.add("@sqs/layout-engine/edit-controller-web-app",function(s){s.namespace("SQS.LayoutEngine");var n=s.SQS.LayoutEngine.EditControllerWebApp=s.Base.create("editcontroller",s.SQS.LayoutEngine.EditControllerBase,[],{initializer:function(){this._dragSelection=new s.SQS.DDWrappers.DragSelection({node:"body",enabled:false});s.on("key",this._onDeleteKeyHandler,s.config.doc,"down:backspace,46",this);this._registerEvent(s.SQS.LayoutEngine.Events.on("layout-engine:remove-confirmed",function(e){this._removeBlocks(e.selected)}.bind(this)),s.SQS.LayoutEngine.Events.on("layout-engine:open-block-menu",this.showBlockMenu.bind(this)))},pluginLayoutEditor:function(e){this.disableInsertPoints();var t=e.layoutNode;var a=n.superclass.pluginLayoutEditor.apply(this,arguments);var i=this._getNewDragRegionConfig(t);if(s.Lang.isValue(i)){this._destroyDragSelection();this._initializeDragSelection(i)}this._maintainDragSelectionRegion(t);this.enableDragSelection();this.enableInsertPoints();return a},enableDragSelection:function(){this._dragSelection.get("enabled")||this._dragSelection.set("enabled",true)},disableDragSelection:function(){this._dragSelection.get("enabled")&&this._dragSelection.set("enabled",false)},_getNewDragRegionConfig:function(e){var t=s.one("body");var a=e.ancestor(".sqs-content-manager-base");var i=e.ancestor(".sqs-dialog-layout-wrapper-content");var n=[".sqs-block",".standard-dialog-wrapper"];if(s.Lang.isValue(a))t=a;else if(s.Lang.isValue(i)){t=i;n=[".sqs-block","textarea","input"]}return{dragRegionNode:t,invalidRegions:n}},_initializeDragSelection:function(e){this._dragSelectionRegionNode=e.dragRegionNode;this._dragSelection.set("invalidRegions",e.invalidRegions);this._dragSelection.set("enabled",true);this._dragSelectionChangedEvent=this._dragSelection.on(["selection-complete","selection-dragged"],this._dragSelectionChanged,this)},_maintainDragSelectionRegion:function(e){s.Lang.isValue(this._contentChangedEvents)||(this._contentChangedEvents=[]);this._contentChangedEvents.push(e.LayoutBuilder.after("widget:contentUpdate",this._onContentUpdatePreserveDragSelection,this))},_onContentUpdatePreserveDragSelection:i(function(){if(!this._dragSelection||!this._dragSelectionRegionNode)return;this._dragSelection.set("boundingRegion",this._dragSelectionRegionNode.get("region"))},20),_destroyDragSelection:function(){this._onContentUpdatePreserveDragSelection.cancel();this._dragSelection.set("enabled",false);s.Lang.isValue(this._dragSelectionChangedEvent)&&this._dragSelectionChangedEvent.detach();this._dragSelectionRegionNode=null;s.Lang.isValue(this._contentChangedEvents)&&s.Array.each(this._contentChangedEvents,function(e){e.detach()})},_dragSelectionChanged:function(a){s.all(".sqs-layout.sqs-editing .sqs-block").each(function(e){var t=s.Widget.getByNode(e);if(!t)return;t.get("lockedLayout")||(e.intersect(a.region).inRegion?t.set("selected",1):t.set("selected",0))})},layoutDragStart:function(e){n.superclass.layoutDragStart.apply(this,[e]);this.disableInsertPoints()},layoutDragEnd:function(){n.superclass.layoutDragEnd.call(this);this.enableInsertPoints();this.alignInsertPoints(null,true)},_disableEditing:function(){this._destroyBlockMenu();this._destroyInsertPointController();this._destroyDragSelection();n.superclass._disableEditing.call(this)},destroyLayoutEditor:function(){this.disableInsertPoints();n.superclass.destroyLayoutEditor.apply(this,arguments);this._destroyDragSelection();this.enableInsertPoints()},_destroyBlockMenu:function(){s.SQS.LayoutEngine.Singletons.BlockMenu&&s.SQS.LayoutEngine.Singletons.BlockMenu.destroy()},showBlockMenu:function(e){e=s.merge({editMode:this.get("defaultEditMode"),direction:"bottom",type:"row",targetNode:null,layoutNode:null,scrollNode:null},e);var t=this.getInsertMenu(e.editMode,e);t.hide();t.show()},_onDeleteKeyHandler:function(e){if(e.target.ancestor("input, textarea, [contenteditable=true]",true))return;e.halt();function t(e){return".sqs-layout.sqs-editing ."+e+":not(.sqs-block-locked-layout)"}var a=s.all(t("sqs-block-focused")+", "+t("sqs-selected"));a.size()>0&&s.SQS.LayoutEngine.Events.fire("layout-engine:remove-requested",{selected:a})},_removeBlocks:function e(t){var i=[];t.each(function e(t){var a=s.Widget.getByNode(t);if(a){a.queueForDestruction();i.push(t.ancestor(".sqs-layout"))}});i=s.Array.unique(i);s.Array.each(i,function e(t){t.LayoutEditor.cleanGrid(true)})},_destroyInsertPointController:function(){s.SQS.LayoutEngine.Singletons.InsertPointController&&s.SQS.LayoutEngine.Singletons.InsertPointController.destroy()},enableInsertPoints:function(){s.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&s.SQS.LayoutEngine.Singletons.InsertPointController.toggleDisabled(false)},disableInsertPoints:function(){if(!this.get("supportsInsertPoints"))return;s.SQS.LayoutEngine.Singletons.InsertPointController&&s.SQS.LayoutEngine.Singletons.InsertPointController.toggleDisabled(true);this.hideInsertMarker()},alignInsertPoints:function(e,t){s.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&s.SQS.LayoutEngine.Singletons.InsertPointController.alignInsertPoints(e,t)},destructor:function(){this._destroyDragSelection();this._dragSelection.destroy();this._destroyInsertPointController()}},{ATTRS:{defaultEditMode:{readOnly:true,value:s.SQS.LayoutEngine.Layout.EditMode.WEB_APP},supportsInsertPoints:{valueFn:function(){var e=o.getBreakpoint(r.breakpoints);return"mobile"!==e.platform}}}})},"1.0",{requires:["base","event","json-parse","node","parallel","@sqs/yui-dd-wrappers/drag-selection","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-point","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/models-layout","@sqs/layout-engine/events"]})},7710:function(e,t,a){var i=a(6251);YUI.add("@sqs/layout-engine/layout-insert-point",function(c){var g=false;c.namespace("SQS.LayoutEngine.Layout");var o=c.SQS.LayoutEngine.Layout.InsertPoint=c.Base.create("LayoutInsertPoint",c.Plugin.Base,[],{initializer:function(){var e=this.get("host");this._blockNode=e.get("boundingBox");this.after("insertPointsChange",this._bindInsertPointEvents);this._bindInsertPointEvents();this.onHostEvent("destroy",function(){this.get("controller").alignInsertPoints(this._getLayoutNode())},this);this.onHostEvent("resized",function(e){"columnChanged"===e.source&&this.align(true)},this);this.afterHostEvent("dropped",this._getInsertPoints,this);this.get("controller").get("enabled")&&this.align();this.registerWithController();this.publish("click",{broadcast:2,emitFacade:true})},destructor:function(){this._clearInsertPointNodes();this._clearInsertPointEvents();this.deregisterWithController()},_getEditMode:function(){return this.get("host").get("editMode")},_getLayoutNode:function(){var e=this.get("layoutNode");if(!e){e=this._blockNode.ancestor(".sqs-layout");e&&this.set("layoutNode",e)}return e},_getNewInsertPointNode:function(){var e=c.DOM.create('<div class="'+o.CSS_PREFIX+'"></div>');this._docFrag.appendChild(e);return c.one(e)},_getInsertPointConfig:function(e,t,a,i){var n=this._getNewInsertPointNode();"block"===e&&"bottom"===a&&n.addClass(o.CSS_PREFIX+"-topmost");n.setData("ipType",e);g&&console.log("[IP] creating an IP for "+e+" "+a,"lastIP?: "+i);return{type:e,position:a,alignTo:t,node:n,offset:"row"===e?[-10,0]:null}},_getInitInsertPoints:function(){var e=this.get("host");var t=[];var a=this._getLayoutNode();if(!a||!e||!e.get("boundingBox")){console.warn("Could not init insert points",this.getAttrs());return t}this._blockNode||(this._blockNode=e.get("boundingBox"));this._docFrag=c.config.doc.createDocumentFragment();var i=this._blockNode;var n=i.ancestor(".sqs-col");var s=n?n.ancestor(".sqs-row"):null;if(!n){g&&console.log("[IP] Block is not inserted into a column");return}t.push(this._getInsertPointConfig("block",i,"top"));if(this._isInMultiColumnRow(n)){this._isLastBlockInColumn()&&t.push(this._getInsertPointConfig("block",i,"bottom"));if(this._isFirstColumnInRow(n)){this._isFirstBlockInColumn()&&t.push(this._getInsertPointConfig("row",s,"top"));this._isLastBlockInColumn()&&t.push(this._getInsertPointConfig("row",s,"bottom",this._isLastRowInLayout(s)))}}else this._isLastBlockInColumn()&&this._isLastRowInLayout(s)&&t.push(this._getInsertPointConfig("block",i,"bottom",true));this.get("divideSelectors")&&(t=t.concat(this._getDivideInsertPoints()));var r=a.one("."+o.CSS_PREFIX+"-container");if(!r){r=c.Node.create('<div class="'+o.CSS_PREFIX+'-container"></div>');a.appendChild(r)}r.appendChild(this._docFrag);this._docFrag=null;return t},_isFirstColumnInRow:function(e){return!e.previous(".sqs-col")},_isInMultiColumnRow:function(e){return e.siblings(".sqs-col").size()>0},_isLastRowInLayout:function(e){while(e){if(e.next(".sqs-row, .sqs-block"))return false;e=e.ancestor(".sqs-row",false,".sqs-layout")}if(this._blockNode.next(".sqs-row"))return false;return true},_isFirstBlockInColumn:function(){return!this._blockNode.previous(".sqs-block:not(.sqs-destroyme)")},_isLastBlockInColumn:function(){return!this._blockNode.next(".sqs-block:not(.sqs-destroyme)")},_getDivideInsertPoints:function(){var e=this.get("divideSelectors");var t=this._savedDivideNodes=this._blockNode.all(e);var a=[];t.size()>1&&t.each(function(e,t){0!==t&&a.push(this._getInsertPointConfig("content",e,"top"))},this);return a},_getInsertPoints:function(e){var t=this._blockNode;var a=t.hasClass("sqs-float-left")||t.hasClass("sqs-float-right");var i=this._isInMultiColumnRow(t.ancestor(".sqs-col"));var n=this.get("insertPoints")||[];var s=this.get("divideSelectors");var r=s?t.all(s):null;var o=this.get("host").get("editController");var l=o.getInsertMenu(this._getEditMode());if(c.Lang.isValue(l)&&l.get("visible"))return n;n.length||a?a?n=[]:!r||this._savedDivideNodes&&this._listsAreEqual(r,this._savedDivideNodes)?(e||i)&&(n=this._getInitInsertPoints()):n=this._getInitInsertPoints():n=this._getInitInsertPoints();this.get("insertPoints")!==n&&this.set("insertPoints",n);return n},_listsAreEqual:function(e,t){return e.size()===t.size()&&!e.some(function(e){return-1===t.indexOf(e)})},_bindInsertPointEvents:function(){this._insertPointEvents||(this._insertPointEvents=[]);c.Array.each(this.get("insertPoints"),function(t){var e=t.node;if(!e||!e.getDOMNode())return;this._insertPointEvents.push(e.on("mousedown",function(e){this._onClick(t)},this));this._insertPointEvents.push(e.on("mouseenter",function(){this._onMouseEnter(t)},this));this._insertPointEvents.push(e.on("mouseleave",this._onMouseLeave,this))},this)},_clearInsertPointNodes:function(e){e=e||this.get("insertPoints")||[];c.Array.each(e,function(e){e.node&&e.node.getDOMNode()&&e.node.remove()})},_clearInsertPointEvents:function(){if(this._insertPointEvents)for(var e=0,t=this._insertPointEvents.length;e<t;e++)this._insertPointEvents[e].detach();this._insertPointEvents=[]},align:function(e){var t=this._blockNode;if(!t||!t.getDOMNode()){this.destroy();return}if(!e&&!this.get("controller").get("enabled"))return;var a=this._getInsertPoints(e);var i=a.length;a=c.Array.filter(a,function(e){var t=e.alignTo;if(!t||!t.ancestor()){console.warn("No node to align insert point to.");e.node.remove();return false}return true});var n=c.Array.map(a,function(e){var t=e.alignTo;var a="bottom"===e.position?"bottom":"top";var i=e.node.get("region");var n="content"===e.type;var s=n?this._blockNode:t;var r=s.get("region").left;var o=t.get("region")[a];n&&t.previous()&&(o-=(o-t.previous().get("region").bottom)/2);r-=i.width/2;o-=i.height/2;g&&console.log("[insert-point align] (x: "+r+", y: "+o+")",t._node);var l=getComputedStyle(e.node._node);var c=parseFloat(l.getPropertyValue("left"));c=isNaN(c)?0:c;var d=e.node._node.getBoundingClientRect().x;var u=d-c;u+r<0&&(r=-u);if(e.offset){r+=e.offset[0];o+=e.offset[1]}return{node:e.node._node,xy:[r,o]}},this);this._massSetXY(n);a.length!==i&&this.set("insertPoints",a)},_massSetXY:function(e){var t=c.DOM;var a="position";var i="top";var n="left";c.Array.each(e,function(e){e.pos=t.getStyle(e.node,a);e.delta=t._getOffset(e.node);e.currentXY=t.getXY(e.node)});c.Array.each(e,function(e){if(e.node&&e.xy){null!==e.xy[0]&&t.setStyle(e.node,n,e.xy[0]-e.currentXY[0]+e.delta[0]+"px");null!==e.xy[1]&&t.setStyle(e.node,i,e.xy[1]-e.currentXY[1]+e.delta[1]+"px")}},this)},registerWithController:function(){this.get("controller").registerInsertPoint(this,this._getLayoutNode())},deregisterWithController:function(){this.get("controller").deregisterInsertPoint(this,this._getLayoutNode())},_onMouseEnter:function(e){var t=e.alignTo;var a=e.position;var i=e.type;var n=this.get("host").get("editController");if(!t||!t.inDoc()){console.warn("no alignNode",t);this.align();return}n.setInsertMarkerLayout(this._getLayoutNode());n.alignInsertMarker({node:t,direction:a,region:t.get("region"),type:i})},_onMouseLeave:function(){this.get("host").get("editController").hideInsertMarker()},_onClick:function(t){this.fire("click",{backend:c.Object.getValue(c.config.win,"Static.IN_BACKEND".split("."))});var a=o.CSS_PREFIX+"-active";t.node.addClass(a);this.openBlockMenu(t);this.toggleInsertPointsDisabled(true);var e=this.get("host").get("editController");var i=e.getInsertMenu(this._getEditMode());i.after("insertPoint|visibleChange",function(e){if(!e.newVal){i.detach("insertPoint|visibleChange");t.node.removeClass(a);this.toggleInsertPointsDisabled(false)}},this);this._logMaxNumBlocks()},_logMaxNumBlocks:function(){var e=this._getLayoutNode().all(".sqs-block:not(.sqs-block-html,.sqs-destroyme)").size();e>i.MAX_BLOCKS_PER_LAYOUT&&console.warn("Appears to have "+e+" blocks in this layout.")},openBlockMenu:function(e){var t={align:{node:e.node,points:[c.WidgetPositionAlign.LC,c.WidgetPositionAlign.RC]},targetNode:e.alignTo,direction:e.position,type:e.type,layoutNode:this._getLayoutNode(),scrollNode:this._getLayoutNode().LayoutEditor.get("scrollNode"),editMode:this._getEditMode()};c.SQS.LayoutEngine.Events.fire("layout-engine:open-block-menu",t)},toggleInsertPointsDisabled:function(e){var t=this.get("host").get("editController");e?t.disableInsertPoints():t.enableInsertPoints()}},{NS:"insertPoint",CSS_PREFIX:"sqs-layout-insert-point",ATTRS:{insertPoints:{valueFn:"_getInitInsertPoints",setter:function(e){this._clearInsertPointNodes();this._clearInsertPointEvents();return e}},layoutNode:{value:null,validator:function(e){return null===e||c.instanceOf(e,c.Node)}},controller:{valueFn:function(){return c.SQS.LayoutEngine.Singletons.InsertPointController}},divideSelectors:{value:""}}})},"1.0",{requires:["plugin","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-point-controller"]})},7711:function(e,t){YUI.add("squarespace-global-event-bubbler",function(a){a.namespace("Squarespace");var e=["layout-engine:block-menu-search-query-change","layout-engine:block-menu-search-query-enter","layout-engine:open-block-menu","layout-engine:insert-block","layout-engine:delete-block"];a.Squarespace.GlobalEventBubbler=a.Base.create("global-event-bubbler",a.Base,[],{publishEventsForBubbling:function(){a.Array.forEach(e,function(e){a.Global.publish(e)})},bubbleEventsToGlobal:function(){a.Array.forEach(e,function(t){a.Global.publish(t);a.SQS.LayoutEngine.Events.on(t,function(e){a.Global.fire(t,e)},a)})}},{})},"1.0",{requires:["base","@sqs/layout-engine/events"]})},7712:function(e,t,a){var i=a(6858);var n=a(6859);var s=i.filter(function(e){return e.groupType!==n.GALLERY});YUI.add("squarespace-layout-insert-block-menu-section",function(e){e.Squarespace.Layout.InsertBlockMenuSection=e.Base.create("layoutInsertBlockMenuSection",e.Squarespace.Layout.InsertBlockMenuWebApp,[],{},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{editMode:{readOnly:true,value:e.SQS.LayoutEngine.Layout.EditMode.SECTION},blockItems:{getter:function(){return e.clone(s)}}}})},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","squarespace-layout-insert-block-menu-web-app"]})},7713:function(e,t,a){var n=a(24).t;var s=a(4156);var r=a(8995);var o=a(6858);YUI.add("squarespace-layout-insert-block-menu-web-app",function(a){a.namespace("Squarespace.Layout");var i=a.Squarespace.Layout.InsertBlockMenuWebApp=a.Base.create("layoutInsertBlockMenu",a.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase,[a.Squarespace.Mixins.EventRegistrar],{_onFocusedChange:function(e){e.newVal||this.hide()},_getInsertableBlockItems:function(){var e=[s.featureGateBlockItems,r.filterBlocksByBetaFeature];return e.reduce(function(e,t){return t(e)},this.get("blockItems"))},_getBlockLabelInstance:function(e,t){if(e.premium)return a.SQS.LayoutEngine.Block.PremiumLabel;return i.superclass._getBlockLabelInstance.call(this,e)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{blockItems:{getter:function(){return a.clone(o)}},editMode:{readOnly:true,value:a.SQS.LayoutEngine.Layout.EditMode.WEB_APP},blockIcon:{valueFn:function(){return a.Squarespace.Block.Icon}},zIndexBase:{getter:function(){return a.Squarespace.DIALOG_ZINDEX_BASE}},searchPlaceHolderText:{value:n("Search Content Blocks")}}})},"1.0",{requires:["base","@sqs/layout-engine/events","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-insert-block-menu-web-base","layout-engine/block-label-premium","squarespace-layout-renderable-blocks-web-app","squarespace-block-icon"]})},7714:function(e,t,a){var i=a(24).t;var n=a(0);var s=a(60);var r=a(5774).default;YUI.add("layout-engine/block-label-premium",function(e){var t=e.namespace("SQS.LayoutEngine.Block").PremiumLabel=e.Base.create("blockLabelPremium",e.Widget,[e.WidgetChild],{renderUI:function(){t.superclass.renderUI.call(this);s.render(n.createElement("div",null,this.get("label")+" ",n.createElement(r,{premiumFeatureLabel:i("Premium Feature")})),this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null},meta:{value:{}}}})},"1.0",{requires:["base","widget","widget-child"]})},7715:function(e,t,a){var s=a(24).t;var r=a(701);var o=a(5805);var l=a(8997);var c=a(6702);var d=a(6263);YUI.add("squarespace-layout-renderable-blocks-web-app",function(n){var e=n.merge(c.BlockTypeKeys,l);var t={};t[e[r.HTML]]={value:{id:"html",ctor:n.Squarespace.Block.Html,label:s("Text"),tags:[s("text"),s("blockquote"),s("copy"),s("file"),s("link"),s("list"),s("word")]}};t[e[r.MARKDOWN]]={value:{id:"markdown",ctor:n.Squarespace.Block.Markdown,label:s("Markdown"),tags:[s("markdown"),s("code"),s("html"),s("word")]}};t[e[r.QUOTE]]={value:{id:"quote",ctor:n.Squarespace.Block.Quote,label:s("Quote"),tags:[s("quote"),s("text"),s("blockquote")]}};t[e[r.IMAGE]]={value:{id:"image",ctor:n.Squarespace.Block.Image,label:s("Image"),tags:[s("image"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[r.GALLERY]]={value:{id:"gallery",ctor:n.Squarespace.Block.Gallery,label:s("Gallery"),tags:[s("gallery"),s("animation"),s("grid"),s("images"),s("photo"),s("picture"),s("slider"),s("slideshow"),s("stacked")]}};t[e[r.VIDEO]]={value:{id:"video",ctor:n.Squarespace.Block.Video,label:s("Video"),tags:[s("video"),s("animoto"),s("embed"),s("movie"),s("vimeo"),s("wistia"),s("youtube")]}};t[e[r.AUDIO]]={value:{id:"audio",ctor:n.Squarespace.Block.Audio,label:s("Audio"),tags:[s("audio"),s("album"),s("music"),s("player"),s("song"),s("track")]}};t[e[r.EMBED]]={value:{id:"embed",ctor:n.Squarespace.Block.Embed,label:s("Embed"),tags:[s("embed"),s("3rd party"),s("code"),s("html"),s("iframe"),s("video")]}};t[e[r.PRODUCT]]={value:{id:"product",ctor:n.Squarespace.Block.Product,label:s("Product"),tags:[s("product"),s("digital"),s("items"),s("options"),s("physical"),s("service"),s("variable"),s("variants"),s("money")]}};t[e[r.AMAZON]]={value:{id:"amazon",ctor:n.Squarespace.Block.Amazon,label:s("Amazon"),tags:[s("amazon"),s("product"),s("sell"),s("money")]}};t[e[r.DONATION]]={value:{id:"donation",ctor:n.Squarespace.Block.Donation,label:s("Donation"),tags:[s("donation"),s("charity"),s("donate"),s("payment"),s("money")]}};t[e[r.MEMBER_AREA]]={value:{id:"member-area",ctor:n.Squarespace.Block.MemberArea,label:s("Member Sign Up"),tags:[s("member"),s("area"),s("product"),s("money")]}};t[e[r.FORM]]={value:{id:"form",ctor:n.Squarespace.Block.Form,label:s("Form"),tags:[s("form"),s("contact"),s("mailing list"),s("survey")]}};t[e[r.NEWSLETTER]]={value:{id:"newsletter",ctor:n.Squarespace.Block.Newsletter,label:s("Newsletter"),tags:[s("newsletter"),s("blog"),s("mailing list"),s("subscribe"),s("subscription")]}};t[e[r.MAP]]={value:{id:"map",ctor:n.Squarespace.Block.Map,label:s("Map"),tags:[s("map"),s("address"),s("geography"),s("location"),s("google maps")]}};t[e[r.CODE]]={value:{id:"code",ctor:n.Squarespace.Block.Code,label:s("Code"),tags:[s("code"),s("css"),s("embed"),s("html"),s("iframe"),s("javascript"),s("script")]}};t[e[r.MENU]]={value:{id:"menu",ctor:n.Squarespace.Block.Menu,label:s("Menu"),tags:[s("menu"),s("chompy"),s("food"),s("restaurant")]}};t[e[r.LINK]]={value:{id:"link",ctor:n.Squarespace.Block.Link,label:s("Link"),tags:[s("link")]}};t[e[r.CALENDAR]]={value:{id:"calendar",ctor:n.Squarespace.Block.Calendar,label:s("Calendar"),tags:[s("calendar"),s("archive"),s("dates"),s("events"),s("shows"),s("schedule")]}};t[e[r.OPENTABLE]]={value:{id:"opentable",ctor:n.Squarespace.Block.OpenTable,label:s("OpenTable"),tags:[s("opentable"),s("dates"),s("food"),s("reservations"),s("restaurant")]}};t[e[r.OPENTABLE_V2]]={value:{id:"opentable",ctor:n.Squarespace.Block.OpenTableV2,label:s("OpenTable"),tags:[s("opentable"),s("dates"),s("food"),s("reservations"),s("restaurant")]}};t[e[r.TOURDATES]]={value:{id:"tourdates",ctor:n.Squarespace.Block.TourDates,label:s("Bandsintown"),tags:[s("bandsintown"),s("artists"),s("concerts"),s("events"),s("music"),s("shows"),s("tours")]}};t[e[r.SPACER]]={value:{id:"spacer",ctor:n.Squarespace.Block.Spacer,label:s("Spacer"),tags:[s("spacer"),s("area"),s("blank"),s("structure"),s("room")]}};t[e[r.HORIZONTAL_RULE]]={value:{id:"horizontal-rule",ctor:n.Squarespace.Block.HorizontalRule,label:s("Line"),tags:[s("line"),s("divider"),s("horizontal rule"),s("hr")]}};t[e[r.SEARCH]]={value:{id:"search",ctor:n.Squarespace.Block.Search,label:s("Search"),tags:[s("search"),s("bing"),s("google search"),s("lookup"),s("look up"),s("find")]}};t[e[r.COLLECTION_LINK]]={value:{id:"collection-link",ctor:n.Squarespace.Block.CollectionLink,label:s("Content Link"),tags:[s("content link"),s("navigation"),s("page")]}};t[e[r.BUTTON]]={value:{id:"button",ctor:n.Squarespace.Block.Button,label:s("Button"),tags:[s("button"),s("link"),s("call to action")]}};t[e[r.SUMMARY]]={value:{id:"summary",ctor:n.Squarespace.Block.Summary,label:s("Summary"),tags:[s("summary"),s("archive"),s("collection"),s("index"),s("list")]}};t[e[r.SUMMARY_V2]]={value:{id:"summary-v2",ctor:n.Squarespace.Block.SummaryV2,label:s("Summary"),tags:[s("summary"),s("archive"),s("collection"),s("index"),s("list")]}};t[e[r.TAGCLOUD]]={value:{id:"tagcloud",ctor:n.Squarespace.Block.Tagcloud,label:s("Tag Cloud"),tags:[s("tag cloud"),s("category"),s("list"),s("taxonomy")]}};t[e[r.POSTS_BY_TAG]]={value:{id:"posts-by-tag",ctor:n.Squarespace.Block.PostsByTag,label:s("Tag List"),tags:[s("tag list"),s("category")]}};t[e[r.POSTS_BY_AUTHOR]]={value:{id:"posts-by-author",ctor:n.Squarespace.Block.PostsByAuthor,label:s("Author List"),tags:[s("author list"),s("people"),s("contributors")]}};t[e[r.POSTS_BY_CATEGORY]]={value:{id:"posts-by-category",ctor:n.Squarespace.Block.PostsByCategory,label:s("Category List"),tags:[s("category list"),s("tag"),s("taxonomy")]}};t[e[r.POSTS_BY_MONTH]]={value:{id:"posts-by-month",ctor:n.Squarespace.Block.PostsByMonth,label:s("Month List"),tags:[s("month list"),s("calendar"),s("time")]}};t[e[r.ARCHIVE]]={value:{id:"archive",ctor:n.Squarespace.Block.Archive,label:s("Archive"),tags:[s("archive"),s("list"),s("index"),s("tag list"),s("category"),s("author list"),s("people"),s("contributors"),s("category list"),s("tag"),s("taxonomy"),s("month list"),s("year list"),s("calendar"),s("time"),s("group by month"),s("group by year"),s("group by author"),s("group by tag"),s("group by category"),s("group"),s("group by")]}};t[e[r.TWITTER]]={value:{id:"twitter",ctor:n.Squarespace.Block.Twitter,label:s("Twitter"),tags:[s("twitter"),s("feed"),s("social")]}};t[e[r.FOURSQUARE]]={value:{id:"foursquare",ctor:n.Squarespace.Block.Foursquare,label:s("Foursquare Swarm"),tags:[s("foursquare"),s("social"),s("location")]}};t[e[r.SOCIAL_ACCOUNT_LINKS]]={value:{id:"social-links",ctor:n.Squarespace.Block.SocialAccountLinks,label:s("Social Links"),tags:[s("social links"),s("facebook"),s("twitter"),s("google"),s("tumblr"),s("dropbox"),s("foursquare"),s("instagram"),s("flickr"),s("youtube"),s("vimeo"),s("linkedin"),s("dribble"),s("pinterest"),s("smugmug"),s("500px"),s("email"),"e-mail",s("github"),s("soundcloud"),s("spotify"),s("itunes store"),s("google play")]}};t[e[r.SOCIAL_ACCOUNT_LINKS_V2]]={value:{id:"social-links",ctor:n.Squarespace.Block.SocialAccountLinksV2,label:s("Social Links"),tags:[s("social links"),s("facebook"),s("twitter"),s("google"),s("tumblr"),s("dropbox"),s("foursquare"),s("instagram"),s("flickr"),s("youtube"),s("vimeo"),s("linkedin"),s("dribble"),s("pinterest"),s("smugmug"),s("500px"),s("email"),"e-mail",s("github"),s("soundcloud"),s("spotify"),s("itunes store"),s("google play")]}};t[e[r.RSS]]={value:{id:"rss",ctor:n.Squarespace.Block.Rss,label:s("RSS"),tags:[s("rss"),s("news feed"),s("subscribe"),s("subscription"),s("rich site summary"),s("really simple syndication")]}};t[e[r.FIVEHUNDREDPIX]]={value:{id:"fivehundredpix",ctor:n.Squarespace.Block.Fivehundredpix,label:s("500px"),tags:[s("500px"),s("image"),s("photo"),s("picture")]}};t[e[r.INSTAGRAM]]={value:{id:"instagram",ctor:n.Squarespace.Block.Instagram,label:s("Instagram"),tags:[s("instagram"),s("image"),s("photo"),s("picture")]}};t[e[r.FLICKR]]={value:{id:"flickr",ctor:n.Squarespace.Block.Flickr,label:s("Flickr"),tags:[s("flickr"),s("image"),s("photo"),s("picture")]}};t[e[r.SOUNDCLOUD]]={value:{id:"soundcloud",ctor:n.Squarespace.Block.SoundCloud,label:s("SoundCloud"),tags:[s("soundcloud"),s("album"),s("audio"),s("media"),s("music player"),s("playlist")]}};t[e[r.CHART]]={value:{id:"chart",ctor:n.Squarespace.Block.Chart,label:s("Chart"),tags:[s("image"),s("chart"),s("graph"),s("data")]}};t[e[o.CHART_BAR]]={value:{id:"chart-bar",ctor:n.Squarespace.Block.Chart,label:s("Bar Chart"),defaultContentModel:{chartType:o.CHART_BAR,dataTable:n.ChartJS.getDefaultChartData(o.CHART_BAR)},tags:[s("image"),s("chart"),s("graph"),s("data"),s("bar")]}};t[e[o.CHART_LINE]]={value:{id:"chart-line",ctor:n.Squarespace.Block.Chart,label:s("Line Chart"),defaultContentModel:{chartType:o.CHART_LINE,dataTable:n.ChartJS.getDefaultChartData(o.CHART_LINE)},tags:[s("image"),s("chart"),s("graph"),s("data"),s("line")]}};t[e[o.CHART_PIE]]={value:{id:"chart-pie",ctor:n.Squarespace.Block.Chart,label:s("Pie Chart"),defaultContentModel:{chartType:o.CHART_PIE,dataTable:n.ChartJS.getDefaultChartData(o.CHART_PIE),legend:"visible"},tags:[s("image"),s("chart"),s("graph"),s("data"),s("pie")]}};t[e[o.GALLERY_SLIDESHOW]]={value:{id:"gallery-slideshow",ctor:n.Squarespace.Block.Gallery,label:s("Slideshow"),defaultContentModel:{design:"slideshow"},tags:[s("gallery"),s("slideshow")]}};t[e[o.GALLERY_CAROUSEL]]={value:{id:"gallery-carousel",ctor:n.Squarespace.Block.Gallery,label:s("Carousel"),defaultContentModel:{design:"slider",aspectRatio:d.DEFAULT_SLIDER_ASPECT_RATIO},tags:[s("gallery"),s("carousel"),s("slider")]}};t[e[o.GALLERY_GRID]]={value:{id:"gallery-grid",ctor:n.Squarespace.Block.Gallery,label:s("Grid"),defaultContentModel:{design:"grid"},tags:[s("gallery"),s("grid")]}};t[e[o.GALLERY_STACK]]={value:{id:"gallery-stack",ctor:n.Squarespace.Block.Gallery,label:s("Stack"),defaultContentModel:{design:"stacked"},tags:[s("gallery"),s("stacked")]}};t[e[o.SUMMARY_WALL]]={value:{id:"summary-wall",ctor:n.Squarespace.Block.SummaryV2,label:s("Wall"),defaultContentModel:{design:"autocolumns"},tags:[s("feature"),s("summary"),s("wall"),s("autocolumns")]}};t[e[o.SUMMARY_CAROUSEL]]={value:{id:"summary-carousel",ctor:n.Squarespace.Block.SummaryV2,label:s("Carousel"),defaultContentModel:{design:"carousel"},tags:[s("feature"),s("summary"),s("carousel")]}};t[e[o.SUMMARY_LIST]]={value:{id:"summary-list",ctor:n.Squarespace.Block.SummaryV2,label:s("List"),defaultContentModel:{design:"list"},tags:[s("feature"),s("summary"),s("list")]}};t[e[o.SUMMARY_GRID]]={value:{id:"summary-grid",ctor:n.Squarespace.Block.SummaryV2,label:s("Grid"),defaultContentModel:{design:"autogrid"},tags:[s("feature"),s("summary"),s("autogrid"),s("grid")]}};t[e[r.ZOLA]]={value:{id:"zola",ctor:n.Squarespace.Block.Zola,label:s("Zola"),tags:[s("zola"),s("wedding registry"),s("wedding"),s("weddings"),s("registry"),s("gettin' hitched!")]}};t[e[r.ACUITY]]={value:{id:"acuity",ctor:n.Squarespace.Block.Acuity,label:s("Appointment Scheduling"),tags:["acuity",s("calendar"),s("scheduling"),s("appointment"),s("appointments"),s("booking"),s("class"),s("classes"),s("yoga"),s("salon")]}};t[e[o.IMAGE_INLINE]]={value:{id:"image-inline",ctor:n.Squarespace.Block.Image,label:s("Inline"),defaultContentModel:{designLayout:"inline"},tags:[s("image"),s("inline"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[o.IMAGE_POSTER]]={value:{id:"image-poster",ctor:n.Squarespace.Block.Image,label:s("Poster"),defaultContentModel:{designLayout:"poster"},tags:[s("image"),s("poster"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[o.IMAGE_CARD]]={value:{id:"image-card",ctor:n.Squarespace.Block.Image,label:s("Card"),defaultContentModel:{designLayout:"card"},tags:[s("image"),s("card"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[o.IMAGE_OVERLAP]]={value:{id:"image-overlap",ctor:n.Squarespace.Block.Image,label:s("Overlap"),defaultContentModel:{designLayout:"overlap"},tags:[s("image"),s("overlap"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[o.IMAGE_COLLAGE]]={value:{id:"image-collage",ctor:n.Squarespace.Block.Image,label:s("Collage"),defaultContentModel:{designLayout:"collage"},tags:[s("image"),s("collage"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};t[e[o.IMAGE_STACK]]={value:{id:"image-stack",ctor:n.Squarespace.Block.Image,label:s("Stack"),defaultContentModel:{designLayout:"stack"},tags:[s("image"),s("stack"),s("banner"),s("gif"),s("photo"),s("picture"),s("PNG"),s("thumbnail")]}};var a={envInit:function(){n.Squarespace.SSWidget.prototype.initializer.apply(this);this._bindV6UIBlock()},_bindV6UIBlock:function(){n.after(this.removeBlock,this.trackEngagementRemoved,this);this.after("dropped",this.trackEngagementDropped,this)},trackEngagementRemoved:function(){this._trackInternal("remove")},trackEngagementDropped:function(){this._trackInternal("drop")},trackEngagementCreate:function(e){this._trackInternal("create",e)},_trackInternal:function(e,t){if(this.get("editController").isMobileApp())return;if(n.Lang.isString(e)&&e.length>0){var a="sidebar";n.config.win.Static.IN_BACKEND&&(n.one("body").hasClass("collection-type-page")?a="page":n.one("body").hasClass("dialog-open")&&(a="post"));var i=this.get("model")?this.get("model").get("designLayout"):null;t=n.merge({backend:n.config.win.Static.IN_BACKEND,region:a},t);n.Squarespace.Analytics.trackInternal("engagement_block_"+e,n.merge({type:c.BlockTypeKeys[this.get("type")],imageBlockLayout:i},t));n.Global.fire("Block:"+e,n.merge({blockType:c.BlockTypeKeys[this.get("type")]},t))}},removeBlock:function(i){function e(){var e=this.get("boundingBox");!i&&e.ancestor(".sqs-block-remover")&&e.unwrap();this.queueForDestruction();var t=this.get("boundingBox").ancestor(".sqs-layout");var a=this.get("editController");a.cleanGrids(t);a.alignInsertPoints(t)}if(i)e.call(this);else{var t=n.Node.create('<div class="sqs-block-remover">');t.setStyle("overflow","hidden");this.get("boundingBox").wrap(t);var a=new n.Anim({node:t,to:{height:0,opacity:0},duration:.5,easing:n.Easing.easeOutStrong});a.on("end",e,this);this._anims.add(a);a.run()}}};n.mix(n.SQS.LayoutEngine.Block.Base.prototype,n.Squarespace.SSWidget.prototype);n.mix(n.SQS.LayoutEngine.Block.Base.prototype,a,true);var i={_syncEditableButtons:function(){var e=this.get("editingButtons");if(!e&&this._editingButtons)this._editingButtons.destroy();else if(e&&!this._editingButtons){this._editingButtons=new n.Squarespace.Block.Editor.ButtonContainer({render:this.get("host").get("boundingBox"),blockName:this.get("blockName"),blockType:this.get("blockType"),includeEdit:this.get("includeEdit"),includeRemove:!this.get("lockedLayout")});this._registerEvent(this._editingButtons.after("edit",n.bind(function(){this.set("editing",true)},this)),this._editingButtons.after("remove",n.bind(this.removeBlock,this)))}}};n.mix(n.SQS.LayoutEngine.Block.Editor.Base.prototype,i,true);n.namespace("Squarespace.Layout").RenderableBlocksWebApp=n.Base.create("squarespace-layout-renderable-blocks",n.Base,[],{},{ATTRS:t})},"1.0",{requires:["base","@sqs/layout-engine/block-unrenderable","squarespace-block-acuity","squarespace-block-amazon","squarespace-block-archive","squarespace-block-audio","squarespace-block-button","squarespace-block-calendar","squarespace-block-code","squarespace-block-collection-link","squarespace-block-donation","squarespace-block-editor-button-container","squarespace-block-embed","squarespace-block-soundcloud","squarespace-block-fivehundredpix","squarespace-block-flickr","squarespace-block-form","squarespace-block-foursquare","squarespace-block-gallery","squarespace-block-horizontal-rule","squarespace-block-html","squarespace-block-content-html-editor","squarespace-block-image","squarespace-block-image-editor","squarespace-block-instagram","squarespace-block-link","squarespace-block-map","squarespace-block-markdown","squarespace-block-member-area","squarespace-block-menu","squarespace-block-newsletter","squarespace-block-opentable","squarespace-block-opentable-v2","squarespace-block-posts-by","squarespace-block-product","squarespace-block-quote","squarespace-block-rss","squarespace-block-search","squarespace-block-social-account-links","squarespace-block-social-account-links-v2","squarespace-block-social-summary","squarespace-block-spacer","squarespace-block-summary","squarespace-block-summary-v2","squarespace-block-tagcloud","squarespace-block-tourdates","squarespace-block-twitter","squarespace-block-video","squarespace-block-video-editor","squarespace-block-chart","squarespace-block-zola","squarespace-chartjs-helpers","squarespace-ss-widget"]})},7716:function(e,t,a){var i=a(24).t;var n=a(5328).BlockTypeKeys;var s=a(1007);var r=a(1048);YUI.add("@sqs/layout-engine/block-unrenderable",function(t){function a(e){if(e)return t.UA.mobile?i("{blockName} blocks cannot be rendered in the mobile editor.",{blockName:e}):i("{blockName} blocks cannot be rendered.",{blockName:e});return t.UA.mobile?i("This block cannot be rendered in the mobile editor."):i("This block cannot be rendered.")}t.namespace("SQS.LayoutEngine.Block");t.SQS.LayoutEngine.Block.Unrenderable=t.Base.create("block-unrenderable",t.SQS.LayoutEngine.Block.Base,[],{renderUI:function(){var e=this.get("blockType");this.get("contentBox").addClass("sqs-blockStatus-box").setHTML('<div class="sqs-blockStatus-box-message">'+a(e)+"</div>")}},{CSS_PREFIX:"sqs-blockStatus",ATTRS:{blockType:{valueFn:function(){return r(s(n[this.get("type")]))}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},7717:function(e,t,a){var i=a(701);var s=a(100);var r=a(114);var o=a(87);var l=a(1342);var c=a(2755);YUI.add("squarespace-block-acuity",function(e){var t={};var n=e.namespace("Squarespace.Block").Acuity=e.Base.create("block-acuity",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._debouncedRender=s(function(e){var t=this.get("contentBox");this._renderBlock(e);t.removeClass(n.CSS_IS_RENDERING)},this.get("contentRefreshRate"))},bindUI:function(){var t=this.get("contentBox");this._registerEvent(this.get("model").on("change",function(e){t.addClass(n.CSS_IS_RENDERING)}));this._registerEvent(this.get("model").after("change",function(e){this._debouncedRender(e)},this))},_renderSuccess:function(e){n.superclass._renderSuccess.call(this,e);var t=this.get("contentBox");var a=t.one("script").getAttribute("src");var i=document.createElement("script");i.src=a;t.append(i)}},{CSS_PREFIX:"sqs-block-acuity",CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{valueFn:function(){if(c.isSchedulingEnabled())return e.Squarespace.Block.Editor.Scheduling;if(l.isMobileContentEditingEnabled()||r.isFeatureEnabled(o.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Acuity}},type:{value:i.ACUITY},defaultContentModel:{value:t},contentRefreshRate:{value:800}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-acuity-editor","squarespace-block-scheduling-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7718:function(e,t,a){var i=a(24).t;var n=a(207);var s=a(5985);YUI.add("squarespace-block-acuity-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Acuity=e.Base.create("acuity-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var e=this.configDialog.get("dialog");e.on("shown",this.initializeDialog,this)},initializeDialog:function e(){var t=this.configDialog.get("dialog");var a=t.getField("acuityUrl");a.after("dataChange",this.sanitizeUrl,this)},sanitizeUrl:function(e){var t=e.newVal.trim();if(!s(t)){i.set("data",e.prevVal);return}var a=this.configDialog.get("dialog");var i=a.getField("acuityUrl");i.set("data",t)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Acuity")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Appointment Scheduling")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Acuity=e.Base.create("block-acuity-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:490,height:290,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:i("Appointment Scheduling"),icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.HTML,config:{className:"description",content:i('<p>Allow visitors to book appointments and classes directly on your site with <a href="{acuityLink}" target="_blank">Acuity Scheduling</a>.</p><p>If you already use Acuity, add the link to your scheduling page, calendar, or appointment type. <a href="{kbArticleLink}" target="_blank">Learn More</a></p>',{kbArticleLink:n.ACUITY_SCHEDULER,acuityLink:"https://www.acuityscheduling.com/?utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"})}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"acuityUrl","strings.title":i("Acuity Scheduling Page Link"),"strings.placeholder":"https://app.acuityscheduling.com/schedule.php?owner=125982"}},{ctor:e.Squarespace.DialogFields.HTML,config:{content:i('If you don\'t have an account, <a href="{acuitySignupLink}" target="_blank">sign up for Acuity Scheduling</a>.',{acuitySignupLink:"https://acuityscheduling.com/signup.php?action=form&type=professional&freeTrial=1&lite=1&btn=sqsp-block&utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"})}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-hidden","squarespace-model-editor"]})},7719:function(e,t,a){var i=a(24).t;var r=a(565);var n=a(8998);var s=a(6265);var o=a(6264);var l=a(6861).isDirty;var c=a(9018);var d=a(9019);var u=null;YUI.add("squarespace-block-scheduling-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Scheduling=e.Base.create("scheduling-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.prevState=null;var e=this.configDialog.get("dialog");e.on("show",this.initializeDialog,this);e.on("cancel",this.onCancel,this);e.on("preClose",this.handleUrlValidation,this);e.on("button-saveAndClose",this.onSaveAndClose,this);e.on("send-requested",this.onSaveAndClose,this);this.onStateChange=this.onStateChange.bind(this);this.onWindowFocus=this.onWindowFocus.bind(this);this.onAlertConfirm=this.onAlertConfirm.bind(this);o.listen(this.onStateChange);window.addEventListener("focus",this.onWindowFocus)},onCancel:function(){var e=this.configDialog.get("model");s.revertEdits(e.get("clientId"))},handleUrlValidation:function(){var e=this.configDialog.get("model");var t=e.get("acuityUrl");if(!d(t)){s.change(e.get("clientId"),{urlValidationErrorMessage:i("Link should be a valid scheduling link from Squarespace or Acuity Scheduling.")});return false}return true},onSaveAndClose:function(){var e=this.configDialog.get("model");s.commitEdits(e.get("clientId"))},destructor:function(){o.unlisten(this.onStateChange);var e=this.configDialog.get("model");s.reset.defer(e.get("clientId"));window.removeEventListener("focus",this.onWindowFocus)},onWindowFocus:function(){s.maybeFetchData()},onStateChange:function(e){var t=this.prevState;this.prevState=r(e);t&&t.userDataRequestFailed||!e.userDataRequestFailed||this.showErrorAlert();if(!e.userDataRequestResolved)return;var a=this.configDialog.get("model");var i=a.get("clientId");var n=e.selectionState[i];if(!n)return;var s=c(e,i);setTimeout(function(){e.userData&&a.set("userId",e.userData.userId);a.setAttrs(s)})},showErrorAlert:function(){if(u)return;u=new e.Squarespace.Widgets.Alert({position:e.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":i("Connection Error"),"strings.message":i("Make sure you’re connected to the Internet and try again. If the problem persists, contact us.")});u.on("confirm",this.onAlertConfirm)},onAlertConfirm:function(){s.resolveFetchDataFailure();u=null},initializeDialog:function e(){var t=this.configDialog.get("model").getAttrs();s.startEditing(t)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Scheduling")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Scheduling")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Scheduling=e.Base.create("block-scheduling-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:340,height:425,discardChangesConfirmation:true,initialDataByReference:true,tabs:[{title:i("Scheduling"),name:"scheduling",reactData:{component:n,props:{clientId:{$valueFn:function(){return this.get("model").get("clientId")}.bind(this)},getData:{$valueFn:function(){return function(){return{isDirty:l(o.getState(),this.get("model").get("clientId"))}}.bind(this)}.bind(this)}}}}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-model-editor"]})},7720:function(e,t,a){var i=a(0);var n=a(60);var s=a(9020);var r=a(6862);var o=a(5800);var l=a(24).t;var c=a(757);YUI.add("squarespace-block-schema-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Schema=a.Base.create("EditingDialog",a.Squarespace.Block.Editor.SchemaBase,[],{_renderEditor:function(){var e=this.get("config");var t=this.get("host");e.handlers&&e.handlers.onBeforeMount&&"function"===typeof e.handlers.onBeforeMount?e.handlers.onBeforeMount(t,this.get("isBlockEditorOpen")).then(this._doRenderEditor.bind(this)):this._doRenderEditor()},_doRenderEditor:function(){var e=this.get("host");var t=this.get("config");n.render(i.createElement(s,{host:e,id:e.get("id"),config:t,initialValue:r.getValueWithDefaults(e.get("model").toJSON(),t.defaultData),isOpen:this.get("isBlockEditorOpen"),onRequestClose:this.closeEditor.bind(this),onChange:this.handleOnChange.bind(this)}),this.getEditorHost())},destructor:function(){var e=this.getEditorHost();n.unmountComponentAtNode(e);e.parentNode&&e.parentNode.removeChild(e)},getEditorHost:function(){var e=this.get("host").get("id");var t="editor"+e;var a=document.getElementById(t);if(a)return a;a=document.createElement("div");a.id=t;document.body.appendChild(a);return a},getEditorConfig:function(){var e=this.getEditorConfigKey();var t=o[e+"_web"]||o[e];if(!t.uiSchema||0===t.uiSchema.length)return this.getConfigWithEditingButtons({meta:t.meta,uiSchema:[{type:"context",title:l("Unsupported block"),properties:{description:l("Currently, editing this block is not supported.<br>Visit Squarespace from your desktop computer to edit this block.")}}]});return a.merge(this.get("defaultEditorConfig"),this.getConfigWithEditingButtons(t))},getConfigWithEditingButtons:function(e){return c.isMobile()?Object.assign({},e,{uiSchema:e.uiSchema.concat([{type:"spacer",properties:{gridMultiplier:2}},{type:"button",properties:{color:"warning",label:l("Remove block"),withConfirmation:{leftButtonLabel:l("No"),rightButtonLabel:l("Yes"),title:l("Remove this block?"),message:l("This will delete the block and its content. This cannot be undone.")},onClick:this.removeBlock.bind(this)}}])}):e}},{NS:"blockEditor"})},"1.0",{requires:["squarespace-block-schema-editor-base"]})},7721:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a(5));var r=n(a(2));var o=n(a(0));var l=a(4196);var c=i(a(4123));function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var g=function e(t){return o.default.createElement(c.default,(0,s.default)({},t,{providerConfigurations:(0,l.isCoreCmsVariant)(l.YOUTUBE_OEMBED)&&{youtube:{config:u({},c.EmbedResolvers.youtube.config,{format:"json",serviceUrl:"/api/oembed/youtube"})}}}))};t.default=g;e.exports=t.default},7722:function(e,t,a){var i=a(6862);var n=a(757);YUI.add("squarespace-block-schema-editor-base",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.SchemaBase=e.Base.create("squarespace-block-schema-editor-base",e.SQS.LayoutEngine.Block.Editor.SchemaBase,[],{initializer:function(){t.superclass.initializer.call(this);this._registerEvent(this.after("isBlockEditorOpenChange",this._renderEditor,this))},_renderEditor:function(){throw new Error("_renderEditor not implemented")},openEditor:function(e){if(!e)return;this.fire("show");this.set("config",e);this.set("isBlockEditorOpen",true)},closeEditor:function(){this.fire("dismiss");this.set("editing",false);this.set("isBlockEditorOpen",false)},handleOnChange:function(e){this.get("host").get("model").setAttrs(e);this.fire("render-anchor",e)}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){var e=this.get("host").get("blockTypeName");return i.meta.getTitle(e)}},eventNames:{value:["show","dismiss"]},editingEvent:{value:n.isMobile()?["click"]:["dblclick"]},editingButtons:{value:!n.isMobile()},isBlockEditorOpen:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},config:{value:{}}}})},"1.0",{requires:["@sqs/layout-engine/block-schema-editor-base","@sqs/layout-engine/block-editor-base"]})},7723:function(e,t,a){var i=a(4156);YUI.add("squarespace-premium-block-mixin",function(e){e.namespace("Squarespace.Block").PremiumBlockMixin=e.Base.create("premium-block-mixin",e.Base,[],{initializer:function(){this._afterRenderHandle=e.Do.after(this._afterRenderSuccess,this,"_renderSuccess",this)},destructor:function(){this._afterRenderHandle.detach()},_afterRenderSuccess:function(){i.renderBlockWrapper({blockType:this.get("type"),node:this.get("boundingBox").getDOMNode()})}},{})},"1.0",{requires:["base"]})},7724:function(e,t,a){var i=a(701);YUI.add("squarespace-block-amazon",function(e){var t=e.Base.create("AmazonModel",e.Model,[],{},{ATTRS:{alignment:{value:"left"},showImage:{validator:e.Lang.isBoolean,value:true},showTitle:{validator:e.Lang.isBoolean,value:true},showAuthor:{validator:e.Lang.isBoolean,value:true}}});e.namespace("Squarespace.Block").Amazon=e.Base.create("block-amazon",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-amazon",MODEL:t,ATTRS:{type:{value:i.AMAZON},editor:{value:e.Squarespace.Block.Editor.Amazon}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-amazon-editor","squarespace-premium-block-mixin"]})},7725:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-amazon-editor",function(a){a.namespace("Squarespace.Block.Editor").Amazon=a.Base.create("amazon-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Amazon")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Amazon")}}});a.namespace("Squarespace.Block.ModelEditorDialog").Amazon=a.Base.create("blockAmazonEditor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){var e=this.get("model").get("showPrice");var t={width:420,primaryTabs:[{title:i("Amazon Product"),icon:"/universal/images-v6/icons/icon-amazon-16-light.png",scroll:false,fields:[{ctor:a.Squarespace.DialogFields.Description,text:i('Display and link to an item on Amazon. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.AMAZON_EDITOR})},{ctor:a.Squarespace.DialogFields.ProductChooser,name:"amazonProduct",mode:"amazon",maxResults:3,acConfig:{queryDelay:500}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Alignment"),name:"alignment",description:i("Select alignment for this block."),className:"thin dark",defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showImage",strings:{title:i("Show Image"),description:i("Show a thumbnail image of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showTitle",strings:{title:i("Show Title"),description:i("Show the title of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showAuthor",strings:{title:i("Show Author"),description:i("Show the author of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,$when:function(){return e},config:{name:"showPrice",strings:{title:i("Show Price"),description:i("Display the current price of this product from Amazon.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showBuyButton",strings:{title:i("Add Buy Button"),description:i("Add a button below this product to buy it on Amazon.com.")}}}]}]};return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-product-chooser","squarespace-dialog-select"]})},7726:function(e,t,a){var i=a(24).t;var o=a(24).pluralize;var l=a(229);YUI.add("squarespace-dialog-product-chooser",function(n){var s=60;n.Squarespace.ProductChooserModes={squarespace:Class.create({TITLE:i("Find a Product"),DATA_PROPERTY:"id",URL:"/api/content-items/search",TEMPLATE:'<div class="thumbnail-wrapper"><img style="margin-left:{marginLeft}px" src="/item/{id}?format=100w" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{numVariants}</div></div>',render:function(e){var t=0;if(n.Lang.isValue(e.originalSize)&&n.Lang.isValue(e.mediaFocalPoint)){var a=n.Array.map(e.originalSize.split("x"),Number);var i=s*a[0]/a[1];t=(s-i)*e.mediaFocalPoint.x}return n.Lang.sub(this.TEMPLATE,{id:e.id,title:n.Escape.html(e.title),numVariants:o({one:"variant",other:"variants"},e.variants.length),marginLeft:t})},acResultFormatter:function(e,t){return n.Array.map(t,function(e){return'<div class="ac-product">'+this.render(e.raw)+"</div>"},this)},getAcRequestTemplate:function(){var e="?q={query}";e+=n.Lang.sub("&collectionType={collectionType}&recordType={recordType}&isPublished={isPublished}",{collectionType:l.PRODUCTS,recordType:n.Squarespace.Enums.RecordType.STORE_ITEM,isPublished:true});return e}}),amazon:Class.create({DATA_PROPERTY:"asin",URL:"/api/config/AmazonProductSearch",TEMPLATE:'<div class="thumbnail-wrapper"><img src="{thumbUrl}" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{author}</div></div>',TITLE:i("Search For Product Keywords or paste product URL"),render:function(e){return n.Lang.sub(this.TEMPLATE,{thumbUrl:e.imageUrlMedium,title:n.Escape.html(e.title),author:this._formatByline(e)})},acResultFormatter:function(e,t){return n.Array.map(t,function(e){return'<div class="ac-product">'+this.render(e.raw,e.highlighted)+"</div>"},this)},getAcRequestTemplate:function(){return"?q={query}"},_formatByline:function(e){if(e.authors&&e.authors.length)return i("By {productAuthors}",{productAuthors:e.authors.join(", ")});if(e.artists&&e.artists.length)return i("By {productArtists}",{productArtists:e.artists.join(", ")});if(e.actors&&e.actors.length)return i("Starring {productActors}",{productActors:e.actors.join(", ")});return e.manufacturer}})};n.namespace("Squarespace.DialogFields");var r=n.Squarespace.DialogFields.ProductChooser=n.Base.create("productChooser",n.Squarespace.DialogField2,[],{initializer:function(e){this._mode=new(n.Squarespace.ProductChooserModes[this.get("mode")])},destructor:function(){this._autoCompleteField&&this._autoCompleteField.destroy()},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");this._hintNode=e.appendChild('<div class="hint">'+this._mode.TITLE+"</div>");this._productSearchNode=e.appendChild('<div class="product-search"></div>');this._productPreviewNode=e.appendChild('<div class="product-preview"></div>');this._productSearchIconNode=this._productSearchNode.appendChild('<div class="search-icon"></div>');this._productSearchNoticeNode=this._productSearchNode.appendChild(i('<div class="product-search-result-notice"><div class="notice-text">No products found.</div></div>'));this._productSearchAutoCompleteNode=this._productSearchNode.appendChild('<div class="product-search-auto-complete"></div>');this._productSearchNoticeNode.hide();this.get("icon")&&this._productSearchNode.addClass("has-icon");this._autoCompleteField=this._createAutoCompleteField();this._autoCompleteField.render(this._productSearchAutoCompleteNode);this.set("errorFlyoutAnchor",this._productSearchAutoCompleteNode)},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this._autoCompleteField;var a=t.get("acWidget");var i=this._productSearchNoticeNode;e.delegate("click",function(){this.set("data",null)},".clear-selected-product",this);this._registerEvent(t.on("select",this._onAutoCompleteSelect,this));this._registerEvent(t.on("blur",t.hideError,this));this._registerEvent(a.on("results",function(e){e.results.length>0?i.setStyle("display","none"):i.setStyle("display","block")}));this._registerEvent(a.on("clear",function(){i.setStyle("display","none")}))},syncUI:function(){r.superclass.syncUI.call(this);var e=this.get("contentBox");var t=this._hintNode;var a=this._autoCompleteField;a.clear();a.focus();this._updatePreview(this.get("data"));if(n.Lang.isValue(this.get("data"))){e.addClass("has-data");e.removeClass("no-data");t.setContent(i("Selected Product"))}else{e.addClass("no-data");e.removeClass("has-data");t.setContent(i("Find a Product"))}},focus:function(){this._autoCompleteField.focus()},getErrors:function(){return this.get("required")&&!n.Lang.isValue(this.get("data"))?[i("You must choose a product")]:[]},didDataChange:function(){var e=this.get("data");if(n.Lang.isObject(this._initialData)&&n.Lang.isObject(e))return e.asin!==this._initialData.asin;return this._initialData!==e},_onAutoCompleteSelect:function(){var e=this._autoCompleteField;var t=e.get("data");var a=e.get("dataObject");n.Lang.isValue(t)&&""!==t&&("amazon"===this.get("mode")?this.set("data",a):this.set("data",t))},_updatePreview:function(e){if(!n.Lang.isValue(e))return;if("squarespace"===this.get("mode")&&n.Lang.isString(e)){this._getProductItem(e);return}var t=this._productPreviewNode;var a=this._mode.render(e)+'<div class="clear-selected-wrapper"><div class="clear-selected-product"></div></div>';t.setContent(a);t.setStyle("opacity",0);t.show("fadeIn",{duration:.25})},_getProductItem:function(e){n.Data.get({url:"/api/commondata/GetItem",data:{itemId:e},success:function(e){this._updatePreview(e.item)},failure:function(e){this.set("data",null)}},this)},_createAutoCompleteField:function(){var e=this._mode;var t={source:this._createDataSource(),requestTemplate:e.getAcRequestTemplate(),resultTextLocator:"title",resultFormatter:n.bind(e.acResultFormatter,e),maxResults:this.get("maxResults")};var a=n.merge(t,this.get("acConfig"));return new n.Squarespace.DialogFields.AutoComplete({"strings.placeholder":this.get("strings.placeholder"),requireListEntry:true,responseDataProperty:this._mode.DATA_PROPERTY,acConfig:a})},_createDataSource:function(){var e=new n.DataSource.IO({source:this._mode.URL});e.plug(n.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:"amazon"===this.get("mode")?"products":"results"}});e.on("error",function(e){if(!e.stopped){var t=JSON.parse(e.data.response);var a=t.error;n.Lang.isValue(a)&&this._autoCompleteField.showError(a)}},this);return e}},{CSS_PREFIX:"sqs-product-chooser",ATTRS:{mode:{value:"squarespace",validator:function(e){if(-1!==["squarespace","amazon"].indexOf(e))return true;false;return false},writeOnce:"initOnly"},strings:{value:{placeholder:i("Search")}},icon:{value:false},maxResults:{validator:n.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},acConfig:{validator:n.Squarespace.AttrValidators.isObject,writeOnce:"initOnly",value:{}},errorFlyoutAnchor:{value:null,readOnly:false,validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Node)}}})},"1.0",{requires:["base","datasource","squarespace-attr-validators","squarespace-content-item-types-enum-record-type","squarespace-dialog-auto-complete","squarespace-dialog-field-2","squarespace-util"]})},7727:function(e,t,a){var n=a(21);YUI.add("squarespace-dialog-auto-complete",function(i){var a=i.Squarespace.DialogFields.AutoComplete=i.Base.create("AutoComplete",i.Squarespace.DialogFields.Text,[],{destructor:function(){var e=this.get("acWidget");e&&e.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");new i.Squarespace.Spinner({color:"dark",render:e});var t=new i.Squarespace.Widgets.ScrollingAutoCompleteList(i.merge({inputNode:this._textField},this.get("acConfig")));this._set("acWidget",t);t.render()},bindUI:function(){a.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this.get("acWidget");t.on("query",function(){e.addClass("querying")},this);t.on("results",function(){e.removeClass("querying")},this);this.get("requireListEntry")&&t.after("select",this._afterSelect,this)},syncUI:function(){a.superclass.syncUI.call(this);this._textField.set("value",this.get("data"))},focus:function(){this._textField.focus()},clear:function(){this.set("data",null);this._textField.set("value","");this.get("acWidget")._onInputValueChange({newVal:""})},_afterSelect:function(e){var t=e.result.raw;var a=this.get("responseDataProperty");if(i.Lang.isValue(a)){this.set("data",t[a]);this._set("dataObject",t)}else this.set("data",t);this.fire("select",{data:this.get("data")})},_afterDataChange:n,_afterValueChange:function(e){this.get("requireListEntry")||a.superclass._afterValueChange.call(this,e)},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",false)}},{CSS_PREFIX:"sqs-auto-complete",ATTRS:{data:{value:null,validator:function(e){return true}},acConfig:{value:null,setter:function(e){if(!i.Lang.isValue(e.source))throw new Error("No data source provided for AutoComplete");return i.merge({activateFirstItem:true,resultHighlighter:"phraseMatch"},e)},validator:i.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},acWidget:{value:null,validator:i.Squarespace.AttrValidators.isNullOrInstanceOf(i.Squarespace.Widgets.ScrollingAutoCompleteList),readOnly:true,writeOnce:true},requireListEntry:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},responseDataProperty:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},dataObject:{value:null,validator:i.Squarespace.AttrValidators.isNullOrObject,readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-text","squarespace-scrolling-auto-complete-list","squarespace-spinner"]})},7728:function(e,t){YUI.add("squarespace-scrolling-auto-complete-list",function(a){a.namespace("Squarespace.Widgets");var i="keyboardContinue";var n="listMouseUp";var s="listMouseDown";var r=a.Squarespace.Widgets.ScrollingAutoCompleteList=a.Base.create("ScrollingAutoCompleteList",a.AutoCompleteList,[],{initializer:function(){this.publish(i);this.publish(n);this.publish(s)},renderUI:function(){r.superclass.renderUI.call(this);var e=this._scrollNode=a.Node.create('<div class="'+this.getClassName()+'-scroll-container"></div>');this.get("listNode").wrap(e);e.hide();var t=this.get("className");t&&this.get("contentBox").addClass(t)},bindUI:function(){r.superclass.bindUI.call(this);var t=this._scrollNode;var e=this.get("inputNode");this.after("activeItemChange",function(e){e.newVal&&this._scrollToActiveItem()},this);this.on("results",function(e){e.results.length>0?t.show():t.hide()},this);this.on(["select","clear"],function(){t.hide()});this.get("boundingBox").on(["focusoutside","clickoutside"],function(e){t.hide()});e.on("keydown",function(e){switch(e.keyCode){case 13:this.selectItem();this.fire(i);break;case 9:if(this.get("activeItem")){this.selectItem();this.fire(i)}break;case 27:this.hide();break;case 38:this._activatePrevItem();break;case 40:this._activateNextItem();break}},this);this._listNode.delegate("mouseup",function(e){this.fire(n);e.preventDefault()},this._SELECTOR_ITEM,this);this._listNode.delegate("mousedown",function(e){this.fire(s)},this._SELECTOR_ITEM,this)},_activateNextItem:function(){r.superclass._activateNextItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getFirstItemNode())},_activatePrevItem:function(){r.superclass._activatePrevItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getLastItemNode())},_scrollToActiveItem:function(){this.get("activeItem").scrollIntoView();var e=this._scrollNode;var t=e.get("scrollTop");var a=e.one("li:first-child").get("offsetHeight");e.set("scrollTop",a*Math.round(t/a))}},{CSS_PREFIX:"sqs-scroll-ac",ATTRS:{className:{validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["autocomplete","base","event-outside","lang/autocomplete-list","squarespace-attr-validators"]})},7731:function(e,t,a){var i=a(24).t;var n=a(701);var s=a(4126);var r=a(4127);var o=a(114);var l=a(87);var c=a(1342);YUI.add("squarespace-block-archive",function(e){e.namespace("Squarespace.Block").Archive=e.Base.create("block-archive",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{_getDefaultContent:function(){return{collectionId:"",layout:"index",blockId:e.Squarespace.Utils.getGuid(),groupBy:r.MONTH,dropdownTitle:i("Archive"),authorSortBy:s.FIRSTNAME,categoryAndTagSortBy:s.NAME,orderAscending:false,showDate:true,showCount:false,multiColumns:true}}},{CSS_PREFIX:"sqs-block-archive",ATTRS:{editor:{valueFn:function(){if(c.isMobileContentEditingEnabled()||o.isFeatureEnabled(l.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Archive}},type:{value:n.ARCHIVE},defaultContentModel:{valueFn:"_getDefaultContent"}}})},"1.0",{requires:["base","model","squarespace-block-archive-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-model-sync-base","squarespace-util","squarespace-premium-block-mixin"]})},7732:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-archive-editor",function(e){e.namespace("Squarespace.Block.Editor").Archive=e.Base.create("archive-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Archive")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Archive")}}})},"1.0",{requires:["base","squarespace-block-archive-model-editor","squarespace-damask-context-globals"]})},7733:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(523);var r=a(4126);var o=a(4127);var l=a(207);YUI.add("squarespace-block-archive-model-editor",function(t){t.namespace("Squarespace.Block.ModelEditorDialog");t.Squarespace.Block.ModelEditorDialog.Archive=t.Base.create("ArchiveModelEditorDialog",t.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._setMultiColumnsFieldVisibility();this._setSortAndOrderFieldVisibility();this._setOrderAscendingFieldVisibility();this._setShowDateFieldVisibility();this._setDropdownTitleFieldVisibility();this._setTextAlignmentFieldVisibility()},this);this.get("model").after("layoutChange",function(){this._setMultiColumnsFieldVisibility();this._setOrderAscendingFieldVisibility();this._setShowDateFieldVisibility();this._setDropdownTitleFieldVisibility();this._setTextAlignmentFieldVisibility()},this);this.get("model").after("groupByChange",function(){this._setSortAndOrderFieldVisibility();this._setOrderAscendingFieldVisibility()},this)},_setMultiColumnsFieldVisibility:function(){var e=this.get("model").get("layout");var t="index"===e||"list"===e;this.get("dialog").getField("multiColumns").set("visible",t)},_setSortAndOrderFieldVisibility:function(){var e=this.get("dialog");e.getField("authorSortBy").set("visible",this.isGroupByAuthor());e.getField("categoryAndTagSortBy").set("visible",this.isGroupByCategory()||this.isGroupByTag());var t=""===this.get("model").get("collectionId");e.getField("authorSortBy").get("boundingBox").toggleClass("disabled",t);e.getField("categoryAndTagSortBy").get("boundingBox").toggleClass("disabled",t)},_setOrderAscendingFieldVisibility:function(){var e="index"===this.get("model").get("layout");var t=this.isGroupByMonth()||this.isGroupByYear();this.get("dialog").getField("orderAscending").set("visible",t||e);var a=""===this.get("model").get("collectionId");this.get("dialog").getField("orderAscending").get("boundingBox").toggleClass("disabled",a)},_setShowDateFieldVisibility:function(){var e="index"===this.get("model").get("layout");this.get("dialog").getField("showDate").set("visible",e)},_setDropdownTitleFieldVisibility:function(){var e="dropdown"===this.get("model").get("layout");this.get("dialog").getField("dropdownTitle").set("visible",e)},_setTextAlignmentFieldVisibility:function(){var e="dropdown"!==this.get("model").get("layout");this.get("dialog").getField("textAlignment").set("visible",e)},isGroupByAuthor:function(){return this.get("model").get("groupBy")===o.AUTHOR},isGroupByCategory:function(){return this.get("model").get("groupBy")===o.CATEGORY},isGroupByTag:function(){return this.get("model").get("groupBy")===o.TAG},isGroupByMonth:function(){return this.get("model").get("groupBy")===o.MONTH},isGroupByYear:function(){return this.get("model").get("groupBy")===o.YEAR},_getDefaultDialogConfig:function(){var e=t.Squarespace.ObjectBuilder.makeArray([{tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,config:{text:i('Create an organized list of links to blog posts, gallery images, products, or events. You can choose to group links by date, category, tag, or author in the <strong>Display</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.ARCHIVE_EDITOR})}},{ctor:t.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[n.PRODUCTS,n.COLLECTION_TYPE_GENERIC],ordering:[s.USER,s.CHRONOLOGICAL,s.CALENDAR],folder:false},emptyMessage:i("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:t.Squarespace.DialogFields.Hidden,config:{name:"blockId"}}]},{tabTitle:i("Display"),scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Layout"),name:"layout",className:"thin dark",defaultValue:"index",options:[{value:"index",label:i("Index")},{value:"list",label:i("List")},{value:"dropdown",label:i("Dropdown")}]}},{ctor:t.Squarespace.DialogFields.Check,name:"multiColumns",config:{"strings.title":i("Break Into Multiple Columns")}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Text Alignment"),name:"textAlignment",className:"thin dark",defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}},{ctor:t.Squarespace.DialogFields.Text,config:{"strings.title":i("Dropdown Title"),name:"dropdownTitle",className:"thin dark",defaultValue:i("Archive")}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Group By"),name:"groupBy",className:"thin dark",defaultValue:o.MONTH,options:[{value:o.MONTH,label:i("Month")},{value:o.YEAR,label:i("Year")},{value:o.AUTHOR,label:i("Author")},{value:o.CATEGORY,label:i("Category")},{value:o.TAG,label:i("Tag")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Sort By"),name:"authorSortBy",className:"thin dark",defaultValue:r.FIRSTNAME,options:[{value:r.FIRSTNAME,label:i("First Name")},{value:r.LASTNAME,label:i("Last Name")},{value:r.COUNT,label:i("Count")},{value:r.ACTIVITY,label:i("Activity")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Sort By"),name:"categoryAndTagSortBy",className:"thin dark",defaultValue:r.NAME,options:[{value:r.NAME,label:i("Name")},{value:r.COUNT,label:i("Count")},{value:r.ACTIVITY,label:i("Activity")}]}},{ctor:t.Squarespace.DialogFields.Check,name:"orderAscending",config:{"strings.title":i("Sort Dates Ascending")}},{ctor:t.Squarespace.DialogFields.Check,name:"showDate",config:{"strings.title":i("Show Item Date")}},{ctor:t.Squarespace.DialogFields.Check,name:"showCount",config:{"strings.title":i("Show Group Count")}}]}]);return{title:i("Archive"),width:400,height:550,loadingText:i("Editing Archive Block…"),initialDataByReference:true,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:t.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-hidden","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor","squarespace-object-builder"]})},7734:function(e,t,a){var n=a(701);YUI.add("squarespace-block-audio",function(a){var e=a.Base.create("AudioBlockModel",a.Model,[],{},{ATTRS:{designStyle:{getter:function(e){if(!a.Lang.isValue(e))return"minimal";return e}},colorTheme:{getter:function(e){if(!a.Lang.isValue(e))return"dark";return e}}}});var i=a.namespace("Squarespace.Block").Audio=a.Base.create("block-audio",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("contentBox").one(".sqs-audio-embed");if(a.Lang.isValue(t))if(a.Squarespace.Widgets.AudioPlayer)switch(this.get("model").get("designStyle")){case"legacy":new a.Squarespace.Widgets.AudioPlayer({render:t});break;default:new a.Squarespace.Widgets.AudioPlayerMinimal({render:t})}else Squarespace&&Squarespace.addLoadTrigger&&Squarespace.addLoadTrigger(".sqs-audio-embed",["squarespace-audio-player"])}},{CSS_PREFIX:"sqs-block-audio",MODEL:e,ATTRS:{type:{value:n.AUDIO},editor:{value:a.Squarespace.Block.Editor.Audio},defaultContentModel:{value:{designStyle:"minimal",colorTheme:"dark"}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-audio-editor","squarespace-premium-block-mixin"]})},7735:function(e,t,a){var r=a(24).t;var o=a(207);YUI.add("squarespace-block-audio-editor",function(i){var e=352;var t={FULL:"full",TRAILER:"trailer",BONUS:"bonus"};var a={};a[t.FULL]=r("A complete episode.");a[t.TRAILER]=r("A short preview of an episode.");a[t.BONUS]=r("Extra content for a show.");var n={title:r("Audio"),initialDataByReference:true,width:420,height:600,tabs:[{tabTitle:r("Embed"),icon:"/universal/images-v6/icons/icon-audio-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:r('Add an audio player to the page for a single .mp3 file. You can upload a file from your computer or link to an externally hosted file. <a href="{url}" target="_blank">Learn more</a>',{url:o.AUDIO_BLOCK_SUPPORT})}},{ctor:i.Squarespace.DialogFields.MultiOption,config:{name:"file-location",className:"round icon20",ignoreChanges:true,titleStyle:"top",options:[{icon:"importing",title:r("Upload File"),value:"embedded"},{icon:"gallery",title:r("External File"),value:"external"}]}},{ctor:i.Squarespace.DialogFields.MultiFrame,config:{name:"file-location-frame",width:e,variableHeight:true,frames:[{name:"embedded",fields:[{ctor:i.Squarespace.DialogFields.FileAudio,config:{width:352,height:220,max:200,transientStore:true,recordType:i.Squarespace.RecordType.AUDIO,contentLabel:r("an audio track"),maxSize:160,assetConstrainMethod:"contain",contentType:"audio",name:"audioAsset",uploadUrl:"/api/uploads/audio"}}]},{name:"external",fields:[{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetExternalUrl",maxlength:100,className:"thin",strings:{title:r("Audio File URL"),placeholder:r("http://…")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetLength",maxlength:100,strings:{title:r("File Size (In Bytes)")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"audioAssetMimeTypeSelector",strings:{title:r("Audio File Mime Type")},options:[{label:r("audio/mpeg (.mp3)"),value:"audio/mpeg"},{label:r("Other"),value:""}]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetMimeType",maxlength:100}}]}]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"title",maxLength:100,className:"thin",strings:{title:r("Title")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesAuthor",maxLength:100,className:"thin",strings:{title:r("Author / Artist")}}}]},{tabTitle:r("Podcasting"),scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:r("These fields become tags for your podcast's RSS feed. Squarespace uses Apple Podcasts' standard format. <a href=\"{url}\">Learn more</a>",{url:o.PODCASTING_SUPPORT}),padding:[0,10]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesTitle",maxLength:300,strings:{title:r("Title"),description:r("The name of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesSubtitle",maxLength:300,strings:{title:r("Subtitle"),description:r("A brief description of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.TextArea,config:{name:"iTunesSummary",maxLength:4e3,strings:{title:r("Summary"),description:r("A full description of the episode with detailed information.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Wysiwyg,config:{name:"iTunesEpisodeNote",editorHeight:175,description:r("A formatted description of this episode, supported by Apple Podcasts. Other podcasting platforms may display this description differently."),strings:{title:r("Episode Note")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"iTunesEpisodeType",className:"thin dark",defaultValue:t.FULL,options:[{value:t.FULL,label:r("Full (default)")},{value:t.TRAILER,label:r("Trailer")},{value:t.BONUS,label:r("Bonus")}],strings:{title:r("Episode Type")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesSeason",maxLength:300,strings:{title:r("Season Number"),description:r("Apple Podcasts only displays season numbers for podcasts with more than one season."),validationFailMessage:r("Season must be greater than 0.")},className:"thin",validator:function(e){return""===e||null===e||void 0===e||parseInt(e,10)>0}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesEpisode",maxLength:300,strings:{title:r("Episode Number"),description:r("An episode number. This sets the recommended order for your podcast episodes."),validationFailMessage:r("Episode must be greater than 0.")},className:"thin",validator:function(e){return""===e||null===e||void 0===e||parseInt(e,10)>0}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesDuration",maxLength:20,strings:{title:r("Episode Duration (hh:mm:ss)"),description:r("The duration of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Check,config:{name:"iTunesExplicit",strings:{title:r("Explicit Content"),description:r("This episode contains explicit content.")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"podcastingUrlPrefix",maxLength:300,strings:{title:r("Podcast Analytics URL"),description:r('To track analytics for this episode using a third-party service, enter its URL. <a href="{kbUrl}">Learn more</a>.',{kbUrl:o.AUDIO_ANALYTICS}),placeholder:"https://..."},className:"thin"}}]},{tabTitle:r("Design"),scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Check,config:{name:"showDownload",strings:{title:r("Show Download Link"),description:r("Allow the user to download a copy of this track.")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"designStyle",className:"thin dark",defaultValue:"minimal",options:[{value:"legacy",label:r("Classic")},{value:"minimal",label:r("Minimal")}],strings:{title:r("Player Style")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"colorTheme",defaultValue:"dark",className:"thin dark",options:[{value:"dark",label:r("Dark")},{value:"light",label:r("Light")}],strings:{title:r("Player Color")}}}]}]};i.namespace("Squarespace.Block");i.namespace("Squarespace.Block.Editor");i.namespace("Squarespace.Block.ModelEditorDialog");i.Squarespace.Block.Editor.Audio=i.Base.create("audio-block-editor-dialog",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Audio")}},{NS:"blockEditor",ATTRS:{blockName:{value:r("Audio")}}});var s=i.Squarespace.Block.ModelEditorDialog.Audio=i.Base.create("blockAudioEditor",i.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){a.getField("audioAsset").set("height",220);a.getField("file-location").setAttrs({optionClickCb:function(e){a.getField("file-location-frame").switchFrames(e)}});var e=a.getField("designStyle");"classic"===e.get("data")&&e.set("data","minimal");if(i.Lang.isValue(e)){e.after("dataChange",function(e){this._toggleColorTheme(e.newVal)},this);this._toggleColorTheme(e.get("data"))}this._externalFileFields=i.Array.map(["audioAssetExternalUrl","audioAssetLength","audioAssetMimeType"],function(e){return a.getField(e)});a.getField("audioAsset").on("dataChange",this._bindMediaEvent,this);var t=a.getField("file-location-frame");"external"!==t.get("data")&&i.Array.each(this._externalFileFields,function(e){e.disable()});t.after("dataChange",function(e){var t="external"===e.newVal?"enable":"disable";i.Array.each(this._externalFileFields,function(e){e[t]()})},this);a.getField("audioAssetMimeTypeSelector").after("dataChange",function(e){var t=a.getField("audioAssetMimeType");if(""===e.newVal)t.show();else{t.set("data",e.newVal);t.hide()}},this);this._syncAudioMimeTypeAssetFreeformInputVisibility();this.bindEpisodeType()},this)},bindEpisodeType:function(){this.get("dialog").getField("iTunesEpisodeType").after("dataChange",this.updateEpisodeTypeDescription,this);this.updateEpisodeTypeDescription()},updateEpisodeTypeDescription:function(){var e=this.get("dialog").getField("iTunesEpisodeType");var t=e.get("data");a.hasOwnProperty(t)?e.set("strings.description",a[t]):e.set("strings.description",r("Select the type of content in this episode. Some podcasting platforms use this to organize episodes for listeners."))},destructor:function(){i.Lang.isValue(this._mediaEvent)&&this._mediaEvent.detach()},_syncAudioMimeTypeAssetFreeformInputVisibility:function(){var e=this.get("dialog");var t=e.getField("audioAssetMimeTypeSelector");var a=e.getField("audioAssetMimeType");var i=t.get("options").filter(function(e){return e.value.length>0}).map(function(e){return e.value});if(i.indexOf(a.get("data"))>-1){t.set("data",a.get("data"),{silent:true});a.hide()}else{t.set("data","",{silent:true});a.show()}},_toggleColorTheme:function(e){"minimal"===e?this.get("dialog").getField("colorTheme").show():this.get("dialog").getField("colorTheme").hide()},getDialogData:function(){var e=s.superclass.getDialogData.call(this);var t="embedded";var a=e.audioAssetExternalUrl;i.Lang.isString(a)&&a.length>0&&(t="external");e["file-location"]=t;e["file-location-frame"]=t;i.Lang.isString(e.audioAssetId)&&e.audioAssetId.length>0&&(e.audioAsset=new i.Squarespace.Models.ContentItem({id:e.audioAssetId}));return e},sanitizeDialogData:function(e){var t=e["file-location-frame"];if("external"===t)delete e.audioAsset;else{e.audioAssetExternalUrl=null;e.audioAssetLength=null;e.audioAssetMimeTypeSelector=null;e.audioAssetMimeType=null}delete e["file-location"];delete e["file-location-frame"];if(e.audioAsset){e.audioAssetId=e.audioAsset.get("id");delete e.audioAsset}else e.audioAssetId="";return e},_bindMediaEvent:function(e){var t=e.newVal;if(!i.Lang.isValue(t))return;this._mediaEvent=t.on("mediaProcessingStateChange",function(e){if(e.newVal!==i.Squarespace.MediaProcessingState.READY)return;t.once("load",this._fetchDataFromAudioFile,this)},this)},_fetchDataFromAudioFile:function(e){var t=e.target.get("structuredContent");var a=this.get("dialog");var i=a.getField("title").get("data").length;i||a.getField("title").set("data",t.get("title")||"");var n=a.getField("iTunesAuthor").get("data").length;n||a.getField("iTunesAuthor").set("data",t.get("artistName")||"")}},{ATTRS:{dialogConfig:{valueFn:function(){return n}}}})},"1.0",{requires:["base","squarespace-audio-player","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file","squarespace-dialog-file-audio","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-models-content-item","squarespace-dialog-wysiwyg"]})},7736:function(e,t,a){var i=a(24).t;var n=a(701);var s=a(114);var r=a(87);var o=a(1342);YUI.add("squarespace-block-button",function(e){var t={buttonText:i("Learn more"),buttonLink:"",newWindow:false,buttonAlignment:"center",buttonSize:"medium"};e.namespace("Squarespace.Block").Button=e.Base.create("block-button",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-button",ATTRS:{editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||s.isFeatureEnabled(r.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Button}},type:{value:n.BUTTON},defaultContentModel:{value:t}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-button-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7737:function(e,t,a){var i=a(24).t;var n=a(207);var s=a(6703);YUI.add("squarespace-block-button-editor",function(a){a.namespace("Squarespace.Block.Editor").Button=a.Base.create("button-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Button")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Button")}}});function e(e){return{width:335,height:400,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:i("Button"),icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{className:"description",content:i("Create a button that links to any URL. To change the button's fonts and colors, navigate to <strong>Home &rsaquo; Design &rsaquo; Style Editor</strong> in the left-hand panel.")+' <a href="'+n.BUTTON_EDITOR+'" target="_blank">'+i("Learn more")+"</a>"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"buttonText","strings.title":i("Text"),className:"thin dark"}},{ctor:a.Squarespace.DialogFields.HTML,config:{name:"clickThroughLabel",content:"<strong>"+i("Clickthrough URL")+"</strong>"}},{ctor:a.Squarespace.DialogFields.ReactDialogField,config:{name:"clickThrough",component:s,props:e.getLinkEditorProps(),className:"core-components-link-editor"}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"buttonSize","strings.title":i("Size"),className:"thin dark",defaultValue:"medium",options:[{value:"small",label:i("Small")},{value:"medium",label:i("Medium")},{value:"large",label:i("Large")}]}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":i("Alignment"),className:"thin dark",defaultValue:"center",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]}]}}a.namespace("Squarespace.Block.ModelEditorDialog").Button=a.Base.create("block-button-editor",a.Squarespace.ModelEditorDialog,[],{getDialogData:function(){var e=this.get("model").toJSON();var t=e.buttonLink;a.Lang.isString(t)&&(e.clickThrough={url:t,newWindow:e.newWindow});return e},getLinkEditorProps:function(){return{zIndex:3e5,isDark:true,flush:true,showVisitLink:false,value:function(){var e=this.getDialogData();return{url:e.buttonLink,newWindow:e.newWindow}}.bind(this),onChange:function(e){var t=this.get("model");t.setAttrs({buttonLink:e.url,newWindow:e.newWindow})}.bind(this)}},sanitizeDialogData:function(e){var t=this.getDialogData();return{buttonText:e.buttonText,buttonLink:t.buttonLink,newWindow:t.newWindow,buttonAlignment:e.buttonAlignment,buttonSize:e.buttonSize}}},{ATTRS:{dialogConfig:{valueFn:function(){return e(this)}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-select","squarespace-dialog-text","squarespace-react-dialog-field","squarespace-model-editor"]})},7739:function(e,t,a){var s=a(182);var r=a(0);var o=a(60);var l=a(3).ThemeContext;var c=a(248).rosetta;YUI.add("squarespace-react-dialog-field",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ReactDialogField=e.Base.create("ReactDialogField",e.Squarespace.DialogField2,[],{renderUI:function(){t.superclass.renderUI.call(this);this.syncUI()},bindUI:function(){t.superclass.bindUI.call(this);this.after("propsChange",e.bind(this.syncUI,this))},syncUI:function(){var e=this.get("props");var t=this.get("component");var a=r.createElement(t,s(e)?e():e);var i=r.createElement(l.Provider,{theme:c.white},[a]);var n=this.get("contentBox").getDOMNode();o.render(i,n)},didDataChange:function(){var e=this.get("isDirty");if(void 0!==e)return e;return t.superclass.didDataChange.call(this)}},{CSS_PREFIX:"sqs-react-dialog-field",ATTRS:{component:{},props:{},isDirty:{}}})},"1.0",{requires:["node","squarespace-dialog-field-2","squarespace-util"]})},7740:function(e,t,a){var i=a(701);var r=a(114);var o=a(87);var l=a(1342);YUI.add("squarespace-block-calendar",function(n){var s=n.namespace("Squarespace.Block").Calendar=n.Base.create("block-calendar",n.SQS.LayoutEngine.Block.ModelSyncBase,[n.Squarespace.Block.PremiumBlockMixin],{initializer:function(e){this._calendarInstance=false},bindUI:function(){s.superclass.bindUI.call(this);this.after("resized",function(){this._calendarInstance.calendarPlugin&&this._calendarInstance.calendarPlugin._syncUI()})},destructor:function(){this._calendarInstance&&this._calendarInstance.destroy()},_renderSuccess:function(e){s.superclass._renderSuccess.call(this,e);var t=this.get("model").get("collectionId");var a=this.get("contentBox");var i=this.get("collectionId");this._calendarInstance=n.Squarespace.CalendarBlockRenderer.renderCalendar(a,t,i)}},{MODEL:n.Squarespace.ContentModel.CalendarBlock,ATTRS:{editor:{valueFn:function(){if(l.isMobileContentEditingEnabled()||r.isFeatureEnabled(o.ROSETTA_BLOCK_EDITORS))return n.Squarespace.Block.Editor.Schema;return n.Squarespace.Block.Editor.CalendarDialog}},type:{value:i.CALENDAR}},CSS_PREFIX:"sqs-block-calendar"})},"1.0",{requires:["base","model","squarespace-calendar-block-renderer","squarespace-block-calendar-editor","squarespace-block-calendar-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7741:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(207);YUI.add("squarespace-block-calendar-editor",function(e){var t={width:335,height:420,tabs:[{title:i("Calendar"),icon:"/universal/images-v6/icons/icon-event-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Display events, blog posts, products, or gallery images as a calendar. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:s.CALENDAR_EDITOR}),padding:[0,0]}},{ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[n.PRODUCTS,n.COLLECTION_TYPE_GENERIC],folder:false},emptyMessage:i("No pages yet. Go to the pages panel and click a + to add new content.")}}]}]};e.namespace("Squarespace.Block.Editor").CalendarDialog=e.Base.create("calendar-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Calendar")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Calendar")},minHSize:{value:4}}});e.namespace("Squarespace.Block.ModelEditorDialog").Calendar=e.Base.create("blockCalendarEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}},strings:{value:{title:i("Index"),description:i("Select a collection below.")}}}})},"1.0",{requires:["base","model","squarespace-block-calendar-model","squarespace-calendar-block-renderer","squarespace-damask-context-globals","squarespace-dialog-description","squarespace-dialog-content-selector","squarespace-models-content-collection"]})},7742:function(e,t){YUI.add("squarespace-block-calendar-model",function(e){e.namespace("Squarespace.ContentModel").CalendarBlock=e.Base.create("CalendarBlockModel",e.Model,[],{},{ATTRS:{collectionId:{value:null}}})},"1.0",{requires:["base","model"]})},7743:function(e,t,a){var i=a(24).t;var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-code",function(e){var t={wysiwyg:{engine:"code",mode:"htmlmixed",isSource:false,source:""},html:i("<p>Hello, World!</p>")};var a=e.namespace("Squarespace.Block").Code=e.Base.create("block-code",e.Squarespace.Block.CustomEmbedBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(){this._toggleErrorState(false);a.superclass._renderSuccess.apply(this,arguments)},_renderError:function(){this._toggleErrorState(true);a.superclass._renderError.apply(this,arguments)},_toggleErrorState:function(e){this.get("model").set("hasRenderError",e)}},{CSS_PREFIX:"sqs-block-code",ATTRS:{defaultContentModel:{value:t},editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Code}},contentRefreshRate:{value:600},safeguardEmbeddedScripts:{value:true}}})},"1.0",{requires:["@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-base-custom-embed","squarespace-block-code-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7744:function(e,t){YUI.add("@sqs/layout-engine/block-mixin-aspect-ratio",function(i){i.namespace("SQS.LayoutEngine.Block");i.SQS.LayoutEngine.Block.MixinAspectRatio=i.Base.create("aspectRatio",i.Base,[],{initializer:function(){this.get("boundingBox").addClass("sqs-aspect-ratio");this.after("intrinsicWrapperChange",this._swapIntrisincWrapper,this);i.after(this._bindAspectRatio,this,"bindUI");i.after(this._updateAspectRatio,this,"renderUI");i.after(this._updateAspectRatio,this,"syncUI");i.after(this._updateAspectRatio,this,"_renderSuccess")},_bindAspectRatio:function(){this.get("model").after("change",this._afterModelChange,this)},_afterModelChange:function(e){this._updateAspectRatio()},_swapIntrisincWrapper:function(e){var t=this.get("model").get("aspectRatio");i.Lang.isValue(e.prevVal)&&this.destroyBlock(e.prevVal);i.Lang.isValue(e.newVal)&&t&&this.initializeBlock(e.newVal,t)},_updateAspectRatio:function(e){var t=this.get("model").get("aspectRatio");var a=this.get("intrinsicWrapper");i.Lang.isValue(t)?!a.hasClass("sqs-intrinsic")||a.one("> div")&&!a.one("> div").hasClass("sqs-intrinsic-content")?this.initializeBlock(a,t):this._setPadding(t):this.destroyBlock(a)},_setPadding:function(e){this.get("intrinsicWrapper").setStyle("paddingBottom",e+"%")},initializeBlock:function(e,t){if(i.Lang.isValue(t)){e.addClass("sqs-intrinsic");e.setStyle("paddingBottom",t+"%");e.one("> div")&&e.one("> div").addClass("sqs-intrinsic-content")}},destroyBlock:function(e){if(e.hasClass("sqs-intrinsic")){e.removeClass("sqs-intrinsic");e.setStyle("padding-bottom",null);e.one(".sqs-intrinsic-content")&&e.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content")}}},{ATTRS:{intrinsicWrapper:{getter:function(){return this.get("contentBox")}}}})},"1.0",{requires:["base","node","@sqs/layout-engine/aspect-ratio-manager"]})},7745:function(e,t,a){var o=a(24).t;var i=a(595);YUI.add("squarespace-block-base-custom-embed",function(r){r.namespace("Squarespace.Block");r.Squarespace.Block.CustomEmbedBase=r.Base.create("block-customembed",r.SQS.LayoutEngine.Block.ModelSyncBase,[],{initializer:function(){this.get("safeguardEmbeddedScripts")&&this._bindSafePreviewModeChange()},_bindSafePreviewModeChange:function(){this.after("safePreviewModeChange",function(e){true===e.newVal?this._renderContentInSafePreview():true!==e.silent&&this._renderBlock()})},_getWidgetContent:function(e){if(!e)return null;var t=r.Node.create("<div></div>");t.insert(e);i.securifyBlockEmbed(t);this.get("safeguardEmbeddedScripts")&&!this.get("safePreviewMode")&&this._filterOutEmbeddedScripts(t);return t},_filterOutEmbeddedScripts:function(e){var t=e.all("script");if(t.size()>0){t.each(function(e){e.replace('<div class="removed-script"></div>')});var a=this._getNewStateMessageNode({title:o("Embedded Scripts"),classNames:"warning",message:o("This block contains embedded scripts. Embedded scripts are disabled while you're logged in and editing your site."),button:{text:o("Preview in safe mode"),onClick:r.bind(function(e){e.halt();this.safePreviewOn()},this)}});e.prepend(a)}},_renderContentInSafePreview:function(){var e=this.get("contentBox");var t=this._getCurrentContentDimensions();var a=r.Node.create('<iframe class="embedded-scripts-preview"></iframe>');var i=r.Lang.isValue(a.get("srcdoc"));var n=this.get("widgetContent");var s={allowfullscreen:true,width:t.width,height:t.height,srcdoc:n&&n.get("innerHTML")||"",seamless:"seamless",sandbox:this.get("defaultSandboxMode")};if(!i){s.sandbox+=" allow-same-origin";s.src='javascript: window.frameElement.getAttribute("srcdoc")'}a.plug(r.Squarespace.NodeDestroyNotifier,{onDestroy:r.bind(this.safePreviewOff,this,true)});e.empty().append(this._getNewStateMessageNode({title:o("Safe Preview"),message:o("Please view the page after logging out for accurate rendering."),button:{text:o("Exit safe preview"),onClick:r.bind(function(e){e.halt();this.safePreviewOff()},this)}})).append(a.setAttrs(s));i||a.setAttribute("sandbox",this.get("defaultSandboxMode"))},_getCurrentContentDimensions:function(){var e=this.get("contentBox");var t=e.one(".sqs-state-message");var a=parseInt(e.getComputedStyle("width"),10);var i=parseInt(e.getComputedStyle("height"),10);r.Lang.isValue(t)&&(i-=t.invoke("getBoundingClientRect").height);return{width:a,height:i}},safePreviewOn:function(){this.set("safePreviewMode",true)},safePreviewOff:function(e){this.set("safePreviewMode",false,{silent:true===e})}},{ATTRS:{widgetContent:{value:"",getter:"_getWidgetContent"},safeguardEmbeddedScripts:{value:false,writeOnce:"initOnly"},defaultSandboxMode:{value:"allow-forms allow-popups allow-scripts",readOnly:true},safePreviewMode:{value:false}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","base","squarespace-plugin-node-destroy-notifier"]})},7746:function(e,t,a){var i=a(24).t;var n=a(207);var r=a(651);var o=a(801);var l=a(728);var c=a(228);var d=a(100);YUI.add("squarespace-block-code-editor",function(s){var e=["img","frame","iframe","object","video","audio","embed","svg",'input[type="image"]',"map"].join(",");s.namespace("Squarespace.Block.Editor");s.Squarespace.Block.Editor.Code=s.Base.create("code-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.afterHostMethod("_setWidgetContent",this._afterSetContent,this);if("block-code"===this.get("host").name){this._bindSaveListener();o.isFeatureGated(l.BLOCK_CODE_WITH_MEDIA)&&this._bindCheckCodeValidListener()}this.refreshPremiumMessage=d(this.rawRefreshPremiumMessage.bind(this),1e3,{leading:false,trailing:true})},_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Code")},_afterSetContent:function(){this._cb.all(e).each(function(e){this._handles.push(e.on("load",this._fireContentUpdate,this))},this)},_fireContentUpdate:function(){this.get("host").fire("widget:contentUpdate")},_bindSaveListener:function(){var n=this.get("host").get("model");n.on("save",function(){var e=n.toJSON();if(e.wysiwyg){var t=5e3;var a=e.wysiwyg.mode;var i=e.wysiwyg.isSource?e.wysiwyg.source:e.html;s.Squarespace.Analytics.trackInternal("code_block_editor_save",{source:i.substr(0,t),mode:a})}})},_bindCheckCodeValidListener:function(){var e=this.configDialog.get("dialog");var a=this.get("host").get("model");e.on("ready",function(){var t=e.getField("error");t.set("visible",a.get("hasRenderError"));a.after("hasRenderErrorChange",function(e){e.newVal!==e.prevVal&&t.set("visible",e.newVal)});this.codeMirrorInstance=e.getField("wysiwyg").editor.editor;this.codeMirrorInstance.on("change",function(){this.refreshPremiumMessage()}.bind(this));this.refreshPremiumMessage()},this)},rawRefreshPremiumMessage:function(){if(!this.codeMirrorInstance)return;var e=this.configDialog.get("dialog");if(!e.isOpen())return;var t=e.getField("premiumPlanError");if(this.get("host").get("model").get("wysiwyg.isSource")){e.getField("premiumPlanError").set("visible",false);return}if(!o.isFeatureGated(l.BLOCK_CODE_WITH_MEDIA))return;var a=this.codeMirrorInstance.getValue();if(this.pending){this.invalidateNextAndRetry=true;return}this.pending=true;c.post("/api/code-block-input-validation",{code:a}).then(function(e){this.pending=false;if(this.invalidateNextAndRetry){this.invalidateNextAndRetry=false;this.refreshPremiumMessage();return}t.set("visible",e.data.hasPremiumTags)}.bind(this)).catch(function(){this.pending=false;if(this.invalidateNextAndRetry){this.invalidateNextAndRetry=false;this.refreshPremiumMessage()}t.set("visible",false)}.bind(this))}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Code")}}});s.namespace("Squarespace.Block.ModelEditorDialog");s.Squarespace.Block.ModelEditorDialog.Code=s.Base.create("block-code-editor",s.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(e){if(e.wysiwyg&&e.wysiwyg.wysiwyg){var t=e.text||"";e=e.wysiwyg;e.text=t;delete e.id;return e}e.wysiwyg.isSource||"htmlmixed"!==e.wysiwyg.mode&&"html"!==e.wysiwyg.mode?s.Lang.isUndefined(e.wysiwyg.rendered)||(e.html=e.wysiwyg.rendered):e.html=e.wysiwyg.source;delete e.wysiwyg.rendered;return e},getDialogData:function(){var e=this.get("model").toJSON();return{text:e.source,wysiwyg:e}},_isCodeValid:function(){return!this.get("model").get("hasRenderError")},_getDialogConfig:function(){var e=i('Add custom CSS, HTML, JavaScript, Markdown, or Plain Text to this page.<br /><a href="{link}" target="_blank">Learn more</a>',{link:n.CODE_BLOCK});o.isFeatureEnabled(l.BLOCK_CODE_WITH_MEDIA)||(e=i('Add CSS, HTML, or plain text to this page. To embed JavaScript or iframes, upgrade to the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:n.CODE_BLOCK}));var t=i("JavaScript and iframe embeds aren’t supported in your plan. This code was removed from the block.");r.isTrial()&&(t=i('JavaScript and iframe embeds are only supported in the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:n.CODE_BLOCK}));return{width:575,height:this.get("height"),tabs:[{title:i("Code"),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:e},{type:"error",name:"error",visible:false,text:i('You’ve reached the character limit for Code Blocks. If you need more advanced customization, learn if the <a href="{link}" target="_blank">Developer Platform</a> is right for you.',{link:n.DEVELOPER_SDK})},{type:"error",name:"premiumPlanError",visible:false,text:t},{type:"wysiwyg",height:this.get("wysiwygHeight"),width:525,countHeight:true,name:"wysiwyg",title:i("HACK THE PLANET"),titleStyle:"inline",engine:"code",menuConfig:"code",validationErrorMsg:i("You’ve reached the character limit for Code Blocks."),validator:this._isCodeValid.bind(this)}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},height:{value:380},wysiwygHeight:{valueFn:function(){return this.get("height")-130}}}})},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-legacy-wysiwyg"]})},7747:function(e,t,n){var l=n(24).t;var c=n(802);var s=n(100);YUI.add("squarespace-dialog-legacy-wysiwyg",function(u){u.namespace("Squarespace.DialogFieldGenerators");var o=n(5394);var a="field-wysiwyg-editor-container";var d="field-wysiwyg";var g="box-view";var r="page-view";var p="fullscreen-view";var e=200;var i=60;u.Squarespace.DialogFieldGenerators.wysiwyg=Class.extend(u.Squarespace.DialogField,{initialize:function(e,t,a){this._super(e,t,a);this.events=[];this.containerHeight=this.config.height||null;this.containerWidth=this.config.width||null;this.tabIndex=a.getNextTabIndex();this._preventThrottling=e.preventThrottling;var i=this.config.className;i&&(this.className=i);this.viewMode=g;this.config.pageview&&(this.viewMode=r);this.menuConfig=e.menuConfig||"source";this.menuConfigs={code:{code:[{cmd:"sourcecode",title:l("Show Source"),type:"button",html:l("Display Source")},{type:"container",style:"float: right",contents:[{type:"select",title:l("Editor Mode"),selected:"htmlmixed",options:{css:l("CSS"),htmlmixed:l("HTML"),javascript:l("JavaScript"),markdown:l("Markdown"),null:l("Plain Text")}}]}]},markdown:{markdown:[{cmd:"bold",title:l("Bold"),type:"button"},{cmd:"italic",title:l("Italic"),type:"button"},{cmd:"link",title:l("Link"),type:"button"},{type:"separator"},{cmd:"h1",title:l("H1"),type:"button"},{cmd:"h2",title:l("H2"),type:"button"},{type:"separator"},{cmd:"blockquote",title:l("Block Quote"),type:"button"},{cmd:"unorderedlist",title:l("Unordered List"),type:"button"},{cmd:"orderedlist",title:l("Ordered List"),type:"button"}]}};if("code"===this.config.engine||"markdown"===this.config.engine){this.modes={source:this._loadTextEditor};this.mode="source"}else{this.modes={markdown:this._loadTextEditor,html:this._loadTextEditor,source:this._loadTextEditor};"html"!==this.mode&&"markdown"!==this.mode||(this.mode="source");this.mode=this.mode}this.modeEls={};this.config.titleStyle||(this.config.titleStyle="top");this.initialFieldData=t[this.config.name];var n=this._determineModeContent(this.initialFieldData);this.mode=n.mode;this.codeMode=n.codeMode;this.isSource=n.isSource;var s=n.content||this.config.defaultValue;if(!this.modes[this.mode]){false;this.mode="source";s=s||this.config.defaultValue}this.render();this.loadEditor(s);this.hookEvents();this.preCloseEvent=this.dialog.on("preClose",function(){this.dialog.fire("datachange",this)},this);this.publish("maximize-started",{broadcast:2});this.publish("maximize-complete",{broadcast:2});this.publish("minimize-started",{broadcast:2});this.publish("minimize-complete",{broadcast:2})},focus:function(){this.editor.focus()},didDataChange:function(){var e=u.Lang.isObject(this.initialFieldData)?this.initialFieldData.html:"";return e!==this.getValue().html},getTakenHeight:function(){return this.html.get("offsetHeight")-60},switchMode:function(a){var i=this.html;var e=this._determineModeContent(this.getValue()),n=e.content,t=false;n=this.generateHTML(n);this._isContentEmpty(n)||"markdown"===a&&(t=true);function s(){var e=this.isFullscreen();this.editor.destroy();this.destroyEvents();this.mode=a;this.render();var t=i.getStyle("width");t&&this.html.setStyle("width",t);i.replace(this.html);this.select.setValue(a);this.loadEditor(n);this.hookEvents();this.show();if(e){this.addFullscreenButtons();this.html.addClass("fullscreenEditor")}this.adjustHeight();this.dialog.fire("datachange",this)}if(t&&null===n){this.select.setValue(this.mode);new u.Squarespace.Widgets.Confirmation({"strings.title":l("Change Mode / Data Loss"),"strings.message":l("When switching to this mode you will lose all your previous data.")}).on("confirm",function(){s.call(this);this.select.setValue(a)},this)}else if(t){this.select.setValue(this.mode);new u.Squarespace.Widgets.Confirmation({"strings.title":l("Change Mode"),"strings.message":l("You might lose special formatting switching to this mode.")}).on("confirm",function(){s.call(this);this.select.setValue(a)},this)}else s.call(this)},_isContentEmpty:function(e){if(null===e)return true;if("string"===typeof e&&e.trim().length<=0)return true;if("object"===typeof e){for(var t in e.containers){if(!e.containers.hasOwnProperty(t))continue;return false}return true}return false},loadEditor:function(e){this.modes[this.mode].apply(this,[e])},_determineModeContent:function(e){e=e||{};if(e.wysiwyg&&e.wysiwyg.markdown){e.wysiwyg.source=e.wysiwyg.markdown;e.wysiwyg.markdown="";e.wysiwyg.mode="markdown"}return{content:e.wysiwyg.source||e.html,codeMode:e.wysiwyg.mode,isSource:e.wysiwyg.isSource,mode:"source"}},_initializeLinkFlyout:function(){this._linkEdit=new u.Squarespace.Flyout.LinkEdit;this.editor._linkEdit=this._linkEdit;this._linkEdit.on("dataChange",function(e){var t=e.newVal;var a=t.anchorNode;if(a){a.setAttribute("href",t.linkUrl);t.newWindow?a.setAttribute("target","_blank"):a.removeAttribute("target")}this.editor._onContentChange()},this);this._linkEdit.on("open",function(){this.editor.saveSelection()},this);this._linkEdit.on("close",function(e){this.editor.restoreSelection()},this);this._linkEdit.on("unlink",function(e){u.Squarespace.EditorBase.unwrap(e.anchorNode)})},_loadTextEditor:function(e){"markdown"===this.config.engine?this.editor=new u.Squarespace.MarkdownEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex}):this.editor=new u.Squarespace.CodeEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex});this.editor.on("modeChange",function(e){this.codeMode=e.newVal;var t=this.menuEl.one("select");if(t){t.set("value",e.newVal);var a=this.menuEl.one(".field-wysiwyg-tool-sourcecode");if("htmlmixed"===e.newVal||"markdown"===e.newVal)a.removeAttribute("disabled");else{this.isSource=true;a.addClass("active");a.setAttribute("disabled","disabled")}this.dialog.fire("datachange",this)}},this);this.editor.setContent(e);this.editor.editor.on("change",u.bind(this.onEditorContentChange,this));this.control.on("wysiwyg|focus",this._onfocus,this);this.control.on("wysiwyg|blur",this._onblur,this);this.events.push(this.menuEl.delegate("click",function(e){if(!e.currentTarget._node.disabled){this.isSource=!this.isSource;e.currentTarget.toggleClass("active",this.isSource);this.dialog.fire("datachange",this)}},".field-wysiwyg-tool-sourcecode",this));this.events.push(this.menuEl.delegate("change",function(e){this.editor.set("mode",e.currentTarget.get("value"))},"select",this));var t=this.menuEl.one("select");t&&t.set("value",this.codeMode);var a=this.menuEl.one(".field-wysiwyg-tool-sourcecode");if(a){if("htmlmixed"===this.codeMode||"markdown"===this.codeMode)a.removeAttribute("disabled");else{this.isSource=true;a.setAttribute("disabled","disabled")}a.toggleClass("active",this.isSource)}},_onblur:function(){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",false);var e=this.control.ancestor(".field-rhs");e&&e.removeClass("focused")}},_onfocus:function(e){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",true);var t=this.control.ancestor(".field-rhs");t&&t.addClass("focused")}},_onEditorContentChange:function(){this.adjustHeight();this.dialog.fire("datachange",this)},debounceOnEditorContentChange:s(function(){var e=arguments[0].that;this.throttleChangeFlag=false;e._onEditorContentChange.apply(e)},e),onEditorContentChange:function(e){this.cachedContent=null;this.cachedValue=null;this.viewMode===p&&this.hideMenuBar(e);this._preventThrottling?this._onEditorContentChange():this.debounceOnEditorContentChange({that:this})},render:function(){var e=this._textEditorRender.apply(this);var t=this.mode;"markdown"!==this.mode&&"html"!==this.mode||(t="code");this.modeEls[this.mode]=e;this.control=e.control;this.fieldTitleEl=e.title;this.menuElems=e.menu;this.menuEl=u.Node.create('<div class="field-wysiwyg-control clear"></div>');u.Lang.isArray(this.menuElems)?this.menuElems.forEach(function(e){this.menuEl.append(e)},this):this.menuEl.append(this.menuElems);var a=c("field-wrapper wysiwyg-field-wrapper clear {sub1} {sub2}-mode mode-{newMode}",{sub1:this.config.style,sub2:this.mode,newMode:t});this.html=u.Node.create('<div class="'+a+'"></div>');var i=u.Node.create('<div class="field-rhs"></div>');var n=u.Node.create('<div class="field-wysiwyg-control-wrapper"></div>');n.append(this.menuEl);var s=u.Node.create('<div class="'+d+'"></div>');s.append(this.control);i.append(n);i.append(s);this.config.description&&i.append('<div class="field-description-wrapper"><div class="field-description">'+this.config.description+"</div></div>");this.html.append(this.fieldTitleEl);this.html.append(i);var r=this.html.one("."+d);null!==this.containerHeight&&r.setStyle("height",this.containerHeight+"px");null!==this.containerWidth&&this.html.setStyle("width",this.containerWidth+"px")},hookEvents:function(){this.events.push(this.menuEl.delegate("click",u.bind(function(e){var t=e.currentTarget.get("className");try{t=t.substring(t.lastIndexOf("-")+1);t=-1!==t.indexOf(" ")?t.substring(0,t.indexOf(" ")):t;switch(t){case"bold":this.editor.execCommand("bold");break;case"italic":this.editor.execCommand("italic");break;case"link":this.editor.execCommand("link");break;case"unlink":this.editor.execCommand("unlink");break;case"unorderedlist":this.editor.execCommand("insertunorderedlist");break;case"orderedlist":this.editor.execCommand("insertorderedlist");break;case"h1":this.editor.execCommand("heading","1");break;case"h2":this.editor.execCommand("heading","2");break;case"blockquote":this.editor.execCommand("blockquote");break}}catch(e){console.error("Error executing command",t,"Error was:",e);throw e}finally{e.halt()}},this),".field-wysiwyg-tool"))},_containersHandler:function(e){var t;for(t in e.prevVal){t in e.newVal||u.one(".field-wysiwyg-tool-"+t).removeClass("active");if("link"===t&&(!e.newVal[t]||e.newVal[t]&&e.prevVal[t].getAttribute("href")!==e.newVal[t].getAttribute("href"))){this._linkEdit.updateLink();this._linkEdit.close(true)}}for(t in e.newVal){t in(e.prevVal||[])||u.one(".field-wysiwyg-tool-"+t).addClass("active");"link"===t&&(!e.prevVal||!e.prevVal[t]||e.prevVal[t]&&e.prevVal[t].getAttribute("href")!==e.newVal[t].getAttribute("href"))&&this._linkEdit.openPrompt(e.newVal[t])}},destroyEvents:function(){this.control.detach("wysiwyg|*");for(var e=0;e<this.events.length;++e){var t=this.events[e];t.detach?t.detach():t.removeListener&&t.removeListener()}this.events=[];this.debounceOnEditorContentChange&&this.debounceOnEditorContentChange.cancel&&this.debounceOnEditorContentChange.cancel()},onDataChanged:function(e){this.dialog.fire("datachange",this)},getMode:function(){return this.mode},getContent:function(){return this.editor.getContent()},cleanHTML:function(e){if(!e)return null;return e.replace(new RegExp("<p\\s+>","g"),"<p>")},getValue:function(){var e=this.getContent();return{source:e,isSource:this.isSource,mode:this.codeMode,engine:this.mode,rendered:this.cleanHTML(this.generateHTML(e))||""}},generateHTML:function(e){if(this.isSource){var t=u.Node.create("<div></div>");o.runMode(e,this.codeMode,t._node);return'<pre class="source-code">'+t.getContent()+"</pre>"}if("markdown"===this.codeMode){var a=e;var i=' data-preserve-html-node="true"';this.config.markEmbeddedHTML&&(a=e.replace(new RegExp("<[^\\s/\\->]+","gm"),"$&"+i));var n=u.Squarespace.Lang.markdownToHTML(a);if(this.config.markEmbeddedHTML){var s=u.Node.create("<div>"+n+"</div>");var r=s.all("code");r.each(function(e){var t=e.getHTML().replace(new RegExp(i,"g"),"");e.empty().append(t)});n=s.getContent();s.destroy();r.destroy()}return n}return e},setValue:function(e){var t=this._determineModeContent(e);t.mode=t.mode||"source";this.mode!==t.mode&&this.switchMode(t.mode);this.isSource=t.isSource;this.codeMode=t.codeMode;this.editor.setContent(t.content)},show:function(){this._textEditorShow.apply(this);this.wasShown=true;this.dialog.fire("currentMode",this.mode)},toggleInvertedStyle:function(){this.html.toggleClass("inverted");this.editor.focus()},updateEditorWidth:function(){if(this.editor.setWidth&&("html"===this.mode||"markdown"===this.mode)){var e=this.html.one("textarea").get("offsetWidth");this.editor.setWidth(e)}this.adjustHeight()},setSmallWidth:function(e){this.html.removeClass("width-large");this.html.addClass("width-small");this.updateEditorWidth();this.editor.focus()},setMediumWidth:function(e){this.html.removeClass("width-small");this.html.removeClass("width-large");this.updateEditorWidth();this.editor.focus()},setLargeWidth:function(e){this.html.removeClass("width-small");this.html.addClass("width-large");this.updateEditorWidth();this.editor.focus()},toggleFullScreen:function(e){this.menuHidden=false;"undefined"!==typeof this.hideMenuEvent&&this.hideMenuEvent&&this.hideMenuEvent.detach();"undefined"!==typeof this.showMenuEvent&&this.showMenuEvent&&this.showMenuEvent.detach();e.stopPropagation();var t=this.isFullscreen();if(t){this.fire("minimize-started");u.Global.fire("minimize-started");this.recessTransition()}else{if(this.dialog.activeFlyout){this.dialog.activeFlyout.field.closeFlyout();this.dialog.activeFlyout=null}this.fire("maximize-started");u.Global.fire("maximize-started");this.expandTransition()}this.editor.focus()},expandDialogBox:function(){if(this.dialog.el){var e={top:this.dialog.el.getStyle("top"),left:this.dialog.el.getStyle("left"),height:this.dialog.el.getStyle("height"),width:this.dialog.el.getStyle("width")};this.dialogOldStyle=e;this.dialog.el.setStyle("top","0px");this.dialog.el.setStyle("left","0px");this.dialog.el.setStyle("height","5000px");this.dialog.el.setStyle("width","5000px")}},recessDialogBox:function(){if(this.dialog.el&&this.dialogOldStyle){this.dialog.el.setStyle("top",this.dialogOldStyle.top);this.dialog.el.setStyle("left",this.dialogOldStyle.left);this.dialog.el.setStyle("height",this.dialogOldStyle.height);this.dialog.el.setStyle("width",this.dialogOldStyle.width);delete this.dialogOldStyle}},recessTransition:function(){if(!this.isExpanded)return;this.recessDialogBox();this.dialog.params.disableSaveOverlay=false;this.isExpanded=false;if("undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent){this.resizeEvent.detach();this.resizeEvent=null}this.removeFullscreenButtons();var e=this.html.cloneNode(true);e.removeClass("fullscreenEditor");e.one(".field-wysiwyg").setContent("");e.one(".field-wysiwyg").setStyle("background","white");var t=e.one(".field-lhs");t&&t.remove();var a=e.one(".field-description-wrapper");a&&a.remove();e.setStyles({position:"fixed",top:0,left:0,"z-index":3e5,height:this.html.get("offsetHeight")+"px",width:this.html.get("offsetWidth")+"px",background:"transparent",padding:"0",overflow:"hidden"});this.events.push(e.on("click",function(e){e.stopPropagation()}));var i="opacity: 1; background: black; position: fixed; top: 0px; left: 0px; height: 5000px; width: 5000px; z-index: 250000";var n=u.Node.create('<div class="background" style="'+i+'"></div>');u.one("body").insert(e);u.one("body").insert(n);var s=this.html.getData("replaceNode");this.html.remove();this.html.setStyle("zIndex",null);s.replace(this.html);u.all(".standard-dialog-wrapper .wysiwyg-field-wrapper.fullscreenEditor").size()<=1&&u.one("body").removeClass("fullscreenEditor");this.viewMode=g;this.html.removeClass("fullscreenEditor");this.html.removeClass("inverted");var r=this.html.one("."+d);r.setStyle("height",this.containerHeight);var o=this._anim({node:e,to:{top:this.html.one(".field-rhs").getY()-u.one(document.body).get("docScrollY")+"px",height:this.originalTransData.height,left:this.html.one(".field-rhs").getX()-u.one(document.body).get("docScrollX")+"px",width:this.originalTransData.width},easing:"easeOutStrong",duration:.3});var l=this._anim({node:n,from:{opacity:1},to:{opacity:0},duration:.3,easing:"easeOutStrong"});var c=this._anim({node:e,to:{opacity:0},duration:.3,easing:"easeOutStrong"});o.on("end",function(){l.run()},this);l.on("end",function(){n.remove();c.run()},this);c.on("end",function(){e.remove();this.fire("minimize-complete");u.Global.fire("minimize-complete")},this);o.run();u.Squarespace.EscManager.removeTarget(this)},expandTransition:function(){if(this.isExpanded)return;this.dialog.params.disableSaveOverlay=true;this.isExpanded=true;var e=this.html.one(".field-wysiwyg-control-wrapper").get("offsetHeight");e+=this.html.one(".field-wysiwyg").get("offsetHeight");this.originalTransData={top:this.html.one(".field-rhs").getY()-u.one(document.body).get("docScrollY")+"px",left:this.html.one(".field-rhs").getX()-u.one(document.body).get("docScrollX")+"px",height:e+"px",width:this.html.one(".field-rhs").get("offsetWidth")+"px"};var t=this.html.cloneNode(true);t.one(".field-wysiwyg").remove();var a=t.one(".field-lhs");a&&a.remove();var i=t.one(".field-description-wrapper");i&&i.remove();t.setStyle("position","fixed");t.setStyle("top",this.originalTransData.top);t.setStyle("left",this.originalTransData.left);t.setStyle("z-index",3e5);t.setStyle("height",e+"px");t.setStyle("width",this.originalTransData.width);t.setStyle("background","white");t.setStyle("padding","0");t.setStyle("opacity","1");var n=t.one(".field-rhs");n&&n.setStyle("height","100%");var s="opacity: 0; background: black; position: fixed; top: 0px;left: 0px; height: 5000px; width: 5000px; z-index: 250000";var r=u.Node.create('<div class="background" style="'+s+'"></div>');var o=u.one("body");o.insert(t);o.insert(r);o.addClass("fullscreenEditor");this.viewMode=p;var l=this._anim({node:r,to:{opacity:1},duration:.3,easing:"easeOutStrong"});var c=this._anim({node:t,to:{top:"0px",height:this.html.get("winHeight")+"px",left:"0px",width:this.html.get("winWidth")+"px"},easing:"easeOutStrong",duration:.3});var d=this._anim({node:t,to:{opacity:0},duration:.3,easing:"easeOutStrong"});l.on("end",function(){this.updateEditorWidth();this.addFullscreenButtons();c.run()},this);c.on("end",function(){this.adjustHeight();var e=u.Node.create('<div class="replaceNode"></div>');this.html.setData("replaceNode",e);this.html.replace(e);u.one("body").append(this.html);this.html.setStyle("zIndex",u.Squarespace.DIALOG_ZINDEX_BASE+10);u.Squarespace.EscManager.addTarget(this);this.html.addClass("fullscreenEditor");this.resizeEvent=u.on("resize",this.fullScreenEditorResize,u.one(window),this);this.hideMenuEvent=this.dialog.on("keydown",this.hideMenuBar,this);this.events.push(this.hideMenuEvent);r.remove();this.expandDialogBox();d.run()},this);d.on("end",function(){this.fire("maximize-complete");u.Global.fire("maximize-complete");t.remove()},this);l.run()},cancel:function(e){this.isExpanded&&(27===e.keyCode?this.toggleFullScreen(e):u.Squarespace.EscManager.addTarget(this))},addFullscreenButtons:function(){var e={type:"container",contents:[{type:"separator"},{cmd:"inverted",title:l("Inverted"),type:"button"},{type:"separator"},{cmd:"widthsmall",title:l("Small"),type:"button"},{cmd:"widthmedium",title:l("Medium"),type:"button"},{cmd:"widthlarge",title:l("Large"),type:"button"}]};var t=this._renderContainer(e);t.addClass("fullscreen-options");var a=this.html.one(".field-wysiwyg-control");var i=a.get("children");a.insert(t,i.size()-1)},removeFullscreenButtons:function(){var e=this.html.all(".fullscreen-options");e.remove()},hideMenuBar:function(e){if(e&&e.pageY<=i)return;if(this.menuHidden||this.viewMode!==p)return;this.menuHidden=true;var t=this.html.one(".field-wysiwyg-control-wrapper");var a=this.dialog.el.one(".autosave-state");this.hideMenuEvent&&this.hideMenuEvent.detach();if(!t||!t._node||t.get("id")!==t._node.id){console.log("no menu node");this.hideMenuEvent.detach();return}this.hideMenuAnim=new u.Anim({node:t,to:{top:"-"+t.get("offsetHeight")},duration:.3,easing:u.Easing.easeOutStrong});this.hideMenuAnim.run();a&&a.setStyle("visibility","hidden");this.showMenuEvent=u.one("window").on("mousemove",this.showMenuBar,this);this.events.push(this.showMenuEvent);this.showMenuEvent=u.one("body").on("mousemove",this.showMenuBar,this)},showMenuBar:function(e){if(e.pageY>i)return;"undefined"!==typeof this.hideMenuAnim&&this.hideMenuAnim&&this.hideMenuAnim.stop();var t=this.html.one(".field-wysiwyg-control-wrapper");var a=this.dialog.el.one(".autosave-state");if(!t||!t._node||t.get("id")!==t._node.id){this.showMenuEvent.detach();return}this.showMenuEvent&&this.showMenuEvent.detach();this.showMenuAnim=new u.Anim({node:t,to:{top:"0px"},duration:.3,easing:u.Easing.easeOutStrong});this.showMenuAnim.run();a&&a.setStyle("visibility","");this.showMenuEvent&&this.showMenuEvent.detach();this.menuHidden=false},fullScreenEditorResize:function(e){this.adjustHeight()},isFullscreen:function(){if(this.viewMode===p)return true;return false},_textEditorShow:function(){this.events.push(u.one("body").on("click",this.onBodyClick,this));this.viewMode!==r||this.resizeEvent||(this.resizeEvent=u.on("resize",this.adjustHeight,u.one(window),this))},getIdealColumnWidth:function(){var e=this.editor.getTemplate();var t=this.html.get("offsetWidth")-130;t-=(e.getColumns()-1)*e.getMarginWidth();return t/e.getColumns()},onBodyClick:function(e){if(e.target.ancestor(".field-wysiwyg-control-wrapper",true))return;this.viewMode===p&&this.hideMenuBar(e)},getContentHeight:function(){if("html"===this.mode||"markdown"===this.mode)return this.editor.getContentHeight();return-1},adjustHeight:function(){var e=this.html.one("."+d);var t;if(this.viewMode===p){t=e.get("winHeight");e.setStyle("height",null)}else if(this.viewMode===r){t=e.get("winHeight");var a=u.one(".content-title").get("offsetHeight");var i=Math.max(t-a-34-20,this.getContentHeight());this.control.setStyle("height",i+"px")}},setHeight:function(e){e=parseInt(e,10);if(this.viewMode===g){e=e-this.menuEl.get("offsetHeight")-30;var t=this.html.one("."+d);this.containerHeight=e;t.setStyle("height",this.containerHeight+"px")}},_renderTitle:function(){if(this.config.title&&"top"===this.config.titleStyle)return u.Node.create('<div class="field-lhs">'+this.config.title+"</div>");return null},_renderButton:function(e){var t=u.Lang.sub('<button tabIndex="-1" class="field-wysiwyg-tool field-wysiwyg-tool-{cmd}"><span class="icon">{iconText}</span></button>',{cmd:e.cmd,iconText:e.html||"&nbsp;"});return u.Node.create(t)},_renderMenuSeparator:function(e){return u.Node.create('<div class="separator"></div>')},_renderContainer:function(e){var t=u.Node.create('<div class="sqs-container" style="'+(e.style||"")+'"></div>');var a=this._renderMenu(e.contents);for(var i=0;i<a.length;++i)t.append(a[i]);return t},_renderSelect:function(e){var t=u.Node.create('<select class="field-wysiwyg-select" tabIndex="-1"></select>');for(var a in e.options){var i=e.options[a];var n=u.Node.create('<option value="'+a+'">'+i+"</option>");e.selected&&e.selected===a&&n.setAttribute("selected","selected");t.append(n)}return t},_textEditorRender:function(){var e="sqs-text-edit mode-"+this.mode;var t=u.Node.create('<textarea id="'+a+'" class="'+e+'" style="border:none" ></textarea>');return{control:t,title:this._renderTitle(),menu:this._textEditorRenderMenu()}},_textEditorRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].code||this.menuConfigs[this.menuConfig].other||this.menuConfigs[this.menuConfig].markdown)},_renderMenu:function(e){var t=[];for(var a=0;a<e.length;++a){var i=e[a];"separator"===i.type?t.push(this._renderMenuSeparator(i)):"button"===i.type?t.push(this._renderButton(i)):"container"===i.type?t.push(this._renderContainer(i)):"select"===i.type&&t.push(this._renderSelect(i))}return t},_destroy:function(){this._super();this.destroyEvents();if("undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent){this.resizeEvent.detach();this.resizeEvent=null}this.editor&&this.editor.destroy();this.preCloseEvent&&this.preCloseEvent.detach()}})},"1.0",{requires:["node","squarespace-dialog","squarespace-flyout-link-edit","squarespace-markdown","squarespace-markdown-editor","squarespace-code-editor","squarespace-util","squarespace-widgets-confirmation","transition"]})},7748:function(e,t,a){var s=a(60);var r=a(0);var i=a(114);var o=a(87);var l=a(2877);var c=a(9032);var d=a(9035);var u=a(9039);YUI.add("squarespace-flyout-link-edit",function(n){n.namespace("Squarespace.Flyout");n.Squarespace.Flyout.LinkEdit=n.Base.create("LinkEdit",n.Base,[],{initializer:function(){this.editorContainer=n.Node.create("<div></div>");this.previewContainer=n.Node.create("<div></div>");this.previewContainer.on("mouseup",function(e){e.stopPropagation()});var e=n.one(n.config.doc.body);e.append(this.editorContainer);e.append(this.previewContainer);this.publish("updateLink");this.publish("removeLink");this.publish("close")},destructor:function(e){this.close();s.unmountComponentAtNode(this.editorContainer.getDOMNode());s.unmountComponentAtNode(this.previewContainer.getDOMNode());this.editorContainer.remove(true);this.previewContainer.remove(true);this.editorContainer=null;this.previewContainer=null},render:function(){this.renderEditor();this.renderPreview()},renderEditor:function(){var e=this.get("editorSelectionCoords");var t=this.get("toolbarOffset");var a={x:0,y:t};e&&(a={x:e.x,y:e.y+t});if(this.get("cursorAtLink")){var i=u(this.get("getSelection")());i&&(a={x:i.left,y:i.bottom+t})}s.render(r.createElement(d,{key:this.get("isEditorOpen"),isOpen:this.get("isEditorOpen"),cursorAtLink:this.get("cursorAtLink"),canEditTextContent:this.get("canEditTextContent"),className:this.get("classNames"),modalClassName:this.get("classNames"),pageDropdownClassName:this.get("classNames"),value:{url:this.get("linkUrl"),newWindow:this.get("newWindow"),name:this.get("textContent")},onChange:this.updateLink.bind(this),onRequestClose:this.close.bind(this),initialPosition:a}),this.editorContainer.getDOMNode())},renderPreview:function(){var e=this.get("getSelection");var t=c.getAnchor(e())||{left:0,top:0};var a={left:t.left,top:t.top+this.get("toolbarOffset")};s.render(r.createElement(c,{key:this.get("isPreviewOpen")+"-"+this.get("linkUrl"),isOpen:this.get("isPreviewOpen"),getSelection:e,anchor:a,link:{href:this.get("linkUrl"),target:this.get("newWindow")?"_blank":null},onRemoveLink:this.removeLink.bind(this),onEditLink:this.openEditorFromPreview.bind(this,a),className:this.get("classNames")}),this.previewContainer.getDOMNode())},openEditorFromPreview:function(e){this.openEditor(this.get("linkUrl"),this.get("newWindow"),this.get("linkId"),e)},openEditor:function(e,t,a,i){this.get("isEditorOpen")||this.get("isPreviewOpen")||n.Squarespace.EscManager.addTarget(this);this.setAttrs({anchor:i||this.get("anchor"),isEditorOpen:true,isPreviewOpen:false,linkUrl:e||"",linkId:a||"",newWindow:n.Lang.isBoolean(t)?t:this.get("newWindow")});this.render()},openPreview:function(e,t,a){this.get("isEditorOpen")||this.get("isPreviewOpen")||n.Squarespace.EscManager.addTarget(this);this.setAttrs({isEditorOpen:false,isPreviewOpen:true,linkUrl:e||"",linkId:a||"",newWindow:n.Lang.isBoolean(t)?t:this.get("newWindow")});this.render()},close:function(){(this.get("isEditorOpen")||this.get("isPreviewOpen"))&&n.Squarespace.EscManager.removeTarget(this);this.setAttrs({isEditorOpen:false,isPreviewOpen:false,forceUpdate:false});this.render();this.fire("close")},updateLink:function(e){if(this.get("forceUpdate")||e.url!==this.get("linkUrl")||e.newWindow!==this.get("newWindow")||e.name!==this.get("textContent")){this.setAttrs({linkUrl:e.url,newWindow:e.newWindow,textContent:e.name});this.fire("updateLink",this.getAttrs(["linkUrl","newWindow","textContent"]))}},removeLink:function(){this.setAttrs({linkUrl:null});this.fire("removeLink");this.close()}},{ATTRS:{anchor:{value:null,setter:function(e){if(e&&e.getDOMNode)return e.getDOMNode();return e},getter:function(e){if(e&&e.nodeType)return e;return e||"mousepointer"}},canEditTextContent:{value:true},disableNewWindow:{value:false},linkId:{value:""},linkIndex:{value:""},linkUrl:{value:"#"},textContent:{value:""},newWindow:{value:true},isEditorOpen:{value:false},isPreviewOpen:{value:false},forceUpdate:{value:false},getSelection:{value:function(){return n.config.win.getSelection()}},toolbarOffset:{value:i.isFeatureEnabled(o.NEW_STACKED_INDEX)?55:0,valueFn:function(){return this.get("toolbarOffsetOverride")}},toolbarOffsetOverride:{value:void 0},classNames:{value:l.NONINTERACTIVE_CLASSNAME}}})},"1.0",{requires:["base","squarespace-escmanager"]})},7749:function(e,t,a){var h=a(1518);YUI.add("squarespace-markdown-editor",function(p){p.namespace("Squarespace");p.Squarespace.MarkdownEditor=p.Base.create("markdownEditor",p.Squarespace.CodeEditor,[],{initializer:function(){this._editorNode=p.one(this.editor.getWrapperElement());this._initializeLinkFlyout()},destructor:function(){this._linkEdit.close()},execCommand:function(e,t){var a=true;switch(e){case"bold":this._toggleSurroundSelection("**");break;case"link":this._showLinkFlyout(this._findLinkId(),true);a=false;break;case"italic":this._toggleSurroundSelection("*");break;case"heading":this._toggleHeading(t);break;case"insertorderedlist":this._toggleSurroundSelection("1. ","",true);break;case"insertunorderedlist":this._toggleSurroundSelection("* ","",true);break;case"blockquote":this._toggleSurroundSelection("> ","",true);break}a&&this.editor.focus()},_initializeLinkFlyout:function(){this._linkEdit=new p.Squarespace.Flyout.LinkEdit({toolbarOffsetOverride:0,disableNewWindow:true,canEditTextContent:false,anchor:p.one(".field-wysiwyg-control")});this._linkEdit.on("updateLink",function(e){this._cmLink(this._linkEdit.get("linkIndex")||"0",e.linkUrl)},this);this._linkEdit.on("removeLink",function(){this._cmLink(this._linkEdit.get("linkIndex")||"0")},this);this._editorNode.after("mouseup",p.bind(function(e){this._linkEdit.setAttrs({editorSelectionCoords:{x:e.clientX,y:e.clientY}});var t=this._findLinkId();if("0"!==t&&this._lastSeenLinkId!==t){e.halt();this._lastSeenLinkId=t;this._showLinkFlyout(t,false)}else{this._lastSeenLinkId="";this._linkEdit.close()}},this))},_findLinkId:function(){var e=this.editor.getCursor();var t=e.ch;var a=this.editor.getTokenTypeAt(e);if(a&&a.indexOf("link")>-1){while(a&&-1===a.indexOf("url")){t++;a=this.editor.getTokenTypeAt({line:e.line,ch:t})}if(a){var i=this.editor.getTokenAt({line:e.line,ch:t+1});if(/\d+/.test(i.string))return i.string}}return"0"},_showLinkFlyout:function(e,t){var a="";if(e){var i=this.editor.getValue();var n=new RegExp("\\n\\s*\\["+e+"\\]\\s*:\\s*([^'\"(\\n]+)[^\\n]*");var s=i.match(n)||[];s[1]?a=s[1]:e="0"}if("0"!==e){var r=this.editor.getCursor();var o=this.editor.getTokenAt(r);var l=new RegExp("(?:\\[([^\\]]+)\\]\\["+e+"\\])");var c=o.state.thisLine.string;var d=c.match(l);var u=d[1];var g=d.index+1;var p=g+u.length;this.editor.setSelection({line:r.line,ch:g},{line:r.line,ch:p})}var h=this.editor.cursorCoords();this._linkEdit.setAttrs({linkIndex:e,editorSelectionCoords:{x:h.left,y:h.bottom}});t?this._linkEdit.openEditor(a,false):this._linkEdit.openPreview(a,false)},_cmHeading:function(e){var t=p.clone(this.editor.getCursor(true));var a;if(this.editor.somethingSelected()){a=this.editor.getSelection();a=a.split(/[\r\n]{1,2}/)[0]}else{a=this.editor.getLine(t.line);t.ch=0;this.editor.setSelection(t,{line:t.line,ch:1e6})}var i=["_","=","-","`"][e];var n=Array(Math.max(a.length+1,3)).join(i);if(t.ch>0){this.editor.replaceSelection("\n\n"+a+"\n"+n+"\n");this.editor.setSelection({line:t.line+2,ch:0},{line:t.line+2,ch:1e6})}else{this.editor.replaceSelection(a+"\n"+n+"\n");this.editor.setSelection({line:t.line,ch:0},{line:t.line,ch:1e6})}},_cmUnheading:function(){var e=p.clone(this.editor.getCursor(true));var t=e.line;if(/^[=\-]{3,}/.test(this.editor.getLine(t+1))){var a=/^\w*$/.test(this.editor.getLine(t+2));this.editor.setSelection({line:t,ch:1e6},{line:t+1+a,ch:1e6});this.editor.replaceSelection("");this.editor.setSelection({line:t,ch:0},{line:t,ch:1e6});return true}return false},_toggleHeading:function(e){this._cmUnheading()||this._cmHeading(e)},_cmSurround:function(e,t,a){t=p.Lang.isUndefined(t)?e:t;var i=p.clone(this.editor.getCursor(true));var n=p.clone(this.editor.getCursor(false));var s=this.editor.getSelection();if(a){if(i.line!==n.line){for(var r=i.line,o=n.line+1;r<o;r++){this.editor.setSelection({line:r,ch:0});this._cmSurround(e,t,true)}this.editor.setSelection({line:i.line,ch:0},{line:n.line,ch:1e6});return}var l=this.editor.getLine(i.line);var c=p.clone(this.editor.getCursor(true));var d=p.clone(this.editor.getCursor(false));c.ch=Math.max(l.search(/\S/),0);d.ch=l.length;this.editor.setSelection(c,d);s=l.substr(Math.max(0,c.ch))}i.ch+=e.length;n.ch+=e.length;this.editor.replaceSelection(e+s+t);this.editor.setSelection(i,n)},_cmUnsurround:function(e,t,a){t=p.Lang.isUndefined(t)?e:t;var i=p.clone(this.editor.getCursor(true));var n=p.clone(this.editor.getCursor(false));if(a){if(i.line!==n.line){var s=false;var r;for(var o=i.line,l=n.line+1;o<l;o++){this.editor.setSelection({line:o,ch:0},{line:o,ch:0});r=this._cmUnsurround(e,t,true);s=r||s}this.editor.setSelection({line:i.line,ch:0},{line:n.line,ch:1e6});return s}var c=this.editor.getLine(i.line);i.ch=c.search(/\W/);n.ch=c.length}i.ch=Math.max(0,i.ch-e.length);n.ch+=t.length;var d=this.editor.getRange(i,n);var u=d.length-t.length;if(d.slice(0,e.length)==e&&d.slice(u)==t){this.editor.setSelection(i,n);this.editor.replaceSelection(d.slice(e.length,u));return true}return false},_toggleSurroundSelection:function(e,t,a){this._cmUnsurround(e,t,a)||this._cmSurround(e,t,a)},_cmLink:function(e,t){var a=false;var i=p.clone(this.editor.getCursor(true));var n=p.clone(this.editor.getCursor(false));var s,r;if(t)if("0"===e){this._cmSurround("[","][0]");i.ch++;n.ch++;var o=n.line;var l;var c="\n[0]: "+t;do{o++;l=this.editor.getLine(o);if(p.Lang.isUndefined(l)){this.editor.replaceRange("\n"+c,{line:o,ch:0});break}if(h(l)){var d=this.editor.getLine(o+1);d&&d[0]&&"["!==d[0]&&(c+="\n");this.editor.replaceRange(c,{line:o,ch:0});break}}while(l);s=this.editor.getValue();a=true}else{r=new RegExp("(\\n\\s*\\["+e+"\\]\\s*:\\s*)[^'\"(\\n]+([^\\n]*)");s=this.editor.getValue();s=s.replace(r,"$1"+t+"$2")}else{r=new RegExp("(?:\\[([^\\]]+)\\]\\s?\\["+e+"\\])|(?:^\\s*\\["+e+"\\]\\s*:.*$(?:\\n$)?)","gm");s=this.editor.getValue();s=s.replace(r,"$1");i.ch--;n.ch--;a=true}if(a){var u=0;var g={};s.replace(/\]\s*\[(\d{1,3})\]/g,function(e,t){if(!g[t]){u+=1;g[""+t]=u}return e});s=s.replace(/\[(\d{1,3})\]/g,function(e,t){return"["+(g[t]||t)+"]"});"0"===e?this._linkEdit.set("linkIndex",g[e]):this._linkEdit.set("linkIndex","0")}this.editor.setValue(s);this.editor.setSelection(i,n)}},{ATTRS:{mode:{value:"code"},height:{value:-1}}})},"1.0",{requires:["base","squarespace-flyout-link-edit","squarespace-code-editor"]})},7750:function(e,t,a){var i=a(21);YUI.add("squarespace-code-editor",function(e){var t=a(5394);e.namespace("Squarespace");e.Squarespace.CodeEditor=e.Base.create("codeEditor",e.Base,[],{initializer:function(e){this.el=e.el;e.tabIndex&&this.el.setAttribute("tabIndex",e.tabIndex);this.parentNode=this.el.get("parentNode");this.parentNode.setStyle("overflow","hidden");this.editor=t.fromTextArea(this.el.getDOMNode(),{lineWrapping:true,mode:this.get("mode")});this.editor.getScrollerElement().style.height="100%";this._setOptionsForMode(this.get("mode"));this.on("modeChange",this._loadMode,this);this.after("heightChange",this._setEditorHeight,this);this.resizeOnFirstCursorActivity();this.setToParentHeight()},setToParentHeight:function(){var e=this.parentNode.getStyle("height");this.set("height",e)},resizeOnFirstCursorActivity:function(){var e=function(){if(this.editor.getScrollInfo().top>0){this.editor.off("cursorActivity",e);this.editor.refresh()}}.bind(this);this.editor.on("cursorActivity",e)},getContent:function(){return this.editor.getValue()},setContent:function(e){return this.editor.setValue(e||"")},getContentHeight:function(){return parseInt(this.editor.getScrollerElement().offsetHeight,10)},focus:function(){this.editor.refresh();return this.editor.focus()},execCommand:i,_clearOptions:function(){this.editor.setOption("matchBrackets",false);this.editor.setOption("autoCloseBrackets",false);this.editor.setOption("matchTags",false);this.editor.setOption("autoCloseTags",false)},_setOptionsForMode:function(e){switch(e){case"css":case"javascript":this.editor.setOption("matchBrackets",true);this.editor.setOption("autoCloseBrackets",true);break;case"htmlmixed":this.editor.setOption("matchTags",true);this.editor.setOption("autoCloseTags",true);break}},_loadMode:function(e){this._clearOptions();this.editor.setOption("mode",e.newVal);this._setOptionsForMode(e.newVal)},_setEditorHeight:function(e){this.editor.setSize(null,e.newVal)}},{ATTRS:{mode:{value:"htmlmixed"},height:{value:-1}}})},"1.0",{requires:["base","node"]})},7751:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-collection-link",function(t){var e={linkTitle:"",linkTarget:"",newWindow:false};var a=t.namespace("Squarespace.Block").CollectionLink=t.Base.create("block-collection-link",t.SQS.LayoutEngine.Block.ModelSyncBase,[],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})}},{CSS_PREFIX:"sqs-block-collectionlink",ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return t.Squarespace.Block.Editor.Schema;return t.Squarespace.Block.Editor.CollectionLink}},type:{value:i.COLLECTION_LINK},defaultContentModel:{value:e}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-collection-link-editor","squarespace-block-schema-editor"]})},7752:function(e,t,a){var o=a(24).t;var i=a(207);YUI.add("squarespace-block-collection-link-editor",function(r){r.namespace("Squarespace.Block.Editor").CollectionLink=r.Base.create("collection-link-block-editor-dialog",r.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.CollectionLink")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Content Link")}}});var t=r.namespace("Squarespace.Block.ModelEditorDialog").CollectionLink=r.Base.create("blockCollectionLinkEditor",r.Squarespace.ModelEditorDialog,[],{_showDialog:function(){t.superclass._showDialog.call(this);var e=this.get("dialog").getField("collectionId");e.set("collectionGroups",this._getCollectionGroups());e.syncUI()},_getCollectionGroups:function(){var e=r.Squarespace.ContentCollectionUtils;var t=r.Squarespace.ContentCollectionCache;var a=t.filter(e.isGenericOrProduct);var i=t.filter(e.isPage);var n=t.filter(e.isIndex);var s=e.groupCollectionsByTypeName(a);s.push({title:o("Pages"),collections:i});s.push({title:o("Index"),collections:n});return s},_getDialogConfig:function(){return{width:335,height:400,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:o("Content Link"),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:true,fields:[{type:"description",text:o('Create a visual link to a page within your site that includes its associated title, thumbnail, and description. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:i.CONTENT_LINK_BLOCK})},{ctor:r.Squarespace.DialogFields.ContentIdSelector,config:{mode:"page",showCollectionTagsAndCategories:false,showGroupTitles:true,name:"collectionId",collectionGroups:[]}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},7753:function(e,t,a){YUI.add("squarespace-dialog-gallery-options",function(n){n.namespace("Squarespace.DialogFields");var s=n.Squarespace.DialogFields.GalleryOptions=n.Base.create("galleryOptions",n.Squarespace.DialogField2,[],{initializer:function(e){this._originalSettings={};this._widgetsByName={};this.publish("options-changed",{emitFacade:false})},renderUI:function(){var e=this.get("options");var a=[];n.Object.each(e,function(e,t){this._originalSettings[t]=e;a.push(this._optToWidget(e,t))},this);n.Array.forEach(a,function(a){a.after("dataChange",function(e){var t=e.attrName;this.fire("options-changed",a,t)},this);this.add(a)},this);n.Squarespace.DialogFields.GalleryOptions.superclass.renderUI.call(this)},syncUI:function(){this._updateVisibleWidgets()},didDataChange:function(){var a=false;n.Object.each(this.get("data"),function(e,t){n.Object.hasKey(this._initialData,t)&&(a=this._initialData[t]!==e)});return a},_optToWidget:function(e,t){var a=e.type;switch(a){case"multiOption":return this._multiOption(e,t);case"select":return this._selectWidget(e,t);case"boolean":return this._checkWidget(e,t);case"slider":return this._sliderWidget(e,t)}},add:function(e){this._widgetsByName[e.get("name")]=e;n.Squarespace.DialogFields.GalleryOptions.superclass.add.call(this,e)},_getOriginalSettings:function(e){return this._originalSettings[e.get("name")]},_updateVisibleWidgets:function(){this.each(function(e){var t=this._getOriginalSettings(e);if(t.onlyFor){var a;a=t.matchAllOnlyFor?-1===t.onlyFor.map(function(e){return this._validateSettings(e)}.bind(this)).indexOf(false):n.Array.some(t.onlyFor,this._validateSettings,this);a?e.show():e.hide()}else e.show()},this)},_validateSettings:function(e){var t=this._parseFieldCondition(e);var a=this._widgetsByName[t.name];var i=a.get("visible");return i&&String(a.get("data"))===String(t.value)},_parseFieldCondition:function(e){var t=e.split(":");return{name:t[0],value:t[1]}},_resetValuesToDefaults:function(e){var t=this._getOriginalSettings(e);n.Lang.isUndefined(t.defaultValue)||e.set("data",t.defaultValue)},_multiOption:function(e,t){var a=[];n.Object.each(e.options,function(e,t){a.push({title:e.title,value:t,icon:e.icon})});var i=new n.Squarespace.DialogFields.MultiOption({defaultValue:e.defaultValue,options:a,name:t});this._monitorValueChange(i);return i},_selectWidget:function(e,t){var a=s.convertToOptionsArray(e.options);var i=new n.Squarespace.DialogFields.Select({"strings.title":e.title,"strings.description":e.description,options:a,data:e.defaultValue,className:"thin dark",name:t,visible:"design"!==t,prefix:""});i.unplug(n.Plugin.WidgetAnim);this._monitorValueChange(i);return i},_monitorValueChange:function(e){e.after("dataChange",function(){if("design"===e.get("name")){this.each(function(e){"design"!==e.get("name")&&this._resetValuesToDefaults(e)},this);this._applyValuesFromSelect(e)}this._updateVisibleWidgets()},this)},_applyValuesFromSelect:function(e){var t=this._getOriginalSettings(e);if(t.options){var a=t.options[e.get("data")];n.Object.each(a.values,function(e,t){var a=this._widgetsByName[t];a.set("data",e)},this)}},_sliderWidget:function(e,t){return new n.Squarespace.DialogFields.Slider({name:t,"strings.description":e.description,"strings.suffix":e.numericSuffix||"",range:[e.min,e.max],data:e.defaultValue,isNumericLabel:!("string"===typeof e.numericSuffix&&""!==e.numericSuffix.trim()),labelWidth:e.labelWidth,visible:false})},_checkWidget:function(e,t){var a=new n.Squarespace.DialogFields.Check({name:t,"strings.title":e.title,"strings.description":e.description,data:e.defaultValue,visible:false});a.after("dataChange",this._updateVisibleWidgets,this);return a}},{convertToOptionsArray:function(e){var i=[];if(n.Lang.isArray(e))return e;if(!n.Lang.isObject(e)&&!n.Lang.isValue(e)){false;return i}n.Object.each(e,function(e,t){var a=e.title||t;i.push({value:t,label:a})},this);return i},CSS_PREFIX:"sqs-gallery-options",ATTRS:{data:{getter:function(){var e=function(e){return e.get("visible")};return n.Array.reduce(n.Array.filter(this._items,e),{},function(e,t){e[t.get("name")]=t.get("data");return e})},setter:function(t){n.Array.each(this._items,function(e){e.set("data",t[e.get("name")])},this)},lazyAdd:false},options:{},currentDesign:{readOnly:true,getter:function(){return this._widgetsByName.design.get("data")}}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-dialog-select","squarespace-dialog-slider"]})},7754:function(e,t,a){var i=a(24).t;var u=a(2025);var g=a(1430);var n=a(701);var s=a(114);var r=a(87);var o=a(1342);YUI.add("squarespace-block-donation",function(d){var e=d.Base.create("DonationModel",d.Model,[],{sync:function(e,t,i){var n=this.get("donatePageId");var a="create"===e;var s="update"===e;if(a||s){var r=this.toJSON();s&&(r=d.merge(r,{id:n}));var o=new d.Squarespace.Models.DonatePage(r);o.save(t,d.bind(function(e,t){var a=d.JSON.parse(t.response);n=a.id;this.set("donatePageId",a.id);u.grantAchievement(g.ADDED_DONATION_BLOCK);i(e)},this))}else if("delete"===e){var l=new d.Squarespace.Models.DonatePage({id:n});l.destroy({remove:true},i)}else if("read"===e&&d.Lang.isValue(n)){var c=new d.Squarespace.Models.DonatePage({id:n});c.load(i)}else i()},isNew:function(){return!d.Lang.isValue(this.get("donatePageId"))}},{ATTRS:{suggestedContributions:{valueFn:function(){if(!this.get("donatePageId"))return[{amountCents:1e3,label:""},{amountCents:2500,label:""},{amountCents:5e3,label:""},{amountCents:1e4,label:""}]}},buttonLabel:{value:i("Donate")},queuedSubmitEnabled:{value:false}}});d.namespace("Squarespace.Block").Donation=d.Base.create("block-donation",d.SQS.LayoutEngine.Block.ModelSyncBase,[d.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){this.get("model").after("change",function(e){var t=this.get("contentBox");var a=t.one(".sqs-donate-button");e.changed.donatePageId&&a.setAttribute("data-donate-page-id",e.changed.donatePageId.newVal);if(e.changed.buttonAlignment){var i=e.changed.buttonAlignment;var n="sqs-donate-button-wrapper--align-";t.get("children").replaceClass(n+i.prevVal,n+i.newVal)}e.changed.buttonLabel&&a.setHTML(e.changed.buttonLabel.newVal)},this);this.get("boundingBox").delegate("click",function(e){this.get("editable")||d.Squarespace.Commerce.goToDonatePage(e.target.getAttribute("data-donate-page-id"))},".sqs-donate-button",this)}},{CSS_PREFIX:"sqs-block-donation",MODEL:e,ATTRS:{editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||s.isFeatureEnabled(r.ROSETTA_BLOCK_EDITORS))return d.Squarespace.Block.Editor.Schema;return d.Squarespace.Block.Editor.Donation}},type:{value:n.DONATION}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-donation-editor","squarespace-block-schema-editor","squarespace-models-donate-page","squarespace-premium-block-mixin"]})},7755:function(e,t,a){var i=a(24).t;var n=a(5320);var s=a(207);YUI.add("squarespace-block-donation-editor",function(e){e.namespace("Squarespace.Block.Editor").Donation=e.Base.create("donation-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Donation")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Donation")}}});var t={width:520,height:440,primaryTabs:[{title:i("Donation"),tabTitle:i("Description"),icon:"/universal/images-v6/icons/icon-donation-18-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Add a button that will take visitors to a page where they can make a contribution to your cause or organization.<br><br>You can view and manage donations by navigating to <strong>Home &rsaquo; Donations</strong> in the left-hand panel. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.DONATION_EDITOR})},{ctor:e.Squarespace.DialogFields.Text,name:"title",config:{className:"thin","strings.title":i("Title"),"strings.placeholder":i('e.g. "The Squarespace Education Fund"'),"strings.description":i("The name of your cause or organization to display on the Donate page and Donation Thank You email")}},{ctor:e.Squarespace.DialogFields.TextArea,name:"description",config:{"strings.title":i("Short Description"),"strings.placeholder":i("e.g. 100% of every donation goes directly to programming. We deeply appreciate your support!"),"strings.description":i("Information about your cause to display on the Donation page")}},{ctor:e.Squarespace.DialogFields.Text,name:"buttonLabel",config:{className:"thin",defaultValue:i("Donate"),"strings.title":i("Custom Button Label"),"strings.placeholder":i('The label on the button, e.g. "Donate"'),"strings.description":i("Edit the text on the button")}},{ctor:e.Squarespace.DialogFields.Select,config:{"strings.title":i("Button Alignment"),name:"buttonAlignment",defaultValue:"left",className:"thin dark",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]},{tabTitle:i("Amounts"),scroll:true,fields:[{ctor:e.Squarespace.DialogFields.LabelledValueTable,name:"suggestedContributions",config:{"strings.title":i("Suggested Contribution Amounts"),"strings.description":i("Squarespace recommends the below suggested amounts. You have the option to label these amounts: e.g. “Gold Sponsor” or “Feeds 10 cats”. Donors will also be able to enter their own amount."),"strings.valueLabel":i("Amount"),"strings.labelLabel":i("Label (optional)"),"strings.emptyMessage":i("No suggested contributions. Visitors can enter any amount."),valueKey:"amountCents",labelKey:"label",valueInputPlugin:e.Squarespace.Plugin.MoneyFormatter}}]},{tabTitle:i("Additional"),scroll:true,fields:[{ctor:e.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",className:"description",content:'<div class="description-label">'+i("Additional Information")+"</div> "+i("Prompt your donors to submit additional information as they make a contribution. (e.g. you can provide the option to make a donation in honor of someone or choose a gift as a thank you for their donation)")}},{ctor:e.Squarespace.DialogFields.FormBuilder,config:{name:"customForm",minimumLength:0,excludedFieldTypes:[n.HIDDEN]}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").Donation=e.Base.create("blockDonationEditor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){this.plug(e.Squarespace.ModelEditorPlugins.LoadBeforeShowing)}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-labelled-value-table","squarespace-dialog-form-builder","squarespace-plugin-money-formatter","squarespace-util-authenticated"]})},7756:function(e,t,a){var i=a(24).t;YUI.add("squarespace-dialog-labelled-value-table",function(s){s.namespace("Squarespace");var t=s.Squarespace.DialogFields.LabelledValueTable=s.Base.create("LabelledValueTable",s.Squarespace.DialogField2,[],{initializer:function(){s.Lang.isValue(this.get("data"))||this.set("data",this.get("defaultData"))},renderUI:function(){t.superclass.renderUI.call(this);this._populateTable(this.get("data"))},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");this.on("rowsChanged",this._updateDataFromTable,this);e.delegate("change",this._updateDataFromTable,"input",this);e.delegate("click",this._insertNewRow,".add-row",this);e.delegate("click",this._removeRow,".remove",this)},_populateTable:function(e){s.Array.each(e,this._addRow,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox");s.Lang.isValue(this.get("data"))&&e.toggleClass("empty",0===this.get("data").length)},_updateDataFromTable:function(){this.set("data",this._extractRowValuesFromTable())},_removeRow:function(e){var t=e.currentTarget.ancestor(".row");t.remove();e.stopPropagation();this.fire("rowsChanged")},_insertNewRow:function(){var e=this.get("contentBox");var t={};t[this.get("valueKey")]=2500;this._addRow(t);e.one(".add-row").scrollIntoView();this.fire("rowsChanged")},_addRow:function(e){var t=this.get("contentBox");var a=s.Node.create(s.Handlebars.render(this.getProperty("ROW_TEMPLATE"),{value:e[this.get("valueKey")],label:e[this.get("labelKey")]}));s.Lang.isValue(this.get("valueInputPlugin"))&&a.one('input[name="value"]').plug(this.get("valueInputPlugin"));t.one("tbody").append(a)},_extractRowValuesFromTable:function(){var e=this.get("contentBox");var t=e.one("tbody");var n=[];t.all(".row").each(function(e){var t={};var a=this.get("valueInputPlugin");if(s.Lang.isValue(a)){var i=a.NS;t[this.get("valueKey")]=e.one('input[name="value"]')[i].get("data")}else t[this.get("valueKey")]=e.one('input[name="value"]').get("value");t[this.get("labelKey")]=e.one('input[name="label"]').get("value");n.push(t)},this);return n}},{CSS_PREFIX:"sqs-labelled-value-table",HANDLEBARS_TEMPLATE:"dialog-labelled-value-table.html",ROW_TEMPLATE:'<tr class="row"><td class="left"><input type="text" class="value" name="value" value="{{value}}" /></td><td class="right"><input type="text" class="label" name="label" value="{{label}}" /></td><td class="remove"><div class="remove-row"></div></td></tr>',ATTRS:{strings:{value:{title:"",description:"",emptyMessage:"Empty",valueLabel:i("My Value"),labelLabel:i("My Label")}},valueKey:{value:"value"},labelKey:{value:"label"},valueInputPlugin:{value:null},defaultData:{value:[]}}})},"1.0",{requires:["base","handlebars","json","squarespace-animations","squarespace-dialog-field-2","squarespace-dialog-labelled-value-table-template"]})},7757:function(e,t){YUI.add("squarespace-dialog-labelled-value-table-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-labelled-value-table.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s,r="function",o=this.escapeExpression,l=this;function c(e,t){var a="",i;a+='\n\n  <div class="field-lhs top">\n    ';if(i=n.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===r?i.apply(e):i}a+=o(i)+'\n  </div>\n  <div class="field-rhs">\n    <div class="field-description-wrapper">\n      <div class="field-description">\n        ';if(i=n.description)i=i.call(e,{hash:{},data:t});else{i=e.description;i=typeof i===r?i.apply(e):i}a+=o(i)+"\n      </div>\n    </div>\n\n    <table>\n      <thead>\n        <tr>\n          <th>\n            ";if(i=n.valueLabel)i=i.call(e,{hash:{},data:t});else{i=e.valueLabel;i=typeof i===r?i.apply(e):i}a+=o(i)+"\n          </th>\n          <th>\n            ";if(i=n.labelLabel)i=i.call(e,{hash:{},data:t});else{i=e.labelLabel;i=typeof i===r?i.apply(e):i}a+=o(i)+'\n          </th>\n        </tr>\n      </thead>\n      <tbody class="table-body">\n        <tr class="empty-message"><td colspan="2">';if(i=n.emptyMessage)i=i.call(e,{hash:{},data:t});else{i=e.emptyMessage;i=typeof i===r?i.apply(e):i}a+=o(i)+'</td></tr>\n      </tbody> \n    </table>\n\n    <div class="add-row">\n      <img src="//assets.squarespace.com/universal/images-v6/standard/icon_add_11_light.png" />\n    </div>\n\n  </div>\n';return a}s=n["with"].call(t,t.strings,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});return s||0===s?s:""})})();var t="dialog-labelled-value-table.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7758:function(e,t,a){var i=a(2026);var n=a(1005);var s=a(1310);var r=a(1946);YUI.add("squarespace-plugin-money-formatter",function(e){e.namespace("Squarespace.Plugin");e.Squarespace.Plugin.MoneyFormatter=e.Base.create("moneyFormatter",e.Squarespace.Plugin.NumericFormatter,[],{_transformToData:function(e){return Number(this.convertToCents(e))},convertToCents:function(e){var t=String(e).replace(/[^\d\.,]/g,"");if(""===t)return 0;var a=this._getCurrencyTemplate();var i=t.split(a.decimalSeparator);var n=i[0];i.length>1&&(n+="."+i[1].substr(0,2));return Math.round(100*parseFloat(n,10))},_getCurrencyTemplate:function(){var e=s.getStoreCurrency();return r.Templates.native[e]}},{NS:"moneyFormatterPlugin",ATTRS:{displayFormatter:{value:function(e){var t=s.getStoreCurrency();return n.formatter.format(i.fromCents(e,t))}}}})},"1.0",{requires:["plugin","squarespace-commerce-utils","squarespace-plugin-numeric-formatter","squarespace-util"]})},7759:function(e,t){YUI.add("squarespace-models-donate-page",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.DonatePage=t.Base.create("DonatePage",t.Model,[t.Squarespace.ModelSync.REST],{root:"/api/rest/commerce/donate-pages",url:"/api/rest/commerce/donate-pages/{id}",toJSON:function(){var e=a.superclass.toJSON.call(this);t.Lang.isObject(e.customForm)&&(e.customForm={fields:t.Array.map(e.customForm,JSON.stringify)});return e}},{ATTRS:{title:{validator:t.Squarespace.AttrValidators.isString},suggestedContributions:{validator:t.Squarespace.AttrValidators.isArray},customForm:{validator:t.Squarespace.AttrValidators.isObject},buttonLabel:{validator:t.Squarespace.AttrValidators.isString},queuedSubmitEnabled:{validator:t.Squarespace.AttrValidators.isNullOrBoolean},customConfirmationPageUrl:{validator:t.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},7760:function(e,t,a){var i=a(24).t;var n=a(4156);YUI.add("squarespace-block-editor-button-container",function(t){t.namespace("Squarespace.Block.Editor");var a=t.Base.create("label",t.Squarespace.Widgets.SSWidget,[t.WidgetChild],{renderUI:function(){a.superclass.renderUI.apply(this,arguments);var e=t.Lang.sub(this.get("strings.labelTemplate"),this.toJSON());this.get("contentBox").append(e)},toJSON:function(){return{blockName:this.get("blockName")}}},{CSS_PREFIX:"sqs-label",ATTRS:{blockName:{validator:t.Squarespace.AttrValidators.isString},"strings.labelTemplate":{value:"{blockName}",readOnly:true}}});t.Squarespace.Block.Editor.ButtonContainer=t.Base.create("button",t.Squarespace.Widgets.SSWidget,[t.WidgetParent],{initializer:function(){this.publish("edit");this.publish("remove")},renderUI:function(){this.add(this.get("buttonConfigLabel"));var e=this.get("blockType");e&&n.isBlockTypeFeatureGated(e)&&n.renderLogo({node:this.get("contentBox").getDOMNode(),blockType:e});this.get("includeEdit")&&this.add(this.get("buttonConfigEdit"));this.get("includeRemove")&&this.add(this.get("buttonConfigRemove"))},_onEditClicked:function(){this.fire("edit")},_onRemoveClicked:function(){var e=new t.Squarespace.Widgets.Confirmation({"strings.title":i("Remove This Block?"),"strings.message":i("This will delete the block and its content. This cannot be undone."),"strings.confirm":i("Yes"),"strings.cancel":i("No")});e.on("confirm",function(){this.fire("remove")},this)}},{CSS_PREFIX:"sqs-block-editor-button-container",ATTRS:{zIndex:{value:1010},blockName:{validator:t.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},blockType:{validator:t.Squarespace.AttrValidators.isNumber},includeRemove:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},includeEdit:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},buttonConfigLabel:{getter:function(){return{type:a,blockName:this.get("blockName")}},readOnly:true},buttonConfigEdit:{valueFn:function(){return{type:t.Squarespace.Widgets.VanillaButton,strings:{systemName:"edit",text:i("Edit")},onClick:t.bind(this._onEditClicked,this)}},readOnly:true},buttonConfigRemove:{valueFn:function(){return{type:t.Squarespace.Widgets.VanillaButton,strings:{systemName:"remove",text:i("Remove")},onClick:t.bind(this._onRemoveClicked,this)}},readOnly:true}}})},"1.0",{requires:["base","node","overlay","squarespace-attr-validators","squarespace-dialog-button","squarespace-ss-widget","widget-parent"]})},7761:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-embed",function(e){e.namespace("Squarespace.Block").Embed=e.Base.create("block-embed",e.Squarespace.Block.CustomEmbedBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-embed",ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Embed}},type:{value:i.EMBED},safeguardEmbeddedScripts:{value:true}}})},"1.0",{requires:["squarespace-block-base-custom-embed","squarespace-block-embed-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7762:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-embed-editor",function(e){e.namespace("Squarespace.Block.Editor").Embed=e.Base.create("embed-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Embed")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Embed")}}});var t={width:470,height:190,tabs:[{title:i("Embed"),icon:"/universal/images-v6/icons/icon-embed-16-light.png",scroll:false,fields:[{ctor:e.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":i('Paste the URL of the item you\'re embedding, and we\'ll attempt to locate the content and format it for your site. If the content doesn\'t appear, enter the embed code manually by clicking the <strong>&lt;/&gt;</strong> icon.<br /><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.EMBED_EDITOR})}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").Embed=e.Base.create("blockEmbedEditor",e.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(e){return e.embed}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]})},7763:function(e,t,a){var i=a(100);var c=a(24).t;var n=a(213);var d=a(595).isProperUrl;YUI.add("squarespace-dialog-oembed",function(l){var t=l.namespace("Squarespace.DialogFields").Oembed=l.Base.create("oembed",l.Squarespace.DialogField2,[],{destructor:function(){this._onChange.cancel();this._pendingTracking&&l.config.win.clearTimeout(this._pendingTracking)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this._input=e.one(".input");this._manual=e.one(".manual");this._status=e.one(".status");this._updateStatus(true)},bindUI:function(){this._input.on("contextmenu",function(e){e.stopImmediatePropagation()});this._input.after("valuechange",this._onChange,this);this._manual&&this._manual.on("click",this._setManually,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=l.Lang.isValue(this.get("strings.title"))&&this.get("strings.title").length>0;this.get("boundingBox").toggleClass("has-title",e)},focus:function(){this._input.focus()},didDataChange:function(){return this.get("edited")},_getEmbedModelJSON:function(e){var t={url:"",html:"",resolveObject:"",resolvedBy:"",resolved:false};if(!e)return t;return l.merge(t,e)},_updateStatus:function(e,t){if("manual"===this.get("data.resolvedBy")){this._input.set("value","");this._setStatus(false,c("Embed data has been manually set."));return}var a;if(e){a=this.get("data.url");this.set("lastUrl",this.get("data.url"))}else a=this.get("processingUrl");a?this.get("data.resolved")||this.get("data.resolvedBy")?this._setStatus(false,""):l.Lang.isString(t)?this._setStatus(false,t):this._setStatus(false,c("URL is not embeddable.")):this._setStatus(false,this.get("strings.description"))},_queueTrackFailure:function(t){var a=this.get("filter");this._pendingTracking&&l.config.win.clearTimeout(this._pendingTracking);this._pendingTracking=l.config.win.setTimeout(function(){var e=l.Object.some(l.Squarespace.oEmbedResolvers,function(e){return e.canProcess(t,a)});e||n("oembed_resolution_failure",{url:t});this._pendingTracking=null}.bind(this),1e3)},_onChange:i(function e(){var t=this._input.get("value");if(t===this.get("lastUrl"))return;this.set("processingUrl",t);this.set("lastUrl",this.get("processingUrl"));this.set("edited",true);if(""===this.get("processingUrl")){this._clear();this._updateStatus();return}var i=this.get("processingUrl");0!==i.search(/^https?:\/\//)&&(i="http://"+i.replace(/^\/\//,""));if(!d(i)){this._clear();this._updateStatus();return}var n=function(e,t,a){if(a!==i){this._clear(e);this._updateStatus();return}if(!t){this._clear(e);this._updateStatus();this._sendAnalyticsInfo("Empty",a);return}this.set("data",l.merge(this.get("data"),t));this._updateStatus();this._sendAnalyticsInfo("Success",a)};var s=function(e,t,a){this._clear(e);this._updateStatus();this._sendAnalyticsInfo("Failure",a)};var r=function(e,t,a){this._clear(e);this._updateStatus(null,c("The request to resolve this URL timed out, please try again.")+" ");this._sendAnalyticsInfo("Timeout",a)};var a=function(e,t){this._setStatus(true,c("Locating content at that URL…"));var a=e.getProvider();e.process(t,{onSuccess:n.bind(this,a),onFailure:s.bind(this,a),onTimeout:r.bind(this,a)},this)};var o=l.Object.some(l.Squarespace.oEmbedResolvers,function(e){if(e.canProcess(i,this.get("filter"))){a.call(this,e,i);return true}},this);if(!o){this._queueTrackFailure(i);a.call(this,l.Squarespace.oEmbedResolversGeneric,i);return}this._clear()},100),_sendAnalyticsInfo:function(e,t){n("system_oembed",{result:e,url:t})},_setStatus:function(e,t){this._status.empty(true);e&&new l.Squarespace.Spinner({render:this._status,color:"dark"});this._status.append(l.Node.create(t))},_setManually:function(){var t=new l.Squarespace.EditingDialog({style:"flyout",name:"edit-embed",closeOthers:false,overlay:.5,width:460,buttons:[{type:"cancel",title:c("Cancel")},{type:"saveAndClose",title:c("Set")}],primaryTabs:[{title:c("Embed Data"),icon:"/universal/images-v6/icons/icon-embed-16-light-solid.png",fields:[{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"html","strings.placeholder":c("Paste a custom embed code here."),height:200}}]}]});t.on("send-requested",function(){var e={html:t.getData().html,resolvedBy:"manual",resolved:true};this.set("data",e);this.set("lastUrl",null);this.set("edited",true);this._updateStatus();t.close()},this);"manual"===this.get("data.resolvedBy")&&t.setInitialData({html:this.get("data.html")});this.get("dialog")&&this.get("dialog").addChildDialog(t);l.later(0,this,function(){t.show()})},_clear:function(e){var t={url:this._input.get("value")};e&&(t.resolvedBy=e);this.set("data",this._getEmbedModelJSON(t))}},{CSS_PREFIX:"sqs-oembed",HANDLEBARS_TEMPLATE:"dialog-oembed.html",ASYNC_DATA:true,ATTRS:{strings:{value:{title:"",description:"",inputPlaceholder:c("Enter an embeddable URL here")}},collection:{value:null},contentItem:{value:null},data:{value:{}},edited:{value:false},filter:{},item:{value:null},lastUrl:{value:null},manual:{value:true},processingUrl:{value:null}}})},"1.0",{requires:["base","event-valuechange","squarespace-dialog","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-file-image","squarespace-dialog-oembed-template","squarespace-job-manager","squarespace-jobs","squarespace-oembed-resolvers","squarespace-spinner","squarespace-util"]})},7764:function(e,t){YUI.add("squarespace-dialog-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-oembed.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o,l="function",c=this.escapeExpression,d=this;function u(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function g(e,t){return'\n  <div class="manual">&nbsp;</div>\n'}function p(e,t){return"has-manual"}function h(e,t){var a;return c((a=(a=e.data,null==a||false===a?a:a.url),typeof a===l?a.apply(e):a))}o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:d.noop,fn:d.program(1,u,n),data:n});(o||0===o)&&(s+=o);s+="\n\n";o=a["if"].call(t,t.manual,{hash:{},inverse:d.noop,fn:d.program(3,g,n),data:n});(o||0===o)&&(s+=o);s+='\n\n<input class="input field-input ';o=a["if"].call(t,t.manual,{hash:{},inverse:d.noop,fn:d.program(5,p,n),data:n});(o||0===o)&&(s+=o);s+='" value="';o=a["if"].call(t,(r=t.data,null==r||false===r?r:r.url),{hash:{},inverse:d.noop,fn:d.program(7,h,n),data:n});(o||0===o)&&(s+=o);s+='"\n  placeholder="'+c((r=(r=t.strings,null==r||false===r?r:r.inputPlaceholder),typeof r===l?r.apply(t):r))+'" spellcheck="false" tabindex="1">\n\n<div class="status description"></div>';return s})})();var t="dialog-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7765:function(e,t,a){var i=a(1007);var n=a(4196);YUI.add("squarespace-oembed-resolvers",function(r){r.namespace("Squarespace");r.Squarespace.EmbedResolver=r.Base.create("embedResolver",r.Base,[],{canProcess:function(e,t){var a=new RegExp(this.get("pattern"),"g");return e.match(a)&&(!r.Lang.isValue(t)||t===this.get("type"))},getProvider:function(){return this.get("serviceName").toLowerCase()},process:function(e,a,i){r.jsonp(this.get("serviceUrl")+"&url="+encodeURIComponent(e),{on:{success:r.bind(function(e,t){e=this._sanitizeResolvedData(e,t);a.onSuccess.apply(i,arguments)},this),failure:a.onFailure,timeout:a.onTimeout},args:[e],timeout:5e3,context:i})},_sanitizeResolvedData:function(e,t){var a=this.getProvider();if("instagram"===a){"Instagram"===e.title&&(e.title=null);e["instagram-url"]=e.thumbnail_url}else if(!e.html)return null;this._camelCaseDataKeys(e);return r.merge(e,{url:t,html:this._getCleanedHTML(e,t),resolveObject:this.get("objectName"),resolvedBy:a,resolved:true})},_camelCaseDataKeys:function(a){var e=["author_name","author_url","provider_name","provider_url","thumbnail_url"];r.Array.each(e,function(e){var t=a[e];if(t){a[i(e)]=t;delete a[e]}})},_getCleanedHTML:function(e,t){var a=this.getProvider();if("instagram"===a)return r.Squarespace.UITemplates.render("instagram-oembed.html",r.merge({url:t},e));if("youtube"===a){var i=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var n=(t.match(i)||["",""])[1];var s=t.split("?")[1]||"";s=s&&"?"+this._resolveYouTubeParams(s);n&&(e.html=r.Squarespace.UITemplates.render("youtube-oembed.html",{data:e,src:"//www.youtube.com/embed/"+n+s}))}return this._augmentEmbed(e.html.trim())},_augmentEmbed:function(e){var t=r.Node.create("<div>"+e+"</div>");var a="";t.all("iframe").each(this._augmentIframeEmbed,this);t.all("object").each(this._augmentObjectEmbed,this);a=t.get("innerHTML");t.destroy();return a},_augmentIframeEmbed:function(e){var t=e.getAttribute("src");var a=t.match(/^[^\?&#]+/)[0];var i=(t.match(/#[^\?&]+$/)||[""])[0];var n=(t.match(/\?[^#]+/)||[""])[0];var s=n.split(/[\?|&]/);s=r.Array.filter(s,function(e){return e&&e.search(/^wmode=/)<0});s.push("wmode=opaque");switch(this.getProvider()){case"youtube":s.push("enablejsapi=1")}t=a+"?"+s.join("&")+i;e.setAttribute("src",t)},_augmentObjectEmbed:function(e){e.all("embed").each(function(e){e.setAttribute("wmode","opaque")});e.all("param").each(function(e){"wmode"===e.getAttribute("name")&&e.remove(true)});e.prepend(r.Node.create('<param name="wmode" value="opaque"/>'))},_resolveYouTubeParams:function(e){var t=/(^|\&)(?:v=)(?:[^#\&]*)(\&|$)/;var a=/(^|\&)(?:t=)([^#\&]*)/g;e=e.replace(t,function(e,t,a){return t&&a?"&":""});e=e.replace(a,function(e,t,i){var a=t||"";var n=0;var s=i.match(/\d+\D/g);r.Array.each(s,function(e){var t=i.slice(-1);var a=parseInt(e,10);switch(t){case"h":n+=3600*a;break;case"m":n+=60*a;break;case"s":n+=a;break;default:console.warn("[embedResolver] parameter `t` contains unknown character")}});if(!r.Lang.isNumber(n)||0===n)return e;a+="start="+n;return a});return e}},{ATTRS:{type:{},serviceName:{value:""},pattern:{value:""},serviceUrl:{value:""},objectName:{value:""}}});var e=r.Base.create("youtubeEmbedResolver",r.Squarespace.EmbedResolver,[],{process:function(t,a){r.Data.get({url:"/api/oembed/youtube?url="+encodeURIComponent(t),success:function(e){a.onSuccess(this._sanitizeResolvedData(e,t),t)},failure:a.onFailure},this)}});var t="https://api.embed.ly/1/oembed?key=61d05c9d54e8455ea7a9677c366be814&format=json&callback={callback}";r.Squarespace.oEmbedResolvers={twitter:new r.Squarespace.EmbedResolver({serviceName:"Twitter",pattern:"^https?://twitter.com[^ ]*$",serviceUrl:"https://api.twitter.com/1/statuses/oembed.json?callback={callback}",objectName:"Tweet"}),vimeo:new r.Squarespace.EmbedResolver({serviceName:"Vimeo",pattern:"^https?://(?:www\\.)?vimeo.com/",serviceUrl:"https://vimeo.com/api/oembed.json?callback={callback}",objectName:"Video",type:"video"}),wistia:new r.Squarespace.EmbedResolver({serviceName:"Wistia",pattern:"https?://(.+)?(wistia.com|wi.st)/(medias|embed)/.*",serviceUrl:"https://fast.wistia.com/oembed?callback={callback}",objectName:"Video",type:"video"}),animoto:new r.Squarespace.EmbedResolver({serviceName:"Animoto",pattern:"^https?://(?:www\\.)?animoto.com/play/",serviceUrl:"https://animoto.com/oembeds/create?format=json&ssl=true&callback={callback}",objectName:"Video",type:"video"}),flickr:new r.Squarespace.EmbedResolver({serviceName:"Flickr",pattern:"^https?://[a-zA-Z\\.]*flickr.com/[^ ]*$",serviceUrl:"https://www.flickr.com/services/oembed?format=json&jsoncallback={callback}",objectName:"Picture"}),instagram:new r.Squarespace.EmbedResolver({serviceName:"Instagram",pattern:"^https?://[a-zA-Z\\.]*instagram.com/p[^ ]*$",serviceUrl:t,objectName:"Picture"}),wikipedia:new r.Squarespace.EmbedResolver({serviceName:"Wikipedia",pattern:"^https?://en.wikipedia.org/wiki/[^ ]*$",serviceUrl:t,objectName:"Article"}),slideshare:new r.Squarespace.EmbedResolver({serviceName:"SlideShare",pattern:"^https?://www.slideshare.net[^ ]*$",serviceUrl:"https://www.slideshare.net/api/oembed/2?format=json&callback={callback}",objectName:"Presentation"}),soundcloud:new r.Squarespace.EmbedResolver({serviceName:"SoundCloud",pattern:"^https?://soundcloud.com[^ ]*$",serviceUrl:"https://soundcloud.com/oembed?format=js&callback={callback}",objectName:"Audio"}),sketchfab:new r.Squarespace.EmbedResolver({serviceName:"Sketchfab",pattern:"^https?://sketchfab.com[^ ]*$",serviceUrl:t,objectName:"3D Model"})};n.isCoreCmsVariant(n.YOUTUBE_OEMBED)?r.Squarespace.oEmbedResolvers.youtube=new e({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",objectName:"Video",type:"video"}):r.Squarespace.oEmbedResolvers.youtube=new r.Squarespace.EmbedResolver({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",objectName:"Video",serviceUrl:t,type:"video"});r.Squarespace.oEmbedResolversGeneric=new r.Squarespace.EmbedResolver({serviceName:"Embedly",serviceUrl:t,objectName:"Embedly"})},"1.0",{requires:["base","jsonp","squarespace-flickr-oembed-template","squarespace-instagram-oembed-template","squarespace-ui-templates","squarespace-youtube-oembed-template"]})},7766:function(e,t){YUI.add("squarespace-flickr-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["flickr-oembed.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n    <p><a href="';if(i=n.url)i=i.call(e,{hash:{},data:t});else{i=e.url;i=typeof i===o?i.apply(e):i}a+=l(i)+'">';if(i=n.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}a+=l(i)+"</a></p>\n  ";return a}s+='<div class="flickr-oembed">\n  <a href="';if(r=n.url)r=r.call(t,{hash:{},data:i});else{r=t.url;r=typeof r===o?r.apply(t):r}s+=l(r)+'">\n    <img src="';if(r=n["flickr-url"])r=r.call(t,{hash:{},data:i});else{r=t["flickr-url"];r=typeof r===o?r.apply(t):r}s+=l(r)+'" width="100%" />\n  </a>\n  ';r=n["if"].call(t,t.title,{hash:{},inverse:c.noop,fn:c.program(1,d,i),data:i});(r||0===r)&&(s+=r);s+="\n</div>";return s})})();var t="flickr-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7767:function(e,t){YUI.add("squarespace-instagram-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["instagram-oembed.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n    <p><a href="';if(i=n.url)i=i.call(e,{hash:{},data:t});else{i=e.url;i=typeof i===o?i.apply(e):i}a+=l(i)+'">';if(i=n.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}a+=l(i)+"</a></p>\n  ";return a}s+='<div class="instagram-oembed">\n  <a href="';if(r=n.url)r=r.call(t,{hash:{},data:i});else{r=t.url;r=typeof r===o?r.apply(t):r}s+=l(r)+'">\n    <img src="';if(r=n["instagram-url"])r=r.call(t,{hash:{},data:i});else{r=t["instagram-url"];r=typeof r===o?r.apply(t):r}s+=l(r)+'" width="100%" />\n  </a>\n  ';r=n["if"].call(t,t.title,{hash:{},inverse:c.noop,fn:c.program(1,d,i),data:i});(r||0===r)&&(s+=r);s+="\n</div>";return s})})();var t="instagram-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7768:function(e,t){YUI.add("squarespace-youtube-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["youtube-oembed.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression;s+='<iframe src="';if(r=a.src)r=r.call(t,{hash:{},data:n});else{r=t.src;r=typeof r===o?r.apply(t):r}s+=l(r)+'" height="'+l((r=(r=t.data,null==r||false===r?r:r.height),typeof r===o?r.apply(t):r))+'" width="'+l((r=(r=t.data,null==r||false===r?r:r.width),typeof r===o?r.apply(t):r))+'" scrolling="no" frameborder="0" allowfullscreen>\n</iframe>';return s})})();var t="youtube-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7769:function(e,t,a){var i=a(701);var n=a(595);var s=a(114);var r=a(87);var o=a(1342);YUI.add("squarespace-block-soundcloud",function(a){a.namespace("Squarespace.ContentModel").SoundCloud=a.Base.create("SoundCloudBlockModel",a.Model,[],{},{ATTRS:{aspectRatio:{value:67}}});a.namespace("Squarespace.Block").SoundCloud=a.Base.create("block-soundcloud",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.SQS.LayoutEngine.Block.MixinAspectRatio,a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){var t=a.Node.create("<div></div>");t.insert(e.html);n.securifyBlockEmbed(t);this.get("contentBox").empty().setHTML(t)}},{CSS_PREFIX:"sqs-block-soundcloud",MODEL:a.Squarespace.ContentModel.SoundCloud,ATTRS:{editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||s.isFeatureEnabled(r.ROSETTA_BLOCK_EDITORS))return a.Squarespace.Block.Editor.Schema;return a.Squarespace.Block.Editor.SoundCloud}},type:{value:i.SOUNDCLOUD}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-soundcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7770:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-soundcloud-editor",function(t){t.namespace("Squarespace.Block.Editor").SoundCloud=t.Base.create("soundcloud-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SoundCloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("SoundCloud")},resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}});var e={width:470,tabs:[{title:i("Edit SoundCloud Embed"),icon:"/universal/images-v6/icons/skelecon-soundcloud-16-light.png",scroll:false,fields:[{ctor:t.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":i('Paste the URL of a SoundCloud track, playlist, or profile to embed a player on the page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.SOUNDCLOUD}),"strings.inputPlaceholder":i("Enter a SoundCloud URL here")}}]}]};var a=t.namespace("Squarespace.Block.ModelEditorDialog").SoundCloud=t.Base.create("blockSoundCloudEditor",t.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(e){return t.merge(e.embed,{showArtwork:e.showArtwork,useVisualPlayer:e.useVisualPlayer})}},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]})},7771:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-fivehundredpix",function(e){e.namespace("Squarespace.Block").Fivehundredpix=e.Base.create("block-fivehundredpix",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-fivehundredpix",MODEL:e.Squarespace.ContentModel.FivehundredpixBlock,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Fivehundredpix}},type:{value:i.FIVEHUNDREDPIX}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-fivehundredpix-editor","squarespace-block-fivehundredpix-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7772:function(e,t){YUI.add("squarespace-block-summary-gallery",function(a){a.namespace("Squarespace.Block");var t=a.Squarespace.Block.SummaryGallery=a.Base.create("block-summary-gallery",a.Squarespace.Block.SocialSummaryBase,[a.SQS.LayoutEngine.Block.MixinAspectRatio,a.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){t.superclass.bindUI.call(this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},_renderBlock:function(e){this.get("boundingBox").setData("block",this.get("model").getAttrs());if(this._shouldGetWidgetRendering(e)){this.requestingContent=true;t.superclass._renderBlock.call(this)}else this.fire("widget:contentUpdate")},_renderSuccess:function(e){this.requestingContent=false;this.set("widgetContent",e.html);this._setWidgetContent()},_setWidgetContent:function(){if(this.requestingContent)return;var e=a.Node.create(this.get("widgetContent"));var t=this.get("contentBox");t.empty().setHTML(e);this.get("model").get("aspectRatio")&&t.one(".sqs-state-message")&&t.one(".sqs-state-message").wrap("<div></div>");a.SQS.Gallery.Manager.initializeBlock(t);this._updateAspectRatio()},_shouldGetWidgetRendering:function(e){if(!a.Lang.isValue(e)||!a.Object.hasKey(e,"changed"))return true;return!a.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed)}},{CSS_PREFIX:"sqs-block-summary-gallery",MODEL:a.Squarespace.ContentModel.SummaryGalleryBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Gallery},modelWhiteList:{setter:function(e){if(a.Lang.isArray(e))return e;if(a.Lang.isString(e))return[e];return[]},value:["aspectRatio","autoplay","lightbox","padding","thumbnail-strip-height","thumbnail-strip-margin","vSize"]},widgetContent:{value:""}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-social-summary","squarespace-block-gallery","squarespace-block-gallery-editor","squarespace-block-summary-gallery-model-editor","squarespace-block-summary-gallery-model","squarespace-premium-block-mixin"]})},7773:function(e,t,a){var i=a(701);YUI.add("squarespace-block-social-summary",function(t){var a=t.namespace("Squarespace.Block").SocialSummaryBase=t.Base.create("block-social-summary",t.Squarespace.Block.Summary,[t.Squarespace.Block.PremiumBlockMixin],{_setDefaultContent:function(){this.get("model").setAttrs(this._getDefaultContent())},bindUI:function(){a.superclass.bindUI.call(this)},_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._togglePolling()},destructor:function(){this.stopRenderPolling()},startRenderPolling:function(){if(!this._synchronizingRenderTimer){var e=1e3;this._synchronizingRenderTimer=t.later(3*e,this,function(){this.render()},[],true)}},stopRenderPolling:function(){if(this._synchronizingRenderTimer){this._synchronizingRenderTimer.cancel();this._synchronizingRenderTimer=null}},_togglePolling:function(){var e=this.get("contentBox");t.Lang.isNull(e.one(".sqs-state-message.synchronizing"))?this.stopRenderPolling():this.startRenderPolling()},_getDefaultContent:function(){return{title:true,thumbnail:true,excerpt:true,pageSize:10,collectionId:"",filter:{}}},toJSON:function(){var e=a.superclass.toJSON.apply(this,arguments);e&&e.value&&"add-account"===e.value.collectionId&&(e.value.collectionId="");return e}},{CSS_PREFIX:"sqs-block-social-summary",MODEL:t.Squarespace.ContentModel.SocialSummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:t.Squarespace.Block.Editor.Dialog},type:{value:i.SOCIAL_SUMMARY}}})},"1.0",{requires:["base","squarespace-block-summary","squarespace-block-social-summary-model-editor","squarespace-premium-block-mixin"]})},7774:function(e,t,a){var i=a(701);YUI.add("squarespace-block-summary",function(t){var a=t.namespace("Squarespace.Block").Summary=t.Base.create("block-summary",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){a.superclass.syncUI.call(this);this._plugImageLoader()},_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})},_getDefaultContent:function(){return{title:true,thumbnail:true,excerpt:true,pageSize:10,collectionId:"",filter:{}}}},{MODEL:t.Squarespace.ContentModel.SummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:t.Squarespace.Block.Editor.Summary},type:{value:i.SUMMARY}},CSS_PREFIX:"sqs-block-summary"})},"1.0",{requires:["base","squarespace-image-loader","squarespace-block-summary-editor","squarespace-premium-block-mixin"]})},7775:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-summary-editor",function(e){e.namespace("Squarespace.Block.Editor").Summary=e.Base.create("summary-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Summary")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Summary")}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-model-editor"]})},7776:function(e,t,a){var i=a(24).t;var n=a(24).pluralize;var s=a(229);YUI.add("squarespace-block-summary-model-editor",function(l){l.namespace("Squarespace.Block.ModelEditorDialog");var e=l.Squarespace.Block.ModelEditorDialog.Summary=l.Base.create("SummaryModelEditorDialog",l.Squarespace.ModelEditorDialog,[],{initializer:function(){var t=this.get("dialog");var e=this.get("model");e.after("collectionIdChange",this._updateAutocomplete,this);this.get("dialog").on("ready",this._updateAutocomplete,this);t.on("shown",function(e){t.getField("pageSize").refreshWidth()},this)},_updateAutocomplete:function(e){var t=this.get("model").get("collectionId");var a=this.get("dialog").getField("filter");if(!l.Lang.isString(t)||0===t.length||!l.Lang.isValue(a))return;var i=a.get("tagField");var n=a.get("categoryField");var s="/api/commondata/GetAutoCompleteTags";var r="/api/commondata/GetAutoCompleteCategories";var o={collectionId:t};if(l.Lang.isValue(a)){this._getNewAutoCompleteData(i,s,o);this._getNewAutoCompleteData(n,r,o)}},_getNewAutoCompleteData:function(a,e,t){l.Data.get({url:e,data:t,success:function(e){var t=a.get("acWidget");l.Lang.isValue(t)&&t.set("source",e)}})},_createSelectOption:function(e,t){return{value:e,label:t}},_getDefaultDialogConfig:function(){var e=[{title:i("Summary"),tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:true,fields:[{ctor:l.Squarespace.DialogFields.Description,config:{text:i("<strong>Items to Display.</strong>  Select the number of items this block should display.")}},{ctor:l.Squarespace.DialogFields.Slider,required:true,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(e){return n({one:"{%n} Item",other:"{%n} Items"},e)},labelWidth:60,submitOnEnter:true}},{ctor:l.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[s.PRODUCTS,s.COLLECTION_TYPE_GENERIC],folder:false}}}]},{tabTitle:i("Filters"),scroll:true,fields:[{name:"filter",ctor:l.Squarespace.DialogFields.SummaryFilter}]},{tabTitle:i("Design"),scroll:true,fields:[{ctor:l.Squarespace.DialogFields.Check,name:"title",config:{"strings.title":i("Title"),"strings.description":i("Display the title of each item.")}},{ctor:l.Squarespace.DialogFields.Check,name:"thumbnail",config:{"strings.title":i("Thumbnail"),"strings.description":i("Display the thumbnail image for each item.")}},{ctor:l.Squarespace.DialogFields.Check,name:"excerpt",config:{"strings.title":i("Excerpt"),"strings.description":i("Display an excerpt of each item.")}}]}];return{width:380,height:420,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:l.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-summary-filter","squarespace-dialog-check","squarespace-dialog-slider","squarespace-dialog-content-selector"]})},7777:function(e,t,a){var o=a(24).t;var l=a(9040);YUI.add("squarespace-dialog-summary-filter",function(n){var i="featured";var s="tag";var r="category";var t="categoryIds";n.namespace("Squarespace.DialogFields").SummaryFilter=n.Base.create("summaryFilters",n.Squarespace.DialogField2,[],{initializer:function(e){var t=e.data||this.get("data")||{};this._tagField=new n.Squarespace.DialogFields.AutoComplete({"strings.title":o("Tag Filter"),"strings.placeholder":o("Enter a tag to filter by"),"strings.description":o("Only show items with this tag."),data:t.tag,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1e6}});this.set("tagField",this._tagField);this._categoryField=new n.Squarespace.DialogFields.AutoComplete({"strings.title":o("Category Filter"),"strings.placeholder":o("Enter a category to filter by"),"strings.description":o("Only show items with this category."),data:t.category,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1}});this.set("categoryField",this._categoryField);this._featuredField=new n.Squarespace.DialogFields.Check({"strings.title":o("Featured Filter"),"strings.description":o("Only show featured posts."),data:t.featured||false})},renderUI:function(){n.Squarespace.DialogFields.SummaryFilter.superclass.renderUI.call(this);var e=this.get("contentBox");this._categoryField.render(e);e.appendChild('<div class="nested-category-field"></div>');this._tagField.render(e);this._featuredField.render(e)},bindUI:function(){n.Squarespace.DialogFields.SummaryFilter.superclass.bindUI.call(this);this._tagField.after("dataChange",this._updateData,this,s);this._categoryField.after("dataChange",this._updateData,this,r);this._featuredField.after("dataChange",this._updateData,this,i);this.after("dataChange",this._handleRevertRequest,this);this.after("showNestedCategoriesChange",this.syncShowNestedCategoriesChange,this);this.after("collectionIdChange",this.syncNestedCategoriesCollectionId,this)},syncUI:function(){n.Squarespace.DialogFields.SummaryFilter.superclass.syncUI.call(this);this.syncShowNestedCategoriesChange()},resetNestedCategorySelection:function(){this._setRelatedAttrsInYUI("")},syncShowNestedCategoriesChange:function(){if(!this.get("showNestedCategories")){this._categoryField.show();if(this._wrappedCategoryPicker){this._wrappedCategoryPicker.destroy();this._wrappedCategoryPicker=null}return}this._categoryField.hide();var e=this.get("collectionId");if(!e)return;if(!this._wrappedCategoryPicker){this._wrappedCategoryPicker=new l({setRelatedAttrsInYUI:this._setRelatedAttrsInYUI.bind(this),container:this.get("contentBox").one(".nested-category-field").getDOMNode(),model:{collectionId:e,websiteId:n.config.win.Static.SQUARESPACE_CONTEXT.website.id},value:this.getNestedCategoryValue(),flush:true,damaskify:true});this._wrappedCategoryPicker.show()}},getNestedCategoryValue:function(){var e=this.get("data")[t];if(e)return e[0];return""},syncNestedCategoriesCollectionId:function(){if(!this._wrappedCategoryPicker)return;var e=this.get("collectionId");this._wrappedCategoryPicker.setCollectionId(e)},_setRelatedAttrsInYUI:function(e){this._updateData({newVal:e},t);this._wrappedCategoryPicker&&this._wrappedCategoryPicker.setValue(this.getNestedCategoryValue())},destructor:function(){this._categoryField.destroy();this._tagField.destroy();this._featuredField.destroy()},didDataChange:function(){var t=this._initialData||{};var a=this.get("data");var e=function(e){return t[e]!==a[e]};return e(s)||e(i)||e(r)},_updateData:function(e,t){var a=e.newVal;var i=this.get("data");n.Lang.isString(a)&&0===a.length&&(a=null);i[t]=a;this.set("data",i)},_handleRevertRequest:function(e){e.revert&&this._revertFields()},_revertFields:function(){this._tagField.set("data","");this._categoryField.set("data","");this._featuredField.set("data",false)}},{CSS_PREFIX:"sqs-summary-filter",ATTRS:{tags:{},data:{value:{}},categories:{},tagField:{readOnly:true},categoryField:{readOnly:true},showNestedCategories:{value:false},collectionId:{value:""}}})},"1.0",{requires:["autocomplete-filters","autocomplete-sources","base","squarespace-dialog-auto-complete","squarespace-dialog-check","squarespace-dialog-field-2"]})},7779:function(e,t,a){var l=a(24).t;var c=a(24).pluralize;var i=a(1939);var n=a(2367);YUI.add("squarespace-block-social-summary-model-editor",function(o){o.namespace("Squarespace.Block.ModelEditorDialog");var e=o.Squarespace.Block.ModelEditorDialog.SocialSummary=o.Base.create("SocialSummaryModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.Summary,[],{initializer:function(e){var t=this.get("dialog");t.on("ready",function(){var e=t.getField("collectionId");o.Lang.isValue(e)&&e.after("dataChange",this._checkAddAccount,this)},this);this._publishEvents();var a=["collectionSynced","collectionSyncFailed","collectionSyncFailedWithError"];this.after(a,this._afterSyncAccount,this)},_onAddAccountClick:function(){var a=this._getServiceId();i.authenticate({serviceProvider:a,urlParams:{authenticationType:"website",startSubscription:true}}).then(this._continueAuthentication.bind(this)).catch(function(e){if(window.SQUARESPACE_SENTRY){var t="Issue with ExternalAuthentication: "+a;e&&e.data?window.SQUARESPACE_SENTRY.captureMessage(t+" "+e.data):window.SQUARESPACE_SENTRY.captureMessage(t)}})},_continueAuthentication:function(e){var t=e.socialConfig;if(o.Lang.isValue(t)){var a=t.externalAuthenticationId;this._refreshSocialAccounts(a)}},_checkAddAccount:function(){var e=this.get("dialog");var t=e.getField("collectionId");if(o.Lang.isValue(t)){var a=t.get("data");if("add-account"===a){var i=new o.Squarespace.Widgets.Alert({"strings.title":l("Connecting Account…"),"strings.message":l("In the popup window that will appear, authorize Squarespace to connect this account to your site.")});i.on("confirm",o.bind(this._onAddAccountClick,this));return true}}},_publishEvents:function(){this.publish("accountsRefreshed",{emitFacade:true,defaultFn:this._afterAccountsRefresh});this.publish("collectionSynced",{emitFacade:true,defaultFn:this._onSyncSuccess});this.publish("collectionSyncFailed",{emitFacade:true,defaultFn:this._onSyncFail})},_getConnectedAccounts:function(e){var t=o.Array.partition(e,function(e){return""!==e.value&&"add-account"!==e.value},this);return o.Array.filter(t.matches,o.Lang.isValue)},_refreshSocialAccounts:function(i){n.refreshConnectedAccounts(true).then(function(){var e=this.get("dialog");if(e&&!e.isState(o.Squarespace.DialogStates.CLOSED)){var t=e.getField("collectionId");if(t){var a=this._getAccount(i);t.set("options",this._getCollectionOptions());if(o.Lang.isValue(a)){t.set("visible",true);t.set("data",a.get("collectionId"))}else t.set("data",null)}}this._showOauthCompletePopup()}.bind(this))},_showOauthCompletePopup:function(){new o.Squarespace.Widgets.Information({"strings.title":l("Account Connected"),"strings.message":o.Lang.sub(l("Your {name} account has been connected"),this.get("strings"))})},_getServiceId:function(){return null},_getCollectionOptions:function(){var e=[];var t=this._getServiceId();var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){return e.get("serviceId")===t});var i=a.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var n=0===i.toArray().length;n&&e.push({value:"",label:l("Choose an account")});var s=o.Array.reduce(i.toArray(),e,function(e,t){o.Lang.isValue(t.get("collectionId"))&&e.push(this._createSelectOption(t.get("collectionId"),t.get("screenname")));return e},this);s.push({value:"add-account",label:l("Add an account")});return s},_getAccount:function(t){var e=this.get("model");var a=e.get("collectionId");var i=this._getServiceId();var n=o.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(o.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===i)return e.get("collectionId")===a}).item(0);n&&e.set("collectionId",n.id);return n},_onSendRequested:function(e){var t=this._getAccount();if(o.Lang.isValue(t))this.fire("collectionSynced");else{new o.Squarespace.Widgets.Alert({"strings.title":l("Connect an Account"),"strings.message":l("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});this.get("dialog").allowEditing()}},_onSyncSuccess:function(e){var t=l("Retrieving past {itemTypePlural}.  Squarespace will pull future {itemTypePlural} from {name} automatically.");var a=o.Lang.sub(t,this.get("strings"));new o.Squarespace.Widgets.Information({"strings.title":l("Sync Successful"),"strings.message":a})},_onSyncFail:function(e){var t=l("Failed to retrieve past {itemTypePlural}. Squarespace will pull future {itemTypePlural} from {name} automatically.");var a=o.Lang.sub(t,this.get("strings"));new o.Squarespace.Widgets.Information({"strings.title":l("Sync Failed"),"strings.message":a})},_afterSyncAccount:function(){e.superclass._onSendRequested.call(this)},_getDefaultDialogConfig:function(){var t=this.get("model");var e=this.get("icon");var a=this.get("strings.name");var i={name:"collectionId",icon:e,strings:{title:l("Connected Account")},className:"thin dark",padding:[10,10],visible:true,options:this._getCollectionOptions()};var n="collectionId";if(i.visible&&!t.get(n)){i.data=i.options[0].value;i.defaultValue=i.options[0].value;t.set(n,i.data)}o.Array.each(i.options,function(e){e.value===t.get(n)&&(i.data=e.value)});var s=[{ctor:o.Squarespace.DialogFields.Select,config:i}];s.push({ctor:o.Squarespace.DialogFields.Text,config:{name:"connectedAccountId",maxLength:100,className:"thin",visible:false,strings:{title:l("Connected Account Id"),description:l("The collection id associated to the connected account used when configuring a search.")}}});s.push({ctor:o.Squarespace.DialogFields.Slider,required:true,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(e){return c({one:"{%n} Item",other:"{%n} Items"},e)},labelWidth:60,submitOnEnter:true}});var r={loadingText:l("Editing {title}…",{title:a}),width:395,tabs:[{title:a,tabTitle:l("Account"),fields:s}]};return r}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:o.Lang.isObject},strings:{value:{name:"Summary",itemType:l("Social Item"),itemTypePlural:l("Social Items")}},socialAccountType:{value:null}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-models-connected-accounts","squarespace-block-summary-model-editor","squarespace-widgets-information"]})},7780:function(e,t,a){var i=a(114);var n=a(87);var s=a(1342);YUI.add("squarespace-block-gallery",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Gallery=e.Base.create("block-gallery",e.SQS.LayoutEngine.Block.Gallery,[e.Squarespace.Block.PremiumBlockMixin],{},{ATTRS:{editor:{valueFn:function(){if(s.isMobileContentEditingEnabled()||i.isFeatureEnabled(n.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Gallery}}},CSS_PREFIX:"sqs-block-gallery",MODEL:e.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-gallery","squarespace-block-gallery-editor","squarespace-block-gallery-model-editor","squarespace-dialog-content-item-grid","squarespace-dialog-content-selector","squarespace-dialog-fields","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-models-content-collection","squarespace-premium-block-mixin"]})},7781:function(e,t){YUI.add("@sqs/layout-engine/block-model-gallery",function(a){a.namespace("SQS.LayoutEngine.BlockModel");var t=a.SQS.LayoutEngine.BlockModel.Gallery=a.Base.create("GalleryBlockModel",a.Model,[],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.transientGallery;return e}},{ATTRS:{"active-alignment":{},"aspect-ratio":{},aspectRatio:{},"auto-crop":{value:true},autoplay:{},"autoplay-duration":{},blockAnimation:{value:"none"},collectionId:{},controls:{},design:{value:"grid"},existingGalleryId:{},lightbox:{},lightboxTheme:{},"max-width":{},"meta-position":{},padding:{},"show-meta":{value:true},"show-meta-basic":{value:true},"show-meta-only-title":{value:false},"show-meta-only-description":{value:false},"show-meta-on-hover":{},"square-thumbs":{value:true},"thumbnail-strip-height":{},"thumbnail-strip-margin":{},thumbnails:{},"thumbnails-per-row":{},vSize:{},transientGallery:{setter:function(e){var t=this.get("transientGallery");a.Lang.isValue(t)&&a.Lang.isFunction(t.destroy)&&t.destroy();if(!a.instanceOf(e,a.Model))return new a.Model(e);return e},value:{}},transientGalleryId:{getter:function(e){if(!a.Lang.isValue(e)&&a.Lang.isValue(this.get("transientGallery")))return this.get("transientGallery").get("id");return e}}}})},"1.0",{requires:["base","model"]})},7782:function(e,t,a){var n=a(1714);var s=a(701);var r=false;YUI.add("@sqs/layout-engine/block-gallery",function(i){i.namespace("SQS.LayoutEngine.Block");var e=i.SQS.LayoutEngine.Block.Gallery=i.Base.create("block-gallery",i.SQS.LayoutEngine.Block.ModelSyncBase,[i.SQS.LayoutEngine.Block.MixinAspectRatio,i.SQS.LayoutEngine.Block.MixinAnimatedBlock],{renderUI:function(e){if(r){console.group("[le] gallery block - renderUI");e&&console.log("[le] because model changed",e);console.groupEnd()}this._renderBlock(e)},bindUI:function(){this.get("model").after("change",this.renderUI,this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},show:function(){e.superclass.show.call(this,arguments);this._setWidgetContent()},_updateGalleryData:function(){var e=this.get("boundingBox");var t=this.get("model").getAttrs();r&&console.log("[le] updating bounding box block data from gallery model",e,t);e.setData("block",t)},_renderBlock:function(e){this._updateGalleryData();this._isRerenderNeeded(e)?this._queueRenderBlock():this.fire("widget:contentUpdate")},_queueRenderBlock:function(){this.requestingContent=true;if(this._pendingRenderRequest){i.config.win.clearTimeout(this._pendingRenderRequest);this._pendingRenderRequest=null}this._pendingRenderRequest=i.config.win.setTimeout(function(){e.superclass._renderBlock.call(this)}.bind(this),100)},_renderSuccess:function(e){this.requestingContent=false;this.set("widgetContent",e.html)},_setWidgetContent:function(){if(this.requestingContent){r&&console.log("[le] gallery - still requestingContent, skip _setWidgetContent");return}var e=this.get("contentBox");if(null===e.getDOMNode()){console.error("[le] gallery - missing contentBox dom node!",this);return}e.empty();var t=i.Node.create(this.get("widgetContent"));e.setHTML(t);this.get("model").get("aspectRatio")&&e.one(".sqs-state-message")&&e.one(".sqs-state-message").wrap("<div></div>");this._updateAspectRatio();i.Object.getValue(i,["SQS","Gallery","Manager"])?i.SQS.Gallery.Manager.initializeBlock(this.get("boundingBox")):console.error("[le] gallery - could not initialize the gallery block - yui-gallery manager not found.")},_isRerenderNeeded:function(e){var t=i.Lang.isValue(e)&&i.Object.hasKey(e,"changed");if(!t){r&&console.log("[le] gallery block - forced rerender");return true}var a=!i.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed);a&&r&&console.log("[le] gallery block - non-whitelisted attr was changed, rerender needed",e);return a},_shouldGetWidgetRendering:function(e){n.measure("deprecated_scriptsle_block_gallery_shouldGetWidgetRendering");return this._isRerenderNeeded(e)}},{ATTRS:{modelWhiteList:{setter:function(e){if(i.Lang.isArray(e))return e;if(i.Lang.isString(e))return[e];return[]},value:["active-alignment","aspectRatio","autoplay","autoplay-duration","lightbox","lightboxTheme","methodOption","padding","thumbnail-strip-height","thumbnail-strip-margin","thumbnails-per-row","transientGallery","vSize"]},type:{value:s.GALLERY},vSize:{valueFn:function(){return"slider"===this.get("model").get("design")?10:null}},widgetContent:{value:""}},MODEL:i.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-utils","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-mixin-aspect-ratio","@sqs/layout-engine/block-mixin-animated-block","@sqs/yui-gallery/manager"]})},7783:function(e,t,a){var r=a(701);var i=a(24).t;var o=a(6263);YUI.add("squarespace-block-gallery-editor",function(s){s.namespace("Squarespace.Block.Editor");function n(e){if("grid"===e)return i("Grid");if("slider"===e)return i("Carousel");if("stacked"===e)return i("Stacked");if("slideshow"===e)return i("Slideshow");return i("Gallery")}var t=s.Squarespace.Block.Editor.Gallery=s.Base.create("galleryEditor",s.Squarespace.Block.Editor.Dialog,[],{initializer:function(e){var t=this.get("host");var a=t.get("model");var i=this.configDialog.get("dialog");i.on("ready",function(){var e=i.getField("options");e.after("options-changed",this._syncGallery,this);t.get("type")!==r.INSTAGRAM&&i.setAndUpdateTitle(n(a.get("design")))},this);a.after("change",function(e){this.set("resizable",this.isSlider())},this);this.onHostEvent("resized",function(e){"columnChanged"===e.source&&"slideshow"===a.get("design")&&t._setWidgetContent()});this.onHostEvent("dropped",function(e){e.oldCol!==s.SQS.LayoutEngine.Layout.Utils.getColumnWidth(t.get("contentBox"))&&t._setWidgetContent()});this.after("editingChange",function(e){e.newVal&&"dummyCollection"===a.get("collectionId")&&a.set("collectionId",void 0)});this.afterHostEvent(["dropped","resized","widget:contentUpdate"],function(){this._setExtraDesignStyles();this.updateWidgetAttrs()});a.on("designChange",function(e){i.setAndUpdateTitle(n(e.newVal))});this.configDialog.on("gallery-refresh",t._renderBlock,t);this.configDialog.on("focalPointChanged",this._refreshFocalPoint,this);this._bindHeightLocking()},_bindHeightLocking:function(){this.beforeHostMethod("_renderBlock",this._lockBlockHeight);this.onHostEvent("widget:contentUpdate",function(e){this.get("host").requestingContent||this._unlockBlockHeight()})},_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Gallery")},_lockBlockHeight:function(){var e=this.get("host").get("boundingBox");if(!e.test(".sqs-locked-height")){e.addClass("sqs-locked-height");e.setStyles({maxHeight:e.get("region").height,overflow:"hidden"})}},_unlockBlockHeight:function(e){var t=this.get("host").get("boundingBox");t.removeClass("sqs-locked-height");t.setStyles({maxHeight:null,overflow:null})},_setExtraDesignStyles:function(){var e=this._model.getAttrs();switch(e.design){case"grid":this.configDialog.renderGridCSS(this.get("host").get("contentBox"),e);break;case"slideshow":this.configDialog.renderSlideshowCSS(this.get("host").get("contentBox"),e);break}},_refreshFocalPoint:function(e){var t=this.get("host").get("boundingBox").one('img[data-image-id="'+e.imageId+'"]');if(s.Lang.isNull(t)){false;return}var a=t.loader;if(a){a.set("focalPoint",e.mediaFocalPoint);a.fire("refresh")}},updateWidgetAttrs:function(){var e=this.get("host");var t=e.get("contentBox").one(".sqs-gallery");if(!t)return;var a=t.getData("gallery");if(!a)return;var i=e.get("model").getAttrs(o.RERENDER_ATTR_WHITELIST);var n=s.SQS.Gallery.Manager.dataToAttrs(i);a.setAttrs(n);a.refresh()},isSlider:function(){return"slider"===this.get("host").get("model").get("design")},_syncGallery:function(e,t){var a=this.get("host");var i=e.get("name");var n=this.get("host").get("contentBox");this.configDialog.syncGalleryOptions(i,n);"lightboxTheme"===i&&a._renderBlock()},_setBlockResizable:function(e){t.superclass._setBlockResizable.apply(this,arguments);if(!e)return;this._registerEvent(this.get("resizeNode").resize.on("handle-dblclick",this._resetOriginalAspectRatio,this))},_resetOriginalAspectRatio:function(){this.get("host").get("model").set("aspectRatio",o.DEFAULT_SLIDER_ASPECT_RATIO)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Gallery")},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizable:{valueFn:function(){return this.isSlider()}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-mixin-gallery-option-sync","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","@sqs/layout-engine/layout-utils","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},7784:function(e,t,a){var n=a(1520);var o=a(6263);var i=a(731);var s=a(5813);YUI.add("squarespace-block-mixin-gallery-option-sync",function(u){u.namespace("Squarespace.Block.Mixins");u.Squarespace.Block.Mixins.Gallery=u.Base.create("GalleryManagment",u.Base,[],{_defaultGalleryOptions:function(){return i(n,function(e){return e.defaultValue})},_getGalleryOptions:function(){var e=s(n);var i=this.get("model");u.Object.each(e,function(e,t){var a=i.get(t);if(void 0!==a){e.data=a;e.defaultValue=a}else e.defaultValue=a||e.defaultValue},this);return e},syncGalleryOptions:function(e,t){var a=this.get("dialog");var i=a.getField("options");var n=this.get("model");var s={};s[e]=i.get("data")[e];if("design"===e){var r=null;"slider"===s.design&&(r=n.get("aspectRatio")||o.DEFAULT_SLIDER_ASPECT_RATIO);n.set("aspectRatio",r,{silent:true})}void 0===i.get("data")[e]?n.setAttrs(s,{silent:true}):n.setAttrs(s)},unsetVSize:function(){this.get("model").set("vSize",null)},renderGridCSS:function(e,t){var a=e.one(".sqs-gallery-container");if(u.Lang.isNull(a))return;var i=this._getDefaultContent();var n=a.get("className").split(" ");var s=u.Array.find(n,function(e){return e.startsWith("sqs-gallery-thumbnails-per-row-")});var r=t.padding;var o=t["thumbnails-per-row"];u.Lang.isValue(o)||(o=i.thumbsPerRow);u.Lang.isValue(r)||(r=i.padding);var l=".sqs-block-content#"+e.get("id");var c=e.one("#design-grid-css");var d=l+" .sqs-gallery-design-grid { margin-right: -"+r+"px; } "+l+" .sqs-gallery-design-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: "+r+"px; margin-bottom: "+r+"px; };";s&&a.removeClass(s);a.addClass("sqs-gallery-thumbnails-per-row-"+o);c&&c.setContent(d)},renderSlideshowCSS:function(e,t){var a=e;var i=a.one(".sqs-gallery-thumbnails");var n;if(i){n=this._getDefaultContent();u.Lang.isNumber(t["thumbnail-strip-height"])||(t["thumbnail-strip-height"]=n["thumbnail-strip-height"]);u.Lang.isNumber(t["thumbnail-strip-margin"])||(t["thumbnail-strip-margin"]=n["thumbnail-strip-margin"]);i.setStyles({marginTop:t["thumbnail-strip-margin"],height:t["thumbnail-strip-height"]});var s=i.getData("gallery");s["gallery-design"].syncUI()}}},{ATTRS:{NS:"gallerySynchronizer"}})},"1.0",{requires:["base","plugin","squarespace-dialog-gallery-options"]})},7785:function(e,t,a){var r=a(87);var o=a(114);var l=a(24).t;var c=a(229);var d=a(523);var i=a(207);var n=false;YUI.add("squarespace-block-gallery-model-editor",function(n){n.namespace("Squarespace.Block.ModelEditorDialog");var s=n.Squarespace.Block.ModelEditorDialog.Gallery=n.Base.create("blockGalleryModelEditorDialog",n.Squarespace.ModelEditorDialog,[n.Squarespace.Block.Mixins.BlockAnimationAnalytics,n.Squarespace.Block.Mixins.Gallery,n.Squarespace.Mixins.EventRegistrar],{initializer:function(e){var t=n.Squarespace.ContentCollectionCache;if(0===t.size()){t.after("load",this._syncPlugin,this);t.load()}var a=this.get("dialog");a.on("ready",function(e){this._bindTransientEvents();o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsChange({fields:[a.getField("blockAnimation")],eventName:"gallery_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this)},save:function e(t,a,i){o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsSave({eventName:"gallery_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});s.superclass.save.apply(this,arguments)},sanitizeDialogData:function(e){if(n.Object.hasKey(e,"options")){e=n.merge(e,e.options);delete e.options}switch(e.methodOption){case"existing":e.collectionId=e.existingGallery;e.existingGalleryId=e.existingGallery;break;case"transient":e.collectionId=e.transientGallery.get("id");e.transientGalleryId=e.transientGallery.get("id");break;default:false}"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;delete e.methodFrame;delete e.transientGallery;return e},getDialogData:function(){var e=this.get("model").toJSON();var t=n.merge(e,{options:e,methodOption:e.methodFrame=this._usesTransientCollection()?"transient":"existing"});var a=l("Gallery Block {galleryBlockId}",{galleryBlockId:n.Squarespace.Utils.getGuid()});var i={id:e.transientGalleryId||null,typeName:"gallery-block",type:c.GALLERY_BLOCK,title:a,navigationTitle:a,urlId:n.Squarespace.Utils.getGuid(),ordering:d.USER,enabled:true};t.transientGallery=new n.Squarespace.Models.ContentCollection(i);t.transientGallery.get("id")?t.transientGallery.load():t.transientGallery.setAttrs({itemCount:0,calculatedItemCount:0});this.get("model").get("transientGallery").get("id")||this.get("model").set("transientGallery",i,{silent:true});return t},_usesTransientCollection:function(){var e=this.get("model").get("collectionId");if(e){var t=n.Squarespace.ContentCollectionCache.getById(e);var a=n.Squarespace.ContentCollectionCache.filter(function(e){var t=e.getTemplateConfiguration();return!!(t&&t.get("collectionType")===c.COLLECTION_TYPE_GENERIC&&t.get("ordering")===d.USER)});return-1===a.indexOf(t)}return true},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var n={collectionId:a,blockAnimationSelection:i};return n},_bindTransientEvents:function(){var e=this.get("dialog");var t=e.getField("transientGallery");var a=t.get("data");if(a.isNew()){a.once("save",function(){var e=a.get("id");this.get("model").setAttrs({collectionId:e,transientGalleryId:e})},this);t.set("uploadPreflight",function(e){a.save(e)})}var i=["create","add","remove","reordered","group-reordered","*:mediaProcessingStateChange","*:titleChange","bulk-remove"];a.items.after(i,this._transientGalleryChanged,this);a.items.after("*:mediaFocalPointChange",this._focalPointChanged,this);this._registerEvent(a.items.once("*:save",function(){false;this.fire("gallery-refresh")},this))},_transientGalleryChanged:function(e){if(e.onReorder||"bulk-remove"===e.source)return;if("Item:titleChange"===e.type){var t=e.prevVal||"";var a=e.newVal||"";if(a===t)return}false;this.fire("gallery-refresh")},_focalPointChanged:function(e){this.fire("focalPointChanged",{imageId:e.target.get("id"),mediaFocalPoint:e.target.get("mediaFocalPoint")})},_getDefaultDialogConfiguration:function(){var t=this.get("dialog");var e=[{title:l("Gallery"),tabTitle:l("Content"),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",name:"content",scroll:false,fields:[{ctor:n.Squarespace.DialogFields.Description,config:{text:l('Create a gallery of your images, videos, or Getty Images. You can also display content from a Gallery Page you\'ve created. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:i.GALLERY_EDITOR})}},{ctor:n.Squarespace.DialogFields.MultiOption,config:{name:"methodOption",optionClickCb:{$valueFn:function(){return function(e){t.getField("methodFrame").switchFrames(e)}}},options:[{value:"transient",title:l("Upload Media"),icon:"upload-media"},{value:"existing",title:l("Use Existing Gallery"),icon:"existing-gallery"}]}},{ctor:n.Squarespace.DialogFields.MultiFrame,config:{name:"methodFrame",width:440,height:{$valueFn:function(){return 390}},frames:[{name:"transient",fields:[{ctor:n.Squarespace.DialogFields.ContentItemGrid,config:{collectionConfiguration:{acceptTypes:["image","video"],addText:l("Add Media")},name:"transientGallery",showAddIcon:true,renderOnShow:true,pageSize:250,addText:l("Add Content"),imageSize:140,"contentItemImageOptions.actionOverlayButtons":[n.Squarespace.ActionOverlayButtons.IMAGE_INFO,n.Squarespace.ActionOverlayButtons.EDIT_IMAGE,n.Squarespace.ActionOverlayButtons.REMOVE_IMAGE],dataState:"loading"}}]},{name:"existing",fields:[{ctor:n.Squarespace.DialogFields.ContentIdSelector,config:{name:"existingGallery",showCollectionTagsAndCategories:false,showGroupTitles:false,emptyMessage:l("No Gallery Pages yet. Go to the pages panel and click a + to add new content."),collectionFilter:{collectionType:c.COLLECTION_TYPE_GENERIC,ordering:d.USER,folder:false}}}]}]}}]},{title:l("Gallery"),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",tabTitle:l("Design"),name:"design",scroll:true,fields:[{ctor:n.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:{$valueFn:n.bind(this._getGalleryOptions,this)},width:450}}]}];o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&e.push({tabTitle:l("Animations"),fields:[{ctor:n.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":l("Animate Gallery Block"),className:"thin dark",defaultValue:"none",options:[{value:"none",label:l("None")},{value:"fade-in",label:l("Fade In")},{value:"focus-in",label:l("Focus In")},{value:"slide-up",label:l("Slide Up")},{value:"reveal",label:l("Reveal")}]}}]});var a={title:l("Gallery"),width:500,height:{$valueFn:function(){return 652}},loadingText:l("Editing Gallery…"),initialDataByReference:true,tabs:e};return a},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return n.merge(t,e)}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:n.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-models-content-collection","squarespace-content-collection-utils","squarespace-plugin-actionoverlay","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-select","squarespace-block-editor-dialog","squarespace-mixins-event-registrar","squarespace-block-mixin-block-animation-analytics"]})},7786:function(e,t){YUI.add("squarespace-block-mixin-block-animation-analytics",function(l){l.namespace("Squarespace.Block.Mixins");l.Squarespace.Block.Mixins.BlockAnimationAnalytics=l.Base.create("BlockAnimationAnalytics",l.Base,[],{addLastChangedAnimationData:function(e){var t=this.get("model");var a=t.lastChange||{};var i=l.Array.find(l.Object.keys(a),function(e){return/animation/i.test(e)});var n=a[i]||{};var s=n.prevVal||null;var r=n.newVal||null;var o={lastChangedAnimationName:i,lastChangedAnimationPrevVal:s,lastChangedAnimationNewVal:r};return l.merge({},e,o)},trackAnimationFieldsChange:function(a){var e=a.fields.filter(l.Lang.isValue);e.forEach(function e(t){t.after("dataChange",function e(){var t=this.addLastChangedAnimationData(l.Lang.isFunction(a.dataInitializer)?a.dataInitializer.call(this):{});l.Squarespace.Analytics.trackInternal(a.eventName,t)},this)}.bind(this))},trackAnimationFieldsSave:function(e){l.Lang.isFunction(e.dataInitializer)&&l.Squarespace.Analytics.trackInternal(e.eventName,e.dataInitializer.call(this))}},{})},"1.0",{requires:["base","squarespace-util"]})},7787:function(e,t,a){var n=a(24).t;YUI.add("squarespace-block-summary-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var i=a.Squarespace.Block.ModelEditorDialog.SummaryGallery=a.Base.create("SummaryGalleryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,[a.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(e){e=a.merge(e,e.options);delete e.options;"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;return e},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0];e.tabs.push({title:t.title,tabTitle:n("Design"),icon:t.icon,scroll:true,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]});e.height=420;return e},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return a.merge(t,e)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-summary-gallery-model"]})},7788:function(e,t){YUI.add("squarespace-block-summary-gallery-model",function(e){e.namespace("Squarespace.ContentModel");e.Squarespace.ContentModel.SummaryGalleryBlock=e.Base.create("summaryGalleryBlock",e.SQS.LayoutEngine.BlockModel.Gallery,[],{},{})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery"]})},7789:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(404);YUI.add("squarespace-block-fivehundredpix-editor",function(e){e.namespace("Squarespace.Block.Editor");e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.Editor.Fivehundredpix=e.Base.create("fivehundredpix-block-editor-dialog",e.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Fivehundredpix")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("500px")}}});e.Squarespace.Block.ModelEditorDialog.Fivehundredpix=e.Base.create("FivehundredpixModelEditorDialog",e.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{initialize:function(){this.after("collectionSynced",this._afterSyncAccount,this)},_onSendRequested:function(e){var t=this._getAccount();if(t&&!t.get("pullEnabled")){t.set("pullEnabled",true);t.after("save",function(){this.fire("collectionSynced")},this);t.save()}else this.fire("collectionSynced")},_getServiceId:function(){return s.FIVEHUNDREDPIX}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig"},icon:{value:"fivehundredpix"},socialAccountType:{value:s.FIVEHUNDREDPIX},collectionType:{value:n.FIVEHUNDREDPIX},strings:{value:{name:"500px",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-fivehundredpix-model","squarespace-damask-context-globals"]})},7790:function(e,t){YUI.add("squarespace-block-fivehundredpix-model",function(e){e.namespace("Squarespace.ContentModel").FivehundredpixBlock=e.Base.create("fiveHundredPixModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},7791:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-flickr",function(e){e.namespace("Squarespace.Block").Flickr=e.Base.create("block-flickr",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-flickr",MODEL:e.Squarespace.ContentModel.FlickrBlock,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Flickr}},type:{value:i.FLICKR}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-flickr-editor","squarespace-block-flickr-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7792:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(404);YUI.add("squarespace-block-flickr-editor",function(e){e.namespace("Squarespace.Block.ModelEditorDialog");e.namespace("Squarespace.Block.Editor").Flickr=e.Base.create("flickr-block-editor-dialog",e.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Flickr")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Flickr")}}});e.Squarespace.Block.ModelEditorDialog.Flickr=e.Base.create("FlickrModelEditorDialog",e.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{_getServiceId:function(){return s.FLICKR}},{ATTRS:{icon:{value:"flickr"},socialAccountType:{value:s.FLICKR},collectionType:{value:n.FLICKR},strings:{value:{name:"Flickr",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-flickr-model","squarespace-damask-context-globals"]})},7793:function(e,t){YUI.add("squarespace-block-flickr-model",function(e){e.namespace("Squarespace.ContentModel").FlickerBlock=e.Base.create("FlickerModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},7794:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);var o=false;YUI.add("squarespace-block-form",function(a){a.namespace("Squarespace.Block");var t=a.Squarespace.Block.Form=a.Base.create("block-form",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._formPreview=new a.Squarespace.Widgets.FormPreview({form:this.get("model").getFormModel()});this.publish("formData-loaded",{fireOnce:true,async:true})},renderUI:function e(){var t=this._getStackFinished();var a=this.get("editController").get("editing");this.get("model").load({skipSaveOnLoad:!a},function(){this.onBlockModelLoad();t()}.bind(this))},onBlockModelLoad:function(){false;this.fire("formData-loaded");this._renderBlock()},bindUI:function(){var e=this.get("model");e.after(["change","save"],function(e){false;this._renderBlock()},this);e.after("save",this.syncUI,this);this.after("editableChange",this._afterEditableChange,this)},_afterEditableChange:function(e){this._shouldRerenderBlockFromServer(e)&&t.superclass._renderBlock.call(this)},syncUI:function e(t){false;var a=this.get("model");this._formPreview.set("useLightbox",a.get("useLightbox"));this._formPreview.set("lightboxHandleText",a.get("lightboxHandleText"));this._formPreview.set("buttonAlignment",a.get("buttonAlignment"))},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("formId");t?this.after("formData-loaded",e):e()},_renderBlock:function e(){var t=this.get("model");if(this._formPreview.get("rendered")){if(!a.Lang.isUndefined(t.get("fields"))){false;t.getFormModel().set("fields",t.get("fields"));this.syncUI()}}else{false;this._formPreview.render(this.get("contentBox"))}this._syncModelFieldWithPreview("captchaEnabled");this._syncModelFieldWithPreview("captchaTheme");this._syncModelFieldWithPreview("captchaAlignment");this.fire("widget:contentUpdate")},_syncModelFieldWithPreview:function(e){var t=this.get("model");var a=t.get(e);void 0!==a&&t.getFormModel().set(e,a)},_shouldRerenderBlockFromServer:function(e){if(e.newVal)return false;var t=this.get("model");var a=t.hasValidStorageConnected();return!a}},{CSS_PREFIX:"sqs-block-form",MODEL:a.Squarespace.Models.BlockFormModel,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return a.Squarespace.Block.Editor.Schema;return a.Squarespace.Block.Editor.Form}},type:{value:i.FORM}}})},"1.0",{requires:["base","model","squarespace-block-form-model","squarespace-block-form-editor","squarespace-form-editing-utils","squarespace-form-preview","squarespace-models-form","squarespace-premium-block-mixin"]})},7795:function(e,t,a){var o=a(43);var i=a(211);var l=a(683);var c=a(5073);var d=a(2611);var u=a(2610);var g=a(5320);var p=a(207);var h=a(24).t;var n=a(729);var f=n.createLogger("form-model","#456");YUI.add("squarespace-block-form-model",function(s){var n=h("Error Saving Form");var t=h("An error occurred while attempting to save the form.");var a={"spreadsheetName must be provided.":h("A spreadsheet name must be provided.")};function r(e){return e&&a[e]||t}s.namespace("Squarespace.Models");s.Squarespace.Models.BlockFormModel=s.Base.create("BlockFormModel",s.Model,[],{initializer:function(){this._formModel=this.createFormModel();this._saveCallbacks=[]},toJSON:function(){return{formId:this.get("formId"),useLightbox:this.get("useLightbox"),lightboxHandleText:this.get("lightboxHandleText"),buttonAlignment:this.get("buttonAlignment"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")}},getFormModel:function e(){return this._formModel},createFormModel:function e(){var t=[s.merge({},g.NAME,{required:true}),s.merge({},g.EMAIL,{required:true}),s.merge({},g.TEXT,{title:h("Subject"),required:true}),s.merge({},g.TEXT_AREA,{title:h("Message"),maxLength:"",required:true})];t.forEach(function(e){s.Squarespace.FormEditingUtils.resolveFieldId(e,t)});return new s.Squarespace.Models.Form({id:null,name:h("New Form"),fields:t,submitButtonText:h("Submit"),submissionMessage:{html:h("Thank you!")},successRedirect:"",captchaEnabled:false,captchaTheme:u.LIGHT,captchaAlignment:d.LEFT})},setBackends:function(e){e.set("backendConnectionConfigs",{campaignsConnect:this.get("campaignsConnect"),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},setBackendsAndSave:function(e){f("#setBackendsAndSave",this,e);this.setBackends(e);e.save(s.bind(this._onModelSave,this))},saveFormModel:function e(t){f("#saveFormModel");this._saveCallbacks.push(t);if(this._saveCallbacks.length>1)return;this.setBackendsAndSave(this.getFormModel())},_onModelSave:function e(t){var a=this._saveCallbacks;this._saveCallbacks=[];var i=this.getFormModel();if(!i){this._onModelSaveError({},a);return}if(s.Lang.isValue(t)){this._onModelSaveError(t,a);return}this.set("formId",i.get("id"));a.forEach(function e(t){t()})},_onModelSaveError:function e(a,t){var i=a?o(a,"responseJSON.message",""):"";t.forEach(function e(t){t({title:n,message:r(i),code:a.code,src:"form"})})},sync:function e(t,a,i){if("read"===t){var n=this.get("formId");if(s.Lang.isValue(n)){this.syncRead(n,i);return}if(a&&a.skipSaveOnLoad){i();return}this.saveFormModel(i);return}"create"!==t&&"update"!==t||this.syncWrite(i)},syncRead:function e(t,a){f("#syncRead start",t);var i=this.getFormModel();i.set("id",t);i.load(function e(){f("#syncRead complete - form model loaded");a()})},syncWrite:function e(t){f("#syncWrite");var a=this.constructor.FORM_MODEL_FIELDS;this.getFormModel().setAttrs(this.getAttrs(a));this.saveFormModel(t)},validate:function e(t,a){var i=this.validateFormBlockModel();if(i){a(i);return}a()},validateFormBlockModel:function(){if(!this.hasValidStorageConnected()){var e={title:h("Add Storage to this Form"),message:h('Tell us where to save form submissions in the <strong>Storage</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:p.FORM_AND_NEWSLETTER_STORAGE}),src:"validate"};return e}},isNewsletterBlockFormModel:function(){return this.getFormModel().get("type")===c.NEWSLETTER_BLOCK},hasValidStorageConnected:function(){var e=this.isNewsletterBlockFormModel()?[this.get("campaignsConnect.connectionState"),this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("zapierConnect.connectionState")]:[this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("emailConnect.connectionState"),this.get("zapierConnect.connectionState")];return-1!==e.indexOf(i.CONNECTED)||-1!==e.indexOf(i.PENDING)}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","disclaimerMessage","fields","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{emailConnect:{setter:function(e){e&&(e.backendType=l.EMAIL)},valueFn:function(){if(!s.Lang.isValue(this.get("formId"))&&s.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount.email))return{connectionState:i.CONNECTED,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email}}},googleDocsConnect:{setter:function(e){e&&(e.backendType=l.GOOGLE)}},mailchimpConnect:{setter:function(e){e&&(e.backendType=l.MAILCHIMP)}},campaignsConnect:{setter:function(e){e&&(e.backendType=l.CAMPAIGNS)}},zapierConnect:{setter:function(e){e&&(e.backendType=l.ZAPIER)}}}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-form-editing-utils","squarespace-models-form"]})},7796:function(e,t,a){var i=a(24).t;var n=a(6863);YUI.add("squarespace-block-form-editor",function(r){r.namespace("Squarespace.Block.Editor");var t=r.Squarespace.Block.Editor.Form=r.Base.create("form-block-editor-dialog",r.Squarespace.Block.Editor.Dialog,[],{_enableEditing:function(e){e&&"contextmenu"===e.type&&e.preventDefault();t.superclass._enableEditing.call(this)},_getModelEditor:function(){return r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Form")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Form")}}});r.namespace("Squarespace.Block.ModelEditorDialog");var o=r.Squarespace.Block.ModelEditorDialog.Form=r.Base.create("blockFormEditor",r.Squarespace.ModelEditorDialog,[r.Squarespace.Block.FormModelEditorMixin],{initializer:function(){var e=this.get("dialog");e.on("ready",this.bindDialogFields,this);e.on("shown",this.renderCaptchaFields,this);e.on(["cancel-click","cancel"],this._cancelChanges,this);this.plug(r.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},_cancelChanges:function(){var e=this.get("dialog");var t=e.getInitialData();if(t&&t.fields){var a=this.get("model");a.set("fields",t.fields)}},bindDialogFields:function(){this.fireBlockModelChangeOnFieldsChanged();this.bindCaptchaFields()},fireBlockModelChangeOnFieldsChanged:function(){var t=this.get("model");var e=this.get("dialog");var a=e.getField("fields");a&&a.after("change",function(e){t.fire("change",{changed:{fields:{prevVal:e.prevVal,newVal:e.newVal}}})},this)},bindCaptchaFields:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;t.after("dataChange",this.renderCaptchaFields,this)},renderCaptchaFields:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;var a=t.get("data");var i=false===a;if(i){e.getField("captchaTheme").hide();e.getField("captchaAlignment").hide()}else{e.getField("captchaTheme").show();e.getField("captchaAlignment").show()}},getSuccessRedirectData:function(){var e=this.get("model");var t=e.getFormModel();var a=t.get("successRedirect");r.Lang.isString(a)&&(a={url:a,newWindow:false});return a},getDataFromFormModel:function(){var e=this.get("model");var i=e.getFormModel();var t=e.constructor.FORM_MODEL_FIELDS.reduce(function e(t,a){t[a]="successRedirect"===a?this.getSuccessRedirectData():i.get(a);return t}.bind(this),{});return t},getDialogData:function(){var e=this.get("model");var t=this.getDataFromFormModel();var a=r.merge({useLightbox:e.get("useLightbox"),lightboxHandleText:e.get("lightboxHandleText"),buttonAlignment:e.get("buttonAlignment")},this.getConnectionData(e));var i=r.merge({},a,t);return i},sanitizeDialogData:function(e){e.successRedirect&&e.successRedirect.url?e.successRedirect=e.successRedirect.url:e.successRedirect="";return e},_saveResponseHandler:function(e,t,a,i,n){var s=this.get("dialog");if(e&&("validate"===e.src||"storageBackends"===e.src||"form"===e.src)){s.allowEditing();return new r.Squarespace.Widgets.Alert({"strings.title":e.title,"strings.message":e.message})}o.superclass._saveResponseHandler.call(this,e,t,a,i,n)}},{ATTRS:{dialogConfig:{valueFn:function(){return n.getConfig(r)}},dialogConfigContext:{valueFn:function(){return n.getConfigContext(r)}}}})},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-code","squarespace-dialog-create-link","squarespace-dialog-description","squarespace-dialog-email-service-connect","squarespace-dialog-google-docs-service-connect","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-campaigns-service-connect","squarespace-dialog-wysiwyg","squarespace-widgets-alert","squarespace-util-authenticated","squarespace-models-form","squarespace-block-form-model-editor-mixin"]})},7797:function(e,t,i){var o=i(24).t;var l=i(2887);YUI.add("squarespace-dialog-code",function(n){var s=i(5394);var r=n.namespace("Squarespace.DialogFields").Code=n.Base.create("codeEditor",n.Squarespace.DialogField2,[],{initializer:function(e){var t;if(n.Lang.isObject(e)){t=this.get("editorConfig");this.set("editorConfig",n.merge(t,e))}this.after("dataChange",function(e){"setInitialData"===e.source&&this._editor.setValue(e.newVal)})},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".code-editor-seed");var a=this.get("editorConfig");var i=this.get("data");n.Lang.isString(i)||(i="");this._editor=s.fromTextArea(t.getDOMNode(),a);this._editor.setValue(i)},bindUI:function(){r.superclass.bindUI.call(this);this._editor.on("change",n.bind(this._updateData,this));this.on("visibleChange",this._refreshEditor,this)},destructor:function(){if(this._editor){this._editor.toTextArea();this._editor=null}},_refreshEditor:function(e){this._editor&&n.Lang.isFunction(this._editor.refresh)&&this._editor.refresh()},_updateData:function(e){var t=n.Lang.trim(this._editor.getValue());this.set("data",t);this.clearError()},loadValue:function(e){this.set("data",e);this._editor.setValue(e)}},{CSS_PREFIX:"sqs-code",TEMPLATE:'<textarea class="code-editor-seed"></textarea>',ATTRS:{data:{validator:n.Lang.isString},editorConfig:{value:{mode:"htmlmixed",theme:"squarespace-light",lineNumbers:true,indentUnit:2,tabMode:"indent",lineWrapping:true,onChange:n.bind(this._updateData,this),autoCloseTags:true,matchTags:true}},visible:{value:true}}});var a=n.namespace("Squarespace.DialogFields").HtmlCode=n.Base.create("htmlCode",n.Squarespace.DialogFields.Code,[],{isValid:function(){var e=n.Lang.trim(this.get("data"));return""===e||n.Lang.isValue(e)},_getErrors:function(){if(!this.isValid())return[this.get("strings.htmlError")];return[]},loadValue:function(e){this.set("data",e);this._editor.setValue(e)},didDataChange:function(){var e=a.superclass.didDataChange.call(this);var t=this._initialData;n.Lang.isValue(t)||""!==this.get("data")||(e=false);return e}},{CSS_PREFIX:"sqs-html-code",ATTRS:{strings:{value:{htmlError:o("Invalid HTML")}},data:{value:"",validator:n.Lang.isString}}});n.namespace("Squarespace.DialogFields").UrlMappings=n.Base.create("urlMappings",n.Squarespace.DialogFields.Code,[],{isValid:function(){return true}},{CSS_PREFIX:"sqs-url-mapping",ATTRS:{}});n.namespace("Squarespace.DialogFields").jsonTemplateCode=n.Base.create("urlMappings",n.Squarespace.DialogFields.Code,[],{_getErrors:function(){var e=this.get("data");var t=this.get("sampleData");try{l(e,t);return[]}catch(e){return[e.name+": "+e.message]}}},{CSS_PREFIX:"sqs-json-template-code",ATTRS:{strings:{},height:{readOnly:true,value:{}},sampleData:{value:{}}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},7798:function(e,t,a){var i=a(0);var n=a(60);var s=a(24).t;var r=a(7483);var o=a(6669);var l=a(5775);var c=a(211);var d=a(729);var u=false;var g=d.createLogger("campaigns dialog field","#552",u);YUI.add("squarespace-dialog-campaigns-service-connect",function(t){t.namespace("Squarespace.DialogFields");t.Squarespace.DialogFields.CampaignsServiceConnect=t.Base.create("campaignsServiceConnect",t.Squarespace.DialogField2,[],{initializer:function(e){g("init",e);this.reactElement=i.createElement(r,t.merge({initialData:e.data},e.props))},renderUI:function(){this.reactInstance=n.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){n.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){if(o){var e=o.getState();return e.isDirty}return false},_getErrors:function(){var e=[];var t=o.getState();if(t.isConnected&&!t.selectedListId){l.showValidationError();e.push(s("Select a list"))}return e}},{ATTRS:{data:{getter:function(){var e=o.getState();return{connectionState:o.isConnected()?c.CONNECTED:c.DISCONNECTED,listId:e.selectedListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7799:function(e,t,a){var c=a(683);var d=a(211);var u=a(24).t;var n=a(5071);YUI.add("squarespace-block-form-model-editor-mixin",function(l){l.namespace("Squarespace.Block.FormModelEditorMixin");l.Squarespace.Block.FormModelEditorMixin=l.Base.create("FormModelEditorMixin",l.Base,[],{getConnectionData:function(e){var t=e.getFormModel();var a=t.get("connectedBackends")||[];var i=n.getFromModel({formId:t.get("id"),connections:a,legacyDefaults:{googleSpreadsheetName:e.get("googleDocsConnect.spreadsheetName"),mailchimpUsername:e.get("mailchimpConnect.username")}});if(i.errors){l.Array.each(i.errors,function(e){l.Squarespace.Logger.log(u("Unrecognized Connected Backend Type"),{storageBackend:e})});delete i.errors}return i},_getConnectFieldInitialData:function(){var r={};var o=this._model;var e=o.getFormModel();var t=e.get("connectedBackends");t&&l.Array.each(t,function(e){var t=e.backendId;if(!l.Lang.isValue(t))return;var a=e.socialConfig;switch(e.backendType){case c.CAMPAIGNS:r.campaignsConnect={connectionState:d.CONNECTED,listId:t};break;case c.EMAIL:r.emailConnect={connectionState:e.connectionState,email:t};break;case c.ZAPIER:r.zapierConnect={connectionState:e.connectionState,url:t};break;case c.GOOGLE:var i=e.config.spreadsheetName;l.Lang.isValue(i)||(i=o.get("googleDocsConnect.spreadsheetName"));r.googleDocsConnect={connectionState:e.connectionState,username:a.profileUserName,socialConfig:a,spreadsheetName:i};break;case c.MAILCHIMP:var n=a.profileUserName;var s=!!(e.config&&"true"===e.config.useSingleOptIn);l.Lang.isValue(n)||(n=o.get("mailchimpConnect.username"));r.mailchimpConnect={connectionState:e.connectionState,username:n,socialConfig:a,list:t,useSingleOptIn:s};break;default:l.Squarespace.Logger.log(u("Unrecognized Connected Backend Type"),{storageBackend:e});break}},this);r.emailConnect||l.Lang.isValue(e.get("id"))||(r.emailConnect={connectionState:d.CONNECTED,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email});return r}})},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-models-form","squarespace-util-authenticated"]})},7800:function(e,t,a){var i=a(701);YUI.add("squarespace-block-foursquare",function(e){e.namespace("Squarespace.Block").Foursquare=e.Base.create("block-foursquare",e.Squarespace.Block.SocialSummaryBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-foursquare",MODEL:e.Squarespace.ContentModel.FoursquareBlock,ATTRS:{editor:{value:e.Squarespace.Block.Editor.Foursquare},type:{value:i.FOURSQUARE}}})},"1.0",{requires:["base","squarespace-block-social-summary","squarespace-block-foursquare-editor","squarespace-block-foursquare-model","squarespace-premium-block-mixin"]})},7801:function(e,t,a){var n=a(24).t;var s=a(229);var r=a(207);YUI.add("squarespace-block-foursquare-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.namespace("Squarespace.Block.Editor").Foursquare=a.Base.create("foursquare-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Foursquare")}},{NS:"blockEditor",ATTRS:{blockName:{value:n("Foursquare Swarm")}}});var i=a.Squarespace.Block.ModelEditorDialog.Foursquare=a.Base.create("FoursquareSummaryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{_getServiceId:function(){return a.Squarespace.ExternalServiceProviders.FOURSQUARE},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0].fields;t.unshift({ctor:a.Squarespace.DialogFields.Description,text:n('Display a feed of check-ins from a personal Foursquare Swarm account. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.FOURSQUARE})});return e}},{ATTRS:{icon:{value:"foursquare"},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.FOURSQUARE},collectionType:{value:s.FOURSQUARE},strings:{value:{name:n("Foursquare Swarm"),itemTypePlural:n("check-ins"),itemType:n("check-in")}}}})},"1.0",{requires:["base","model","squarespace-block-foursquare-model","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-model-editor"]})},7802:function(e,t){YUI.add("squarespace-block-foursquare-model",function(e){e.namespace("Squarespace.ContentModel").FoursquareBlock=e.Base.create("FoursquareBlockModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{ATTRS:{}})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},7803:function(e,t,a){var i=a(114);var n=a(87);var s=a(1342);YUI.add("squarespace-block-horizontal-rule",function(t){t.namespace("Squarespace.Block").HorizontalRule=t.Base.create("block-horizontalrule",t.SQS.LayoutEngine.Block.HorizontalRule,[],{renderUI:function(){var e=t.Node.create("<hr>");this.get("contentBox").appendChild(e)}},{CSS_PREFIX:"sqs-block-horizontalrule",ATTRS:{editor:{valueFn:function(){if(s.isMobileContentEditingEnabled()||i.isFeatureEnabled(n.ROSETTA_BLOCK_EDITORS))return t.Squarespace.Block.Editor.Schema;return t.Squarespace.Block.Editor.HorizontalRule}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-horizontal-rule","squarespace-block-horizontal-rule-editor","squarespace-block-schema-editor"]})},7804:function(e,t,a){var i=a(701);YUI.add("@sqs/layout-engine/block-horizontal-rule",function(t){t.namespace("SQS.LayoutEngine.ContentModel").HorizontalRule=t.Base.create("HorizontalRuleContentModel",t.Model,[],{},{});t.namespace("SQS.LayoutEngine.Block").HorizontalRule=t.Base.create("block-horizontalrule",t.SQS.LayoutEngine.Block.Base,[],{renderUI:function(){var e=t.Node.create("<hr>");this.get("contentBox").appendChild(e)}},{CSS_PREFIX:"sqs-block-horizontalrule",MODEL:t.SQS.LayoutEngine.ContentModel.HorizontalRule,ATTRS:{type:{value:i.HORIZONTAL_RULE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},7805:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-horizontal-rule-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.HorizontalRule=e.Base.create("horizontal-rule-block-editor-dialog",e.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{value:i("Line")},editingButtons:{value:true},includeEdit:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base"]})},7806:function(e,t){YUI.add("squarespace-block-html",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Html=e.Base.create("block-html",e.SQS.LayoutEngine.Block.Html,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-html",ATTRS:{blockContentEditor:{valueFn:function(){return e.Squarespace.Content.HtmlEditor}},editor:{valueFn:function(){return e.Squarespace.Block.Editor.Html}}}})},"1.0",{requires:["@sqs/layout-engine/block-html","base","squarespace-block-content-html-editor","squarespace-block-html-editor","squarespace-premium-block-mixin"]})},7807:function(e,t){YUI.add("@sqs/layout-engine/block-html",function(t){t.namespace("SQS.LayoutEngine.Block");t.SQS.LayoutEngine.Block.Html=t.Base.create("block-html-base",t.SQS.LayoutEngine.Block.ParentBase,[],{initializer:function(e){this.contentHtml=this.add({childType:t.SQS.LayoutEngine.BlockContent.Html,model:e.model,editable:e.editable,enableDelete:!this.get("lockedLayout"),type:"full"}).item(0);this.set("model",this.contentHtml.get("model"))},renderUI:function(){this.contentHtml.set("editor",this.get("blockContentEditor"));this.contentHtml.render(this.get("contentBox"))},syncUI:function(){this.get("rendered")&&this.contentHtml.syncUI()},appendHTML:function(e){var t=this.get("model").get("html");var a=t.trim()+e.trim();this.contentHtml.setContent(a)},isEmpty:function(){return!this.get("model").get("html")},toJSON:function(){return{type:this.get("type"),id:this.get("id"),value:this.contentHtml.toJSON()}}},{CSS_PREFIX:"sqs-block-html",MODEL:t.SQS.LayoutEngine.ContentModel.Html,ATTRS:{classNames:{value:"html-block"},blockContentEditor:{valueFn:function(){throw new Error("Must provide Block Content Editor constructor in HTML Block")}},type:{value:2},model:{getter:function(){return this.contentHtml.get("model")}},floatable:{value:true}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-content-html"]})},7808:function(e,t,a){var i=a(100);var n=a(24).t;var s=a(2021);var r=a(522);var c=a(6712);var d=a(6713);var u=r.isSevenOne();var o={full:s.SchemaTypes.CLASSIC,simple:s.SchemaTypes.SIMPLE};var g=["left","center","right","justify"];var p={command:"removeBlock",title:n("Remove Block"),icon:"trashcan"};YUI.add("squarespace-block-content-html-editor",function(l){l.namespace("Squarespace.Content");l.Squarespace.Content.HtmlEditor=l.Base.create("contentHtmlEditor",l.SQS.LayoutEngine.BlockContent.HtmlEditorBase,[l.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._debouncedSetData=i(function(e){!this.get("destroyed")&&this.visualEditor&&this.visualEditor.setData(e)}.bind(this),50)},destructor:function(){var e=this.get("host").get("contentBox");this._debouncedSetData.cancel();this._destroyVisualEditor();e.detachAll()},beforeLayoutDrag:function(){this.get("host").blur();this.block.blur();this.hideEditor()},afterLayoutDrag:function(){l.soon(this.showEditor.bind(this))},hideEditor:function(){var e=this.get("host");var t=e.get("contentBox");if(!this.visualEditor)return;var a=this.visualEditor.get("boundingBox");this.visualEditor.blur();t.setHTML(this.visualEditor.getData());t.inDoc(t.get("ownerDocument"))||a.get("parentElement").insertBefore(t,a);a.setStyles({display:"none",visibility:"hidden"});a.removeClass("sqs-html-content")},showEditor:function(){if(!this.visualEditor)return;var e=this.get("host");var t=e.get("contentBox");var a=this.visualEditor.get("boundingBox");t.inDoc(t.get("ownerDocument"))&&t.get("parentElement").removeChild(t);a.setStyles({display:"",visibility:""});a.addClass("sqs-html-content")},syncEditorUI:function(e){var t=this.get("host").get("contentBox");this._debouncedSetData("string"===typeof e?e:t.getHTML());"string"===e&&t.setHTML(e)},getEditorType:function(){var e=this.get("host");var t=e.get("type");return o[t]},initEngine:function(e){var t=this.get("host");var a=this.getEditorType();var i=t.get("contentBox");this._sanitizeOldAlignClasses();this.visualEditor=new l.Squarespace.TextEditor({initialData:i,render:true,replaceNode:i,contentNode:t.get("boundingBox"),placeholder:t.get("placeholderText"),editable:t.get("editable"),type:a,commands:{removeBlock:this._handleRemoveBlockRequest.bind(this)},MenuConstructor:l.Squarespace.Singletons.TextEditorToolbar,menuItems:this._getEditorMenuItems()});this._bindEditorEvents();this.showEditor()},_sanitizeOldAlignClasses:function(){var n=false;var e=this.get("host").get("contentBox");e.all('[class*="text-align-"]').each(function(e){var t=e.get("className").split(/\s+/);var a=l.Array.find(t,function(e){return 0===e.indexOf("text-align-")});if(a){var i=a.replace("text-align-","");if(g.indexOf(i)>-1){n=true;e.setStyle("textAlign",i)}}});n&&this.get("host").get("model").set("html",e.getHTML(),{silent:true})},_getEditorMenuItems:function(){var e=this.get("host");var t=this.getEditorType();var a=false;var i=false;try{a="IMAGE"===e.get("parent").get("blockTypeName")}catch(e){}if(a)try{i=e.get("srcNode").hasClass("image-caption")}catch(e){}var n=u&&a&&!i;var s={type:t,hasAlignment:!n,hasLink:e.get("hasHyperlink")};var r=d.isRosettaRichTextToolbarLayoutEngineEnabled()?c.getItems(s):l.Squarespace.Singletons.TextEditorToolbar.getItems(s);var o=e.get("enableDelete");return o?r.concat(p):r},_bindEditorEvents:function(){this.visualEditor.on("mouseDown",function(e){if(!this.get("host").get("focused")){this.block.get("focusHandler")._onDocFocus({target:this.get("host").get("boundingBox")});this.block.get("editController").hideBlockMenus()}},this);this.visualEditor.on("contentUpdated",function(e){this.visualEditor.isEmpty()?this._save(""):this._save(e.content)},this);this.afterHostEvent("editableChange",function(e){this.visualEditor&&this.visualEditor.set("editable",e.newVal)})},_afterBlur:function(){this.constructor.superclass._afterBlur.apply(this,arguments);this.visualEditor&&this.visualEditor.blur()},_handleRemoveBlockRequest:function(){if(!this.get("host").get("enableDelete"))return;var e=new l.Squarespace.Widgets.Confirmation({"strings.title":n("Remove Block"),"strings.message":n("Are you sure you wish to remove this block?")});e.on("confirm",function(){this.block.removeBlock()},this)},_getVisualEditorData:function(){if(this.visualEditor){if(this.visualEditor.isEmpty())return"";return this.visualEditor.getData(true)}},setEditorData:function(e){if("string"===typeof e){var t=this.get("host").get("contentBox");t.setHTML(e);this._debouncedSetData(e)}},_giveEditorFocus:function(e){if(this.visualEditor)return this.visualEditor.focus(e?{left:e.pageX,top:e.pageY}:null)},_destroyVisualEditor:function(){if(l.Lang.isValue(this.visualEditor)){this.visualEditor.destroy();this.visualEditor=null}}},{NS:"contentEditor"})},"2.0",{requires:["base","@sqs/layout-engine/block-content-html-editor-base","squarespace-widgets-confirmation","squarespace-text-editor-base","squarespace-text-editor-rosetta","squarespace-text-editor-damask","squarespace-text-editor","squarespace-text-editor-toolbar","squarespace-mixins-event-registrar"]})},7809:function(e,t){YUI.add("@sqs/layout-engine/block-content-html-editor-base",function(l){var e=function(){};l.namespace("SQS.LayoutEngine.BlockContent");l.SQS.LayoutEngine.BlockContent.HtmlEditorBase=l.Base.create("contentHtmlEditor",l.Plugin.Base,[],{initializer:function(){var e=this.get("host");this.block=e.get("parent");this.initEngine(this.block);this.afterHostEvent("focusedChange",function(e){e.newVal?this._afterFocus(e):this._afterBlur(e)},this);this.once("initializedChange",this.syncEditorUI,this);e.get("boundingBox").addClass("sqs-editing")},syncEditorUI:e,_getVisualEditorData:function(){throw new Error("_getVisualEditorData() not implemented.")},initEngine:function(){var e=this.get("host").get("model").get("engine");switch(e){case"text":case"textNoBreak":this.initTextEngine();break;case"wysiwyg":case"visual":this.initVisualEngine();break}},initTextEngine:function(){var e=this.get("host");var t=e.get("model").get("engine");var a=e.get("placeholderText");var i=e.get("boundingBox");var n=e.get("contentBox");this.titleEditable=l.Node.create('<textarea class="sqs-textarea-editor" placeholder="'+a+'" autocapitalize="on">'+l.Escape.html(e.get("model").get("html"))+"</textarea>");i.appendChild(this.titleEditable);var s=this.textarea=i.one("textarea");var r=["font","text-align","text-rendering","letter-spacing","text-transform","color"];var o=this.get("host").get("referenceNode")||n;r.forEach(function(e){var t=o.getComputedStyle(e);s.setStyle(e,t);o!==n&&n.setStyle(e,t)},this);"textNoBreak"===t&&s.on("keydown",function(e){13===e.keyCode&&e.preventDefault()},this);s.on("valuechange",function(e){var t=l.Escape.html(e.target.get("value"));if(-1!==t.indexOf("\n")){t=t.replace(/\n/g," ");s.set("value",t)}this.get("host").get("model").set("html",e.target.get("value"));this.get("host").syncUI()},this)},initVisualEngine:function(){throw new Error("initVisualEngine() not implemented!")},_giveEditorFocus:e,_afterFocus:function(e){this._giveEditorFocus()},_afterBlur:function(e){this._save();this._fireContentUpdate()},_save:function(e){var t=this.get("host").get("model");this.visualEditor?"string"!==typeof e&&(e=this._getVisualEditorData()):this.textarea&&(e=this.textarea.get("value"));l.Lang.isValue(e)&&t.setAttrs({source:e,html:e});this.block&&this.block.get("isNewBlock")&&this.block.set("isNewBlock",false)},_fireContentUpdate:function(){this.block&&this.block.fire("widget:contentUpdate")},_destroyVisualEditor:function(){throw new Error("_destroyVisualEditor not implemented.")},destructor:function(){this.get("host").get("boundingBox").removeClass("sqs-editing");this._destroyVisualEditor();this.titleEditable&&this.titleEditable.remove()}},{NS:"contentEditor",ATTRS:{tabIndex:{value:0}}})},"2.0",{requires:["node","base","plugin"]})},7810:function(e,t,a){var i=a(6712);YUI.add("squarespace-text-editor-base",function(n){var s="insertHTML";n.namespace("Squarespace");n.Squarespace.TextEditorBase=n.Base.create("TextEditorBase",n.Squarespace.SSWidget,[],{renderUI:function(){this._initMenuTimeout&&window.clearTimeout(this._initMenuTimeout);this._initMenuTimeout=window.setTimeout(function e(){this.get("destroyed")||this.initializeMenu()}.bind(this),200)},_onStateChange:function(){console.log("Implement based on device")},initializeEditor:function(){console.log("Implement based on device")},destroyEditor:function(){if(this.editor){var e=this.get("boundingBox").get("parentElement");e&&e.appendChild(this.getData());this.editor.destroy();this.editor=null}this._finishUpdates&&this._finishUpdates()},_renderBox:function(e){this.initializeEditor();var t=this.get("replaceNode");var a=this.get("boundingBox");if(t){t=n.one(t);a.addClass(t.get("className"));var i=t.get("parentElement");i.replaceChild(a,t);return}e?e.appendChild(a):a.inDoc(a.get("ownerDocument"))||n.Node.one(n.config.doc.body).insert(a,0)},bindUI:function(){this.after("editableChange",function(e){this.editor&&this.editor.setEditable(e.newVal)})},destructor:function e(){window.clearTimeout(this._initMenuTimeout);var t=this.get("replaceNode");if(t){t=n.one(t);if(!t.inDoc(t.get("ownerDocument"))){t.setHTML(this.getData(true));this.get("boundingBox").get("parentElement").replaceChild(t,this.get("boundingBox"))}}this.destroyMenu();this.destroyEditor()},createSchema:function(){return i.createSchema({schemaType:this.get("type"),isInline:this.get("isInline"),isLinkable:this.get("hasHyperlink")})},createState:function(){return i.createState({initialData:this.get("initialData"),schema:this.createSchema(),placeholder:this.get("placeholder")})},initializeMenu:function(){console.log("Implement based on device")},destroyMenu:function(){console.log("Implement based on device")},execCommand:function(e,t,a){var i=this.get("commands")[e];if(this.get("savedSelectionPos")){this.editor.setSelection(this.get("savedSelectionPos"));this.set("savedSelectionPos",null)}"function"===typeof i?i(t):e===s?this.editor.insertHTML(t.html):this.editor.execCommand(e,t,a)},_saveCurrentSelection:function(e){void 0===e&&(e=this.editor.getSelectionPos());this.set("savedSelectionPos",e)},fireUpdate:function(){this._html=this.editor.getHTML();this.fire("contentUpdated",{content:this._html})},getData:function(e){(e||void 0===this._html)&&(this._html=this.editor.getHTML());return this._html},setData:function(e){e!==this._html&&this.editor.setContent(e)},focus:function(e){var t;if(e&&"number"===typeof e.top){var a=this.editor.view.posAtCoords(e);a&&(t={from:a.pos,to:a.pos})}this.editor.focus(!!t,{range:t})},blur:function(){this.editor.blur()},isEmpty:function(){return this.editor.getContentSize()<=2&&""===this.editor.getText()},CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-rte",ATTRS:{boundingBox:{value:"div",setter:function(e){return n.Node.create("<"+e+"></"+e+">")}},replaceNode:{},initialData:{},type:{},placeholder:{},editable:{},commands:{value:{}},isInline:{value:false},hasHyperlink:{value:true},keymap:{},savedSelectionPos:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget"]})},7811:function(e,t,a){var r=a(0);var o=a(60);var l=a(100);var c=a(710);var d=a(1246);var u=a(1698);var g=a(3043).RichTextToolbar;var p=a(425);var h=a(53);var f=a(32);YUI.add("squarespace-text-editor-rosetta",function(i){var n=c.default;i.namespace("Squarespace");var s=null;i.Squarespace.TextEditorRosetta=i.Base.create("TextEditorRosetta",i.Squarespace.TextEditorBase,[],{initializer:function(){this.publish("mouseDown");this.publish("contentUpdated");this._debouncedFireUpdate=l(this.fireUpdate.bind(this),500,{leading:true,trailing:true});this._finishUpdates=this._debouncedFireUpdate.cancel;this._bindVisualViewportListener();this.execCommand=function(){i.Squarespace.TextEditor.superclass.execCommand.apply(this,arguments);return true}.bind(this);this.onOpenItemConfigEditor=function(){this.set("savedSelectionPos",this.editor.getSelectionPos());this.set("isItemConfigEditorOpen",true);this._renderToolbar()}.bind(this);this.onCloseItemConfigEditor=function(){this.set("savedSelectionPos",null);this.set("isItemConfigEditorOpen",false);this._renderToolbar()}.bind(this)},_resetScroll:p(function(){window.scrollTo(0,1)},150),_bindVisualViewportListener:function(){window.visualViewport&&i.UA.ios&&this.get("isMobile")&&window.visualViewport.addEventListener("scroll",this._resetScroll.bind(this))},_unbindVisualViewportListener:function(){window.visualViewport&&window.visualViewport.removeEventListener("scroll",this._resetScroll)},initializeEditor:function(){var e=this.get("contentBox").getDOMNode();var t={bottom:60};var a;try{a=document.querySelector("iframe#sqs-site-frame").contentDocument.body.querySelector('[class*="sqs-cookie-banner-v2"]')}catch(e){console.error("Unable to find the cookie banner",e)}a&&a.classList.contains("BOTTOM")&&(t.bottom=a.getBoundingClientRect().height);this.editor=new n({mountNode:e,editable:this.get("editable"),state:this.createState(),scrollMargin:t,scrollThreshold:t,onStateChange:this._onStateChange.bind(this),handleDOMEvents:{mousedown:this._handleMouseDown.bind(this),click:this._stopEventPropagation.bind(this),dblclick:this._stopEventPropagation.bind(this),pointerdown:this._stopEventPropagation.bind(this),contextmenu:this._stopEventPropagation.bind(this)},keymap:i.merge({},this.get("keymap"))})},initializeMenu:function(){this._renderToolbar()},destroyMenu:function(){this._unbindVisualViewportListener();if(s){s.ownerDocument.body.removeChild(s);s=null}},_renderToolbar:function(e){if(!s){var t=this.get("boundingBox").getDOMNode().ownerDocument;s=t.createElement("div");s.classList.add("toolbar-mount-node");s.classList.add("sqs-prevent-block-focus-change");t.body.appendChild(s)}var a=this.editor.getMenuState(e);var i=r.createElement(g,{fixedMobileToolbar:true,menuProps:{anchorNode:this.editor.view.dom,editor:this.editor,isVisible:a.viewFocused||this.get("isItemConfigEditorOpen"),menuState:a,execCommand:this.execCommand,onOpenItemConfigEditor:this.onOpenItemConfigEditor,onCloseItemConfigEditor:this.onCloseItemConfigEditor,preventEditorBlur:this.editor.preventEditorBlur},mountAt:s,toolbarOptions:this.get("menuItems").map(function(e){if("object"===typeof e&&e.isDivider)return"divider";return e}),zIndex:99999});o.render(i,s)},_handleMouseDown:function(e,t){this._stopEventPropagation(e,t);this.fire("mouseDown",t);u.getState().isSettingsOpen&&d.setIsSettingsOpen({openSettingsId:null,openSectionNode:null,isSettingsOpen:false,openSectionToolbarRect:null})},_stopEventPropagation:function(e,t){t.stopPropagation()},_onStateChange:function(e,t){this.editor.updateState(e);this._renderToolbar(e);t.docChanged&&this._debouncedFireUpdate()}},{ATTRS:{isItemConfigEditorOpen:{value:false},menuItems:{value:[]},contentNode:{},isMobile:{valueFn:function(){var e=f.getBreakpoint(h.breakpoints)||{};return"mobile"===e.platform}}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base"]})},7812:function(e,t,a){var i=a(100);var s=a(710);var r=a(1246);var o=a(1698);YUI.add("squarespace-text-editor-damask",function(n){var a=s.default;n.namespace("Squarespace");n.Squarespace.TextEditorDamask=n.Base.create("TextEditor",n.Squarespace.TextEditorBase,[],{initializer:function(){this.publish("mouseDown");this.publish("contentUpdated");this._debouncedFireUpdate=i(this.fireUpdate.bind(this),500,{leading:true,trailing:true});this._finishUpdates=this._debouncedFireUpdate.cancel},initializeMenu:function(){var e=this.get("MenuConstructor");if(e){var t=this.editor.getMenuState();this.menu=new e({editor:this.editor,editorId:this.get("id"),type:this.get("type"),items:this.get("menuItems"),itemStates:t.itemStates,editorFocused:t.viewFocused,selectionType:t.selectionType,execCommand:this.execCommand.bind(this),preventEditorBlur:this.editor.preventEditorBlur,editorNode:this.get("contentBox").getDOMNode(),preserveCurrentSelection:this._saveCurrentSelection.bind(this)})}},updateMenu:function(e,t){if(this.menu){var a=this.editor.getMenuState(e);var i=t.coordsAtPos(e.selection.from,e.selection.to);this.menu.updateState(n.merge(a,{items:this.get("menuItems"),editorNode:this.get("contentBox").getDOMNode(),editorId:this.get("id"),editorSelectionCoords:{x:i.left,y:i.bottom}}))}},destroyMenu:function(){if(this.menu){this.menu.destroyMenu(this.get("id"));this.menu=null}},_fireMenuEvent:function(e){if(this.menu&&this.menu.handleCommand)return this.menu.handleCommand(e);return false},getMenuKeymap:function(){var a=this.get("MenuConstructor");var e={};a&&a.KEY_COMMAND_MAP&&(e=Object.keys(a.KEY_COMMAND_MAP).reduce(function(e,t){e[t]=this._fireMenuEvent.bind(this,a.KEY_COMMAND_MAP[t]);return e}.bind(this),{}));return e},_handlePaste:function(){return true},initializeEditor:function(){var e=this.getMenuKeymap();var t=this.get("contentBox").getDOMNode();this.editor=new a({mountNode:t,editable:this.get("editable"),state:this.createState(),onStateChange:this._onStateChange.bind(this),handleDOMEvents:{mousedown:this._handleMouseDown.bind(this),click:this._stopEventPropagation.bind(this),dblclick:this._stopEventPropagation.bind(this),pointerdown:this._stopEventPropagation.bind(this),contextmenu:this._stopEventPropagation.bind(this),paste:this._handlePaste},keymap:n.merge({},e,this.get("keymap"))})},_handleMouseDown:function(e,t){this._stopEventPropagation(e,t);this.fire("mouseDown",t);o.getState().isSettingsOpen&&r.setIsSettingsOpen({openSettingsId:null,openSectionNode:null,isSettingsOpen:false,openSectionToolbarRect:null})},_stopEventPropagation:function(e,t){t.stopPropagation()},_onStateChange:function(e,t){this.editor.updateState(e);this.updateMenu(e,this.editor.view);t.docChanged&&this._debouncedFireUpdate()}},{ATTRS:{menuItems:{value:[]},MenuConstructor:{}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base"]})},7813:function(e,t,a){var i=a(6713);YUI.add("squarespace-text-editor",function(e){e.namespace("Squarespace");e.Squarespace.TextEditor=i.isRosettaRichTextToolbarLayoutEngineEnabled()?e.Squarespace.TextEditorRosetta:e.Squarespace.TextEditorDamask},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base","squarespace-text-editor-rosetta","squarespace-text-editor-damask"]})},7814:function(e,t,a){var y=a(152);var S=a(425);var q=a(710);var _=a(1072);var C=a(2204);var E=a(2877);var k=a(2021);var w=a(24).t;var T=a(515).GRID_PX;var I={isDivider:true};YUI.add("squarespace-text-editor-toolbar",function(i){i.namespace("Squarespace");var d=q.COMMAND;var e=q.keybindings;var r=q.keybindingsToDisplay;var o='<span class="{cssPrefix}-divider"></span>';var l='<label title="{title}" for="{name}" class="{cssPrefix}-select"><span class="{cssPrefix}-select-facade {placeholderClass}">{facadeContent}</span><select name="{name}">{options}</select></label>';var c='<option value="{command}" {selected} {disabled}>{title}{hotKey}</option>';var u='<button type="button" title="{title}{hotKey}" {value} {disabled} class="{cssPrefix}-button {cssPrefix}-button-{icon} {activeClass}">{children}</button>';var t=i.Lang.sub('<html style="height:100%;margin:0;"><body contenteditable=true style="min-height:100%;margin:0;padding:{grid}px;box-sizing:border-box;"><script>document.addEventListener("DOMContentLoaded", function() {document.body.addEventListener("paste", function(e) {e.preventDefault();var text = e.clipboardData.getData("text/plain");document.execCommand("insertText", false, text);});});<\/script></body></html>',{grid:T});var a={};a[e.link]=d.LINK;var g=["editorNode","items","visible","itemStates","selectionType","showLinkPreview","linkId"];function p(e){return i.Lang.sub(e,i.merge.apply(null,Array.prototype.slice.call(arguments,1)))}function h(e,a){return i.Array.find(e,function(e){var t=a[e.command];return t&&true===t.active})}function n(e){e=e||[];var t=e.filter(function(e){return e.items});return t.reduce(function(e,t){e[t.name]=t;return e},{})}function s(e){e=e||{};e=i.merge({hasAlignment:true},e);var t=[k.Items.UNDO,k.Items.REDO,k.Items.BOLD,k.Items.ITALIC];e.hasLink&&t.push(k.Items.LINK);if("classic"===e.type){t.push(I);e.hasAlignment&&t.push(k.Items.ALIGN_LEFT,k.Items.ALIGN_CENTER,k.Items.ALIGN_RIGHT);t.push(k.Items.STYLES,k.Items.QUOTE,k.Items.ORDERED_LIST,k.Items.UNORDERED_LIST,k.Items.OUTDENT,k.Items.INDENT)}t.push(I,k.Items.PASTE_PLAIN,k.Items.CLEAR_FORMAT);return t}var f=i.Squarespace.TextEditorToolbar=i.Base.create("TextEditorToolbar",i.Squarespace.SSWidget,[],{initializer:function(){this.updatePositionOnScroll=this._updatePositionOnScroll.bind(this);this.closeOnScroll=this._closeOnScroll.bind(this);this.updatePositionOnResize=S(this._updatePositionOnResize.bind(this),40,{leading:true,trailing:true})},renderUI:function(){this.get("boundingBox").addClass(E.NONINTERACTIVE_CLASSNAME);this.renderItems();this.renderLinkPicker()},bindUI:function(){var e=this.get("contentBox");document.onpointerdown?e.on("pointerdown",this.handleMouseDown,this):e.on("mousedown",this.handleMouseDown,this);e.on("change",this.handleSelectChange,this)},syncUI:function(){if(this.get("visible")){this.cleanAfterPositioning();this.setupPositioning();this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,this.get("itemStates")))}},syncAfterChange:function(e,t,a){if(!e.visible&&!t.visible)return;var i=this.get("boundingBox");if(!t.visible){this.cleanAfterPositioning();i.addClass(this.getClassName("hidden"));return}if(a||e.items!==t.items){this.setAttrs({selects:n(t.items),forceReRender:false});this.renderItems()}else e.itemStates!==t.itemStates&&this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,t.itemStates));if(e.visible){if(e.editorNode!==t.editorNode||e.items!==t.items){this.cleanAfterPositioning();this.setupPositioning()}}else{i.removeClass(this.getClassName("hidden"));this.setupPositioning()}e.showLinkPreview===t.showLinkPreview&&e.linkId===t.linkId||this.toggleLinkPreview(t.showLinkPreview)},destructor:function(){if(this.linkFlyout){this.linkFlyout.destroy();this.linkFlyout=null}this.cleanAfterPositioning()},destroyMenu:function(){this.destroy(true)},renderItems:function(){var n=this.get("itemStates");var s={cssPrefix:this.constructor.CSS_PREFIX};var e=this.get("items")||[];var t=e.map(function(e){if(e.isDivider)return p(o,s);if(e.items){var t=h(e.items,n);return p(l,s,e,{placeholderClass:t?"":this.getClassName("select-placeholder"),facadeContent:t?t.title:e.placeholder||e.items[0].title,options:e.items.map(function(e){var t=n[e.command];var a=r[e.command];return p(c,e,{selected:t&&t.active?"selected":"",disabled:t&&false===t.enabled?"disabled":"",hotKey:a?" ("+a+")":""})}).join("")})}var a=n[e.command];var i=r[e.command];return p(u,s,e,{activeClass:a&&a.active?this.getClassName("button-active"):"",value:e.command?'value="'+e.command+'"':"",disabled:false===e.enabled?"disabled":"",children:e.children||e.title,hotKey:i?" ("+i+")":""})}.bind(this)).join("");this.get("contentBox").setHTML(t)},resolveLinkAttrs:function(e){return e[0]?e[0]:e},updateState:function(e){var t=e.itemStates;var a=t[d.LINK];var i=e.viewFocused;var n=false;var s=this.get("linkId");if(a&&true===a.active){var r=this.resolveLinkAttrs(a.attrs);n=!!r.href;s=r.href?r.href:null}var o=e.editorId||this.get("editorId");var l=this.get("forceReRender")||this.get("editorId")!==o;var c=this.getAttrs(g);i&&this.linkFlyout.get("isEditorOpen")&&this.linkFlyout.close();this.setAttrs({editorId:o,editorNode:e.editorNode||this.get("editorNode"),items:e.items,visible:i||!!this.linkFlyout&&this.linkFlyout.get("isEditorOpen"),itemStates:t,selectionType:e.selectionType,showLinkPreview:i&&n,cursorAtLink:n,editorSelectionCoords:e.editorSelectionCoords,linkId:s,forceReRender:l});this.syncAfterChange(c,this.getAttrs(g),l)},handleCommand:function(e){if(!e)return false;switch(e){case d.LINK:this.toggleLinkEditor();return true;case k.Items.PASTE_PLAIN.command:this.openPasteModal();return true}return this.get("execCommand").call(this,e)},renderLinkPicker:function(){var e=this.get("itemStates")[d.LINK];if(!e||!this.get("hasLink"))return;this.linkFlyout=new window.top.Y.Squarespace.Flyout.LinkEdit({getSelection:function(){return i.config.win.getSelection()}});this.linkFlyout.after(["updateLink","removeLink"],function(){this.get("execCommand").call(this,d.LINK,{href:this.linkFlyout.get("linkUrl")||null,target:this.linkFlyout.get("newWindow")?"_blank":null,textContent:this.linkFlyout.get("textContent")},{skipFocus:true})}.bind(this));this.linkFlyout.on("close",function(){this.get("preserveCurrentSelection").call(this,null)}.bind(this))},updateMenuItem:function(e,t){var a=t.getAttribute("for");var i=t.get("value");var n=this.get("selects");var s=a&&n[a];s?this.updateSelect(t,h(s.items,e),s.placeholder||s.items[0].title):i&&e[i]&&this.updateButton(t,e[i].enabled,e[i].active)},updateSelect:function(e,t,a){var i=e.one(this.getSelector("select-facade"));i.setContent(t?t.title:a);i.toggleClass(this.getClassName("select-placeholder"),!t);var n=e.one("select");n.set("value",t?t.value:"")},updateButton:function(e,t,a){if(false===t){e.removeClass(this.getClassName("button-active"));e.set("disabled",true)}else{e.toggleClass(this.getClassName("button-active"),!!a);e.removeAttribute("disabled")}},handleMouseDown:function(e){e.stopPropagation();if(this.linkFlyout.get("isEditorOpen")){this.linkFlyout.setAttrs({isEditorOpen:false});this.toggleLinkEditor()}e.target.ancestor(this.getSelector("select"),true,this.getSelector("content"))?this.get("preventEditorBlur").call(this):e.preventDefault();"BUTTON"===e.target.get("nodeName")&&this.handleButtonClick(e)},handleButtonClick:function(e){this.handleCommand(e.target.get("value"))},handleSelectChange:function(e){var t=e.target;t&&"SELECT"===t.get("nodeName")&&this.handleCommand(t.get("value"))},getTextContent:function(){var e=this.get("getEditor").call(this);var t=e.view.state;var a=q.getClosestMarkInfo(t.schema.marks[d.LINK],t);var i=a.mark;var n=a.from;var s=a.to;var r=t.selection;var o=r.from;var l=r.to;i&&o>n&&(o=n);i&&l<s&&(l=s);var c=t.doc.cut(o,l).textContent;return c},toggleLinkEditor:function(){if(!this.linkFlyout)return;var e=this.get("itemStates");if(this.linkFlyout.get("isEditorOpen"))this.linkFlyout.close();else if("range"===this.get("selectionType")||e.link.active){var t=this.get("itemStates")[d.LINK];var a=t.attrs?t.attrs[0]||t.attrs:{};this.linkFlyout.setAttrs({anchor:this.get("linkButton"),editorSelectionCoords:this.get("editorSelectionCoords"),textContent:this.getTextContent(),cursorAtLink:this.get("cursorAtLink"),forceUpdate:a.href&&!t.active});this.get("preserveCurrentSelection").call(this);this.linkFlyout.openEditor(a.href,"_blank"===a.target,null,null)}},toggleLinkPreview:function(e){if(!this.linkFlyout)return;var t=this.get("itemStates")[d.LINK];if(e){var a=t.attrs?t.attrs[0]||t.attrs:{};this.linkFlyout.setAttrs({editorSelectionCoords:this.get("editorSelectionCoords"),cursorAtLink:this.get("cursorAtLink"),textContent:this.getTextContent()});this.linkFlyout.openPreview(a.href,"_blank"===a.target,this.get("linkId"))}else this.linkFlyout.get("isPreviewOpen")&&this.linkFlyout.close()},openPasteModal:function(){var e=i.Squarespace.Widgets.ConfirmationMedia;var s=new e({style:e.TYPE.CONFIRM_OR_CANCEL,mediaType:e.TYPE_MEDIA.IFRAME,mediaSrc:{srcDoc:t},className:this.getClassName("paste-modal")+" "+E.DISABLE_DRAG_SELECTION_CLASSNAME,"strings.confirm":w("OK"),"strings.cancel":w("Cancel"),"strings.title":w("Paste as Plain Text"),"strings.message":w("Paste into the box and hit OK. Squarespace will strip out special formatting and insert this content to your document as plain text.")});s.once("show",function(){var e=s.get("boundingBox").one("iframe").getDOMNode();e.contentDocument.body.focus();e.contentDocument.body.contentEditable=true});s.once("confirm",function(){var e=s.get("boundingBox").one("iframe").getDOMNode();var t=e.contentDocument.body;var a=f.PLAIN_TEXT_SCHEMA;if(!a){var i=k.Schemas[k.SchemaTypes.PLAIN_TEXT];a=q.EditorSchema.create(i);f.PLAIN_TEXT_SCHEMA=a}var n=q.cleanHTML(a,t);this.get("execCommand").call(this,"insertHTML",{html:n})},this)},setupPositioning:function(){var e=this.get("editorNode");var t=C(e,false,true)||i.config.doc.body;this.set("scrollNode",t);this.calculatePosition();this.updatePosition();_.addScrollListener(t,this.updatePositionOnScroll);_.addScrollListener(t,this.closeOnScroll);window.addEventListener("resize",this.updatePositionOnResize)},cleanAfterPositioning:function(){var e=this.get("scrollNode");if(e){_.removeScrollListener(e,this.updatePositionOnScroll);_.removeScrollListener(e,this.closeOnScroll)}this.updatePositionOnResize.cancel();window.removeEventListener("resize",this.updatePositionOnResize)},calculatePosition:function(){var e=this.get("boundingBox");var t=this.get("editorNode");var a=this.get("scrollNode");var i=a.ownerDocument.defaultView;var n={top:0,bottom:i.innerHeight,left:0,right:i.innerWidth};var s=t.getBoundingClientRect();var r=["HTML","BODY"].indexOf(a.nodeName)>-1?n:a.getBoundingClientRect();var o=e.get("region");var l=o.height;var c=o.width;this._pos={minTop:Math.max(n.top,r.top)+5,maxTop:Math.min(n.bottom,r.bottom)-5-l,top:s.top-T-l,left:s.left,minLeft:Math.max(n.left,r.left)+T,maxLeft:Math.min(n.right,r.right)-c-T}},updatePosition:function(){var e=this.get("boundingBox");var t=e.getDOMNode();if(this.get("destroyed")||!t||!t.ownerDocument.defaultView)return;e.setStyle("left",y(this._pos.left,this._pos.minLeft,this._pos.maxLeft));e.setStyle("top",y(this._pos.top,this._pos.minTop,this._pos.maxTop))},_updatePositionOnScroll:function(e,t){this._pos.top+=t;this.updatePosition()},_closeOnScroll:function(e,t){var a=this.get("editorNode");if(!a)return;var i=a.getBoundingClientRect();if(i.top>=0&&i.top<=window.innerHeight||i.bottom>=0&&i.bottom<=window.innerHeight||i.top<0&&i.bottom>=window.innerHeight)return;this.set("visible",false)},_updatePositionOnResize:function(){this.calculatePosition();this.updatePosition()},getClassName:function(e){return f.CSS_PREFIX+"-"+e},getSelector:function(e){return"."+this.getClassName(e)}},{CSS_PREFIX:"sqs-rte-toolbar",KEY_COMMAND_MAP:a,PLAIN_TEXT_SCHEMA:null,getItems:s,ATTRS:{cssPrefix:{valueFn:function(){return f.CSS_PREFIX}},render:{valueFn:function(){return i.config.doc.body}},height:{value:33},visible:{value:false},editorNode:{},scrollNode:{},type:{value:"classic"},selectionType:{},selects:{valueFn:function(){return n(this.get("items"))}},linkButton:{getter:function(){return this.get("contentBox").one(this.getSelector("button-"+k.Items.LINK.icon))}},linkId:{},items:{valueFn:function(){return s(this.getAttrs(["type","hasLink"]))||[]}},itemStates:{value:{}},hasLink:{value:true},showLinkPreview:{valueFn:function(){var e=this.get("itemStates");var t=e[d.LINK]&&e[d.LINK].attrs||{};var a=t[0]?t[0].href:t.href;return!!a}},getEditor:{},preventEditorBlur:{},execCommand:{},preserveCurrentSelection:{}}});var m;var v={};var b=i.Squarespace.Singletons.TextEditorToolbar=function(e){var t=e.editorId;v[t]=e;if(!m){m=new f(i.merge(e,{getEditor:function(){if(!v[this.get("editorId")])return{};return v[this.get("editorId")].editor},preventEditorBlur:function(){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].preventEditorBlur()},execCommand:function(e,t,a){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].execCommand(e,t,a)},preserveCurrentSelection:function(e){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].preserveCurrentSelection(e)}}));m.destroyMenu=function(e){delete v[e];if(0===i.Object.size(v)){m.destroy(true);m=null}}}return m};b.KEY_COMMAND_MAP=a;b.getItems=s},"1.0",{requires:["base","squarespace-ss-widget","squarespace-widgets-confirmation-media"]})},7815:function(e,t,a){var n=a(24).t;var r=a(802);var o=a(595);YUI.add("squarespace-widgets-confirmation-media",function(s){s.namespace("Squarespace.Widgets");var i={IMAGE:0,VIDEO:1,IFRAME:2};var t=s.Squarespace.Widgets.ConfirmationMedia=s.Base.create("confirmation",s.Squarespace.Widgets.Confirmation,[],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("mediaType");e===i.IMAGE?this._renderImage():e===i.VIDEO?this._renderVideo():e===i.IFRAME&&this._renderIframe()},_renderImage:function(){this._renderMediaNodeFromHTML('<img src="'+this.get("mediaSrc")+'"/>',this.show)},_renderVideo:function(){if(this.get("videoResolver"))this._getHTMLFromVideoResolver(function(e){this._renderMediaNodeFromHTML(e,this.show)}.bind(this));else{var e=this.get("mediaSrc");Array.isArray(e)||(e=[e]);this._renderMediaNodeFromHTML(r('<video preload="auto" autoplay loop>{sub1}</video>',{sub1:e.reduce(function(e,t){var a=t.src||t;var i=t.type||"video/"+a.match(/\.([^\.]+)$/)[1];return r('{html}<source src="{src}" type="{type}"/>',{html:e,src:a,type:i})},"")}),this.show)}},_getHTMLFromVideoResolver:function(t){this.get("videoResolver").process(this.get("mediaSrc"),{onSuccess:function(e){if(!e||!e.html){console.error("[ConfirmationMedia] no data or html passed from oembed resolver",e);return}t(e.html)},onFailure:function(e){console.warn("[ConfirmationMedia]",e)},onTimeout:function(e){console.warn("[ConfirmationMedia]",e)}},this)},_renderIframe:function(){var e=this.get("mediaSrc");var t="";e.srcDoc?t="srcDoc='"+e.srcDoc+"'":e.src?t="src='"+e.src+"'":"string"===typeof e&&(t="src='"+e+"'");this._renderMediaNodeFromHTML("<iframe "+t+"/>",this.show)},_renderMediaNodeFromHTML:function(e,t){var a=s.Node.create(e);var i=["IMG","IFRAME"].indexOf(a.get("nodeName"))>-1;if(i){a.once("load",function(e){a.detachAll();t.call(this)},this);a.once("error",function(e){a.detachAll();console.error("[ConfirmationMedia] Could not load image",e)})}var n=this.get("mediaDimension");s.Array.each(["width","height"],function(e){n[e]&&a.setStyle(e,n[e]+"px")});this.set("mediaNode",a.appendTo(this.get("contentBox").one(".media")));i||t.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="media"></div><div class="buttons"></div>',TYPE:s.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:s.Squarespace.Widgets.Confirmation.ANCHOR,TYPE_MEDIA:i,ATTRS:{className:{value:"with-media"},visible:{value:false},style:{value:s.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:n("Okay, got it.")},width:{value:null,getter:function(e){var t=this.get("mediaDimension");var a=this.get("mediaNode");if(e)return e;if(t&&t.width)return t.width;if(a)return a.get("naturalWidth")||a.get("width")},lazyAdd:false},showOverlay:{value:true},position:{value:s.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER},mediaType:{value:i.IMAGE,validator:function(e){return s.Object.hasValue(i,e)}},mediaSrc:{value:"",setter:function(e){if(e&&"string"===typeof e&&!o.isInternalUrl(e))return o.ensureProtocol(e);return e}},mediaDimension:{value:{width:null,height:null}},videoResolver:{valueFn:function(){if(this.get("mediaType")!==i.VIDEO)return null;var e=s.Squarespace.oEmbedResolvers.youtube;var t=s.Squarespace.oEmbedResolvers.vimeo;var a=this.get("mediaSrc");if(a&&"string"===typeof a){if(e.canProcess(a,"video"))return e;if(t.canProcess(a,"video"))return t}return null},validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.EmbedResolver)},mediaNode:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNode}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-oembed-resolvers","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},7816:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-html-editor",function(a){var e=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];a.namespace("Squarespace.Block.Editor").Html=a.Base.create("block-html-editor",a.SQS.LayoutEngine.Block.Editor.Base,[a.SQS.LayoutEngine.Block.MixinSplitable,a.SQS.LayoutEngine.Block.MixinCoalesceable],{insertContentIntoModel:function(e){this._model.set("source",e);this._model.set("html",e)},_onBlur:function(){this._disableEditing()},beforeLayoutDrag:function(){var e=this.get("host").contentHtml.contentEditor;e&&e.beforeLayoutDrag();a.SQS.LayoutEngine.Block.MixinSplitable.prototype.beforeLayoutDrag.call(this)},afterLayoutDrag:function(){a.SQS.LayoutEngine.Block.MixinSplitable.prototype.afterLayoutDrag.call(this);var e=this.get("host").contentHtml.contentEditor;e&&e.afterLayoutDrag()},getBlockLevelElements:function(){var t=this.get("selectorsForInsertPoints");return new a.NodeList(a.Array.filter(this._cb.one(".sqs-html-content").get("children").getDOMNodes(),function(e){e=a.one(e);return e.test(t)&&e.getContent()}))},_afterEditingChange:function(e){this._bb.toggleClass("sqs-block-editing",!!e.newVal)},_isCoalesceable:function(e){var t=a.Widget.getByNode(e);return!t.get("isNewBlock")&&!t.get("model").get("floatDir")&&e.get("text")!==t.contentHtml.get("placeholderText")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Text")},editingEvent:{value:"focus"},editingButtons:{value:true},includeEdit:{value:false},minHSize:{value:1},selectorsForInsertPoints:{valueFn:function(){return a.Array.map(e,function(e){return".sqs-html-content > "+e}).join(", ")}},selectorsForDropZone:{valueFn:function(){return a.Array.map(e,function(e){return".sqs-html-content:not(.rte) > "+e}).join(", ")}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","@sqs/layout-engine/layout-drop"]})},7817:function(e,t){YUI.add("@sqs/layout-engine/block-mixin-coalesceable",function(i){i.namespace("SQS.LayoutEngine.Block");i.SQS.LayoutEngine.Block.MixinCoalesceable=i.Base.create("block-coalesceable",i.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName());i.Do.after(this._attemptToCoalesce,this,"cleanBlock")},insertContentIntoModel:function(e){throw new Error("Coalesceable requires insertContentIntoModel method implementation")},_attemptToCoalesce:function(e){if(this.get("host").get("isNewBlock")||this.get("host").get("model").get("floatDir"))return;var t=this._getCoalescableSiblingGroup();t.length>1&&i.Widget.getByNode(t[0]).blockEditor.coalesceFollowingBlocks()},_getCoalescableSiblingGroup:function(e){var t=e||this._bb;var a=t.ancestor().get("children");var i=a.size();var n=a.indexOf(t);var s="."+this.get("host").getClassName()+":not(.sqs-destroyme)";var r=t.test(s)?[t]:[];var o;if(0===i)return r;if(n>0)for(o=n-1;o>=0&&a.item(o).test(s)&&this._isCoalesceable(a.item(o));o--)r.unshift(a.item(o));if(n<i-1)for(o=n+1;o<i&&a.item(o).test(s)&&this._isCoalesceable(a.item(o));o++)r.push(a.item(o));return r},_isCoalesceable:function(e){console.warn("Please implement the mixer's own _isCoalesceable method.");return true},coalesceFollowingBlocks:function(){var e=this._getCoalescableSiblingGroup();if(0!==e.indexOf(this._bb))return;var t=i.Array.reduce(e,"",function(e,t){var a=i.Widget.getByNode(t);t!==this._bb&&a.queueForDestruction({coalescing:true});return e+"\n"+a.get("model").get("html").trim()},this);this.insertContentIntoModel(t);this.get("host").syncUI()}})},"1.0",{requires:["base","node","widget"]})},7818:function(e,t){YUI.add("@sqs/layout-engine/block-mixin-splitable",function(n){var e=e||function(){};var t=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];n.namespace("SQS.LayoutEngine.Block");n.SQS.LayoutEngine.Block.MixinSplitable=n.Base.create("block-splitable",n.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName())},split:function(a,e){var t=a.ancestor().get("children");var i=false;a.ancestor(".sqs-block")&&a.ancestor(".sqs-block")===this._bb||(i=true);var n="";var s="";t.each(function(e,t){if(i)s+=e.getDOMNode().outerHTML;else{e===a&&(i=true);n+=e.getDOMNode().outerHTML}},this);if(s.length>0){var r=new(this.get("host").constructor)({editable:this.get("host").get("editable"),render:false,isNewBlock:false,editMode:this.get("host").get("editMode"),editorConfig:{defaultEditingMode:false},editController:this.get("host").get("editController")});r.render(this._bb.ancestor(".sqs-layout"));r.blockEditor.insertContentIntoModel(s);r.syncUI();this.insertContentIntoModel(n);this.get("host").syncUI();this._bb.insert(r.get("boundingBox"),"after");var o=this._bb.ancestor(".sqs-layout").LayoutBuilder;o.registerBlock(r)}this._bb.insert(e,"after")},insertContentIntoModel:function(e){throw new Error("Splitable requires insertContentIntoModel method implementation")},getBlockLevelElementsForDropZone:function(){var e=this.get("selectorsForDropZone");var t=this._cb.all(e);return t},getOverlays:function(){return this.get("host").get("boundingBox").all(".sqs-content-overlay")},_initLayoutDrop:e,_updateDropOverlays:function(){var e=n.DD.DDM.activeDrag;if(this.get("destroyed")||!e||!e.get("node").inDoc(n.config.doc))return;this.overlays&&this.overlays.length&&this._destroyDropOverlays();var i=new n.NodeList;e.get("node")!==this._bb&&(i=this.getBlockLevelElementsForDropZone());i.size()<1&&(i=n.all(this._bb));this.overlays=n.Array.map(this._addOverlayDOMNodes(i),function(e,t){var a=i.item(t);return{node:n.one(e),alignNode:a,regionData:this._getRegionData(a,i.item(t-1),i.item(t+1)),drop:null}},this);this._positionOverlayNodes()},_addOverlayDOMNodes:function(e){var t=e.size();var a=[];while(t-- >0)a.push(n.DOM.create('<div class="sqs-content-overlay">'));this._bb.append(a);return a},_getRegionData:function(e,t,a){var i=this._bb.get("region");var n=a?a.get("region"):{};var s=t?t.get("region"):{};var r=e.get("region");var o=t?r.top:i.top;s.height&&(o-=(o-s.bottom)/2);var l=a?r.bottom:i.bottom;n.height&&(l+=(n.top-r.bottom)/2);return{height:l-o,top:o-i.top,isFirstContent:!t,isLastContent:!a}},_positionOverlayNodes:function(){n.Array.each(this.overlays,function(e){var t=e.node;var a=e.regionData;t.setData("alignNode",e.alignNode);t.setData("isAdjacentToBlockEdge",{top:a.isFirstContent,bottom:a.isLastContent});t.setStyles({top:a.top,height:a.height});this.get("lockedLayout")||(e.drop=new n.SQS.LayoutEngine.Layout.Drop({node:t,groups:["blocks"],locked:false}));t.on("click",this._destroyDropOverlays,this)},this)},_destroyDropOverlays:function(){if(!this.overlays)return;n.Array.each(this.overlays,function(e){n.Lang.isValue(e.drop)&&e.drop.destroy();e.node.detach();e.node.remove(true)});this.overlays=null},beforeLayoutDrag:function(){this._updateDropOverlays()},afterLayoutDrag:function(){this._destroyDropOverlays()},_afterDropZoneLockedChange:function(t){n.Array.each(this._overlays,function(e){e.drop.set("lock",t.newVal)});t.newVal?this._destroyDropOverlays():this._updateDropOverlays()},destructor:function(){this._destroyDropOverlays()}},{ATTRS:{selectorsForInsertPoints:{valueFn:function(){return n.Array.map(t,function(e){return".sqs-block-content > "+e+", .sqs-html-content > "+e}).join(", ")}},selectorsForDropZone:{valueFn:function(){return n.Array.map(t,function(e){return".sqs-block-content > "+e+", .sqs-html-content:not(.rte) > "+e}).join(", ")}}}})},"1.0",{requires:["base","node","widget","@sqs/layout-engine/layout-drop"]})},7819:function(e,t,a){var i=a(87);var n=a(24).t;var r=a(114);var o=a(1342);var s=a(729);var l=s.createLogger("block/image","orange",false);YUI.add("squarespace-block-image",function(s){s.namespace("Squarespace.Block");var t=s.Squarespace.Block.Image=s.Base.create("block-image",s.Squarespace.Block.ImageBase,[],{bindUI:function(){t.superclass.bindUI.call(this);this.get("model").after("imageIdChange",this.syncContentImage,this);this.get("model").after("lightboxChange",this.syncLightbox,this)},syncUI:function e(){t.superclass.syncUI.call(this);this.syncLightbox()},syncContentImage:function e(t){var a=t.newVal;var i=this.contentImage.get("model");var n=i.get("imageId");if(n!==a){l("syncContentImage (from model imageIdChange)",{nextImageId:a,prevImageId:n});i.reset();i.set("imageId",a)}},syncLightbox:function(){this.get("contentBox").unplug(s.Squarespace.Lightbox2Plug.NS);var e=this.get("model");if(this.get("editable")||!e.get("lightbox"))return;var t=e.get("description.html")||"";var a=this.contentImage.get("model");var i=s.Node.create("<img/>");i.setAttribute("data-src",a.get("baseAssetUrl"));i.setAttribute("data-image-focal-point",a.get("focalPoint"));var n=a.get("dimensions");s.Lang.isObject(n)&&i.setAttribute("data-image-dimensions",n.width+"x"+n.height);this.get("contentBox").plug(s.Squarespace.Lightbox2Plug,{lightboxOptions:{theme:e.get("lightboxTheme"),content:i,meta:t}})}},{ATTRS:{editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||r.isFeatureEnabled(i.ROSETTA_BLOCK_EDITORS))return s.Squarespace.Block.Editor.Schema;return s.Squarespace.Block.Editor.Image}},imageContentEditor:{valueFn:function(){return s.Squarespace.Content.Image.Editor}},addButtonText:{value:n("Add Button Text")}}})},"2.0",{requires:["base","squarespace-block-image-base","squarespace-block-image-editor","squarespace-block-schema-editor","squarespace-block-content-image-editor"]})},7820:function(e,t,a){var i=a(522);YUI.add("squarespace-block-image-base",function(s){s.namespace("Squarespace.Block");var e=s.Squarespace.Block.ImageBase=s.Base.create("block-image-base",s.SQS.LayoutEngine.Block.Image,[s.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){e.superclass.bindUI.call(this);this.on("editableChange",function(){this.get("contentBox").removeClass("sqs-text-ready")},this);this.get("model").after("imageIdChange",this.toggleContentCaption,this);this.get("model").after("descriptionChange",this.setCaptionFromGetty,this)},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("imageId");t?this.contentImage.after("image-loaded",e):e()},setCaptionFromGetty:function(e){if("getty"!==e.source)return;var t=e.newVal.html;var a=e.prevVal.html;if(t===a)return;var i=this.get("collectionId");if(!s.Lang.isString(i))return;var n=s.Squarespace.ContentCollectionCache.getById(i);n&&s.Squarespace.ContentCollectionUtils.isBlog(n)&&this.contentCaption.setContent(t)},toggleContentCaption:function(e){var t=e.newVal;this.contentCaption&&(t?this.contentCaption.show():this.contentCaption.hide())}},{ATTRS:{isImageBlockCardsEnabled:{getter:function(){var e=this.get("model").layout;var t=e?e.get("collectionId"):null;if(!t)return false;var a=s.Squarespace.ContentCollectionCache.getById(t);var i=a?s.Squarespace.ContentCollectionUtils.isPage(a):null;return!!i}},htmlContentEditor:{valueFn:function(){return s.Squarespace.Content.HtmlEditor}},htmlContentEditorType:{valueFn:function(){return i.isSevenOne()?"full":"simple"}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-image","squarespace-block-image-editor","squarespace-block-content-html-editor","squarespace-block-content-image-editor","squarespace-content-collection-utils","squarespace-premium-block-mixin"]})},7821:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-image-editor",function(n){var s=n.namespace("Squarespace.Block.Editor").Image=n.Base.create("image-block-editor-dialog-web",n.Squarespace.Block.Editor.ImageBase,[],{initializer:function(){this._initOverlay()},_syncResizable:function(){var e=this.get("contentImage").get("model");var t=e.get("imageId");var a=e.get("processing");var i=t&&!a&&n.Lang.isValue(this._model);i?s.superclass._syncResizable.apply(this,arguments):this._setBlockResizable(false)},_setBlockResizable:function(e){var t=this._hasResizablePlugin();s.superclass._setBlockResizable.apply(this,arguments);e&&!t&&this._bindResizeEvents()},_initOverlay:function(){var e=this.get("contentImage");this._overlay=n.Node.create('<div class="sqs-editing-overlay"></div>');e.get("contentBox").append(this._overlay);this._editingChangeHandle=e.on("editingChange",function(e){e.newVal?this._overlay.hide():this._overlay.show()},this)},syncUI:function(){if(!this.get("host").get("boundingBox").getDOMNode())return;this._syncResizable()},_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Image")},_initConfigDialog:function(){var e=s.superclass._initConfigDialog.call(this);var t=this.get("contentImage");e.setAttrs({imageContentModel:t.get("model"),imageContentWidget:t});return e},destructor:function(){this._editingChangeHandle.detach();this._overlay.remove(true)},_bindResizeEvents:function(){var e=this._model.get("designLayout");if(!this._model.get("imageId")||["card","overlap","collage"].includes(e))return;var t=this.get("host").contentImage.get("boundingBox").resize;this._registerEvent(t.on("handle-dblclick",this._resetOriginalAspectRatio,this),t.on("resize:start",this._resetEditingState,this),t.on("resize:end",this._restoreEditingState,this),t.after("resize:resize",this._updateAspectRatio,this),t.after("resize:end",this._updateAspectRatio,this))},_updateAspectRatio:function(){var e=this.get("contentImage");e.get("model").set("aspectRatio",this.get("renderedAspectRatio"))},_resetOriginalAspectRatio:function(){var e=this.get("contentImage");var t=this.get("originalAspectRatio");e.get("model").set("aspectRatio",t)},_resetEditingState:function(){var e=this.get("contentImage").contentEditor;this.resizeStartEditingState=e.get("editing");e.set("editing",false)},_restoreEditingState:function(){if("boolean"===typeof this.resizeStartEditingState){var e=this.get("contentImage").contentEditor;e.set("editing",this.resizeStartEditingState||false)}}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Image")},resizable:{value:true},resizeNode:{valueFn:function(){var e=this.get("contentImage");return e.get("boundingBox")}},contentImage:{valueFn:function(){var e=this.get("host");return e.contentImage}},renderedAspectRatio:{getter:function(){var e=this.get("contentImage");var t=e.get("boundingBox").get("region");return t&&t.height/t.width*100}},originalAspectRatio:{getter:function(){var e=this.get("contentImage");var t=e.get("model").get("dimensions");return t&&t.height/t.width*100}}}})},"1.0",{requires:["base","squarespace-block-image-editor-base","squarespace-block-image-editor-web-dialog","squarespace-damask-context-globals"]})},7822:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-image-editor-base",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.ImageBase=e.Base.create("image-block-editor-dialog-base",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var t=this.get("host");var e=t.get("model");var a=e.get("layout");if("inline"===a){var i=t.contentCaption;this._registerEvent(i.after("focusedChange",this._ensureOverlayCaptionIsVisible,this))}this._registerEvent(t.contentImage.get("model").after("imageIdChange",function(e){t.contentImage.emptyImageNode()},this));this._registerEvent(t.contentImage.get("model").after(["imageIdChange","processingChange"],function e(){this.syncUI()},this));this.onHostEvent("focusedChange",function(e){t.get("editController").alignInsertPoints()},this)},destructor:function(){if(this.drop){this.drop.destroy();this.drop=null}this.get("host").get("model").detach("blockEditor|*");this.get("host").contentImage.detach("blockEditor|*");this.get("host").contentCaption&&this.get("host").contentCaption.detach("blockEditor|*")},_bindDialogEvents:function(){t.superclass._bindDialogEvents.call(this);this.configDialog.get("dialog").on("dismiss",function(e){this._getContentItemEditor().set("editing",false)},this)},_getContentItemEditor:function(){return this.get("host").contentImage.contentEditor},_ensureOverlayCaptionIsVisible:function(e){var t=this.get("host").get("model").get("layout");if(t.indexOf("overlay")>-1&&e.newVal){this._editingButtons.hide();this.set("editingEvent",null)}else{this._editingButtons.show();this.get("editingEvent")||this.set("editingEvent",["dblclick","contextmenu"])}}},{ATTRS:{blockName:{value:i("Image")},editing:{value:false},editingOverlay:{valueFn:function(){return null}},editingTrueOnNewBlock:{value:false},editingEvent:{value:["dblclick","contextmenu"]}}})},"1.0",{requires:["base","squarespace-model-editor","@sqs/layout-engine/block-editor-base","squarespace-block-editor-dialog"]})},7823:function(e,t,a){var S=a(1697);var q=a(24).t;var _=a(5804);var i=a(2877);var n=a(729);var C=a(522);var E=a(114);var k=a(1715);var w=a(87);var T=a(6703);var l=a(1089);var g=n.createLogger("image-editor-web-dialog","orange",false);YUI.add("squarespace-block-image-editor-web-dialog",function(y){y.namespace("Squarespace.Block.ModelEditorDialog");var n=y.Squarespace.Block.ModelEditorDialog.Image=y.Base.create("blockImageEditorDialog",y.Squarespace.ModelEditorDialog,[y.Squarespace.Block.Mixins.BlockAnimationAnalytics],{_showDialog:function e(){var o=this.get("dialog");var t=this.get("id");o.detach(t+"|ready");o.on(t+"|ready",function(e){var t=o.getField("lightbox");var a=o.getField("imageLink");var i=o.getField("designLayout");var n=o.getField("combinationAnimation");var s=o.getField("individualImageAnimation");var r=o.getField("individualTextAnimation");this._syncOptionalFields();y.Lang.isValue(t)&&t.after("dataChange",this._syncOptionalFields,this);y.Lang.isValue(a)&&a.after("dataChange",this._syncOptionalFields,this);y.Lang.isValue(i)&&i.after("dataChange",this._syncOptionalFields,this);y.Lang.isValue(n)&&n.after("dataChange",this._syncOptionalFields,this);this.trackAnimationFieldsChange({fields:[n,s,r],eventName:"image_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData});this._syncContentImage();o.getField("image").after("dataChange",function e(){this._syncContentImage()},this)},this);o.on("gettyImageCaptionUpdate",function(e){this.get("model").set("description.html",e.caption,{source:"getty"})},this);var a=this.get("imageContentModel");a.on("focalPointChange",function(e){var t=o.getField("image");t&&t.setFocalPointPluginValue(e.newVal)});a.after("imageIdChange",this.imageContentModelAfterImageIdChange,this);a.after("filenameChange",this.imageContentModelAfterFilenameChange,this);n.superclass._showDialog.call(this)},imageContentModelAfterImageIdChange:function(e){var t=this.get("dialog");if(!t)return;var a=t.getField("image");if(!a)return;if(!e.newVal){g("imageContentModel.after imageIdChange clear");a.set("data",null);return}g("imageContentModel.after imageIdChange new image",{newId:e.newVal});var i=this.get("imageContentModel");var n=new y.Squarespace.Models.ContentItem({inDialog:true,id:i.getImageContentItemField("id"),mediaProcessingState:y.Squarespace.MediaProcessingState.QUEUED});n.load(function e(){g("Created new ContentItem for image");a.set("data",n);a.syncUI()})},imageContentModelAfterFilenameChange:function(e){g("imageContentModel.after afterFilenameChange");var t=this.get("dialog");if(!t)return;var a=t.getField("filename");if(!a||!a.getValue)return;if(a.getValue()===e.prevVal||!a.getValue()){a.set("data",e.newVal);a.syncUI()}},getDialogData:function(){var e=this.get("model").toJSON();var t=e.linkTo;y.Lang.isString(t)&&(e.clickThrough={url:t,newWindow:e.newwindow});e.image=new y.Squarespace.Models.ContentItem({inDialog:true,id:e.imageId});e.filename=this.get("imageContentModel").getImageContentItemField("filename");return e},sanitizeDialogData:function(e){var t=this.getDialogData();if(e.lightbox){e.linkTo="";e.newwindow=false}else if(t.linkTo){e.linkTo=t.linkTo;e.newwindow=t.newwindow}else{e.linkTo="";e.newwindow=false}y.Lang.isValue(e.image)?e.imageId=e.image.get("id"):e.imageId=null;return{linkTo:e.linkTo,newwindow:e.newwindow,imageLink:e.imageLink,buttonText:e.buttonText,lightbox:e.lightbox,lightboxTheme:e.lightboxTheme,mapping:e.mapping,layout:e.layout,stretch:e.stretch,filename:e.filename,aspectRatio:e.aspectRatio,designLayout:e.designLayout,imagePosition:e.imagePosition,combinationAnimation:e.combinationAnimation,individualImageAnimation:e.individualImageAnimation,individualTextAnimation:e.individualTextAnimation}},_syncContentImage:function e(){g("_syncContentImage");var t=this.get("dialog");var a=t.getData();var i=null;var n=a.image;if(y.Lang.isValue(n)){i=n.get("id");var s=this.get("id");n.detach(s+"|*");n.after(s+"|mediaProcessingStateChange",function(e){g("imageContentItem.after mediaProcessingStateChange",{newState:e.newVal});this.get("imageContentModel").applyAttrsFromContentItem(n);e.newVal!==y.Squarespace.MediaProcessingState.READY&&this.get("imageContentWidget").syncUI()},this);n.after(s+"|assetUrlChange",function e(t){g("imageContentItem.after assetUrlChange",{newUrl:t.newVal});t.prevVal&&this.get("imageContentModel").set("aspectRatio",null,{silent:true});this.get("imageContentModel").applyAttrsFromContentItem(n);this.get("imageContentWidget").syncUI();this.get("imageContentWidget").contentEditor.set("editing",y.Lang.isValue(this.get("imageContentWidget").imgNode))},this);n.after(s+"|mediaFocalPointChange",function(e){g("imageContentItem.after mediaFocalPointChange",{newFocalPoint:e.newVal});this.get("imageContentModel").set("focalPoint",e.newVal)},this)}this.get("imageContentModel").setAttrs({imageId:i})},toggleLinkEditorVisibility:function(e){var t="sqs-select-hidden";var a=".cc-link-editor-image-block-label";var i=".cc-link-editor-image-block";var n=document.querySelector(i);var s=document.querySelector(a);if(e){s&&s.classList.remove(t);n&&n.classList.remove(t)}else{s&&s.classList.add(t);n&&n.classList.add(t)}},getLinkEditorProps:function(){return{zIndex:3e5,isDark:true,flush:true,className:i.NONINTERACTIVE_CLASSNAME,modalclassName:i.NONINTERACTIVE_CLASSNAME,pageDropdownClassName:i.NONINTERACTIVE_CLASSNAME,onChange:function(e){var t=this.get("model");var a=this.get("dialog");t.setAttrs({linkTo:e.url,newwindow:e.newWindow});a.getField("clickThrough").set("isDirty",true)}.bind(this),value:function(){var e=this.getDialogData();return{url:e.linkTo,newWindow:e.newwindow}}.bind(this)}},_syncOptionalFields:function e(){g("_syncOptionalFields");var t=this.get("dialog");var a=t.getField("lightbox");var i=!!(a&&a.get("data"));t.getField("lightboxTheme").set("visible",i);this.toggleLinkEditorVisibility(!i);var n=t.getField("imageLink");var s=n?n.get("data"):null;var r=t.getField("designLayout");var o=r?r.get("data"):null;var l=t.getField("combinationAnimation");var c=t.getField("individualImageAnimation");var d=t.getField("individualTextAnimation");var u=l&&"custom"===l.get("data");t.getField("imagePosition").set("visible",false);if(r&&"inline"!==o){t.getField("lightbox").setAttrs({visible:false,data:false});t.getField("lightboxTheme").set("visible",false);t.getField("layout").set("visible",false);t.getField("stretch").set("visible",false);t.getField("imageLink").set("visible",true);if("button"===s){this.toggleLinkEditorVisibility(true);t.getField("buttonText").set("visible",true)}else if("image"===s){this.toggleLinkEditorVisibility(true);t.getField("buttonText").set("visible",false)}else{this.toggleLinkEditorVisibility(false);t.getField("buttonText").set("visible",false)}}else{t.getField("lightbox").set("visible",true);t.getField("layout").set("visible",true);t.getField("stretch").set("visible",true);t.getField("imageLink").set("visible",false);t.getField("buttonText").set("visible",false)}["card","overlap","collage"].includes(o)&&t.getField("imagePosition").set("visible",true);c&&c.set("visible",u);d&&d.set("visible",u)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.get("designLayout"):null;var i=e?e.layout.get("collectionId"):null;var n=t.getField("combinationAnimation").get("data");var s=t.getField("individualImageAnimation").get("data");var r=t.getField("individualTextAnimation").get("data");var o={imageBlockLayout:a,collectionId:i,combinationAnimationSelection:n,individualImageAnimationSelection:s,individualTextAnimationSelection:r};l.userSelectImageAnimationOverride(n);return o},save:function e(t,a,i){this._syncContentImage();this.trackAnimationFieldsSave({eventName:"image_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});n.superclass.save.apply(this,arguments)},_getDialogConfig:function(){var e={title:q("Image"),initialDataByReference:true,width:400,height:470,tabs:[{title:q("Image"),icon:"/universal/images-v6/icons/icon-image-16-light.png"}]};var t={ctor:y.Squarespace.DialogFields.FileImageLicensed,transientStore:true,height:168,contentType:"image",name:"image",autoSaveFocalPoint:true,uploadUrl:"/api/uploads/images",imageDestination:k.IMAGE_BLOCK};var a={ctor:y.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-below",options:[{value:"caption-hidden",label:q("Do Not Display Caption")},{value:"caption-below",label:q("Caption Below")},{value:"caption-overlay",label:q("Caption Overlay")},{value:"caption-overlay-hover",label:q("Caption Overlay on Hover")}]}};var i={ctor:y.Squarespace.DialogFields.Text,config:{name:"filename",strings:{title:q("Filename (Optional)"),placeholder:q("image.jpg")},className:"thin dark"}};var n=C.isSevenOne()&&E.isFeatureEnabled(w.SECTION_ADMIN);var s={ctor:y.Squarespace.DialogFields.Text,config:{name:"mapping",strings:{title:q("Semantic Mapping (Optional)"),placeholder:q("hero-image")},className:"thin dark"}};var r={ctor:y.Squarespace.DialogFields.Check,config:{name:"stretch",strings:{title:q("Stretch"),description:q("Stretch the image to span the container.")}}};var o={ctor:y.Squarespace.DialogFields.Check,config:{name:"lightbox",strings:{title:q("Enable Lightbox"),description:q("Clicking on the image will enlarge the image into a lightbox.")}}};var l={ctor:y.Squarespace.DialogFields.Select,config:{name:"lightboxTheme","strings.title":q("Lightbox Theme"),className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:q("Dark Overlay")},{value:"light",label:q("Light Overlay")}]}};var c={ctor:y.Squarespace.DialogFields.Select,config:{name:"imageLink","strings.title":q("Image Link"),defaultValue:"none",options:[{value:"none",label:q("None")},{value:"image",label:q("On Image")},{value:"button",label:q("Button")}]}};var d=E.isFeatureEnabled(w.GLOBAL_ANIMATIONS)&&C.isSevenOne();var u={ctor:y.Squarespace.DialogFields.Select,config:{name:"combinationAnimation","strings.title":q("Animate Image Block"),className:"thin dark",options:S([d&&_.SITE_DEFAULT,d&&_.NO_ANIMATION,!d&&_.NONE,_.FADE_IN,_.SLIDE_UP,_.HORIZONTAL_CLIP,_.VERTICAL_CLIP,_.TILT_UP,_.TILT_DOWN,_.FOCUS_IN,_.COLLIDE,_.REVEAL,_.CUSTOM])}};var g={ctor:y.Squarespace.DialogFields.Select,className:"image-editor-web-individual-image-animation",config:{name:"individualImageAnimation","strings.title":q("Animate Image"),options:S([_.NONE,_.FADE_IN,_.SLIDE_UP,_.SLIDE_DOWN,_.SLIDE_FROM_LEFT,_.SLIDE_FROM_RIGHT,_.HORIZONTAL_CLIP,_.VERTICAL_CLIP,_.TILT_UP,_.TILT_DOWN,_.FOCUS_IN])}};var p={ctor:y.Squarespace.DialogFields.Select,className:"image-editor-web-individual-text-animation",config:{name:"individualTextAnimation","strings.title":q("Animate Image Text"),options:S([_.NONE,_.FADE_IN,_.SLIDE_UP,_.SLIDE_DOWN,_.SLIDE_FROM_LEFT,_.SLIDE_FROM_RIGHT,_.FOCUS_IN])}};var h={ctor:y.Squarespace.DialogFields.Text,config:{name:"buttonText",strings:{title:q("Button Text"),placeholder:q("Click Here")},className:"thin dark"}};var f={ctor:y.Squarespace.DialogFields.HTML,config:{name:"clickThroughLabel",className:"cc-link-editor-image-block-label",content:"<strong>"+q("Clickthrough URL")+"</strong>"}};var m={ctor:y.Squarespace.DialogFields.ReactDialogField,config:{component:T,name:"clickThrough","strings.title":q("Clickthrough URL"),className:"cc-link-editor-image-block",props:this.getLinkEditorProps.bind(this),isDirty:false}};var v={ctor:y.Squarespace.DialogFields.MultiOption,className:"image-editor-web-design-layout",config:{name:"designLayout",defaultValue:"inline",columns:3,options:[{title:q("Inline"),value:"inline",icon:"inline"},{title:q("Poster"),value:"poster",icon:"poster"},{title:q("Card"),value:"card",icon:"card"},{title:q("Overlap"),value:"overlap",icon:"overlap"},{title:q("Collage"),value:"collage",icon:"collage"},{title:q("Stack"),value:"stack",icon:"stack"}]}};var b={ctor:y.Squarespace.DialogFields.Select,config:{name:"imagePosition",className:"thin dark",defaultValue:"left",options:[{value:"left",label:q("Left")},{value:"right",label:q("Right")}],strings:{title:q("Image Position")}}};e.tabs=[{tabTitle:q("Content"),fields:[t,i,n?s:null]},{tabTitle:q("Design"),fields:[v,b,a,r,o,l,c,h,f,m]}];e.tabs.push({tabTitle:q("Animations"),fields:[u,g,p]});return e},destructor:function(){var e=this.get("dialog").getData();e.image&&e.image.detach(this.get("id")+"|*")}},{CSS_PREFIX:"sqs-image-editor-web-dialog",ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},imageContentModel:{},imageContentWidget:{}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-file-image","squarespace-dialog-file-image-licensed","squarespace-dialog-multi-option","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-wysiwyg","squarespace-model-editor","squarespace-block-mixin-block-animation-analytics","squarespace-dialog-html","squarespace-react-dialog-field"]})},7824:function(e,t,a){var n=a(24).t;var s=a(149);var r=a(1940);var o=a(598);var c=a(596);var d=a(2713);var u=a(794);var g=a(1925);YUI.add("squarespace-dialog-file-image-licensed",function(l){l.namespace("Squarespace.DialogFields");var a={SEARCH:"search-images",EDIT:"edit",REMOVE:"remove",LICENSE:"license"};var i=l.Squarespace.DialogFields.FileImageLicensed=l.Base.create("FileImageLicensed",l.Squarespace.DialogFields.FileImage,[],{initializer:function(){this.publish("gettyImageCaptionUpdate",{emitFacade:true,bubbles:true});var e=this.get("data");var t=e?e.get("recordType"):null;this._workflow=new l.Squarespace.LicensedAssets.Workflow({imageDestination:this.get("imageDestination"),disableImageReuse:t&&t!==s.IMAGE});this._actions=new l.Squarespace.Widgets.ActionsInline;this._actions.set("disabled",this.get("isLoading"));this._alert=new l.Squarespace.LicensedAssets.Widgets.PreviewAlert},getUploaderConfig:function(){var e=i.superclass.getUploaderConfig.call(this);e.selectButtonLabel=n("Upload an Image");return e},destructor:function(){this._workflow.destroy();this._actions.destroy();this._alert.destroy();this._workflow=null;this._actions=null;this._alert=null},renderUI:function(){i.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-file-image-licensed");this._renderActions();this._renderPreviewAlert()},bindUI:function(){i.superclass.bindUI.call(this);this._workflow.on("downloadRequest",this._onDownloadRequest,this);this._workflow.on("imagePicked",this._onImagePicked,this);this._actions&&this._actions.on("action",this._onImageAction,this);this._alert.after("visibleChange",this._onAlertVisibilityChange,this);this.after("dataChange",this._resetDialog,this);this.on("isLoadingChange",function(e){this._actions.set("disabled",e.newVal)}.bind(this))},_renderActions:function(){this._actions&&this._actions.render(this.get("boundingBox"))},_renderPreviewAlert:function(){if(this._alert){this._alert.hide();this._alert.render(this.get("boundingBox"))}},_resetDialog:function(e){if("DialogFileImage"===e.source)return;this._actions&&this._actions.reset();this._alert&&this._alert.hide();null===this.get("data")?this._addLinkToGetty():this._addContextualActions()},_onImageAction:function(e){var t=e.actionName;switch(t){case a.SEARCH:this._onLicensedImageSearch();break;case a.EDIT:this._onEdit();break;case a.REMOVE:this._onRemove();break;case a.LICENSE:this._onLicense();break}},_onAlertVisibilityChange:function(e){var t=this.get("boundingBox");var a=e.newVal;a?t.addClass("extra-padding"):t.removeClass("extra-padding")},_updateInlineActions:function(){var e=this.get("data");l.Lang.isValue(e)&&e.get("hasFileData")?this._addContextualActions():this._addLinkToGetty()},_updatePreviewAlert:function(){this._isPreview()?this._alert.showPreviewAlert():this._isLicensedAsset()?this._getLicensedAssetOriginUrl().then(function(e){var t=e.source===o.UNSPLASH;t?this._alert.hide():this._alert.showLicensedAssetAlert(e.originUrl)}.bind(this)):this._alert&&this._alert.hide()},_getLicensedAssetOriginUrl:function(){var e=this.get("data").get("licensedAssetId");return l.Squarespace.LicensedAssets.Manager.getById(e)},_addLinkToGetty:function(){this._actions&&this._actions.set("buttons",[{label:n("Search for Image"),action:a.SEARCH}])},_addContextualActions:function(){var e=[];var t=u.getState().assetPurchasesByNonAdminsAllowed;this._isPreview()&&(t||d.hasRole(r.ADMIN))&&e.push({label:n("License"),action:a.LICENSE});this._isPreview()||this.get("disableEdit")||e.push({label:n("Image Editor"),action:a.EDIT});e.push({label:n("Remove"),action:a.REMOVE});this._actions&&this._actions.set("buttons",e)},_isPreview:function(){var e=false;var t=this.get("data");t&&t.isLicensedAssetPreview()&&(e=true);return e},_isLicensedAsset:function(){var e=false;var t=this.get("data");t&&t.get("licensedAssetId")&&(e=true);return e},_onLicensedImageSearch:function(){this._workflow.showImagePicker()},_getFilePostData:function(){var e=i.superclass._getFilePostData.call(this);return l.merge(e,{imageDestination:this.get("imageDestination")})},_onDownloadRequest:function(e){var t=e.request;var a=t.get("url");var i=t.get("licensedAssetPreview");var n=t.get("licensedAssetId");var s=t.get("isPurchased");this._setStretch(true);this._fireAttributionEvent(t);var r=this.get("data");var o=null;l.Lang.isValue(r)&&!s&&(o=this.get("data").get("id"));this.saveFromUrl(a,i,o,n)},_onImagePicked:function(e){if(e.cloneItemId){var t=this.get("data")&&this.get("data").get("collectionId")?this.get("data").get("collectionId"):null;g.copy(e.cloneItemId,c.PUBLISHED,t).then(function(e){this.set("data",new l.Squarespace.Models.ContentItem(e.data))}.bind(this))}},_onLicense:function(){this._isTrialAccount()?this._abortLicense():this._completeLicense()},_completeLicense:function(){var e=this.get("data").get("licensedAssetPreview");var t=this._getAssetUrl();this._workflow.showPurchaseDetails(e,t)},_abortLicense:function(){new l.Squarespace.Widgets.Alert({"strings.title":n("Trial Account"),"strings.message":n("To purchase images, you must have a paid Squarespace account. Please upgrade your site via the Billing area.")})},_isTrialAccount:function(){return l.Squarespace.Context.getInstance().get("website").get("siteStatus.value")===l.Squarespace.StatusConstants.TRIAL},_getAssetUrl:function(){return this.get("data").get("assetUrl")+"?format=500w"},_getLicensedAssetId:function(){return this.get("data").get("licensedAssetId")},_renderDataLoadedState:function(){i.superclass._renderDataLoadedState.call(this);this._updateInlineActions();this._updatePreviewAlert()},_onRemove:function(){var e=this.get("data");var t=this._isPreview()?e.get("licensedAssetPreview").assetId:this._getLicensedAssetId();this._isPreview()?this._workflow.trackPreviewRemovalEvent(t):this._isLicensedAsset()&&this._getLicensedAssetOriginUrl().then(function(e){this._workflow.trackLicensedAssetRemovalEvent(t,e.source)}.bind(this));(this._isPreview()||this._isLicensedAsset())&&this._fireCaptionEvent("");l.soon(function(){i.superclass._onRemove.call(this);this._addLinkToGetty();this._setStretch(false)}.bind(this))},_setStretch:function(e){var t=this.get("dialog");if(t){var a=t.getField("stretch");a&&a.set("data",e)}},_fireAttributionEvent:function(e){var t=this.get("dialog");if(l.Lang.isValue(t)){var a=this.get("data");var i=e.get("licensedAssetPreview");!l.Lang.isValue(i)&&l.Lang.isValue(a)&&(i=new l.Squarespace.LicensedAssets.Models.Preview(a.get("licensedAssetPreview")));if(l.Lang.isValue(i)){var n=this._getGettyAttribution(i);-1===n.indexOf("undefined/undefined")&&this._fireCaptionEvent(n)}}},_fireCaptionEvent:function(e){var t=this.get("dialog");l.Lang.isValue(t)&&t.fire("gettyImageCaptionUpdate",{caption:e})},_getGettyAttribution:function(e){var t=e.get("artist");var a=e.get("collectionName");return n("Photo by {artist}/{collectionName} / Getty Images",{artist:t,collectionName:a})}},{CSS_PREFIX:"sqs-file-image",ATTRS:{recordType:{value:s.IMAGE},imageDestination:{}}})},"1.0",{requires:["base","node","squarespace-actions-inline","squarespace-context","squarespace-dialog-file-image","squarespace-licensed-assets-preview","squarespace-licensed-assets-preview-alert","squarespace-licensed-assets-workflow","squarespace-util","squarespace-widgets-alert"]})},7825:function(e,t){YUI.add("squarespace-actions-inline",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.ActionsInline=a.Base.create("ActionsInline",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("action",{emitFacade:true,bubbles:true})},renderUI:function(){e.superclass.renderUI.call(this);this._renderButtons()},bindUI:function(){e.superclass.renderUI.call(this);this.after("buttonsChange",this._renderButtons,this);this.get("contentBox").delegate("click",this._onButtonClick,".button-block",this);this.on("disabledChange",function(e){e.newVal?this.get("boundingBox").addClass("disabled"):this.get("boundingBox").removeClass("disabled")})},showSpinner:function(){this.get("contentBox").plug(a.Squarespace.Plugin.ProgressSpinner,{spinnerColor:"dark",spinnerSize:15,showCancel:false,show:true,append:true})},hideSpinner:function(){this.get("contentBox").unplug(a.Squarespace.Plugin.ProgressSpinner)},reset:function(){this.set("buttons",[])},_renderButtons:function(){var e=this.get("contentBox");var t=a.Node.create('<div class="sqs-actions-inline-buttons button-holder"></div>');e.empty();this.get("buttons").forEach(function(e){t.appendChild('<div class="button-block '+e.action+'" data-action="'+e.action+'"><button><span class="button-label-container"><span class="button-icon"></span><span class="button-label">'+e.label+"</span></span></button></div>")},this);e.append(t)},_onButtonClick:function(e){if(this.get("disabled"))return;this.fire("action",{actionName:e.currentTarget.getAttribute("data-action")})}},{CSS_PREFIX:"sqs-actions-inline",ATTRS:{buttons:{value:[],validator:a.Lang.isArray},disabled:{value:false,validator:a.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-plugin-progress-spinner","squarespace-ss-widget"]})},7826:function(e,t,n){var s=n(24).t;var r=n(1940);YUI.add("squarespace-licensed-assets-preview-alert",function(e){var t=n(794);var a=n(2713);e.namespace("Squarespace.LicensedAssets.Widgets");var i=e.Squarespace.LicensedAssets.Widgets.PreviewAlert=e.Base.create("LicensedAssetPreviewAlert",e.Squarespace.Widgets.SSWidget,[],{bindUI:function(){i.superclass.bindUI.call(this)},showPreviewAlert:function(){var e=t.getState().assetPurchasesByNonAdminsAllowed;e||a.hasRole(r.ADMIN)?this._updateCopy(s("This is an unlicensed preview image. To license it, use the link above. Watermarks will be removed after purchase.")):this._updateCopy(s("This is an unlicensed preview image. To license it, please speak with an admin. Watermarks will be removed after purchase."));this.get("contentBox").addClass("is-yellow");this.show()},showLicensedAssetAlert:function(e){var t=s('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:e});this._updateCopy(t);this.get("contentBox").removeClass("is-yellow");this.show()},_updateCopy:function(e){this.get("contentBox").one(".copy").set("innerHTML",e)}},{CSS_PREFIX:"sqs-licensed-asset-preview-alert",TEMPLATE:'<span class="copy"></span>'})},"1.0",{requires:["base","squarespace-ss-widget"]})},7827:function(e,t,a){var i=a(853);var n=a(598);var s=a(24).t;var d=a(1309);var u=a(34);var g=a(1028);var p=a(1391);var h=a(2218);var f=a(9044).getFocalPoint;var m=a(9045).notifyUserTiming;var v=a(1714);var r=a(729);var b=r.createLogger("block-content/image-editor","orange",false);YUI.add("squarespace-block-content-image-editor",function(o){var e="/api/uploads/images";var a=o.UA.mobile?"dbltap":"dblclick";var r="image-upload-";var l={FILE:0,GETTY:n.GETTY,UNSPLASH:n.UNSPLASH};var c=i(l);o.namespace("Squarespace.Content.Image");o.Squarespace.Content.Image.Editor=o.Base.create("ImageEditor",o.SQS.LayoutEngine.BlockContent.ImageEditorBase,[],{initializer:function e(){var t=this.get("host");this._bb=t.get("boundingBox");this._cb=t.get("contentBox");this._model=t.get("model");this.bbListener=this._bb.on(a,this.onBoundingBoxDoubleClick,this);this.after("editingChange",this.afterEditingChange,this);this.modelListeners=[];this.modelListeners.push(this._model.after(["completedChange","processingChange"],this.renderState,this),this._model.after(["stretchChange","dimensionsChange"],this.renderOverlay,this),this._model.after("imageIdChange",this.afterImageIdChange,this));this.actionListener=new g(u);this.actionListener.addActionListener(p.COMPLETE,this.onJobComplete.bind(this));if(this._isPerformanceSupported()){o.Global.on("dialogFileImage:uploadStart",function(){if(this._model&&!this._model.get("imageId")){this.set("trackingStartMark","start-"+r+this._model.get("clientId"));v.mark(this.get("trackingStartMark"))}}.bind(this));this._model.on("processingChange",this.onProcessingChange,this);this.on("trackingInProgressChange",this.onTrackingInProgressChange,this)}},destructor:function e(){this.destroyUploader();this.bbListener&&this.bbListener.detach(a,this.onBoundingBoxDoubleClick,this);this.modelListeners.forEach(function(e){e.detach()})},destroyUploader:function e(){this.uploader&&this.uploader.destroy();this.uploader=null},onBoundingBoxDoubleClick:function(){var e=o.Lang.isValue(this._model.get("imageId"));if(!e)return;var t=this._model.get("processing");if(t)return;this.set("editing",true)},afterImageIdChange:function(e){if(null!==e.newVal){this.get("trackingInProgress")||this.set("trackingInProgress",true);p.monitor([e.newVal])}else this.clearTrackingState()},onJobComplete:function(e){if(!this._model)return;var t=this._model.get("imageId");var a=o.Array.find(e,function(e){return e===t});if(this.get("trackingInProgress"))for(var i=0;i<e.length;++i){var n=h.getJobById(e[i]);var s=n&&n.data&&n.data.contentItemId;var r=n&&n.data&&n.data.processorConfig;if(t===s&&r){this.set("trackingJobProcessor",r);break}}a&&this._model.loadImageData()},onProcessingChange:function(e){if(e.newVal!==e.prevVal){e.newVal&&!this.get("trackingInProgress")&&this.set("trackingInProgress",true);this.get("trackingInProgress")&&(e.newVal?this.set("trackingWasProcessed",true):false===e.newVal&&this.set("trackingInProgress",false))}},onTrackingInProgressChange:function(e){if(e.newVal!==e.prevVal)if(e.newVal&&!this.get("trackingStartMark")){this.set("trackingStartMark","start-"+r+this._model.get("clientId"));v.mark(this.get("trackingStartMark"))}else if(!e.newVal&&e.prevVal&&this.get("trackingStartMark")){this.set("trackingEndMark","end-"+r+this._model.get("clientId"));v.mark(this.get("trackingEndMark"));this._createUploadMeasureName().then(function(e){v.measure(e,{start:this.get("trackingStartMark"),end:this.get("trackingEndMark")});this.clearTrackingState();m()}.bind(this)).catch(function(){this.clearTrackingState()}.bind(this))}},syncUploadUI:function(){if(!this._model)return;this._model.get("imageId")||this.removeImageOverlay();if(!this._model.isEmpty()){this.destroyUploader();this.get("host").render();return}this.uploader||this.createUploader()},createUploader:function(){this.uploader=new o.Squarespace.Uploader({uploadURL:e,multipleFiles:false,appendNewFiles:false,isTransient:d.TRANSIENT,isGlobal:false,autoUpload:true,addPlaceholder:o.bind(this.addPlaceholder,this),selectButtonLabel:s("Add Image"),dragAndDropArea:this._bb,fileFilters:[{description:s("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico",acceptTypes:"image/png, image/gif, image/jpeg"}],maxSize:20,processFile:o.bind(this.processFile,this),createJob:o.bind(this.createImageProcessingJob,this),jobComplete:o.bind(this.jobComplete,this),render:this._cb});this.uploader.on("fileuploadstart",function(){this.clearTrackingState();this.set("trackingInProgress",true);this.uploadProgress({completed:0})},this);this.uploader.after("uploadprogress",function(e){this.uploadProgress({completed:e.percentLoaded})},this);this.uploader.get("boundingBox").removeClass("sqs-uploader");this.uploader.get("boundingBox").addClass("sqs-image-uploader")},addPlaceholder:function(e){return this._cb},createImageProcessingJob:function(e,t){if(!t.job){console.warn("[image-editor] response.job missing, not creating aux job",t);return null}var a=o.merge(t.job,{started:true});var i=new o.Squarespace.ImageProcessingJob(a);this.uploadProgress({completed:1,itemRepresentation:t.media[0]});return i},jobComplete:function(e,t){var a=o.bind(function e(){this.jobUpdate({status:t.get("status"),data:t.get("data")})},this);t.get("status")===o.Squarespace.JobStatuses.SUCCESS?this._model.loadImageData().then(a):a()},processFile:function(e){if(e.invalid){this.alertInvalidFiledata();return}e.postData={process:true,contentType:"image"}},alertInvalidFiledata:function(e){var t=e.invalid[0];var a=t.title;var i=t.message;if(this.get("strings.invalidDrop")){a=this.get("strings.invalidDrop.title");i=this.get("strings.invalidDrop.message")}new o.Squarespace.Widgets.Alert({position:o.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,anchor:this.get("contentBox"),"strings.title":a,"strings.message":i})},renderState:function e(){if(!this._cb.getDOMNode())return;var t=this._model.get("completed");if(o.Lang.isValue(t)&&t<1){this.setUploadingState();return}var a=o.Lang.isValue(this.get("host").get("parent"));if(this._model.get("processing")&&a){this.setProcessingState();return}this.clearProcessingState()},clearModel:function(){this._model.setAttrs({completed:null,processing:false,baseAssetUrl:"",imageId:null,isBase64:false})},clearProcessingState:function(){b("imageEditor cleanProcessingState");if(!this._cb.getDOMNode())return;this.clearProgressBar();this.clearProcessingSpinner();this.unbindProgressCancellation();this._cb.removeClass(this.get("host").getClassName("processing"))},clearTrackingState:function(){this._isPerformanceSupported()&&this.setAttrs({trackingStartMark:null,trackingEndMark:null,trackingWasProcessed:false,trackingInProgress:false,trackingJobProcessor:"legacy"})},unbindProgressCancellation:function(){this._progressCancel&&this._progressCancel.detach();this._progressCancel=null},setUploadingState:function(){var e=100*this._model.get("completed");b("imageEditor uploading",{completion:e});var t=this._cb.plug(o.Squarespace.Plugin.ProgressBar,{progress:e})[o.Squarespace.Plugin.ProgressBar.NS];this.unbindProgressCancellation();this._progressCancel=t.on("cancel",this.unbindProgressCancellation,this);this._cb.addClass(this.get("host").getClassName("processing"))},clearProgressBar:function(){this._cb.hasPlugin(o.Squarespace.Plugin.ProgressBar.NS)&&this._cb.unplug(o.Squarespace.Plugin.ProgressBar)},clearProcessingSpinner:function(){this._cb.hasPlugin(o.Squarespace.Plugin.ProgressSpinner.NS)&&this._cb.unplug(o.Squarespace.Plugin.ProgressSpinner)},setProcessingState:function(){b("imageEditor setProcessingState");this.clearProcessingState();this._cb.addClass(this.get("host").getClassName("processing"));this._cb.plug(o.Squarespace.Plugin.ProgressSpinner);this._progressCancel=this._cb.one(".cancel-process").on("click",this.onCancelProcessingClick,this)},onCancelProcessingClick:function(e){e.halt();this.clearModel();this.clearProcessingState();this.clearTrackingState()},afterEditingChange:function(e){if(!this._model.get("imageId"))return;var t=this.get("editing");if(t){this.enableOverlay();return}this.disableOverlay()},destroyOverlay:function(){this.overlay&&this.overlay.destroy();this.overlay=null},enableOverlay:function(){if("inline"===this._model.get("designLayout")){if(this.overlay&&o.Lang.isValue(this.get("host").imgNode)){var e=this.overlay.get("contentBox").one("img").getAttribute("src");var t=this.get("host").imgNode.getAttribute("src");e!==t&&this.destroyOverlay()}this.overlay||this.createOverlay();this.overlay.get("boundingBox").setStyles({position:"absolute",opacity:1});this.overlay.show();this.renderOverlay()}this._bb.on("clickoutside",this.onBoundingBoxOutsideClick,this);this.mousedown=this._bb.on("mousedown",this._imgDragMousedown,this)},disableOverlay:function(){this._bb.detach("clickoutside");this.mousedown&&this.mousedown.detach();this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.set("positioning",false);this.hideOverlay()},renderOverlay:function e(){if(!this.overlay)return;var t=this.overlay.get("align.node").get("region");b("imageEditor renderOverlay",{alignNodeRegion:t});this.overlay.setAttrs({height:t.height,width:t.width});this.overlay.align()},onBoundingBoxOutsideClick:function(e){false===this.get("editing")||e.target.ancestor(".dialog-editor-block-image",true)||this.set("editing",false)},hideOverlay:function(e){if(!this.overlay)return;this.overlay.hide()},createOverlay:function(){var e="inline"===this._model.get("designLayout");var t=this.overlay;if(!e||t)return;var a=o.Node.create('<img class="sqs-image-overlay">');a.setAttribute("src",this.get("host").imgNode.getAttribute("src"));a.setStyles({height:"100%",width:"100%",opacity:.2});this.overlay=new o.Overlay({bodyContent:a,zIndex:1,align:{node:this.get("host").imgNode,points:["cc","cc"]}});this.get("host").imgNode.on("load",this.renderOverlay,this);this.overlay.on("visibleChange",this.renderOverlay,this);this.afterOverlayFocalPointChange=this._model.after("focalPointChange",this.renderOverlay,this);this.overlay.get("boundingBox").addClass("sqs-imageoverlay");this.overlay.get("bodyContent").setStyle("height",null);var i=this._bb.ancestor(".sqs-block");i=i||"body";this.overlay.render(i);this.overlay.hide()},removeImageOverlay:function(){this.afterOverlayFocalPointChange&&this.afterOverlayFocalPointChange.detach();this.destroyOverlay()},_imgDragMousedown:function e(t){if(this.get("editing")&&!this._model.isEmpty()){o.DD.DDM.stopDrag();t.halt();this.startX=t.pageX;this.startY=t.pageY;this.startFocal=this._model.get("focalPoint").split(",");this.bbR=this.get("host").get("boundingBox").get("region");this.imgR=this.get("host").imgNode.get("region");this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();var a=this.get("id");var i=o.one(o.config.win);this.imgDragMove=i.on([a+"|mousemove",a+"|touchmove"],this._imgDragDrag,this);this.imgDragUpInnerFrame=i.on([a+"|mouseup",a+"|touchend"],this._imgDragEnd,this);this.imgDragUpOuterFrame=i.on([a+"|mouseup",a+"|touchend"],this._imgDragEnd,this);this.set("positioning",true)}},_imgDragDrag:function e(t){var a=this.imgR;var i=this.bbR;var n=t.pageX-this.startX;var s=t.pageY-this.startY;var r=parseFloat(this.startFocal[0]);var o=parseFloat(this.startFocal[1]);var l=f({distance:n,imgSize:a.width,containerSize:i.width,startFocal:r});var c=f({distance:s,imgSize:a.height,containerSize:i.height,startFocal:o});this._model.set("focalPoint",l+","+c)},_imgDragEnd:function e(t){this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.set("positioning",false);this._model.saveFocalPoint()},_createUploadMeasureName:function(){return o.Squarespace.Promises.create(function(t,e){var a=this._model.get("licensedAssetId");var i=this._model.get("licensedAssetPreview");var n=this.get("trackingJobProcessor");var s=r;this.get("trackingWasProcessed")?s+=n+"-":s+="imported-";a?o.Squarespace.LicensedAssets.Manager.getById(a).then(function(e){t(s+c[e.source].toLowerCase())}).catch(e):t(i?s+c[l.GETTY].toLowerCase():s+c[l.FILE].toLowerCase())}.bind(this))},_isPerformanceSupported:function(){var e=window.Y.config.win.performance;return e&&e.mark&&e.measure&&e.clearMarks}},{NS:"contentEditor",ATTRS:{trackingWasProcessed:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},trackingInProgress:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},trackingStartMark:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},trackingEndMark:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},trackingJobProcessor:{value:"legacy",validator:o.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["node","base","overlay","anim","event-touch","event-tap","dd-delegate","@sqs/layout-engine/block-content-image-editor-base","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-uploader","squarespace-jobs","squarespace-job-manager","squarespace-event-dbltap","squarespace-models-content-item","squarespace-widgets-alert","squarespace-licensed-assets-manager"]})},7828:function(e,t,a){var i=a(664);YUI.add("@sqs/layout-engine/block-content-image-editor-base",function(o){o.namespace("SQS.LayoutEngine.BlockContent");o.SQS.LayoutEngine.BlockContent.ImageEditorBase=o.Base.create("ImageEditor",o.Plugin.Base,[],{initializer:function(){var e=this.get("host");var t=this._model=e.get("model");this._bb=e.get("boundingBox");this._cb=e.get("contentBox");t.on("aspectRatioChange",e.blur,this);t.after(["imageIdChange","isBase64Change"],this.syncUploadUI,this);this.syncUploadUI()},syncUploadUI:function(){console.info("ImageEditorBase: No syncUploadUI method provided")},jobUpdate:function(e){e.status==i.SUCCESS&&this._model.setAttrs({isBase64:false,processing:false})},uploadProgress:function(e){var t=e.lowresImage;var a=e.itemRepresentation;if(e.failed){this._updateModel({completed:null,processing:false,baseAssetUrl:null,isBase64:false,imageId:null});return}var i={completed:e.completed||0};o.Lang.isNumber(e.completed)&&1==e.completed&&(i.processing=true);if(o.Lang.isValue(t)){this._bb.toggleClass("uploading",1!==e.completed);var n=e.dimensions.split("x");var s=parseInt(n[0],10);var r=parseInt(n[1],10);i.isBase64=true;i.baseAssetUrl=t;i.completed=0;i.dimensions={width:s,height:r};i.aspectRatio=r/s*100}if(o.Lang.isObject(a)){i.baseAssetUrl=a.assetUrl;i.imageId=a.id}this._updateModel(i)},_updateModel:function(e){this._model.setAttrs(e);this.get("host").get("parent")&&this.get("host").get("parent").get("isNewBlock")&&this.get("host").get("parent").set("isNewBlock",false)},destructor:function(){this._model=null;this._cb=null;this._bb=null}},{NS:"contentEditor",ATTRS:{editing:{value:false},tabIndex:{value:0},focused:{value:false,readOnly:true}}})},"2.0",{requires:["node","base","plugin"]})},7829:function(e,t){YUI.add("squarespace-event-dbltap",function(i){i.Event.define("dbltap",{on:function(e,t,a){this._clear(t);t._handle=e.on("tap",function(e){t._timer&&t._timer.cancel();if(2===++t._counter){this._clear(t);a.fire(e)}else t._timer=i.later(300,this,this._clear,[t])},null,this)},detach:function(e,t,a){t._handle.detach();t._timer&&t._timer.cancel()},_clear:function(e){e._counter=0;e._timer=null}})},"1.0",{requires:["event","event-synthetic","event-tap"]})},7830:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-instagram",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Instagram=e.Base.create("block-instagram",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-instagram",MODEL:e.Squarespace.ContentModel.InstagramBlock,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Instagram}},type:{value:i.INSTAGRAM}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-instagram-editor","squarespace-block-instagram-model","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7831:function(e,t,a){var c=a(24).t;var i=a(229);var n=a(404);var d=a(207);YUI.add("squarespace-block-instagram-editor",function(o){o.namespace("Squarespace.Block.Editor");var t=o.Squarespace.Block.Editor.Instagram=o.Base.create("instagram-block-editor-dialog",o.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Instagram")},_initConfigDialog:function(){var e=this._model.layout.get("contentItemId");o.Lang.isValue(e)||(e=this._model.layout.get("parentItemId"));this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:e});return t.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return n.INSTAGRAM}},{NS:"blockEditor",ATTRS:{blockName:{value:c("Instagram")}}});o.namespace("Squarespace.Block.ModelEditorDialog");var l=o.Squarespace.Block.ModelEditorDialog.Instagram=o.Base.create("InstagramModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.SearchGallery,[],{_getServiceId:function(){return n.INSTAGRAM},_isValidAccountForSearch:function(){var e=this._getCurrentAccount();if(!e)return false;var t=e.get("oauthScopes");if(!t)return false;return o.Array.indexOf(t,"public_content")>=0},_isSocialSearchEnabled:function(){var e=this.get("model");return!!e&&!!e.get("enable-search")},_getSocialFieldNames:function(){var e=l.superclass._getSocialFieldNames.call(this);e.push("search-deprecated-warning");return e},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=l.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;t.name="instagram-block-editor";a.unshift({ctor:o.Squarespace.DialogFields.WarningBanner,name:"search-deprecated-warning",config:{"strings.warningMessage":c("Instagram search results are no longer supported. To use the Instagram block, remove the search."),visible:this._isSocialVisible()}});a.unshift({ctor:o.Squarespace.DialogFields.Description,text:c('Display your own Instagram feed on your site and choose between four different layout styles in the Design tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.INSTAGRAM})});a.push({ctor:o.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":c("Search Instagram for…"),data:e.searchTerm,maxLength:100,className:"thin",visible:this._isSocialVisible()}});a.push({ctor:o.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":c("Refresh"),className:"thin",visible:this._isSocialVisible()}});var i=t.tabs[1].fields[0];delete i.config.options["show-meta-only-title"];var n=c("Show Caption");i.config.options["show-meta"].title=n;i.config.options["show-meta-basic"].title=n;var s=c("Caption Position");i.config.options["meta-position"].title=s;var r=c("Show the caption only on hover");i.config.options["show-meta-on-hover"].description=r;return t}},{ATTRS:{icon:{value:"instagram"},socialAccountType:{value:n.INSTAGRAM},collectionType:{value:i.INSTAGRAM},strings:{value:{name:"Instagram",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-search-gallery-model-editor","squarespace-block-instagram-model","squarespace-damask-context-globals","squarespace-dialog-warning-banner"]})},7832:function(e,t,a){var n=a(24).t;YUI.add("squarespace-block-search-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var i=a.Squarespace.Block.ModelEditorDialog.SearchGallery=a.Base.create("SearchGalleryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSearch,[a.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(e){e=a.merge(e,e.options);delete e.options;"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;return e},_isSocialSearchEnabled:function(){return i.superclass._isSocialSearchEnabled.call(this)},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0];e.tabs.push({title:t.title,tabTitle:n("Design"),icon:t.icon,scroll:true,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]});e.height=420;return e},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return a.merge(t,e)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-block-summary-gallery-model"]})},7833:function(e,t,a){var C=a(24).t;YUI.add("squarespace-block-social-search-model-editor",function(_){_.namespace("Squarespace.Block.ModelEditorDialog");var n=_.Squarespace.Block.ModelEditorDialog.SocialSearch=_.Base.create("SocialSearchModelEditorDialog",_.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{initializer:function(e){var i=this.get("dialog");if(this._isSocialSearchEnabled()){i.on("ready",function(){var e=i.getField("collectionId");var t=i.getField("enable-search");var a=i.getField("refresh");_.Lang.isValue(e)&&e.after("dataChange",this._onAccountSelectedChange,this);_.Lang.isValue(t)&&t.after("dataChange",this._onCollectionFilterCheckChange,this);_.Lang.isValue(a)&&a.on("click",this._refreshEditor,this);this._updateSocialFieldsVisibility(this._isValidAccountForSearch())},this);i.on("cancel",function(){var e=this.get("model");var t=i.getField("previewCollectionId");e.setAttrs({previewCollectionId:null});_.Lang.isValue(t)&&t.set("data",null);e.setAttrs({previewCollectionId:null})},this)}},_validateCriteria:function(e){var t=this._getWebserviceData(e);var a=t.socialDataModel.get("socialSearch");var i=this.get("model");var n=i.get("searchTerm");if(!_.Lang.isValue(t.account)){new _.Squarespace.Widgets.Alert({"strings.title":C("Connect an Account"),"strings.message":C("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});return false}var s=this.get("socialDataModel");a=s.get("socialSearch");_.Lang.isValue(a)&&(n=a.searchTerm);if(!_.Lang.isValue(n)||""===n){new _.Squarespace.Widgets.Alert({"strings.title":C("Search term required"),"strings.message":C("Please define a search term to be used.")});return false}return true},_cleanup:function(e,t,a){var i=this.get("dialog");var n=i.getField("previewCollectionId");var s=this.get("socialDataModel");_.Lang.isValue(n)&&n.set("data",null);if(_.Lang.isValue(t)&&""!==t){s.setAttrs({socialSearch:{id:null,collectionId:e,referenceId:null,referenceType:null,serviceProvider:a},searchFlag:this._isSearching(),socialCollectionId:e,previewCollectionId:t,preview:true});var r=this;s.save(function(e){var t=s.get("error");if(!e&&!_.Lang.isValue(t)&&s.get("synced")&&r._isSocialSearchEnabled()){var a=r._getUpdateData(s);r._updateData(a)}})}},_refreshEditor:function(){var e=true;var t=this._getWebserviceData(e);var a=this._validateCriteria(e);a&&this._syncAccount(t,false)},_isSocialSearchEnabled:function(){return this.get("socialSearchEnabled")},_updateSocialFieldsVisibility:function(e){var t=e&&this._isSocialVisible();var a=this._getSocialFieldNames();var i=this.get("dialog");var n=_.Array.map(a,function(e){return i.getField(e)},this);var s=_.Array.partition(n,function(e){if(!_.Lang.isValue(e))return false;return t},this);var r=_.Array.filter(s.matches,_.Lang.isValue);_.Array.invoke(r,"show");var o=_.Array.filter(s.rejects,_.Lang.isValue);_.Array.invoke(o,"hide")},_isValidAccountForSearch:function(){return true},_onAccountSelectedChange:function(e){var t=this.get("dialog");var a=this._isValidAccountForSearch();var i=t.getField("enable-search");var n=t.getField("enable-search-disabled");if(a){_.Lang.isValue(i)&&i.show();_.Lang.isValue(n)&&n.hide()}else{_.Lang.isValue(i)&&i.hide();_.Lang.isValue(n)&&n.show()}this._updateSocialFieldsVisibility(a)},_onCollectionFilterCheckChange:function(e){this._updateSocialFieldsVisibility(this._isValidAccountForSearch());var t=this._getCollectionOptions();var a=this._getConnectedAccounts(t);if(this._isSearching()&&0===a.length){var i=new _.Squarespace.Widgets.Alert({"strings.title":C("Connect an Account"),"strings.message":C("A connected account is required to use the search feature. In the popup window that will appear, authorize Squarespace to connect this account to your site.")});i.on("confirm",_.bind(this._onAddAccountClick,this))}},_isSocialVisible:function(){var e=this.get("dialog");var t=e.getField("enable-search");return this._isSocialSearchEnabled()&&t&&t.get("data")},_getSocialCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var e=this.get("model");var t=e.get("socialCollectionId");var a=_.Lang.isString(t)&&t.length>0;if(a)return t;return null},_getPreviewCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var e=this.get("model");var t=e.get("previewCollectionId");var a=_.Lang.isString(t)&&t.length>0;if(a)return t;return null},_getServiceId:function(){return null},_getSocialFieldNames:function(){return["searchTerm","refresh","unsafeSearch"]},_getSocialData:function(){var t={};var e=this._getSocialFieldNames();var a=this.get("model");_.Array.each(e,function(e){t[e]=a.get(e)},this);return t},_getUpdateData:function(t){var a={};var e="";var i=this._getSocialFieldNames();var n=this.get("dialog").getField("collectionId");_.Lang.isValue(n)&&(e=n.get("data"));if(_.Lang.isValue(t))if(t.get("searchFlag")){a={collectionId:t.get("socialSearch").collectionId,connectedAccountId:e,socialCollectionId:t.get("socialSearch").collectionId,previewCollectionId:t.get("previewCollectionId"),preview:t.get("preview"),status:t.get("socialSearch").status,searchId:t.get("socialSearch").id};_.Array.each(i,function(e){_.Lang.isValue(t.get(e))&&(a[e]=t.get(e))})}else{a={collectionId:t.get("socialSearch").collectionId,connectedAccountId:null,socialCollectionId:null,previewCollectionId:null,preview:false,status:t.get("socialSearch").status,searchId:t.get("socialSearch").id};_.Array.each(i,function(e){_.Lang.isValue(t.get(e))&&(a[e]=null)})}else{a={collectionId:e,connectedAccountId:e,socialCollectionId:null,previewCollectionId:null,preview:false};this.get("model").set("enable-search",false);this.get("dialog").getField("enable-search").set("data",false);_.Array.each(i,function(e){a[e]=null})}return a},_updateData:function(i){var n=this.get("dialog");var e=this._getSocialFieldNames();var t=n.getField("collectionId");var a=n.getField("socialCollectionId");var s=n.getField("previewCollectionId");var r=n.getField("connectedAccountId");var o=i.previewCollectionId;var l=n.getField("status");var c=n.getField("searchId");i.preview||(o=null);_.Lang.isValue(t)&&t.set("data",i.connectedAccountId);_.Lang.isValue(a)&&a.set("data",i.socialCollectionId);_.Lang.isValue(s)&&s.set("data",o);_.Lang.isValue(r)&&r.set("data",i.connectedAccountId);_.Lang.isValue(l)&&l.set("data",""+i.status);_.Lang.isValue(c)&&c.set("data",""+i.searchId);this.get("model").setAttrs({collectionId:i.collectionId,socialCollectionId:i.socialCollectionId,previewCollectionId:o,connectedAccountId:i.connectedAccountId,status:i.status,searchId:i.searchId});_.Array.each(e,function(e){var t=n.getField(e);var a=i[e];_.Lang.isValue(t)&&t.set("data",a);this.get("model").set(e,a)},this)},_getAccount:function(t){var e=this._isValidAccountForSearch();var a=this.get("dialog");var i=this.get("model");var n=i.get("collectionId");var s=e&&this._isSearching();var r=i.get("connectedAccountId");var o=this._getServiceId();var l=a.getField("collectionId");if(!_.Lang.isValue(l))return null;var c=l.get("data");if(!_.Lang.isValue(c)||""===c)return null;var d=_.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(_.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===o)return e.get("collectionId")===(r||n)}).item(0);if(d&&!s)i.set("collectionId",d.id);else if(d){var u=a.getField("connectedAccountId");i.set("connectedAccountId",d.id);_.Lang.isValue(u)&&u.set("data",d.id)}return d},_getCurrentAccount:function(t){var e=this.get("dialog");var a=this.get("model");var i=a.get("collectionId");var n=this._getServiceId();var s=e.getField("collectionId");if(_.Lang.isValue(s)){var r=s.get("data");_.Lang.isValue(r)&&"add-account"!==r&&(i=r)}var o=_.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(_.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===n)return e.get("collectionId")===i}).item(0);return o},_isSearching:function(){var e=this.get("dialog");var t=e.getField("enable-search");return!!t&&t.get("data")},_getWebserviceData:function(e){var t=this.get("model");if(!t)return{searchFlag:false,socialCollectionId:""};var a={search:true};var i=this.get("socialDataModel");var n=this.get("dialog");var s=this._isValidAccountForSearch();var r=this._getAccount();var o=this._getSocialCollectionId();var l=this._getPreviewCollectionId();var c=this._isSearching();var d=this._getSocialData();var u=this._getSocialFieldNames();var g=this._getServiceId();var p=t.get("pageCollectionId");var h=t.get("containingItemId");var f=t.get("status");var m=t.get("searchId");var v=t.get("searchTerm");var b=!!t.get("unsafeSearch");var y=p;var S=_.Squarespace.SocialSearchReferenceType.PAGE;if(_.Lang.isValue(h)){y=h;S=_.Squarespace.SocialSearchReferenceType.BLOG_POST}else _.Lang.isValue(y)||(S=_.Squarespace.SocialSearchReferenceType.TEMPLATE_INSTALLATION);_.Lang.isValue(f)&&""!==f&&"undefined"!==f||(f=_.Squarespace.SocialSearchStatus.UNDEFINED);_.Lang.isValue(m)&&""!==m&&"undefined"!==m||(m=null);i.setAttrs({socialSearch:{id:m,collectionId:o,referenceId:y,referenceType:S,serviceProvider:g,status:f,searchTerm:v,unsafeSearch:b},searchFlag:c,previewCollectionId:l,preview:e,error:null});_.Lang.isValue(r)&&(a.account=r);_.Array.each(u,function(e){i.set(e,d[e])});var q=s&&this._isSocialSearchEnabled()&&c;if(!e&&!_.Lang.isValue(r)){new _.Squarespace.Widgets.Alert({"strings.title":C("Connect an Account"),"strings.message":C("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});n.allowEditing();return{search:q}}if(!q&&!e)return{search:false};a.socialDataModel=i;return a},_onSendRequested:function(e){var t=this._getWebserviceData(false);if(t.search){if(_.Lang.isValue(t.account)){e.preventDefault();t.search&&this._syncAccount(t,true)}}else{var a=this._getUpdateData();this._updateData(a);this.fire("collectionSynced")}},_syncAccount:function(a,i){var n=a.socialDataModel;var s=this;var r=this.get("dialog");var e=n.get("preview");var t=this._validateCriteria(e);if(!t){r.allowEditing();return}n.save(function(e){if(_.Lang.isValue(e)){new _.Squarespace.Widgets.Information({"strings.title":C("Sync Error"),"strings.message":e.responseJSON.message});r.allowEditing();i&&s.fire("collectionSyncFailedWithError");r.allowEditing()}else{a.account.set("pullEnabled",true);if(n.get("synced")){if(s._isSocialSearchEnabled()){var t=s._getUpdateData(n);s._updateData(t)}i&&s.fire("collectionSynced")}else i&&s._afterSyncAccount()}})},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=n.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;var i=this._isValidAccountForSearch();a.push({ctor:_.Squarespace.DialogFields.Check,name:"enable-search",config:{"strings.title":C("Search"),"strings.description":C("Display results filtered by hashtag, mention, or a specific topic (requires a connected account)."),data:e.enableSearch,visible:i&&this._isSocialVisible()}});a.push({ctor:_.Squarespace.DialogFields.Description,name:"enable-search-disabled",config:{text:C("There is no valid account connected yet. Select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one."),visible:!i}});a.push({ctor:_.Squarespace.DialogFields.Text,config:{name:"socialCollectionId",maxLength:100,className:"thin",visible:false,strings:{title:C("Social Collection Id"),description:C("The collection id assigned to the block when the block is created as a social search block.")}}});a.push({ctor:_.Squarespace.DialogFields.Text,config:{name:"previewCollectionId",maxLength:100,className:"thin",visible:false,strings:{title:C("Social Preview Collection Id"),description:C("The collection id assigned to the block when the block is created as a social search block.")}}});a.push({ctor:_.Squarespace.DialogFields.Text,config:{name:"status",maxLength:100,className:"thin",visible:false,strings:{title:C("Social Search Status"),description:C("The status assigned to the block when the block is created as a social search block.")}}});a.push({ctor:_.Squarespace.DialogFields.Text,name:"searchId",config:{"strings.placeholder":C("Social Search ID"),data:e.searchId,maxLength:100,className:"thin",visible:false}});return t}},{ATTRS:{socialSearchEnabled:{value:true},socialDataModel:{value:new _.Squarespace.Models.SocialData}}})},"1.0",{requires:["base","model","squarespace-block-summary-model-editor","squarespace-dialog-button","squarespace-dialog-select","squarespace-dialog-slider","squarespace-model-editor","squarespace-models-connected-accounts","squarespace-models-social-data","squarespace-widgets-information"]})},7834:function(e,t){YUI.add("squarespace-models-social-data",function(e){var t=e.Base.create("social-data",e.Model,[e.Squarespace.ModelSync.REST],{url:"/api/social-search/activity",isNew:function(){return this.get("preview")&&!e.Lang.isValue(this.get("previewCollectionId"))||!this.get("preview")&&!e.Lang.isValue(this.get("socialCollectionId"))}},{ATTRS:{socialSearch:{},socialCollectionId:{},previewCollectionId:{},searchFlag:{},preview:{}}});e.namespace("Squarespace.Models").SocialData=t},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},7835:function(e,t){YUI.add("squarespace-block-instagram-model",function(e){e.namespace("Squarespace.ContentModel").InstagramBlock=e.Base.create("InstagramModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},7836:function(e,t){YUI.add("squarespace-dialog-warning-banner",function(t){t.namespace("Squarespace");var a=t.Squarespace.DialogFields.WarningBanner=t.Base.create("warningBanner",t.Squarespace.DialogField2,[],{initializer:function(e){this.set("strings.warn",this.get("connectWarn"))},bindUI:function(){a.superclass.bindUI.call(this);if(t.Lang.isValue(this.get("moreInfo"))){var e=this.get("moreInfo");this._tooltip=new t.Squarespace.ToolTip({target:e.target,title:e.title,body:e.body,clickToShow:true})}this.get("contentBox").delegate("click",function(){var e=this.get("linkAction");t.Lang.isFunction(e)&&e()},".link-action",this)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");e.append('<div class="warning-wrapper"><div class="warn-msg"><img src="/universal/images-v6/dialog/tiny-alert.png"><div class="message-text"></div></div>');e.one(".message-text").setContent(this.get("strings.warningMessage"))},destroy:function(){a.superclass.destroy.call(this);t.Lang.isValue(this._tooltip)&&this._tooltip.destroy()}},{CSS_PREFIX:"sqs-warning-banner",ATTRS:{moreInfo:{value:null},strings:{warningMessage:{value:null}},linkAction:{validator:t.Squarespace.AttrValidators.isFunctionOrNull}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-dialog-field-2","squarespace-enum","squarespace-ui-base","squarespace-util"]})},7837:function(e,t,a){var i=a(114);var n=a(87);var s=a(1342);YUI.add("squarespace-block-link",function(e){var t={linkTitle:"",linkTarget:"",newWindow:false};e.namespace("Squarespace.Block").Link=e.Base.create("block-link",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-link",ATTRS:{editor:{valueFn:function(){if(s.isMobileContentEditingEnabled()||i.isFeatureEnabled(n.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Link}},defaultContentModel:{value:t}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","squarespace-block-link-editor","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7838:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-link-editor",function(e){var t={width:335,tabs:[{title:i("Edit External Link"),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i("Below, enter the title and the URL of the link you would like to add.")}},{type:"text",name:"linkTitle",submitOnEnter:true,title:i("Link Title"),titleStyle:"inline",style:"title"},{type:"text",name:"linkTarget",submitOnEnter:true,title:i("http://…"),titleStyle:"inline",style:"normal"},{ctor:e.Squarespace.DialogFields.Check,config:{type:"check",name:"newWindow",title:i("Open in New Window"),description:i("When clicked, open this link in a new window.")}}]}]};e.namespace("Squarespace.Block.Editor").Link=e.Base.create("link-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Link")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Link")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Link=e.Base.create("block-link-editor",e.Squarespace.ModelEditorDialog,[],{_sanitizeURL:function(e){if(null===e.match(/^[(?!\/\/)(http:\/\/|https:\/\/|\/|mailto:)].*/i))return"http://"+e;return e},sanitizeDialogData:function(e){e.linkTarget&&e.linkTarget.length>4&&(e.linkTarget=this._sanitizeURL(e.linkTarget));return e}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description"]})},7839:function(e,t,a){var i=a(100);var n=a(114);var s=a(87);var o=a(24).t;var l=a(5812);var c=a(213);var d=a(276);var r=a(9046);var u=a(1342);var g=r.MapView;var p=r.loadGoogleMapsApi;var h=window.atob("QUl6YVN5QkxmSzJJUWtNZElfOG9oN2lGSjk5czNaRU5Vd3hNTnVz");var f=60;YUI.add("squarespace-block-map",function(r){var t={location:{mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12},vSize:12,style:l.Styles.GRAYSCALE,labels:true,terrain:false,controls:false};if(Static.SQUARESPACE_CONTEXT){var e=Static.SQUARESPACE_CONTEXT.website;e&&e.location&&(t.location=r.merge(t.location,e.location))}r.namespace("Squarespace.Block");r.Squarespace.Block.Map=r.Base.create("block-map",r.SQS.LayoutEngine.Block.ModelSyncBase,[r.SQS.LayoutEngine.Block.MixinAspectRatio,r.Squarespace.Block.PremiumBlockMixin],{initializer:function(e){this._mapHolder=r.Node.create("<div class='sqs-map-wrapper'>");this.get("contentBox").append(this._mapHolder);this.set("mapNode",this._mapHolder.getDOMNode());this.after("resized",this._onResize,this);e.model&&this._isMapDataBad(e.model.location)&&this._restoreBadData()},destructor:function(){this.updateMapPosition.flush();if(this.queuedRender){this.queuedRender.flush();this.queuedRender=null}},renderUI:function(){this._renderBlock()},_onResize:function(){if(this.queuedRender)return;try{var e=this.get("mapView");r.Lang.isValue(e)&&e.redraw()}catch(e){console.log("google does not exist for map resizing")}},_renderBlock:function(){if(this.queuedRender)return;if(!this.get("rendered")){this.after("renderedChange",this._renderBlock,this);return}if(this.get("mapView")){this.updateMapPosition();this.fire("widget:contentUpdate")}else{var t=this._getViewData();var a=d.setResolvedWebsiteLocaleFromContext();var i=this._getStackFinished();this.queuedRender=r.later(f,this,function e(){this.updateMapPosition.flush();c("google_maps_map_load_on_site");g.createView(t.ui,t.location,this._mapHolder.getDOMNode(),a).then(r.bind(function(e){this.set("mapView",e);this._mapHolder.__view=e;this._mapHolder.fire("map-ready");this.fire("widget:contentUpdate");this.queuedRender=null;i()},this),function e(){console.log("Could not load Maps")}).catch(function(e){console.error(e)})})}},updateMapPosition:i(function(){var e=this.get("model").toJSON();var t=e.location;var a=this.get("mapView");this._didMapCenterChange()&&a.updateCenter(t.mapLat,t.mapLng);a.marker&&this._didMarkerPositionChange()&&a.updateMarker(t.markerLat,t.markerLng);r.Lang.isValue(t.mapZoom)&&a.setZoom(t.mapZoom);a.updateUIOptions(this._getViewData().ui)},f),_didMapCenterChange:function(){var e=this.get("mapView").getCenter();var t=this.get("model").toJSON().location;return e.lat!==t.mapLat||e.lng!==t.mapLng},_didMarkerPositionChange:function(){var e=this.get("mapView").getMarkerPosition();var t=this.get("model").toJSON().location;return e.lat!==t.markerLat||e.lng!==t.markerLng},_getSearchableAddress:function(e){var t=[];e.addressLine1&&t.push(e.addressLine1);e.addressLine2&&t.push(e.addressLine2);e.addressTitle&&!t.length&&t.unshift(e.addressTitle);e.addressCountry&&t.push(e.addressCountry);if(!t.length)return"";return t.join(", ")},_isMapDataBad:function(e){return!e||!r.Lang.isValue(e.mapLat)||!r.Lang.isValue(e.mapLng)||!r.Lang.isValue(e.mapZoom)},_restoreBadData:function(){var i={location:{}};var n=i.location;var e=this.get("model").toJSON().location;var s=this._getSearchableAddress(e);if(!e||!s){n=t.location;this.get("model").setAttrs(i);return}r.Lang.isValue(e.mapZoom)||(n.mapZoom=t.location.mapZoom);if(r.Lang.isValue(e.markerLat)&&r.Lang.isValue(e.markerLng)){n.markerLat=n.mapLat;n.markerLng=n.mapLng;this.get("model").setAttrs(i);return}c("google_maps_map_api_load_on_site");p("en-US",h).then(r.bind(function(e){var t=new e.Geocoder;var a={address:s};c("google_maps_map_api_geocode_on_site");t.geocode(a,r.bind(function(e,t){if(t===r.config.win.google.maps.GeocoderStatus.OK){var a=e[0].geometry.location;n.mapLat=a.lat();n.mapLng=a.lng();this.get("model").setAttrs(i)}else new r.Squarespace.Widgets.Alert({"strings.title":o("Lookup Failed"),"strings.message":o("Address lookup was not successful: {geocodeResponseStatus}",{geocodeResponseStatus:t})})}))},this))},_getViewData:function(){return l.mapModelToViewConfig(this.get("model").toJSON())}},{CSS_PREFIX:"sqs-block-map",ATTRS:{editor:{valueFn:function(){if(u.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return r.Squarespace.Block.Editor.Schema;return r.Squarespace.Block.Editor.Map}},defaultContentModel:{value:t},mapNode:{valueFn:function(){return this.get("contentBox").getDOMNode()}},mapView:{value:null,validator:r.Squarespace.AttrValidators.isNullOrInstanceOf(g)}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-map-editor","squarespace-widgets-alert","squarespace-premium-block-mixin"]})},7840:function(e,t,a){var i=a(24).t;var n=a(207);var s=a(5812);var r="https://maps.google.com/help/terms_maps.html";var o="https://policies.google.com/privacy";YUI.add("squarespace-block-map-editor",function(e){var t={width:375,height:460,title:i("Map"),tabs:[{tabTitle:i("Address"),icon:"/universal/images-v6/icons/icon-map-16-light.png",fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Enter an address to drop a pin on this map. To resize the map, drag the bottom handle.<br><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.MAP_EDITOR})}},{ctor:e.Squarespace.DialogFields.Map,config:{anchorMap:true,height:150,countHeight:true,name:"location",title:i("Location"),titleStyle:"inline",googleTrackingContext:{productPage:"block-editor",productSection:"main"}}},{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Your use of Google Maps is subject to the Google Maps/Google Earth <a href="{termsOfService}" target="_blank">Additional Terms of Service</a> and the Google <a href="{privacyPolicy}" target="_blank">Privacy Policy</a>.',{termsOfService:r,privacyPolicy:o})}}]},{tabTitle:i("Design"),fields:[{ctor:e.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"style",numeric:true,defaultValue:s.Styles.GRAYSCALE,options:[{value:s.Styles.ORIGINAL,label:i("Original")},{value:s.Styles.GRAYSCALE,label:i("Grayscale")},{value:s.Styles.SATELLITE,label:i("Satellite")},{value:s.Styles.MINIMAL_LIGHT,label:i("Minimal Light")},{value:s.Styles.MINIMAL_DARK,label:i("Minimal Dark")},{value:s.Styles.MINIMAL_BLUE,label:i("Minimal Blue")}]}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Labels"),name:"labels",defaultValue:true}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Terrain"),name:"terrain",defaultValue:false}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Controls"),name:"controls",defaultValue:false}}]}]};e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Map=e.Base.create("block-map-editor",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.after("editingChange",this._onMapEditingChange,this);this.afterHostEvent("markerChange",this._sendMarkerEvent,this)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Map")},_sendMarkerEvent:function(){e.one(this.get("mapNode")).fire("marker-created")},_onMapEditingChange:function(e){e.newVal?this._startEditing():this._stopEditing()},afterLayoutDrag:function(){this.get("host").fire("resized")},_startEditing:function(){var e=this.get("mapView");e&&s.updateUiOptions(e,{draggable:true,scrollwheel:true,disableDefaultUI:false,markerDraggable:true,linkOnClick:false})},_stopEditing:function(){var e=this.get("mapView");e&&s.updateUiOptions(e,{draggable:false,scrollwheel:false,disableDefaultUI:true,markerDraggable:false,linkOnClick:true})}},{NS:"blockEditor",ATTRS:{resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},dialogEditorAnchorNode:{getter:function(){return e.one(this.get("host").get("mapNode"))}},map:{getter:function(e){return this.get("mapNode").__map}},mapNode:{valueFn:function(){return this.get("host").get("mapNode")}},blockName:{value:i("Map")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Map=e.Base.create("block-map-model-editor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._bindMapStyleChange();this._toggleTerrainField()},this)},destructor:function(){s.destroyUpdater(this.get("mapView"))},sanitizeDialogData:function(e){delete e.aspectRatio;this.get("model").get("aspectRatio")&&delete e.vSize;return e},_bindMapStyleChange:function(){var e=this.get("dialog");e.getField("style").after("dataChange",this._updateMapStyle,this);e.getField("style").after("dataChange",this._toggleTerrainField,this);e.getField("labels").after("dataChange",this._updateMapStyle,this);e.getField("terrain").after("dataChange",this._updateMapStyle,this);e.getField("controls").after("dataChange",this._updateMapStyle,this)},_toggleTerrainField:function(){var e=this.get("dialog");var t=e.getField("style").get("data");var a=e.getField("terrain");s.getStyleById(t).satellite?a.hide():a.show()},_updateMapStyle:function(){var e=this.get("dialog");var t=this.get("dialog").fields.location._mapDisplay;var a=t.__view;s.updateUiOptions(a,{style:s.getStyleById(e.getField("style").get("data")),showLabels:e.getField("labels").get("data"),showTerrain:e.getField("terrain").get("data"),showControls:e.getField("controls").get("data")})}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-description","squarespace-dialog-map","squarespace-model-editor"]})},7841:function(e,t,a){var r=a(24).t;var o=a(100);var i=a(2877);var l=i.DISABLE_DRAG_SELECTION_CLASSNAME;var c=a(4117);var d=a(213);YUI.add("squarespace-dialog-map",function(v){var i=13;var n=function(e){e.stopPropagation()};v.namespace("Squarespace.DialogFields");var s=v.Squarespace.DialogFields.Map=v.Base.create("dialogMap",v.Squarespace.DialogField2,[],{initializer:function(e){e.googleTrackingContext&&(this.googleTrackingContext=e.googleTrackingContext);e.panel&&(this.panel=e.panel)},destructor:function(){this.geocodeAndUpdateAddress.flush();this._locker&&this._locker.cancel();if(this._autocomplete){this._autocomplete.destroy();this._autocomplete=null}},renderUI:function(){s.superclass.renderUI.call(this);if(this.get("anchorMap"))this._mapDisplay=this.panel.getAnchorEl();else{this._initMapEl();this.show()}this._renderGoogleAutoComplete()},bindUI:function(){s.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one(".map-address-fields").all(".field-input");t.each(function(e){e.on("keyup",this._updateDataBasedOn,this);e.on("focus",this._updateDataAfterBlur,this)},this);e.on("click",n);this._mapDisplay.on("click",n);var a=this.get("dialog")||this.get("panel");v.Lang.isValue(a)&&(this._rerenderHandler=a.after("tab-focused",function(e){this.map&&this._drawMap()},this));this._bindGoogleAutoComplete()},_renderGoogleAutoComplete:function(){var e=v.Squarespace.Damask.ContextGlobals.fromTop("Y");var t=this.get("boundingBox");d("google_maps_map_api_load_on_edit");this._autocomplete=new e.Squarespace.Widgets.GooglePlacesAutocomplete({inputNode:t.one("input.map-address-line1"),className:"sqs-dialog-map-google-autocomplete",googleTrackingContext:this.googleTrackingContext||{}});var a=t.ancestor(".standard-dialog-wrapper")||v.one("body");this._autocomplete.render(a);this._autocomplete.get("boundingBox").setStyle("zIndex",v.Squarespace.DIALOG_ZINDEX_BASE+10)},_bindGoogleAutoComplete:function(){this._lockedForAutocomplete=false;this._autocomplete.on("listMouseDown",function(){this._lockedForAutocomplete=true;this._locker=v.later(1e3,this,function(){this._lockedForAutocomplete=false},this)},this);this._autocomplete.on("keyboardContinue",function(){this._lockedForAutocomplete=true},this);this._autocomplete.on("select",function(){this._lockedForAutocomplete=true},this);this._autocomplete.on("placeDetails",this._populateFieldsFromAutocomplete,this)},_initMapEl:function(){this._mapDisplay=v.Node.create('<div class="field-map '+l+'"><div class="field-map-inner">'+r("Use the field above to select a location.")+"</div></div>");this.get("contentBox").one(".field-wrapper").append(this._mapDisplay);this.get("height")&&this._mapDisplay.setStyle("height",this.get("height"))},_updateDataAfterBlur:function(e){e.target&&e.target.once("blur",this._updateDataBasedOn,this)},_populateFieldsFromAutocomplete:function(e){var t=this.get("contentBox");var a=t.one(".map-address-line2");t.one(".map-address-line1").set("value",e.place.address);a.set("value",e.place.fullLocality);t.one(".map-address-country").set("value",e.place.country);this._lockedForAutocomplete=false;var i;if(this.get("showTitle")){var n=t.one(".map-address-title");n.focus();i=n.get("value")}else{a.focus();i=this.get("data").title}var s={addressTitle:i,addressLine1:e.place.address,addressLine2:e.place.fullLocality,addressCountry:e.place.country,markerLat:this.map.center.lat(),markerLng:this.map.center.lng()};if(!this.didDataChange(s))return;this.set("data",s,{silent:true});this.geocodeAndUpdateAddress()},_updateDataBasedOn:function(e){if(this._lockedForAutocomplete)return;if("blur"===e.type||e.keyCode&&e.keyCode===i){var t=this.get("contentBox");var a={addressLine1:t.one(".map-address-line1").get("value"),addressLine2:t.one(".map-address-line2").get("value"),addressCountry:t.one(".map-address-country").get("value")};this.get("showTitle")&&(a.addressTitle=t.one(".map-address-title").get("value"));if(e.keyCode){a.markerLat=this.map.center.lat();a.markerLng=this.map.center.lng()}if(!this.didDataChange(a))return;this.set("data",v.merge(this.get("data"),a),{silent:true});this.geocodeAndUpdateAddress()}},_clearLatLngData:function(e){e=v.Lang.isValue(e)?e:this.get("data");delete e.markerLat;delete e.markerLng;delete e.mapLat;delete e.mapLng;return e},geocodeAndUpdateAddress:o(function(){var r=this.get("data");var e=this.getSearchableAddress(r);if(!v.Lang.isValue(e))return;var t={address:e};var a=function(e,t){if(t===this.GMaps.GeocoderStatus.OK){var a=e[0].geometry.location;var i=a.lat();var n=a.lng();var s={mapLat:i,mapLng:n};s.markerLat=i;s.markerLng=n;this._updateMap({markerLatLng:v.Lang.isValue(s.markerLat)?a:null,mapCenterLatLng:a,mapOnlyUpdate:true});this.set("data",v.merge(r,s))}else this.showMessageForGeocoderStatus(t);v.Lang.isValue(this.panel)&&this.panel.fire("geocode",this)};d("google_maps_map_api_geocode_on_edit");this._geocoder.geocode(t,v.bind(a,this))},120),show:function(){this.set("visible",true);this._showMap()},_showMap:function(){this.mapView?this._refreshMapAndCenter():this.get("anchorMap")&&!this._mapDisplay.__view?this._mapDisplay.on("map-ready",function(e){this._drawMap()},this):this._drawMap()},_refreshMapAndCenter:function(){this._mapDisplay.setStyle("display","block");this.mapView&&this.mapView.centerMarker()},_drawMap:function(){if(this.get("destroyed"))return;if(this.get("anchorMap")){this.mapView=this._mapDisplay.__view;this._prepareMap()}else{var e=v.merge(this.get("defaultLocation"),this.get("data"));var t={disableDefaultUI:false,showControls:true,scrollwheel:this.get("scrollwheelEnabled"),linkOnClick:false};d("google_maps_map_load_on_edit");c.createView(t,e,this._mapDisplay.getDOMNode()).then(v.bind(function(e){this.mapView=e;this._prepareMap()},this)).catch(function(e){console.error(e)})}},_prepareMap:function(){this.map=this.mapView.map;this.GMaps=this.mapView.GMaps;this._geocoder=new this.GMaps.Geocoder;this.marker=this.mapView.marker;this.mapView.updateUIOptions({markerDraggable:true});this.GMaps.event.addListener(this.map,"idle",v.bind(this._updateDataFromGoogleMaps,this));this.GMaps.event.addListener(this.map,"dblclick",v.bind(this._updateMarker,this));this.bindMarkerDragEvent();this._mapDisplay.on("marker-created",this.bindMarkerDragEvent,this);this._setInitialState()},_updateMarker:function(e){v.Lang.isValue(e.latLng)&&this._updateMap({markerLatLng:e.latLng})},_updateDataFromGoogleMaps:function(){var e;var t=this.map;var a=this.marker;var i={};if(v.Lang.isNumber(t.center.lat())&&v.Lang.isNumber(t.center.lng())){i.mapLat=t.center.lat();i.mapLng=t.center.lng();i.mapZoom=t.getZoom()}if(a&&a.visible){i.markerLat=a.getPosition().lat();i.markerLng=a.getPosition().lng()}if(this.didDataChange(i)){e=v.merge(this.get("data"),i);this.set("data",e,{silent:true})}},_updateMap:function(e){if(this._mapDisplay.ancestor(".sqs-block",true))return;if(this.map){v.Lang.isValue(e.markerLatLng)&&this._setMarkerPosition(e.markerLatLng,e.mapOnlyUpdate);v.Lang.isUndefined(e.mapCenterLatLng)||this.isContainedInMap(this.map,e.markerLatLng)||this._setMapPosition(e.mapCenterLatLng,e.zoom)}},_setMapPosition:function(e,t){v.Lang.isValue(e)&&this.mapView.updateCenter(e.lat(),e.lng());v.Lang.isValue(t)&&this.mapView.setZoom(t)},_setMarkerPosition:function(e,t){this.mapView.updateMarker(e.lat(),e.lng());t||this._onMarkerChange()},bindMarkerDragEvent:function(){this.marker||(this.marker=this.mapView.marker);if(this.marker){var e=this.GMaps;v.Lang.isUndefined(this.markerDragListener)||e.event.removeListener(this.markerDragListener);this.markerDragListener=e.event.addListener(this.marker,"dragend",v.bind(this._onMarkerChange,this))}},isContainedInMap:function(e,t){if(v.Lang.isValue(e)&&v.Lang.isValue(t)){var a=e.getBounds();if(v.Lang.isValue(a))return a.contains(t)}return false},_onMarkerChange:function(){d("google_maps_map_api_geocode_on_edit");this._geocoder.geocode({location:this.marker.getPosition()},v.bind(function(e,t){t===this.GMaps.GeocoderStatus.OK?this.updateFormFields(e[0].address_components):this.showMessageForGeocoderStatus(t)},this))},_setInitialState:function(){var e=this.get("data");var t=this.get("contentBox");if(v.Lang.isObject(e)){e.addressTitle&&this.get("showTitle")&&t.one(".map-address-title").set("value",e.addressTitle);e.addressLine1&&t.one(".map-address-line1").set("value",e.addressLine1);e.addressLine2&&t.one(".map-address-line2").set("value",e.addressLine2);e.addressCountry&&t.one(".map-address-country").set("value",e.addressCountry);if(e.forceLoc){this.geocodeAndUpdateAddress();return}var a=this.GMaps;if(this.map&&!v.Lang.isUndefined(a)){var i;var n;e.markerLat&&e.markerLng&&(i=new this.GMaps.LatLng(e.markerLat,e.markerLng));e.mapLat&&e.mapLng&&(n=new this.GMaps.LatLng(e.mapLat,e.mapLng));this._updateMap({markerLatLng:i,mapCenterLatLng:n,zoom:e.mapZoom,mapOnlyUpdate:true})}}},updateFormFields:function(e){var t=this.get("contentBox");var a=this.get("data")||{};var i=t.one(".map-address-line1");var n=t.one(".map-address-line2");var s=t.one(".map-address-country");var r;var o;var l;var c;var d;var u;var g=[];var p=[];v.Object.each(e,function(e){if(-1!==e.types.indexOf("locality")){o=e.short_name;return}if(-1!==e.types.indexOf("administrative_area_level_1")){l=e.short_name;return}if(-1!==e.types.indexOf("country")){r=e.long_name;return}if(-1!==e.types.indexOf("route")){d=e.short_name;return}if(-1!==e.types.indexOf("street_number")){c=e.short_name;return}-1!==e.types.indexOf("postal_code")&&(u=e.short_name)},this);c&&g.push(c);d&&g.push(d);o&&p.push(o);l&&p.push(l);u&&p.push(u);if(i){i.set("value",g.join(" "));a.addressLine1=i.get("value")}if(n){n.set("value",p.join(", "));a.addressLine2=n.get("value")}if(s){s.set("value",r);a.addressCountry=s.get("value")}if(v.Lang.isValue(this.marker)){var h=this.marker.getPosition().lng();var f=this.marker.getPosition().lat();var m={markerLat:f,markerLng:h,mapLat:f,mapLng:h};a=v.merge(a,m)}this.set("data",a)},showMessageForGeocoderStatus:function(e){var t=this.GMaps;e===t.GeocoderStatus.OVER_QUERY_LIMIT?new v.Squarespace.Widgets.Alert({"strings.title":r("Too Many Queries"),"strings.message":r("You have exceeded Google Maps' maximum query rate. Please wait a moment before resuming.")}):e!==t.GeocoderStatus.ZERO_RESULTS&&new v.Squarespace.Widgets.Alert({"strings.title":r("Lookup Failed"),"strings.message":r("Address lookup was not successful: {geocodeStatus}",{geocodeStatus:status})})},getSearchableAddress:function(e){var t=[];""!==e.addressLine1&&t.push(e.addressLine1);""!==e.addressLine2&&t.push(e.addressLine2);""===e.addressTitle||t.length||t.unshift(e.addressTitle);""!==e.addressCountry&&t.push(e.addressCountry);return t.join(", ")},_roundedEqual:function(e,t){return v.Lang.isNumber(e)&&v.Lang.isNumber(t)&&Number(e).toFixed(6)===Number(t).toFixed(6)},didDataChange:function(e){var o=(e?this.get("data"):this._initialData)||{};var t=e||this.get("data");var l=this.get("defaultLocation");if(!v.Lang.isObject(t))return false;return v.Object.some(t,function(e,t){var a=o[t];var i=e===o[t]||this._roundedEqual(e,a);if(i)return false;var n=!v.Object.hasKey(l,t);var s=v.Lang.isValue(a);var r=this._roundedEqual(e,l[t]);return n||!(r&&s)},this)}},{CSS_PREFIX:"sqs-maps",HANDLEBARS_TEMPLATE:"dialog-map.html",ATTRS:{anchorMap:{},scrollwheelEnabled:{value:true},data:{setter:o(function(e){return e},100,{leading:true,trailing:true})},defaultLocation:{valueFn:function(){var e={mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12};if(Static.SQUARESPACE_CONTEXT){var t=Static.SQUARESPACE_CONTEXT.website;t&&t.location&&(e=v.merge(e,t.location))}return e}},strings:{value:{placeholderAddressTitle:r("Business Name"),placeholderAddress1:r("Address"),placeholderAddress2:r("City, State, Zip"),placeholderAddressCountry:r("Country")}},showTitle:{value:true,validator:v.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-map-template","squarespace-util","squarespace-widgets-alert","squarespace-widgets-google-places-autocomplete"]})},7842:function(e,t){YUI.add("squarespace-dialog-map-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-map.html"]=e(function(e,t,a,i,n){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);n=n||{};var s="",r,o="function",l=this.escapeExpression,c=this;function d(e,t){var a="",i;a+='\n      <input class="field-input map-address-title" type="text" placeholder="'+l((i=(i=e.strings,null==i||false===i?i:i.placeholderAddressTitle),typeof i===o?i.apply(e):i))+'" spellcheck="false" style="font-weight: 500;"/>\n    ';return a}s+='<div class="field-wrapper text-field-wrapper clear major">\n  <div class="map-address-fields">\n    ';r=a["if"].call(t,t.showTitle,{hash:{},inverse:c.noop,fn:c.program(1,d,n),data:n});(r||0===r)&&(s+=r);s+='\n    <input class="field-input map-address-line1" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddress1),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n    <input class="field-input map-address-line2" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddress2),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n    <input class="field-input map-address-country" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddressCountry),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n  </div>\n</div>';return s})})();var t="dialog-map.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},7843:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-google-places-autocomplete",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.GooglePlacesAutocomplete=e.Base.create("GooglePlacesAutoCompleteWidget",e.Squarespace.Widgets.ScrollingAutoCompleteList,[e.Squarespace.Mixins.GooglePlacesAutocomplete],{},{CSS_PREFIX:e.Squarespace.Widgets.ScrollingAutoCompleteList.CSS_PREFIX,ATTRS:{strings:{value:{items_available:i("Suggestions are available. Use up and down arrows to select suggestions.")}}}})},"1.0",{requires:["base","squarespace-mixins-google-places-autocomplete","squarespace-scrolling-auto-complete-list"]})},7844:function(e,t,a){var o=a(100);var l=a(285);var c=a(213);var d=a(6016);var u="en-US";YUI.add("squarespace-mixins-google-places-autocomplete",function(f){f.namespace("Squarespace.Mixins");var m={POSTAL_CODE:"postal_code",COUNTRY:"country",LOCALITY:"locality",ROUTE:"route",STREET_NUMBER:"street_number",STREET_ADDRESS:"street_address",ADMIN_LEVEL_1:"administrative_area_level_1",SUBLOCALITY:"sublocality",POSTAL_TOWN:"postal_town",NEIGHBORHOOD:"neighborhood",PREMISE:"premise"};var i=f.Object.values(m);var n=f.Squarespace.Localities.COUNTRY_OPTIONS;var s=["address"];var t="sqs-google-places-autocomplete-mixin";var e="placeDetails";var r="address_component";f.Squarespace.Mixins.GooglePlacesAutocomplete=f.Base.create("GooglePlacesAutocomplete",f.Base,[],{initializer:function(){this.publish(e);f.Do.after(this._afterRenderUI,this,"renderUI",this);f.Do.after(this._afterBindUI,this,"bindUI",this);this.after("render",this._enableBrowserAutoComplete,this);this.sessionToken=l();this.setAttrs({source:f.bind(this._performAutoComplete,this),enableCache:false,resultTextLocator:"description",resultFilters:this._filterResults,resultFormatter:this._formatResults,minQueryLength:3})},_afterRenderUI:function(){var e=this.get("contentBox");e.addClass(t);e.one(".sqs-scroll-ac-scroll-container").append('<div class="google-required-elements"><div class="google-attributions"></div><div class="powered-by-google"></div></div>')},_afterBindUI:function(){this.before("select",this._getDetailsForPrediction,this);this.on("placeDetails",this._fillWithAddressLine1,this);this._inputNode.on("focus",function(){this._inputNode.setAttribute("autocomplete","off");this._inputIsFocused=true},this);this._inputNode.on("blur",function(){this._inputNode.setAttribute("autocomplete","on");this._inputIsFocused=false},this)},_enableBrowserAutoComplete:function(){this._inputNode.setAttribute("autocomplete","on")},_getDetailsForPrediction:function(e){e.halt();var i=e.result.raw;this._getPlaceDetails(i,function(e){var t=this._extractPlaceComponents(e.data);var a=this._buildLocationPayload(t,i);this.fire("placeDetails",{place:a})})},_extractPlaceComponents:function(e){var t=e.address_components;return f.Array.reduce(t,{},function(e,t){var a=f.Array.find(t.types,function(e){return-1!==f.Array.indexOf(i,e)});a?a===m.ADMIN_LEVEL_1?e[a]=t.short_name:a===m.COUNTRY?e[a]=n[t.short_name].title:e[a]=t.long_name:e[a]="";return e})},_buildLocationPayload:function(e,a){var t=f.Object.getValue(e,"street_number")||"";var i=f.Object.getValue(e,"route")||"";var n=f.Object.getValue(e,"country")||"";var s=f.Object.getValue(e,"locality")||"";var r=f.Object.getValue(e,"sublocality")||"";var o=f.Object.getValue(e,"neighborhood")||"";var l=f.Object.getValue(e,"postal_town")||"";var c=[l,s,r,o];var d=f.Array.find(c,function(t){return f.Array.find(a.terms,function(e){return e.value===t})})||s;var u=this._getPreferredStreetNumber(i,t);var g=f.Object.getValue(e,m.ADMIN_LEVEL_1)||"";var p=f.Object.getValue(e,m.POSTAL_CODE)||"";var h=f.Array.filter([d,g,p],function(e){return!!e}).join(", ").trim();return{address:(u+" "+i).trim(),country:n,city:d,state:g,zip:p,fullLocality:h}},_getPreferredStreetNumber:function(e,t){var a=this.get("query");var i=e.split(" ")[0];var n=a.toLowerCase().indexOf(i.toLowerCase());var s=a.substring(0,n).trim();if(s.length>t.length)return s;return t},_performAutoComplete:o(function(e,t){var a={query:e,types:s,language:u,sessiontoken:this.sessionToken};c("google_maps_map_api_autocomplete_on_edit");d.getPlacePredictions(a,this.get("googleTrackingContext")).then(function(e){this._inputIsFocused&&t(e.data)}.bind(this))},250),_getPlaceDetails:function(e,t){var a={placeid:e.place_id,language:u,sessiontoken:this.sessionToken,fields:r};c("google_maps_map_api_autocomplete_on_site");d.getDetails(a,this.get("googleTrackingContext")).then(f.bind(t,this))},_formatResults:function(e,t){return f.Array.map(t,function(n){var e=n.raw.terms;var s=n.raw.matched_substrings;var t=-1!==f.Array.indexOf(n.raw.types,"street_address");var a=e[0].offset+e[0].value.length;var i=e[1].offset+e[1].value.length;var r=t?i:a;return f.Array.map(n.text.split(""),function(e,t){var a=["google-ac-character"];this._indexWithinMatchedSubstring(t,s)&&a.push("google-ac-matched-character");var i='<span class="'+a.join(" ").trim()+'">'+e+"</span>";if(0===t)return'<div class="google-ac-address">'+i;if(t===r)return i+"</div>";if(t===r+1)return'<div class="google-ac-trailing">'+i;if(t===n.text.length)return i+"</div>";return i},this).join("")},this)},_indexWithinMatchedSubstring:function(t,e){return f.Array.some(e,function(e){return t>=e.offset&&t<e.offset+e.length})},_filterResults:function(e,t){return f.Array.filter(t,function(e){return this._predictionHasRouteComponent(e.raw)&&this._predictionContainsCountryInList(e.raw)},this)},_predictionContainsCountryInList:function(t){var e=this.get("countriesAllowed");if(!f.Lang.isArray(e)||0===e.length)return true;return f.Array.find(e,function(e){return-1!==t.description.indexOf(e)})},_predictionHasRouteComponent:function(e){return-1!==f.Array.indexOf(e.types,m.ROUTE)||-1!==f.Array.indexOf(e.types,m.STREET_ADDRESS)||-1!==f.Array.indexOf(e.types,m.PREMISE)}},{ATTRS:{googleTrackingContext:{},countriesAllowed:{validator:f.Squarespace.AttrValidators.isNullOrArray}}})},"1.0",{requires:["autocomplete-highlighters","base","event-custom","squarespace-attr-validators","squarespace-localities","squarespace-util"]})},7846:function(e,t,a){var s=a(24).t;var r=a(717);var o=a(731);YUI.add("squarespace-localities",function(n){var i={"":{title:s("Select a Country"),empty:true}};n.namespace("Squarespace");n.Squarespace.Localities={SPECIAL_KEYS:{DIVIDER:"DIVIDER"},COUNTRY_OPTIONS:n.merge(i,o(r,function(e){return{title:e}})),STATE_OPTIONS:{AL:{title:s("Alabama")},AK:{title:s("Alaska")},AZ:{title:s("Arizona")},AR:{title:s("Arkansas")},CA:{title:s("California")},CO:{title:s("Colorado")},CT:{title:s("Connecticut")},DE:{title:s("Delaware")},FL:{title:s("Florida")},GA:{title:s("Georgia")},HI:{title:s("Hawaii")},ID:{title:s("Idaho")},IL:{title:s("Illinois")},IN:{title:s("Indiana")},IA:{title:s("Iowa")},KS:{title:s("Kansas")},KY:{title:s("Kentucky")},LA:{title:s("Louisiana")},ME:{title:s("Maine")},MD:{title:s("Maryland")},MA:{title:s("Massachusetts")},MI:{title:s("Michigan")},MN:{title:s("Minnesota")},MS:{title:s("Mississippi")},MO:{title:s("Missouri")},MT:{title:s("Montana")},NE:{title:s("Nebraska")},NV:{title:s("Nevada")},NH:{title:s("New Hampshire")},NJ:{title:s("New Jersey")},NM:{title:s("New Mexico")},NY:{title:s("New York")},NC:{title:s("North Carolina")},ND:{title:s("North Dakota")},OH:{title:s("Ohio")},OK:{title:s("Oklahoma")},OR:{title:s("Oregon")},PA:{title:s("Pennsylvania")},RI:{title:s("Rhode Island")},SC:{title:s("South Carolina")},SD:{title:s("South Dakota")},TN:{title:s("Tennessee")},TX:{title:s("Texas")},UT:{title:s("Utah")},VT:{title:s("Vermont")},VA:{title:s("Virginia")},WA:{title:s("Washington")},DC:{title:s("Washington, District of Columbia")},WV:{title:s("West Virginia")},WI:{title:s("Wisconsin")},WY:{title:s("Wyoming")},AA:{title:s("Armed Forces Americas")},AE:{title:s("Armed Forces Europe")},AP:{title:s("Armed Forces Pacific")}}};n.Squarespace.Localities.COUNTRIES_TO_STATES={US:n.Squarespace.Localities.STATE_OPTIONS,CA:{ON:{title:s("Ontario")},QC:{title:s("Quebec")},NS:{title:s("Nova Scotia")},NB:{title:s("New Brunswick")},MB:{title:s("Manitoba")},BC:{title:s("British Columbia")},PE:{title:s("Prince Edward Island")},SK:{title:s("Saskatchewan")},AB:{title:s("Alberta")},NL:{title:s("Newfoundland and Labrador")},NT:{title:s("Northwest Territories")},YT:{title:s("Yukon")},NU:{title:s("Nunavut")}}};n.Squarespace.Localities.countryCodeFromName=function(e){for(var t in n.Squarespace.Localities.COUNTRY_OPTIONS)if(n.Squarespace.Localities.COUNTRY_OPTIONS[t].title===e)return t};var t=function(i){return n.Array.reduce(n.Object.keys(i).sort(),[],function(e,t){var a=i[t];e.push({label:a.title,value:t});return e})};var a=function(e){return e.sort(function(e,t){if(""===e.value)return-1;if(""===t.value)return 1;return e.label<t.label?-1:1})};n.Squarespace.Localities.getAllCountryNames=function(){var t=[];n.Object.each(n.Squarespace.Localities.COUNTRY_OPTIONS,function(e){e.empty||t.push(e.title)});return t};n.Squarespace.Localities.getNewCountryOptions=function(){return a(t(n.Squarespace.Localities.COUNTRY_OPTIONS))};n.Squarespace.Localities.getNewStateOptionsForCountry=function(e){return a(t(n.Squarespace.Localities.COUNTRIES_TO_STATES[e]))};n.Squarespace.Localities.getAmericentricSortedCountryOptions=function(){var e=n.Squarespace.Localities.getNewCountryOptions();var t=n.Array.filter(e,function(e){return!(""===e.value||e.value===n.Squarespace.Localities.SPECIAL_KEYS.DIVIDER)});var a={value:n.Squarespace.Localities.SPECIAL_KEYS.DIVIDER,label:"—",disabled:true};t.unshift({value:"",label:i[""].title},a,{value:"US",label:r.US},a);return t}},"1.0",{requires:[]})},7847:function(e,t,a){var i=a(128);var n=a(1236);YUI.add("squarespace-block-markdown",function(e){var t=e.namespace("Squarespace.Block").Markdown=e.Base.create("block-markdown",e.SQS.LayoutEngine.Block.Markdown,[e.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){if(i.get(n.DISABLE_USER_SCRIPTS_COOKIE)){this.get("contentBox").empty();this.get("contentBox").setHTML('<div class="sqs-state-message">Embedded Code: This block contains embedded code that has been disabled.</div>');this.fire("widget:contentUpdate");return}t.superclass.syncUI.apply(this,arguments)}},{ATTRS:{editor:{valueFn:function(){return e.Squarespace.Block.Editor.Markdown}}}})},"1.0",{requires:["base","model","squarespace-block-markdown-editor","@sqs/layout-engine/block-block-markdown","squarespace-premium-block-mixin"]})},7848:function(e,t,a){var c=a(515).GRID_PX;var d=a(1393);var u=a(24).t;var g=a(207);YUI.add("squarespace-block-markdown-editor",function(i){var e=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];var t='<div class="sqs-placeholder">'+u("Double-click to edit…")+"</div>";i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.Markdown=i.Base.create("markdown-block-editor-dialog",i.Squarespace.Block.Editor.Code,[i.SQS.LayoutEngine.Block.MixinSplitable,i.SQS.LayoutEngine.Block.MixinCoalesceable],{initializer:function(){this.placeholder=i.Node.create(t);this._bb.appendChild(this.placeholder);this.on("editingChange",this._togglePlaceholder,this);this._togglePlaceholder();"markdown"!==this._model.get("wysiwyg").mode&&(this._model.get("wysiwyg").mode="markdown")},destructor:function(){this.placeholder.remove(true);this.placeholder=null},insertContentIntoModel:function(e){var t=new RegExp(' id="yui[^"]+"',"g");var a=e.replace(t,"");this._model.get("wysiwyg").source=i.Squarespace.Lang.markdownFromHTML(a);this._model.set("html",a);this._togglePlaceholder()},_togglePlaceholder:function(e){var t=e||{};var a=false;d(this._model.get("html"))&&!t.newVal&&(a=true);a?this.placeholder.show():this.placeholder.hide()},_isCoalesceable:function(e){var t=i.Widget.getByNode(e);return!t.get("model").get("floatDir")&&e.one(".sqs-block-content").get("text").length>0},getBlockLevelElementsForDropZone:function(){var e=this.get("selectorsForDropZone");var t=this._cb.get("children").filter(e);return t},_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Markdown")}},{NS:"blockEditor",ATTRS:{blockName:{value:u("Markdown")},selectorsForInsertPoints:{valueFn:function(){return e.join(",")}},selectorsForDropZone:{valueFn:function(){return e.join(",")}}}});var a=575;var n=660;var s=1.5*c;var r=a-2*s;var o=n-5*c;var l={width:a,height:n,forcePosition:"fixed",tabs:[{title:u("Markdown"),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:'<a href="'+g.MARKDOWN_CHEAT_SHEET+'" target="_blank">'+u("Syntax Cheatsheet")+"</a>"},{type:"wysiwyg",height:o,width:r,countHeight:true,name:"wysiwyg",titleStyle:"inline",engine:"markdown",menuConfig:"markdown",markEmbeddedHTML:true}]}]};i.namespace("Squarespace.Block.ModelEditorDialog");i.Squarespace.Block.ModelEditorDialog.Markdown=i.Base.create("block-markdown-editor",i.Squarespace.Block.ModelEditorDialog.Code,[],{initializer:function(){this.updateWysiwygHeightEvent=i.Do.after(this._updateWysiwygHeight,this.get("dialog"),"moveIntoView",this)},_updateWysiwygHeight:function(){var e=this.get("dialog");var t=e.getField("wysiwyg");if(!t)return;var a=e.getBodyHeight()-e.bodyHeight;var i=t.config.height;if(a>0){var n=30+i-a;t.containerHeight=n;t.editor.set("height",n+"px")}},destructor:function(){this.updateWysiwygHeightEvent.detach()}},{ATTRS:{dialogConfig:{valueFn:function(){return l}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","squarespace-block-code-editor","squarespace-damask-context-globals","squarespace-markdown"]})},7849:function(e,t,a){var i=a(701);var n=a(2195);YUI.add("@sqs/layout-engine/block-block-markdown",function(e){e.namespace("SQS.LayoutEngine.ContentModel").MarkdownBlock=e.Base.create("MarkdownContentModel",e.Model,[],{},{ATTRS:{wysiwyg:{value:{engine:"code",mode:"markdown",isSource:false,source:""}},html:{value:""}}});e.namespace("SQS.LayoutEngine.Block").Markdown=e.Base.create("block-markdown",e.SQS.LayoutEngine.Block.Base,[],{initializer:function(){this.get("editController").isMobileApp()&&this._populateEmptyHtml()},bindUI:function(){this.get("model").on("change",this.syncUI,this)},syncUI:function(){var e=this.get("model").get("html");this.get("contentBox").empty();this.get("contentBox").setHTML(e);this.fire("widget:contentUpdate")},markdownToHTML:function(e,t){if(!e)return"";n.setOptions({breaks:!!t});return n(e)},_populateEmptyHtml:function(){var e=this.get("model");var t=e.get("wysiwyg.source");t&&!e.get("html")&&e.set("html",this.markdownToHTML(t))},isEmpty:function(){return!this.get("model").get("html")}},{CSS_PREFIX:"sqs-block-markdown",MODEL:e.SQS.LayoutEngine.ContentModel.MarkdownBlock,ATTRS:{editor:{valueFn:function(){return e.SQS.LayoutEngine.Block.Editor.Markdown}},type:{value:i.MARKDOWN}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-base"]})},7850:function(e,t,a){var i=a(701);YUI.add("squarespace-block-member-area",function(e){e.namespace("Squarespace.Block.MemberArea");e.Squarespace.Block.MemberArea=e.Base.create("block-member-area",e.SQS.LayoutEngine.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-member-area",MODEL:e.Squarespace.ContentModel.MemberArea,ATTRS:{editor:{value:e.Squarespace.Block.Editor.MemberArea},type:{value:i.MEMBER_AREA}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-member-area-model","squarespace-block-member-area-editor"]})},7851:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-member-area-model",function(e){e.namespace("Squarespace.ContentModel.MemberArea");e.Squarespace.ContentModel.MemberArea=e.Base.create("MemberAreaModel",e.Model,[],{},{ATTRS:{showTitle:{value:true},showPrice:{value:true},showDescription:{value:true},showJoinButton:{value:true},joinButtonText:{value:i("Join")}}})},"1.0",{requires:["base","model"]})},7852:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-member-area-editor",function(e){e.namespace("Squarespace.Block.Editor.MemberArea");e.Squarespace.Block.Editor.MemberArea=e.Base.create("member-area-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.MemberArea")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Member Sign Up")}}});var t={width:420,height:460,primaryTabs:[{title:i("Member Sign Up"),icon:"/universal/images-v6/icons/icon-products-18-light-solid.png",scroll:false,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Promote a member area by adding this block to your pages. To use this block, you\'ll need at least one Member Area. <a href="#" target="_blank" >Learn More</a>')},{ctor:e.Squarespace.DialogFields.SelectMemberArea,config:{name:"memberAreaId",options:[]}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showTitle","strings.title":i("Show Title")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showDescription","strings.title":i("Show Description")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showPrice","strings.title":i("Show Price")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showJoinButton","strings.title":i("Show Join Button")}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"joinButtonText","strings.title":i("Button Text"),className:"thin dark"}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"alignment","strings.title":i("Alignment"),defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog.MemberArea");e.Squarespace.Block.ModelEditorDialog.MemberArea=e.Base.create("blockMemberAreaEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-text","squarespace-dialog-select-member-area","squarespace-model-editor"]})},7853:function(e,t,a){var i=a(228);var n=a(24).t;YUI.add("squarespace-dialog-select-member-area",function(e){e.namespace("Squarespace.DialogFields.SelectMemberArea");e.Squarespace.DialogFields.SelectMemberArea=e.Base.create("select-member-area",e.Squarespace.DialogFields.Select,[],{initializer:function(){i.get("/api/marketing/member-areas").then(function(e){if(200!==e.status){this.showError(n("Something went wrong. Please close this modal and try again."));return}var t=e.data;var a=t.map(function(e){return{value:e.memberAreaId,label:this._sanitizeLabel(e.title)}},this);this.set("options",a)}.bind(this))},_sanitizeLabel:function(e){return e.replace(/\</g,"&lt;")}},{ATTRS:{data:{value:null,setter:function(e){return e}},strings:{value:{placeholder:n("Choose Member Area")}}}})},"1.0",{requires:["base","squarespace-dialog-select"]})},7854:function(e,t,a){var i=a(9047);YUI.add("squarespace-block-menu",function(e){e.namespace("Squarespace.Block").Menu=e.Squarespace.Block.Menu=e.Base.create("block-menu",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-menu",ATTRS:{editor:{value:e.Squarespace.Block.Editor.Menu},defaultContentModel:{value:{raw:i,menus:e.Squarespace.Block.MenuParser.parse(i),menuStyle:"classic",currencySymbol:"$"}},floatable:{value:false}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","squarespace-block-menu-parser","squarespace-block-menu-editor","squarespace-premium-block-mixin"]})},7855:function(e,t){YUI.add("squarespace-block-menu-parser",function(e){var h="(\\$|£|€|¥)";function s(e){if(0===e.search(h))return e.substring(1);return e}function f(e){e=e.split("/");var t=[];for(var a=0;a<e.length;++a){var i=e[a].trim().split(" ");var n={price:s(i[0].trim())};if(-1===n.price.search("[0-9]")){delete n.price;n.title=s(i.join(" ")).trim()}else if(i.length>1){i.splice(0,1);n.title=i.join(" ").trim()}t.push(n)}return t}e.namespace("Squarespace.Block.MenuParser").parse=function(e){var t=[];var a={title:null,description:null,items:[]};var i={title:null,description:null,sections:[]};var n=false;var s=false;var r=e.split("\n");for(var o=0;o<r.length;o++){var l=r[o].trim();if(!l)continue;if(0===l.indexOf("===")){if(n){i.sections.push(a);t.push(i);a={title:null,description:null,items:[]};i={title:null,description:null,sections:[]};s=false}else n=true;o-1>=0&&(i.title=r[o-1].trim());if(o+1<r.length&&r[o+1].trim().length>0){i.description=r[o+1].trim();++o}}else if(0===l.indexOf("---")){if(s){i.sections.push(a);a={title:null,description:null,items:[]}}else s=true;o-1>=0&&(a.title=r[o-1].trim());if(o+1<r.length&&r[o+1].trim().length>0){a.description=r[o+1].trim();++o}}else{if(o+1<r.length&&r[o+1].trim().length>0){var c=r[o+1].trim();if(0===c.indexOf("---")||0===c.indexOf("==="))continue}s=true;n=true;var d=l.search(h),u;if(-1!==d){var g=l.substring(0,d).trim();var p=l.substring(d);u={title:g,variants:f(p)}}else u={title:l,variants:null};if(o+1<r.length&&r[o+1].trim().length>0&&-1===r[o+1].search(h)){u.description=r[o+1].trim();++o}if(!u.variants&&o+1<r.length&&r[o+1].trim().length>0){u.variants=f(r[o+1].trim());++o}while(o+1<r.length&&r[o+1].trim().length>0&&0===r[o+1].indexOf("+")){u.options||(u.options=[]);u.options.push(r[o+1].substring(1).trim());++o}a.items.push(u)}}i.sections.push(a);t.push(i);return t}},"1.0",{requires:[]})},7856:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-menu-editor",function(t){t.namespace("Squarespace.Block.Editor").Menu=t.Base.create("menu-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Menu")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Menu")}}});var e={width:465,height:505,tabs:[{title:i("Menu"),tabTitle:i("Menu"),icon:"/universal/images-v6/icons/icon-menu-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:i('Add your menu items, descriptions, and prices. When you follow the format patterns below, your text will transform into different menu sections. Click the <strong>Formatting Help</strong> tab for tips. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.MENU_EDITOR})},{type:"textarea",name:"raw",description:i('Add your menu items, descriptions, and prices. When you follow the format patterns below, your text will transform into different menu sections. Click the <strong>Formatting Help</strong> tab for tips. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.MENU_EDITOR}),height:440}]},{tabTitle:i("Design"),scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Menu Style"),"strings.description":i("Choose a layout style for your menu."),name:"menuStyle",className:"thin dark",defaultValue:"simple",options:[{value:"simple",label:i("Simple (Centered)")},{value:"classic",label:i("Classic (Multi-column)")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Currency Symbol"),name:"currencySymbol","strings.description":i("Choose a currency symbol to display on your menu items."),defaultValue:"$",className:"thin dark",options:[{value:"",label:i("None")},{value:"$",label:"$"},{value:"€",label:"€"},{value:"£",label:"£"},{value:"¥",label:"¥"}]}}]},{tabTitle:i("Formatting Help"),scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,config:{text:i("<strong>Menu Sections.</strong> Sections define groups of items on your menu. Section descriptions are optional. To create a section, type: <pre>Section\n-------\nOptional section description.</pre>")+i("<strong>Menu Items.</strong> To add an item to your menu, type in the following format. Separate multiple menu items with 2 spaces. Options can be added to an item by using the '+' format on a new line. Both prices and descriptions are optional. <pre>Title of Menu Item\nDescription of food item.\n$10\n\nAnother of Menu Item\nA different description.\n$20\n+ Option\n+ Another Option</pre>")+i("<strong>Price Variants.</strong> You can also define multiple prices for variants on your items in the following format: <pre>Wine Bottle Example\nDescription of the wine\n$9 glass / $40 bottle\n\nSalad Example\nA great, low-carb salad.\n$9 small / $15 large</pre>")+i("<strong>Multiple Menus.</strong> Menu blocks can contain multiple menus at once (lunch, dinner, etc.). Menus will be turned into tabs upon rendering. To create a menu within a block, type: <pre>Lunch\n=======\nOptional menu description.</pre>")}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").Menu=t.Base.create("block-menu-editor",t.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(e){e&&e.raw&&(e.menus=t.Squarespace.Block.MenuParser.parse(e.raw));return e}},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-menu-parser","squarespace-damask-context-globals"]})},7857:function(e,t,a){var i=a(701);var s=a(87);var r=a(114);var o=a(5415);var l=a(1937);YUI.add("squarespace-block-newsletter",function(n){n.namespace("Squarespace.Block");var t=n.Squarespace.Block.Newsletter=n.Base.create("block-newsletter",n.SQS.LayoutEngine.Block.ModelSyncBase,[n.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this.publish("formData-loaded",{fireOnce:true,async:true})},bindUI:function(){t.superclass.bindUI.call(this);this.after(["resized","widget:contentUpdate"],this._fitToContainer,this);this.get("model").after("save",this._renderBlock,this);this.after("widget:contentUpdate",this.renderCaptcha,this)},renderUI:function(){var e=this._getStackFinished();this.get("model").load(n.bind(function(){this.fire("formData-loaded");this._renderBlock();e()},this))},renderCaptcha:function(){if(!r.isFeatureEnabled(s.NEWSLETTER_BLOCK_CAPTCHA))return;if(!o.isCaptchaEnabled())return;var e=this.get("model");if(!e.get("captchaEnabled"))return;var t=this.get("contentBox");if(!t)return;var a=t.one(".captcha-container");var i=a.getDOMNode();if(!i)return;l.render(n.config.win,i)},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("formId");t?this.on("formData-loaded",e):e()},_renderBlock:function(){var e=this.get("model");if(!e.get("formId"))return;t.superclass._renderBlock.call(this)},_fitToContainer:function(){var e=this.get("boundingBox");var t=e.one(".newsletter-form");if(t){e.toggleClass("newsletter-form-has-small-container",t.get("offsetWidth")<320);e.addClass("rendered")}}},{CSS_PREFIX:"sqs-block-newsletter",MODEL:n.Squarespace.Models.BlockNewsletterModel,ATTRS:{editor:{value:n.Squarespace.Block.Editor.Newsletter},type:{value:i.NEWSLETTER}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-newsletter-model","squarespace-block-newsletter-editor","squarespace-premium-block-mixin"]})},7858:function(e,t,a){var r=a(211);var o=a(683);var l=a(2611);var c=a(2610);var d=a(24).t;var u=a(5775);var g=a(5409);var p=a(5962);var h=a(5320);var i=a(729);var f=a(411);var m=a(207);var v=i.createLogger("newsletter-model","#456");YUI.add("squarespace-block-newsletter-model",function(i){var a=d("Email Address");var n=a;var e="<p>"+d("We respect your privacy.")+"</p>";var t="<p>"+d("Sign up with your email address to receive news and updates.")+"</p>";i.namespace("Squarespace.Models");var s=i.Squarespace.Models.BlockNewsletterModel=i.Base.create("BlockNewsletterModel",i.Squarespace.Models.BlockFormModel,[],{toJSON:function(){return{alignment:this.get("alignment"),useModelInsteadOfFormModel:1,captchaEnabled:this.get("captchaEnabled"),captchaTheme:this.get("captchaTheme"),captchaAlignment:this.get("captchaAlignment"),description:this.get("description"),disclaimer:this.get("disclaimer"),floatDir:this.get("floatDir"),formId:this.get("formId"),hSize:this.get("hSize"),layout:this.get("layout"),showName:this.get("showName"),successRedirect:this.get("successRedirect"),title:this.get("title")}},createFormModel:function e(){v("#createFormModel");var t=[i.merge({},h.EMAIL,{title:n,placeholder:a,required:true,locked:true}),h.NAME];t.forEach(function(e){i.Squarespace.FormEditingUtils.resolveFieldId(e,t)},this);return new i.Squarespace.Models.Form({id:null,type:i.Squarespace.FormType.NEWSLETTER_BLOCK,name:d("Newsletter Form"),fields:t,submitButtonText:d("Sign Up"),captchaEnabled:false,captchaTheme:c.LIGHT,captchaAlignment:l.CENTER})},useFirstList:function(e){v("Autoconnect to first campaign",e);if(!e||!e.results||0===e.results.length)return;this.set("campaignsConnect",{backendType:o.CAMPAIGNS,connectionState:r.CONNECTED,listId:e.results[0].id})},hasValidCaptchaKeys:function(){var e=p.getCaptchaConfig();if(e&&(e.captchaConfigSiteKey&&!e.captchaConfigSecret||!e.captchaConfigSiteKey&&e.captchaConfigSecret))return false;return true},validateFormBlockModel:function(){var e=s.superclass.validateFormBlockModel.call(this);if(e)return e;if(p.isSingleOptInEnabled()&&!this.hasValidCaptchaKeys()){var t={title:d("Add reCAPTCHA Keys"),message:d('Your Site Key and Secret Key are required to turn on reCAPTCHA. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:m.GOOGLE_RECAPTCHA_LEARN_MORE}),src:"validate"};return t}},saveCaptchaConfig:function(){v("#saveCaptchaConfig");var e=p.isSingleOptInEnabled()&&p.getCaptchaConfig();if(e&&e.captchaKeysChanged){var t={secretKey:e.captchaConfigSecret,siteKey:e.captchaConfigSiteKey};var a={captchaSettings:t};return f.save(a)}return i.Promise.resolve()},saveFormModel:function e(t){v("#saveFormModel");this._saveCallbacks.push(t);if(this._saveCallbacks.length>1)return;var a=this.getFormModel();var i=function e(){this.setBackendsAndSave.call(this,a)}.bind(this);if(!a.get("id")){v("Created a new form",a);u.connect().then(this.useFirstList.bind(this)).then(this.saveCaptchaConfig.bind(this)).then(i,i);return}this.saveCaptchaConfig().then(i,i)},setBackends:function(e){var t={};if(p.isSingleOptInEnabled()){var a=p.getVerificationData(e.get("id"));t.useSingleOptIn=a.useSingleOptIn}e.set("backendConnectionConfigs",{campaignsConnect:i.merge({},this.get("campaignsConnect"),t),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},_onModelSave:function e(t){var a=this.getFormModel();!i.Lang.isValue(t)&&p.isSingleOptInEnabled()&&a&&g.saveSuccess(a.get("id"));s.superclass._onModelSave.call(this,t)}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{showName:false,title:{value:d("Subscribe")},description:{value:{engine:"wysiwyg",html:t,source:t}},disclaimer:{value:{engine:"wysiwyg",html:e,source:e}},formId:{value:null},successRedirect:{value:null},emailConnect:{value:null},alignment:{value:"alignCenter"},layout:{value:"layoutFloat"},floatDir:{value:null},hSize:{value:null}}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-form-editing-utils","squarespace-models-form","squarespace-block-form-model"]})},7859:function(e,t,a){var i=a(728);var r=a(683);var s=a(207);var o=a(24).t;var l=a(6863);var c=a(5415).isCaptchaEnabled;var n=a(729);var d=a(801);var u=a(8132);var g=a(5962);var p=a(5409);var h=a(114);var f=a(87);var m=false;var v=n.createLogger("newsletter-editor","#456",m);YUI.add("squarespace-block-newsletter-editor",function(n){n.namespace("Squarespace.Block.ModelEditorDialog");n.namespace("Squarespace.Block.Editor");n.Squarespace.Block.Editor.Newsletter=n.Base.create("newsletter-block-dialog",n.Squarespace.Block.Editor.Dialog,[],{destructor:function(){this._showAfterConnected&&this._showAfterConnected.detach()},_showDialog:function(){var e=this.get("host").get("model");var t=e.getFormModel();t.get("connectedBackends")?this.constructor.superclass._showDialog.call(this):this._showAfterConnected=t.onceAfter("connectedBackendsChange",function(e){v("connectedBackends ready",e);this.constructor.superclass._showDialog.call(this)},this)},_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Newsletter")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Newsletter")}}});var e=function(){var e=this.get("dialog");return{loadingText:o("Editing Newsletter Block…"),title:o("Newsletter"),width:500,height:525,initialDataByReference:true,tabs:[{tabTitle:o("Display"),scroll:true,fields:[{ctor:n.Squarespace.DialogFields.Description,text:o('Add a sign-up to your site to begin collecting mailing list subscribers. <a href="{helpLink}" target="_blank">Learn more</a>.',{helpLink:s.NEWSLETTER_EDITOR})},{ctor:n.Squarespace.DialogFields.LabeledText,config:{name:"name","strings.label":o("Form Name"),submitOnEnter:true}},{ctor:n.Squarespace.DialogFields.Text,config:{name:"title",className:"thin","strings.title":o("Title")}},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"description",editorHeight:125,classNames:"description","strings.title":o("Description")}},{ctor:n.Squarespace.DialogFields.Check,config:{name:"showName","strings.title":o("Require Name Field"),"strings.description":o("Display inputs for the subscriber's first and last name.")}},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimer",editorHeight:125,classNames:"description","strings.title":o("Disclaimer"),description:o("Displayed below the input field.")}},{ctor:n.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":o("Submit Button Label"),"strings.placeholder":o("Submit")}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"alignment",defaultValue:"alignCenter","strings.title":o("Alignment"),options:[{value:"alignLeft",label:o("Left")},{value:"alignCenter",label:o("Center")},{value:"alignRight",label:o("Right")}]}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"layout",defaultValue:"layoutFloat","strings.title":o("Layout"),options:[{value:"layoutFloat",label:o("Float Fields")},{value:"layoutStack",label:o("Stack Fields")}]}}]},{tabTitle:o("Storage"),fields:[{$include:"connectFieldConfigsByName.description"},{$include:"connectFieldConfigsByName.campaigns"},{ctor:n.Squarespace.DialogFields.Description,config:{name:"showOtherStorageOptions",text:o("Connect other services"),className:"showOtherStorageOptionsLink"}},{$include:"connectFieldConfigsByName.mailchimp",$when:function(e){return d.isFeatureEnabled(i.MAILCHIMP_INTEGRATION)}},n.merge(l.getMailchimpSignupConfig(n),{$when:function(e){if(!d.isFeatureEnabled(i.MAILCHIMP_INTEGRATION))return false;var t=e.getFormModel();var a=t.getConnBackend(r.MAILCHIMP);return 0===a.length}}),{$include:"connectFieldConfigsByName.email",$when:function(e){var t=e.getFormModel();var a=t.getConnBackend(r.EMAIL);return a.length>0}},{$include:"connectFieldConfigsByName.zapier",$when:function(e){return d.isFeatureEnabled(i.FORMS_API)}},{$include:"connectFieldConfigsByName.googleDocs"}]},{tabTitle:o("Captcha"),fields:{$include:"captchaFieldConfigs"},$when:function(e){return h.isFeatureEnabled(f.NEWSLETTER_BLOCK_CAPTCHA)&&c()&&!h.isFeatureEnabled(f.CAMPAIGNS_SINGLE_OPT_IN)}},{tabTitle:o("Verification"),reactData:{component:u,props:{initialData:{$valueFn:function(e){var t=e.getFormModel();var a=t.get("connectedBackends");var i=a.length?a.filter(function(e){return e.backendType===r.CAMPAIGNS}):[];i=i.length&&i[0];var n=i.connected&&i.config&&i.config.useSingleOptIn;return{isCampaignsConnected:i.connected,captchaEnabled:t.get("captchaEnabled"),captchaTheme:t.get("captchaTheme"),captchaAlignment:t.get("captchaAlignment"),useSingleOptIn:"true"===n}}},formId:{$valueFn:function(e){return e.getFormModel().get("id")}},fireDataChange:{$valueFn:function(){return function(){e.fire("datachange")}}},getData:function(){var e=g.getVerificationData(this.formId);return{captchaEnabled:e.captchaEnabled,captchaAlignment:e.captchaAlignment,captchaTheme:e.captchaTheme,backendConnectionConfigs:{campaignsConnect:{useSingleOptIn:e.useSingleOptIn}},isDirty:e.isDirty}}}},$when:function(){return g.isSingleOptInEnabled()}},{tabTitle:o("Post-Submit"),scroll:true,fields:[{ctor:n.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":o("Button Alignment"),defaultValue:"left",className:"thin dark",options:[{value:"left",label:o("Left")},{value:"center",label:o("Center")},{value:"right",label:o("Right")}]}},{ctor:n.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:o("Post-Submit Redirect"),text:o("If provided, the user will be redirected upon form submission.")}},{ctor:n.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}},{ctor:n.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:o("Post-Submit Message"),text:o("Display this message to users after they submit your form.")}},{ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}},{ctor:n.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:o("Post-Submit HTML"),text:o("HTML to be rendered in addition to the Post-Submit Message.")}},{ctor:n.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}]}]}};var a=n.Squarespace.Block.ModelEditorDialog.Newsletter=n.Base.create("newsletter-block-dialog-model-editor",n.Squarespace.Block.ModelEditorDialog.Form,[],{initializer:function(){var e=a.superclass;e.initializer.call(this);var t=this.get("dialog");t.on("shown",function(){t.bodyEl.delegate("click",function(){this.set("showOtherStorageOptions",true)},".showOtherStorageOptionsLink",this);if(this.isCampaignsOnlyVisible()){this.on("visibleChange",this._toggleOtherStorageOptions,this);this.after("showOtherStorageOptionsChange",this._toggleOtherStorageOptions,this)}else t.bodyEl.addClass("showOtherStorageOptions")},this);t.on("canceled",function(){var e=this.get("model");var t=e.getFormModel();g.isSingleOptInEnabled()&&p.reset(t.get("id"))},this)},_toggleOtherStorageOptions:function(e){var t=this.get("dialog");e.newVal&&!this.isCampaignsOnlyVisible()?t.bodyEl.addClass("showOtherStorageOptions"):t.bodyEl.removeClass("showOtherStorageOptions")},getDialogData:function(){var e=this.get("model");var t=this.getDataFromFormModel();var a=n.merge({showName:e.get("showName"),title:e.get("title"),description:e.get("description"),disclaimer:e.get("disclaimer"),alignment:e.get("alignment"),layout:e.get("layout")},this.getConnectionData(e));var i=n.merge({},t,a);v("getDialogData",i);return i},isCampaignsOnlyVisible:function(){if(this.get("showOtherStorageOptions"))return false;var e=this.get("model");var t=e.getFormModel();var a=t.getConnBackend(r.ZAPIER);var i=t.getConnBackend(r.GOOGLE);var n=t.getConnBackend(r.MAILCHIMP);var s=a.length||i.length||n.length;return!s}},{ATTRS:{showOtherStorageOptions:false,dialogConfig:{valueFn:function(){return e.call(this)}}}})},"1.0",{requires:["squarespace-block-form-editor","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-wysiwyg","squarespace-model-editor"]})},7860:function(e,t,a){var i=a(24).t;var s=a(701);var r=a(114);var o=a(87);var c=a(1342);YUI.add("squarespace-block-opentable",function(l){var n=l.namespace("Squarespace.Block").OpenTable=l.Base.create("block-opentable",l.SQS.LayoutEngine.Block.ModelSyncBase,[l.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){n.superclass.bindUI.call(this);this.get("contentBox").on("click",this._alertPreviewOnlyOnClick)},_renderSuccess:function(t){var a="https:"===document.location.protocol;var i=this.get("contentBox");this.get("model").get("hideTitle")?i.addClass("sqs-block-opentable-hide-title"):i.removeClass("sqs-block-opentable-hide-title");this._getExtractedHtml(t.html,a).then(l.bind(function(e){t.html=e;n.superclass._renderSuccess.call(this,t);a&&i.all(".sqs-block-opentable-hidden").removeClass("sqs-block-opentable-hidden")},this),l.bind(this._renderNoId,this))},_renderNoId:function(){this._renderError({title:i("No OpenTable Restaurant ID"),error:i("To allow customers to make reservations on your site, enter your restaurant ID.")})},_getExtractedHtml:function(r,o){return new l.Promise(l.bind(function(a,i){var e=this._createIFrameWith(r);var n=e.contentDocument||e.contentWindow.document;var t;if(o)a(n.body.innerHTML);else{var s=l.Array(n.getElementsByTagName("script"));t=l.Array.map(s,function(t){return new l.Promise(function(e){t.addEventListener("load",e);t.addEventListener("error",e)})});l.Promise.all(t).then(function(){var e=n.getElementsByTagName("form")[0];var t=e&&e.outerHTML;t?a(t):i()})}},this))},_createIFrameWith:function(e){var t=l.config.doc.createElement("iframe");this.get("contentBox").append(t);var a=t.contentDocument||t.contentWindow.document;a.open();a.write(e);a.close();return t},_alertPreviewOnlyOnClick:function(e){if(e.target.ancestor("input, a",true)){e.preventDefault();new l.Squarespace.Widgets.Alert({"strings.title":i("Preview Only"),"strings.message":i("Please log out of your Squarespace account in order to use the OpenTable Block.")})}}},{CSS_PREFIX:"sqs-block-opentable",MODEL:l.Model,ATTRS:{editor:{valueFn:function(){if(c.isMobileContentEditingEnabled()||r.isFeatureEnabled(o.ROSETTA_BLOCK_EDITORS))return l.Squarespace.Block.Editor.Schema;return l.Squarespace.Block.Editor.OpenTable}},type:{value:s.OPENTABLE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-opentable-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7861:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-opentable-editor",function(e){e.namespace("Squarespace.Block.Editor").OpenTable=e.Base.create("opentable-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTable")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("OpenTable")}}});e.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=e.Base.create("blockOpenTableEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}});var t={width:375,height:290,tabs:[{title:i("OpenTable"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.OPENTABLE})},{ctor:e.Squarespace.DialogFields.Text,config:{name:"restaurantId",maxLength:10,className:"thin",submitOnEnter:true,strings:{title:i("OpenTable Restaurant ID"),placeholder:"0000",description:i("Your OpenTable restaurant ID.  You can locate your restaurant ID on the OpenTable website.")},required:true}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"hideTitle",strings:{title:i("Hide Title"),description:i("Hide the title above the open table form.")}}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=e.Base.create("blockOpenTableEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-model-editor"]})},7862:function(e,t,a){var i=a(701);var n=a(6275);YUI.add("squarespace-block-opentable-v2",function(e){var t=e.Base.create("OpenTableBlockV2Model",e.Model,[],{},{ATTRS:{restaurantId:{value:""},domain:{value:"com"},lang:{value:"en"},hideTitle:{value:false},hideIcons:{value:false},userEnteredRestaurantId:{validator:function(){return false}},hideOpenTableLogo:{value:false}}});var a=e.namespace("Squarespace.Block").OpenTableV2=e.Base.create("block-opentable-v2",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){this.get("boundingBox").removeClass("loaded");a.superclass._renderSuccess.call(this,e);n(this.get("boundingBox").getDOMNode())}},{CSS_PREFIX:"sqs-block-opentable-v2",MODEL:t,ATTRS:{editor:{value:e.Squarespace.Block.Editor.OpenTableV2},type:{value:i.OPENTABLE_V2}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-opentable-v2-editor","squarespace-premium-block-mixin"]})},7863:function(e,t,a){var n=a(24).t;var i=a(207);var s=a(228);YUI.add("squarespace-block-opentable-v2-editor",function(t){var a=t.namespace("Squarespace.Block.Editor").OpenTableV2=t.Base.create("opentable-v2-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var e=this.configDialog.get("dialog");var a=this._model;e.on("shown",function(){var t=e.getField("userEnteredRestaurantId");t.set("data",a.get("restaurantId"));t.after("dataChange",function(e){this.validateUserEnteredRestaurantId(e.newVal)},this);e.getField("domain").after("dataChange",function(e){this.validateUserEnteredRestaurantId(t.get("data"))},this);e.getField("lang").after("dataChange",function(e){this.validateUserEnteredRestaurantId(t.get("data"))},this)},this)},_updateModel:function(e){e=t.clone(e);delete e.userEnteredRestaurantId;a.superclass._updateModel.call(this,e)},validateUserEnteredRestaurantId:function(a){a=a.trim();if(this._pendingValidation){t.config.win.clearTimeout(this._pendingValidation);this._pendingValidation=null}var e=this._model;if(e.get("restaurantId")===a)return;if(0===a.length)return;var i=this.configDialog.get("dialog");this._pendingValidation=t.config.win.setTimeout(function(){s.get("https://oc-registry.opentable.com/v2/reservation-widget-standard/2.3.12",{headers:{Accept:"application/vnd.oc.unrendered+json"},params:{rid:a,type:"standard",domain:e.get("domain"),lang:e.get("lang"),theme:"wide",overlay:"true",__oc_Retry:0}}).then(function(e){var t=e.data.data;if(!t||t.error){i.getField("userEnteredRestaurantId").showError(n("Invalid Restaurant ID!"));i.getField("restaurantId").set("data","");i.getField("restaurantName").set("visible",false)}else{i.getField("restaurantId").set("data",a);i.getField("restaurantName").set("visible",true);i.getField("restaurantName").set("text",n("Restaurant identified: {restaurantName}",{restaurantName:t.omniture.vars.prop32}))}})},800)},_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTableV2")}},{NS:"blockEditor",ATTRS:{blockName:{value:n("OpenTable")}}});var e={title:n("OpenTable"),width:375,height:396,tabs:[{title:n("OpenTable"),tabTitle:n("Content"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:n('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:i.OPENTABLE})},{ctor:t.Squarespace.DialogFields.Text,config:{name:"userEnteredRestaurantId",maxLength:10,className:"thin",submitOnEnter:true,strings:{title:n("OpenTable Restaurant ID"),description:n('Your OpenTable restaurant ID. You can locate your restaurant ID on the OpenTable website. <a href="{kbArticleUrl}">Learn more</a>',{kbArticleUrl:i.OPENTABLE_RESTAURANT_ID})}}},{ctor:t.Squarespace.DialogFields.Description,config:{text:"",visible:false,name:"restaurantName"}},{ctor:t.Squarespace.DialogFields.Hidden,config:{name:"restaurantId"}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":n("Location (Domain)"),name:"domain",className:"thin dark",defaultValue:"com",options:[{value:"com",label:n("US and Canada - opentable.com")},{value:"commx",label:n("Mexico - opentable.com.mx")},{value:"couk",label:n("United Kingdom - opentable.co.uk")},{value:"ie",label:n("Ireland - opentable.ie")},{value:"comau",label:n("Australia and New Zealand - opentable.com.au")},{value:"de",label:n("Germany - opentable.de")},{value:"jp",label:n("Japan - opentable.jp")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":n("Language"),name:"lang",className:"thin dark",defaultValue:"en",options:[{value:"en",label:n("English")},{value:"fr",label:n("French")},{value:"es",label:n("Spanish")},{value:"de",label:n("German")},{value:"ja",label:n("Japanese")}]}}]},{title:n("OpenTable"),tabTitle:n("Design"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":n("Hide Title"),name:"hideTitle"}},{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":n("Hide Icons"),name:"hideIcons"}},{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":n("Hide OpenTable Logo"),name:"hideOpenTableLogo"}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").OpenTableV2=t.Base.create("blockOpenTableEditor",t.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-dialog-select","squarespace-model-editor"]})},7864:function(e,t,a){var i=a(701);YUI.add("squarespace-block-posts-by",function(e){var t=e.namespace("Squarespace.Block").PostsByBase=e.Base.create("block-posts-by",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){false}},{MODEL:e.Squarespace.ContentModel.PostsByBlock,ATTRS:{editor:{value:e.Squarespace.Block.Editor.Dialog}},CSS_PREFIX:"sqs-block-posts-by"});e.namespace("Squarespace.Block").PostsByAuthor=e.Base.create("block-posts-by-author",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByAuthor,ATTRS:{type:{value:i.POSTS_BY_AUTHOR},editor:{value:e.Squarespace.Block.Editor.PostsByAuthor}},CSS_PREFIX:"sqs-block-postsbyauthor"});e.namespace("Squarespace.Block").PostsByTag=e.Base.create("block-posts-by-tag",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByTag,ATTRS:{type:{value:i.POSTS_BY_TAG},editor:{value:e.Squarespace.Block.Editor.PostsByTag}},CSS_PREFIX:"sqs-block-postsbytag"});e.namespace("Squarespace.Block").PostsByCategory=e.Base.create("block-posts-by-category",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByCategory,ATTRS:{type:{value:i.POSTS_BY_CATEGORY},editor:{value:e.Squarespace.Block.Editor.PostsByCategory}},CSS_PREFIX:"sqs-block-postsbycategory"});e.namespace("Squarespace.Block").PostsByMonth=e.Base.create("block-posts-by-month",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByMonth,ATTRS:{type:{value:i.POSTS_BY_MONTH},editor:{value:e.Squarespace.Block.Editor.PostsByMonth}},CSS_PREFIX:"sqs-block-postsbymonth"})},"1.0",{requires:["base","model","squarespace-block-posts-by-editor","squarespace-block-posts-by-model","squarespace-premium-block-mixin"]})},7865:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-posts-by-editor",function(e){e.namespace("Squarespace.Block.Editor");e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.Editor.PostsByMonth=e.Base.create("posts-by-month-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByMonth")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Month List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByMonth=e.Base.create("blockPostByMonthEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByMonthEditor",ATTRS:{strings:{value:{title:i("Month List"),description:i("Select a collection to index.")}}}});e.Squarespace.Block.Editor.PostsByCategory=e.Base.create("posts-by-category-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByCategory")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Category List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByCategory=e.Base.create("blockPostByCategoryEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByCategoryEditor",ATTRS:{strings:{value:{title:i("Category List"),description:i("Select a collection below to collect categories from.")}}}});e.Squarespace.Block.Editor.PostsByTag=e.Base.create("posts-by-tag-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByTag")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Tag List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByTag=e.Base.create("blockPostByTagEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByTagTagEditor",ATTRS:{strings:{value:{title:i("Tag List"),description:i("Select a collection below to collect tags from.")}}}});e.Squarespace.Block.Editor.PostsByAuthor=e.Base.create("posts-by-author-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByAuthor")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Author List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByAuthor=e.Base.create("blockPostByAuthorEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByAuthorEditor",ATTRS:{strings:{value:{title:i("Author List"),description:i("Select a collection below to collect authors from")}}}})},"1.0",{requires:["base","model","squarespace-block-editor-dialog","squarespace-block-posts-by-model","squarespace-block-posts-by-model-editor-base","squarespace-damask-context-globals"]})},7866:function(e,t){YUI.add("squarespace-block-posts-by-model",function(e){e.namespace("Squarespace.ContentModel").PostsByBlock=e.Base.create("PostsByBlockModel",e.Model,[],{},{ATTRS:{}});e.namespace("Squarespace.ContentModel").PostsByTag=e.Base.create("PostsByTagModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByCategory=e.Base.create("PostsByCategoryModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByAuthor=e.Base.create("PostsByAuthorModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByMonth=e.Base.create("PostsByMonthModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{})},"1.0",{requires:["base","model"]})},7867:function(e,t,a){var n=a(24).t;var s=a(229);YUI.add("squarespace-block-posts-by-model-editor-base",function(i){i.namespace("Squarespace.Block.ModelEditorDialog").PostsBy=i.Base.create("blockPostsByEditor",i.Squarespace.ModelEditorDialog,[],{initializer:function(){var e=this.get("dialog");var t=i.Squarespace.ContentCollectionCache;this._dialogReady=false;this._collectionsLoaded=0===t.size();this._collectionsLoaded&&t.load(i.bind(this._onCollectionsLoaded,this));i.Lang.isValue(e)&&e.after("ready",this._onDialogLoaded,this)},_getDefaultAndProductCollections:function(){var e=i.Squarespace.ContentCollectionCache.filter(function(e){var t=e.getTemplateConfiguration();if(t){var a=t.get("collectionType");return(a===s.PRODUCTS||a===s.COLLECTION_TYPE_GENERIC)&&false===t.get("folder")}return false});return this._filterOutCalendarCollections(e)},_filterOutCalendarCollections:function(e){return i.Array.filter(e,function(e){var t=e.getTemplateConfiguration();if(t.get("ordering")===i.Squarespace.CollectionOrdering.CALENDAR)return false;return true})},_onDialogLoaded:function(e){this._dialogReady=true;this._collectionsLoaded&&this._setCollections()},_onCollectionsLoaded:function(e){this._collectionsLoaded=true;this._dialogReady&&this._setCollections()},_setCollections:function(){var e=this.get("dialog");var t=this._getDefaultAndProductCollections();var a=i.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(t);e.getField("collectionId").set("collectionGroups",a)},_getDefaultDialogConfiguration:function(){var e=this.get("strings.description");var t=this.get("strings.title");return{title:n("Edit List"),width:300,height:450,tabs:[{title:t,icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{title:e,text:"",padding:[0,0]}},{ctor:i.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{folder:false}}}]}]}}},{NS:"postsByEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:i.Lang.isObject},strings:{value:{title:n("Index"),description:n("Select a collection below.")}}}})},"1.0",{requires:["base","squarespace-block-posts-by-model","squarespace-models-content-collection","squarespace-dialog-description","squarespace-dialog-content-selector"]})},7868:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-product",function(t){var a=t.namespace("Squarespace.Block").Product=t.Base.create("block-product",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader();var t=this.get("contentBox").one(".sqs-add-to-cart-button-wrapper");t&&t.setStyle("visibility","visible")},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})}},{CSS_PREFIX:"sqs-block-product",MODEL:t.Squarespace.ContentModel.ProductBlock,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return t.Squarespace.Block.Editor.Schema;return t.Squarespace.Block.Editor.Product}},type:{value:i.PRODUCT}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-product-model","squarespace-block-product-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7869:function(e,t){YUI.add("squarespace-block-product-model",function(e){var t=e.namespace("Squarespace.ContentModel").ProductBlock=e.Base.create("ProductModel",e.Model,[],{},{ATTRS:{showImage:{value:true},showTitle:{value:true},showPrice:{value:true},showExcerpt:{value:false},showBuyButton:{value:false},productQuickViewEnabled:{value:false}}})},"1.0",{requires:["base","model"]})},7870:function(e,t,a){var i=a(24).t;var s=a(207);var r=a(6865);YUI.add("squarespace-block-product-editor",function(e){var n="sqs-product-editor-quickview";e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Product=e.Base.create("product-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Product")},initializer:function e(){var t=this.configDialog.get("model");var a=this.configDialog.get("dialog");a.on("ready",function(){this.toggleQuickViewFields(!!t.get("productId"))},this);t.after("productIdChange",this.onDialogModelProductIdChange,this)},toggleQuickViewFields:function e(t){var a=!!t&&r.isQuickViewSupported();var i=this.configDialog.get("dialog");if(!i.el)return;i.el.all(".sqs-dialog-field."+n).each(function e(t){t.toggleClass("hidden",!a)})},onDialogModelProductIdChange:function e(t){var a=t.newVal;this.toggleQuickViewFields(!!a)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Product")}}});var t={width:420,height:460,primaryTabs:[{title:i("Product"),icon:"/universal/images-v6/icons/icon-products-18-light-solid.png",scroll:false,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Display a single product from one of your Products Pages. To use this block, you\'ll need a Products Page with at least one product. <a href="{helpLink}" target="_blank" >Learn more</a>',{helpLink:s.PRODUCT_EDITOR})},{ctor:e.Squarespace.DialogFields.ProductChooser,name:"productId",mode:"squarespace",maxResults:15},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showImage","strings.title":i("Show Image"),"strings.description":i("Show a thumbnail image of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showTitle","strings.title":i("Show Title"),"strings.description":i("Show the name of this product")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showPrice","strings.title":i("Show Price"),"strings.description":i("Display the current price of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showExcerpt","strings.title":i("Show Description"),"strings.description":i("Show the brief description of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showBuyButton","strings.title":i("Show Add To Cart Button"),"strings.description":i("Show a button that lets customers add this to their cart.")}},{ctor:e.Squarespace.DialogFields.Check,config:{className:["hidden",n].join(" "),name:"productQuickViewEnabled","strings.title":i("Enable Quick View"),"strings.description":i("On hover, a button will appear that lets customers dynamically access product details without leaving the page.")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"alignment","strings.title":i("Alignment"),defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Product=e.Base.create("blockProductEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-product-chooser","squarespace-dialog-select","squarespace-model-editor"]})},7871:function(e,t,a){var i=a(114);var n=a(87);var s=a(1342);YUI.add("squarespace-block-quote",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Quote=e.Base.create("block-quote",e.SQS.LayoutEngine.Block.Quote,[e.Squarespace.Block.PremiumBlockMixin],{},{ATTRS:{editor:{valueFn:function(){if(s.isMobileContentEditingEnabled()||i.isFeatureEnabled(n.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Quote}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-quote","@sqs/layout-engine/block-model-quote","squarespace-block-quote-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7872:function(e,t){var n={blockAnimation:"block-animation"};YUI.add("@sqs/layout-engine/block-quote",function(e){e.namespace("SQS.LayoutEngine.Block");var t=e.SQS.LayoutEngine.Block.Quote=e.Base.create("block-quote",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){t.superclass.bindUI.call(this);this.after("widget:contentUpdate",this.handleAnimationChange,this)},handleAnimationChange:function e(t){this.clearAnimationTimeout();var a=this.get("contentBox");var i=a.one("figure");this.updateAnimationClassname(t,n,i);this.rerunAnimation(i)},destructor:function(){this.clearAnimationTimeout()}},{CSS_PREFIX:"sqs-block-quote",MODEL:e.SQS.LayoutEngine.BlockModel.Quote,ATTRS:{}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-quote","@sqs/layout-engine/block-mixin-animated-block"]})},7873:function(e,t,a){var i=a(9065);var n=a(114);var s=a(522);var r=a(87);var o=a(5804);var l=n.isFeatureEnabled(r.GLOBAL_ANIMATIONS)&&s.isSevenOne();YUI.add("@sqs/layout-engine/block-model-quote",function(e){e.namespace("SQS.LayoutEngine.BlockModel");e.SQS.LayoutEngine.BlockModel.Quote=e.Base.create("QuoteBlockModel",e.Model,[],{},{ATTRS:Object.assign(i.blockSchemaToYuiAttrs("quote"),{blockAnimation:{valueFn:function(){return l?o.SITE_DEFAULT.value:o.NONE.value}}})})},"1.0",{requires:["base","model"]})},7874:function(e,t,a){var s=a(24).t;var r=a(207);var o=a(1697);var l=a(114);var c=a(522);var d=a(87);var u=a(5804);var g=a(1089);YUI.add("squarespace-block-quote-editor",function(i){i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.Quote=i.Base.create("block-quote-editor",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Quote")}},{NS:"blockEditor",ATTRS:{blockName:{value:s("Quote")}}});i.namespace("Squarespace.Block.ModelEditorDialog");var n=i.Squarespace.Block.ModelEditorDialog.Quote=i.Base.create("blockQuoteEditor",i.Squarespace.ModelEditorDialog,[i.Squarespace.Block.Mixins.BlockAnimationAnalytics],{save:function e(t,a,i){this.trackAnimationFieldsSave({eventName:"quote_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});n.superclass.save.apply(this,arguments)},_showDialog:function e(){var t=this.get("dialog");var a=this.get("id");t.detach(a+"|ready");t.on(a+"|ready",function(e){this.trackAnimationFieldsChange({fields:[t.getField("blockAnimation")],eventName:"quote_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this);n.superclass._showDialog.call(this)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var n={collectionId:a,blockAnimationSelection:i};g.userSelectQuoteAnimationOverride(i);return n},_getDialogConfig:function(){var e={title:s("Quote"),icon:"/universal/images-v6/icons/icon-quote-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:s('Add a quote that stands out on the page. In most templates, you can change its font and color by navigating to <strong>Home &rsaquo; Design &rsaquo; Style Editor</strong>. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.QUOTE_EDITOR})}},{ctor:i.Squarespace.DialogFields.TextArea,config:{name:"quote","strings.placeholder":s("Enter quote…"),height:110}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"source",submitOnEnter:true,"strings.placeholder":s("Enter source…")}}]};var t=[e];var a=l.isFeatureEnabled(d.GLOBAL_ANIMATIONS)&&c.isSevenOne();t.push({tabTitle:s("Animations"),fields:[{ctor:i.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":s("Animate Quote Block"),className:"thin dark",options:o([a&&u.SITE_DEFAULT,a&&u.NO_ANIMATION,!a&&u.NONE,u.FADE_IN,u.FOCUS_IN,u.SLIDE_UP,u.REVEAL])}}]});return{width:420,tabs:t}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-text-area","squarespace-block-mixin-block-animation-analytics"]})},7875:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-rss",function(e){e.namespace("Squarespace.ContentModel").RSSBlock=e.Base.create("RSSBlockModel",e.Model,[],{},{ATTRS:{collectionId:{}}});e.namespace("Squarespace.Block").Rss=e.Base.create("block-rss",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{MODEL:e.Squarespace.ContentModel.RSSBlock,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Rss}},type:{value:i.RSS}},CSS_PREFIX:"sqs-block-rss"})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-models-content-collection","squarespace-block-rss-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7876:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(207);YUI.add("squarespace-block-rss-editor",function(e){e.namespace("Squarespace.Block.Editor").Rss=e.Base.create("rss-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Rss")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Rss")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Rss=e.Base.create("blockRssEditor",e.Squarespace.ModelEditorDialog,[],{_getDefaultDialogConfig:function(){return{width:350,height:320,primaryTabs:[{title:i("RSS Block"),icon:"/universal/images-v6/icons/icon-rss-16-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Create a link to your Blog Page\'s RSS feed to encourage visitors to subscribe using their RSS reader. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:s.RSS_EDITOR})}},{ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:false,collectionFilter:{collectionType:n.COLLECTION_TYPE_GENERIC,ordering:e.Squarespace.CollectionOrdering.CHRONOLOGICAL,folder:false},emptyMessage:i("No Blog Pages yet. Go to the pages panel and click a + to add new content.")}}]}]}}},{NS:"rssEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-selector","squarespace-dialog-description","squarespace-models-content-collection"]})},7877:function(e,t,a){var n=a(701);YUI.add("squarespace-block-search",function(a){var i=a.namespace("Squarespace.Block").Search=a.Base.create("block-search",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{destructor:function(){this._searchPreview&&this._searchPreview.destroy()},_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("contentBox").one(".sqs-search-ui-text-input");if(a.Lang.isValue(t)){t.detach("click");this._searchPreview=new a.Squarespace.Widgets.SearchPreview({render:t})}}},{CSS_PREFIX:"sqs-block-search",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Search},type:{value:n.SEARCH}}})},"1.0",{requires:["base","model","squarespace-search-preview","@sqs/layout-engine/block-model-sync-base","squarespace-block-search-editor","squarespace-premium-block-mixin"]})},7878:function(e,t,a){var i=a(24).t;var n=a(229);var s=a(207);YUI.add("squarespace-block-search-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Search=a.Base.create("search-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(e){var t=this.configDialog.get("dialog");this._dialogReady=false;a.Lang.isValue(t)?t.on("ready",function(){var e=t.getField("collectionFilter");if(e){e.after("dataChange",this._onCollectionFilterCheckChange,this);false===t.getField("collectionFilter").get("data")&&t.getField("collectionId").hide()}},this):this._dialogReady=true},_onCollectionFilterCheckChange:function(e){var t=this.configDialog.get("dialog");var a=t.getField("collectionId");var i=true!==e.newVal;if(i){a.clearSelected();a.set("data",{urlId:null,filter:null,id:null});a.hide()}else a.show()},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Search")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Search")}}});var e={title:i("Search"),width:335,height:350,tabs:[{tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:i('Add a search field to your page that returns results from across your site, or limited to one page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.SEARCH_EDITOR}),padding:[0,20]}},{ctor:a.Squarespace.DialogFields.Check,name:"collectionFilter",config:{"strings.title":i("Search Specific Page"),"strings.description":i("Limit results to one page.")}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[n.COLLECTION_TYPE_GENERIC,n.PRODUCTS],ordering:[a.Squarespace.CollectionOrdering.USER,a.Squarespace.CollectionOrdering.CHRONOLOGICAL,a.Squarespace.CollectionOrdering.CALENDAR],folder:false},emptyMessage:i("There are no searchable pages yet.")}}]},{tabTitle:i("Display"),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Check,name:"searchPreview",config:{"strings.title":i("Quick Preview"),"strings.description":i("A dropdown under the search block will allow a quicker access to the search results."),defaultValue:true}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"theme","strings.title":i("Theme"),className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:i("Dark")},{value:"light",label:i("Light")}]}}]}]};a.namespace("Squarespace.Block.ModelEditorDialog").Search=a.Base.create("block-search-editor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-model-editor"]})},7879:function(e,t,a){var i=a(701);YUI.add("squarespace-block-social-account-links",function(o){o.namespace("Squarespace.Block").SocialAccountLinksUtils={getAccountsWithProfileUrl:function(e){var a=[];var t=o.config.win.Static.SQUARESPACE_CONTEXT.website.socialAccounts;t=t||o.Squarespace.Models.ConnectedAccounts.loadFromStore();var i=o.Array.map(t,function(e){return o.clone(e,true)});if(e&&e.get("accountIds")){var n=e.get("accountIds");var s=o.Squarespace.Block.SocialAccountLinksUtils._indexById(i);o.Array.each(n,function(e){var t=s[e];t&&a.push(t)});var r=o.Array.filter(i,function(e){return-1===n.indexOf(e.id)},this);a=a.concat(r)}else a=i;return o.Array.filter(a,function(e){return!!e.profileUrl})},_indexById:function(e){return o.Array.reduce(e,{},function(e,t){e[t.id]=t;return e})}};o.namespace("Squarespace.Block").SocialAccountLinks=o.Base.create("block-legacy-social-account-links",o.SQS.LayoutEngine.Block.ModelSyncBase,[o.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:o.Squarespace.ContentModel.SocialAccountLinksLegacyBlock,ATTRS:{type:{value:i.SOCIAL_ACCOUNT_LINKS},editor:{value:o.Squarespace.Block.Editor.LegacySocialAccountLinks}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-social-account-links-legacy-editor","squarespace-block-social-account-links-legacy-model","squarespace-premium-block-mixin","squarespace-models-connected-accounts"]})},7880:function(e,t){YUI.add("squarespace-block-social-account-links-legacy-editor",function(e){e.namespace("Squarespace.Block.Editor").LegacySocialAccountLinks=e.Base.create("legacySocialAccountLinksEditor",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.LegacySocialAccountLinks")}},{NS:"blockEditor"})},"1.0",{requires:["base","squarespace-block-social-account-links-legacy-model-editor","squarespace-damask-context-globals"]})},7881:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-social-account-links-legacy-model-editor",function(t){t.namespace("Squarespace.Block.ModelEditorDialog").LegacySocialAccountLinks=t.Base.create("SocialAccountLinksLegacyModelEditor",t.Squarespace.Block.ModelEditorDialog.SocialAccountLinks,[],{initializer:function(){var e=this.get("dialogConfig");e.tabs=[{tabTitle:i("Links"),title:i("Edit Social Links"),icon:"/universal/images-v6/icons/icon-social-18-light.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,config:{text:i('This Social Links block that has been deprecated and can no longer be edited. To update your social links, please remove this block and add a new one. <a href="{helpLinkSocialLinks}" target="_blank">Learn more</a>',{helpLinkSocialLinks:n.SOCIAL_LINKS_BLOCK})}}]},e.tabs[1]]}})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor"]})},7882:function(e,t,a){var i=a(24).t;var n=a(522);YUI.add("squarespace-block-social-account-links-model-editor",function(t){var e={socialAccountPickerAccounts:{$valueFn:function(e){return t.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(e)}},iconAlignmentOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconAlignments;return[{value:e.LEFT,label:i("Left")},{value:e.CENTER,label:i("Center")},{value:e.RIGHT,label:i("Right")}]}},iconSizeOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconSizes;return[{value:e.XSMALL,label:i("Extra Small")},{value:e.SMALL,label:i("Small")},{value:e.DEFAULT,label:i("Medium")},{value:e.LARGE,label:i("Large")},{value:e.XLARGE,label:i("Extra Large")}]}},iconColorOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconColors;return[{value:e.BLACK,label:i("Dark")},{value:e.WHITE,label:i("Light")},{value:e.STANDARD,label:i("Standard")}]}},iconStyleOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconStyles;return[{value:e.ICON_ONLY,label:i("Regular")},{value:e.ROUND_BORDER,label:i("Circle - Border")},{value:e.ROUND,label:i("Circle - Knockout")},{value:e.ROUND_SOLID,label:i("Circle - Solid")},{value:e.REAL_SQUARE_BORDER,label:i("Square - Border")},{value:e.REAL_SQUARE,label:i("Square - Knockout")},{value:e.REAL_SQUARE_SOLID,label:i("Square - Solid")},{value:e.SQUARE_BORDER,label:i("Rounded - Border")},{value:e.SQUARE,label:i("Rounded - Knockout")},{value:e.SQUARE_SOLID,label:i("Rounded - Solid")}]}}};var a={width:340,height:440,title:i("Edit Social Links"),tabs:[{tabTitle:i("Accounts"),name:"accounts",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.ConnectedAccounts}]},{icon:"/universal/images-v6/icons/icon-social-18-light.png",tabTitle:i("Design"),name:"design",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconAlignment",className:"thin dark","strings.title":i("Alignment"),options:{$include:"iconAlignmentOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconSize","strings.title":i("Size"),className:"thin dark",options:{$include:"iconSizeOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconStyle","strings.title":i("Style"),className:"thin dark",options:{$include:"iconStyleOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{name:"iconColor","strings.title":i("Color"),className:"thin dark",options:{$include:"iconColorOptions"},visible:!n.isSevenOne()}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").SocialAccountLinks=t.Base.create("socialAccountLinks",t.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{value:a},dialogConfigContext:{value:e}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-dialog-description","squarespace-dialog-select","squarespace-dialog-connected-accounts"]})},7883:function(e,t,a){var i=a(0);var n=a(60);var s=a(7472);YUI.add("squarespace-dialog-connected-accounts",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.ConnectedAccounts=e.Base.create("connected-accounts",e.Squarespace.DialogField2,[],{initializer:function(){this.reactElement=i.createElement(s,{trackingLocation:"social_links_block_editor"})},destructor:function(){n.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},renderUI:function(){this.get("boundingBox").setStyle("margin",0);this.reactInstance=n.render(this.reactElement,this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-connected-accounts",ATTRS:{testAttribute:{value:"connected-accounts"}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},7885:function(e,t){YUI.add("squarespace-block-social-account-links-legacy-model",function(e){e.namespace("Squarespace.ContentModel").SocialAccountLinksLegacyBlock=e.Base.create("SocialAccountLinksLegacyBlockModel",e.Squarespace.ContentModel.SocialAccountLinksBlock,[],{},{ATTRS:{accountIds:{valueFn:function(){return e.Array.map(e.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(),function(e){return e.id})}}}})},"1.0",{requires:["squarespace-block-social-account-links-model"]})},7886:function(e,t,a){var i=a(522);YUI.add("squarespace-block-social-account-links-model",function(e){e.namespace("Squarespace.ContentModel").SocialAccountLinksBlock=e.Base.create("SocialAccountLinksBlock",e.Model,[],{},{ATTRS:{iconAlignment:{value:"center"},iconSize:{value:"small"},iconStyle:{value:"icon-only"},iconColor:{value:i.isSevenOne()?null:"black"}}})},"1.0",{requires:["base","model"]})},7887:function(e,t,a){var n=a(701);var s=a(87);var r=a(5333);var o=a(114);var l=a(1028);var c=a(34);var d=a(2367);var u=a(1342);YUI.add("squarespace-block-social-account-links-v2",function(e){var a="/universal/svg/social-accounts.svg";var t={iconAlignment:"center",iconSize:"small",iconStyle:"icon-only",iconColor:"black"};var i=e.namespace("Squarespace.Block").SocialAccountLinksV2=e.Base.create("block-social-account-links-v2",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this.actionListener=new l(c);this.actionListener.addActionListener(d.REFRESH_LAYOUT_ENGINE,this.refreshSocialIcons.bind(this))},destructor:function(){this.actionListener.removeAllActionListeners();this.actionListener=null},refreshSocialIcons:function(){try{this._renderBlock()}catch(e){console.warn(e)}},_renderSuccess:function(){i.superclass._renderSuccess.apply(this,arguments);this.get("contentBox").all("svg use").each(function(e){var t=e.getAttribute("xlink:href");-1===t.indexOf(a)&&e.setAttribute("xlink:href",a+t)});r.parse()}},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:e.Squarespace.ContentModel.SocialAccountLinksBlock,ATTRS:{type:{value:n.SOCIAL_ACCOUNT_LINKS_V2},editor:{valueFn:function(){if(u.isMobileContentEditingEnabled()||o.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.SocialAccountLinks}},defaultContentModel:{value:t}}})},"1.0",{requires:["base","model","squarespace-block-social-account-links-model","squarespace-block-social-account-links-editor","@sqs/layout-engine/block-model-sync-base","squarespace-premium-block-mixin"]})},7888:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-social-account-links-editor",function(e){e.namespace("Squarespace.Block.Editor").SocialAccountLinks=e.Base.create("socialAccountLinksEditor",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SocialAccountLinks")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Social Links")}}})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor","squarespace-damask-context-globals"]})},7889:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-spacer",function(e){e.namespace("Squarespace.ContentModel").Spacer=e.Base.create("SpacerBlockModel",e.Model,[],{},{ATTRS:{vSize:{value:1},aspectRatio:{value:null}}});e.namespace("Squarespace.Block").Spacer=e.Base.create("block-spacer",e.SQS.LayoutEngine.Block.Base,[e.SQS.LayoutEngine.Block.MixinAspectRatio,e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-spacer",MODEL:e.Squarespace.ContentModel.Spacer,ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Spacer}},mobileEditor:{valueFn:function(){return e.Squarespace.Block.Editor.Spacer}},type:{value:i.SPACER},classNames:{value:"spacer-block"},floatable:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-spacer-editor","squarespace-block-schema-editor","squarespace-ss-widget","squarespace-premium-block-mixin"]})},7890:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-spacer-editor",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.Spacer=e.Base.create("blockSpacerEditor",e.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{value:i("Spacer")},editingButtons:{value:true},includeEdit:{value:false},resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/block-editor-base"]})},7891:function(e,t,a){var i=a(24).t;var s=a(701);var r=a(114);var o=a(87);var l=a(1342);YUI.add("squarespace-block-summary-v2",function(n){var e=n.Squarespace.ContentModel.SummaryV2Block=n.Base.create("SummaryV2",n.Model,[],{},{ATTRS:{collectionId:{value:""},design:{value:"autogrid"},headerText:{value:i("Featured")},textSize:{value:"medium"},pageSize:{value:10},imageAspectRatio:{value:1.5},columnWidth:{value:270},gutter:{value:60},listImageSize:{value:30},listImageAlignment:{value:"left"},slidesPerRow:{value:3},textAlignment:{value:"left"},showTitle:{value:true},showThumbnail:{value:true},showExcerpt:{value:true},showReadMoreLink:{value:false},showPrice:{value:true},productQuickViewEnabled:{value:false},showPastOrUpcomingEvents:{value:"upcoming"},metadataPosition:{value:"below-content"},primaryMetadata:{value:"none"},secondaryMetadata:{value:"none"},filter:{value:{}},autoCrop:{value:true},lightbox:{value:false},mixedContent:{value:true},blockId:{valueFn:function(){return n.Squarespace.Utils.getGuid()}}}});var t=n.namespace("Squarespace.Block").SummaryV2=n.Base.create("block-summary-v2",n.SQS.LayoutEngine.Block.ModelSyncBase,[n.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){t.superclass.syncUI.call(this);this._plugImageLoader()},bindUI:function(){this.get("model").after("change",this._renderBlock,this);this.after("resized",this._renderBlock,this)},show:function(){t.superclass.show.call(this,arguments);this._setWidgetContent()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(n.Squarespace.Loader2.NS)||e.plug(n.Squarespace.Loader2)})},_renderBlock:function(e){this.get("boundingBox").setData("block",this.get("model").getAttrs());this._shouldGetWidgetRendering(e)?t.superclass._renderBlock.call(this):this._updateWhitelistedAttrs(e)},_renderSuccess:function(e){this.set("widgetContent",e.html);this._setWidgetContent()},_setWidgetContent:function(){var e=n.Node.create(this.get("widgetContent"));var t=this.get("contentBox");t.empty();t.setHTML(e);n.SQS.Gallery.Manager.initializeBlock(t)},_shouldGetWidgetRendering:function(e){if(!n.Lang.isValue(e)||!n.Object.hasKey(e,"changed"))return true;return!n.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed)},_updateWhitelistedAttrs:function(e){var t=this.get("model");var a=this.get("contentBox");e.changed.headerText?a.one(".summary-heading").setHTML(t.get("headerText")):e.changed.textSize?this._updateClassThatStartsWith("summary-block-setting-text-size-",t.get("textSize"),a.get("children")):e.changed.textAlignment?this._updateClassThatStartsWith("summary-block-setting-text-align-",t.get("textAlignment"),a.get("children")):e.changed.listImageAlignment&&this._updateClassThatStartsWith("summary-block-setting-design-list-thumbnail-",t.get("listImageAlignment"),a.get("children"))},_updateClassThatStartsWith:function(t,a,i){var e=i.getAttribute("class")[0].split(" ");n.Array.forEach(e,function(e){e=e.trim();e.startsWith(t)&&i.hasClass(e)&&i.replaceClass(e,t+a)},this)}},{CSS_PREFIX:"sqs-block-summary-v2",MODEL:n.Squarespace.ContentModel.SummaryV2Block,ATTRS:{modelWhiteList:{setter:function(e){if(n.Lang.isArray(e))return e;if(n.Lang.isString(e))return[e];return[]},value:["headerText","textSize","listImageAlignment","textAlignment","enableProductQuickView"]},defaultContentModel:{},editor:{valueFn:function(){if(l.isMobileContentEditingEnabled()||r.isFeatureEnabled(o.ROSETTA_BLOCK_EDITORS))return n.Squarespace.Block.Editor.Schema;return n.Squarespace.Block.Editor.SummaryV2}},type:{value:s.SUMMARY_V2},widgetContent:{value:""},floatable:{value:true}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-summary-v2-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-utils","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-content-collection","squarespace-util","squarespace-video-loader","squarespace-premium-block-mixin"]})},7892:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-summary-v2-editor",function(e){e.namespace("Squarespace.Block.Editor").SummaryV2=e.Base.create("summary-v2-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SummaryV2")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Summary")}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-v2-model-editor","squarespace-damask-context-globals","squarespace-model-editor"]})},7893:function(e,t,a){var s=a(24).t;var r=a(1595);var u=a(229);var o=a(9116);var l=a(207);var c=a(6865);var g=a(114);var p=a(87);var h=a(522);YUI.add("squarespace-block-summary-v2-model-editor",function(d){d.namespace("Squarespace.Block.ModelEditorDialog");var n={text:"blog",image:"gallery",event:"events",store_item:"products"};d.Squarespace.Block.ModelEditorDialog.SummaryV2=d.Base.create("SummaryV2ModelEditorDialog",d.Squarespace.ModelEditorDialog,[],{initializer:function(){var e=this.get("dialog");var t=this.get("model");this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);e.on("ready",function(){this._updateLayoutFields();this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete();e.getField("collectionId").after("dataChange",function(){this._resetMetadataDropdowns();this._resetEventTimeframeDropdown()},this)},this);t.after("collectionIdChange",function(){this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete();this._resetNestedCategory()},this);t.after("designChange",this._updateLayoutFields,this);t.after("showExcerptChange",this._updateReadMoreLinkField,this);t.on("save",this._setLightboxMode,this);e.on(["shown","tab-focused"],function(){e.getField("pageSize").refreshWidth();e.getField("listImageSize").refreshWidth();e.getField("slidesPerRow").refreshWidth()},this)},_resetNestedCategory:function(){this.get("dialog").getField("filter").resetNestedCategorySelection()},_setLightboxMode:function(){this.get("model").set("lightbox","gallery"===this.collectionClassification)},_updateLayoutFields:function(){var t=this.get("model").get("design");var e=this.get("dialog").el;if(!e)return;e.all(".sqs-dialog-field.layout").each(function(e){e.toggleClass("hidden",!e.hasClass(t))},this)},_updateDisplayFields:function(){this.get("dialog").el.all(".sqs-dialog-field.display").each(function(e){e.toggleClass("hidden",!e.hasClass(this.collectionClassification))},this)},_updateReadMoreLinkField:function(){"blog"===this.collectionClassification&&this.get("dialog").getField("showReadMoreLink").get("boundingBox").toggleClass("hidden",!this.get("model").get("showExcerpt"))},_updateMetadataDropdowns:function(){var e=this.get("dialog");var t=[];if("gallery"===this.collectionClassification){t=t.concat([this._createSelectOption("none",s("None")),this._createSelectOption("date",s("Date Posted")),this._createSelectOption("cats",s("Category")),this._createSelectOption("tags",s("Tags")),this._createSelectOption("author",s("Author")),this._createSelectOption("location",s("Location"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else if("events"===this.collectionClassification){t=t.concat([this._createSelectOption("none",s("None")),this._createSelectOption("date",s("Event Date")),this._createSelectOption("event-time",s("Event Time")),this._createSelectOption("cats",s("Category")),this._createSelectOption("tags",s("Tags")),this._createSelectOption("location",s("Location"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else if("products"===this.collectionClassification){t=t.concat([this._createSelectOption("none",s("None")),this._createSelectOption("cats",s("Category")),this._createSelectOption("tags",s("Tags"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else{t=t.concat([this._createSelectOption("none",s("None")),this._createSelectOption("date",s("Date Posted")),this._createSelectOption("cats",s("Category")),this._createSelectOption("tags",s("Tags")),this._createSelectOption("author",s("Author")),this._createSelectOption("location",s("Location")),this._createSelectOption("comments",s("Comments"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}},_resetMetadataDropdowns:function(){var e=this.get("dialog");var t="date";var a="none";"products"===this.collectionClassification&&(t="none");e.getField("primaryMetadata").set("data",t);e.getField("secondaryMetadata").set("data",a)},_resetEventTimeframeDropdown:function(){this.get("dialog").getField("showPastOrUpcomingEvents").set("data",o.UPCOMING)},_updateAutocomplete:function(){var e=this._getCollectionId();var t=this.get("dialog").getField("filter");if(!d.Lang.isString(e)||""===e||!d.Lang.isValue(t)){t.set("visible",false);return}t.set("visible",true);var a=d.Squarespace.ContentCollectionCache.getById(e);var i=a.get("type")===u.PRODUCTS;var n=g.isFeatureEnabled(p.NESTED_CATEGORIES);t.set("collectionId",e);t.set("showNestedCategories",i&&n);var s=t.get("tagField");var r=t.get("categoryField");var o="/api/commondata/GetAutoCompleteTags";var l="/api/commondata/GetAutoCompleteCategories";var c={collectionId:e};if(d.Lang.isValue(t)){this._getNewAutoCompleteData(s,o,c);this._getNewAutoCompleteData(r,l,c)}},_getNewAutoCompleteData:function(a,e,t){d.Data.get({url:e,data:t,success:function(e){var t=a.get("acWidget");d.Lang.isValue(t)&&t.set("source",e)}})},_createSelectOption:function(e,t){return{value:e,label:t}},_getCollectionId:function(){return this.get("model").get("collectionId")||""},_getCollectionClassification:function(e){if(!e||!d.Squarespace.ContentCollectionCache.getById(e))return"unknown";var t=d.Squarespace.ContentCollectionCache.getById(e).get("typeName");var a=r.getCollectionConfig(t).acceptTypes;if(1===a.length){var i=n[a[0]];if(i)return i}else if(2===a.length&&a.indexOf("image")>-1&&a.indexOf("video")>-1)return"gallery";return"unknown"},_getDefaultDialogConfig:function(){var e={ctor:d.Squarespace.DialogFields.MultiOption,config:{defaultValue:"autogrid",options:[{value:"autocolumns",title:s("Wall"),icon:"wall"},{value:"carousel",title:s("Carousel"),icon:"carousel"},{value:"list",title:s("List"),icon:"list"},{value:"autogrid",title:s("Grid"),icon:"grid"}],name:"design"}};var t=s('Display content from other pages on your site, such as blog posts, products, gallery images, or events. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.SUMMARY_EDITOR});var a=s('Display content from other pages on your site, such as blog posts, products, or events. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.SUMMARY_EDITOR});var i=[{tabTitle:s("Content"),icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:true,fields:[{ctor:d.Squarespace.DialogFields.Description,config:{text:h.isSevenOne()?a:t}},{ctor:d.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[u.PRODUCTS,u.COLLECTION_TYPE_GENERIC],ordering:[d.Squarespace.CollectionOrdering.USER,d.Squarespace.CollectionOrdering.CHRONOLOGICAL,d.Squarespace.CollectionOrdering.CALENDAR],folder:false},emptyMessage:s("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:d.Squarespace.DialogFields.Hidden,config:{name:"blockId"}}]},{tabTitle:s("Layout"),scroll:true,fields:[e,{ctor:d.Squarespace.DialogFields.Text,config:{"strings.title":s("Header Text"),name:"headerText",className:"layout carousel thin",defaultValue:""}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Aspect Ratio"),name:"imageAspectRatio",className:"layout autogrid list carousel thin dark",defaultValue:1.5,options:[{value:"Auto",label:s("Auto")},{value:1,label:s("1:1 Square")},{value:1.5,label:s("3:2 Standard")},{value:2/3,label:s("2:3 Standard (Vertical)")},{value:4/3,label:s("4:3 Four-Three")},{value:.75,label:s("3:4 Three-Four (Vertical)")},{value:16/9,label:s("16:9 Widescreen")},{value:2.4,label:s("2.40 Anamorphic Widescreen")}]}},{ctor:d.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":s("Column Width"),"strings.description":s("Specify a minimum width columns should be. The number of columns displayed will vary depending on the width of your site."),name:"columnWidth",range:[50,600],labelWidth:30,submitOnEnter:true,className:"layout autogrid autocolumns"}},{ctor:d.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":s("Gutter Width"),"strings.description":s("Specify the distance between items."),name:"gutter",range:[0,100],labelWidth:30,submitOnEnter:true,className:"layout autogrid autocolumns"}},{ctor:d.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":s("Image Size"),"strings.description":s("Specify how wide the image should be in relation to the text."),name:"listImageSize",range:[10,80],"strings.suffix":"%",pluralize:false,labelWidth:30,submitOnEnter:true,className:"layout list"}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Image Alignment"),name:"listImageAlignment",className:"layout list thin dark",defaultValue:"left",options:[{value:"left",label:s("Left")},{value:"right",label:s("Right")}]}},{ctor:d.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":s("Items Per Row"),"strings.description":s("Specify how many items should be visible at a time."),name:"slidesPerRow",range:[1,5],labelWidth:30,submitOnEnter:true,className:"layout carousel"}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Text Size"),name:"textSize",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"medium",options:[{value:"extralarge",label:s("Extra Large")},{value:"large",label:s("Large")},{value:"medium",label:s("Medium")},{value:"small",label:s("Small")}]}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Text Alignment"),name:"textAlignment",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"left",options:[{value:"left",label:s("Left")},{value:"center",label:s("Center")},{value:"right",label:s("Right")}]}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Metadata Position"),name:"metadataPosition",className:"display blog gallery events products unknown thin dark",defaultValue:"below-content",options:[{value:"above-title",label:s("Above Title")},{value:"below-title",label:s("Below Title")},{value:"below-content",label:s("Below Content")}]}}]},{tabTitle:s("Display"),scroll:true,fields:[{ctor:d.Squarespace.DialogFields.Slider,required:true,config:{"strings.title":s("Number of Items"),"strings.description":s("Select the number of items to display"),name:"pageSize",range:[1,30],isNumericLabel:false,labelWidth:30,submitOnEnter:true,className:"display blog gallery events products unknown"}},{ctor:d.Squarespace.DialogFields.Check,name:"showTitle",config:{"strings.title":s("Show Title")},className:"display blog gallery events products unknown"},{ctor:d.Squarespace.DialogFields.Check,name:"showThumbnail",config:{"strings.title":s("Show Thumbnail")},className:"display blog gallery events products unknown"},{ctor:d.Squarespace.DialogFields.Check,name:"showExcerpt",config:{"strings.title":s("Show Excerpt")},className:"display blog gallery events products unknown"},{ctor:d.Squarespace.DialogFields.Check,name:"showReadMoreLink",config:{"strings.title":s("Show Read More Link")},className:"display blog unknown"},{ctor:d.Squarespace.DialogFields.Check,name:"showPrice",config:{"strings.title":s("Show Price")},className:"display products"},{ctor:d.Squarespace.DialogFields.Check,name:"productQuickViewEnabled",config:{"strings.title":s("Enable Product Quick View"),"strings.description":s("On hover, a button will appear that lets customers dynamically access product details without leaving the page.")},className:"display products",$when:function(e){return c.isQuickViewSupported()}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Event Timeframe"),name:"showPastOrUpcomingEvents",className:"display events thin dark",defaultValue:o.UPCOMING,options:[{value:o.UPCOMING,label:s("Upcoming")},{value:o.PAST,label:s("Past")}]}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Primary Metadata"),name:"primaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",options:[]}},{ctor:d.Squarespace.DialogFields.Select,config:{"strings.title":s("Secondary Metadata"),name:"secondaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",options:[]}},{ctor:d.Squarespace.DialogFields.SummaryFilter,name:"filter"}]}];return{title:s("Summary"),width:460,height:440,style:"standard",loadingText:s("Editing Summary Block…"),initialDataByReference:true,tabs:i}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:d.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-summary-filter","squarespace-dialog-text","squarespace-model-editor","squarespace-models-content-collection"]})},7894:function(e,t,a){var i=a(701);var n=a(114);var s=a(87);var r=a(1342);YUI.add("squarespace-block-tagcloud",function(e){e.namespace("Squarespace.Block").Tagcloud=e.Base.create("block-tagcloud",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-tagcloud",ATTRS:{editor:{valueFn:function(){if(r.isMobileContentEditingEnabled()||n.isFeatureEnabled(s.ROSETTA_BLOCK_EDITORS))return e.Squarespace.Block.Editor.Schema;return e.Squarespace.Block.Editor.Tagcloud}},type:{value:i.TAGCLOUD}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-tagcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},7895:function(e,t,a){var n=a(24).t;var s=a(24).pluralize;var r=a(207);YUI.add("squarespace-block-tagcloud-editor",function(i){i.namespace("Squarespace.Block.Editor").Tagcloud=i.Base.create("tagcloud-block-editor-dialog",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Tagcloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:n("Tag Cloud")}}});var t=i.namespace("Squarespace.Block.ModelEditorDialog").Tagcloud=i.Base.create("blockTagcloudEditor",i.Squarespace.ModelEditorDialog,[],{_showDialog:function(){t.superclass._showDialog.call(this);var e=this.get("dialog").getField("collectionIds");e.set("collectionGroups",this._getCollectionGroups());e.syncUI()},_getCollectionGroups:function(){var e=i.Squarespace.ContentCollectionUtils;var t=i.Squarespace.ContentCollectionCache;var a=t.filter(e.isGenericOrProduct);a=i.Array(a).filter(e.isNotCalendar);return e.groupCollectionsByTypeName(a)},_getDialogConfig:function(){return{width:300,height:450,initialDataByReference:true,tabs:[{title:n("Tag Cloud"),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,text:n('Display tags or categories from one of your pages arranged in a fun cloud formation. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:r.TAGCLOUD_EDITOR})},{ctor:i.Squarespace.DialogFields.ContentIdArraySelector,config:{name:"collectionIds",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionGroups:[],emptyMessage:n("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"type","strings.title":n("Display Type"),className:"dark thin",defaultValue:"tag",options:[{value:"tag",label:this.get("strings").tag},{value:"category",label:this.get("strings").category}]}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"sortby","strings.title":n("Sort By"),defaultValue:"az",className:"thin dark",options:[{value:"az",label:this.get("strings").az},{value:"weight",label:this.get("strings").weight},{value:"activity",label:this.get("strings").activity}]}},{ctor:i.Squarespace.DialogFields.Slider,required:true,config:{name:"count",range:[5,100],"strings.description":n("Pick the number of tags to show in the cloud."),getPluralizedSliderLabel:function(e){return s({one:"{%n} Tag",other:"{%n} Tags"},e)},labelWidth:50,submitOnEnter:true}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},strings:{value:{az:n("Alphabetical"),weight:n("Weight"),activity:n("Activity"),tag:n("Tags"),category:n("Categories"),author:n("Author"),fontsize:n("Font Size"),color:n("Color"),flat:n("Flat")}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},7896:function(e,t,a){var n=a(701);var s=a(114);var r=a(87);var o=a(1342);YUI.add("squarespace-block-tourdates",function(a){a.namespace("Squarespace.Block");var i=a.Squarespace.Block.TourDates=a.Base.create("block-tourdates",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){this.get("model").after("save",this._renderSuccess,this)},_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("model");this.tourdatesBlock=new a.Squarespace.Widgets.BandsInTownTourDatesList(t.getAttrs(["artistId","timeframe","startDate","endDate"]));this.tourdatesBlock.render(this.get("contentBox"));this.tourdatesBlock.on("templateRendered",function(){this.fire("widget:contentUpdate")}.bind(this))},_getDefaultContent:function(){var e=new Date;var t=new Date(e.getFullYear(),e.getMonth()-1,1).getTime();var a=new Date(e.getFullYear(),e.getMonth()+2,1).getTime();return{artistId:"",timeframe:"upcoming",startDate:t,endDate:a}}},{MODEL:a.Squarespace.ContentModel.TourDatesBlock,CSS_PREFIX:"sqs-block-tourdates",ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||s.isFeatureEnabled(r.ROSETTA_BLOCK_EDITORS))return a.Squarespace.Block.Editor.Schema;return a.Squarespace.Block.Editor.TourDates}},type:{value:n.TOURDATES}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-tourdates-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-utils","squarespace-widgets-tourdates-bandsintown","squarespace-premium-block-mixin"]})},7897:function(e,t,a){var i=a(24).t;YUI.add("squarespace-block-tourdates-editor",function(e){e.namespace("Squarespace.Block.Editor").TourDates=e.Base.create("tourdates-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.TourDates")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Bandsintown")}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-block-editor-dialog","squarespace-block-tourdates-model-editor","squarespace-damask-context-globals"]})},7898:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-tourdates-model-editor",function(t){t.namespace("Squarespace.Block.ModelEditorDialog");var e=t.Squarespace.Block.ModelEditorDialog.TourDates=t.Base.create("TourDatesModelEditorDialog",t.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._toggleDateRangePickerVisibility()},this);this.get("model").after("timeframeChange",this._toggleDateRangePickerVisibility,this)},_toggleDateRangePickerVisibility:function(){var e=this.get("dialog");var t="dateRange"===this.get("model").get("timeframe");e.getField("startDate").set("visible",t);e.getField("endDate").set("visible",t)},_getDefaultDialogConfig:function(){var e=[{tabTitle:i("Bandsintown"),icon:"/universal/images-v6/icons/icon-bandsintown-16-light.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:i('Display tour dates from your Bandsintown profile, and allow visitors to RSVP to your shows and buy tickets through links on your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.BANDSINTOWN})},{ctor:t.Squarespace.DialogFields.Text,config:{"strings.placeholder":i("Pablo City"),"strings.title":i("Band Name"),"strings.description":i("Enter your band's name as it appears within your Bandsintown account."),"strings.requiredFieldEmptyMessage":i("Please enter a band name."),name:"artistId",className:"thin",required:true}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Timeframe to Show"),name:"timeframe",className:"thin dark",defaultValue:"upcoming",options:[{value:"upcoming",label:i("Upcoming")},{value:"dateRange",label:i("Date Range")}]}},{type:"splitter",fields:[{ctor:t.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":i("Tour begins on"),name:"startDate",dateFormat:"lll",timePickerEnabled:false}},{ctor:t.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":i("and ends"),"strings.errorMessage":i("End date needs to be later than start date."),name:"endDate",dateFormat:"lll",timePickerEnabled:false,validator:function(e){var t=e;var a=this.get("dialog").getField("startDate").get("data");return null===t||t>=a}}}]}]}];return{title:i("Bandsintown"),width:410,height:375,style:"standard",loadingText:i("Editing Tour Dates Block…"),initialDataByReference:true,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:t.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-text","squarespace-dialog-select","squarespace-dialog-datetime-picker","squarespace-model-editor"]})},7899:function(e,t,a){var i=a(701);YUI.add("squarespace-block-twitter",function(t){var a=t.namespace("Squarespace.Block").Twitter=t.Base.create("block-twitter",t.Squarespace.Block.SocialSummaryBase,[t.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);e&&t.Squarespace.FollowButtonUtils.renderAll()},_getDefaultContent:function(){var e=a.superclass._getDefaultContent.call(this);return t.merge(e,{showAvatar:true,showUsername:true,followButton:false})}},{CSS_PREFIX:"sqs-block-twitter",MODEL:t.Squarespace.ContentModel.TwitterBlock,ATTRS:{editor:{value:t.Squarespace.Block.Editor.Twitter},type:{value:i.TWITTER}}})},"1.0",{requires:["base","squarespace-follow-buttons","squarespace-block-social-summary","squarespace-block-twitter-editor","squarespace-block-twitter-model","squarespace-premium-block-mixin"]})},7900:function(e,t,a){var r=a(24).t;var i=a(229);var o=a(207);YUI.add("squarespace-block-twitter-editor",function(n){var t=n.namespace("Squarespace.Block.Editor").Twitter=n.Base.create("twitter-block-editor-dialog",n.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Twitter")},_initConfigDialog:function(){var e=this._model.layout.get("contentItemId");n.Lang.isValue(e)||(e=this._model.layout.get("parentItemId"));this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:e});return t.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return n.Squarespace.ExternalServiceProviders.TWITTER}},{NS:"blockEditor",ATTRS:{blockName:{value:r("Twitter")}}});var s=n.namespace("Squarespace.Block.ModelEditorDialog").Twitter=n.Base.create("TwitterSummaryModelEditorDialog",n.Squarespace.Block.ModelEditorDialog.SocialSearch,[],{_getServiceId:function(){return n.Squarespace.ExternalServiceProviders.TWITTER},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=s.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;var i=!!this._isSocialVisible();t.name="twitter-block-editor";t.height=480;a.unshift({ctor:n.Squarespace.DialogFields.Description,text:r('Display a feed of your recent tweets, or use the search feature to display anyone\'s tweets by hashtag, mentions, or other terms. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:o.TWITTER})});a.push({ctor:n.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":r("Search Twitter for…"),data:e.searchTerm,maxLength:100,className:"thin",visible:i}});a.push({ctor:n.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":r("Refresh"),className:"thin",visible:i}});a.push({ctor:n.Squarespace.DialogFields.Check,name:"unsafeSearch",config:{"strings.title":r("Include Tweets Marked As Sensitive"),"strings.description":r("Include all tweets, including any flagged as possibly sensitive by Twitter."),data:e.unsafeSearch,visible:i}});a.push({ctor:n.Squarespace.DialogFields.Check,name:"showAvatar",config:{"strings.title":r("Show Avatar"),"strings.description":r("Shows or hides the avatar image."),data:e.showAvatar}});a.push({ctor:n.Squarespace.DialogFields.Check,name:"showUsername",config:{"strings.title":r("Show Username"),"strings.description":r("Shows or hides the username text."),data:e.showUsername}});a.push({ctor:n.Squarespace.DialogFields.Check,name:"followButton",config:{"strings.title":r("Show Follow Button"),"strings.description":r("Append a follow button to the listing."),data:e.followButton}});return t}},{ATTRS:{icon:{value:"twitter"},socialAccountType:{value:n.Squarespace.ExternalServiceProviders.TWITTER},collectionType:{value:i.TWITTER},strings:{value:{name:"Twitter",itemTypePlural:"tweets",itemType:"tweet"}}}})},"1.0",{requires:["base","model","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-model-editor"]})},7901:function(e,t){YUI.add("squarespace-block-twitter-model",function(e){e.namespace("Squarespace.ContentModel").TwitterBlock=e.Base.create("TwitterBlockModel",e.Model,[],{},{ATTRS:{}})},"1.0",{requires:["base","model"]})},7902:function(e,t,a){var n=a(472);var s=a(114);var r=a(87);var o=a(1342);YUI.add("squarespace-block-video",function(a){a.namespace("Squarespace.Block");var i=a.Squarespace.Block.Video=a.Base.create("block-video",a.SQS.LayoutEngine.Block.Video,[a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){if(!e.html){this._renderError();console.warn("Error rendering video block:",e);return}i.superclass._renderSuccess.call(this,e);if(a.config.win.location.protocol.startsWith("https")){var t=this.get("contentBox").one("object embed");t&&t.setAttribute("src",t.getAttribute("src").replace("http://","https://"))}this._pluginVideoLoader()},_pluginVideoLoader:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");e&&!e.hasPlugin(a.Squarespace.VideoLoader.NS)&&e.plug(a.Squarespace.VideoLoader)},refreshVideo:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");e&&e.videoloader.refreshVideo()}},{MODEL:a.Squarespace.ContentModel.VideoBlock,ATTRS:{editor:{valueFn:function(){if(o.isMobileContentEditingEnabled()||s.isFeatureEnabled(r.ROSETTA_BLOCK_EDITORS)||n.IS_SQUARESPACE_MOBILE_APP)return a.Squarespace.Block.Editor.Schema;return a.Squarespace.Block.Editor.Video}}}})},"2.0",{requires:["base","@sqs/layout-engine/block-video","squarespace-premium-block-mixin","squarespace-video-loader","squarespace-block-video-model","squarespace-block-video-editor","squarespace-block-schema-editor"]})},7903:function(e,t,a){var i=a(701);YUI.add("@sqs/layout-engine/block-video",function(e){e.namespace("SQS.LayoutEngine.Block");var a=e.SQS.LayoutEngine.Block.Video=e.Base.create("block-video",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){a.superclass.bindUI.call(this);var e=this.get("model");var t=e.get("customThumb");t&&this._bindImageListeners(t);e.after("customThumbChange",function(e){e.prevVal&&e.prevVal.detach(this.get("id")+"|*");e.newVal&&this._bindImageListeners(e.newVal)},this)},syncUI:function(){this.get("contentBox").all(".intrinsic").addClass("sqs-intrinsic")},_bindImageListeners:function(e){var t=this.get("id");e.after(t+"|mediaProcessingStateChange",this._renderBlock,this);e.after(t+"|mediaFocalPointChange",function(e){var t=this.get("contentBox").one(".sqs-video-overlay img");if(t){var a=t.loader;t.setAttribute("data-image-focal-point",e.newVal.x+","+e.newVal.y);a.fire("refresh")}},this)}},{CSS_PREFIX:"sqs-block-video",MODEL:e.SQS.LayoutEngine.BlockModel.Video,ATTRS:{type:{value:i.VIDEO}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-video","@sqs/layout-engine/block-mixin-animated-block"]})},7904:function(e,t){YUI.add("@sqs/layout-engine/block-model-video",function(s){s.namespace("SQS.LayoutEngine.BlockModel");s.SQS.LayoutEngine.BlockModel.Video=s.Base.create("VideoBlockModel",s.Model,[],{toJSON:function(){var t={blockAnimation:this.get("blockAnimation"),layout:this.get("layout"),overlay:this.get("overlay"),description:this.get("description"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")};var e=this.get("customThumb");s.Lang.isValue(e)&&(t.customThumb=e.get("id"));var a=this.get("oembed");var i=s.Lang.isObject(a);var n=["html","url","width","height","providerName","thumbnailUrl","resolvedBy"];s.Array.forEach(n,function(e){t[e]=i?a[e]:this.get(e)},this);return t}},{ATTRS:{blockAnimation:{value:"none"},customThumb:{setter:function(e){if(s.Lang.isString(e)){var t=s.SQS.LayoutEngine.ContentItem.getCtor();return new t({id:e})}return e}},oembed:{},layout:{value:"caption-hidden"},overlay:{value:false},description:{value:{}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},7905:function(e,t){YUI.add("squarespace-block-video-model",function(a){a.namespace("Squarespace.ContentModel");a.Squarespace.ContentModel.VideoBlock=a.Base.create("VideoBlockModel",a.SQS.LayoutEngine.BlockModel.Video,[],{},{ATTRS:{customThumb:{setter:function(e){var t=a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");if(a.Lang.isString(e))return new t({id:e});if(a.instanceOf(e,t))return e}}}})},"2.0",{requires:["base","model","@sqs/layout-engine/block-model-video","@sqs/layout-engine/content-item-content-item","squarespace-damask-context-globals"]})},7906:function(e,t,a){var s=a(87);var r=a(114);var o=a(183);var i=a(24).t;var l=a(207);YUI.add("squarespace-block-video-editor",function(h){h.namespace("Squarespace.Block.Editor");var t=h.Squarespace.Block.Editor.Video=h.Base.create("video-block-editor-dialog",h.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return h.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Video")},_updateModel:function e(i){var n=this._model;h.Object.each(i,function(e,t){if("description"===t)return;if("oembed"===t&&(!i.oembed||false===i.oembed.resolved)){delete i.oembed;return}var a=n.get(t);o(a,e)&&delete i[t]});t.superclass._updateModel.call(this,i)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Video")}}});var e=[{title:i("Video"),icon:"/universal/images-v6/icons/icon-video-16-light-solid.png",scroll:false,fields:[{ctor:h.Squarespace.DialogFields.Description,config:{text:i('Add a video from YouTube, Vimeo, Animoto, or Wistia. To add the video, you\'ll need its URL. For videos hosted elsewhere, use the Embed Code option. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:l.VIDEO_EDITOR})}},{name:"oembed",ctor:h.Squarespace.DialogFields.Oembed,config:{filter:"video","strings.title":i("Video URL"),"strings.inputPlaceholder":i("YouTube, Vimeo, etc.")}},{name:"customThumb",ctor:h.Squarespace.DialogFields.FileImage,config:{contentType:"image",transientStore:true,contentLabel:i("a Custom Thumbnail"),height:183,fullHeight:true,useFocalPoint:true,autoSaveFocalPoint:true}},{name:"overlay",ctor:h.Squarespace.DialogFields.Check,config:{"strings.title":i("Use Custom Thumbnail")}},{ctor:h.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-hidden",options:[{value:"caption-hidden",label:i("Do Not Display Caption")},{value:"caption-below",label:i("Caption Below")}]}},{ctor:h.Squarespace.DialogFields.Wysiwyg,config:{name:"description",editorHeight:135,classNames:"major"}}]}];r.isFeatureEnabled(s.VIDEO_BLOCK_ANIMATIONS)&&e.push({tabTitle:i("Animations"),fields:[{ctor:h.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":i("Animate Video Block"),className:"thin dark",defaultValue:"none",options:[{value:"none",label:i("None")},{value:"fade-in",label:i("Fade In")},{value:"focus-in",label:i("Focus In")},{value:"slide-up",label:i("Slide Up")},{value:"reveal",label:i("Reveal")}]}}]});var a={initialDataByReference:true,width:400,height:582,tabs:e};h.namespace("Squarespace.Block.ModelEditorDialog");var n=h.Squarespace.Block.ModelEditorDialog.Video=h.Base.create("blockVideoEditor",h.Squarespace.ModelEditorDialog,[h.Squarespace.Block.Mixins.BlockAnimationAnalytics],{initializer:function(){var t=this.get("dialog");t.once("ready",function(){var e=this.get("model");e.after("oembedChange",this.updateDescFromOembedChange,this);e.after("customThumbIdChange",this.afterCustomThumbIdChange,this);this.trackAnimationFieldsChange({fields:[t.getField("blockAnimation")],eventName:"video_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this)},save:function e(t,a,i){r.isFeatureEnabled(s.VIDEO_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsSave({eventName:"video_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});n.superclass.save.apply(this,arguments)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var n={collectionId:a,blockAnimationSelection:i};return n},updateDescFromOembedChange:function e(t){var a=h.Object.getValue(t,["newVal","resolved"]);if(!a)return;var i=h.Object.getValue(t,["prevVal","url"])||this.get("model").get("url");var n=h.Object.getValue(t,["newVal","url"]);if(i===n)return;var s=this.get("dialog");var r=s.getField("description");var o=r.getValue();var l="object"===typeof o&&o.html?o.html:"";var c=h.Object.getValue(t,["prevVal","description"]);var d=(this.get("model").get("description")||{}).html||"";if(c&&d!==c)return;var u=h.Object.getValue(t,["newVal","description"]);var g=h.Lang.isValue(u)?u:"";if(g===d)return;var p=l===d||""===l;if(!p)return;r.setValue({html:g})},afterCustomThumbIdChange:function e(t){t.newVal&&t.newVal!==t.prevVal&&this.get("dialog").getField("overlay").setValue(true)},getDialogData:function(){var e=this.get("model");var t=e.toJSON();var a=e.get("oembed");void 0===a&&(h.Lang.isValue(t.url)||h.Lang.isValue(t.html))&&(a={url:t.url,html:t.html,resolvedBy:t.resolvedBy,thumbnailUrl:t.thumbnailUrl});return h.merge(t,{customThumb:e.get("customThumb"),oembed:a})}},{ATTRS:{dialogConfig:{valueFn:function(){return a}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file-image","squarespace-dialog-oembed","squarespace-dialog-select","squarespace-dialog-wysiwyg","squarespace-models-content-item","squarespace-block-mixin-block-animation-analytics"]})},7907:function(e,t,a){var i=a(114);var n=a(87);var s=a(1342);YUI.add("squarespace-block-chart",function(o){o.namespace("Squarespace.ContentModel");o.Squarespace.ContentModel.Chart=o.Base.create("block-chart-model",o.Model,[],{initializer:function(){this._dataTable=new o.Squarespace.Models.DataTable},destructor:function(){false;this._dataTable&&this._dataTable.destroy({remove:true})},sync:function(e,t,i){if("update"===e||"create"===e){var a=this.getAttrs();this._dataTable.setAttrs(a.dataTable);this._dataTable.save(t,o.bind(function(e,t){var a=o.JSON.parse(t.response);this.set("dataTableId",a.id);i(e)},this))}else if("read"===e){var n=this.get("dataTableId");if(n){this._dataTable.set("id",n);this._dataTable.load(t,o.bind(function(e,t){this.set("dataTable",this._dataTable.getAttrs());i(e)},this))}else i()}else"delete"===e&&this._dataTable.destroy({remove:true},o.bind(function(e){i(e)},this))},toJSON:function(){var e=o.Squarespace.ContentModel.Chart.superclass.toJSON.call(this);delete e._iodata;return e}},{ATTRS:{dataTableId:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:o.Squarespace.AttrValidators.isString},legend:{value:"none",validator:o.Squarespace.AttrValidators.isValue},caption:{value:"",validator:o.Squarespace.AttrValidators.isString},palette:{value:"default",validator:o.Squarespace.AttrValidators.isString},flip:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},dataTable:{value:{},validator:o.Squarespace.AttrValidators.isObject},chartType:{value:"",validator:o.Squarespace.AttrValidators.isValue},showLegend:{getter:function(){return this.get("legend")&&"none"!==this.get("legend")},setter:function(e){this.set("legend",e?"visible":"none",{silent:true});return e}}}});o.namespace("Squarespace.Block");o.Squarespace.Block.Chart=o.Base.create("block-chart",o.SQS.LayoutEngine.Block.Base,[o.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._chart=null},destructor:function(){this._chart&&this._chart.destroy()},renderUI:function(){o.Squarespace.Block.Chart.superclass.renderUI.call(this);var e=this.get("model");var t="";e.get("caption")&&(t="<figcaption>"+e.get("caption")+"</figcaption>");var a=o.Node.create('<div class="chart-block-container chart-type-'+e.get("chartType")+'"><h2>'+e.get("title")+'</h2><div class="chart-block-body legend-'+e.get("legend")+'"><div class="chart-block-legend attach1"><figcaption class="legend-content"></figcaption></div><div class="chart-block-content"><div><canvas></canvas></div></div><div class="chart-block-legend attach2"><figcaption class="legend-content"></figcaption></div></div><div class="chart-block-caption">'+t+"</div></div>");this.get("contentBox").append(a);this.get("model").load(o.bind(this._createChart,this))},bindUI:function(){var e=this.get("model");e.after("titleChange",this._renderTitle,this);e.after("legendChange",this._renderLegend,this);e.after("captionChange",this._renderCaption,this);e.after("dataTableChange",this._renderChartContent,this);e.after("chartTypeChange",function(){this._renderChartType();this._createChart(true)},this);e.after("paletteChange",function(e){this._createChart(true)},this);e.after("flipChange",function(e){this._createChart(true)},this);this.after("resized",function(){this._chart&&this._chart.resize()},this)},syncUI:function(){this._renderTitle();this._renderLegend();this._renderChartType();this._renderCaption();this._renderChartContent()},_renderTitle:function(){var e=this.get("model").get("title");this.get("contentBox").one("h2").setHTML(o.Escape.html(e))},_renderLegend:function(){var e=this.get("model").get("legend");this.get("contentBox").one(".chart-block-body").set("className","chart-block-body legend-"+e)},_renderChartType:function(){var e=this.get("model").get("chartType");this.get("contentBox").one(".chart-block-container").set("className","chart-block-container chart-type-"+e)},_renderCaption:function(){var e=this.get("model").get("caption");e?this.get("contentBox").one(".chart-block-caption").setHTML("<figcaption>"+o.Escape.html(e)+"</figcaption>"):this.get("contentBox").one(".chart-block-caption").empty()},_renderChartContent:function(){if(this._chart){var e=this.get("model").get("dataTable");this._chart.sync(e);this._chart.resize()}},_createChart:function(e){if(this._chart){if(!e)return;this._chart.destroy()}var t=this.get("model");var a=t.get("chartType");var i=t.get("dataTable");var n=t.get("palette");var s=t.get("flip");var r=this.get("contentBox").one(".chart-block-container");this._chart=o.ChartJS.createChart(a,r,i,n,s)}},{MODEL:o.Squarespace.ContentModel.Chart,ATTRS:{editor:{valueFn:function(){if(s.isMobileContentEditingEnabled()||i.isFeatureEnabled(n.ROSETTA_BLOCK_EDITORS))return o.Squarespace.Block.Editor.Schema;return o.Squarespace.Block.Editor.Chart}}}})},"1.0",{requires:["base","escape","node","squarespace-models-data-table","@sqs/layout-engine/block-base","squarespace-block-chart-editor","squarespace-block-schema-editor","squarespace-chartjs-helpers","squarespace-premium-block-mixin"]})},7908:function(e,t){YUI.add("squarespace-models-data-table",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.DataTable=t.Base.create("data-table",t.Model,[t.Squarespace.ModelSync.REST],{root:t.Squarespace.API_ROOT+"datatable",url:t.Squarespace.API_ROOT+"datatable/{id}",serialize:function(){var e=this.toJSON();return t.JSON.stringify(e)}},{ATTRS:{id:{value:null},data:{value:[],validator:t.Squarespace.AttrValidators.isArray},sampleLabels:{value:[],validator:t.Squarespace.AttrValidators.isArray},seriesLabels:{value:[],validator:t.Squarespace.AttrValidators.isArray}}});t.Squarespace.Models.DataTableList=t.Base.create("dataTableList",t.ModelList,[t.Squarespace.ModelSync.REST],{model:t.Squarespace.Models.DataTable,filterByType:function(t){return this.filter(function(e){return e.get("type")===t})}});t.Squarespace.DataTableCache=new t.Squarespace.Models.DataTableList},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},7909:function(e,t,a){var o=a(24).t;var l=a(5805);var c=a(207);YUI.add("squarespace-block-chart-editor",function(a){var e=25;var t=25;var i=22;var n=5*i;var s=3*i;var r={width:4*n+3*i+s,height:579,title:o("Chart"),tabs:[{tabTitle:o("Data"),scroll:false,fields:[{ctor:a.Squarespace.DialogFields.Description,text:o('Add compelling data visualizations to your site by entering the data below or pasting it from a .csv file in the <strong>Import/Export</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:c.CHART_EDITOR})},{ctor:a.Squarespace.DialogFields.Select,config:{name:"chartType","strings.placeholder":o("Select a Chart Type"),"strings.title":o("Chart Type"),options:[{value:l.CHART_BAR,label:o("Bar Chart")},{value:l.CHART_LINE,label:o("Line Chart")},{value:l.CHART_PIE,label:o("Pie Chart")}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"flip","strings.title":o("Flip X And Y Axes")}},{ctor:a.Squarespace.DialogFields.DataTable,config:{name:"dataTable","strings.title":o("Chart Data"),maxSeries:e,maxSamples:t}}]},{tabTitle:o("Design"),scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Text,"strings.title":o("Chart Title"),config:{name:"title"}},{ctor:a.Squarespace.DialogFields.Text,"strings.title":o("Caption"),config:{name:"caption"}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showLegend","strings.title":o("Show Legend")}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"palette","strings.title":o("Color Palette"),options:[{value:"default",label:o("Grayscale")},{value:"Primary",label:o("Primary")},{value:"Warm",label:o("Warm")},{value:"Cool",label:o("Cool")},{value:"Muted",label:o("Muted")},{value:"Cobblestone",label:o("Cobblestone")},{value:"Shops",label:o("Shops")},{value:"Suburbs",label:o("Suburbs")},{value:"Tea Party",label:o("Tea Party")},{value:"Highway",label:o("Highway")},{value:"DB-Nine",label:o("DB-Nine")},{value:"Italia",label:o("Italia")},{value:"M-Three",label:o("M-Three")},{value:"Thunderbird",label:o("Thunderbird")}]}}]},{tabTitle:o("Import / Export"),scroll:false,fields:[{ctor:a.Squarespace.DialogFields.TableImport,"strings.title":o("Import / Export"),config:{name:"_iodata",maxSeries:e,maxSamples:t}}]}]};a.namespace("Squarespace.Block.Editor").Chart=a.Base.create("chart-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Chart")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Chart")},disableRenderAnchorEvent:{value:false}}});a.namespace("Squarespace.Block.ModelEditorDialog").Chart=a.Base.create("block-chart-editor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").after("ready",function(){this._dialogReady()},this);this.plug(a.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},getDialogData:function(){var e=this.get("model");var t=a.clone(e.toJSON(),true);t._iodata=a.clone(t.dataTable);return t},_dialogReady:function(){var e=this.get("dialog");var t=e.getField("dataTable");t.set("oneDimension",this.get("oneDimension"));t.populateTable(this.get("model").get("dataTable"));this._bindDialogFields()},_bindDialogFields:function(){var e=this.get("dialog");var t=e.getField("_iodata");var a=e.getField("dataTable");var i=e.getField("chartType");i._registerEvent(i.after("dataChange",this._resetDataTableDialog,this));a._registerEvent(a.after("dataChange",function(e){t.set("data",e.newVal,{silent:true})},this));t._registerEvent(t.after("importTable",function(e){var t=e.data;a.set("data",t);a.set("oneDimension",this.get("oneDimension"));a.populateTable(t)},this))},_resetDataTableDialog:function(){var e=this.getDialogData().dataTable;var t=this.get("dialog").getField("dataTable");t.set("oneDimension",this.get("oneDimension"));t.populateTable(e)}},{ATTRS:{dialogConfig:{valueFn:function(){return r}},oneDimension:{getter:function(){var e=parseInt(this.get("model").get("chartType"));return e===l.CHART_PIE},readOnly:true}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-dialog-data-table","squarespace-dialog-table-import","squarespace-dialog-radio"]})},7910:function(e,t){YUI.add("squarespace-dialog-data-table",function(u){var m=4;var t=u.namespace("Squarespace.DialogFields").DataTable=u.Base.create("data-table",u.Squarespace.DialogField2,[],{initializer:function(){this._table=null;this._changed=false;this._dragHandles=[];this._dropTargets=[]},destructor:function(){this._removeDragDrop();this._table&&this._table.remove(true);this._table=null},renderUI:function(){t.superclass.renderUI.call(this);this._table=u.Node.create('<div class="table-wrapper"></div>');var e=this.get("strings").title;e&&this.get("contentBox").append('<div class="title">'+e+"</div>");this.get("contentBox").append(this._table)},_renderColHeader:function(e,t,a,i,n){var s=e>=a;var r=s||n&&e>0;var o=!s&&a>1;var l=e===a;var c=!n&&e<i;var d="data-table-header first-row "+(s?"cosmetic ":"")+(l?"skinny-col ":"")+(e===a-1?"last-col":"");return'<div class="'+d+'"><input type="text" value="'+(s?"":u.Escape.html(t))+'"'+(r?" disabled":"")+">"+(o?'<div class="col-select"><div class="drag-handle"></div></div>':"")+(l?'<div class="new-col-button '+(c?"":"disabled")+'">+</div>':"")+"</div>"},_renderRow:function(e,t,a,i,n,s,r){var o=e>=n;var l=e===n;var c=e<s;var d="data-table-row "+(e%2&&!o?"odd-row ":"")+(e===n-1?"last-row border-spacer ":"");var u='<div class="'+d+'">';u+=this._renderRowLabel(a,n>1,o,l,c);var g=Math.max(i+(r?0:1),m);for(var p=0;p<g;p++)u+=this._renderCell(t?t[p]:null,p>0&&r,o||p>=i,p===i?"skinny-col":"");u+="</div>";return u},_renderRowLabel:function(e,t,a,i,n){var s="";var r="data-table-cell first-col "+(a?"cosmetic ":"");t&&!a&&(s+='<div class="row-select"><div class="drag-handle"></div></div>');s+='<div class="row-select-spacer cosmetic"><input type="text" disabled></div>';s+='<div class="'+r+'"> <input type="text" value="'+(a?"":u.Escape.html(e))+'"'+(a?" disabled":"")+">"+(i?'<div class="new-row-button '+(n?"":"disabled")+'">+</div>':"")+"</div>";return s},_renderCell:function(e,t,a,i){var n="data-table-cell "+i+(a?" cosmetic ":"");return'<div class="'+n+'"><input type="text" value="'+(a?"":u.Escape.html(e))+'"'+(t||a?" disabled":"")+"></div>"},populateTable:function(e){var t=e.seriesLabels;var a=e.sampleLabels;var i=e.data;var n=this.get("oneDimension");var s=this.get("maxSeries");var r=this.get("maxSamples");function o(e){return'<div class="drop-target-wrapper"><div class="'+e+'-drop-target"></div></div>'}var l='<div class="trash-wrapper"><div class="chart-trash"><div class="chart-trash-content"></div></div></div>';var c='<div class="corner-spacer data-table-header first-row cosmetic"><input type="text" disabled></div>';var d="";var u=c;var g=Math.max(t.length+(n?0:1),m);for(var p=0;p<g;p++){p<=t.length&&(u+=o("col"));u+=this._renderColHeader(p,t[p],t.length,s,n)}t.length>=m&&(u+=o("col"));d+='<div class="data-table-row first-row">'+u+"</div>";for(var h=0;h<i.length+1;h++){h<=i.length&&(d+=o("row"));d+=this._renderRow(h,i[h],a[h],t.length,i.length,r,n)}var f='<div class="inner-table">'+d+"</div>";f+=l;this._table.setHTML(f);this.bindTable()},bindTable:function(){var t=this._table;var e=t.one(".inner-table");var a=u.bind(this._afterValueChange,this);this._registerEvent(e.delegate("valuechange",a,"input"));var i=u.bind(function(e){this.selectCell(e.target.ancestor(".data-table-cell, .data-table-header"))},this);this._registerEvent(e.delegate("click",i,"input"));var n=u.bind(this._selectNext,this,"down");this._registerEvent(e.delegate("key",n,"enter","input"));var s=t.one(".new-col-button");s&&s.on("click",function(e){this.addSeries();e.halt()},this);var r=t.one(".new-row-button");r&&r.on("click",function(e){this.addSample();e.halt()},this);this._removeDragDrop();this._bindDragHandles(".row-select",this._renderRowDragProxy,function(e){t.all(".data-table-row").item(e+1).toggleClass("dragging")});this._bindDragHandles(".col-select",this._renderColDragProxy,function(e){this._applyToNthCells(e+1,function(e){e.toggleClass("dragging")})});this._bindDropTargets(".row-drop-target",".row-select",this.moveSample,function(e){t.all(".data-table-row").item(e).toggleClass("insert-after");t.one(".last-row").toggleClass("border-spacer")});this._bindDropTargets(".col-drop-target",".col-select",this.moveSeries,function(e){this._applyToNthCells(e,function(e){e.toggleClass("insert-after")})});this._bindTrash(".chart-trash",[".col-select",".row-select"])},_selectNext:function(e,t){t.halt();var a=".data-table-header, .data-table-cell";var i=".data-table-row";var n=t.target.ancestor(a);var s=t.target.ancestor(i);var r=s.all(a).indexOf(n);var o=this._table.all(i).indexOf(s);var l=this.get("oneDimension");var c=this.get("data");var d=c.seriesLabels.length+1;var u=c.sampleLabels.length+1;function g(e){o+=e;if(o>=u){o=0;p(1)}else if(o<0){o=u-1;p(-1)}}function p(e){r+=e;if(r>=d){r=0;g(1)}else if(r<0){r=d-1;g(-1)}}switch(e){case"left":p(-1);break;case"right":p(1);break;case"up":g(-1);break;case"down":g(1);break}var h=this._table.all(i);var f=h.item(o).all(a);var m=f.item(r);this.selectCell(m,n);var v;v=l||r!==d-1?o===u-1?h.item(u):0===r&&o>0?h.item(o).one(".drag-handle"):m:f.item(d);function b(e,t,a){return v._node.contains(document.elementFromPoint(t,a))}var y=v._node.getBoundingClientRect();var S=b(y.left,y.top)||b(y.right,y.top)||b(y.right,y.bottom)||b(y.left,y.bottom);S||v.scrollIntoView()},_removeDragDrop:function(){this._dropTargets&&this._dropTargets.map(function(e){e.destroy()});this._dragHandles&&this._dragHandles.map(function(e){e.destroy()});this._dropTargets=[];this._dragHandles=[]},_applyToNthCells:function(a,i,e){var t=this._table;if(!e){var n=t.all(".data-table-header").item(a);n&&i.call(this,n)}t.all(".data-table-row").each(function(e){var t=e.all(".data-table-cell").item(a);t&&i.call(this,t)},this)},_bindTrash:function(e,t){var a=this._table;var i=a.one(e);var n=new u.DD.Drop({node:i,groups:t});n.on("drop:hit",function(e){var t=e.drag.get("data");var a=u.Array(e.drag.get("groups"));a.contains(".col-select")?this.removeSeries(t.index):this.removeSample(t.index)},this);this._dropTargets.push(n)},_bindDropTargets:function(e,i,n,s){var t=this._table;var r=t.all(e);r.each(function(e){var a=r.indexOf(e);var t=new u.DD.Drop({node:e,groups:[i]});t.on("drop:hit",function(e){var t=e.drag.get("data");n.call(this,t.index,a)},this);t.on("drop:enter",function(e){s.call(this,a)},this);t.on("drop:exit",function(e){s.call(this,a)},this);this._dropTargets.push(t)},this)},_bindDragHandles:function(i,n,s){var r=this._table;var o=r.all(i);o.each(function(e){var t=o.indexOf(e);var a=new u.DD.Drag({node:e,groups:[i],data:{index:t}}).plug(u.Plugin.DDProxy,{resizeFrame:false});a.on("drag:start",function(){var e=a.get("dragNode");a._nodeStart=a.get("node").getXY();e.addClass("sqs-data-table");e.set("innerHTML",n.call(this,t));e.setStyles({"z-index":99e3,border:"none"});r.addClass("dragging");s.call(this,t)},this);a.on("drag:end",function(e){a.get("node").setXY(a._nodeStart);r.removeClass("dragging");a.get("node").ancestor("body")&&s.call(this,t);this.populateTable(this.get("data"))},this);this._dragHandles.push(a)},this)},_renderRowDragProxy:function(e){var t=this.get("data");var a=t.data;var i=this.get("oneDimension");var n='<div class="row-drag-proxy">';n+=this._renderRow(e,a[e],t.sampleLabels[e],t.seriesLabels.length,1/0,i);return n+"</div>"},_renderColDragProxy:function(e){var t=this.get("data");var a=t.data;var i=this.get("oneDimension");var n='<div class="col-drag-proxy">';n+=this._renderColHeader(e,t.seriesLabels[e],1/0,i);for(var s=0;s<a.length;s++)n+=this._renderCell(a[s][e],i&&e>0,false,"");return n+"</div>"},readTable:function(){var t=[];var a=[];var n=[];var e=this._table.one(".inner-table");e.all(".data-table-header").each(function(e){if(e.hasClass("cosmetic"))return;a.push(e.one("input").get("value"))});e.all(".data-table-row").each(function(e){var a=0;var i=[];e.all(".data-table-cell").each(function(e){if(e.hasClass("cosmetic"))return;var t=e.one("input").get("value");if(0===a){n.push(t);a++}else i.push(parseFloat(t)||0)});a>0&&t.push(i)});return{seriesLabels:a,sampleLabels:n,data:t}},isEmpty:function(){return this.get("data")===[]||null===this.get("data")||void 0===this.get("data")},didDataChange:function(){return this._changed},_afterDataChange:function(e){e.dataSync||this.populateTable(e.newVal);this.hideError()},_afterValueChange:function(e){if(!e.dataSync){this.set("data",this.readTable(),{dataSync:true});this._changed=true}},selectCell:function(e,t){var a;if(e&&!e.hasClass("cosmetic")){a=e.one("input");a._node.select();a.focus()}else if(t){a=t.one("input");a._node.blur()}},addSample:function(e,t,a,i){var n=this.get("data");if(n.sampleLabels.length>=this.get("maxSamples"))return;void 0===e&&(e=1/0);n.sampleLabels.splice(e,0,t||"");var s=a||u.Array(n.seriesLabels).map(function(){return 0});n.data.splice(e,0,s);this.set("data",n,{dataSync:true});this._changed=true;if(!i){this.populateTable(n);var r=this._table;r.one(".data-table-row.last-row .data-table-cell input").focus();r.one(".new-row-button")._node.scrollIntoView()}},addSeries:function(a,e,i,t){var n=this.get("data");var s=this.get("oneDimension");if(s||n.seriesLabels.length>=this.get("maxSeries"))return;void 0===a&&(a=1/0);n.seriesLabels.splice(a,0,e||"");n.data.map(function(e,t){e.splice(a,0,i?i[t]:0)});this.set("data",n,{dataSync:true});this._changed=true;if(!t){this.populateTable(n);var r=this._table;r.one(".data-table-header.last-col input").focus();r.one(".new-col-button")._node.scrollIntoView()}},removeSample:function(e){var t=this.get("data");t.sampleLabels.splice(e,1);t.data.splice(e,1);this.set("data",t,{dataSync:true});this._changed=true},removeSeries:function(a){var e=this.get("data");e.seriesLabels.splice(a,1);u.Array(e.data).forEach(function(e,t){e.splice(a,1)});this.set("data",e,{dataSync:true});this._changed=true},moveSample:function(e,t){var a=this.get("data");var i=a.sampleLabels[e];var n=a.data[e];this.addSample(t,i,n,true);e>t?this.removeSample(e+1):this.removeSample(e)},moveSeries:function(t,e){var a=this.get("data");var i=a.seriesLabels[t];var n=u.Array(a.data).map(function(e){return e[t]});this.addSeries(e,i,n,true);t>e?this.removeSeries(t+1):this.removeSeries(t)}},{CSS_PREFIX:"sqs-data-table",ATTRS:{oneDimension:{value:false},maxSeries:{value:1/0},maxSamples:{value:1/0},data:{value:null}}})},"1.0",{requires:["base","escape","squarespace-dialog-field-2"]})},7911:function(e,t,a){var r=a(24).t;var o=a(2448);YUI.add("squarespace-dialog-table-import",function(s){var e=[{ctor:s.Squarespace.DialogFields.Description,config:{name:"description",title:r("Import or Export Chart Data"),text:r("Your data is provided here in CSV (comma separated value) format. You can copy the text below and save it as a .csv file to export your data. To import a spreadsheet, first save it as a .csv file. Then open it with a text editor and copy and paste the content into the box below, overwriting the existing text.")}},{ctor:s.Squarespace.DialogFields.TextArea,config:{"strings.title":r("Chart Data"),name:"data-text"}},{ctor:s.Squarespace.DialogFields.Button,config:{name:"import-button","strings.text":r("Update"),disabled:true}},{ctor:s.Squarespace.DialogFields.Description,config:{name:"errors",text:""}}];s.namespace("Squarespace.DialogFields");var t=s.Squarespace.DialogFields.TableImport=s.Base.create("TableImport",s.Squarespace.DialogField2,[],{initializer:function(){this._fields=[];this._useJson=false;this._newData=null;this._changed=false;this._resetErrors()},destructor:function(){s.Array.invoke(this._fields,"destroy");this._fields=null},syncUI:function(){t.superclass.syncUI.call(this);this._renderFields();this._bindFields()},_renderFields:function(){s.Array.invoke(this._fields,"destroy");this._fields=this._constructFields();var e=this.get("contentBox");s.Squarespace.FormUtils.template(e,this._fields);this._renderImportData();this._renderErrors()},_renderImportData:function(){var e=this.get("contentBox");e.one("textarea").setContent(s.Escape.html(this._serializeData()))},_renderErrors:function(){function e(e,t,a){if(e.length>0){a+="<p>"+t+":</p><ul>";s.Array(e).forEach(function(e){a+="<li>"+e+"</li>"});a+="</ul>"}}var t=this.get("contentBox");var a="";this._parseErrors.length>0&&(a+="<p>"+r("Failed to update your data.")+"</p>");e(this._parseErrors,r("Errors"),a);e(this._parseWarnings,r("Warnings"),a);t.one(".errors").setContent(a)},_resetErrors:function(){this._parseErrors=[];this._parseWarnings=[]},_constructFields:function(){return s.Array.map(e,function(e){return new e.ctor(e.config)})},_bindFields:function(){var e=this._getField("data-text");var t=this._getField("import-button");this._registerEvent(e.on("dataChange",function(e){this._newData=e.newVal;t.enable()},this));this._registerEvent(t.on("click",this._handleImport,this))},_handleImport:function(e){if("confirmation"===e.source)return;if(this._newData){this._resetErrors();this._renderErrors();var t=new s.Squarespace.Widgets.Confirmation({"strings.title":r("Are You Sure?"),"strings.message":r("This will overwrite the current chart data.")});t.on("confirm",function(){this._import(this._newData)},this);t.show()}},_getField:function(t){return s.Array.find(this._fields,function(e){if(e.get("name")===t)return true;return false})},_serializeData:function(){var e=this.get("data");return this._useJson?this._serializeJSON(e):this._serializeCSV(e)},_serializeJSON:function(e){return JSON.stringify(e)},_serializeCSV:function(a){function i(e,t){e.push.apply(e,t);return e}var n=[i(["Label"],a.seriesLabels)];s.Array(a.data).forEach(function(e,t){n.push(i([a.sampleLabels[t]],e))});var e=o.unparse(n);return e},_padData:function(e,t){var a=false;function i(e,t,a){var i=false;while(e.length<a){i=true;e.push(t)}return i}if(i(e.seriesLabels,r("New Series"),t)){this._parseWarnings.push(r("One or more rows had extra columns."));a=true}i(e.sampleLabels,"",e.data.length);s.Array(e.data).forEach(function(e){i(e,0,t)});return a},_checkLimits:function(e,t){var a=this.get("maxSeries");var i=this.get("maxSamples");var n=false;if(t>a){e.seriesLabels=e.seriesLabels.slice(0,a);for(var s=0;s<e.data.length;s++)e.data[s]=e.data[s].slice(0,a);this._parseWarnings.push(r("Your dataset has been truncated to {maxSeries} columns.",{maxSeries:a}));n=true}if(e.data.length>i){e.data=e.data.slice(0,i);e.sampleLabels=e.sampleLabels.slice(0,i);this._parseWarnings.push(r("Your dataset has been truncated to {maxSamples} rows.",{maxSamples:i}));n=true}return n},_checkValid:function(e){if(e.sampleLabels.length<1){this._parseErrors.push(r("Your dataset must have at least one row."));return false}if(e.seriesLabels.length<1){this._parseErrors.push(r("Your dataset must have at least one column."));return false}if(e.data.length<1){this._parseErrors.push(r("Your dataset must have at least one row."));return false}return true},_deserializeCSV:function(e){this._resetErrors();var t=false;var a=o.parse(e,{skipEmptyLines:true,delimiter:","});if(a.errors.length>0){this._parseErrors.push(r("Malformed CSV data."));return false}var i={seriesLabels:a.data[0].slice(1),sampleLabels:s.Array.map(a.data.slice(1),function(e){return e[0]}),data:s.Array(a.data.slice(1)).map(function(e){return s.Array(e.slice(1)).map(function(e){return parseFloat(e)||0})})};if(!this._checkValid(i))return null;var n=Math.max.apply(null,s.Array(i.data).map(function(e){return e.length}));n=Math.max(n,i.seriesLabels.length);t=this._padData(i,n);t=t||this._checkLimits(i,n);if(t){this._newData=this._serializeCSV(i);this._changed=true}return i},_import:function(e){var t=this._deserializeCSV(e);if(0===this._parseErrors.length){this._newData=null;this.fire("importTable",{data:t});this._getField("import-button").disable()}else this._renderErrors()},didDataChange:function(){return this._changed},CONTENT_TEMPLATE:'<div><div data-field-name="description"></div><div data-field-name="data-type"></div><div data-field-name="data-text"></div><div data-field-name="import-button"></div><div data-field-name="errors" class="errors"><ul></ul></div></div>'},{CSS_PREFIX:"sqs-table-import",ATTRS:{maxSeries:{value:0},maxSamples:{value:0},data:{value:null}}})},"1.0",{requires:["array-invoke","base","escape","node","squarespace-dialog","squarespace-dialog-button","squarespace-dialog-field-2","squarespace-dialog-radio","squarespace-dialog-text-area","squarespace-form-utils","squarespace-widgets-confirmation"]})},7912:function(e,t,a){var s=a(701);var r=a(100);YUI.add("squarespace-block-zola",function(i){var e={registryKey:"",displaySize:12,isInset:false};var n=i.namespace("Squarespace.Block").Zola=i.Base.create("block-zola",i.SQS.LayoutEngine.Block.ModelSyncBase,[i.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){var t=this.get("contentBox");this.get("model").on("change",function(e){t.addClass(n.CSS_IS_RENDERING)},this);this.get("model").after("change",r(function(e){this._renderBlock(e);t.removeClass(n.CSS_IS_RENDERING)},this.get("contentRefreshRate")),this)},_renderSuccess:function(e){n.superclass._renderSuccess.call(this,e);if(i.config.win.ZolaWidget){i.config.win.ZolaWidget.init();return}var t=this.get("contentBox");var a=document.createElement("script");a.src=t.one("[data-zola-script-src]").getAttribute("data-zola-script-src");t.append(a)}},{CSS_PREFIX:"sqs-block-zola",CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{value:i.Squarespace.Block.Editor.Zola},type:{value:s.ZOLA},defaultContentModel:{value:e},contentRefreshRate:{value:500}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-zola-editor","squarespace-premium-block-mixin"]})},7913:function(e,t,a){var i=a(24).t;var n=a(207);YUI.add("squarespace-block-zola-editor",function(e){e.namespace("Squarespace.Block.Editor").Zola=e.Base.create("zola-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Zola")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Zola")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Zola=e.Base.create("block-zola-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:335,height:335,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:"Zola",icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Enter your Zola registry name to display items from your registry. <a href="{helpLink}" target="_blank">Learn more</a> <br>Sign up for a Zola registry <a href="https://www.zola.com/wedding-registry/promotion/squarespace" target="_blank">here</a>.',{helpLink:n.ZOLA})}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"registryKey","strings.title":i("Registry Name"),"strings.description":i("This is the last part of your Zola URL."),"strings.placeholder":i("johnandjane")}},{ctor:e.Squarespace.DialogFields.Slider,config:{"strings.title":i("Items to Display"),name:"displaySize",range:[1,12]}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Add Padding"),name:"isInset"}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor"]})},7914:function(e,t){YUI.add("squarespace-block-icon",function(t){t.namespace("Squarespace.Block");var a=t.Squarespace.Block.Icon=t.Base.create("blockIcon",t.SQS.LayoutEngine.LayoutInsert.BlockIconBase,[t.Squarespace.Block.PremiumBlockMixin],{renderUI:function(){var e=t.ClassNameManager.getClassName("sqs","blockicon",this.get("id"),true);this.get("boundingBox").addClass(e);this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},bindUI:function(){this.after("pressedChange",this._afterPressedChange,this)},_afterPressedChange:function(e){this.get("boundingBox").toggleClass(a.CSS_PREFIX+"-pressed",!!e.newVal)}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{pressed:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-insert-block-icon-base","squarespace-premium-block-mixin"]})},7915:function(e,t){YUI.add("squarespace-plugin-loading-overlay",function(a){a.namespace("Squarespace.Plugins").LoadingOverlay=a.Base.create("LoadingOverlay",a.Plugin.Base,[],{initializer:function(){this._overlayNode=a.Node.create('<div class="sqs-loading-overlay-node"><div class="title"></div></div>');this._overlayNode.on("mousedown",function(e){e.halt()});this.spinner=new a.Squarespace.Spinner(a.merge(this.get("spinnerConfig"),{render:this._overlayNode}));this.on("spinnerConfigChange",function(e){this.spinner.setAttrs(e.newVal)},this);this.after("visibleChange",this.syncOverlaySize,this);this.syncOverlaySize();this.get("host").addClass("sqs-loading-overlay-active")},destructor:function(){this.spinner.destroy();this._overlayNode.remove(true);this.get("host").removeClass("sqs-loading-overlay-active")},syncOverlaySize:function(){this.get("visible")?this._showOverlay():this._hideOverlay()},_showOverlay:function(){var e=this.get("title");this._overlayNode.one(".title").setContent(e);this._overlayNode.toggleClass("has-title",""!==e);var t=this.get("host");this._overlayNode.setStyles({position:"absolute",width:t.get("offsetWidth"),height:t.get("offsetHeight"),top:t.get("offsetTop"),left:t.get("offsetLeft")});t.append(this._overlayNode);new a.Anim({node:this._overlayNode,duration:.25,from:{opacity:this._overlayNode.getStyle("opacity")},to:{opacity:1}}).run()},_hideOverlay:function(){this._overlayNode&&this._overlayNode.anim({opacity:0},{from:{opacity:1},end:function(){this._overlayNode&&null!==this._overlayNode.getDOMNode()&&this._overlayNode.inDoc()&&this._overlayNode.remove()}},this).run()}},{NS:"loadingOverlay",ATTRS:{visible:{value:true},title:{value:"",validator:a.Lang.isString},description:{value:""},spinnerConfig:{value:{size:"large",color:"dark"}}}})},"1.0",{requires:["node","plugin","squarespace-spinner"]})},7916:function(e,t,a){var o=a(24).t;var l=a(810);var i=a(5816);YUI.add("squarespace-dialog-legacy-stateflow",function(r){var n;var s;n=function(e,a){if(!r.Lang.isObject(e)||!r.Lang.isObject(a))return e===a;var i=true;r.Object.each(e,function(e,t){r.Lang.isObject(e)&&r.Lang.isObject(a[t])?i=i&&n(e,a[t]):e!==a[t]&&(i=false)});return i};s=function(e){var t=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g,a=t.exec(e);return null!==a&&String(a[1]).toLowerCase()};r.namespace("Squarespace.DialogFields");var a=r.Squarespace.DialogFields.LegacyStateflow=r.Base.create("LegacyStateflow",r.Squarespace.DialogField2,[r.WidgetParent],{initializer:function(e){var t=Date.now();var a;this._resizeEmitter=new r.Squarespace.ResizeEmitter({timeout:100});this._childrenContainer=r.one("body");if(!r.Lang.isValue(e.data)){e.data={state:e.stateOrder[0],date:e.allowNever?null:t};this.set("data",e.data)}if(r.Lang.isNull(e.data.date)&&e.allowNever)this.set("durationOffset",-1);else{a=i(new Date,e.data.date);this.set("durationOffset",a)}this.set("stateType",this.getStateType());this._addChildWidgets()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this.stateLabel=e.one(".field-workflow-title");this.stateDesc=e.one(".field-workflow-description")},bindUI:function(){a.superclass.bindUI.call(this);this._resizeEmitter.on("resize:end",function(){this.each(function(e){e.align()},this)},this);this.get("boundingBox").on("clickoutside",function(e){if(this._timer.get("boundingBox").contains(e.target)||this._picker.get("boundingBox").contains(e.target))return;this.closeFlyout()},this);this.stateDesc.on("click",this.onStateChangeRequest,this);this.stateLabel.on("click",this.onStateChangeRequest,this);this.on("dataChange",this.onDataChange,this);this.after("stateScheduler:dataChange",this.aggregateWidgetData,this,{noSyncUI:true});this.after("statepicker:dataChange",this.aggregateWidgetData,this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("data");var t=this.get("states")[e.state];this.stateLabel.set("text",t.title);this.stateDesc.setHTML(this.getStateDesc(t.stateDesc,e.date))},destructor:function(){this._resizeEmitter.destroy();this.each(function(e){e.hide();e.destroy()},this)},_addChildWidgets:function(){this._timer=this.add({childType:r.Squarespace.DialogFields.StateScheduler,data:this.get("data").date,type:this.get("stateType"),allowNever:this.get("allowNever"),durationOffset:this.get("durationOffset"),visible:false,align:{node:this.get("contentBox").one(".duration-wrapper, .date-wrapper"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.TC]}}).item(0);this._picker=this.add({childType:r.Squarespace.DialogFields.Statepicker,data:this.get("data"),states:this.get("states"),stateOrder:this.get("stateOrder"),stateType:this.get("stateType"),allowNever:this.get("allowNever"),visible:false,align:{node:this.get("boundingBox"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.BC]}}).item(0)},onStateChangeRequest:function(e){var t=e.target.hasClass("duration")||e.target.hasClass("date");this.showFlyout(t?"timer":"picker")},onDataChange:function(e){var t;var a=e.newVal;if(r.Lang.isValue(a.state)){this.set("stateType",this.getStateType(a));this._timer.set("type",this.get("stateType"))}if(r.Lang.isNull(a.date)&&this.get("allowNever"))this.set("durationOffset",-1);else{t=i(new Date,a.date);this.set("durationOffset",t)}e.closeFlyout&&this.closeFlyout()},aggregateWidgetData:function(e){var t=this.get("data");var a=e.newVal;var i={};var n={closeFlyout:false};if(r.Lang.isDate(a))i.date=a.getTime();else if(r.Lang.isString(a)){i.state=a;n.closeFlyout=true}else if(r.Lang.isNumber(a))isNaN(new Date(a).getTime())||(i.date=a);else if(r.Lang.isObject(a)){r.Object.hasKey(a,"state")&&(i.state=a.state);n.closeFlyout=true}else r.Lang.isNull(a)&&(i.date=null);this.set("data",r.merge(t,i),n)},showFlyout:function(e){if("picker"===e&&this._picker.get("visible")||"timer"===e&&this._timer.get("visible"))return;if("picker"===e){this._timer.hide();this._picker.set("data",this.get("data"));this._picker.show();this._picker.align()}else{this._picker.hide();this._timer.setAttrs({data:this.get("data").date,"align.node":this.get("contentBox").one(".duration-wrapper, .date-wrapper")});this._timer.show();this._timer.align()}},closeFlyout:function(e,t,a){this.each(function(e){e.hide()},this);this.syncUI()},getStateType:function(e){var t=e||this.get("data"),a=this.get("states"),i;if(!r.Object.hasKey(a,t.state))return false;i=s(a[t.state].stateDesc);return i||"none"},getStateDesc:function(e,t){e=e.replace("[","{").replace("]","}");return r.Lang.sub(e,{DATE:this.getDateText(t),DURATION:this.getDurationText(t)})},getDateText:function(e){var t="-",a='<span class="date-wrapper"><span class="date">{date}</span></span>';r.Lang.isValue(e)&&(t=l(new Date(e),"lllLT"));return r.Lang.sub(a,{date:t})},getDurationText:function(e){var t,a=this.get("durationOffset"),i=this.get("allowNever")&&!r.Lang.isValue(e),n=l(e,"LT"),s='<span class="duration-wrapper"><span class="duration">{duration}</span></span>';t=-1===a&&i?o("never"):a<0?o("now"):0===a?o("today at {prettyDate}",{prettyDate:n}):1===a?o("tomorrow at {prettyDate}",{prettyDate:n}):o("in {offset} days at {prettyDate}",{offset:a,prettyDate:n});return r.Lang.sub(s,{duration:t})},didDataChange:function(){var e=this.get("data");return!n(e,this._initialData)}},{CSS_PREFIX:"sqs-legacy-stateflow",TEMPLATE:'<div class="clear field-workflow-wrapper"><div class="field-workflow-title">&nbsp</div><div class="field-workflow-description">&nbsp</div></div>',ATTRS:{strings:{},data:{},states:{},stateOrder:{validator:r.Lang.isArray},stateType:{},durationOffset:{value:-1,validator:function(e){return r.Lang.isNumber(Number(e))},setter:function(e){return parseInt(e,10)}},allowNever:{validator:r.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-statepicker","squarespace-dialog-statepicker-scheduler","squarespace-dom-emitters-resize"]})},7917:function(e,t){YUI.add("squarespace-dialog-statepicker",function(o){var i=function(e){var t=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g,a=t.exec(e);return null!==a&&String(a[1]).toLowerCase()};var n=function(e,a){if(!o.Lang.isObject(e)||!o.Lang.isObject(a))return e===a;var i=true;o.Object.each(e,function(e,t){o.Lang.isObject(e)&&o.Lang.isObject(a[t])?i=i&&n(e,a[t]):e!==a[t]&&(i=false)});return i};o.namespace("Squarespace.DialogFields");var t=o.Squarespace.DialogFields.Statepicker=o.Base.create("statepicker",o.Squarespace.DialogField2,[o.WidgetPosition,o.WidgetPositionAlign],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this.stateLabel=e.one(".field-workflow-title");this.stateDesc=e.one(".field-workflow-description");this.buildStateMenu()},onStateChosen:function(e){var t=e.currentTarget.getData("state");var a=this.get("data");o.Object.hasKey(t,"state")&&(a.state=t.state);this.set("data",a)},getStateType:function(){var e=this.get("data");var t=this.get("states");var a=t[e.state].stateDesc;return i(a)},buildStateMenu:function(){var e=this.get("stateOrder");var t=this.get("states");this._renderStatesObject(t,e)},_renderStatesObject:function(i,e){var t=o.Array.map(e,function(e,t){var a=i[e];a.key=e;return a});o.Array.each(t,this._renderState,this)},_renderState:function(e,t){var a;var i=this.get("data").state;var n=this.constructor.OPTION_TEMPLATE;var s=o.Lang.sub(n,e);var r=this.get("contentBox").one(".workflow-flyout-options");if(!r)throw new Error("No element to attach states to.");a=o.Node.create(s);a.on("click",this.onStateChosen,this);i===e.key&&a.addClass("selected");a.setData("state",{state:e.key});r.appendChild(a)},didDataChange:function(){return!n(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-statepicker",TEMPLATE:'<div class="workflow-flyout"><div class="workflow-flyout-options"></div></div>',OPTION_TEMPLATE:'<div class="field-workflow-flyout-option-wrapper"><div class="field-workflow-flyout-option"><div class="field-workflow-title">{title}</div><div class="field-workflow-description">{optionDesc}</div></div></div>',ATTRS:{strings:{},data:{getter:function(e){if(o.Lang.isObject(e))return o.merge(e,{});return e}},states:{},stateOrder:{},stateType:{},durationOffset:{value:-1},allowNever:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","widget-position","widget-position-align"]})},7918:function(e,t){YUI.add("squarespace-dialog-money-text",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.MoneyText=e.Base.create("moneyText",e.Squarespace.DialogFields.Text,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(e.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var e=this.get("contentBox").one("input");e.on("valuechange",function(){this.set("data",e.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:e.Lang.isNumber},validator:{value:e.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-commerce-utils","squarespace-dialog-text","squarespace-plugin-money-formatter"]})},7919:function(e,t,a){var i=a(24).t;var n=a(802);YUI.add("squarespace-dialog-variants-pricing-placeholder",function(a){a.namespace("Squarespace");var t=a.namespace("Squarespace.DialogFields").VariantsPricingPlaceholder=a.Base.create("variantsPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},renderUI:function(){t.superclass.renderUI.call(this);this._setVariantCount()},syncUI:function(){t.superclass.syncUI.call(this);this._setVariantCount()},_setVariantCount:function(){var e=this.get("data.variants").length;0===e&&(e=1);var t=e<=1?"":a.Node.create(n('<span class="separator">—</span>'+i("{numVariants} variants"),{numVariants:e}));this.get("contentBox").one(".variant-count").setHTML(t)},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.hasVariants=true;return e}},{CSS_PREFIX:"sqs-variants-pricing-placeholder",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},7920:function(e,t,a){var c=a(24).t;var n=a(207);var d=a(516);var u=a(599);var i=a(390);var g=i.ProductEditor.YUI_EDITOR;YUI.add("squarespace-dialog-variants-table",function(o){o.namespace("Squarespace.DialogFields");var l=o.Base.create("UserOption",o.Model,[],{},{ATTRS:{optionName:{value:null},displayName:{value:null}}});var e=o.Base.create("UserOptionList",o.ModelList,[],{model:l,getOptionsByName:function(t){return this.filter(function(e){return e.get("optionName")===t})},find:function(e){return this.getOptionsByName(e)[0]}},{});var t={SystemAttributes:["image","sku","onSale","price","pricing","denominations","stock","qtyInStock","salePrice","unlimited","dimensions","weight","length","width","height"]};var r=o.Squarespace.DialogFields.VariantsTable=o.Base.create("variantsTable",o.Squarespace.DialogField2,[o.WidgetParent],{_name:"variantsTable",initializer:function(){this._edited=false;this._tooltips=[];var t=new e;o.Array.each(this.get("data.variantOptionOrdering"),function(e){t.add({optionName:e,displayName:e})});t.on("*:change",function(){this._edited=true},this);this.set("optionsList",t)},destroy:function(){r.superclass.destroy.call(this);o.Array.each(this._tooltips,function(e){e.destroy()},this)},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("isGiftCard");var a=this.get("isPhysical");var i=t?this.get("strings.titleAmounts"):this.get("strings.title");var n=t?this.get("strings.descriptionAmounts"):this.get("strings.description");e.append('<div class="title">'+i+'</div><div class="description">'+n+'</div><div class="shipping-warning"><div class="shipping-warning-content"></div></div><div class="table"><div class="viewport"><div class="header"><div class="add-option '+(t?"hidden":"")+'"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div><div class="body"><div class="rows"></div><div class="add-variant"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div></div></div>');this._headerEl=e.one(".header");this._addOptionEl=this._headerEl.one(".add-option");this._bodyEl=e.one(".body");this._addVariantEl=this._bodyEl.one(".add-variant");this._childrenContainer=this._bodyEl.one(".rows");this._addOptionEl.plug(o.Squarespace.Plugin.PulseWarn,{iterations:3,color:"#C1B12E"});this._renderOption({optionName:"image",displayName:c("Image")},false);this._renderOption({optionName:"sku",displayName:c("SKU")},false);t?this._renderOption({optionName:"denominations",displayName:c("Values")},false):this._renderOption({optionName:"pricing",displayName:c("Pricing")},false);t||this._renderOption({optionName:"stock",displayName:c("Stock")},false);if(a){this._renderOption({optionName:"weight",displayName:'<div class="label">'+c("Weight")+'</div><div class="question">?</div>',tooltipConfig:{title:c("Shipping Weight"),body:c("Specify weight for shipping calculations if you use a weight-based formula or real-time carrier-calculated rates.")}},false);this._renderOption({optionName:"dimensions",displayName:'<div class="label">'+c("Dimensions")+'</div><div class="question">?</div>',tooltipConfig:{title:c("Packing Dimensions"),body:c("Specify the packing dimensions of your product if you want to estimate the cost of shipping via real-time carrier shipping-calculated rates.")}},false)}t||this.get("optionsList").each(function(e){this._renderOption(e.getAttrs(),true)},this);var s=this.get("data.variants");this._setupDragAndDrop();s.length>0?o.Array.each(s,this._addVariant,this):this._addVariant({id:o.Squarespace.Commerce.generateVariantId(),sku:o.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:false,qtyInStock:1,len:0,width:0,height:0,attributes:{}});a&&this._showShippingWarnings(this.get("data.variants"));this._refreshData()},bindUI:function(){r.superclass.bindUI.call(this);this._addOptionEl.on("click",function(e){this._addEditOption()},this);this.get("optionsList").after(["*:add","*:remove","*:optionNameChange"],this._refreshData,this);this.after(["addChild","variantRow:removed","variantRow:dataChange"],this._refreshData,this);this.after("variantRow:next-row-execute-requested",this._editOrCreateNextRow,this);this.on("variantRow:removed",function(e){var t=e.target;this.remove(this.indexOf(t));o.Squarespace.Analytics.trackInternal("product_variant_removed")});this.on("variantRow:remove-requested",this._attemptDeleteRow,this);this.on("variantRow:removed",this._ddDelegate.syncTargets,this._ddDelegate);this._headerEl.delegate("click",this._editOption,".custom-option",this);this._addVariantEl.on("click",this._attemptAddNewVariant,this);this._bodyEl.delegate("click",this.hideError,"input",this);this.after("dataChange",this.hideError,this);this._ddDelegate.on("reorder:reordered",this._reorderRows,this);this.on("variantRow:validateForShipping",this._validateForShipping,this)},syncUI:function(){r.superclass.syncUI.call(this);this._bodyEl.toggleClass("one-variant",1===this.size());if(!this.get("isGiftCard")){var e=this.get("dialog").getField("isSubscribable");var t=e.get("data");var a=this._headerEl.one(".option-stock");a.toggleClass("hidden",t);this.each(function(e){e.toggleStockVisibility(t)},this)}},didDataChange:function(){return this._edited},_setupDragAndDrop:function(){this._ddDelegate=new o.SQS.DDWrappers.DD.Delegate({container:this._childrenContainer,nodes:".sqs-variant-row",groups:"variant-row",scrollNode:o.one(this.get("contentBox")).ancestor(".body-block"),enableDragReorder:true,enableDragScroll:true,enableDragConstrained:true,dragConstrainedConfig:{stickY:true}})},_editOrCreateNextRow:function(e){var t=this.indexOf(e.target);var a=e.command;var i=this.item(t+1);if(o.Lang.isValue(i))a.call(i);else{var n=this._attemptAddNewVariant();if(n){i=this.item(t+1);a.call(i)}}},_attemptDeleteRow:function(e){var t=e.target;if(1===this.size()){new o.Squarespace.Widgets.Alert({"strings.title":c("Cannot Remove"),"strings.message":c("Your product must have at least one choice.")});return}new o.Squarespace.Widgets.Confirmation({"strings.title":c("Delete Variant?"),"strings.message":c("Do you want to delete this product variant?")}).on("confirm",t.close,t)},_editOption:function(e){var t=e.currentTarget;var a=t.getData();this._isSystemVariantOption(a.optionName)||this._addEditOption(a,t)},_isSystemVariantOption:function(e){return-1!==t.SystemAttributes.indexOf(e)},_renderOption:function(e,t){var a=e.optionName;var i=e.tooltipConfig;var n=o.Node.create('<div class="option" data-option-name="'+a+'">'+e.displayName+"</div>");this._isSystemVariantOption(e.optionName)&&n.addClass("option-"+a);t&&n.addClass("custom-option");n.setData(e);this._headerEl.insert(n,this._headerEl.one(".add-option"));o.Lang.isValue(i)&&new o.Squarespace.ToolTip({target:".option-"+a,title:i.title,body:i.body,clickToShow:true,alwaysEnable:true,dialogTooltip:true})},_addVariant:function(e){var t=o.Lang.isValue(this.get("dialog"));var a=t?this.get("dialog"):this.get("data.editor");var i=new o.Squarespace.Widgets.VariantRow({optionsList:this.get("optionsList"),data:e,dialog:a,isPhysical:this.get("isPhysical"),isGiftCard:this.get("isGiftCard"),measurementStandard:this.get("measurementStandard"),inDialog:t,productModel:this.get("productModel")});this.add(i);this.fire("edited");this._ddDelegate.syncTargets();o.Squarespace.Analytics.trackInternal("product_variant_added")},_attemptAddNewVariant:function(){var e=this.get("data.variants");var t=this.get("productModel");var a=this.get("isGiftCard");var i=0===this.get("optionsList").size();if(i&&!a){new o.Squarespace.Widgets.Alert({"strings.title":c("Options Needed"),"strings.message":c('You must define at least one option (e.g. "color", "size") before adding product variants.')});this._addOptionEl.pulseWarn.warn();return false}if(e.length>=100){new o.Squarespace.Widgets.Alert({"strings.title":c("Too Many Variants"),"strings.message":c("You have reached the system limit of 100 variants per product. It is recommended that you divide this item into several separate products if you have more than 100 SKUs.")});return false}[51,65,80,95,99].includes(e.length)&&new o.Squarespace.Widgets.Alert({"strings.title":c("Warning: Variants Limit"),"strings.message":c("The system has a limit of 100 variants per product. You currently have {sub1}. It is recommended that you divide this item into several separate products if you have more than 100 SKUs.",{sub1:e.length})});var n=o.clone(e[e.length-1]);n.id=o.Squarespace.Commerce.generateVariantId();n.sku=o.Squarespace.Commerce.generateSKU();a&&(n=o.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(n.price+2500));this._addVariant(n);this._addVariantEl.scrollIntoView();d.trackAddVariant({productId:t.get("id"),productName:t.get("title"),productType:u(t.get("productType")),variantId:n.id,productEditor:g});return true},_addEditOption:function(i,n){var e=i?[{type:"cancel",title:c("Cancel")},{type:"remove",title:c("Remove")},{type:"save",title:c("Save Option")}]:[{type:"cancel",title:c("Cancel")},{type:"save",title:c("Save Option")}];var s=new o.Squarespace.EditingDialog({top:120,width:300,overlay:.5,closeOthers:false,initialData:i,buttons:e,primaryTabs:[{title:c("Edit Option"),icon:"/universal/images-v6/form/light/24px/icon_radio_24_light.png",fields:[{ctor:o.Squarespace.DialogFields.Text,config:{name:"optionName",className:"thin",submitOnEnter:true,strings:{title:c("Option Name"),description:c("E.g. color, size, style, material")}}}]}]});var r=this.get("productModel");s.on("send-requested",function(){var e=s.getField("optionName").getValue().trim();if(""===e){s.getField("optionName").showError(c("The option name cannot be blank."));s.allowEditing();return}if(this._isSystemVariantOption(e)){s.getField("optionName").showError(c("That name is reserved by the system."));s.allowEditing();return}if("EACH"===e.toUpperCase()){s.getField("optionName").showError(c("That name is reserved by the system."));s.allowEditing();return}if(o.Lang.isValue(i)){n.setContent(e);n.setAttribute("data-option-name",e);var t=this.get("optionsList");var a=t.find(i.optionName);a.set("optionName",e);n.setData(a.getAttrs())}else{if(this.get("optionsList").getOptionsByName(e).length>0){s.getField("optionName").showError(c("You cannot create another option with the same name."));s.allowEditing();return}d.trackAddProductOption({optionName:e,productId:r.get("id"),productName:r.get("title"),productType:u(r.get("productType")),productEditor:g});this._renderOption({optionName:e,displayName:e},true);this.get("optionsList").add(new l({optionName:e,displayName:e}))}s.close()},this);s.on("remove-requested",function(){1===this.get("optionsList").size()&&this.size()>1?new o.Squarespace.Widgets.Alert({"strings.title":c("Cannot Remove"),"strings.message":c("Since you have several variants defined, you must have at least one option. If you really want to remove this option, remove your variants first.")}):new o.Squarespace.Widgets.Confirmation({"strings.title":c("Delete Option?"),"strings.message":c("Do you want to delete this option?")}).on("confirm",function(){var e=this.get("optionsList");e.remove(e.find(i.optionName));this._headerEl.all(".option").each(function(e){e.getData().optionName===i.optionName&&n.remove()});d.trackDeleteProductOption({optionName:i.optionName,productId:r.get("id"),productName:r.get("title"),productType:u(r.get("productType")),productEditor:g});s.close()},this)},this);s.show()},_getErrors:function(){var n={skuMap:{},priceMap:{},isSubscription:this.get("dialog").getField("isSubscribable")&&this.get("dialog").getField("isSubscribable").get("data")};var s=[];this.each(function(e){var t=e.get("data.sku");var a=e.get("data.price");var i=e.getError(n);if(o.Lang.isValue(i)){this._set("errorFlyoutAnchor",i.inputEl);this.fire("errors");s=[i.message]}n.skuMap[t]=true;n.priceMap[a]=true},this);return s},_reorderRows:function(e){var t=e.reordered;var a=this.remove(t.oldIndex);this.add(a,t.newIndex)},_refreshData:function(){var t=[];this.each(function(e){t.push(e.get("data"))},this);var a=[];this.get("optionsList").each(function(e){a.push(e.get("optionName"))});this.set("data",{variants:t,variantOptionOrdering:a,editor:this.get("data.editor"),productModel:this.get("productModel")})},_validateForShipping:function(){o.Data.post({headers:{"Content-Type":"application/json"},url:"/api/commerce/inventory/shipping-violations",data:o.JSON.stringify(this.get("data").variants),success:this._showShippingWarnings},this)},_showShippingWarnings:function(e){if(this.get("destroyed"))return;var t=this.get("contentBox").one(".shipping-warning");var a=t.one(".shipping-warning-content");var i=false;e=e||[];e.forEach(function(e){e.shippingViolations&&(i=true);a.setHTML('<div class="warning-icon"></div>'+c('Some of your product\'s variants are missing weight or dimensions, or exceed carrier shipping limits. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.CALCULATED_SHIPPING_RATES}))});i?t.addClass("visible"):t.removeClass("visible")}},{CSS_PREFIX:"sqs-variants-table",ATTRS:{strings:{value:{title:c("Product Variants"),description:c("Define the options of your item, create variants, and track stock levels. Each row in the table below represents a variant on this product. You can add additional options to those variants by adding columns. Subscription products do not have stock levels."),titleAmounts:c("Values"),descriptionAmounts:c("Edit the gift card values you want to offer.")}},isPhysical:{value:true},isGiftCard:{value:false},optionsList:{value:null},measurementStandard:{value:null},productModel:{value:null},editor:{}}})},"1.0",{requires:["base","model","squarespace-commerce-utils","squarespace-commerce-giftcard-utils","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog","squarespace-dialog-field-2","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-pulsewarn","squarespace-ui-base","squarespace-util","squarespace-variant-row","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},7921:function(e,t,a){var i=a(2026);var n=a(1005);var s=a(1310);YUI.add("squarespace-commerce-giftcard-utils",function(a){a.namespace("Squarespace.Commerce");a.Squarespace.Commerce.GiftCardUtils={createGiftCardAmountVariant:function(e){var t=s.getStoreCurrency();return{onSale:false,price:e,salePrice:0,unlimited:true,id:a.Squarespace.Commerce.generateVariantId(),sku:a.Squarespace.Commerce.generateSKU(),optionValues:[{optionName:"Value",value:n.formatter.format(i.fromCents(e,t))}]}}}},"1.0",{requires:["squarespace-commerce-utils"]})},7922:function(e,t,a){var s=a(24).t;var o=a(100);YUI.add("squarespace-variant-row",function(d){d.namespace("Squarespace");var i=function(e){var t=d.Node.create('<div class="attribute"></div>');e.render(t);t.setAttribute("name",e.get("name"));t.addClass("attribute-"+e.get("name"));return t};var r=function(e){var t=d.Node.create('<div class="attribute"></div>');e.render(t);t.setAttribute("name",e.get("name"));return t};var n=d.Squarespace.Widgets.VariantRow=d.Base.create("variantRow",d.Squarespace.SSWidget,[d.WidgetChild],{initializer:function(){this.publish("validateForShipping")},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("data");var t=this.get("contentBox");this._userAttributeInputs=[];var a=d.Node.create('<div class="variant-row"><div class="attributes"></div><div class="remove-variant"></div></div>');t.append(a);this._variantImageInput=new d.Squarespace.Widgets.Variants.VariantImageInput({name:"image",id:e.id,productModel:this.get("productModel"),data:e.mainImageId});this._addSystemAttribute(this._variantImageInput);this._skuInput=new d.Squarespace.Widgets.Variants.VariantCellInput({name:"sku",productId:this.get("productModel").get("id"),variantId:this.get("data").id,data:e.sku});this._addSystemAttribute(this._skuInput);if(this.get("isGiftCard")){this._pricingInput=new d.Squarespace.Widgets.Variants.VariantCellMoneyTrimCentsInput({data:e.price,name:"pricing",inputClassName:"gift-card-amount-input"});this._addSystemAttribute(this._pricingInput)}else{this._pricingInput=new d.Squarespace.Widgets.Variants.PricingInput({dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"pricing",data:{price:e.price,salePrice:e.salePrice,onSale:e.onSale}});this._addSystemAttribute(this._pricingInput)}if(!this.get("isGiftCard")){this._stockInput=new d.Squarespace.Widgets.Variants.StockInput({dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"stock",data:{qtyInStock:e.qtyInStock,unlimited:e.unlimited}});this._addSystemAttribute(this._stockInput)}if(this.get("isPhysical")){var i=d.Squarespace.Context.getInstance().get("websiteSettings").get("storeSettings").measurementStandard;this._weightInput=new d.Squarespace.Widgets.Variants.VariantCellNumericInput({numericFormatterConfig:{postfixUnit:i===d.Squarespace.MeasurementStandard.IMPERIAL?"lbs":"kg"},data:e.weight,name:"weight"});this._addSystemAttribute(this._weightInput);this._dimensionsInput=new d.Squarespace.Widgets.Variants.DimensionsInput({data:{len:e.len,width:e.width,height:e.height},dialog:this.get("dialog"),inDialog:this.get("inDialog"),measurementStandard:this.get("measurementStandard"),name:"dimensions"});this._addSystemAttribute(this._dimensionsInput)}this.get("isGiftCard")||this.get("optionsList").each(this._addAttribute,this);this._refreshData()},bindUI:function(){n.superclass.bindUI.call(this);var e=this.get("boundingBox");e.plug(d.Squarespace.Animations.Expandable);this.get("optionsList").after("UserOption:optionNameChange",function(e){var t=this._getAttributeElByName(e.prevVal);t.setAttribute("name",e.newVal);this._refreshData()},this);this.get("optionsList").after("add",function(e){var t=e.model;this._addAttribute(t);this._refreshData()},this);this.get("optionsList").after("remove",function(e){var t=e.model;this._getAttributeElByName(t.get("optionName")).remove();this._userAttributeInputs.remove(t);this._refreshData()},this);e.one(".remove-variant").on("click",function(){this.fire("remove-requested")},this);this._skuInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){var e=this._skuInput.get("contentBox").one("input");e.focus();e.select()}})},this);this.get("isPhysical")&&this._weightInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){var e=this._weightInput.get("contentBox").one("input");e.focus();e.select()}})},this);this.after("variantCellInput:edit-next-row-requested",function(t){this.fire("next-row-execute-requested",{command:function(){var e=this._getAttributeElByName(t.target.get("name")).one("input");e.focus();e.select()}})},this);this.after("*:dataChange",function(e){if(e.target===this)return;this._refreshData()},this);if(this.get("isPhysical")){this._weightInput.on("keyup",o(this._validateForShipping.bind(this),300));this._dimensionsInput.on("keyup",o(this._validateForShipping.bind(this),300));this._weightInput.on("blur",this._validateForShipping,this);this._dimensionsInput.on("close",this._validateForShipping,this)}},close:function(){var e=this.get("boundingBox");e.on("closed",function(){this.fire("removed")},this);e.hide()},getError:function(e){var t=e.skuMap;var a=e.priceMap;var i=this.get("data");var n=d.Squarespace.Commerce.maxes();if(""===i.sku.trim())return{inputEl:this._skuInput.get("contentBox"),message:s("SKU cannot be left blank.")};if(i.sku.length>n.skuStringLength)return{inputEl:this._skuInput.get("contentBox"),message:s("SKU is too long.")};if(d.Lang.isValue(t[i.sku]))return{inputEl:this._skuInput.get("contentBox"),message:s("{sub1} is not a unique SKU.",{sub1:i.sku})};if(!i.unlimited&&i.qtyInStock<0)return{inputEl:this._stockInput.get("contentBox"),message:s("{sub1} cannot have negative stock.",{sub1:i.sku})};if(i.price<i.salePrice)return{inputEl:this._pricingInput.get("contentBox"),message:s("Sale price must be less than standard price.")};if(Math.max(i.price,i.salePrice)>n.productPrice)return{inputEl:this._pricingInput.get("contentBox"),message:s("Price must be no more than 1 million.")};if(this.get("isGiftCard")&&a[i.price])return{inputEl:this._pricingInput.get("contentBox"),message:s("Price exists.")};if(this.get("isGiftCard")&&i.price<=0)return{inputEl:this._pricingInput.get("contentBox"),message:s("Price must be greater than 0.")};if(e.isSubscription&&(i.onSale?i.salePrice:i.price)<=0)return{inputEl:this._pricingInput.get("contentBox"),message:s("Price must be greater than 0.")};return null},toggleStockVisibility:function(e){var t=this._getAttributeElByName("stock");t&&t.toggleClass("hidden",e)},_refreshData:function(e){var t=this.get("data");var a=this._pricingInput.get("data");var i=this._getStockData();var n;var s=this.get("isGiftCard");var r=s?a:a.price;var o=s?null:a.salePrice;var l=!s&&a.onSale;var c={id:t.id,sku:this._skuInput.get("data"),price:r,salePrice:o,onSale:l,qtyInStock:i.qtyInStock,unlimited:i.unlimited,attributes:{}};this._variantImageInput&&(c=d.merge(c,{mainImageId:this._variantImageInput.get("data")}));if(this.get("isPhysical")){n=d.Lang.isValue(this._dimensionsInput)?this._dimensionsInput.get("data"):{len:1,width:1,height:1};c=d.merge(c,{weight:this._weightInput.get("data"),len:n.len,width:n.width,height:n.height})}this.get("isGiftCard")||this.get("optionsList").each(function(e){var t=e.get("optionName");var a=this._getAttributeElByName(t);c.attributes[t]=a.one("input").get("value")},this);this.set("data",c)},_getStockData:function(){if(this.get("isGiftCard"))return{unlimited:true};return this._stockInput.get("data")},_getAttributeElByName:function(t){var e=this.get("contentBox");var a;e.all(".attribute").each(function(e){e.getAttribute("name")===t&&(a=e)});return a},_addSystemAttribute:function(e){var t=this.get("contentBox");var a=t.one(".attributes");a.append(i(e));e.addTarget(this,{emitFacade:true})},_addAttribute:function(e){var t=this.get("contentBox");var a=t.one(".attributes");var i=e.get("optionName");var n=new d.Squarespace.Widgets.Variants.VariantCellInput({name:e.get("optionName"),productId:this.get("productModel").get("id"),userOption:e,variantId:this.get("data").id,data:this.get("data.attributes")[i]});var s=r(n);s.setAttribute("name",i);a.append(s);n.addTarget(this,{emitFacade:true});this._userAttributeInputs.push(n)},_validateForShipping:function(){this._refreshData();this.fire("validateForShipping")}},{CSS_PREFIX:"sqs-variant-row",ATTRS:{data:{value:null},optionsList:{value:null},dialog:{value:null},inDialog:{value:true},isPhysical:{value:true},isGiftCard:{value:false},measurementStandard:{value:null},productModel:{value:null}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-basic-check","squarespace-commerce-utils","squarespace-context","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-pulsewarn","squarespace-ss-widget","squarespace-variant-row-inputs","widget-child"]})},7923:function(e,t){YUI.add("squarespace-basic-check",function(a){var e=function(t){return function(e){e.halt();t.call(this,e)}};a.namespace("Squarespace.Widgets");var t=a.Squarespace.Widgets.BasicCheck=a.Base.create("basicCheck",a.Squarespace.Widgets.DataWidget,[],{bindUI:function(){t.superclass.bindUI.call(this);this.get("boundingBox").on("click",e(this._toggleActive),this)},renderUI:function(){var e=this.get("contentBox");a.Lang.isValue(this.get("title"))&&e.append('<div class="title">'+this.get("title")+"</div>");var t=a.Node.create('<div class="check-element"></div>');e.append(t);a.Lang.isValue(this.get("label"))&&t.append('<div class="label">'+this.get("label")+"</div>")},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox");e.one(".check-element").toggleClass("active",this.get("data"))},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-basic-check",ATTRS:{data:{value:false,validator:a.Lang.isBoolean},name:{value:null},title:{value:null},label:{value:null}}})},"1.0",{requires:["base","squarespace-dialog-check-template","squarespace-widgets-data-widget"]})},7924:function(e,t,a){var l=a(851);var c=a(149);var d=a(24).t;var u=a(9117);var g=a(516);var p=a(390);YUI.add("squarespace-variant-row-inputs",function(r){r.namespace("Squarespace.Widgets.Variants");var n=r.Squarespace.Widgets.Variants.VariantCellInput=r.Base.create("variantCellInput",r.Squarespace.Widgets.DataWidget,[],{renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("title");r.Lang.isValue(t)&&e.append(r.Node.create('<div class="title">'+t+"</div>"));var a=r.Node.create('<input type="text"></input>');e.append(a);a.setAttribute("name",this.get("name"));a.set("value",this.get("data"));var i=this.get("inputClassName");r.Lang.isValue(i)&&a.addClass(i)},bindUI:function(){n.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one("input");t.after(["change","valuechange"],function(e){this.set("data",this._getInputValue())},this);t.after("change",function(){r.Squarespace.Analytics.trackInternal("variant_cell_changed",{fieldName:this.get("name")});g.trackUpdateVariantOptionValue({optionName:this.get("name"),optionValue:this._getInputValue(),productId:this.get("productId"),variantId:this.get("variantId"),productEditor:p.ProductEditor.YUI_EDITOR})},this);t.on("click",t.select);t.on("key",function(){this.fire("edit-next-row-requested")},"press:13",this);var a=this.get("userOption");r.Lang.isValue(a)&&a.after("optionNameChange",function(e){this.set("name",a.get("optionName"))},this)},_getInputValue:function(){return this.get("contentBox").one("input").get("value").trim()},disable:function(e){this.set("disabled",true);this.get("contentBox").one("input").set("disabled",true);r.Lang.isValue(e)&&this.get("contentBox").one("input").set("value",e)},enable:function(e){this.set("disabled",false);this.get("contentBox").one("input").set("disabled",false);r.Lang.isValue(e)&&this.get("contentBox").one("input").set("value",e)}},{CSS_PREFIX:"sqs-variant-cell-input",ATTRS:{title:{value:null},userOption:{value:null},name:{value:null},inputClassName:{value:null},productId:{vaue:null},variantId:{value:null}}});var e=r.Squarespace.Widgets.Variants.VariantImageInput=r.Base.create("VariantImageInput",r.Squarespace.Widgets.DataWidget,[],{renderUI:function(){e.superclass.renderUI.call(this);this._renderVariantImage();this._createVariantImageEditorContainer()},bindUI:function(){this.on("click",function(){this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.show()});if(Static&&Static.JOB_MANAGER){this._completedImageJobListener=Static.JOB_MANAGER.on("completed",this._buildProcessingStateHandler(l.READY));this._failedImageJobListener=Static.JOB_MANAGER.on("failed",this._buildProcessingStateHandler(l.ERROR))}this.get("productModel")&&(this._productModelListener=this.get("productModel").on("change",function(e){var t=this.get("contentBox");t._node&&this._renderVariantImage()}.bind(this)))},destroy:function(){this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.destroy();this._completedImageJobListener&&this._completedImageJobListener.detach();this._failedImageJobListener&&this._failedImageJobListener.detach();this._productModelListener&&this._productModelListener.detach()},_buildProcessingStateHandler:function(n){return function(e){var t=e.job;var a=t.get("data.contentItemId");var i=this.get("productModel").items.getById(a);if(i){i.set("mediaProcessingState",n);this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.render()}}.bind(this)},_renderVariantImage:function(){var e=this._getMainImage();e?this._renderSelectedThumbnail(e):this._renderPlaceholderThumbnail()},_renderSelectedThumbnail:function(e){var t=this.get("contentBox");var a=t.one(".variant-image-placeholder");a&&a.remove(true);var i=t.one(".variant-image");var n=e.get("assetUrl");if(i)i.setAttribute("src",n);else{i=r.Node.create('<img class="variant-image" src="'+n+'?format=100w"/>');t.append(i)}},_renderPlaceholderThumbnail:function(){var e=this.get("contentBox");var t=e.one(".variant-image");t&&t.remove(true);var a=e.one(".variant-image-placeholder");if(!a){a=r.Node.create('<img class="variant-image-placeholder" src="/universal/images-v6/dialog/placeholder-image.svg"/>');e.append(a)}},_createVariantImageEditorContainer:function(){var e=this.get("contentBox");var t='<div id="variant-image-editor-container"></div>';var a=r.Node.create(t);e.append(a);this._wrappedVariantImageEditor||(this._wrappedVariantImageEditor=new u({productModel:this.get("productModel"),mainImageId:this.get("data"),variantId:this.get("id"),setMainImageInYUI:this._setMainImageInYUI.bind(this),addProductImageInYUI:this._addProductImageInYUI.bind(this),removeProductImageInYUI:this._removeProductImageInYUI.bind(this),container:a.getDOMNode()}))},_addProductImageInYUI:function(e,t,a){var i=new r.Squarespace.Models.ContentItem({assetUrl:e.assetUrl,displayIndex:t,id:e.id,mediaProcessingState:l.QUEUED,recordType:c.IMAGE});this.get("productModel").items.add(i,{onUpload:true});var n=this._createImageProcessingJob(a);Static&&Static.JOB_MANAGER&&r.config.win.Static.JOB_MANAGER.addJob(n)},_removeProductImageInYUI:function(e,t){var a=this.get("productModel");var i=a.items.getById(e);i&&a.items.removeItems([i],t)},_setMainImageInYUI:function(e){this.set("data",e);this._renderVariantImage()},_getMainImage:function(){var e=this.get("productModel");if(!e||!e.items||e.items.isEmpty())return null;var t=this.get("data");return e.items.getById(t)},_createImageProcessingJob:function(e){var t=r.merge(e,{started:true});var a=new r.Squarespace.ImageProcessingJob(t);a.set("collection",this.get("productModel"));a.set("id",e.id);return a}},{CSS_PREFIX:"sqs-variant-image-input",ATTRS:{name:{value:null},productModel:{value:null}}});var o=r.Squarespace.Widgets.Variants.VariantCellNumericInput=r.Base.create("variantCellNumericInput",n,[],{renderUI:function(){o.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.NumericFormatter,this.get("numericFormatterConfig"))},_getInputValue:function(){return this.get("contentBox").one("input").numericFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-numeric-input",ATTRS:{numericFormatterConfig:{value:null}}});var s=r.Squarespace.Widgets.Variants.VariantCellMoneyInput=r.Base.create("variantCellMoneyInput",n,[],{renderUI:function(){s.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.MoneyFormatter)},_getInputValue:function(){return this.get("contentBox").one("input").moneyFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-money-input"});var t=r.Squarespace.Widgets.Variants.VariantCellMoneyTrimCentsInput=r.Base.create("variantCellMoneyTrimCentsInput",n,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.MoneyFormatterTrimCents)},_getInputValue:function(){return this.get("contentBox").one("input").moneyFormatterTrimCentsPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-money-input-trim-cents"});var a=r.Base.create("pricingInput",r.Base,[],{initializer:function(){var e=this.get("hostNode");e.plug(r.Squarespace.Animations.Flyout,{duration:.1});var t=e.flyoutPlugin;this._flyout=t;var a=r.Node.create('<div class="flyout-variant-edit"><div class="fields"></div><div class="notch"></div></div>');a.addClass(this.get("name"));t.setAttrs({node:a,alignment:"tc"});e.on("click",this.showFlyout,this);t.on("shown",function(){r.Lang.isValue(a.one("input:enabled"))&&a.one("input:enabled").focus()},this);a.delegate("key",function(){this.closeFlyout()},"press:13","input",this);r.Array.each(this.get("fields"),function(e){e.render(a.one(".fields"));e.after("dataChange",function(){this.set("data",this._getFieldData())},this)},this)},showFlyout:function(){this._flyout.show();this._syncFieldsFromData();this.fire("open")},closeFlyout:function(){this.get("inDialog")&&this.set("data",this._getFieldData());this._flyout.hide();this.fire("close")},_syncFieldsFromData:function(){r.Squarespace.FormUtils.setData(this.get("fields"),this.get("data"))},_getFieldData:function(){return r.Squarespace.FormUtils.getData(this.get("fields"))}},{CSS_PREFIX:"sqs-field-flyout",ATTRS:{hostNode:{value:null},fields:{value:[]},content:{value:null},name:{value:null},inDialog:{value:true}}});var i=r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget=r.Base.create("flyoutDrivenDataWidget",r.Squarespace.Widgets.DataWidget,[],{initializer:function(){this.publish("open");this.publish("close")},renderUI:function(){i.superclass.renderUI.call(this);this.get("contentBox").setHTML('<span class="placeholder"></span>');this._flyout=new a(this._getFlyoutConfig());this._flyout.set("data",this.get("data"))},bindUI:function(){i.superclass.bindUI.call(this);this.get("inDialog")&&this._flyout.after("close",function(){this.fire("close");this.set("data",this._flyout.get("data"))},this);this._flyout.after("dataChange",function(){this.set("data",this._flyout.get("data"))},this);this._flyout.after("edit-next-row-requested",function(){this.fire("edit-next-row-requested")},this);this._flyout.after("open",function(){this.fire("open");this.get("dialog").setActiveFlyout({constraintClasses:".flyout-variant-edit",field:this._flyout})},this)},showFlyout:function(){this._flyout.showFlyout()},syncUI:function(){i.superclass.syncUI.call(this);var e=this.get("contentBox");var t=e.one(".placeholder");t.setContent(this._getPlaceholderContent())},_getFlyoutConfig:function(){throw new Error("FlyoutDrivenDataWidget._getFlyoutConfig: pleaseee implement meeee.")},_getPlaceholderContent:function(){throw new Error("FlyoutDrivenDataWidget._getPlaceholderContent: pleaseee implement meeee.")}},{CSS_PREFIX:"sqs-flyout-driven-data-widget",ATTRS:{dialog:{value:null},inDialog:{value:true}}});r.Squarespace.Widgets.Variants.PricingInput=r.Base.create("pricingInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var e=this.get("data");var t=this.get("boundingBox");var a=new s({data:e.price,title:d("Price"),name:"price"});var i=new r.Squarespace.Widgets.BasicCheck({data:e.onSale,title:d("On Sale"),name:"onSale"});i.after("dataChange",function(){i.get("data")?a.disable():a.enable()},this);return{hostNode:t,dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"pricing",fields:[a,new s({data:e.salePrice,title:d("Sale Price"),name:"salePrice"}),i]}},_getPlaceholderContent:function(){var e=this.get("data");var t=r.Squarespace.Commerce.moneyString(e.price);if(!e.onSale)return t;return r.Squarespace.Commerce.moneyString(e.salePrice)+' <span class="original-price">'+t+"<span>"}},{CSS_PREFIX:"sqs-pricing-input",ATTRS:{data:{value:{price:100,salePrice:0,onSale:false}},name:{value:"pricing"}}});r.Squarespace.Widgets.Variants.StockInput=r.Base.create("stockInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var e=this.get("boundingBox");var t=this.get("data");var a=new o({data:t.qtyInStock,title:d("Quantity In Stock"),name:"qtyInStock"});var i=new r.Squarespace.Widgets.BasicCheck({data:t.onSale,title:d("Unlimited"),name:"unlimited"});i.after("dataChange",function(){if(i.get("data")){a.disable("∞");r.Squarespace.Analytics.trackInternal("product_variant_stock_toggled",{isUnlimited:true})}else{a.enable(a.get("data"));r.Squarespace.Analytics.trackInternal("product_variant_stock_toggled",{isUnlimited:false})}},this);return{hostNode:e,name:"stock",dialog:this.get("dialog"),inDialog:this.get("inDialog"),fields:[a,i]}},_getPlaceholderContent:function(){var e=this.get("data");if(e.unlimited)return"∞";return e.qtyInStock}},{CSS_PREFIX:"sqs-stock-input",ATTRS:{data:{value:{qtyInStock:0,unlimited:false}},name:{value:"stock"}}});r.Squarespace.Widgets.Variants.DimensionsInput=r.Base.create("dimensionsInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{initializer:function(){this.publish("keyup")},_getFlyoutConfig:function(){var e=this.get("boundingBox");var t=this.get("data");var a=this.get("measurementStandard")===r.Squarespace.MeasurementStandard.IMPERIAL?"in.":"cm";var i=new o({data:t.len,title:d("Length"),name:"len",numericFormatterConfig:{postfixUnit:a}});var n=new o({data:t.width,title:d("Width"),name:"width",numericFormatterConfig:{postfixUnit:a}});var s=new o({data:t.height,title:d("Height"),name:"height",numericFormatterConfig:{postfixUnit:a}});i.on("keyup",this._fireKeyUp,this);n.on("keyup",this._fireKeyUp,this);s.on("keyup",this._fireKeyUp,this);return{hostNode:e,name:"dimensions",dialog:this.get("dialog"),inDialog:this.get("inDialog"),fields:[i,n,s]}},_fireKeyUp:function(e){this.fire("keyup",e)},_getPlaceholderContent:function(){var e=this.get("data");if(0===e.len||0===e.width||0===e.height)return"—";return[e.len,e.width,e.height].join('<span class="x">✕</span>')}},{CSS_PREFIX:"sqs-dimensions-input",ATTRS:{data:{value:{len:0,width:0,height:0}},name:{value:"stock"},measurementStandard:{value:null}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-basic-check","squarespace-commerce-utils","squarespace-form-utils","squarespace-node-flyout","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-money-formatter-trim-cents","squarespace-util","squarespace-widgets-data-widget","widget-child"]})},7925:function(e,t,a){var i=a(2026);var n=a(1005);var s=a(1310);YUI.add("squarespace-plugin-money-formatter-trim-cents",function(e){e.namespace("Squarespace.Plugin");e.Squarespace.Plugin.MoneyFormatterTrimCents=e.Base.create("moneyFormatterTrimCents",e.Squarespace.Plugin.MoneyFormatter,[],{},{NS:"moneyFormatterTrimCentsPlugin",ATTRS:{suppressDecimal:{value:true},displayFormatter:{value:function(e){var t=s.getStoreCurrency();return n.formatter.format(i.fromCents(e,t),{trimZeroFractions:true})}}}})},"1.0",{requires:["plugin","squarespace-commerce-utils","squarespace-plugin-numeric-formatter","squarespace-util"]})},7926:function(e,t,a){var i=a(24).t;var n=a(5065);YUI.add("squarespace-content-item-types-event",function(e){e.namespace("Squarespace.ContentItemEditor");var t={title:i("Edit {presentationName}"),width:720,name:"event-post-editor",verticalHeight:"full",overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.event"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.Squarespace.ContentItemEditor.Event=e.Base.create("EventContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var e=a.getField("startDate");e.after("dataChange",this._adjustEndDate,this);var t=a.getField("title");t.after("dataChange",this._updateSeoTitle,this)},this)},getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.startDate=t.startDate;e.endDate=t.endDate;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent={startDate:e.startDate,endDate:e.endDate};return e},_updateSeoTitle:function(e){n.updateFieldNoEdit("title",e.newVal)},_adjustEndDate:function(e){var t=this.get("dialog");var a=t.getField("endDate");var i=parseInt(e.prevVal,10);var n=parseInt(e.newVal,10);var s=a.get("data")-i;a.set("data",new Date(n+s).getTime(),{autoUpdate:true})},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enableExcerpt=true;return e}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},7927:function(e,t,a){var i=a(24).t;YUI.add("squarespace-content-item-types-gallery",function(e){var t={title:i("Edit {presentationName}"),width:800,height:450,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.gallery"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor").Gallery=e.Base.create("GalleryContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},7928:function(e,t,a){var r=a(24).t;YUI.add("squarespace-content-item-types-image",function(e){e.namespace("Squarespace.ContentItemEditor");var t={title:r("Edit {presentationName}"),width:800,height:510,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.image"]},{$include:"tabs.options.image"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.Squarespace.ContentItemEditor.Image=e.Base.create("ImageContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{show:function(e){var t=this.get("dialog");e&&e.getty&&t&&t.on("ready",function(){var e=t.getField("mainImage");e&&e._onLicensedImageSearch()},this);a.superclass.show.call(this)}},{ATTRS:{editorConfiguration:{value:t}}});var i=[{$include:["fields.title",{countHeight:true,className:"thin"}]},{ctor:e.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:157,classNames:"major",title:r("Enter an image body…")}}];var n={name:"imageeditminimal",title:r("Edit {presentationName}"),width:380,height:410,overlay:.5,closeOthers:false,draggable:true,minimal:true,style:"flyout",flyoutPointerDirection:"hidden",fields:[].concat(i,[{$include:["fields.clickthroughUrl",{countHeight:true,condensed:true,disableNewWindow:true}]}]),buttons:{$include:"buttons"}};e.Squarespace.ContentItemEditor.ImageMinimal=e.Base.create("ImageContentItemEditor",a,[],{},{ATTRS:{editorConfiguration:{value:n}}});var s={name:"imageeditminimal",title:r("Edit Image Metadata"),width:380,height:300,overlay:.5,closeOthers:false,draggable:true,minimal:true,style:"flyout",flyoutPointerDirection:"hidden",fields:[{$include:["fields.title",{countHeight:true,className:"thin"}]}],buttons:{$include:"buttons"}};e.Squarespace.ContentItemEditor.ProductImageMinimal=e.Base.create("ProductImageContentItemEditor",a,[],{},{ATTRS:{editorConfiguration:{value:s}}});e.Squarespace.ContentItemEditor.ImageAltText=e.Base.create("ImageAltTextEditor",a,[],{},{ATTRS:{editorConfiguration:{value:{name:"alttextimageeditor",title:r("Edit Image"),width:380,height:410,closeOthers:false,draggable:true,style:"flyout",flyoutPointerDirection:"hidden",buttons:{$include:"buttons"},fields:[{ctor:e.Squarespace.DialogFields.Text,countHeight:true,className:"thin",config:{name:"title","strings.placeholder":r("Enter alt text…")}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"altTextDescription",text:r("A small bit of text to describe your image. Used for SEO and displayed when the image fails to load.")}}]}}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-text","squarespace-dialog-description","squarespace-dialog-wysiwyg"]})},7929:function(e,t,a){var i=a(24).t;YUI.add("squarespace-content-item-types-kbarticle",function(e){var t={title:i("Edit {presentationName}"),width:650,name:"kbarticle-editor",overlay:.5,verticalHeight:"full",initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.namespace("Squarespace.ContentItemEditor").KBArticle=e.Base.create("ArticleEditor",e.Squarespace.ContentItemEditor.Base,[],{getPresentationName:function(){return"KBArticle"},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enablePassthrough=true;e.enableExcerpt=true;return e}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},7930:function(e,t,a){var i=a(24).t;YUI.add("squarespace-content-item-types-link",function(e){var t={title:i("Edit {presentationName}"),width:800,height:370,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.link"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor").Link=e.Base.create("LinkContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},7931:function(e,t,a){var n=a(24).t;var o=a(309);var i=a(5806);YUI.add("squarespace-content-item-types-product-digital",function(s){var e=s.merge({},i,{name:"editProduct",title:n("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productDigitalPricingPlaceholder"}}},{$include:"tabs.product.upload"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});var r=s.namespace("Squarespace.ContentItemEditor").ProductDigital=s.Base.create("ProductDigitalContentItemEditor",s.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var i=this.get("dialog");i.on("ready",function(){var e=i.getField("pricingPlaceholder");var t=this.get("model");i.getField("digitalGoods").on("dataChange",function(e){null===e.newVal&&t.clearChildGroup("digitalGoods",s.bind(function(){t.set("digitalGoods",null)},this))},this);var a=function(){e.set("data",s.merge(e.get("data"),{priceCents:i.getField("priceCents").getValue(),salePriceCents:i.getField("salePriceCents").getValue(),onSale:i.getField("onSale").getValue()}))};i.getField("priceCents").after("dataChange",a);i.getField("salePriceCents").after("dataChange",a);i.getField("onSale").after("dataChange",a)},this)},validateFields:function(){var e=this.get("dialog");var t=e.getField("digitalGoods").get("data");var a=e.getField("priceCents").get("data");var i=e.getField("salePriceCents").get("data");if(!s.Lang.isValue(t)||s.Lang.isValue(t)&&!s.Lang.isValue(t.get("id")))return{digitalGoods:n("You must upload a file for this digital product.")};if(a<i)return{salePriceCents:n("Sale price must be less than standard price")};if(a>s.Squarespace.Commerce.maxes().productPrice)return{priceCents:n("Price must be no more than 1 million.")};if(i>s.Squarespace.Commerce.maxes().productPrice)return{salePriceCents:n("Sale price must be no more than 1 million.")};return r.superclass.validateFields.call(this)},getDialogData:function(){var e=r.superclass.getDialogData.call(this);var t=e.structuredContent;var a=this.get("model");var i;var n=a.get("digitalGoods");if(n&&n.length>0){n.length>1&&console.warn("Multiple digital goods stored.");i=new s.Squarespace.Models.ContentItem(n[0])}else i=new s.Squarespace.Models.ContentItem({collectionId:a.get("collectionId"),parentId:a.get("id"),recordType:s.Squarespace.RecordType.DIGITALGOOD});return s.merge(e,{priceCents:t.priceCents,salePriceCents:t.salePriceCents,onSale:t.onSale,pricingPlaceholder:{productType:o.DIGITAL,priceCents:t.priceCents,salePriceCents:t.salePriceCents,onSale:t.onSale},digitalGoods:i})},sanitizeDialogData:function(e){e=r.superclass.sanitizeDialogData.call(this,e);e.structuredContent=s.merge(e.structuredContent,{productType:o.DIGITAL,priceCents:e.priceCents,salePriceCents:e.salePriceCents,onSale:e.onSale});return e},getPresentationName:function(){return n("Digital Product")}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["base","squarespace-content-item-types-product","squarespace-commerce-utils","squarespace-util"]})},7932:function(e,t,a){var l=a(24).t;var s=a(1089);var c=a(4119);var d=a(3053);var i=a(9118);var n=a(5957);var u=a(207);var T=a(728);var I=a(309);var r=a(1430);var o=a(2366);var g=a(1699);var A=a(801);var p=a(651);var h=a(794);var f=a(2025);var m=a(2592);var v=a(9119);var b=a(43);var y=a(722);var S=a(1374);var q=a(7484);var _=a(7418);var x=a(114);var L=a(9120);var D=a(9121);var C=a(3068);var N=a(9122);var E=C.ProductComposer;var O=C.BetaSwitchingButton;var k=C.shouldShowProductComposer;var R=C.shouldShowProductComposerOptIn;var P=C.toggleProductComposerOptIn;var B=a(869).default;var M=a(5065);var F=a(87);var U=a(2595);var V=a(516);var z=a(599);var w=a(390);var H=a(128);var G=[1,2,3,4,5,6,7,8,9,10,11,12];var W={};W[d.WEEK]=52;W[d.MONTH]=12;var Y=w.ProductEditor.YUI_EDITOR;YUI.add("squarespace-content-item-types-product",function(w){w.namespace("Squarespace.ContentItemEditor");var a=w.Squarespace.ContentItemEditor.Product=w.Base.create("ProductPhysicalContentItemEditor",w.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var e=this.get("dialog");e.on("ready",this._onReady,this);e.on("preClose",this._validateCustomerAccounts,this);e.on("duplicate",this._onDuplicate,this);e.on(["close","dismiss"],this._onCloseDismiss,this);e.after("dismiss",this._afterDismiss,this);e.after("tab-focused",this._afterTabFocused,this)},destructor:function(){},show:function(){if(k()){this._wrappedProductComposer||(this._wrappedProductComposer=new E({productId:this.get("model").get("id"),isNewProduct:this.get("model").get("isNewProduct"),lifeCycleHooks:{onCancelButtonClick:this._productComposerOnNonSavingClose.bind(this),onSaveButtonClick:this._productComposerOnSavingClose.bind(this),onDeleteButtonClick:this._productComposerOnDelete.bind(this),onDuplicateButtonClick:this._productComposerOnDuplicate.bind(this),onBetaOptOutButtonClick:this.switchEditor.bind(this)},externalYUIModules:{additionalInfoConstructor:w.Squarespace.DialogFields.Layout,dialog:this.get("dialog")}}));this._increaseZIndexBaseForProductComposer();this._wrappedProductComposer.show();return}a.superclass.show.call(this)},_increaseZIndexBaseForProductComposer:function(){this.ORIGINAL_Z_INDEX_BASE||(this.ORIGINAL_Z_INDEX_BASE=w.Squarespace.DIALOG_ZINDEX_BASE);w.Squarespace.DIALOG_ZINDEX_BASE+=5e5},_resetZIndexBaseAfterClosingProductComposer:function(){this.ORIGINAL_Z_INDEX_BASE&&(w.Squarespace.DIALOG_ZINDEX_BASE=this.ORIGINAL_Z_INDEX_BASE)},_productComposerOnNonSavingClose:function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this._resetZIndexBaseAfterClosingProductComposer();this.fire("nonSavingClose")},_productComposerOnSavingClose:function(e){this._wrappedProductComposer&&this._wrappedProductComposer.close();this._resetZIndexBaseAfterClosingProductComposer();if(e&&e.name){var t=this.get("model");t.set("title",e.name)}this.fire("savingClose")},_productComposerOnDelete:function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this._removeItem(this.get("model"));this.fire("savingClose")},_productComposerOnDuplicate:function(e){var a=new w.Squarespace.Models.ContentItem(e);w.Squarespace.ContentCollectionCache.getCollectionById(a.get("collectionId"),function e(t){t.items.add(a)});var t=w.Squarespace.ContentItemEditorFactory.getEditor(a);var i=new t({model:a,isDuplicateItemEditor:true});this._wrappedProductComposer.close();i.show()},switchEditor:function(){P().then(function(){if(this._wrappedProductComposer){this._wrappedProductComposer.close();this._resetZIndexBaseAfterClosingProductComposer()}var e=this.get("model");var t=w.Squarespace.ContentItemEditorFactory.getEditor(e);var a=new t({model:e});a.show();this.get("dialog").dismiss()}.bind(this)).catch(function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this.get("dialog").dismiss()}.bind(this))},_onReady:function(e){var t=this.get("dialog");var a=this.get("model");var i=a.get("productType")||a.get("structuredContent").get("productType");var n=a.get("collectionId");var s=a.get("id");var r=a.get("categoryIds");var o=x.isFeatureEnabled(F.NESTED_CATEGORIES);if(o){var l=t.mainEl.one(".name-categories");var c='<div id="nested-categories-container"></div>';var d=w.Node.create(c);l.insert(d,"after");l.remove(true);this._wrappedNestedCategoriesEditor=new L({container:d.getDOMNode(),productModel:a,requestCloseOriginatingModal:function(e){e()},onTreeRefresh:function(e){B.updateNestedCategories(n,e)}});this._wrappedNestedCategoriesEditor.show()}var u="gift_card_banner_dismissed";if(i===I.GIFT_CARD&&!A.isFeatureGated(T.COVID_TEMP_GIFT_CARDS_MESSAGING)&&"true"!==H.get(u)){var g=t.mainEl.one(".sqs-dialog-wysiwyg-content");var p=w.Node.create("<div />");g.appendChild(p);this._giftCardBanner=new N({container:p.getDOMNode(),onClose:function(){H.set(u,true)}});this._giftCardBanner.render()}if(!this._isNew&&R()&&i===I.PHYSICAL){var h=w.Node.create("<div />");this.get("dialog").mainEl.appendChild(h);this._wrappedBetaSwitchingButton=new O({container:h.getDOMNode(),toggleBetaOptIn:this.switchEditor.bind(this),hideYUIModal:function(){var e=t.mainEl.ancestor();e.removeClass("visible")},showYUIModal:function(){var e=t.mainEl.ancestor();e.addClass("visible")},productId:this.get("model").get("id"),productName:this.get("model").get("title"),productType:this.get("model").get("productType")});this._wrappedBetaSwitchingButton.show()}var f=t.mainEl.one(".name-starred");var m='<div id="related-products-container"></div>';var v=w.Node.create(m);f.insert(v,"after");this._wrappedRelatedProductsEditor=new D({setRelatedAttrsInYUI:this._setRelatedAttrsInYUI.bind(this),container:v.getDOMNode(),model:{collectionId:n,websiteId:window.Static.SQUARESPACE_CONTEXT.website.id,productId:s,categoryIds:r}});var b=this.get("model");V.trackOpenProductEditor({productId:b.get("id"),productName:b.get("title"),productType:z(b.get("productType")),productEditor:Y});var y=t.getField("pricingPlaceholder");var S=t.getField("customAddButtonText");var q=t.getField("useCustomAddButtonText");var _=t.getField("isSubscribable");var C=t.getField("subscriptionDetails");var E=false;y.on("clicked",function(e){t.activateTab(t.params.tabs[1])});q.on("dataChange",function(e){S.set("visible",e.newVal)},this);var k=t.getField("title");k&&k.after("dataChange",this._updateSeoTitle,this);S.set("visible",q.get("data"));if(_){C.set("visible",_.get("data"));this._toggleDeleteWarning(_.get("data"));_.on("dataChange",function(e){if(E)E=!E;else if(e.newVal){E=!E;this._onSubscriptionSettingsChangeRequest(_,C,e.prevVal)}C.set("visible",e.newVal&&!E)},this);_.after("dataChange",function(){this._toggleDeleteWarning(_.get("data"))},this);C.on("clicked",function(){E=true;this._onSubscriptionSettingsChangeRequest(_,C,true)},this)}},_updateSeoTitle:function(e){M.updateFieldNoEdit("title",e.newVal)},_setRelatedAttrsInYUI:function(e,t){var a=this.get("model");var i=a.get("structuredContent");switch(t){case U.CATEGORIES:var n=x.isFeatureEnabled(F.NESTED_CATEGORIES);n?i.setAttrs({relatedCategoryIds:e,relatedProductsStrategy:U.CATEGORIES}):i.setAttrs({relatedCategories:e,relatedProductsStrategy:U.CATEGORIES});break;case U.TAGS:i.setAttrs({relatedTags:e,relatedProductsStrategy:U.TAGS});break;case U.OFF:i.setAttrs({relatedProductsStrategy:U.OFF});break;default:i.setAttrs({relatedProductsStrategy:U.FIRST_CATEGORY})}},_onSubscriptionSettingsChangeRequest:function(e,t,a){var i=this._createSubscriptionSettingsDialog();var n=false;i.show();i.on("send-requested",function(){n=true;return this._onSubscriptionSettingsSendRequested.call(this,i,t)},this);i.on("button-upgrade",function(){var e=p.isTrial()?g.TRIAL_UPGRADE_PLAN:g.UPGRADE_PLAN;w.Squarespace.Singletons.Location.go(o[e])},this);c.shouldSeeUpsell()&&(this.get("dialog").params.discardChangesConfirmation=false);i.after("dismiss",function(){this.get("dialog").params.discardChangesConfirmation=true;n?e.set("data",true):e.set("data",a)},this)},_onSubscriptionSettingsSendRequested:function(e,t){var a=e.getField("period-magnitude");var i=a.getValue();if(!S(i)){a.showError(l("Copy needed here"));e.allowEditing();return}if(i<=0){a.showError(l("Amount must be greater than 0"));e.allowEditing();return}var n=W[e.getField("period-unit").getValue()];if(i>n){a.showError(l("Amount must be less than or equal to {max_value}",{max_value:n}));e.allowEditing();return}this._addSubscription(e.getData(),t);e.close()},_createSubscriptionFrequencyOptions:function(){var e=G;var t=[];e.forEach(function(e){t.push({value:e,label:e.toString()})});return t},_createSubscriptionSettingsDialog:function(){var e=this.get("model").get("subscriptionPlan");var t=this._createSubscriptionFrequencyOptions();var a=l("Any changes made to your subscription product will only affect new subscribers. Please ensure you comply with any laws applicable to your subscriptions.");var i="<a href="+u.COMMERCE_SUBSCRIPTIONS+' target="_blank">'+l("Learn more")+"</a>";var n=[];var s=c.shouldSeeUpsell();s&&n.push({ctor:w.Squarespace.DialogFields.FeatureGateMenu,config:{learnMoreUrl:u.COMMERCE_SUBSCRIPTIONS,analyticsId:"commerce-edit-subscriptions-dialog",feature:T.COMMERCE_SUBSCRIPTIONS}});n.push({ctor:w.Squarespace.DialogFields.Description,config:{text:l("Create a subscription to charge your customers on a recurring basis.")}},{type:"splitter",fields:[{ctor:w.Squarespace.DialogFields.Select,config:{name:"period-magnitude","strings.title":l("Repeats every"),data:b(e,"billingPeriod.value",1),numeric:true,options:t,width:.52}},{ctor:w.Squarespace.DialogFields.Select,config:{name:"period-unit",defaultValue:b(e,"billingPeriod.unit",d.MONTH),options:[{value:d.WEEK,label:l("Weeks")},{value:d.MONTH,label:l("Months")}],width:.52}}]},{ctor:w.Squarespace.DialogFields.Select,config:{name:"total-cycles","strings.title":l("Billing Cycles"),defaultValue:b(e,"numBillingCycles")||0,numeric:true,options:[{value:0,label:l("Ongoing Payments")}].concat(q(2,53).map(function(e){return{value:e,label:l("{i} Payments",{i:e.toString()})}}))}},{ctor:w.Squarespace.DialogFields.Description,config:{text:a+" "+i,className:"warning-text"}});var r={type:"upgrade",title:l("Upgrade")};var o={title:l("Save"),type:"save"};return new w.Squarespace.EditingDialog({width:400,project:"scripts-v6.content-item-types",title:l("Edit Subscription Settings"),closeOthers:false,overlay:true,name:"subscription-settings",fields:n,discardChangesConfirmation:!s,buttons:[{title:l("Cancel"),type:"cancel"},s?r:o]})},_createCustomerAccountsWarning:function(){var e='<a href="'+u.COMMERCE_SUBSCRIPTIONS+'" target="_blank">'+l("Learn more")+"</a>";var t=[{ctor:w.Squarespace.DialogFields.Description,config:{text:l("Subscriptions require Customer Accounts to be on so that your customers may manage their subscriptions.")+" "+e}}];return new w.Squarespace.EditingDialog({width:350,project:"scripts-v6.content-item-types",title:l("Connect Customer Accounts"),closeOthers:false,overlay:true,name:"customer-accounts-warning",fields:t,buttons:[{title:l("Dismiss"),type:"dismiss"},{title:l("Enable"),type:"enable"}]})},_addSubscription:function(e,t){var a=y(this.get("model").get("subscriptionPlan"),{billingPeriod:{value:e["period-magnitude"],unit:e["period-unit"]},numBillingCycles:e["total-cycles"]});this.get("model").set("subscriptionPlan",a);t.set("data",a)},_removeSubscription:function(e){this.get("model").set("subscriptionPlan",null)},_onCloseDismiss:function(e){var t=this.get("dialog");var a=t.getField("pricingPlaceholder");var i=t.getField("useCustomAddButtonText");t.detach("ready",this._onReady,this);t.detach("duplicate",this._onDuplicate,this);t.detach("tab-focused",this._afterTabFocused,this);a&&a.destroy(true);i&&i.destroy(true);this._wrappedNestedCategoriesEditor&&this._wrappedNestedCategoriesEditor.destroy();if(this._wrappedProductComposer){this._wrappedProductComposer.close();this._wrappedProductComposer.destroy()}this._wrappedBetaSwitchingButton&&this._wrappedBetaSwitchingButton.destroy();this.fire("close")},_afterDismiss:function(e){var t=this.get("dialog");var a=this.get("model");var i=h.getState();i.storeSettings.merchandisingSettings.restockNotificationsEnabled&&this._displayWaitlistNotificationIfAvailable();var n={productId:a.get("id"),productName:a.get("title"),productType:z(a.get("productType")),productEditor:Y};if(t._isState("SAVING"))if(this._isNew){V.trackAddProduct(n);f.grantAchievement(r.PRODUCT_CREATED)}else{V.trackSaveProductEditor(n);s.saveCollectionItem({itemId:n.productId,collectionType:"products",collectionId:a.get("collectionId")})}else if(a.get("workflowState")===w.Squarespace.WorkflowStates.DELETED){V.trackDeleteProduct(n);s.deleteCollectionItemFromModal({itemId:n.productId,collectionType:"products",collectionId:a.get("collectionId")})}else{V.trackCloseWithoutSavingProductEditor(n);this.isDuplicating?this.isDuplicating=false:s.cancelEditCollectionItem({itemId:n.productId,collectionType:"products",collectionId:a.get("collectionId")})}},_displayWaitlistNotificationIfAvailable:function(){var e=i.getInStockVariantIds(this.get("model").get("variants"));if(!e.length)return;var a=this.get("model").get("title");n.fetchTotalEmailCountForVariants(this.get("model").get("id"),e).then(function(e){if(e>0){var t=l("You have waitlist signups for {productTitle}.",{productTitle:a});m.present({text:t,accessories:[{text:l("View"),onPress:this._routeToWaitlistPanel},{component:v.getCloseIcon()}]})}}.bind(this))},_validateCustomerAccounts:function(){var a=this.get("dialog");var e=a.getField("isSubscribable");if(!e)return true;var t=e.get("data");if(t){_.get().then(function(e){if(e.data.userAccountsEnabled)a.save();else{var t=this._createCustomerAccountsWarning();t.show();t.on("button-enable",this._routeToCustomerAccounts,this);t.on("button-dismiss",function(){t.cancel();this._dismissCustomerAccountsWarning()},this)}}.bind(this)).catch(function(e){throw new Error("Unable to fetch customer accounts data")});return false}},_dismissCustomerAccountsWarning:function(){var e=this.get("dialog");var t=e.getField("workflow");var a=(new Date).getTime();t.set("data",{state:"draft",date:a});e.save()},_routeToCustomerAccounts:function(){var e=this.get("dialog");e.clearEdited();w.Squarespace.Singletons.Location.go("/config/commerce/customer-accounts")},_routeToWaitlistPanel:function(){w.Squarespace.Singletons.Location.go("/config/commerce/waitlists/")},_afterTabFocused:function(e){var t=this.get("dialog");var a=this.get("model");V.trackChangeTabProductEditor({productId:a.get("id"),productName:a.get("title"),productType:z(a.get("productType")),tabName:e.tabName,productEditor:Y});if("options"===e.tabName&&this._wrappedRelatedProductsEditor){var i=t.getData();var n=x.isFeatureEnabled(F.NESTED_CATEGORIES);this._wrappedRelatedProductsEditor.setExistingTags(i?i.tags:[]);n?this._wrappedRelatedProductsEditor.setExistingCats(i?i.categoryIds:[]):this._wrappedRelatedProductsEditor.setExistingCats(i?i.categories:[]);this._wrappedRelatedProductsEditor.show()}},_toggleDeleteWarning:function(e){e?this.set("extendedDeleteMessage","<br><br>"+l("Deleting this product will not delete any of its active subscriptions. Customers on this subscription will still be charged on a recurring basis. You will need to cancel each active subscription for this to take full effect.")):this.set("extendedDeleteMessage","")},_onDuplicate:function(e){this.isDuplicating=true;var t=this.get("model");V.trackAddProduct({productId:t.get("id"),productName:t.get("title"),productType:z(t.get("productType")),productEditor:Y});V.trackDuplicateProduct({oldProductId:t.get("id"),newProductId:e.get("id"),productName:t.get("title"),productType:z(t.get("productType")),productEditor:Y});s.duplicateCollectionItem({itemId:t.get("id"),collectionType:"products",collectionId:t.get("collectionId")})},_removeItem:function(e){if(!e.get("id")){this.get("dialog").close();return}e.set("workflowState",w.Squarespace.WorkflowStates.DELETED);e.sync("delete",{},w.bind(function(){this.saving=true;this.get("dialog").close();this.saving=false},this))},getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.customAddButtonText=t.customAddButtonText;e.useCustomAddButtonText=t.useCustomAddButtonText;e.additionalFieldsForm=t.additionalFieldsForm;e.additionalFieldsFormId=t.additionalFieldsFormId;e.isSubscribable=t.isSubscribable;e.subscriptionDetails=t.subscriptionPlan;e.relatedCategories=t.relatedCategories;e.relatedCategoryIds=t.relatedCategoryIds;e.relatedTags=t.relatedTags;e.relatedProductsStrategy=t.relatedProductsStrategy;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent=w.merge(e.structuredContent,{customAddButtonText:e.customAddButtonText,useCustomAddButtonText:e.useCustomAddButtonText,additionalFieldsFormId:e.additionalFieldsFormId,isSubscribable:e.isSubscribable,subscriptionPlan:e.subscriptionDetails,relatedCategories:this.get("model").get("structuredContent").get("relatedCategories"),relatedCategoryIds:this.get("model").get("structuredContent").get("relatedCategoryIds"),relatedTags:this.get("model").get("structuredContent").get("relatedTags"),relatedProductsStrategy:this.get("model").get("structuredContent").get("relatedProductsStrategy")});e.subscriptionPlan=e.subscriptionDetails;delete e.customAddButtonText;delete e.useCustomAddButtonText;delete e.additionalFieldsFormId;delete e.isSubscribable;delete e.subscriptionPlan;delete e.relatedCategories;delete e.relatedCategoryIds;delete e.relatedTags;delete e.relatedProductsStrategy;return e},getPresentationName:function(){throw new Error("Must implement a Presentation Name for this product type")}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-content-item-types-base","squarespace-dialog-feature-gate-menu","squarespace-dialog-numeric-text","squarespace-models-form","squarespace-util"]})},7935:function(e,t,a){var i=a(0);var n=a(60);var s=a(5815);var r=a(651);var o=a(6663);YUI.add("squarespace-dialog-feature-gate-menu",function(e){e.namespace("Squarespace.DialogFields");var a=e.Squarespace.DialogFields.FeatureGateMenu=e.Base.create("FeatureGateMenuField",e.Squarespace.DialogField2,[],{destructor:function(){if(this.upsellMenuEl){n.unmountComponentAtNode(this.upsellMenuEl);this.upsellMenuEl.remove();this.upsellMenuEl=null;this.upsellMenu=null}},renderUI:function(){a.superclass.renderUI.call(this);var e=r.isTrial();this.upsellMenuEl=document.createElement("span");var t=o.getUpsellCopy(this.get("feature"));this.upsellMenu=n.render(i.createElement(s,{isTrial:e,analyticsId:this.get("analyticsId"),learnMoreUrl:this.get("learnMoreUrl"),upgradeTitle:t.upgradeTitle,upgradeDescription:t.upgradeDescription,upgradeCta:t.upgradeCta,knockout:true}),this.upsellMenuEl);this.get("contentBox").one(".dialog-field-feature-gate-menu").append(this.upsellMenuEl)},bindUI:function(){a.superclass.bindUI.call(this)},syncUI:function(){a.superclass.syncUI.call(this)},setLearnMoreUrl:function(e){this.set("learnMoreUrl",e)},setAnalyticsId:function(e){this.set("analyticsId",e)},setFeature:function(e){this.set("feature")}},{CSS_PREFIX:"sqs-feature-gate-menu-field",TEMPLATE:'<div class="dialog-field-feature-gate-menu"></div>',ATTRS:{learnMoreUrl:{value:""},analyticsId:{value:""},feature:{value:null}}});e.Squarespace.DialogFields.FeatureGateMenuField=e.Squarespace.DialogFields.FeatureGateMenu},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},7936:function(e,t,a){var r=a(24).t;var o=a(309);var l=a(596);var c=a(5806);YUI.add("squarespace-content-item-types-product-giftcard",function(t){var a=r("Purchasing this digital gift card creates a unique code. The gift card recipient can enter this code at checkout to subtract the gift card value from their order total.");var i=r("This gift card never expires.");var n=[l.DRAFT,l.NEEDS_REVIEW];var e=t.merge({},c,{name:"editProduct",title:r("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productGiftCardPricingPlaceholder"}}},{$include:"tabs.product.variantsGiftCard"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:[{type:"cancel",title:r("Cancel")},{type:"remove",title:r("Delete")},{type:"saveAndClose",title:r("Save")},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:r("Save & Publish")},$when:function(e){return-1!==n.indexOf(e.workflowState)}}]});t.namespace("Squarespace.ContentItemEditor");var s=t.Squarespace.ContentItemEditor.ProductGiftCard=t.Base.create("ProductGiftCardContentItemEditor",t.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=s.superclass.getDialogData.call(this);if(!e.id){e.title=r("Gift Card");e.variants.variants=[t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(2500),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(5e3),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(7500),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(1e4)];e.useCustomAddButtonText=true;e.customAddButtonText=r("Purchase");e.excerpt={html:["<p>",a,"</p><p>",i,"</p>"].join(""),raw:true}}e.pricingPlaceholder={productType:o.GIFT_CARD,variants:e.variants.variants};return e},getPresentationName:function(){return r("Gift Card Product")},_onCloseDismiss:function(e){var t=this.get("dialog");t.detach("ready",this._onReady,this);t.detach("tab-focused",this._afterTabFocused,this);this.fire("close")}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-commerce-giftcard-utils","squarespace-content-item-types-product-variants"]})},7937:function(e,t,a){var n=a(5065);YUI.add("squarespace-content-item-types-product-variants",function(a){a.namespace("Squarespace.ContentItemEditor");var i=a.Squarespace.ContentItemEditor.ProductVariants=a.Base.create("ProductVariantsContentItemEditor",a.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var n=this.get("dialog");n.on("ready",function(){var e=n.getField("variants");if(!e)return;var t=n.getField("pricingPlaceholder");e.after("dataChange",function(e){t.set("data.variants",e.newVal.variants)},this);e.on("errors",function(){t.pulseWarn()},this);var a=n.getField("isSubscribable");a&&a.after("dataChange",function(e){var t=n.getField("variants");t.set("data.isSubscription",a.data)},this);var i=n.getField("title");i&&i.after("dataChange",this._updateSeoTitle,this)},this);this._originalStock=a.clone(this.get("model").get("variants"))},_updateSeoTitle:function(e){n.updateFieldNoEdit("title",e.newVal)},getDialogData:function(){var e=i.superclass.getDialogData.call(this);var t=e.structuredContent;e.variants={variants:t.variants,variantOptionOrdering:t.variantOptionOrdering};e.originalVariants=this._originalStock;return e},sanitizeDialogData:function(e){e=i.superclass.sanitizeDialogData.call(this,e);var t=e.variants;e.structuredContent=a.merge(e.structuredContent,{variants:t.variants,variantOptionOrdering:t.variantOptionOrdering});delete e.variants;return e}})},"1.0",{requires:["base","json","squarespace-commerce-utils","squarespace-content-item-types-product","squarespace-models-content-item","squarespace-models-content-collection","squarespace-upsell-product-violations","squarespace-widgets-confirmation"]})},7938:function(e,t,a){var i=a(24).t;var n=a(309);var s=a(5806);YUI.add("squarespace-content-item-types-product-physical",function(e){var t=e.merge({},s,{name:"editProduct",title:i("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsPhysical"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});e.namespace("Squarespace.ContentItemEditor");var a=e.Squarespace.ContentItemEditor.ProductPhysical=e.Base.create("ProductPhysicalContentItemEditor",e.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.pricingPlaceholder={productType:n.PHYSICAL,variants:e.variants.variants};e.subscriptionDetails=e.subscriptionPlan;return e},getPresentationName:function(){return i("Physical Product")}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-content-item-types-product-variants"]})},7939:function(e,t,a){var i=a(24).t;var n=a(309);var s=a(5806);YUI.add("squarespace-content-item-types-product-service",function(e){var t=e.merge({},s,{name:"editProduct",title:i("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsService"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});e.namespace("Squarespace.ContentItemEditor");var a=e.Squarespace.ContentItemEditor.ProductService=e.Base.create("ProductServiceContentItemEditor",e.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.pricingPlaceholder={productType:n.SERVICE,variants:e.variants.variants};e.subscriptionDetails=e.subscriptionPlan;return e},getPresentationName:function(){return i("Service Product")}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-content-item-types-product-variants"]})},7940:function(e,t,a){var i=a(24).t;YUI.add("squarespace-content-item-types-quote",function(e){var t={title:i("Edit {presentationName}"),width:800,height:450,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.quote"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor");var n=e.Squarespace.ContentItemEditor.Quote=e.Base.create("QuoteContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{getDialogData:function(){var e=n.superclass.getDialogData.apply(this,arguments);!e.quote&&e.structuredContent.quote&&(e.quote=e.structuredContent.quote);return e},sanitizeDialogData:function(e,t,a){var i=n.superclass.sanitizeDialogData.apply(this,arguments);i.structuredContent.quote=i.quote;delete i.quote;delete i.id;return i}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},7941:function(e,t,a){var i=a(24).t;var s=a(595);var r=a(1729);var o=a(1004);var l=a(596);var c=a(5065);var d=a(522);var u=a(1246);YUI.add("squarespace-content-item-types-text",function(t){t.namespace("Squarespace.ContentItemEditor");var e={title:i("Edit {presentationName}"),width:750,name:"text-post-editor",overlay:.5,verticalHeight:"full",initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.share"},{$include:"tabs.location"}],buttons:{$include:"buttons"}};var n=t.namespace("Squarespace.ContentItemEditor").Text=t.Base.create("TextContentItemEditor",t.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){n.superclass._dialogOnReady.apply(this,arguments);var e=this.get("dialog");var t=this.get("model");var a=t.get("workflowState");t.get("autoSaved")&&this._bindTitleToPostUrl();var i=e.getField("title");i.after("dataChange",this._updateSeoTitle,this);a!==l.DRAFT||o.isTutorialCompleted("CAMPAIGNS_BLOG_TO_EMAIL_MODAL")||e.on(["button-saveAndClose","button-saveAndPublish"],this._showBlogToEmailToast,this)},_updateSeoTitle:function(e){c.updateFieldNoEdit("title",e.newVal)},_bindTitleToPostUrl:function(){var e=this.get("dialog");var t=e.getField("title");var a=e.getField("urlId");if(t&&a){t.on("dataChange",function(e){var t=a.get("data").split("/");t[t.length-1]=s.createUrlWithSlash(e.newVal);a.set("data",t.join("/"))},this);e.once(["close","dismiss"],function(e){this.get("model").set("autoSaved",false)},this)}},_removeItem:function(e){this.set("onlySetAttrsOnSave",true);this.save(null,function(){e.set("workflowState",t.Squarespace.WorkflowStates.DELETED);e.save()});this.set("onlySetAttrsOnSave",false)},getPresentationName:function(){return i("Post")},_getTemplateContext:function(){var e=n.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enablePassthrough=true;e.enableExcerpt=true;return e},_showBlogToEmailToast:function(){var t=this.get("model");t.once("save",function(){var e=t.toJSON();e.workflowState===l.PUBLISHED&&r.showDraftCreationModal({id:e.id,collectionId:e.collectionId,postUrl:e.fullUrl})})},_confirmAndDuplicate:function(){if(!d.isSevenOne())return n.superclass._confirmAndDuplicate.apply(this,arguments);u.duplicateBlogPost()}},{ATTRS:{editorConfiguration:{value:e},"strings.errorTitle":{value:i("Error Saving")}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-content-item-types-post-editors"]})},7942:function(e,t){YUI.add("squarespace-content-item-types-post-editors",function(e){},"1.0",{requires:[]})},7943:function(e,t,a){var s=a(24).t;var r=a(4129);var o=a(2021);YUI.add("squarespace-content-item-types-video",function(l){var e=l.Base.create("VideoPostEditorBehavior",l.Base,[],{initializer:function(){var s=this.get("model");if(s.get("recordType")!==l.Squarespace.Enums.RecordType.VIDEO)return;var r=this.get("dialog");var o;r.on("ready",function(){var e=r.getField("oembed");var t=r.getField("mainImage");var i=r.getField("title");var n=r.getField("sourceUrl");e.focus();e.on("dataChange",function(a){n&&n.set("data",a.newVal.url);i.set("data",a.newVal.title);o&&o.cancel();o=l.later(1e3,this,function(){var e=a.newVal;if(e.thumbnailUrl)if(s.get("id"))e.thumbnailUrl&&this._applyDefaultThumbnailImage();else{s.autoSave();var t=r.getField("mainImage");t.get("data").after("idChange",function(){this._applyDefaultThumbnailImage()},this)}})},this);t.after("dataChange",this._syncThumbnailRestore,this);this._syncThumbnailRestore()},this)},_applyDefaultThumbnailImage:function(){var e=this.get("dialog");var t=e.getField("oembed").getValue().thumbnailUrl;e.getField("mainImage").saveFromUrl(t);e.getField("overlay").set("data",true)},_syncThumbnailRestore:function(){this._thumbnailRestoreEv&&this._thumbnailRestoreEv.detach();var e=this.get("dialog");var t=e.getField("oembed");var a=e.getField("mainImage");var i=e.getField("automaticThumbDescription");if(t.getValue()&&t.getValue().thumbnailUrl&&(!a.get("data")||a.get("data")&&!a.get("data").get("hasFileData"))){i.setText('<a href="#" class="restore-thumbnail">'+s("Restore video provider's thumbnail.")+"</a>");this._thumbnailRestoreEv=i.get("boundingBox").one(".restore-thumbnail").on("click",function(e){e&&e.halt();this._applyDefaultThumbnailImage()},this)}else i.setText("")}});var t={name:"video-editor",title:s("Edit {presentationName}"),width:800,height:530,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.video"]},{$include:"tabs.options.video"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"},initialDataByReference:true};var a=l.namespace("Squarespace.ContentItemEditor").Video=l.Base.create("VideoContentItemEditor",l.Squarespace.ContentItemEditor.Base,[e],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.oembed=t.oembed;e.overlay=t.overlay;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent=l.merge(e.structuredContent,{oembed:e.oembed,overlay:e.overlay});delete e.oembed;delete e.overlay;return e},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;return e}},{ATTRS:{editorConfiguration:{value:t}}});var i={title:s("Edit {presentationName}"),name:"minimal-video-editor",width:800,height:454,overlay:.5,closeOthers:false,style:"flyout",flyoutPointerDirection:"hidden",tabs:[{$include:["tabs.primary.video",{icon:r.getIconUrl("video",16,"light-solid")}],$update:{".body":{ctor:l.Squarespace.DialogFields.Wysiwyg,config:{name:"body",type:o.SchemaTypes.CLASSIC,editorHeight:147,classNames:"major",title:s("Description"),description:""}}}}],buttons:[{type:"cancel",title:s("Cancel")},{type:"remove",title:{$valueFn:function(e){return e.id?s("Remove"):s("Discard")}}},{$value:{type:"duplicate",title:s("Duplicate")},$when:function(e){return e.recordType===l.Squarespace.Enums.RecordType.STORE_ITEM}},{type:"saveAndClose",title:s("Save")}]};var n=l.namespace("Squarespace.ContentItemEditor").VideoMinimal=l.Base.create("VideoContentItemEditorMinimal",a,[],{},{ATTRS:{editorConfiguration:{value:i},anchorNode:{getter:function(){return null}}}});l.Squarespace.ContentItemEditor.VideoMinimalGlobal=l.Base.create("VideoContentItemEditorMinimalGlobal",n,[],{_getTemplateContext:function(){var e=this.get("model").toJSON();e.presentationName=this.getPresentationName();e.model=this.get("model");e.editor=this;return e}},{})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-wysiwyg"]})},7944:function(e,t){window.YUI_CONFIG={base:"/universal/yui3/3.17.2/",allowRollup:false,combine:false,fetchCSS:false,bootstrap:false};SQUARESPACE_ROLLUPS=window.SQUARESPACE_ROLLUPS||{}},7946:function(e,t,a){a(9125);YUI.add("squarespace-common",function(e){},"1.0",{requires:["get","intl","@sqs/layout-engine/aspect-ratio-manager","squarespace-promises","squarespace-attr-validators","squarespace-commerce-utils","squarespace-cookie-banner-styles","squarespace-currency-symbols","squarespace-deprecated-modules","squarespace-damask-context-globals","squarespace-escmanager","squarespace-follow-buttons","squarespace-form-submit","squarespace-gallery","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-shopping-cart-facade","squarespace-plugin-lightbox2","squarespace-spinner","squarespace-ui-base","squarespace-util","squarespace-video-loader","squarespace-widgets-alert","squarespace-widgets-information","thirdparty-modernizr","yui-throttle"]})},7951:function(e,t){YUI.add("@sqs/layout-engine/aspect-ratio-manager",function(i){var e=i.Base.create("AspectRatioManager",i.Base,[],{initializeBlock:function(e,t){var a=t;i.Lang.isObject(a)&&(a=a.aspectRatio);if(i.Lang.isValue(a)){e.addClass("sqs-intrinsic");e.setStyle("paddingBottom",a+"%");e.one("> div")&&e.one("> div").addClass("sqs-intrinsic-content")}},destroyBlock:function(e){var t=e.one(".sqs-intrinsic");if(t){t.removeClass("sqs-intrinsic");t.setStyle("padding-bottom",null);t.one(".sqs-intrinsic-content")&&t.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content")}},initAllBlocks:function(){var e=i.all(".sqs-block[data-aspect-ratio]:not(.sqs-block-image)");e.each(function(e){i.SQS.LayoutEngine.AspectRatioManager.initializeBlock(e.one(".sqs-block-content"),i.JSON.parse(e.getAttribute("data-aspect-ratio")))},this)}});i.namespace("SQS.LayoutEngine");i.SQS.LayoutEngine.AspectRatioManager=new e;i.config.win.Squarespace&&i.config.win.Squarespace.onInitialize&&i.config.win.Squarespace.onInitialize(i,i.SQS.LayoutEngine.AspectRatioManager.initAllBlocks)},"1.0",{requires:["base"]})},7963:function(e,t){YUI.add("squarespace-promises",function(l){function a(){}var e=l.namespace("Squarespace.Promises");e.all=function(){var e=new l.Array(arguments);return new l.Promise(function(a,i){var n=[];var s=e.length;var r=0;var o=function(t){return function(e){r++;n[t]=e;r>=s&&a(n)}};if(0===s)return a([]);l.Array.each(e,function(e,t){l.when(e).then(o(t),i)})})};e.resolve=function(e,t){return e.then(t)};e.reject=function(e,t){return e.then(a,t)};e.rejectWith=function(a){return l.Squarespace.Promises.create(function(e,t){t(a)})};e.finish=function(e,t){return e.then(t,t)};e.chainFns=function(a,i){return function(){i=i||this;var e=a.length>0?a.shift().apply(i,arguments):l.when();var t=function(e,t){return l.Squarespace.Promises.resolve(l.when(e),l.bind(t,i))};return l.Array.reduce(a,e,t)}};e.create=function(e,t){return new l.Promise(l.bind(e,t))}},"1.0",{requires:["promise"]})},7966:function(e,t,a){YUI.add("squarespace-attr-validators",function(n){n.namespace("Squarespace");function s(e,t,a,i){var n;false}var t=n.Squarespace.AttrValidators={isBoolean:function(e,t){if(!n.Lang.isBoolean(e)){s.call(this,"boolean",e,t);return false}return true},isNumber:function(e,t){if(!n.Lang.isNumber(e)){s.call(this,"number",e,t);return false}return true},isString:function(e,t){if(!n.Lang.isString(e)){s.call(this,"string",e,t);return false}return true},isNonArrayObject:function(e,t){if(n.Lang.isArray(e)){s.call(this,"Array",e,t,"[{attrName}] Validation Error: Expected {expectedVal}, got Array instead.");return false}if(!n.Lang.isObject(e)){s.call(this,"Object",e,t);return false}return true},isObject:function(e,t){if(!n.Lang.isObject(e)){s.call(this,"Object",e,t);return false}return true},isArray:function(e,t){if(!n.Lang.isArray(e)){s.call(this,"Array",e,t);return false}return true},isFunction:function(e,t){if(!n.Lang.isFunction(e)){s.call(this,"Function",e,t);return false}return true},isNode:function(e,t){if(!n.instanceOf(e,n.Node)){s.call(this,"Node",e,t);return false}return true},isNodeList:function(e,t){if(!n.instanceOf(e,n.NodeList)){s.call(this,"NodeList",e,t);return false}return true},isNullOr:function(a){if(!n.Lang.isFunction(a)){console.error("The validator function argument is required.");return false}return function(e,t){if(n.Lang.isNull(e))return true;return a(e,t)}},isInstanceOf:function(a){if(!a){false;return false}if(n.Lang.isString(a)){a=a.split(".");return function(e,t){if(e instanceof n.Squarespace.Damask.ContextGlobals.fromTop(a)||e instanceof n.Squarespace.Damask.ContextGlobals.fromFrame(a))return true;s.call(this,a.join("."),e,t,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}.");return false}}return function(e,t){if(e instanceof a)return true;s.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}.");return false}},isExtensionOf:function(i){if(!n.Lang.isFunction(i)){false;return false}return function(e,t){var a=n.Lang.isFunction(e.prototype._getClasses)&&e.prototype._getClasses();if(a&&-1!==n.Array.indexOf(a,i))return true;s.call(this,i,e,t,"[{attrName}] Validation Error: {actualVal} is not an extension of the {expectedVal}.");return false}},isTypeOf:function(a){if(!a){false;return false}return function(e,t){if(typeof e===a)return true;s.call(this,a,e,t,'[{attrName}] Validation Error: {actualVal} is not of type "{expectedVal}".');return false}},isValueIn:function(a){if(!n.Lang.isObject(a)){false;return false}if(n.Lang.isArray(a))return function(e,t){if(-1!==n.Array.indexOf(a,e))return true;s.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}");return false};return function(e,t){if(-1!==n.Object.values(a).indexOf(e))return true;s.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}");return false}}};t.isNullOrInstanceOf=function(e){return t.isNullOr(t.isInstanceOf(e))};t.isNullOrExtensionOf=function(e){return t.isNullOr(t.isExtensionOf(e))};t.isNullOrOfType=function(e){return t.isNullOr(t.isTypeOf(e))};t.isNullOrValueIn=function(e){return t.isNullOr(t.isValueIn(e))};t.isDate=t.isInstanceOf(Date);t.isNullOrString=t.isNullOr(t.isString);t.isNullOrDate=t.isNullOr(t.isDate);t.isNullOrBoolean=t.isNullOr(t.isBoolean);t.isNullOrNumber=t.isNullOr(t.isNumber);t.isNullOrObject=t.isNullOr(t.isObject);t.isNullOrNonArrayObject=t.isNullOr(t.isNonArrayObject);t.isNullOrArray=t.isNullOr(t.isArray);t.isNullOrFunction=t.isNullOr(t.isFunction);t.isNullOrNode=t.isNullOr(t.isNode);t.isNullOrNodeList=t.isNullOr(t.isNodeList)},"1.0",{requires:["squarespace-damask-context-globals"]})},7967:function(e,t,a){YUI.add("squarespace-damask-context-globals",function(a){a.namespace("Squarespace.Damask");a.Squarespace.Damask.ContextGlobals={isDamask:function(){return a.Lang.isValue(CONFIG_PANEL)},frameWindow:function(){if(!a.Lang.isValue(a.config.win.frames["sqs-site-frame"])){console.warn("[ContextGlobals] frameWindow method called from a non-damask frame.");return a.config.win}return CONFIG_PANEL.getFrameContentWindow()},topWindow:function(){var e=a.config.win;try{a.Lang.isValue(e.frameElement)&&"sqs-site-frame"===e.frameElement.id&&(e=e.parent)}catch(e){}return a.one(e)},fromFrame:function(e){var t=this.frameWindow();if(a.Lang.isValue(e)){if(a.Lang.isArray(e))return a.Object.getValue(t.get(e[0]),e.slice(1));return t.get(e)}return t},fromTop:function(e){var t=this.topWindow();if(a.Lang.isValue(e)){if(a.Lang.isArray(e))return a.Object.getValue(t.get(e[0]),e.slice(1));return t.get(e)}return t},get:function(e){if(this.isDamask())return this.fromFrame(e);return this.fromTop(e)},getWindow:function(){if(this.isDamask())return this.frameWindow();return this.topWindow()},relative:function(e,t){if(this.isDamask()){var a=this.fromFrame("Y");if(e.inDoc(a.config.doc))return this.fromFrame(t)}var i=this.fromTop("Y");if(e.inDoc(i.config.doc))return this.fromTop(t);false;return null}}},"1.0",{requires:[]})},7968:function(e,t,a){var i=a(128);var n=a(4193);var l=a(309);var s=a(596);var d=a(24).t;var r=a(2026);var o=a(1005);var u=a(1310);var g=a(43);var p=a(285);YUI.add("squarespace-commerce-utils",function(c){c.namespace("Squarespace");c.Squarespace.Commerce={COMMERCE_DATE_TIME_FORMAT:"lllLT",isExpressCheckout:function(){return Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.expressCheckout},measurementStandard:function(){return c.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","storeSettings","measurementStandard"])},weightUnit:function(){return this.measurementStandard()===n.IMPERIAL?"lbs":"kg"},dimensionUnit:function(){return this.measurementStandard()===n.IMPERIAL?'"':"cm"},maxes:function(){return{productPrice:1e8,skuStringLength:60}},goToCheckoutPage:function(){if(!("true"===i.get("hasCart")||c.Lang.isValue(i.get("CART")))){alert(d("Either your session has expired or you do not have cookies enabled. We cannot continue to checkout."));return}window.top.location="/commerce/goto-checkout"},goToSubscriptionPage:function(e){if(!e)return;window.top.location="/checkout/subscribe?cartToken="+e},goToDonatePage:function(e){var t="/checkout/donate?donatePageId="+e;c.Squarespace.Utils.isInDamaskFrame()?window.top.location=t:window.location=t},goToGiftCardPage:function(e,t){e=encodeURIComponent(e);var a=t?encodeURIComponent(t.sku):null;var i=Static.SQUARESPACE_CONTEXT.website.id;var n="/checkout/giftcard?websiteId="+i+"&giftCardProductId="+e+(t?"&sku="+a:"");c.Squarespace.Utils.isInDamaskFrame()?window.top.location=n:window.location=n},isValidUSZip:function(e){return/^\d{5}$/.test(e)},variantFormat:function(e,t){var a=[];var i=e.optionValues;for(var n=0;n<i.length;n++){var s=i[n].value;a.push(t?s:c.Escape.html(s))}return a.join(" / ")},moneyString:function(e,t){false;var a=u.getStoreCurrency();var i=r.fromCents(e,a);var n={trimZeroFractions:t};return o.formatter.format(i,n)},priceString:function(e){var t=this.normalPrice(e);var a=e.structuredContent;switch(a.productType){case l.PHYSICAL:case l.SERVICE:if(this.onSale(e)){if(this.variedPrices(e))return d("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(e))});return this.moneyString(this.salePrice(e))+' <span class="original-price">'+this.moneyString(t)+"</span>"}if(this.variedPrices(e))return d("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(e))});return this.moneyString(t);case l.DIGITAL:if(this.onSale(e))return this.moneyString(this.salePrice(e))+' <span class="original-price">'+this.moneyString(t)+"</span>";return this.moneyString(t);case l.GIFT_CARD:if(this.variedPrices(e))return d("from {startingPrice}",{startingPrice:this.moneyString(t)});return this.moneyString(t);default:break}},isFiniteSubscriptionPlan:function(e){return!!Number(e.numBillingCycles)},merchantSubscriptionDetailsString:function(e){if(!e)return"";var t=e.billingPeriod.value;var a=e.billingPeriod.unit.toLowerCase()+"ly";var i=this.isFiniteSubscriptionPlan(e);if(i)var n=e.numBillingCycles;return g({"magnitude == 1":{weekly:{indefinite:d("renews every week"),finite:d("renews every week for {p} payments",{p:n})},monthly:{indefinite:d("renews every month"),finite:d("renews every month for {p} payments",{p:n})},yearly:{indefinite:d("renews every year"),finite:d("renews every year for {p} payments",{p:n})}},"magnitude > 1":{weekly:{indefinite:d("renews every {n} weeks",{n:t}),finite:d("renews every {n} weeks for {p} payments",{n:t,p:n})},monthly:{indefinite:d("renews every {n} months",{n:t}),finite:d("renews every {n} months for {p} payments",{n:t,p:n})},yearly:{indefinite:d("renews every {n} years",{n:t}),finite:d("renews every {n} years for {p} payments",{n:t,p:n})}}},[1===t?"magnitude == 1":"magnitude > 1",a,i?"finite":"indefinite"])},getTotalStockRemaining:function(e){var t=e.structuredContent;if(t.productType===l.DIGITAL)return 1/0;var a=0;for(var i=0;i<t.variants.length;i++){var n=t.variants[i];if(n.unlimited)return 1/0;a+=n.qtyInStock}return a},summaryFormFieldString:function(a){var e;var t;c.Lang.isObject(a.values)&&(t=c.Array.reduce(c.Object.keys(a.values),{},function(e,t){return c.Object.setValue(e,t,c.Squarespace.Escaping.escapeForHtml(a.values[t]))}));function i(e){var t;switch(e){case"-2":t=d("Strongly Disagree");break;case"-1":t=d("Disagree");break;case"0":t=d("Neutral");break;case"1":t=d("Agree");break;case"2":t=d("Strongly Agree");break}return t}switch(a.type){case"name":e=t.First+" "+t.Last;break;case"phone":var n=t.Country;e="";n&&""!==n&&(e+="+"+n+" ");e+=t.Areacode+"-"+t.Prefix+"-"+t.Line;break;case"likert":e='<div style="padding-left:5px;">';for(var s in t){var r=t[s];e+='<div><span style="font-weight:bold;">'+s+":</span> "+i(r)+"</div>"}e+="</div>";break;case"address":e='<div style="padding-left:5px;"><div>'+t.Line1+"</div>";var o=t.Line2;o&&""!==o&&(e+="<div>"+o+"</div>");e+="<div>"+t.City+", "+t.State+" "+t.Zip+" "+t.Country+"</div></div>";break;case"date":e=t.Month+"/"+t.Day+"/"+t.Year;break;case"time":e=(t.Hour||"00")+":"+(t.Minute||"00")+":"+(t.Second||"00")+" "+t.Ampm;break;case"checkbox":var l=a.value;!c.Lang.isValue(t)&&c.Lang.isValue(l)?t=[l]:c.Lang.isValue(t)&&(t=c.Object.values(t));e=t.join(", ");break;default:e=c.Squarespace.Escaping.escapeForHtml(a.value);break}""===e&&(e=d("N/A"));return'<div style="margin-top:3px;"><span style="font-weight:bold;">'+a.rawTitle+":</span> "+e+"</div>"},hasVariants:function(e){var t=e.structuredContent;return t.productType!==l.DIGITAL&&t.variants.length>=1},variedPrices:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:case l.GIFT_CARD:var a=t.variants;if(a.length<=1)return false;var i=a[0];for(var n=1;n<a.length;n++){var s=a[n];if(s.onSale!==i.onSale||i.onSale&&s.salePrice!==i.salePrice||s.price!==i.price)return true}return false;case l.DIGITAL:return false}},onSale:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;var i=false;for(var n=0;n<a.length;n++){var s=a[n];if(s.onSale){i=true;break}}return i;case l.DIGITAL:return t.onSale}},soldOut:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;var i=true;for(var n=0;n<a.length;n++){var s=a[n];if(s.unlimited||s.qtyInStock>0){i=false;break}}return i;case l.DIGITAL:return false}},normalPrice:function(e){var t=e.structuredContent;var a=t.variants;switch(t.productType){case l.PHYSICAL:case l.SERVICE:if(0===a.length)return 0;var i=a[0].price;for(var n=1;n<a.length;n++){var s=a[n].price;s>i&&(i=s)}return i;case l.DIGITAL:return c.Lang.isUndefined(t.priceCents)?0:t.priceCents;case l.GIFT_CARD:return a[0].price;default:break}},salePrice:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;if(0===a.length)return 0;var i=null;for(var n=0;n<a.length;n++){var s=a[n];var r=s.salePrice;s.onSale&&(null===i||s.salePrice<i)&&(i=r)}return i;case l.DIGITAL:return c.Lang.isUndefined(t.salePriceCents)?0:t.salePriceCents}},fromPrice:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;if(0===a.length)return 0;var i=a[0];var n=i.onSale?i.salePrice:i.price;for(var s=1;s<a.length;s++){var r=a[s];var o=r.onSale?r.salePrice:r.price;o<n&&(n=o)}return n;case l.DIGITAL:return c.Lang.isUndefined(t.priceCents)?0:t.priceCents}},capitalizeFirst:function(e){e=e.toLowerCase();var t=e.split(new RegExp("\\s+"));var a=c.Array.map(t,function(e){return e.charAt(0).toUpperCase()+e.substr(1)});return a.join(" ")},generateVariantId:function(){return p()},generateSKU:function(){var e="",i="0123456789";var t=function(){var e="";for(var t=0;t<7;++t){var a=Math.floor(Math.random()*i.length);e+=i.charAt(a)}return"SQ"+e};e=t();return e},getLabelForWorkflowState:function(e){switch(e){case s.PUBLISHED:return d("Available");case s.SCHEDULED:return d("Scheduled");case s.DRAFT:return d("Hidden");default:return d("Unsupported")}}}},"1.0",{requires:["escape","node","squarespace-escaping-utils"]})},7984:function(e,t){YUI.add("squarespace-escaping-utils",function(e){e.namespace("Squarespace");e.Squarespace.Escaping={escapeForHtml:function(e){if(!e)return e;return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},escapeForHtmlTag:function(e){if(!e)return e;return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;")}}},"1.0",{requires:[]})},7985:function(e,t){YUI.add("squarespace-cookie-banner-styles",function(e){},"1.0",{requires:[]})},7986:function(e,t){YUI.add("squarespace-currency-symbols",function(e){},"1.0",{requires:[]})},7987:function(e,t,a){var l=a(43);var s=a(182);var c=a(2609);var n=a(1714);YUI.add("squarespace-deprecated-modules",function e(r){function t(t,a,i){return function e(){console.warn('[DEPRECATED] Called `Y."'+a+"`. "+i);n.measure("deprecated_yui_module_used",{detail:a});return t.apply(this,arguments)}}function o(e,t,a){var i=l(r,e);if(!s(i))return;var n=t(i,e,a);c(r,e,n)}function a(i,n,s){var e=l(r,i,{});Object.keys(e).forEach(function e(t){var a=[i,t].join(".");o(a,n,s)})}a("Cookie",t,"Use @sqs/cookie-cutter instead.")},"1.0",{requires:["cookie"]})},7989:function(e,t,a){var i=a(1306);YUI.add("squarespace-escmanager",function(r){r.Squarespace.STANDARD_CONTROL_CLASSES=[".standard-dialog-wrapper",".yui3-panel-type-tooltip",".sqsp-tooltip",".tooltip",".inline-field-title",".workflow-flyout",".page-map",".map-widget",".dialog-element",".error-message-wrapper",".squarespace-block",".sqs-block",".buttons a",".sqs-shopping-cart",".panel-menu-item",".flyout-variant-edit",".image-focal-point","a.return-button","a#deactivated-account-link",".site-chooser-glyph",".lightbox-inner",".sqs-configuration-menu .site-title-text",".sqs-configuration-menu .user-id",".sqs-add-to-cart-button",".additional-fields",".rte",".sqs-scroll-ac-item",".sqs-layout-insert-block-menu",".sqs-widgets-confirmation",".sqs-widgets-flow-dialog",".sqs-password-prompt",".tag-bubble",".sqs-fullscreen-overlay-imagepicker",".u-ActionButtons-container",".ReactModal__Overlay",".escmanager-ignore",".CCLinkEditorModal",".CCPageDropDown",".sqs-dialog-field:not(.sqs-dialog-layout-wrapper)"];r.namespace("SQS.DDWrappers").STANDARD_CONTROL_CLASSES=r.Squarespace.STANDARD_CONTROL_CLASSES;r.Squarespace.EscManager={closeTargets:[],ignores:0,attached:[],attach:function(e){e=e||r.one(r.config.win);var t=e.generateID();if(-1!==this.attached.indexOf(t))return;var a=r.Squarespace.EscManager;r.Squarespace.Utils.isInDamaskFrame()&&(a=r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.EscManager"));var i=e;i.on("keyup",a.onKeyUp,a);i.on("click",a.onBodyClick,a);i.on("mousedown",a._onBodyDown,a);i.on("mouseup",a._onBodyUp,a);this.attached.push(t);this._disabled=false},destroy:function(){this.detach();this._bodyDownTarget=null;this._bodyUpTarget=null},detach:function(e){e=e||r.one(r.config.win);e.detachAll()},onShiftEsc:function(){r.Squarespace.Utils.logout()},addIgnore:function(){this.ignores++},disable:function(){this._disabled=true},enable:function(){this._disabled=false},onEsc:function(){if(this.ignores){this.ignores--;return}if(r.config.win.Static&&Static.IN_BACKEND)r.one("html").hasClass("sqs-guide-open")?window.CONFIG_PANEL.closeGuide():i.toggleExpanded();else if(window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.getAccount())r.config.win.location=this._getConfigFrameUrl();else{var e=r.Object.getValue(r.config.win,"Static.SQUARESPACE_CONTEXT.websiteSettings.useEscapeKeyToLogin".split("."));if(!e)return;window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.params&&(window.SQUARESPACE_LOGIN.params.disableCreateAccount=true);r.Squarespace.Signup&&r.Squarespace.Signup.signupDialog&&r.Squarespace.Signup.signupDialog.isVisible()?r.Squarespace.Signup.signupDialog.cancel():r.config.win.location=this._getConfigFrameUrl()}},addTarget:function(e){this.closeTargets.push(e)},removeTarget:function(e){var t=this.closeTargets.indexOf(e);-1!==t&&this.closeTargets.splice(t,1)},onKeyUp:function(e){if(27===e.keyCode&&!this._disabled){e.halt();if(this.closeTargets.length>0){var t=this.closeTargets.pop();this._closeTarget(t,e)}else e.shiftKey?r.later(10,this,this.onShiftEsc,e):r.later(10,this,this.onEsc,e)}},_getConfigFrameUrl:function(){var e=r.config.win.location;return"http://"+e.host+"/config/?frameUrl="+e.pathname+(e.search||"")},_closeTarget:function(t,e){r.Lang.isFunction(t.close)?t.close(e,function(e){false===e&&this.closeTargets.push(t)}.bind(this)):r.Lang.isFunction(t.cancel)?t.cancel(e):!!r.Lang.isFunction(t.hide)&&t.hide(e)},_onBodyDown:function(e){this._bodyDownTarget=e.target},_onBodyUp:function(e){this._bodyUpTarget=e.target},_didMouseDownMouseUpMatch:function(){var e=this._bodyDownTarget===this._bodyUpTarget;this._bodyDownTarget=null;this._bodyUpTarget=null;return e},onBodyClick:function(e){if(this.closeTargets&&this.closeTargets.length>0){var t=this.closeTargets[this.closeTargets.length-1];if(!this._didMouseDownMouseUpMatch())return;if(t.ignoreBodyClicks)return;var a=e.clientX;var i=e.clientY;var n=e.target.get("winWidth");var s=e.target.get("winHeight");if(a<0||a>n||i<0||i>s)return;if(t.activeFlyout){if(!e.target.ancestor(t.activeFlyout.constraintClasses,true)){t.activeFlyout.field.closeFlyout();t.activeFlyout=null;r.fire("target-closed",{target:t})}}else if(!e.target.ancestor(r.Squarespace.STANDARD_CONTROL_CLASSES.join(", "),true)){r.fire("target-closed",{target:t});e.halt();this.closeTargets.pop();this._closeTarget(t,e)}}}};"undefined"!==typeof window&&(window.ESC_MANAGER?r.Squarespace.EscManager=window.ESC_MANAGER:window.ESC_MANAGER=r.Squarespace.EscManager)},"1.0",{requires:["event","node","squarespace-damask-context-globals","squarespace-util"]})},8004:function(e,t,a){var n=a(514);var s=a(568);var r=a(128);var o=a(213);var l=a(5136);var c=a(5166);YUI.add("squarespace-util",function(f){f.Squarespace.API_ROOT="/api/";f.Squarespace.REST_API_ROOT="/api/rest/";f.Squarespace.Utils={logoutAndReloadPage:function(){l.logout().then(function(){document.location.reload()}).catch(function(e){false})},logout:function(){if(this.LOGGING_OUT||!Static.SQUARESPACE_CONTEXT.authenticatedAccount)return;this.LOGGING_OUT=true;l.logout().then(function(){f.Global.fire("squarespace:logout");var e="/";f.config.win.CONFIG_PANEL&&(e=window.CONFIG_PANEL.get("previewFrame").get("url"));document.location.href=["http://",document.location.host,e,"?logout=true"].join("");f.Squarespace.Utils.removeSharedSSIdentity()}).catch(function(e){console.error(e)})},getGuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()+e()},getBrowserClassName:function(){var e={gecko:"browser-gecko",safari:"browser-safari",ie:"browser-msie"};var a="";f.Object.some(e,function(e,t){if(f.UA[t]){a=e;return true}});c()&&(a+=" ipad-os-thirteen");return a},isCoverPageOnly:f.cached(function(){return f.Object.getValue(Static,"SQUARESPACE_CONTEXT.website.websiteType".split("."))===n.COVER_PAGE}),isParkingPage:f.cached(function(){return f.Object.getValue(Static,"SQUARESPACE_CONTEXT.website.websiteType".split("."))===n.PARKING_PAGE}),isIAP:f.cached(function(){return f.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","siteStatus","value"])===s.RESOLD}),isIAPGracePeriod:f.cached(function(){return f.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","siteStatus","value"])===s.RESOLD_GRACE_PERIOD}),isDeveloperModeEnabled:function(){return!!f.Object.getValue(f.config.win,"Static.SQUARESPACE_CONTEXT.website.developerMode".split("."))},isInDamaskFrame:function(){try{return(window.top.Y||window.top.YUI_NOT_YET_LOADED)&&window.top.Y!==f}catch(e){return false}},areCookiesEnabled:function(){f.Lang.isUndefined(this._cookiesEnabled)&&(this._cookiesEnabled="cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1));return this._cookiesEnabled},storeSharedSSIdentity:function(){try{var e={identifier:f.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"])};var t=btoa(JSON.stringify(e));r.set("ss_lastid",t,{domain:Static.SQUARESPACE_CONTEXT.appDomain,path:"/"})}catch(e){false}},removeSharedSSIdentity:function(){try{r.set("ss_lastid",{domain:Static.SQUARESPACE_CONTEXT.appDomain,expires:new Date(0),path:"/"})}catch(e){false}},onPointerAction:function(e,t,a){var i=Array.prototype.slice.call(arguments);i.splice(1,0,"on");return f.Squarespace.Utils._attachPointerAction.apply(this,i)},_attachPointerAction:function(e,t,a,i){var n=Array.prototype.slice.call(arguments);n.splice(0,2);n.splice(0,0,"click");return e[t].apply(e,n)}};f.Squarespace.Marketing={trackLanding:function(){var e=f.QueryString.parse(document.location.search.substring(1));var t=["source","campaign","subcampaign","channel","subchannel","refer","variation","mkwid"];var a={landing:document.location.href,refer:document.referrer,rk:parseInt(99999999*Math.random(),10)};navigator.language?a.lang=navigator.language.toLowerCase():navigator.browserLanguage&&(a.lang=navigator.browserLanguage.toLowerCase());self.screen&&(a.screen=screen.width+"x"+screen.height);for(var i=0;i<t.length;++i){var n=t[i];n in e&&(a[n]=e[n])}var s=new Image(1,1);s.src="/api/track/Track?"+f.QueryString.stringify(a)}};f.Squarespace.Analytics={trackInternal:function(e,t,a){o(e,t).then(a)}};f.namespace("Squarespace.Lang").isPercentage=function(e){return f.Lang.isString(e)&&e.search("%")>0};f.namespace("Squarespace.Lang").sub=function(e,i){var t=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g;if(!e.replace)return e;return e.replace(t,function(e,t){var a=f.Object.getValue(i,t.split("."));if(f.Lang.isUndefined(a))return e;return a})};if(!f.Base)return;if(f.Color){var t=f.Color.toRGB;f.Color.re_RGBA=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*(\d+(?:\.\d+)?)\)$/i;f.Color.toRGB=function(e){if(f.Color.re_RGBA.exec(e))return"rgb("+RegExp.$1+","+RegExp.$2+","+RegExp.$3+")";return t(e)}}f.SQSAnim=f.Base.create("SQSAnim",f.Anim,[],{run:function(){if(this.get("destroyed")||null===this.get("node")._node||!this.get("node").inDoc()){this.fire("end");return this}return f.Anim.prototype.run.call(this)}});var i=function(e,t,a,i){e/=i/2;if(e<1)return a/2*e*e*e+t;e-=2;return a/2*(e*e*e+2)+t};f.augment(f.Node,Class.create({anim:function(e,t,a){t=f.merge({node:this,duration:.5,easing:i,to:e},t);this.activeAnim&&this.activeAnim.stop(true);this.activeAnim=new f.SQSAnim(t);this.activeAnim.on("end",function(){delete this.activeAnim},this);t.end&&this.activeAnim.on("end",t.end,a||t.context);t.start&&this.activeAnim.on("start",t.start,a||t.context);this.nodedestroynotifier||this.plug(f.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.activeAnim&&this.activeAnim.stop(true)},context:this});return this.activeAnim},getAdjustedDimensions:function(e){var t=this;e=e||{};e.scale||(e.scale="cover");e.align||(e.align="center");var a=t.get("parentNode");var i=this.getAttribute("data-image-dimensions");var n;var s;if(i){i=i.split("x");i={width:parseInt(i[0],10),height:parseInt(i[1],10)};n=i.width;s=i.height}else{if(!t.getData("width")&&!t.getData("height")){t.setData("width",e&&e.width?parseInt(e.width,10):t.getAttribute("width")||t.get("offsetWidth"));t.setData("height",e&&e.height?parseInt(e.height,10):t.getAttribute("height")||t.get("offsetHeight"))}n=f.Squarespace.Lang.isPercentage(t.getData("width"))?a.get("offsetWidth")*(parseInt(t.getData("width"),10)/100):parseInt(t.getData("width"),10);s=f.Squarespace.Lang.isPercentage(t.getData("height"))?a.get("offsetHeight")*(parseInt(t.getData("height"),10)/100):parseInt(t.getData("height"),10)}var r=e.containerWidth||a.get("offsetWidth")-(a.get("offsetWidth")-a.get("clientWidth"));var o=e.containerHeight||a.get("offsetHeight")-(a.get("offsetHeight")-a.get("clientHeight"));var l=n/s;var c=r/o;var d;var u;var g;e.scale&&"hidden"!==a.getStyle("overflow")&&a.setStyle("overflow","hidden");g=e.sizeOnly?r/n:"contain"===e.scale?l>c?r/n:o/s:l>c?o/s:r/n;var p=n;var h=s;if("contain"===e.scale){p=n*g;h=s*g;d=h<o?(o-h)/2:0;u=p<r?(r-p)/2:0;-1!==e.align.indexOf("left")?u=0:-1!==e.align.indexOf("right")&&(u=r-p);-1!==e.align.indexOf("top")?d=0:-1!==e.align.indexOf("bottom")&&(d=o-h);p-=this.get("offsetWidth")-this.get("clientWidth");h-=this.get("offsetHeight")-this.get("clientHeight")}else if("cover"===e.scale){p=n*g;h=s*g;d=h>o?(h-o)/-2:0;u=p>r?(p-r)/-2:0;if(e.focalPoint){u=Math.min(Math.max(r/2-p*e.focalPoint[0],r-p),0);d=Math.min(Math.max(o/2-h*e.focalPoint[1],o-h),0)}}return{top:d,left:u,width:p,height:h}},resizeToParent:function(e){var t=this.getAdjustedDimensions(e);var a=this.getStyle("position");if(e.sizeOnly){this.setStyles({width:t.width,height:t.height});var i=this.one("embed");i&&this.one("embed").setStyles({width:t.width,height:t.height});if(this.test("iframe")){var n=this.getAttribute("src");if(n)if(-1!==n.indexOf("?")){var s=n.split("?");-1===s[1].indexOf("wmode=transparent")&&this.setAttribute("src",s[0]+"?wmode=transparent&"+s[1])}else this.setAttribute("src",n+"?wmode=transparent")}i&&"transparent"!==i.getAttribute("wmode")&&this.one("embed").setAttribute("wmode","transparent")}else{var r=5;this.setStyles({position:"relative"!==a&&"absolute"!==a?"relative":a,top:t.top.toFixed(r),left:t.left.toFixed(r),width:t.width.toFixed(r),height:t.height.toFixed(r)})}},width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")},setWidth:function(e){this.setStyle("width",e)},setHeight:function(e){this.setStyle("height",e)}}));var e=["Webkit","Moz","O","ms"];var a=["transition","transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","backfaceVisibility","userSelect","borderBottomLeftRadius","borderBottomRightRadius"];f.Array.each(e,function(e){f.Array.each(a,function(i){var n=e+i.charAt(0).toUpperCase()+i.slice(1);n in f.config.doc.documentElement.style&&(f.DOM.CUSTOM_STYLES[i]={set:function(e,t,a){a[n]=t;a[i]=t},get:function(e,t){f.DOM.getComputedStyle(e,n)}})})});f.IO.prototype._destroy=function(e){if(f.config.win&&!e.notify&&!e.xdr)if(!e.upload&&e.c)e.c.onreadystatechange=null;else if(e.upload){e.c.upload.onprogress=null;e.c.onload=null;e.c.onerror=null}e=e.c=null}},"1.0",{requires:["anim","base","event","io","json","jsonp","node","node-event-delegate","plugin","promise","querystring","selector","squarespace-anim-raf","squarespace-data","squarespace-dom-emitters-resize","squarespace-dom-emitters-scroll","squarespace-logger","squarespace-plugin-node-destroy-notifier","squarespace-public-api","squarespace-system-error","squarespace-ui-base","yui-later"]})},802:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(54));var s=i(a(126));var r=/({[^}]+})/g;var o=/{([^}]+)}/;var l=function e(t){return"string"===typeof t};var c=(0,s.default)(function(e){return e.split(r)});var d=function e(t,a){return t+"-"+JSON.stringify(a)};var u=(0,s.default)(function(e,a){"object"===(0,n.default)(a)&&null!==a&&(e=e.map(function(e){var t=e.match(o);if(t&&a.hasOwnProperty(t[1]))return a[t[1]]+"";return e}));return e.join("")},d);var g=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a||!l(t))return t;var i=c(t);return u(i,a)};t.default=g;e.exports=t.default},8028:function(e,t){YUI.add("squarespace-anim-raf",function(e){var t=e.config.win;var a=t.requestAnimationFrame;var i=t.cancelAnimationFrame||t.cancelRequestAnimationFrame;var n=["moz","webkit"];var s;for(s=0;s<n.length&&!a;s++){a=t[n[s]+"RequestAnimationFrame"];i=t[n[s]+"CancelAnimationFrame"]||t[n[s]+"CancelRequestAnimationFrame"]}if(i&&a){var r=null;e.Anim._startTimer=function(){r=r||a(e.Anim._runAnimFrame)};e.Anim._stopTimer=function(){if(r){i(r);r=null}};e.Anim._runAnimFrame=function(){if(r){r=a(e.Anim._runAnimFrame);e.Anim._runFrame()}}}},"1.0",{requires:["anim"]})},8029:function(e,t,a){var n=a(128);var l=a(24).t;var c=a(1180);var d=a(595);YUI.add("squarespace-data",function(o){o.io&&o.on("io:xdrReady",function(e){o.Data.TRANSPORT_READY=true});o.Data={DEBUG:false,TRANSPORT_READY:true,addCrumb:function(e){var t=n.get("crumb");if(t){var a=e.split("?");var i=a[1]?o.QueryString.parse(a[1]):{};i.crumb=t;e=a[0]+"?"+o.QueryString.stringify(i)}return e},sendForm:function(e,t,a){t.data||(t.data={});var i=e.getData();for(var n in i){var s=i[n];if(o.Lang.isUndefined(s)||o.Lang.isNull(s)||o.Lang.isObject(s)&&o.Object.isEmpty(s))continue;o.Lang.isObject(s)&&!o.Lang.isArray(s)?t.data[n]=o.JSON.stringify(s):t.data[n]=s}var r={dialog:e};"function"===typeof t.failure&&(r.failure=t.failure);t.failure=r;this.post(t,a)},cleanObjectForConsole:function(e){var t={};for(var a in e){var i=false;if(o.Lang.isString(e[a])){try{i=e[a]?JSON.parse(e[a]):null}catch(e){}i&&o.Lang.isObject(i)?t[a]=i:t[a]=e[a]}else t[a]=e[a]}return t},get:function(e,t){this._go("GET",e,t)},post:function(e,t){this._go("POST",e,t)},put:function(e,t){this._go("PUT",e,t)},del:function(e,t){this._go("DELETE",e,t)},_go:function(n,s,e){s.context=e;s.method=n;if(o.Data.DEBUG&&false){s.url.endsWith("/")&&console.warn("[Data]: URL ends with a slash, it probably shouldn't: "+s.url);s.data?console.log("[Data] SEND:  "+s.url+" ("+s.method+"): ",o.clone(s.data)):console.log("[Data] SEND:  "+s.url+" ("+s.method+")")}s.success||(s.success=this._genericSuccess);s.responseFormat||(s.responseFormat="json");if(s.secure&&Static.SQUARESPACE_CONTEXT){var t=["squarespace.com","sqsp.com","sqsp.net","squarespace.net","sqsp6.com"];var a=o.Array.some(t,function(e){return window.location.host.endsWith(e)});d.isSecure()||(a=false);a||s.url.startsWith("https://")||(s.url="https://"+c.getWebsiteDomain(Static.SQUARESPACE_CONTEXT.website)+s.url);if(!a){s.xdr={};s.xdr.credentials=true}}for(var i in s.data)o.Lang.isUndefined(s.data[i])&&delete s.data[i];if(s.testResponse)s.testResponseDelay?o.later(s.testResponseDelay,this,function e(){o.Data._connectionSuccessRouter(s,true,{responseText:o.JSON.stringify(s.testResponse)})}):o.Data._connectionSuccessRouter(s,true,{responseText:o.JSON.stringify(s.testResponse)});else{var r=o.bind(function(){s._url=s.url;s.url=this.addCrumb(s.url);if("POST"===n||"PUT"===n)if(s.json){o.Lang.isObject(s.data)&&(s.data=o.JSON.stringify(s.data));o.Lang.isObject(s.headers)||(s.headers={});s.headers["Content-Type"]="application/json";s.headers.charset="UTF-8"}else for(var e in s.data){var t=s.data[e];o.Lang.isObject(t)&&!o.Lang.isArray(t)&&(s.data[e]=o.JSON.stringify(t))}var a={method:n,arguments:s.arguments,data:s.data,on:{success:o.bind(o.Data._connectionSuccessRouter,o.Data,s),failure:o.bind(o.Data._connectionFailureRouter,o.Data,s)}};var i=s.headers;o.Lang.isObject(i)&&(a.headers=i);if(s.xdr){a.xdr=s.xdr;a.headers={"Content-Type":l("application/x-www-form-urlencoded; charset=UTF-8")};a.data=o.QueryString.stringify(s.data)}s.queue?o.io.queue(s.url,a):o.io(s.url,a)},o.Data);s.testResponseDelay?o.later(s.testResponseDelay,this,r):r()}},_genericSuccess:function(e){},_connectionSuccessRouter:function(t,e,a,i){if("json"===t.responseFormat){var n={};if(204!==a.status&&1223!==a.status)try{n=o.JSON.parse(a.responseText)}catch(e){this._error(t,{error:l("Internal Error: Unable to parse server response from ({url}) as JSON: {message}",{url:t.url,message:a.responseText})});return}if(n.error)this._error(t,n,i);else{o.Data.DEBUG&&false;t.success.apply(t.context,[n,i])}}else if("raw"===t.responseFormat){o.Data.DEBUG&&false;t.success.apply(t.context,[a.responseText,i])}},_connectionFailureRouter:function(t,e,a,i){if(!a||4!==a.readyState)return;var n={400:true,401:true,500:true,502:true};if("json"===t.responseFormat&&n[a.status]){var s;try{s=o.JSON.parse(a.responseText)}catch(e){this._error(t,{error:l("Internal Error: Unable to parse server response from ({sub1}) as JSON: {sub2}",{sub1:t.url,sub2:a.responseText})});return}if(s.error||s.message||s.billingErrorCode){this._error(t,s,i);return}}var r=l("Unable to connect…");switch(a.status){case 401:case 403:r=l("Unauthorized request");break;case 500:case 501:r=l("Internal server error. Please try again later.");break;case 503:r=l("This service is temporarily unavailable. Please try again later.");break;default:if(t.retry){t.retry-=1;o.later(200,this,function e(){o.Data._go(t.method,t,t.context)});return}break}this._error(t,{status:a.status,error:r,errorKey:o.Lang.isFunction(window.btoa)?btoa(t.url):"",network:true})},_error:function(e,t,a){o.Data.DEBUG&&false;if(t.loginRequired){var i=function(){!!window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.fire("login-required")};if(o.Lang.isFunction(e.failure)){e.loginHasPriorityOnFailure&&i();e.failure.apply(e.context,[t,a])}else i()}else if(t.authorizationFail)new o.Squarespace.SystemError(e.url,t,"json").show();else if(t.crumbFail&&true!==e._retry&&o.Squarespace.Utils.areCookiesEnabled()){n.set("crumb",t.crumb,{path:"/"});e._retry=true;e.url=e._url;console.log("crumb check failed, will attempt a retry");this._go(e.method,e,e.context)}else if("function"===typeof e.failure)e.failure.apply(e.context,[t,a]);else if(o.Lang.isObject(e.failure)&&o.Lang.isFunction(e.failure.failure))e.failure.failure.apply(e.context,[t,a]);else if(e.failure&&e.failure.dialog&&t.errors){e.failure.dialog.showErrors(t.errors);e.failure.failure&&e.failure.failure.apply(e.context,[t,a])}else new o.Squarespace.SystemError(e.url,t,"json").show()}}},"1.0",{requires:["io","squarespace-system-error","squarespace-util"]})},8030:function(e,t,a){var o=a(24).t;var l=a(802);YUI.add("squarespace-system-error",function(r){r.namespace("Squarespace");r.Squarespace.SystemError=Class.create({initialize:function(e,t,a){this.url=r.Squarespace.Escaping.escapeForHtml(e);this.data=t;this.format=a;r.config.win.__clearError=this.clear},clear:function(){r.one(".sqs-system-error").remove();r.one(".dialog-screen-overlay.sqs-system-error-overlay").remove()},show:function(){var e;var t="";if(this.data.cleaned)e='<div style="font-weight: normal; font-size: 22px; margin-top: -2px;">'+o("Something Went Wrong!")+'</div><div style="font-weight: normal; font-size: 13px; padding-top: 5px;">'+o("Our system has encountered an error.  This exception has been automatically logged and reported.  We will return shortly.")+"</div>";else if(this.data.network){t=o("Unable to connect to Squarespace.  Please try again.");r.Lang.isString(this.data.error)&&this.data.error.length>0&&(t=this.data.error);e='<div style="font-weight: normal; font-size: 17px;">'+t+"</div>";if(this.url)try{r.Squarespace.Analytics.trackInternal("system_network_error",{urlRequested:this.url})}catch(e){false}}else{t=r.Squarespace.Escaping.escapeForHtml(this.data.error||this.data.message||"");e=l('<div style="font-weight: normal; font-size: 17px;">{sub1} &nbsp;<span style="color: #888;">({sub2})</span></div><br/><pre>{sub3}</pre>',{sub1:this.url,sub2:this.format.toUpperCase(),sub3:t.replace(new RegExp("\n","g"),"<br/>")});false}if(r.one(".sqs-system-error"))return;var a='<input type="button" value="Clear" onclick="Y.config.win.__clearError();"/>';var i="position: absolute; -webkit-user-select: text; left: 25px; top: 25px; right: 25px; font-size: 12px; color: #fff; padding: 26px 20px 20px 80px; border-radius: 5px; overflow: auto; height: 90%; z-index: 10000001;";var n=e+'<br/><br/><input type="button" value="'+o("Reload Page")+'" onclick="Y.config.doc.location.reload();"/> &nbsp; ';n+=a+"<br/><br/><br/>";this.data.errorKey&&(n+='<span style="color: #777; font-size: 10px;">'+this.data.errorKey+"</span>");this.errorEl=r.Node.create('<div class="sqs-system-error" style="'+i+'">'+n+"</div>");r.one(r.config.doc.body).append(this.errorEl);this.overlayEl=r.Node.create('<div class="dialog-screen-overlay sqs-system-error-overlay"></div>');this.overlayEl.setStyles({zIndex:1e7});r.one(r.config.doc.body).append(this.overlayEl);var s=new r.Anim({node:this.overlayEl,to:{opacity:1},duration:.35,easing:r.Easing.easeOutStrong});s.run()}})},"1.0",{requires:["squarespace-escaping-utils","squarespace-util"]})},8031:function(e,t){YUI.add("squarespace-dom-emitters-resize",function(e){e.Squarespace.ResizeEmitter=e.SQS.Gallery.ResizeEmitter},"1.0",{requires:["@sqs/yui-gallery/resize-emitter"]})},8033:function(e,t){YUI.add("squarespace-dom-emitters-scroll",function(a){a.namespace("Squarespace");a.Squarespace.ScrollEmitter=a.Base.create("ScrollEmitter",a.Base,[],{initializer:function(){var t=false;this.scrollEventHandle=this.get("target").on("scroll",function(){t||this.fire("scroll:start");t=true;this.timer&&this.timer.cancel();this.timer=a.later(this.get("timeout"),this,function e(){if(!a.Env)return;this.fire("scroll:end");t=false});this.fire("scroll")},this)},destructor:function(){this.timer&&this.timer.cancel();this.scrollEventHandle.detach()}},{ATTRS:{target:{valueFn:function(){return a.one(a.config.doc)}},timeout:{value:300}}})},"1.0",{requires:["base","node","event"]})},8034:function(e,t,a){var i=a(802);YUI.add("squarespace-logger",function(s){var t=[],a=null;var e=s.Base.create("Logger",s.Base,[],{initializer:function(){s.one(s.config.win).on("beforeunload",this.flush,this);this._syncDebugActiveElement();this.after("debugActiveElementChange",this._syncDebugActiveElement,this)},_syncDebugActiveElement:function(){this._debugActiveElementTimer&&this._debugActiveElementTimer.cancel();this.get("debugActiveElement")&&(this._debugActiveElementTimer=s.later(500,this,function(){this.debug({focusElement:this._getDOMNodeDescriptor(s.config.doc.activeElement)})},null,true))},_getDOMNodeDescriptor:function(e){e=s.one(e);var t=e.get("tagName").toLowerCase();var a=e.getAttribute("id");var i=e.get("className").split(" ");var n="";if(i.length>0){n="."+i.join(".");n.length>20&&(n=n.substr(0,20)+"…")}return t+(a?"#"+a:"")+n},enqueue:function(e){t.push(e);this.wait()},flush:function(e){try{clearTimeout(a)}catch(e){}a=null;t.length>0&&s.Data.post({url:"/api/events/Trace",data:{data:JSON.stringify(t)},failure:function(){}});t=[]},wait:function(){null===a&&(a=setTimeout(s.bind(this.flush,this),this.get("timerLength")))},log:function(e,t){s.Lang.isValue(e)&&this.enqueue({pageUrl:document.location.href,type:e,data:JSON.stringify(s.Lang.isValue(t)?t:{})})},trace:function(t,a){try{var e={};e.lalala()}catch(e){this.log(t,s.merge(a,{stack:e.stack}))}},debug:function(e){var t=s.one("#logger-debug")||s.one(s.config.doc.body).appendChild(s.Node.create('<div id="logger-debug"></div>'));t.setStyles({position:"fixed",right:50,top:50,background:"rgba(150,100,100,0.9)",border:"solid 1px white",color:"white",borderRadius:"3px",padding:20,zIndex:1e7,fontSize:"10px"});t.setContent(i('<xmp style="margin:0">{sub1}</xmp>',{sub1:JSON.stringify(e,null,2)}))}},{ATTRS:{timerLength:{value:3e4},debugActiveElement:{value:false}}});s.namespace("Squarespace");s.Squarespace.Logger||(s.Squarespace.Logger=new e)},"1.0",{requires:["base","event","io-base","node"]})},8035:function(e,t){YUI.add("squarespace-plugin-node-destroy-notifier",function(e){e.Squarespace.NodeDestroyNotifier=e.SQS.Gallery.NodeDestroyNotifier},"1.0",{requires:["@sqs/yui-gallery/node-destroy-notifier"]})},8037:function(e,t,a){var i=a(5991);var c=a(24).t;var n=a(5074);YUI.add("squarespace-public-api",function(l){l.namespace("Squarespace");l.config.win.ImageLoader=new i({allowConcurrentLoads:true,collectImageInfo:true});l.config.win.ImageLoader.bootstrap=l.config.win.ImageLoader.loadAll;l.Squarespace.Template=n.create({getTweakValue:function(e){if(e)return l.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[e]||l.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[e.replace("@","").replace(".","")]}});l.augment(l.Node,l.Squarespace.Legacy.Class.create({width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")}}));var a=[];l.config.win.JSTween={tween:function(e,t){console.error(c("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself."));a.push({node:e,config:t})},play:function(){a.forEach(function(e){console.error(c("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself."));var t=e.node;var a=e.config;var i={};var n={};var s=[];var r=[];for(var o in a){i[o]=a[o].start;n[o]=a[o].stop;a[o].onStart&&s.push(a[o].onStart);a[o].onStop&&r.push(a[o].onStop)}l.one(t).anim(n,{from:i,duration:a[Object.keys(a)[0]].duration,start:function(){s.forEach(function(e){e()})},end:function(){r.forEach(function(e){e()})}}).run()});a=[]}}},"1.0",{requires:["history","node","node-event-simulate","node-load","squarespace-dom-emitters-resize","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-legacy-class","thirdparty-modernizr","yui-throttle"]})},8040:function(e,t){YUI.add("squarespace-beforeunload",function(n){var s="gallery-dom0beforeunload",r=n.config.win.onbeforeunload;n.config.win.onbeforeunload=function(e){var t=e||n.config.win.event;r&&r(t);var a=new n.DOMEventFacade(t),i;n.fire(s,a);i=a.returnValue;if(i){t.returnValue=i;return i}n.config.win.onbeforeunload=r};n.Env.evt.plugins.beforeunload={on:function(e,t){var a=n.Array(arguments,0,true);a[0]=s;return n.on.apply(n,a)}}},"1.0",{requires:[]})},8048:function(e,t){var l=".js-gallery-lightbox-opener";YUI.add("squarespace-gallery-manager",function(r){var e={lightboxify:function(e,t){this._destroyLightbox();if(!e||!t||!t.size()){this.unlightboxify(t);return}var r=!!t.item(0).ancestor(".sqs-system-gallery");var o=[];t.each(function(e,t){o.push(this._createLightboxItem(e));var a=e.getAttribute("data-click-through-url");if(a)return;var i=e.one(l)||e;if(!i)return;var n={index:t,slideHitArea:i,lightboxSet:o,isFromHash:r};var s=this._makeOpenLightbox(n).bind(this);i.on("click",s,this);i.on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&s(e)},this)},this);r&&this._openInitialSlide(t,o)},unlightboxify:function(e){this._destroyLightbox();if(!e)return;var a;e.each(function(e,t){a=e.one(l);a.detach("click");a.detach("keydown")})},_destroyLightbox:function(){if(!this.lightbox)return;this.lightbox.destroy();delete this.lightbox},_createLightboxItem:function(e){if("video"===e.getAttribute("data-type")){var t=e.one(".sqs-video-wrapper");var a=t.videoloader.get("overlay");a&&a.detach("click");return{content:t}}var i;var n;var s;e.hasAttribute("data-title")?i=e.getAttribute("data-title"):e.one("[data-title]")?i=e.one("[data-title]").getAttribute("data-title"):e.one(".title")&&(i=e.one(".title").getHTML());e.hasAttribute("data-description")?n=e.getAttribute("data-description"):e.one("[data-description]")?n=e.one("[data-description]").getAttribute("data-description"):e.one(".description")&&(n=e.one(".description").getHTML());e.hasAttribute("data-lightbox-theme")?s=e.getAttribute("data-lightbox-theme"):e.one("[data-lightbox-theme]")?s=e.one("[data-lightbox-theme]").getAttribute("data-lightbox-theme"):e.one(".lightbox-theme")&&(s=e.one(".lightbox-theme").getHTML());return{theme:s,content:e.one("img"),meta:(i?"<h1>"+i+"</h1>":"")+(n||"")}},_getLightboxTheme:function(e){var t=e.ancestor("[data-lightbox-theme]",true);if(!t)return"dark";return"light"===t.getAttribute("data-lightbox-theme")?"light":"dark"},_makeOpenLightbox:function(t){return function(e){e.halt();this._destroyLightbox();this.lightbox=new r.Squarespace.Lightbox2({controls:{previous:true,next:true},set:t.lightboxSet,currentSetIndex:t.index,historyHash:t.isFromHash,theme:this._getLightboxTheme(t.slideHitArea)});this.lightbox.render();t.isFromHash&&this.lightbox._slideshow.set("currentIndex",t.index)}},_getInitialSlideId:function(e){var t=new r.HistoryHash;var a=t.get("itemId");if(a)return a;if(e&&e.size()){var i="";var n=e.item(0).ancestor(".slides");if(n){i=n.getAttribute("data-collection-full-url");return window.location.pathname.replace(i,"")}}var s=window.location.pathname.split("/");return s[s.length-1]},_getSlideIndexByLink:function(e,n){var s=-1;e.some(function e(t,a){if(t.ancestor(".sqs-layout"))return false;var i=t.getAttribute("data-slide-url");if(t.getAttribute("data-slide-id")!==n&&i!==n)return false;s=a;return true},this);return s},_getSlideIndexByRoughUrl:function(e,r){var o=-1;e.some(function e(t,a){if(t.ancestor(".sqs-layout"))return false;var i=t.getAttribute("data-slide-url");var n=i.substr(i.length-r.length)===r;var s=i.indexOf("/"+r)>-1;if(!n||!s)return false;o=a;return true},this);return o},_openInitialSlide:function(e,t){var a=this._getInitialSlideId();if(!a)return;var i=this._getSlideIndexByLink(e,a);if(-1===i){i=this._getSlideIndexByRoughUrl(e,a);if(-1===i)return}this._destroyLightbox();this.lightbox=new r.Squarespace.Lightbox2({controls:{previous:true,next:true},set:t,currentSetIndex:i,historyHash:"yui-throttle"});this.lightbox.render()}};r.mix(r.SQS.Gallery.Manager,e,true);r.Squarespace.GalleryManager=r.SQS.Gallery.Manager},"1.0",{requires:["squarespace-image-loader","squarespace-plugin-lightbox2","squarespace-video-loader","squarespace-widgets-lightbox2","@sqs/yui-gallery/manager"]})},8049:function(e,t){YUI.add("squarespace-image-loader",function(n){n.namespace("Squarespace");n.Squarespace.Loader=n.Base.create("Loader",n.Base,[],{initializer:function(){this.get("frames")&&this._processFrames();this.get("img")&&this._processImages()},_processFrames:function(){this._getNodeList("frames").each(function(e){e.getAttribute("data-embed")&&e.resizeToParent({scale:"contain",sizeOnly:true})})},_processImages:function(){this._getNodeList("img").each(function(e){var t=false;e.loader&&(t=true);e.plug(n.Squarespace.Loader2,this.get("loaderOptions")||{});t&&e.fire("refresh")},this)},_getNodeList:function(e){var t=this.get(e);if(n.Lang.isString(t))return n.all(t);if(!t.size)return new n.NodeList(t);return t}},{ATTRS:{frames:{},img:{},loaderOptions:{}}});n.Squarespace.Loader2=n.Base.create("Loader2",n.Plugin.Base,[],{initializer:function(){var e=this.get("host");var t=100;var a=0;function i(){!e.inDoc()&&++a<t?n.later(10,this,i):this.load()}i.call(this);this.on("refresh",this.load,this);this.afterHostEvent("refresh",this.load,this)},_isInvalidHost:function(){return null===this.get("host").getDOMNode()||!this.get("host").inDoc()},load:function(){var e=this.get("host");!!e.getAttribute("src")&&e.get("complete")&&e.fire("loaded");this.afterHostEvent("load",function(){if(this._isInvalidHost())return;this.get("host").removeClass("loading").addClass("loaded");this.get("host").fire("loaded")},this);if(this._isInvalidHost())return;n.config.win.ImageLoader.load(e.getDOMNode(),n.merge(this.getAttrs(),{load:this.get("load")}))},getDimensionForValue:function(e,t){var a=this.get("host").getDOMNode();var i=n.config.win.ImageLoader._getDataFromNode(a);return n.config.win.ImageLoader.getDimensionForValue(e,t,i)},getBareElement:function(){var e=this.get("host");var t=n.Node.create("<img />");t.setAttribute("data-src",e.getAttribute("data-src"));t.setAttribute("data-image-dimensions",e.getAttribute("data-image-dimensions"));t.setAttribute("data-image-focal-point",e.getAttribute("data-image-focal-point"));t.setAttribute("alt",e.getAttribute("alt"));return t},destructor:function(){}},{NS:"loader",ATTRS:{stretch:{},load:{value:true},source:{},fixedRatio:{value:false},fitAlignment:{},fit:{value:false,setter:function(e){e&&this.set("mode","fit")}},fill:{value:false,setter:function(e){e&&this.set("mode","fill")}},focalPoint:{setter:function(e){n.config.win.ImageLoader.load(this.get("host").getDOMNode(),{focalPoint:e.x+","+e.y});return e}},mode:{validator:function(e){return-1!==["fit","fill","none",null].indexOf(e)}},refreshOnResize:{value:false},useBgImage:{validator:function(e){return n.Lang.isBoolean(e)}}}});n.Squarespace.ImageLoadManager=new(n.Base.create("ImageLoadManager",n.Base,[],{refreshAll:function(){n.all("img[data-src]").each(function(e){e.fire("refresh")})}}));n.augment(n.Node,Class.create({refresh:function(){this.fire("refresh")}}))},"1.0",{requires:["base","node","plugin"]})},8050:function(e,t){YUI.add("squarespace-plugin-lightbox2",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Lightbox2Plug=a.Squarespace.Plugin.Lightbox2=a.Base.create("Lightbox2Plug",a.Plugin.Base,[a.Squarespace.GismoBase],{initializer:function(){this._event(this.get("host").on("click",function(e){e.preventDefault();var t=this;a.use("squarespace-ui-base",function(){var e=new a.Squarespace.Lightbox2(a.merge({content:a.Node.create(t.get("host").getAttribute("data-lightbox"))},t.get("lightboxOptions")));e.render()})},this))},destructor:function(){var e=this.get("lightboxOptions.content");e instanceof a.Node&&e.destroy(true)}},{NS:"lightbox2plugin",ATTRS:{lightboxOptions:{}}})},"1.0",{requires:["base","node","plugin","squarespace-gismo","squarespace-widgets-lightbox2"]})},8051:function(e,t){YUI.add("squarespace-gismo",function(a){a.Squarespace.GismoBase=function(){this._gismoEvents={};this._timers={};this._anims=this._anims||[]};a.Squarespace.GismoBase.prototype={destructor:function(){a.Object.each(this._gismoEvents,function(e,t){a.Array.invoke(e,"detach");this._gismoEvents[t]=null},this);a.Object.each(this._timers,function(e,t){a.Array.invoke(e,"cancel");this._timers[t]=null},this);if(this._anims.shift){a.Array.invoke(this._anims,"destroy");this._anims=null}else this._anims.destructor&&this._anims.destructor()},_anim:function(e,t,a){var i=e.anim(t,a||{});i.on("end",function(){this._anims.remove(i)},this);this._anims.push(i);return i},_event:function(e,t){t=t||"generic";this._gismoEvents[t]=this._gismoEvents[t]||[];this._gismoEvents[t].push(e)},_getEvents:function(e){return this._gismoEvents[e||"generic"]},_flushEvents:function(e){var t=this._gismoEvents[e||"generic"];if(t){a.Array.invoke(t,"detach");this._gismoEvents[e]=null}},_timer:function(e,t){t=t||"generic";this._timers[t]=this._timers[t]||[];this._timers[t].push(e)}}},"1.0",{requires:["array-invoke","squarespace-anims"]})},8053:function(e,t,a){YUI.add("squarespace-anims",function(a){a.namespace("Squarespace");function t(e){t.superclass.constructor.apply(this,arguments)}a.Squarespace.Anims=a.extend(t,a.Base,{initializer:function(){this._items=[]},destructor:function(){var t=[];this.each(function(e){t.push(e)});a.Array.each(t,function(e){e.get("running")&&e.stop(false);e.destroy()});a.detach(this.get("id")+"|*")},add:function(t){if(!t.get("node"))throw new Error(this.name+": Animation doesn't specify a node");false;t.on(this.get("id")+"|end",function(e){this.remove(t)},this);this._items.push(t)},remove:function(e){if(a.Lang.isNumber(e))return this._items.splice(e,1);var t=this._items.indexOf(e);if(-1!==t)return this._items.splice(this._items.indexOf(e),1)}},{NAME:"anims"});a.augment(t,a.ArrayList)},"1.0",{requires:["arraylist","base","base-build"]})},8055:function(e,t,a){var s=a(24).t;var n=a(708);var i=a(9146);var r=a(8151);var o=a(3055).containFocus;YUI.add("squarespace-widgets-lightbox2",function(c){c.namespace("Squarespace.Widgets");c.Squarespace.Widgets.Lightbox2=c.Squarespace.Lightbox2=c.Base.create("Lightbox2",c.Squarespace.Widgets.Gismo,[],{initializer:function(){c.config.win.ACTIVE_LIGHTBOX=this;var e=this.get("contentBox");e.set("role","dialog");e.set("aria-label",this.get("title"));this._overlay=new c.Squarespace.Lightbox2Overlay({theme:this.get("theme")});this._overlay.on("hide",this.hideAndDestroy,this);this.bMobile=c.SQS.Gallery.Manager.isMobile();this.requestUpdateHeightAndRefresh=r(this.updateHeightAndRefresh.bind(this))},destructor:function(){this._flushEvents();if(c.Lang.isValue(this._slideshow)){this._slideshow.destroy();this._slideshow=null}this._overlay.destroy();this._overlay=null;c.config.win.ACTIVE_LIGHTBOX=null;this.crossBrowserResizeHandle&&i.removeListener(this.crossBrowserResizeHandle)},renderUI:function(){c.Squarespace.Lightbox2.superclass.renderUI.call(this);c.one("body").addClass("sqs-lightbox-open");var t=this.get("contentBox");this._overlay.render(t);var e=s("Close");this._closeEl=c.Node.create('<a class="sqs-lightbox-close" role="button" tabindex="0" aria-label="'+e+'"></a>').appendTo(t).hide();if(this.get("set").length>1){if(!this.bMobile&&this.get("controls.previous")){var a=s("Previous Item");this._previousEl=c.Node.create('<a class="sqs-lightbox-previous" role="button" tabindex="0" aria-label="'+a+'"></a>');t.appendChild(this._previousEl)}if(!this.bMobile&&this.get("controls.next")){var i=s("Next Item");this._nextEl=c.Node.create('<a class="sqs-lightbox-next" role="button" tabindex="0" aria-label="'+i+'"></a>');t.appendChild(this._nextEl)}}else this.get("set").length||this.set("set",[{content:this.get("content"),meta:this.get("meta")}]);this._slideshow=this.createSlideshow(t);this._lightboxContentEl=this._slideshow.get("container");if(this.bMobile){var n=s("Toggle Caption");this._metaTriggerEl=c.Node.create('<a class="sqs-lightbox-meta-trigger" role="button" tabindex="0" aria-label="'+n+'">&bull;</a>').appendTo(t)}this._lightboxContentEl.setStyles({opacity:1});this._overlay.once("shown",function(){this.ignoreBodyClicks=true;c.Squarespace.EscManager.addTarget(this);this._lightboxContentEl.show();this._closeEl&&this._closeEl.show();if(this._slideshow){var e=this._slideshow.get("slides").item(this._slideshow.get("currentIndex")).one(".sqs-video-wrapper");e&&e.videoloader.showVideo()}this.revertFocusContainment=o({container:t._node})},this);t.plug(c.Squarespace.Plugin.ScrollLock)},bindClickAndKeyDownEvents:function(e,t,a){this._event(e.on("click",t,this),a);this._event(e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||t.call(this,e)},this),a)},bindUI:function(){c.Squarespace.Lightbox2.superclass.bindUI.call(this);this._slideshow.after("currentIndexChange",c.bind(function(e){this.set("currentSetIndex",e.newVal);this.syncUI()},this));void 0!==c.config.win.orientation&&this._event(c.one(c.config.win).on("orientationchange",this.requestUpdateHeightAndRefresh,this));this._closeEl&&this.bindClickAndKeyDownEvents(this._closeEl,function(e){e.halt();this.hideAndDestroy(true)});this._metaTriggerEl&&this.bindClickAndKeyDownEvents(this._metaTriggerEl,function(){this.toggleMeta()},"meta-trigger");if(this._previousEl){this.bindClickAndKeyDownEvents(this._previousEl,function(e){e.halt();this.previous()},"previous-click");var t=c.throttle(c.bind(this.previous,this),200);this._event(c.on("key",function(e){e.halt();t()},c.config.win,"down:37",this),"keyboard")}if(this._nextEl){this.bindClickAndKeyDownEvents(this._nextEl,function(e){e.halt();this.next()},"next-click");var a=c.throttle(c.bind(this.next,this),200);this._event(c.on("key",function(e){e.halt();a()},c.config.win,"down:39",this),"keyboard");this.bMobile||this.setupNavigationFade()}this.isMobile||this._event(this.get("contentBox").on("click",this.onContentBoxClick,this));this._event(c.on("transition:scroll:tapped",function(e){this.onContentBoxClick(e.touchEvent)},this));this.crossBrowserResizeHandle=i.addListener(this.requestUpdateHeightAndRefresh.bind(this))},syncUI:function(){var e=n(c.config.doc).scrollTop;this.get("contentBox").setStyles({top:e,height:c.config.win.innerHeight});var t=this._slideshow._currentSlide();var a=t.one(".sqs-lightbox-meta")||this.createMetaEl(t);if(a){c.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.show();if(this.bMobile){a.appendTo(t);a.setStyles({bottom:this.bMetaEnabled?0:"-5000px",left:0,right:0});a.addClass("overlay-description-visible")}else{var i=t.one(".sqs-lightbox-padder").get("children").item(0);a.setStyles({bottom:parseInt(i.getStyle("top"),10)-1+"px",left:i.getStyle("left"),right:parseInt(i.getStyle("left"),10)-1+"px"})}}else c.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.hide()},updateHeightAndRefresh:function(){this.syncUI();this._slideshow.refresh()},onContentBoxClick:function(e){if(!e.target.ancestor("a",true)){e.halt();if(e.target.ancestor(".sqs-video-wrapper")){e.target.ancestor(".sqs-video-wrapper").videoloader.showVideo();return}if(!this.bMobile){var t=c.one("body").get("winWidth"),a=c.one("body").get("winHeight"),i=.02;if(e.clientX>t*i&&e.clientX<t*(1-i)&&e.clientY>a*i&&e.clientY<a*(1-i)){if(e.clientX>=t/2&&this._nextEl){this.next();return}if(e.clientX<c.one("body").get("winWidth")/2&&this._previousEl){this.previous();return}}}if(e.target.ancestor("img",true))return;this.hideAndDestroy(true)}},previous:function(){this._slideshow.previousSlide()},next:function(){this._slideshow.nextSlide()},close:function(){this.hideAndDestroy()},toggleMeta:function(){this.get("contentBox").all(".sqs-lightbox-meta").each(c.bind(function(e){this.bMetaEnabled=0===parseInt(e.getStyle("bottom"),10);this._anim(e,{bottom:this.bMetaEnabled?"-5000px":"0"},{duration:this.get("speed")}).run();this.bMetaEnabled=!this.bMetaEnabled},this))},hideAndDestroy:function(e){if(c.Lang.isBoolean(e)&&e)this._overlay.overlayHideAndDestroy();else{this.once("hidden",this.destroy);this.hide()}c.one("body").removeClass("sqs-lightbox-open");this.revertFocusContainment&&this.revertFocusContainment();this.get("historyHash")&&this._slideshow.set("currentIndex",null)},hide:function(){var e=this.get("speed");var t;this.get("contentBox").setStyles({transition:"opacity "+e+"s ease",zIndex:889,opacity:0});t=c.later(1e3*e,this,function(){c.Squarespace.EscManager.removeTarget(this);this.fire("hidden");t.cancel();t=null})},setupNavigationFade:function(){var t;var a=function(){t&&t.cancel()};var i=function(e){a();if(e&&e.inViewportRegion()){e.addClass("mouseover").siblings().removeClass("mouseover");t=c.later(500,this,function(){e&&e.inViewportRegion()&&e.removeClass("mouseover")})}};this._event(this._nextEl.on("mouseenter",function(){a()}),"nav-next-onmouse");this._event(this._previousEl.on("mouseenter",function(){a()}),"nav-prev-onmouse");this._event(this._lightboxContentEl.on("mousemove",c.bind(function(e){e.clientX<c.one("body").get("winWidth")/2?i(this._previousEl):i(this._nextEl)},this)),"container-hovering")},createSlideshow:function(e){var t=c.Node.create('<div class="sqs-lightbox-slideshow"></div>').appendTo(e);var a=this.get("set");for(var i=0;i<a.length;i++){var n=c.Node.create('<div class="sqs-lightbox-slide"></div>').appendTo(t);var s=c.Node.create('<div class="sqs-lightbox-padder"></div>').appendTo(n);var r=c.one(a[i].content.cloneNode(true)).appendTo(s).setAttribute("data-image-stretch","false").setStyle("opacity",null).removeClass("video-fill");var o=a[i].content.ancestor();if(this.get("historyHash")&&o){o.getAttribute("data-slide-url")&&n.setAttribute("data-slide-url",o.getAttribute("data-slide-url"));o.getAttribute("data-slide-id")&&n.setAttribute("data-slide-id",o.getAttribute("data-slide-id"))}r.all("iframe").remove()}var l=new c.SQS.Gallery.Gallery2({container:t,currentIndex:this.get("currentSetIndex"),loop:!this.bMobile,autoplay:false,refreshOnResize:true,refreshOnOrientationChange:true,design:"stacked",keyboard:false,designOptions:{clickBehavior:false,easing:c.Easing.easeInOutExpo,speed:.6,autoHeight:false,transition:this.bMobile?"scroll":"fade",transitionOptions:{direction:"horizontal",allowPageScroll:false}},loaderOptions:{mode:"fit"},lazyLoad:true,videoLoaderOptions:this.get("videoLoaderOptions"),historyHash:this.get("historyHash")});return l},createMetaEl:function(e){e=e.one(".sqs-lightbox-padder");var t=this.getCurrentElMeta();if(t){var a=c.Node.create('<div class="sqs-lightbox-meta"></div>');a.appendChild(t);e.appendChild(a);if(!this.bMobile){this._event(e.one(":first-child").on("mouseenter",function(){a.addClass("overlay-description-visible")},this),"meta-hovering");this._event(e.one(":first-child").on("mouseleave",function(){a.removeClass("overlay-description-visible")},this),"meta-hovering");this._event(a.on("mouseenter",function(){a.addClass("overlay-description-visible")},this),"meta-hovering");this._event(a.on("mouseleave",function(){a.removeClass("overlay-description-visible")},this),"meta-hovering")}return a}},getCurrentElContent:function(){if(this.get("set").length>0)return this.get("set")[this.get("currentSetIndex")].content;return this.get("content")},getCurrentElMeta:function(){if(this.get("set").length>0)return this.get("set")[this.get("currentSetIndex")].meta;return this.get("meta")}},{NS:"lightbox2",ATTRS:{content:{},controls:{value:{previous:false,next:false}},currentSetIndex:{value:0},meta:{},padding:{value:100},set:{value:[]},speed:{value:.6},theme:{value:"dark"},title:{value:s("Gallery")},videoLoaderOptions:{value:{}},historyHash:{value:false}}})},"1.0",{requires:["base","dom-style-ie","event-key","event-mouseenter","node","plugin","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-touch-event-listener","squarespace-video-loader","squarespace-widgets-gismo","squarespace-widgets-lightbox2-overlay","yui-throttle"]})},8057:function(e,t){YUI.add("squarespace-animations",function(l){l.namespace("Squarespace.Animations");var i="display-status-",t="-plugged",r="shown",o="hidden";l.Squarespace.Animations.Expandable=l.Base.create("expandable",l.Plugin.Base,[],{initializer:function(e){this.doBefore("show",this.open);this.doBefore("hide",this.close);this._running=false},close:function(e){var t=this.get("host"),a=this.get("easing"),i=this.get("duration"),n,s;e=!t.inDoc()||e;t.fire("close");if(e)this._hardClose();else if(!this._running){this._running=true;t.wrap('<div class="expandable-plugin-wrapper"></div>');s=t.ancestor(".expandable-plugin-wrapper");s.setStyles({overflow:"hidden",height:t.get("offsetHeight")});this._closeWrapper=s;n=new l.Anim({node:s,to:{height:0},easing:a,duration:i});n.on("end",function(){if(t.inDoc()){t.setStyles({height:0,overflow:"hidden",display:"none"});t.unwrap();t.addClass("expandable-hidden")}this._running=false;t.fire("closed")},this);this._closeAnim=n;n.run()}return new l.Do.Prevent("Expandable prevented default hide.")},_hardClose:function(){var e=this.get("host");e.setStyles({height:0,overflow:"hidden",display:"none"});e.addClass("expandable-hidden");e.fire("closed")},_hardOpen:function(){var e=this.get("host");e.setStyles({height:null,display:null});e.removeClass("expandable-hidden");e.fire("opened")},open:function(e){var t=this.get("host"),a=this.get("easing"),i=this.get("duration"),n,s,r,o;e=!t.inDoc()||e;t.fire("open");if(e)this._hardOpen();else if(!this._running){this._running=true;"none"===t.getComputedStyle("display")&&t.setStyle("display",null);r=t.cloneNode(true);r.setStyles({height:"auto",visibility:"hidden",display:null,position:"absolute",width:t.get("offsetWidth")});t.insert(r,"before");s=r.get("offsetHeight")+parseInt(r.getComputedStyle("marginTop"),10)+parseInt(r.getComputedStyle("marginBottom"),10);r.remove(true);t.wrap('<div class="expandable-plugin-wrapper"></div>');o=t.ancestor(".expandable-plugin-wrapper");o.setStyles({overflow:"hidden",height:0});t.setStyles({height:null,overflow:null});this._openWrapper=o;n=new l.Anim({node:o,to:{height:s},easing:a,duration:i});n.on("end",function(){var e=this.get("host");if(e){this._running=false;e.unwrap();e.removeClass("expandable-hidden");e.fire("opened")}},this);this._openAnim=n;n.run()}return new l.Do.Prevent("Expandable prevented default show.")},destructor:function(){this._closeWrapper&&this._closeWrapper.remove(true);this._openWrapper&&this._openWrapper.remove(true);this._openAnim&&this._openAnim.stop().destroy();this._closeAnim&&this._closeAnim.stop().destroy()}},{NS:"expandablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong}}});l.Squarespace.Animations.Fadeable=l.Base.create("fadeable",l.Plugin.Base,[],{initializer:function(e){this.beforeHostMethod("show",this.show);this.beforeHostMethod("hide",this.hide);this.get("host").addClass(this.name+t);this._onlyUseOpacity=void 0!==e.onlyUseOpacity&&e.onlyUseOpacity;this._running=false},destructor:function(){this._anim&&this._anim.stop().destroy();this.get("host").removeClass(this.name+t)},show:function(e){return this._changeVisibility(true,e)},hide:function(e){return this._changeVisibility(false,e)},_changeVisibility:function(e,t){var a=this.get("host");t=!a.inDoc()||t;e&&a.removeClass(i+"hidden");if(t)this._hardChangeVisibility(e);else{if(this._anim){this._anim.stop().destroy();this._anim=null}e&&"none"===a.getComputedStyle("display")&&a.setStyle("display",null);this._anim=new l.Anim({node:a,to:{opacity:e?this.get("opacity"):0},easing:this.get("easing"),duration:this.get("duration")});this._anim.onceAfter("end",function(){this._hardChangeVisibility(e);this._running=false;e||this._onlyUseOpacity||!a.getDOMNode()||a.setStyle("display","none");a.fire(e?"shown":"hidden");delete this._anim},this);this._anim.run()}return new l.Do.Prevent("Fadeable prevented default "+(e?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(e){var t=this.get("host");e||t.addClass(i+"hidden");t.setStyles({opacity:e?this.get("opacity"):0});this._anim=null;t.fire(e?r:o)}},{NS:"fadeablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},opacity:{value:1}}});l.Squarespace.Animations.Scalable=l.Base.create("scalable",l.Plugin.Base,[],{initializer:function(e){this.doBefore("show",this.show);this.doBefore("hide",this.hide);this._running=false},show:function(e){return this._changeVisibility(true,e)},hide:function(e){return this._changeVisibility(false,e)},_changeVisibility:function(e,t){var a=this.get("host"),i=this.get("duration");this.fire(e?"show":"hide");a.fire(e?"show":"hide");e&&a.removeClass("sqs-scalable-hidden");t=!a.inDoc()||t;if(t){this._hardChangeVisibility(e);e||a.addClass("sqs-scalable-hidden")}else if(!this._running){this._running=true;var n=false;var s=l.bind(function(){if(n)return;n=true;if(!a.getDOMNode())return;this._running=false;e||a.addClass("sqs-scalable-hidden");this.fire(e?r:o);a.fire(e?r:o)},this);a.setStyles({transition:["opacity "+i+"s ease-out","visibility "+i+"s ease-out","transform "+i+"s ease-out"].join(", ")});l.config.win.setTimeout(function(){if(!a)return;e?a.setStyles({opacity:1,visibility:"visible",transform:"scale(1)"}):a.setStyles({opacity:0,visibility:"hidden",transform:"scale(0.94)"})},1);l.config.win.setTimeout(function(){s()},1e3*i)}return new l.Do.Prevent("Scalable prevented default "+(e?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(e){var t=this.get("host");var a=!!(this.get("host").getDOMNode().style.transitionDuration||l.DOM.CUSTOM_STYLES.transitionDuration);a?t.setStyles({visibility:e?"visible":"hidden",opacity:e?1:0,transform:"scale("+(e?"1":"0.94")+")"}):t.setStyles({visibility:e?"visible":"hidden",opacity:e?1:0});t.fire(e?r:o)}},{NS:"scalablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},opacity:{value:1}}})},"1.0",{requires:["anim","anim-easing","base","plugin","transition"]})},8059:function(e,t){YUI.add("squarespace-plugin-scroll-lock",function(o){o.namespace("Squarespace.Plugin").ScrollLock=o.Base.create("ScrollLock",o.Plugin.Base,[],{initializer:function(e){var s=this.get("host");var r=s.getDOMNode();this.listener=function(e){e.stopPropagation();if(!o.Lang.isNumber(r.scrollTop)){e.preventDefault();return false}var t=parseInt(s.getComputedStyle("height"),10);var a=r.scrollTop;var i=r.scrollHeight-t;var n=e.wheelDelta||-e.detail;if(a<=0&&n>0||a>=i&&n<0){e.preventDefault();return false}};if(r.addEventListener){r.addEventListener("mousewheel",this.listener);r.addEventListener("DOMMouseScroll",this.listener);r.addEventListener("MozMousePixelScroll",this.listener)}else r.attachEvent&&r.attachEvent("onmousewheel",this.listener)},destructor:function(){var e=this.get("host").getDOMNode();if(e.removeEventListener){e.removeEventListener("mousewheel",this.listener);e.removeEventListener("DOMMouseScroll",this.listener);e.removeEventListener("MozMousePixelScroll",this.listener)}else e.detachEvent&&e.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},8060:function(e,t){YUI.add("squarespace-touch-event-listener",function(e){e.Squarespace.TouchEventListener=e.SQS.Gallery.TouchEventListener},"1.0",{requires:["@sqs/yui-gallery/touch-event-listener"]})},8062:function(e,t,a){var u=a(24).t;var g=a(595);YUI.add("squarespace-video-loader",function(p){p.namespace("Squarespace");p.Squarespace.VideoLoader=p.Base.create("VideoLoader",p.Plugin.Base,[],{initializer:function(){var e=this.get("host");e.plug(p.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.destroy()},context:this});this._setVariables();this._resizeEmitter=new p.Squarespace.ResizeEmitter({timeout:1e3});this._onFullscreenChangeHandler=this.handleFullScreenChange.bind(this);this._modeClass="video-"+this.get("mode");e.addClass(this._modeClass);this.once("loaded",this.bindUI,this);this.get("load")&&this.load();this.after("forceAutoplayChange",function(){this._augmentVideoSrc()})},destructor:function(){this.prefixedFullScreenEvents.forEach(function(e){p.config.doc.removeEventListener(e,this._onFullscreenChangeHandler)}.bind(this));this._resizeEmitter.destroy()},load:function(){if(this._loaded)return;if("invalid"===this.get("type")){this._intrinsic=false;if(this.get("overlay")){this.get("overlay").remove();this._set("overlay",null)}}var e=this.get("host");var t=this.get("mode");e.removeClass(this._modeClass);this._modeClass="video-"+t;e.addClass(this._modeClass);var a;var i;if(this._intrinsic){var n=this.getWidth();var s=this.getHeight();var r;r=n&&s?s/n*100:56.3;a=this._getOrCreateNode(".intrinsic",'<div class="intrinsic"></div>');i=this._getOrCreateNode(".intrinsic-inner",'<div class="intrinsic-inner"></div>');i.setStyle("paddingBottom",r+"%");var o=e.get("parentNode");var l=o.getComputedStyle("position");if("fit"===t){e.setStyles(e.getAdjustedDimensions({scale:"contain",width:this.getWidth(),height:this.getHeight()}));"static"===l&&o.setStyle("position","relative")}else"fill"===t&&"static"===l&&o.setStyle("position","relative");if(this.get("overlay")){this.get("overlay").wrap(i);i.wrap(a)}else{a.appendChild(i);e.appendChild(a)}}var c=this.get("overlay");if(c){c.setStyle("opacity",1);var d=c.one(".sqs-video-opaque");if(!d){d=p.Node.create('<div class="sqs-video-opaque"></div>');c.appendChild(d)}var u=c.one(".sqs-video-icon");if(!u){u=p.Node.create('<div class="sqs-video-icon"></div>');c.appendChild(u)}this._setPlayButtonAttributes(this.get("inactive"));this.after("inactiveChange",function(e){this._setPlayButtonAttributes(e.newVal)},this);var g=c.one("img");if(g){g.fire("refresh");g.plug(p.Squarespace.Loader2,{load:true,mode:"fill"});g.fire("refresh")}}else{a?i.appendChild(this.get("video")):e.appendChild(this.get("video"));this._set("showingVideo",true)}this._cacheOverlayWrapperHeight();this.fire("loaded");this._loaded=true},_setPlayButtonAttributes:function(e){var t=this.get("overlay").one(".sqs-video-icon");if(e){t.removeAttribute("tabindex");t.removeAttribute("role");t.removeAttribute("aria-label")}else{t.setAttribute("tabindex",0);t.setAttribute("role","button");t.setAttribute("aria-label",u("Play"))}},_cacheOverlayWrapperHeight:function(){var e=this.get("host").get("parentNode");var t=e.get("offsetHeight");e.setData("cached-height",t)},_getOrCreateNode:function(e,t){var a=this.get("host").one(e);if(a)return a;return p.Node.create(t)},unload:function(){var e=this.get("host");e.setStyles({top:null});this.showOverlay();this.get("overlay")&&this.get("overlay").remove();this.get("video").remove();this._intrinsic&&e.one(".intrinsic").remove(true);if(this.get("overlay")){this.get("overlay").setStyle("opacity",0);e.appendChild(this.get("overlay"))}this._setIntrinsic();this._loaded=false},reload:function(){this.unload();this.load()},handleFullScreenChange:function(e){this.isFullScreen=!this.isFullScreen},showVideoIfNotInactive:function(){this.get("inactive")||this.showVideo()},bindUI:function(){if(this.get("overlay")){this.get("overlay").on("click",this.showVideoIfNotInactive,this);this.get("overlay").one(".sqs-video-icon").on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&this.showVideoIfNotInactive()},this)}this.after("modeChange",this.reload,this);this._resizeEmitter.on("resize",function(){"fit"===this.get("mode")&&this._resetFitTop();if(this.get("overlay")){var e=this.get("overlay").one("img");e&&e.fire("refresh")}},this);this._resizeEmitter.on("resize:end",function(){if("fit"===this.get("mode")&&!this.isFullScreen){this._cacheOverlayWrapperHeight();this._resetFitTop()}},this);this.prefixedFullScreenEvents.forEach(function(e){p.config.doc.addEventListener(e,this._onFullscreenChangeHandler)}.bind(this));p.Global.on("tweak:aftershow",function(){"fit"===this.get("mode")&&this._resetFitTop()},this);p.Global.after("tweak:afterclose",function(){"fit"===this.get("mode")&&setTimeout(p.bind(function(){this._resetFitTop()},this),1e3)},this)},showVideo:function(){if(this.get("showingVideo")||!this.get("overlay"))return;this._set("showingVideo",true);this._showOverlayOnOthers();var e=this.get("video");e.setStyle("opacity",0);this._intrinsic?this.get("host").one(".intrinsic-inner").appendChild(e):this.get("host").appendChild(e);var t=this.get("overlay");var a=t.one(".sqs-video-opaque");a.anim({opacity:1},{duration:1,start:function(){t.one(".sqs-video-icon").setStyle("visibility","hidden")},end:function(){this.get("video").setStyle("opacity",1);this.get("showingVideo")&&t.setStyle("visibility","hidden");t.hasClass("no-thumb")?a.setStyle("opacity",1):a.setStyle("opacity",0);t.one(".sqs-video-icon").setStyle("visibility",null)},context:this}).run()},showOverlay:function(){if(!this.get("showingVideo")||!this.get("overlay"))return;this._set("showingVideo",false);this.get("overlay").setStyle("opacity",0);this.get("overlay").setStyle("visibility",null);var e=this.get("video");e.anim({opacity:0},{duration:.3,start:function(){this.get("overlay").anim({opacity:1},{duration:.3}).run()},end:function(){e.remove()},context:this}).run()},refreshVideo:function(){if(!this.get("showingVideo"))return;var e=this.get("video");if("object"===this.get("type")){e.remove();var t=this.get("host");this._intrinsic?t.one(".intrinsic-inner").appendChild(e):t.appendChild(e)}else"iframe"===this.get("type")&&e.setAttribute("src",e.getAttribute("src"))},play:function(){if(!this.get("apiFriendly"))return;var e=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":e.postMessage('{"method": "play", "value": "true"}',"*");break;case"YouTube":e.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break}},pause:function(){if(!this.get("apiFriendly"))return;var e=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":e.postMessage('{"method": "pause", "value": "true"}',"*");break;case"YouTube":e.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break}},getWidth:function(){return this.get("video").getAttribute("width")},getHeight:function(){return this.get("video").getAttribute("height")},_setVariables:function(){var e=this.get("host");this._setIntrinsic();this._set("overlay",e.one(".sqs-video-overlay"));var t=p.Node.create(e.getAttribute("data-html"));var a=p.Node.create('<div class="sqs-video-invalid-wrapper"><div class="state-message">'+u("Invalid video embed.")+"</div></div>");var i;if(t)if(t.test("iframe")){i=t;this._set("type","iframe")}else if(t.test("object")){i=t;this._set("type","object")}else if(t.one("iframe")){i=t.one("iframe");this._set("type","iframe")}else if(t.one("object"))if(t.one("embed")){i=t.one("object");this._set("type","object")}else{i=a;this._set("type","invalid")}else{i=a;this._set("type","invalid")}else{i=a;this._set("type","invalid")}this._set("video",i);var n=e.getAttribute("data-provider-name");if((!n||""===n)&&"invalid"!==this.get("type")){var s=this.get("video").getAttribute("src");s.match("player.vimeo.com")?n="Vimeo":s.match("www.youtube.com")&&(n="YouTube")}this._providerName=n;this.isFullScreen=p.config.doc.fullScreen||p.config.doc.mozFullScreen||p.config.doc.webkitIsFullScreen;this.prefixedFullScreenEvents=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];if("invalid"===this.get("type"))e.addClass("video-invalid");else{this._augmentVideoSrc();e.removeClass("video-invalid")}},_setIntrinsic:function(){this._intrinsic="none"===this.get("mode")||"fit"===this.get("mode")},_resetFitTop:function(){var e=this.get("host");var t=e.get("parentNode").get("offsetHeight");t>p.config.win.innerHeight&&(t=e.get("parentNode").getData("cached-height")||p.config.win.innerHeight);var a=e.one(".intrinsic");a.setStyle("top",null);var i=a.get("offsetHeight");e.setStyle("top",(t-i)/2+"px")},_augmentVideoSrc:function(){var e=this.get("type");var t=this.get("video");var a="iframe"===e?t:t.one("embed")||t;var i=a.test("object")?"data":"src";var n=a.getAttribute(i);var s=n.split("?");var r=s[0];var o=s[1]||"";var l=p.QueryString.parse(o);var c=this._providerName;(this.get("overlay")||this.get("forceAutoplay"))&&(c===u("Wistia, Inc.")?l.autoPlay="true":"Animoto"===c?l.options="autostart":l.autoplay=1);var d=["Vimeo","YouTube","Wistia, Inc.","Animoto"];"object"!==e&&-1===d.indexOf(c)||g.isSecure()&&(r=g.securifyURL(r));r=r.replace("http:////","//");r=r.replace("https:////","//");if("iframe"===e)switch(c){case"YouTube":l.enablejsapi=1;this._set("apiFriendly",true);break}n=r+"?"+p.QueryString.stringify(l);a.setAttribute(i,n)},_showOverlayOnOthers:function(){p.all(".sqs-video-wrapper").each(function(e){if(e===this.get("host"))return;e.videoloader.showOverlay()},this)}},{NS:"videoloader",ATTRS:{apiFriendly:{value:false,readOnly:true},inactive:{value:false},load:{value:true},mode:{value:"none",validator:function(e){return-1!==["none","fit","fill",null].indexOf(e)}},overlay:{value:null,readOnly:true},showingVideo:{value:false,readOnly:true},type:{value:null,readOnly:true},video:{value:null,readOnly:true},forceAutoplay:{value:false}}})},"1.0",{requires:["base","node","plugin","querystring","squarespace-dom-emitters-resize","squarespace-image-loader","squarespace-plugin-node-destroy-notifier","squarespace-ui-base"]})},8063:function(e,t,a){var i=a(24).t;var n=a(1078);YUI.add("squarespace-ui-base",function(u){u.namespace("Squarespace");u.mix(u.Node.DOM_EVENTS,{message:true});u.Squarespace.DIALOG_ZINDEX_BASE=3e4;u.Anim._intervalTime=10;var g=Number;u.Anim.DEFAULT_SETTER=function(e,t,a,i,n,s,r,o){var l=e._node,c=l._node,d=r(n,g(a),g(i)-g(a),s);if(null===l._node){false;return}if(c)if("style"in c&&(t in c.style||t in u.DOM.CUSTOM_STYLES)){o=o||"";l.setStyle(t,d+o)}else"attributes"in c&&t in c.attributes?l.setAttribute(t,d):t in c&&(c[t]=d);else l.set?l.set(t,d):t in l&&(l[t]=d)};u.Squarespace.TextShrink=u.Base.create("TextShrink",u.Plugin.Base,[],{initializer:function(){var e=this.get("host");u.Lang.isValue(this.get("parentEl"))||this.set("parentEl",e.ancestor());this._setupEl();u.on("domready",this.refresh,this);this._resizeEvent=u.on("resize",function(){this._timeout&&this._timeout.cancel();this._timeout=u.later(100,this,this.refresh)},u.config.win,this);this._tweakChange=u.Global.on("tweak:change",this.refresh,this);this._tweakSaveResetClose=u.Global.on(["tweak:save","tweak:reset","tweak:close"],this.refresh,this)},refresh:function(){this._reset();this._setupEl();this._adjust()},isOverflowing:function(){var e=this._getWidths();Math.abs(e.el-e.parentEl)<=3&&(e.el=e.parentEl=Math.min(e.el,e.parentEl));return e.el>e.parentEl},_adjust:function(){var e=this.get("host");var t=this._getWidths();if(this.isOverflowing()){var a=this._getStyleValue(e,"fontSize");a=t.parentEl/t.el*a;this._setFontSize(Math.floor(a))}return true},_setFontSize:function(e){var t=this.get("host");var a=this.get("minFontSize");a&&e<a&&(e=a);isNaN(e)||t.setStyle("fontSize",e+"px")},_getStyleValue:function(e,t){return parseInt(e.getStyle(t),10)},_getWidths:function(){var e=this.get("host");var t=this.get("parentEl");var a=e.get("scrollWidth");var i=this._getStyleValue(t,"paddingLeft")+this._getStyleValue(t,"paddingRight");var n=t.get("offsetWidth")-i;0!==a&&u.Lang.isValue(a)||(a=e.get("offsetWidth"));return{parentEl:n,el:a}},_setupEl:function(){var e=this.get("host");e.setAttribute("data-shrink-original-size",this._getStyleValue(e,"fontSize"));this.letterSpacing=this._getStyleValue(e,"letterSpacing")/e.getAttribute("data-shrink-original-size")+"em";e.setStyle("letterSpacing",this.letterSpacing)},_reset:function(){var e=this.get("host");e.setStyles({letterSpacing:null,fontSize:null})},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChange&&this._tweakChange.detach();this._tweakSaveResetClose&&this._tweakSaveResetClose.detach()}},{ATTRS:{minFontSize:{value:11},parentEl:{value:null}},NS:"TextShrink"});u.Squarespace.SimpleFlexibleGrid=u.Base.create("SimpleFlexibleGrid",u.Plugin.Base,[],{initializer:function(){this._stylesheetEl=u.Node.create("<style></style>");this.get("host").append(this._stylesheetEl);this._resizeEvent=u.on("resize",this.syncUI,u.config.win,this);this.syncUI()},syncUI:function(){var e;e=this.get("minWidth")?Math.floor(this.get("container").get("offsetWidth")/this.get("minWidth")):Math.ceil(this.get("container").get("offsetWidth")/this.get("maxWidth"));this._stylesheetEl.set("innerHTML",this.get("selector")+"{width:"+100/e+"% !important;}");this.get("host").fire("simpleFlexibleGridSyncUI")},destructor:function(){this._stylesheetEl.remove();this._resizeEvent.detach()}},{ATTRS:{container:{},selector:{},maxWidth:{},minWidth:{}},NS:"simple-flexible-grid"});u.Squarespace.Mouse={lastX:100,lastY:100,client:{lastX:100,lastY:100},debug:function(){this.isDebugging=true;if(!this._debugNode){this._debugNode=u.one(u.config.doc.body).appendChild("<div></div>");this._debugNode.setStyles({position:"fixed",width:50,height:50,borderRadius:"50%",background:"rgba(20, 170, 255, 0.5)",marginLeft:-25,marginTop:-25,zIndex:Math.pow(10,5),pointerEvents:"none"})}this._debugNode.setStyles({top:u.Squarespace.Mouse.lastY,left:u.Squarespace.Mouse.lastX})}};u.Object.getValue(u.config.win,"Static.SQUARESPACE_CONTEXT.authenticatedAccount".split("."))&&u.on(u.UA.mobile?"touchmove":"mousemove",function(e){u.Squarespace.Mouse.lastX=e.pageX;u.Squarespace.Mouse.lastY=e.pageY;u.Squarespace.Mouse.client.lastX=e.clientX;u.Squarespace.Mouse.client.lastY=e.clientY;u.Squarespace.Mouse.isDebugging&&u.Squarespace.Mouse.debug()},u.one("html"));u.Squarespace.Image={loadAndFit:function(e,t){var a=new Image;a.src=t;u.one(a).on("load",function(e,t,a){t.set("src",a.src);t.resizeToParent({scale:"cover"})},this,e,a)},straighten:function(e,t,a,i){var n=(i<0?360-i:i)%360,s=n;n>=90&&(s=n%90-90);n>=180&&(s=-1*n%180-180);n>=270&&(s=n%270-90);var r=Math.abs(s)*(Math.PI/180);var o;o=a>t?(t*Math.cos(r)+a*Math.sin(r))/t:(a*Math.cos(r)+t*Math.sin(r))/a;e.setStyle("transform","rotate("+i+"deg) scale("+Math.abs(o)+")")}};u.Squarespace.Position=Class.create({initialize:function(e){this.EDGE_MARGIN=20;this.avoidElX=e.avoidElX;this.avoidElY=e.avoidElY;this.xdir=e.xdir;this.ydir=e.ydir;this.x=e.x;this.y=e.y;this.xo=e.xo?e.xo:0;this.yo=e.yo?e.yo:0;this.w=e.w;this.h=e.h;this.initialX=this.getX();this.initialY=this.getY()},setX:function(e){this.x=e},setY:function(e){this.y=e},getX:function(){return this.x+this.getXO()},getY:function(){return this.y+this.getYO()},getXY:function(){return[this.getX(),this.getY()]},getXAdj:function(){return this.initialX-this.getX()},getYAdj:function(){return this.initialY-this.getY()},getXO:function(){return(this.avoidElX&&"right"===this.xdir?this.avoidElX.get("offsetWidth"):0)+this.xo},getYO:function(){return(this.avoidElY&&"top"===this.ydir?-this.avoidElY.get("offsetHeight"):0)+this.yo},isRightViolation:function(){return this.x+this.w-Math.abs(this.getXO())+this.EDGE_MARGIN>u.one(document.body).get("winWidth")},isLeftViolation:function(){return this.x-Math.abs(this.getXO())-this.EDGE_MARGIN<0},isTopViolation:function(){return this.y-Math.abs(this.getYO())-this.EDGE_MARGIN<u.one(document.body).get("docScrollY")},isBottomViolation:function(){return this.y+this.h-Math.abs(this.getYO())+this.EDGE_MARGIN>u.one(document.body).get("winHeight")+u.one(document.body).get("docScrollY")},reflectFix:function(){if("right"===this.xdir&&this.isRightViolation()){this.xdir="left";this.getX=function(){return this.x-this.w-this.getXO()+11}}else if("left"===this.xdir&&this.isLeftViolation()){this.xdir="right";this.getX=function(){return this.x+this.w+this.getXO()}}if("bottom"===this.ydir&&this.isBottomViolation()){this.ydir="top";this.getY=function(){return this.y-this.h-this.getYO()};console.log("bottom violation .. now "+this.getY())}else if("top"===this.ydir&&this.isTopViolation()){this.ydir="bottom";this.getY=function(){return this.y+this.h+this.getYO()};console.log("top violation")}if(this.getY()-this.EDGE_MARGIN<0){this.getY=function(){return u.one(document.body).get("winHeight")-this.h-this.EDGE_MARGIN};this.ydir="bottom"}else if(this.getY()+this.h+this.EDGE_MARGIN>u.one(document.body).get("winHeight")+u.one(document.body).get("docScrollY")){this.getY=function(){return u.one(document.body).get("winHeight")+u.one(document.body).get("docScrollY")-this.EDGE_MARGIN-this.h};this.ydir="top"}if(this.getX()-this.EDGE_MARGIN<0){this.getX=function(){return this.EDGE_MARGIN};this.ydir="left"}else if(this.getX()+this.w+this.EDGE_MARGIN>u.one(document.body).get("winWidth")){this.getX=function(){return u.one(document.body).get("winWidth")-this.w-this.EDGE_MARGIN};this.ydir="right"}if(this.getY()<u.one(document.body).get("docScrollY")){console.log("fixing y offscreen issues.");this.yo=u.one(document.body).get("docScrollY")+this.EDGE_MARGIN-this.y}},nudgeFix:function(){this.isRightViolation()?this.getX=function(){return u.one(document.body).get("winWidth")+u.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN}:this.isLeftViolation()&&(this.getX=function(){return this.EDGE_MARGIN});this.isBottomViolation()?this.getY=function(){return u.one(document.body).get("winHeight")+u.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN}:this.isTopViolation()&&(this.getY=function(){return this.EDGE_MARGIN})},overflowFix:function(){this.isRightViolation()?this.x=u.one(document.body).get("winWidth")+u.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN:this.isLeftViolation()&&(this.x=this.EDGE_MARGIN);this.isBottomViolation()?this.y=u.one(document.body).get("winHeight")+u.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN:this.y-Math.abs(this.getXO())-this.EDGE_MARGIN<0&&(this.y=this.EDGE_MARGIN)}});u.Squarespace.ToolTipManager={canShow:true,disableTooltips:function(){this.canShow=false;if(this.currentTip){this.currentTip.hide();this.currentTip=null}},enableTooltips:function(){this.canShow=true}};u.Squarespace.ToolTip=Class.create({initialize:function(e){this.params=e;var t=u.all(this.params.target);if(0===t.size()){false;return}void 0===this.params.showTimeout&&(this.params.showTimeout=1200);void 0===this.params.width&&(this.params.width=250);void 0===this.params.style&&(this.params.style="info");this.mouseOffset=15;this.events=[];t.each(function(e){this.events.push(e.on("mouseover",function(e){this.lastX=e.pageX;this.lastY=e.pageY;this.move();if(this.showTimer)return;this.showTimer=u.later(this.params.showTimeout,this,this.show)},this));this.events.push(e.on("mouseout",function(e){if(this.showTimer){this.showTimer.cancel();this.showTimer=null}this.hide()},this));this.events.push(e.on("click",function(e){if(this.params.clickToShow){this.show();e.halt()}else this.hide()},this))},this);this.events.push(u.Global.on("manager:change-mode",function(e){this.hide()},this))},destroy:function(){for(var e=0;e<this.events.length;++e)this.events[e].detach();if(this.el){this.el.remove();this.el=null}this.events=[];this.destroyed=true;this.shown=false},move:function(){if(!this.el)return;this.position.x=this.lastX;this.position.y=this.lastY;this.a?this.el.setStyles({left:this.position.getX()+"px"}):this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()+"px"})},show:function(){if(this.el||this.destroyed||this.shown)return;if(!u.Squarespace.ToolTipManager.canShow&&!this.params.dialogTooltip)return;this.el=u.Node.create('<div class="sqsp-tooltip "'+this.params.style+'><div class="title">'+this.params.title+"</div></div>");this.params.body&&this.el.append('<div class="description">'+this.params.body+"</div>");u.one(document.body).append(this.el);this.position=new u.Squarespace.Position({xdir:"right",ydir:"bottom",x:this.lastX,y:this.lastY,xo:this.mouseOffset,yo:this.mouseOffset,w:this.el.get("offsetWidth"),h:this.el.get("offsetHeight")});this.position.reflectFix();this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()-this.position.yo+"px",width:this.params.width+"px",zIndex:2000000001,opacity:0});this.params.icon&&this.el.setStyle("backgroundImage","url("+this.params.icon+")");this.shown=true;this.a=new u.Anim({node:this.el,to:{top:this.position.getY(),opacity:1},duration:.3,easing:u.Easing.easeOutStrong});this.a.on("end",function(){this.a=null},this);this.a.run();u.Squarespace.ToolTipManager.currentTip=this},hide:function(){if(!this.el)return;var e=new u.Anim({node:this.el,to:{top:this.position.getY()+15,opacity:0},duration:.3,easing:u.Easing.easeOutStrong});e.on("end",function(){this.get("node").remove()});e.run();this.el=null;this.a=null;this.shown=false}});u.Squarespace.Lightbox=Class.create({defaultOpts:{overlayShowDuration:.35,contentShowDuration:.6,margin:0,opacity:1,transition:"fade",clickAnywhereToExit:true,name:null,content:"<div>&nbsp;</div>",theme:"black",overlayStyle:"orb"},name:"Lightbox",initialize:function(e){this.enabled=true;this.params=u.merge(this.defaultOpts,e);this.params.containerNode||(this.params.containerNode=u.one("body"));this.params.transition||(this.params.transition="fade");if(!this.params.zIndex){u.Squarespace.DIALOG_ZINDEX_BASE+=10;this.params.zIndex=u.Squarespace.DIALOG_ZINDEX_BASE}this.events=[]},enable:function(){this.enabled=true;this.overlayEl&&this.overlayEl.setStyle("display","block")},disable:function(){this.enabled=false;this.overlayEl&&this.overlayEl.setStyle("display","none")},getContentEl:function(){return this.contentEl},show:function(){var e="sqs-lightbox"+(this.params.name?" sqs-lightbox-"+this.params.name:"");u.Lang.isArray(this.params.classNames)&&(e=e+" "+this.params.classNames.join(" "));this.contentEl=u.Node.create('<div class="'+e+'"></div>');u.Lang.isArray(this.params.content)?this.params.content.forEach(function(e){this.contentEl.append(e)},this):this.contentEl.append(this.params.content);this.contentEl.setStyles({position:"fixed",opacity:"0",zIndex:this.params.zIndex});this.events.push(u.on("resize",this.position,u.one(window),this));this.params.disableNormalClose||u.Squarespace.EscManager.addTarget(this);this.params.containerNode.append(this.contentEl);if(this.params.contentOnly)this._showContent();else{var t="sqs-lightbox-overlay"+(this.params.name?" sqs-lightbox-overlay-"+this.params.name:"")+" "+this.params.theme;this.params.name&&(t+=" sqs-lightbox-overlay-"+this.params.name);this.params.overlayStyle&&(t+=" sqs-lightbox-overlay-style-"+this.params.overlayStyle);u.Lang.isArray(this.params.classNames)&&(t=t+" "+this.params.classNames.join(" "));this.overlayEl=u.Node.create('<div class="'+t+'"></div>');this.overlayEl.setStyles({zIndex:this.params.zIndex-1});this.params.containerNode.append(this.overlayEl);this.fire("showing");this.a=u.Squarespace.Transitions.getTransition({el:this.overlayEl,opacity:this.params.opacity,name:"fade",direction:"in",duration:this.params.overlayShowDuration});this.a.on("end",function(){this.fire("overlay-visible");this.a=null;this._showContent()},this);this.a.run();this.params.disableNormalClose?this.events.push(u.on("click",function(e){e.halt()},this.overlayEl,this)):this.events.push(u.on("click",this.close,this.overlayEl,this))}this.params.clickAnywhereToExit&&this.events.push(u.on("click",this.hide,this.contentEl,this))},position:function(){if(!this.enabled)return;var e=u.one(document).get("winWidth");var t=u.one(document).get("winHeight");var a,i;a=e<this.naturalW+2*this.params.margin?e-2*this.params.margin:this.naturalW;i=t<this.naturalH+2*this.params.margin?t-2*this.params.margin:this.naturalH;var n=(e-a)/2;var s=(t-i)/2;if(this.contentAttached){this.contentEl.setStyles({left:n+"px",top:s+"px",width:a+"px"});this.params.noHeightConstrain||this.contentEl.setStyles({height:i+"px"});this.resizeTarget&&this.resizeTarget.resizeToParent({scale:"contain"})}this.fire("position",{width:a,height:i,verticalWidth:e,verticalHeight:t,maxWidth:e-2*this.params.margin,maxHeight:t-2*this.params.margin})},_showContent:function(){this.contentAttached=true;this.resizeTarget=this.contentEl.one(".resize-target");this.naturalW=this.contentEl.one("*").get("offsetWidth");this.naturalH=this.params.height||this.contentEl.one("*").get("offsetHeight");this.position();this.fire("content-ready");var e=u.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"in",duration:this.params.contentShowDuration});e.on("end",function(){this.fire("content-visible")},this);e.run()},close:function(e){if(!this.params.clickAnywhereToExit&&(!e||this.overlayEl&&this.overlayEl.compareTo(e.target)))return;this.hide()},hide:function(){var e;if(!this.enabled)return;this.a&&this.a.stop();this.a=null;this.fire("hiding");u.Squarespace.EscManager.removeTarget(this);if(this.overlayEl){e=u.Squarespace.Transitions.getTransition({el:this.overlayEl,name:"fade",direction:"out",duration:this.params.overlayShowDuration});this.params.overlayShowDuration>this.params.contentShowDuration&&(this.a=e);e.run()}e=u.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"out",duration:this.params.contentShowDuration});this.a||(this.a=e);e.run();this.a.on("end",function(){this.destroy();this.fire("hidden")},this)},destroy:function(){for(var e=0;e<this.events.length;++e)this.events[e].detach();this.contentEl&&this.contentEl.remove();this.overlayEl&&this.overlayEl.remove();this.contentEl=null;this.overlayEl=null;this.events=[]}});u.augment(u.Squarespace.Lightbox,u.EventTarget);u.Squarespace.CustomAnim=Class.create({initialize:function(e){this.params=e},cancel:function(){},stop:function(){}});u.augment(u.Squarespace.CustomAnim,u.EventTarget);u.augment(u.Squarespace.CustomAnim,u.Attribute);u.Squarespace.Transitions={STANDARD_DURATION:.3,getTransition:function(e){if(!e.el||!e.el._node){false;return new u.Anim}e.duration||(e.duration=u.Squarespace.Transitions.STANDARD_DURATION);return u.Squarespace.Transitions.transitionsByName[e.name](e)},transitionsByName:{fade:function(e){return new u.Anim({node:e.el,to:{opacity:u.Lang.isValue(e.opacity)?e.opacity:"in"===e.direction?1:0},duration:u.Squarespace.Transitions.STANDARD_DURATION,easing:u.Easing.easeOutStrong})},scale:function(t){return new(Class.extend(u.Squarespace.CustomAnim,{run:function(){t.opacity||(t.opacity=1);u.Lang.isValue(t.duration)||(t.duration=u.Squarespace.Transitions.STANDARD_DURATION);var e=this.params.el;if("in"===this.params.direction){e.setStyles({transform:"scale(.95)",opacity:0});u.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:t.duration+"s",transitionTimingFunction:"ease-out","backface-visibility":"hidden"});u.later(20,e,e.setStyles,{transform:"scale(1)",opacity:t.opacity})}else{e.setStyles({transform:"scale(1)",opacity:t.opacity});u.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:t.duration+"s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"});u.later(20,e,e.setStyles,{transform:"scale(.95)",opacity:0})}u.later(1e3*t.duration+100,this,function(){this.fire("end",{_event:true})})}}))(t)},none:function(e){return new(Class.extend(u.Squarespace.CustomAnim,{run:function(){"in"===this.params.direction?this.el.setStyle("opacity",1):this.el.setStyle("opacity",0);this.fire("end")}}))(e)}}};u.Squarespace.Effects={bounce:function(e){e.setStyles({transform:"scale(1)"});u.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:".1s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"});u.later(20,e,e.setStyles,{transform:"scale(1.1)"});u.later(100,e,e.setStyles,{transform:"scale(1)"})},focus:function(e){e.setStyles({boxShadow:"0px 0px 0px rgb(20, 170, 255)"});u.later(10,e,e.setStyles,{transitionProperty:"boxShadow",transitionDuration:".2s",transitionTimingFunction:"ease-out"});u.later(20,e,e.setStyles,{boxShadow:"0px 0px 10px rgb(20, 170, 255)"});u.later(200,e,e.setStyles,{boxShadow:null})},blink:function(e){var t=new u.Anim({node:e,to:{opacity:0},duration:.6,easing:u.Easing.easeOutStrong});t.on("end",function(){var e=new u.Anim({node:this.get("node"),to:{opacity:1},duration:.6,easing:u.Easing.easeOutStrong});e.on("end",function(){});e.run()});t.run()},shimmy:function(e){e.setStyles({transform:"translateX(0px)"});u.UA.safari?u.later(10,e,e.setStyles,{webkitTransitionProperty:"-webkit-transform",webkitTransitionDuration:".3s",webkitTransitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"}):u.later(10,e,e.setStyles,{transitionProperty:"transform",transitionDuration:".3s",transitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"});u.later(20,e,e.setStyles,{transform:"translateX(-33px)"});u.later(200,e,e.setStyles,{transform:null})}};u.augment(u.Node,Class.create({intersectXY:function(e,t){var a=this.get("region");return a.left<e&&e<a.right&&a.top<t&&t<a.bottom},forceClass:function(e,t){this.toggleClass(e,!!t)},data:function(e){var t=this._node;if(e)while(t){if(t.data&&-1!==t.className.indexOf(e))return t.data;t=t.parentNode}else while(t){if(t.data)return t.data;t=t.parentNode}return null},setNodeData:function(e){this._node.data=e}}));u.Squarespace.RelativeTimeDisplay=u.Base.create("RelativeTimeDisplay",u.Plugin.Base,[],{initializer:function(){this.timer=u.later(this.get("interval"),this,this.syncUI,{},true);this.syncUI()},syncUI:function(){var e=Math.floor(((new Date).getTime()-this.get("date").getTime())/1e3);e<60?0===e?this.get("host").setContent(i("just now")):this.get("host").setContent(i("about {secondsDifference} seconds ago",{secondsDifference:e})):this.get("host").setContent(n(this.get("date"),true))},destructor:function(){this.timer.cancel()}},{NS:"RelativeTimeDisplay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{date:{valueFn:function(){return new Date}},interval:{value:5e3}}});u.Squarespace.PositionAnimator=u.Base.create("PositionAnimator",u.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop"));this.set("originalLeft",this.get("host").get("offsetLeft"));this.previousPosition=this.get("host").getStyle("position")},release:function(e){var t=this.get("host").get("offsetTop");var a=this.get("host").get("offsetLeft");var i=this.get("baseSpeed")+(e?0:.2*Math.random());var n=e?0:200*Math.random();var s=this.get("originalTop")-t;var r=this.get("originalLeft")-a;this.get("host").setStyles({position:"relative",top:s,left:r,transition:"none"});var o=this;var l=this.get("host").anim({top:0,left:0},{from:{top:s,left:r},duration:i,end:function(){if(!this.get("node")._node)return;this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null});o.get("releasedFn")&&o.get("releasedFn")();o.fire("released")}});u.later(n,l,l.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:false},baseSpeed:{value:.2}}});u.Anim.behaviors.translate={set:function(e,t,a,i,n,s,r){var o=r(n,parseInt(a[0],10),parseInt(i[0],10)-parseInt(a[0],10),s);var l=r(n,parseInt(a[1],10),parseInt(i[1],10)-parseInt(a[1],10),s);e._node.setStyles({transform:"translate("+o+"px, "+l+"px)"})},get:function(e){false;return[0,0]}}},"1.0",{requires:["anim","attribute","base","event-custom","node","plugin"]})},8065:function(e,t){YUI.add("squarespace-widgets-gismo",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.Gismo=e.Base.create("Gismo",e.Widget,[e.Squarespace.GismoBase])},"1.0",{requires:["base","squarespace-gismo","widget"]})},8071:function(e,t){YUI.add("squarespace-widgets-lightbox2-overlay",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.Lightbox2Overlay=e.Squarespace.Lightbox2Overlay=e.Base.create("LightboxOverlay",e.Squarespace.Widgets.Gismo,[],{destructor:function(){if(e.Lang.isValue(this._overlayEl)){this._overlayEl.destroy(true);this._overlayEl=null}},renderUI:function(){this._overlayEl=e.Node.create('<div class="sqs-lightbox-overlay"></div>');this._overlayEl.addClass("sqs-lightbox-overlay-"+this.get("overlayStyle"));"light"===this.get("theme")&&this._overlayEl.addClass("light");this.get("contentBox").appendChild(this._overlayEl);this.get("contentBox").plug(e.Squarespace.Plugin.ScrollLock);this.show()},show:function(){this._overlayEl.setStyles({zIndex:"10000000"});var e=this._anim(this._overlayEl,{opacity:this.get("opacity")},{duration:this.get("speed")});e.on("end",function(){this.fire("shown")},this);e.run()},overlayHideAndDestroy:function(){this.once("hidden",this.destroy);this._hide()},_hide:function(){this.fire("hide");var e=this._anim(this._overlayEl,{opacity:0},{duration:this.get("speed")});e.on("end",function(){this.fire("hidden")},this);this.get("destroyed")?this.fire("hidden"):e.run()},_getContainer:function(){return this._overlayEl}},{NS:"overlay",ATTRS:{opacity:{value:.95},overlayStyle:{value:"default"},theme:{value:"dark"},container:{getter:"_getContainer"},speed:{value:.3}}})},"1.0",{requires:["base","node","squarespace-plugin-scroll-lock","squarespace-widgets-gismo"]})},8096:function(e,t){YUI.add("squarespace-gallery-ng",function(e){e.namespace("Squarespace");e.Squarespace.Gallery2=e.SQS.Gallery.Gallery2;e.Squarespace.GalleryDesigns2=e.SQS.Gallery.Designs},"1.0",{requires:["@sqs/yui-gallery"]})},8097:function(e,t){YUI.add("squarespace-legacy-class",function(e){e.namespace("Squarespace.Legacy");e.Squarespace.Legacy.Class={create:function(e){var t;t=e.initialize?function(){this.initialize.apply(this,arguments)}:function(){};t.prototype=e;t.extend=function(e){return Class.extend(this,e)};t.specialize=function(e,t){var a=Class.specialize(this,e);a._parent=t;return a};return t},extend:function(n,e){e.initialize||(e.initialize=n.prototype.initialize);var t=Class.create(e);var a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(var i in n.prototype)t.prototype[i]?"function"===typeof t.prototype[i]&&a.test(t.prototype[i])&&(t.prototype[i]=function(a,i){return function(){var e=this._super;this._super=n.prototype[a];var t=i.apply(this,arguments);this._super=e;return t}}(i,t.prototype[i])):t.prototype[i]=n.prototype[i];t.prototype.superclass=n.prototype;return t},specialize:function(e,t){var a=Class.extend(e,t);return new a}}},"1.0",{requires:[]})},8099:function(e,t){YUI.add("squarespace-follow-buttons",function(i){i.namespace("Squarespace");i.Squarespace.FollowButtonUtils=function(){var a=function(e){var t=e.one(".sqs-follow-button");if(t){var a=i.Widget.getByNode(t);a&&a.destroy()}};var t=function(e){a(e);var t=e.getAttribute("data-username");t&&t.length&&new i.Squarespace.Widgets.FollowButton({username:t}).render(e)};return{renderAll:function(){i.all(".squarespace-follow-button").each(function(e){t(e)})}}}();i.on("domready",function(){i.Squarespace.FollowButtonUtils.renderAll()})},"1.0",{requires:["squarespace-follow-button"]})},8100:function(e,t,a){var i=a(24).t;var n=a(802);YUI.add("squarespace-follow-button",function(a){a.namespace("Squarespace.Widgets").FollowButton=a.Base.create("followButton",a.Widget,[],{renderUI:function(){this.get("contentBox").setContent(n('<a href="https://twitter.com/{username}" class="twitter-follow-button" data-show-count="false">'+i("Follow @{username}")+"</a>",{username:this.get("username")}))},syncUI:function(){var e=function(){false};var t=function(){this.show()};a.Get.script("//platform.twitter.com/widgets.js",{onSuccess:t,onFailure:e,onTimeout:e,timeout:1e4,context:this,win:a.config.win})}},{ATTRS:{username:{value:""},visible:{value:false}},CSS_PREFIX:"sqs-follow-button"})},"1.0",{requires:["base","widget"]})},8101:function(module,exports,__webpack_require__){var Flag=__webpack_require__(87);var BetaFeaturesUtils=__webpack_require__(114);var trackEvent=__webpack_require__(1596);var network=__webpack_require__(228);var GoogleReCaptchaAPI=__webpack_require__(1937);var pixelConstants=__webpack_require__(3436);var FormHandler=__webpack_require__(3500);var CensusUtils=__webpack_require__(1622);YUI.add("squarespace-form-submit",function(Y){Y.namespace("Squarespace");var FormSubmitV1=Y.Base.create("FormSubmitV1",Y.Base,[],{initializer:function(){this._submitButton=this.get("formNode").one("[type=submit]");this._submitButtonText=this._submitButton.get("value");var e=this._getMultiFieldVal;this._typeGetterMap={date:e,name:e,time:e,address:e,phone:this._getPhoneFieldVal,radio:this._getRadioFieldVal,checkbox:this._getCheckFieldVal,select:this._getSelectVal,likert:this._getLikertVal,hidden:this._getHiddenVal};this._defaultGetter=this._getSingleFieldVal;Y.Global.publish("form:submitSuccess")},submit:function e(t,a,i,n,s){var r=this.get("formNode");var o;if("object"===typeof t){o=t.formId;a=t.collectionId;i=t.objectName;n=t.isOverlayForm;s=t.submitButtonText}else o=t;try{if(r.hasClass("submitting"))return;this._clearErrors();this._lock();var l=GoogleReCaptchaAPI.getCaptchaContainer(Y.config.win,this.get("formNode").getDOMNode());if(l){var c=GoogleReCaptchaAPI.validate(Y.config.win,l);c?this._saveFormSubmission(o,a,i,n,s,c):this._submitFailure(FormHandler.strings.CAPTCHA_INCOMPLETE_ERROR)}else this._saveFormSubmission(o,a,i,n,s)}catch(e){this._submitFailure(FormHandler.strings.SUBMIT_ERROR)}finally{return false}},_createErrorNode:function(e){return Y.Node.create('<div class="field-error">'+e+"</div>")},_clearErrors:function(){var e=this.get("formNode");e.all(".field-error").each(function(e){e.remove()});e.all(".form-item.error").each(function(e){e.removeClass("error")})},_lock:function(){this.get("formNode").addClass("submitting");this._submitButton.set("value",FormHandler.strings.SUBMIT_TEXT_IN_PROGRESS)},_unlock:function(){this.get("formNode").removeClass("submitting");this._submitButton.set("value",this._submitButtonText)},_saveFormSubmission:function(a,i,n,s,r,o){var l={withCredentials:true};network.post("/api/form/FormSubmissionKey",{},l).then(function(e){if(e.data.key){var t={key:e.data.key,formId:a,collectionId:i,objectName:n,isOverlayForm:s,submitButtonText:r,form:Y.JSON.stringify(this._getData()),captchaKey:o};CensusUtils.addIntraPageEventFields(t);network.post("/api/form/SaveFormSubmission",t,l).then(this._submitSuccess.bind(this)).catch(this._submitFailure.bind(this))}else this._submitFailure(e)}.bind(this)).catch(this._submitFailure.bind(this))},_submitSuccess:function(){var e=this.get("formNode");e&&(e.hasClass("newsletter-form")||e.getById(pixelConstants.NEWSLETTER_OVERLAY_NODE_ID))&&trackEvent.trackSubscribeNewsletter();Y.Global.fire("form:submitSuccess");var t=e.getData("success-redirect");if(t){window.history.replaceState&&window.history.replaceState({},document.title,window.location.href);window.location.href=t;return}this._unlock();this._renderSuccess()},_submitFailure:function(e){var n=this.get("formNode");var t=n.hasClass("newsletter-form");var a;if(Y.Lang.isString(e))a=e;else if(FormHandler.errorCodes[e.status])a=FormHandler.errorCodes[e.status];else if(400===e.status&&e.data.errors){Y.Object.each(e.data.errors,function(e,t){var a=n.one("#"+t);var i=a.one(".title");i.insert(this._createErrorNode(e),"before");a.addClass("error")},this);if(!t){var i=FormHandler.strings.ERROR_ABOVE;var s=FormHandler.strings.ERROR_BELOW;n.prepend(this._createErrorNode(i));n.append(this._createErrorNode(s))}}else a=e.data.error?e.data.error:FormHandler.strings.UNKNOWN_ERROR;if(a){var r=this._createErrorNode(a);t?n.insertBefore(r,n.one(".newsletter-form-body")):n.prepend(r)}var o=n.one(".captcha-container");if(o){var l=this._submitButton.getDOMNode();l&&l.getAttribute("data-captcha-bound")&&(l.disabled=true);GoogleReCaptchaAPI.reset(Y.config.win,o)}this._unlock()},_renderSuccess:function(){var formEl=this.get("formNode");var messageNode=formEl.one(".form-submission-text");var htmlNode=formEl.one(".form-submission-html");var postSubmitHtml=htmlNode.getData("submission-html");formEl.all("*").each(function(e){e.addClass("hidden")});htmlNode.setHTML(postSubmitHtml);htmlNode.removeClass("hidden");messageNode.removeClass("hidden");messageNode.all("*").each(function(e){e.removeClass("hidden")});var win=Y.config.win;var formElY=formEl.getY();formElY<win.scrollY&&win.scrollTo(0,formElY-25);htmlNode.all("script").each(function(script){if(script.hasAttribute("src")){var dupeScriptDOMNode=document.createElement("script");var attributes=script.getDOMNode().attributes;Y.Array.each(attributes,function(e){dupeScriptDOMNode[e.name]=e.value});script.replace(dupeScriptDOMNode)}else try{eval(script.getHTML())}catch(e){false}},this)},_getData:function(){var t={};this.get("formNode").all(".form-item").each(function(e){t[e.get("id")]=this._getFieldData(e)},this);return t},_getFieldData:function(e){var t=this._typeGetterMap;var a=e.get("className").split(new RegExp("\\s"));var i;var n=false;Y.Array.each(a,function(e){Y.Object.hasKey(t,e)?i=t[e]:"section"===e&&(n=true)},this);if(n)return;i=i||this._defaultGetter;return i.call(this,e)},_getSingleFieldVal:function(e){var t=e.one(".field-element");if(t)return t.get("value");return null},_getMultiFieldVal:function(e){var t=[];e.all(".field-element").each(function(e){t.push(e.get("value"))});return t},_getPhoneFieldVal:function(e){var t=this._getMultiFieldVal(e);t&&3===t.length&&t.unshift("");return t},_getRadioFieldVal:function(e){return this._getCheckFieldVal(e)[0]},_getCheckFieldVal:function(e){var t=[];e.all("input").each(function(e){e.get("checked")&&t.push(e.get("value"))},this);return t},_getSelectVal:function(e){return e.one("select").get("value")},_getLikertVal:function(e){var a={};e.all(".item").each(function(e){var t;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))});Y.Lang.isValue(t)&&(a[e.getAttribute("data-question")]=t)});return a},_getHiddenVal:function(e){var t;Y.Lang.isValue(this._query)||(this._query=Y.QueryString.parse(window.location.search.replace(/^\?/,"")));var a=e.get("name");t=Y.Object.hasKey(this._query,a)?this._query[a]:e.get("value");return t.toString()}},{ATTRS:{formNode:{value:null,validator:Y.Squarespace.AttrValidators.isNullOrInstanceOf(Y.Node),writeOnce:"initOnly"}}});Y.Squarespace.FormSubmit=function(e){var t;t=e instanceof Element?BetaFeaturesUtils.isFeatureEnabled(Flag.VANILLA_FORM_HANDLER)?new FormHandler(Y.config.win,e):new FormSubmitV1({formNode:Y.Node(e)}):new FormSubmitV1(e);this.submit=t.submit.bind(t);if(BetaFeaturesUtils.isFeatureEnabled(Flag.VANILLA_FORM_HANDLER)){this.clearErrors=t.clearErrors.bind(t);this.createErrorNode=t.createErrorNode.bind(t)}else{this.clearErrors=t._clearErrors.bind(t);this.createErrorNode=t._createErrorNode.bind(t)}return this}},"1.0",{requires:["base","json","node","querystring-parse","squarespace-attr-validators","squarespace-util"]})},8102:function(e,t,a){var d=a(517);YUI.add("squarespace-gallery",function(l){l.namespace("Squarespace");var c=false;var e=l.Squarespace.Legacy.Class;l.augment(l.Node,e.create({outerWidth:function(e){var t=parseFloat(this.getComputedStyle("marginLeft"));var a=parseFloat(this.getComputedStyle("marginRight"));d.trackCaughtError("squarespace-gallery-deprecation","YNode#outerWidth invoked");return this.get("offsetWidth")+t+a},outerHeight:function(e){var t=parseFloat(this.getComputedStyle("marginTop"));var a=parseFloat(this.getComputedStyle("marginBottom"));d.trackCaughtError("squarespace-gallery-deprecation","YNode#outerHeight invoked");return this.get("offsetHeight")+t+a}}));l.Squarespace.Gallery=e.create({defaultOpts:{previous:false,next:false,itemSelector:false,startIndex:0,loop:false,design:"off",designOptions:{},autoplay:false,autoplayOptions:{timeout:1e3,resumeAfter:1e3,randomize:false},currentIndex:false,totalSlides:false,linked:false,keyboard:{previous:"down:37",next:"down:39"},renderWithCanvas:false,loaderOptions:{},updateContainerHeight:false,focusOnClick:false},getContainer:function(){return this.elems.container},getSlide:function(e){return this.elems.slides.item(e)},getCurrentSlide:function(){return this.elems.slides.item(this.data.currentIndex)},getCurrentSlideId:function(){return this.getCurrentSlide().getAttribute("data-slide-id")||this.data.currentIndex},getSlides:function(){return this.elems.slides},initialize:function(e){d.trackCaughtError("squarespace-gallery-deprecation","Y.Squarespace.Gallery initialized!");l.Lang.isBoolean(e.keyboard)&&e.keyboard&&delete e.keyboard;this.params=l.merge(this.defaultOpts,e);this.elems={};var t=l.one(this.params.slideshowElement);if(l.Lang.isNull(t))throw new Error("No gallery '"+this.params.slideshowElement+"' container found.");var a=this.params.itemSelector?t.all(this.params.itemSelector):t.get("children");this.elems.container=t;this.elems.slides=a;if(this.getContainer().getData("galleryInstance")){this.getContainer().getData("galleryInstance")._debug.warn("Node already bound to gallery instance.");return}this._debug=new l.Squarespace.Debugger({name:"Gallery",uid:true});this.getContainer().setData("galleryInstance",this);this.history=new l.HistoryHash;if(this.params.historyHash||this.history.get("itemId")){this.history=new l.HistoryHash;var i=this.history.get("itemId")||this.history.get(this.params.historyHash);var n;if(i){this.elems.slides.each(function(e,t){e.getAttribute("data-slide-id")===i&&(n=t)});l.Lang.isNumber(n)||(n=parseInt(this.history.get(this.params.historyHash),10));this.history.get("itemId")&&this.history.replaceValue("itemId",null);l.Lang.isNumber(n)&&(this.params.startIndex=n)}}this.data={currentIndex:this.params.startIndex,totalSlides:a.size()};this.events=[];if(this.data.totalSlides<=0)return false;if(!l.Squarespace.GalleryDesigns[this.params.design]){var s=[];for(var r in l.Squarespace.GalleryDesigns)s.push(r);throw new Error("Design '"+this.params.design+"' not found. Currently loaded designs: ["+s.join(", ")+"].")}this.design=new l.Squarespace.GalleryDesigns[this.params.design];this.design.gallery=this;this.design.options=l.merge(this.design.options,this.params.designOptions);this.params.previous&&l.all(this.params.previous).each(function(e){this.events.push(e.on("click",function(e){e.halt();this.previousSlide()},this))},this);this.params.next&&l.all(this.params.next).each(function(e){this.events.push(e.on("click",function(e){e.halt();this.nextSlide()},this))},this);this.params.focusOnClick&&a.each(function(e){e.on("click",function(){this.fire("changeIndex",a.indexOf(e))},this)},this);if(this.params.keyboard){var o=function(){if(this.params.keyboardWhenInFrame)return this.getContainer().inRegion(l.one(this.params.keyboardWhenInFrame).get("region"));return true};this.params.keyboard.previous&&this.events.push(l.on("key",function(){if(!o.call(this))return;this.previousSlide()},window,this.params.keyboard.previous,this));this.params.keyboard.next&&this.events.push(l.on("key",function(){if(!o.call(this))return;this.nextSlide()},window,this.params.keyboard.next,this))}this.params.linked&&l.Array.each(this.params.linked,function(e){this.linkGallery(e)},this);this.setup();this.fire("changeIndex",this.params.startIndex);this.isInitialized=true},linkGallery:function(t){function a(t,a){t&&this._changeIndex(a);l.Array.each(this.elems.linked,function(e){t!==e&&e._changeIndex(a)})}if(!this.elems.linked){this.on("changeIndex",function(e){a.call(this,false,e)},this);this.elems.linked=[]}this.elems.linked.push(t);t.on("changeIndex",function(e){a.call(this,t,e)},this)},setup:function(){this.on("changeIndex",this._changeIndex);this.loadSlides();this.design.setup(this.elems.container,this.elems.slides);if(this.params.autoplay){var t=this;setInterval(function(){if(t.params.autoplayOptions.randomize){var e=Math.ceil(Math.random()*t.data.totalSlides);while(e===t.data.currentIndex)e=Math.ceil(Math.random()*t.data.totalSlides);t.fire("changeIndex",e)}else t.nextSlide()},this.params.autoplayOptions.timeout)}c&&console.log("Y.Squarespace.Gallery.setup",[this.params,this.data,this.elems]);this.params.updateContainerHeight&&this.on("changeIndex",this.updateContainerHeight)},getSlideDimension:function(e,t){var a=this.elems.slides.item(e);var i=a;a.one("img,canvas")&&(i=a.one("img,canvas"));i&&"inline"===a.getStyle("display")&&(a=i);var n="width"===t?"offsetWidth":"offsetHeight";if(i.loader){if(!i.loader.get("loaded"))return i.loader.getDimensionForValue(t,a.get("width"===t?"offsetHeight":"offsetWidth"));return i.loader.get("node").get(n)}return a.get(n)},updateContainerHeight:function(){var t={container:this.elems.container};l.Lang.isObject(this.params.updateContainerHeight)&&(t=l.merge(t,this.params.updateContainerHeight));var a=this.getSlideDimension(this.data.currentIndex,"height");t.maxHeight&&a>t.maxHeight&&(a=t.maxHeight);var e=l.all(t.container);t.anim&&this._updateContainerHeightRanOnce?e.each(function(e){e.anim({},l.merge({to:{height:a},duration:.3,easing:l.Easing.easeOutStrong},t.anim)).run()}):e.setStyles({height:a});this._updateContainerHeightRanOnce=true},previousSlide:function(){var e=this.data.currentIndex-1;if(e<0&&!this.params.loop)return;this.fire("changeIndex",e)},nextSlide:function(){var e=this.data.currentIndex+1;if(e>=this.data.totalSlides&&!this.params.loop)return;this.fire("changeIndex",e)},beforeChange:function(e){if(!this.params.loop){this.params.next&&(e.toIndex>=this.data.totalSlides-1?l.all(this.params.next).addClass("disabled"):l.all(this.params.next).removeClass("disabled"));this.params.previous&&(e.toIndex<=0?l.all(this.params.previous).addClass("disabled"):l.all(this.params.previous).removeClass("disabled"))}this.fire("before-change",e)},afterChange:function(e){if(this.params.currentIndex||this.params.totalSlides){l.all(this.params.currentIndex).each(function(e){e.set("innerHTML",this.data.currentIndex+1)},this);l.all(this.params.totalSlides).each(function(e){e.set("innerHTML",this.data.totalSlides)},this)}this.params.historyHash&&this.history.replaceValue(this.params.historyHash,this.getCurrentSlideId());this.fire("after-change",e)},changeIndex:function(e){this.fire("changeIndex",e)},_changeIndex:function(e){if(l.Lang.isObject(e))return;if(!this.params.loop){e<0&&(e=0);e>=this.data.totalSlides&&(e=this.data.totalSlides-1)}e<0&&(e=this.data.totalSlides+e);if(this.isInitialized&&this.data.currentIndex===e)return;c&&console.log("Y.Squarespace.Gallery.changeIndex",[e]);var t=this.data.currentIndex;var a=e%this.data.totalSlides;var i=this.elems.slides;var n=t===this.data.totalSlides-1&&0===a;var s=0===t&&a===this.data.totalSlides-1;var r;t<a&&!n&&!s||t>a&&n&&!s?r="fwd":(t>a&&!s||t<a&&s)&&(r="rev");var o={fromIndex:t,toIndex:a,direction:r};this.beforeChange(o);i.filter(".active").removeClass("active");i.item(a).addClass("active");this.fire("change",o);this.data.currentIndex=a;this.afterChange(o)},loadSlides:function(e){var t=this.elems.container.all("img[data-src][data-image-dimensions][data-image-focal-point]");t.plug(l.Squarespace.Loader2,this.params.loaderOptions)}});l.augment(l.Squarespace.Gallery,l.EventTarget);l.Squarespace.GalleryDesigns={};l.Squarespace.GalleryDesigns.off=e.create({gallery:false,options:{},beforeChange:function(e){},afterChange:function(e){},change:function(e,t){},setup:function(){},getGallery:function(){return this.gallery},events:[]})},"1.0",{requires:["node","event-key","squarespace-image-loader","squarespace-legacy-class","squarespace-ui-base","history"]})},8103:function(e,t,a){var i=a(2026);YUI.add("squarespace-models-shopping-cart-facade",function(t){t.namespace("Squarespace.Singletons");var e=t.Base.create("ShoppingCartFacade",t.Base,[],{},{ATTRS:{id:{validator:t.Lang.isString},websiteId:{validator:t.Lang.isString},orderId:{validator:t.Lang.isString},created:{getter:function(e){if(!t.Lang.isValue(e))return null;return new Date(e)},setter:function(e){if(t.Lang.isDate(e))return e.getTime();return e},validator:t.Lang.isNumber},isPurchased:{value:false,validator:t.Lang.isBoolean},entries:{value:[],validator:t.Lang.isArray},shippingOptions:{value:[],validator:t.Lang.isArray},selectedShippingOption:{validator:t.Lang.isObject},shippingLocation:{validator:t.Lang.isObject},applicableTaxRules:{value:[],validator:t.Lang.isArray},coupons:{value:[],validator:t.Lang.isArray},validCoupons:{value:[],validator:t.Lang.isArray},invalidCoupons:{value:[],validator:t.Lang.isArray},subtotalCents:{validator:t.Lang.isNumber,value:0},subtotalAmount:{value:i.fromCents(0,"USD")},taxCents:{validator:t.Lang.isNumber,value:0},shippingCostCents:{validator:t.Lang.isNumber,value:0},discountCents:{validator:t.Lang.isNumber,value:0},grandTotalCents:{validator:t.Lang.isNumber,value:0},totalQuantity:{validator:t.Lang.isNumber,value:0},hasDigital:{validator:t.Lang.isBoolean,value:false},purelyDigital:{validator:t.Lang.isBoolean,value:false},requiresShipping:{validator:t.Lang.isBoolean,value:false}}});t.Squarespace.Singletons.ShoppingCart=new e},"1.0",{requires:["base"]})},8104:function(e,t){YUI.add("squarespace-spinner",function(t){t.namespace("Squarespace").Spinner=t.Base.create("Spinner",t.Widget,[],{renderUI:function(){this.get("boundingBox").addClass(this.get("color"));var e=this.get("size");t.Lang.isNumber(e)||this.get("boundingBox").addClass(e)},spin:function(){this.get("boundingBox").show()},stop:function(){this.get("boundingBox").hide()},addClass:function(e){this.get("boundingBox").addClass(e)}},{CSS_PREFIX:"sqs-spin",NS:"spinner",ATTRS:{size:{value:"default",setter:function(e){if(t.Lang.isNumber(e)){this.set("width",e);this.set("height",e)}return e}},color:{value:"light"}}})},"1.0",{requires:["base","widget"]})},8105:function(e,t,a){var i=a(24).t;YUI.add("squarespace-widgets-alert",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Alert=e.Base.create("alert",e.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:e.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:e.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:e.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(e){return new t(e)},ATTRS:{className:{value:"alert"},style:{value:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:i("Okay")}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},8106:function(e,t,a){var i=a(24).t;var n=a(2877);var r=a(757);var o=n.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-widgets-confirmation",function(n){n.namespace("Squarespace.Widgets");var t={CONFIRM_OR_REJECT:0,CONFIRM_OR_CANCEL:1,CONFIRM_ONLY:2,NO_BUTTONS:3};var s=n.Squarespace.Widgets.Confirmation=n.Base.create("confirmation",n.Widget,[n.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._posHelper=new n.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding"));this._resizeEmitter=new n.Squarespace.ResizeEmitter;if(this.get("escToCancel")){n.Squarespace.EscManager.addTarget(this);this.ignoreBodyClicks=true}var e=["show","hide","confirm","reject","cancel"];n.Array.each(e,function(e){this.publish(e,{emitFacade:true,broadcast:2})},this);this._timers=[]},destructor:function(){n.Squarespace.EscManager.removeTarget(this);this._resizeEmitter.destroy();this._resizeEmitter=null;this._posHelper=null;this._overlay=null;this._buttonsNode=null;this._cancelButton=null;this._rejectButton=null;this._confirmButton=null;while(0!==this._timers.length)this._timers.shift().cancel();this._timers=null;this.detachAll()},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("zIndex");var t=this.get("boundingBox");var a=this.get("contentBox");var i=this.constructor.TEMPLATE;n.Lang.isString(i)&&a.prepend(i);t.addClass(this.get("className"));n.Lang.isValue(e)&&t.setStyle("z-index",e);a.addClass("clear");a.one(".title").setContent(this.get("strings.title"));a.one(".message").setContent(this.get("strings.message"));this._buttonsNode=a.one(".buttons");this._renderButtons();this.get("visible")&&this.show();t.addClass(o)},bindUI:function(){var e=n.bind(function e(a){return function e(t){t.halt();this._handleResponse(a)}},this);var t=n.bind(function e(a){return function e(t){if(32===t.keyCode||13===t.keyCode){t.halt();this._handleResponse(a)}}},this);if(n.Lang.isValue(this._confirmButton)){this._confirmButton.on("click",e("confirm"),this);this._confirmButton.on("keydown",t("confirm"),this)}if(n.Lang.isValue(this._cancelButton)){this._cancelButton.on("click",e("cancel"),this);this._cancelButton.on("keydown",t("cancel"),this)}if(n.Lang.isValue(this._rejectButton)){this._rejectButton.on("click",e("reject"),this);this._rejectButton.on("keydown",t("reject"),this)}this.after("positionChange",function(){this._posHelper=new n.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding"))},this);this.get("position")!==n.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE&&this._registerEvent(this._resizeEmitter.on("resize",this._updatePosition,this));var a=this.get("hideAfterTime");n.Lang.isNumber(a)&&this._registerTimer(n.later(a,this,this._hideAfterTime));this.get("destroyOnHide")&&this.onceAfter("hide",this.destroy,this);this.before("hide",function e(){this._returnFocus();n.Lang.isValue(this._overlay)&&this._overlay.remove(true)},this);this.on("cancel",this.hide,this);this.onceAfter("confirm",this.hide,this);this.onceAfter("reject",this.hide,this)},_handleResponse:function(e){this.fire(e)},_renderButtons:function(){var e=this.get("style");if(e===t.NO_BUTTONS)return;if(e!==t.CONFIRM_ONLY){this._cancelButton=this._buttonsNode.appendChild(this._createButton("cancel"));this._cancelButton.setAttribute("tabindex",1)}if(e===t.CONFIRM_OR_REJECT){this._rejectButton=this._buttonsNode.appendChild(this._createButton("reject"));this._rejectButton.setAttribute("tabindex",2)}this._confirmButton=this._buttonsNode.appendChild(this._createButton("confirm"));this._confirmButton.setAttribute("tabindex",3)},_createButton:function(e){var t="div";return n.Node.create(n.Lang.sub('<{element} class="confirmation-button no-frame {type}">{sub1}</{element}>',{type:e,sub1:this.get("strings."+e),element:t}))},_updatePosition:function(){var e=this.get("boundingBox");var t=this._posHelper.fetch(e,this.get("anchor"));e.setStyles(t)},_returnFocus:function e(){n.Lang.isValue(this._previousFocus)&&this._previousFocus instanceof HTMLElement&&this._previousFocus.focus()},_renderOverlay:function(){var e=this.get("boundingBox");var t=this.get("zIndex")||parseInt(e.getStyle("z-index"),10);this._overlay=e.insertBefore("<div></div>",e);this._overlay.addClass(this.getClassName("overlay"));this._overlay.setStyle("z-index",t-1);this.get("showOverlay")||this._overlay.setStyle("opacity","0");this._overlay.on("click",function(e){e.halt();this._handleResponse("cancel")},this)},show:function(){n.Lang.isValue(this._overlay)||this._renderOverlay();var e=this.get("boundingBox");this.set("visible",true);e.setStyle("width",this.get("width"));this._updatePosition();e.addClass("shown");this._previousFocus=document.activeElement;n.Lang.isValue(this._confirmButton)&&this._confirmButton.focus();this.fire("show")},hide:function(e){var t=function(e,t){var a=e.addClass;t&&(a=e.removeClass);n.bind(a,e,"hiding")();n.Lang.isValue(n.UA.mobile)&&n.bind(a,e,"mobile")()};var a=this.get("boundingBox");var i=function(){if(n.Lang.isValue(a.getDOMNode())&&a.hasClass("hiding")){t(a,true);this.set("visible",false);this.fire("hide")}};if(n.Lang.isBoolean(e)&&e)i.call(this);else{t(a);a.once(["transitionend","oTransitionEnd","otransitionend","webkitTransitionEnd"],i,this);this._registerTimer(n.later(600,this,i))}},_hideAfterTime:function(){this.hide()},_registerTimer:function(e){this._timers.push(e)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="buttons"></div>',TYPE:t,ANCHOR:n.Squarespace.Widgets.PositionHelper.ANCHOR,show:function(e){return new s(e)},ATTRS:{className:{value:"question",validator:n.Lang.isString},escToCancel:{value:true,validator:n.Lang.isBoolean},hideAfterTime:{validator:n.Squarespace.AttrValidators.isNullOrNumber},destroyOnHide:{value:true,validator:n.Lang.isBoolean},position:{getter:function(e){if(n.Lang.isValue(e))return e;if(n.Lang.isValue(n.UA.mobile)||r.isSubDesktop())return n.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER;return n.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE},validator:n.Lang.isFunction},anchor:{},padding:{value:20,validator:n.Lang.isNumber},render:{valueFn:function(){var e=n.one(n.Squarespace.Damask.ContextGlobals.fromTop("Y.config.doc.body"));if(n.Lang.isValue(e))return e;return n.one(n.config.doc.body)}},style:{value:t.CONFIRM_OR_CANCEL,validator:n.Lang.isNumber},showOverlay:{value:false,validator:n.Lang.isBoolean},strings:{value:{title:"",message:"",confirm:i("Confirm"),cancel:i("Cancel"),reject:i("Reject")}},width:{value:350},zIndex:{validator:n.Squarespace.AttrValidators.isNullOrNumber},instrumentationTitle:{value:null}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-mixins-event-registrar","squarespace-util","squarespace-widgets-position-helper"]})},8107:function(e,t){YUI.add("squarespace-mixins-event-registrar",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EventRegistrar=a.Base.create("eventRegistrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},8108:function(e,t){YUI.add("squarespace-widgets-position-helper",function(c){c.namespace("Squarespace.Widgets");var t=20;function s(e,t,a,i){var n;try{n=c.Squarespace.Damask.ContextGlobals.relative(i,"Y")}catch(e){n=c}var s=n.DOM.viewportRegion();var r=s.width;var o=s.height;var l={x:a,y:a};e.x+t.width>=r&&(e.x=r-t.width-a);e.x<=l.x&&(e.x=l.x);e.y+t.height>=o&&(e.y=o-t.height-a);e.y<=l.y&&(e.y=l.y);return e}function a(e,t,a){var i=e.get("className").split(" ").map(function(e){return"."+e}).join("");var n=c.all(i).size();var s=a;if(1===n)return s;var r;switch(t){case"top":case"bottom":r=e.get("offsetHeight");break;case"left":case"right":r=e.get("offsetWidth");break}s=r*(n-1)+a*n;return s}var r=function(e){var t={x:c.Squarespace.Mouse.client.lastX,y:c.Squarespace.Mouse.client.lastY};var a={width:e.get("offsetWidth"),height:e.get("offsetHeight")};var i=s({x:t.x-Math.floor(a.width/2),y:t.y-Math.floor(a.height/2)},a,this.padding,e);return{position:"fixed",top:i.y,left:i.x}};var e=function(e){return{position:"fixed",top:a(e,"top",this.padding),left:this.padding}};var i=function(e){return{position:"fixed",top:a(e,"top",this.padding),right:this.padding}};var n=function(e){return{position:"fixed",bottom:a(e,"bottom",this.padding),left:this.padding}};var o=function(e){return{position:"fixed",bottom:a(e,"bottom",this.padding),right:this.padding}};var l=function(e,t){if(!c.Lang.isValue(t))return r(e);var a=t.getX()+t.get("offsetWidth")+this.padding;var i={width:e.get("offsetWidth"),height:e.get("offsetHeight")};var n=s({x:a,y:t.getY()},i,this.padding,e);return{top:n.y,left:n.x}};var d=function(e){var t={x:Math.floor(c.DOM.winWidth()/2),y:Math.floor(c.DOM.winHeight()/2)};var a={width:Math.floor(e.get("offsetWidth")/2),height:Math.floor(e.get("offsetHeight")/2)};var i=s({x:t.x-a.width,y:t.y-a.height},a,this.padding,e);return{position:"fixed",top:i.y,left:i.x}};var u={MOUSE:r,TOP_LEFT:e,TOP_RIGHT:i,BOTTOM_LEFT:n,BOTTOM_RIGHT:o,ELEMENT:l,CENTER:d};c.Squarespace.Widgets.PositionHelper=function(a,e){return{padding:e||t,fetch:function(e,t){return a.call(this,e,t)}}};c.Squarespace.Widgets.PositionHelper.ANCHOR=u},"1.0",{requires:["dom-base","squarespace-damask-context-globals","squarespace-ui-base"]})},8109:function(e,t){YUI.add("squarespace-widgets-information",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Information=e.Base.create("information",e.Squarespace.Widgets.Confirmation,[],{_hideAfterTime:function(){this.hide();this._handleResponse("confirm")},_renderOverlay:function(){if(!this.get("showOverlay"))return;t.superclass._renderOverlay.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:e.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:e.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:e.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(e){return new t(e)},ATTRS:{className:{value:"okay"},style:{value:e.Squarespace.Widgets.Confirmation.TYPE.NO_BUTTONS},position:{value:e.Squarespace.Widgets.PositionHelper.ANCHOR.TOP_RIGHT},hideAfterTime:{value:2e3},escToCancel:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},8151:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var o=false;var r=22;var l=2;var c=function(){function t(e){(0,n.default)(this,t);this.workFn=e;this.pending=false;this.samples=[];this.lastCompleteExecution=null;this.sampledAverageExecution=null;this.pendingDowntime=null}(0,s.default)(t,[{key:"invoke",value:function e(){var t=this;var a=this.lastCompleteExecution,i=this.sampledAverageExecution;if(this.pending){o&&console.log("pending!");return}if(null!==a&&null!==i){var n=Date.now()-a;var s=i*l;if(n<s){var r=s-n;if(this.pendingDowntime){o&&console.log("no downtime, and timer is set just going to wait");return}o&&console.log("no downtime, not allowing. need to wait another ",r);this.pendingDowntime=setTimeout(function(){t.invoke();t.pendingDowntime=null},r);return}}this.doWork()}},{key:"doWork",value:function e(){var t=Date.now();this.pending=true;try{this.workFn()}catch(e){console.error(e)}this.lastCompleteExecution=Date.now();var a=this.lastCompleteExecution-t;this.pending=false;var i=this.samples;i.unshift(a);i.length>r&&(this.samples=i=i.slice(0,r));this.sampledAverageExecution=i.reduce(function(e,t){return e+t},0)/i.length;o&&console.log("executionTime",a,"sampledAverageExecution",this.sampledAverageExecution)}}]);return t}();function d(e){var t=new c(e);return function(){return t.invoke()}}e.exports=d},8683:function(e,t){var a={DISPLAY:1,CLOSE:2,DISMISS:3};e.exports=a},8684:function(e,t){var a={TIME:1,SCROLL:2};e.exports=a},8685:function(e,t,a){"use strict";var i=a(58);var n=a(276),s=n.getResolvedWebsiteLocale;i.locale(s());var r=i().localeData();e.exports=function(){return r.weekdays().reduce(function(e,t){e[t.toLowerCase()]=t;return e},{})}},8686:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return n.default}});var n=i(a(8687));e.exports=t.default},8687:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=t.MessageType=void 0;var s=i(a(8));var r=i(a(2));var o=i(a(6823));var l;t.MessageType=l;(function(e){e["CONNECT"]="connect_template_switcher";e["INSTALL_TEMPLATE"]="install_template"})(l||(t.MessageType=l={}));var n=function e(t){var n=this;(0,s.default)(this,e);(0,r.default)(this,"iframe",void 0);(0,r.default)(this,"installTemplate",void 0);(0,r.default)(this,"onLoad",void 0);(0,r.default)(this,"iframeUrls",void 0);(0,r.default)(this,"handleIframeLoad",function(){var e,t,a;n.onLoad();var i=null===(e=window.Static)||void 0===e?void 0:null===(t=e.SQUARESPACE_CONTEXT)||void 0===t?void 0:null===(a=t.website)||void 0===a?void 0:a.internalUrl;if(!i)return;n.iframe.contentWindow.postMessage({type:l.CONNECT,url:i},n.iframeUrls.origin)});(0,r.default)(this,"handlePostMessage",function(e){if(e.origin!==n.iframeUrls.origin)return;if(e.data.type===l.INSTALL_TEMPLATE){n.installTemplate({cloneIdentifier:e.data.id});window.removeEventListener("message",n.handlePostMessage)}});this.iframeUrls=o.default.getUrls(t.websiteType);this.installTemplate=t.installTemplate;this.onLoad=t.onLoad;this.iframe=document.createElement("iframe");this.iframe.setAttribute("data-test","template-switcher-iframe");this.iframe.src=this.iframeUrls.source;this.iframe.addEventListener("load",this.handleIframeLoad);t.container.appendChild(this.iframe);window.addEventListener("message",this.handlePostMessage)};t.default=n},8688:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.generateURL=n;var c=i(a(128));var d=i(a(87));var u=i(a(114));var g=i(a(43));var p=i(a(368));var h=i(a(6823));var f={"es-419":"es","fr-FR":"fr","de-DE":"de","pt-BR":"pt","it-IT":"it"};function m(e){return"www-staging-".concat(e,"-origin")}function n(e){var t=(0,g.default)(window,"Static.SQUARESPACE_CONTEXT.appDomain");var a=(0,g.default)(window,"Static.SQUARESPACE_CONTEXT.templateLocale");var i="true"===c.default.get("sqs-use-staging-template-switcher");var n="true"===c.default.get("use-refactored-template-picker")||u.default.isFeatureEnabled(d.default.TEMPLATE_SWITCHER_REFACTOR);var s=i?"www-staging":"www";var r={mode:"template-install",nochrome:"true",t:Date.now()};if(a&&f.hasOwnProperty(a)){var o=f[a];s=i?m(o):o}else r.locale_redirect="false";e.templateSwitcher&&(r["template-switcher"]="true");var l="https://"+s+"."+t;if(n)return h.default.getUrls(e.websiteType).source;return l+"/template-picker-legacy?"+p.default.stringify(r)}},8703:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=".sqs-product-block-variant-image";var i=function e(t){var a=t.e,i=t.blockEl;var n=a.detail.selectedVariant;var s=n.mainImage;if(!s)return;var r=i.querySelector("".concat(l,".shown"));r&&r.classList.remove("shown");var o=i.querySelector("".concat(l,'[data-image-id="').concat(s.id,'"]'));o&&o.classList.add("shown")};var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var a=t.querySelectorAll(".sqs-block-product");if(!a.length)return;a.forEach(function(t){var e=t.querySelector(".product-variants");e&&e.addEventListener("variant:change",function(e){return i({e:e,blockEl:t})})})};var s={initializeProductBlocks:n};t.default=s;e.exports=t.default},8704:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8705));var s="product-restock-notification";var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var a=Array.from(t.getElementsByClassName(s));a.forEach(function(e){return new n.default(e)})};t.default=r;e.exports=t.default},8705:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var r=i(a(2));var o=a(24);var l=a(4125);var c=a(5957);var d=a(8706);var s=function e(t){var s=this;(0,n.default)(this,e);(0,r.default)(this,"el",void 0);(0,r.default)(this,"form",void 0);(0,r.default)(this,"productId",void 0);(0,r.default)(this,"variantId",void 0);(0,r.default)(this,"errorNode",void 0);(0,r.default)(this,"captcha",void 0);(0,r.default)(this,"handleSubmitRestockNotification",function(e){e.preventDefault();var t=s.form.querySelector('[name="email"]');var a=t.value;var i=s.el.querySelector('[name="isJoinMailingList"]');s.clearError();if(a)if((0,l.isEmail)(a)){var n={isJoinMailingList:i&&i.checked,productId:s.productId,siteVisitorEmail:a,variantId:s.variantId};s.captcha&&s.captcha.isRendered()?s.signUpForRestockNotificationWithReCaptcha(n):s.invokeSignUpForRestockNotification(n)}else s.showError((0,o.t)("Email is invalid"));else s.showError((0,o.t)("Email cannot be blank"))});(0,r.default)(this,"signUpForRestockNotificationWithReCaptcha",function(e){var t=s.captcha.getCaptchaToken();if(!t){s.showError((0,o.t)("Complete CAPTCHA before submitting."));return}e.captchaToken=t;s.invokeSignUpForRestockNotification(e)});(0,r.default)(this,"invokeSignUpForRestockNotification",function(e){(0,c.signUpForRestockNotification)(e).then(function(){s.showSuccessMessage();if(s.captcha){s.captcha.destroy();s.captcha=null}}).catch(function(e){s.showError(e.data.message);s.captcha&&s.captcha.reset()})});(0,r.default)(this,"showSuccessMessage",function(){var e=(0,o.t)("Signed up!");var t=window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.merchandisingSettings.restockNotificationsSuccessText;var a=document.createElement("span");a.classList.add("product-restock-success-message");a.innerText=t||e;Array.from(s.el.children).forEach(function(e){e.classList.contains("product-restock-cta")||s.el.removeChild(e)});s.el.appendChild(a)});(0,r.default)(this,"showError",function(e){if(!s.errorNode){s.errorNode=document.createElement("span");s.errorNode.classList.add("product-restock-error-message");s.el.appendChild(s.errorNode)}s.errorNode.innerText=e});(0,r.default)(this,"clearError",function(){if(!s.errorNode)return;s.errorNode.innerText=""});this.el=t;this.form=t.querySelector("form");this.productId=t.getAttribute("data-product-id");this.variantId=t.getAttribute("data-variant-id");this.form.addEventListener("submit",this.handleSubmitRestockNotification);this.captcha=(0,d.initializeCaptcha)(this.el)};t.default=s;e.exports=t.default},8706:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.initializeCaptcha=t.GoogleReCaptchaCheckbox=void 0;var s=n(a(8));var r=n(a(2));var o=i(a(1937));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d={theme:"light",size:"normal"};var u=function e(t,a){var i=this;(0,s.default)(this,e);(0,r.default)(this,"captchaContainer",void 0);(0,r.default)(this,"captchaRendered",void 0);(0,r.default)(this,"isRendered",function(){return i.captchaRendered});(0,r.default)(this,"getCaptchaToken",function(){if(!i.captchaContainer)return null;return o.validate(window,i.captchaContainer)});(0,r.default)(this,"reset",function(){if(!i.captchaContainer)return;o.reset(window,i.captchaContainer)});(0,r.default)(this,"destroy",function(){if(!i.captchaContainer)return;o.destroy(i.captchaContainer);i.captchaContainer=null;i.captchaRendered=false});this.captchaContainer=t;this.captchaRendered=false;o.render(window,this.captchaContainer,{theme:a.theme,size:a.size}).then(function(){return i.captchaRendered=true})};t.GoogleReCaptchaCheckbox=u;var g=function e(t,a){var i=o.getCaptchaContainer(window,t);var n=c({},d,{},a);return i?new u(i,n):null};t.initializeCaptcha=g},8707:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(643);var n='<p class=""></p>';var s="";function r(e){if(!i(e))return false;if(e.length>100)return false;return true}function o(e){if(e===n)return s;var t=false;try{var a=document.createElement("div");a.innerHTML=e;t=!a.textContent||!a.textContent.trim()}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("Excerpt blanking failed!")}if(t)return s;return e}var l={shouldTrimExcerpt:r,trimExcerptHTML:o};t.default=l;e.exports=t.default},8708:function(e,t,a){"use strict";var i={GENERIC:null,DIGITAL_GOODS:"digitalGoods"};e.exports=i},8709:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var d=i(a(27));var s=i(a(34));var r=i(a(74));var o=i(a(523));var l=i(a(229));var x=i(a(2620));var L=i(a(2224));var D=i(a(1332));var c=i(a(5065));var N=i(a(6250));var u=i(a(8710));var O=i(a(794));var R=a(3440);var P=i(a(411));function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var M=function e(t){var a=t.collectionId,i=t.hasThumbnailImage,n=t.isHomepage,s=t.seoSocialSharingImageId,r=t.socialLogoImageId,o=t.siteLogoId;if(s)return s;if(n&&!r&&o)return o;if(i)return a;if(r)return r};var F=function e(t){var a=t.assetUrl,i=t.originalSize;var n=i?i.split("x"):[],s=(0,d.default)(n,2),r=s[0],o=s[1];var l=r?Number(r):0;var c=o?Number(o):0;return{assetUrl:a||"",assetWidth:l,assetHeight:c}};var U=function e(t){var a=L.default.getState().get(t);var i=a?a.toJS():{};return i};var V=function e(t,a,i){return!t&&a===o.default.CHRONOLOGICAL&&i===l.default.COLLECTION_TYPE_GENERIC};var z=function e(t,a,i){if(t)return false;if(V(t,a,i))return true;return i===l.default.PRODUCTS||a===o.default.CALENDAR};var p=(0,r.default)({getStores:function e(){return[x.default,L.default,N.default,P.default]},getPropsFromStores:function e(t){var a=N.default.getState();var i=a.isHomepage,n=a.seoSocialSharingImageId,s=a.collectionId;var r=P.default.getState();var o=r.get("baseUrl")||"";var l=r.get("metaDescription")||"";var c=r.get("siteTitle")||"";var d=r.get("socialLogoImageId");var u=r.get("logoImageId");var g;var p=false;if(t.isContentItem){g=U(t.collectionId);p=!!g.coverImageUrl}var h={collectionId:s,hasThumbnailImage:p,isHomepage:i,seoSocialSharingImageId:n,socialLogoImageId:d,siteLogoId:u};var f=M(h);var m=L.default.getState().get(f);!m&&f&&D.default.read.defer(f);g=U(f);var v=g.items;p&&v&&v.length>0&&(g=v[0]);var b=F(g);var y=O.default.getState();var S=(0,R.updateLegacyFormat)(y.collectionTitleFormat);var q=(0,R.updateLegacyFormat)(y.homepageTitleFormat);var _=(0,R.updateLegacyFormat)(y.itemTitleFormat);var C=x.default.getState().get(s);var E=false;var k=false;if(C){var w=C.toJS();var T=w.folder,I=w.ordering,A=w.type;E=z(T,I,A);k=V(T,I,A)}return B({},a,{},b,{baseUrl:o,collectionTitleFormat:S,homepageTitleFormat:q,itemTitleFormat:_,metaDescription:l,siteTitle:c,socialImageId:f,supportsFriendlyUrls:k,containsSubPages:E})},componentDidConnect:function e(t){var a=t.collectionId,i=t.isContentItem;if(a===N.default.getState().collectionId)return;a&&s.default.recycle(N.default);i?L.default.fetch(a).then(function(e){return c.default.fetchData(e,true)}):x.default.fetch(a).then(function(e){return c.default.fetchData(e)})}},u.default);var h=p;t.default=h;e.exports=t.default},8710:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a(8));var r=n(a(9));var o=n(a(6));var l=n(a(10));var c=n(a(11));var d=n(a(7));var w=n(a(2));var u=n(a(1));var T=i(a(0));var I=n(a(15));var A=a(24);var h=a(3059);var g=n(a(595));var x=n(a(2376));var p=n(a(454));var L=n(a(2377));var D=n(a(8711));var N=n(a(8713));var O=n(a(8718));var R=n(a(8719));var P=n(a(8720));var B=n(a(8721));var M=n(a(8722));var f=n(a(5065));var F=n(a(5152));function m(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var U=100;var V=400;var v=function e(t,a,i){var n={"%s":{exampleText:t},"%p":{exampleText:a}};i&&(n["%i"]={exampleText:a});return n};var b=function(e){(0,l.default)(n,e);var i=m(n);function n(){var p;(0,s.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];p=i.call.apply(i,[this].concat(t));(0,w.default)((0,o.default)(p),"filterUrlSlug",function(e){return e?g.default.createUrlWithSlash(e):""});(0,w.default)((0,o.default)(p),"linkField",function(a){return{value:p.props[a],onChange:function e(t){return f.default.updateField(a,t)}}});(0,w.default)((0,o.default)(p),"linkFieldText",function(a){return{value:p.props[a]||"",onChange:function e(t){return f.default.updateField(a,t)}}});(0,w.default)((0,o.default)(p),"generateErrorMessage",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var a=arguments.length>2?arguments[2]:void 0;var i="string"===typeof e?e.length:0;return i===t?a:null});(0,w.default)((0,o.default)(p),"getPreviewTitle",function(){var e=p.props,t=e.collectionTitleFormat,a=e.homepageTitleFormat,i=e.itemTitleFormat,n=e.isContentItem,s=e.isHomepage,r=e.siteTitle,o=e.seoTitle,l=e.title;var c=o;c&&!s||(c=l);var d=v(r,c,n);var u=(0,h.buildRegexes)(d);var g;g=n?i:s?a:t;return(0,h.getPreviewString)(u,d,g)});(0,w.default)((0,o.default)(p),"getDescription",function(){var e=p.props,t=e.isHomepage,a=e.metaDescription,i=e.seoDescription;if(t)return a;return i});return p}(0,r.default)(n,[{key:"getChildContext",value:function e(){return{router:this.props.router,location:this.props.location}}},{key:"render",value:function e(){var t=this.props,a=t.assetHeight,i=t.assetUrl,n=t.assetWidth,s=t.baseUrl,r=t.isContentItem,o=t.isHomepage,l=t.isLoading,c=t.isSocialTab,d=t.seoDescription,u=t.seoSocialSharingImageId,g=t.socialImageId,p=t.seoTitle,h=t.supportsFriendlyUrls,f=t.containsSubPages,m=t.urlId,v=t.router;var b=(0,A.t)("SEO Title cannot be more than {maxLength} characters",{maxLength:U});var y=(0,A.t)("SEO Description cannot be more than {maxLength} characters",{maxLength:V});var S=this.generateErrorMessage(d,V,y);var q=this.generateErrorMessage(p,U,b);var _=this.getPreviewTitle();var C=this.getDescription();var E=!r&&(!o||h);var k=(0,I.default)(F.default.container,(0,w.default)({},F.default.contentItemContainer,r));return T.default.createElement(x.default.Provider,{value:v},T.default.createElement(L.default.Provider,{value:location},T.default.createElement("div",{className:F.default.flexContainer},T.default.createElement("div",{className:k},!c&&T.default.createElement(T.Fragment,null,!o&&T.default.createElement(R.default,{isContentItem:r,isHomepage:o}),T.default.createElement(N.default,{baseUrl:s,description:C,isHomepage:o,title:_,urlId:m}),!o&&T.default.createElement(T.Fragment,null,T.default.createElement(B.default,{errorMessage:q,linkFieldText:this.linkFieldText,maxLength:U}),T.default.createElement(P.default,{errorMessage:S,linkFieldText:this.linkFieldText,maxLength:V})),T.default.createElement(D.default,{baseUrl:s,isContentItem:r,isHomepage:o}),E&&T.default.createElement(O.default,{linkField:this.linkField,isHomePage:o,supportsFriendlyUrls:h,containsSubPages:f})),c&&T.default.createElement(M.default,{assetHeight:a,assetUrl:i,assetWidth:n,description:C,isContentItem:r,isLoading:l,seoSocialSharingImageId:u,socialImageId:g,title:_,url:s,urlSlug:m})))))}}]);return n}(T.Component);(0,w.default)(b,"propTypes",{assetHeight:u.default.number,assetUrl:u.default.string,assetWidth:u.default.number,baseUrl:u.default.string,categoryPagesSeoHidden:u.default.bool,collectionTitleFormat:u.default.string,homepageTitleFormat:u.default.string,isContentItem:u.default.bool,isHidden:u.default.bool,isHomepage:u.default.bool,isSocialTab:u.default.bool,itemTitleFormat:u.default.string,metaDescription:u.default.string,seoDescription:u.default.string,seoSocialSharingImageId:u.default.string,seoTitle:u.default.string,siteTitle:u.default.string,socialImageId:u.default.string,supportsFriendlyUrls:u.default.bool,tagPagesSeoHidden:u.default.bool,title:u.default.string,urlId:u.default.string,containsSubPages:u.default.bool});(0,w.default)(b,"childContextTypes",{router:p.default,location:u.default.object});var y=b;t.default=y;e.exports=t.default},8711:function(e,t,a){"use strict";var i=a(4);var n=a(36);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a(0));var r=i(a(1));var o=a(157);var l=i(a(3415));var c=a(39);var d=i(a(207));var u=i(a(5152));var g=function e(t){return s.default.createElement(s.Fragment,null,s.default.createElement(c.T,{project:"apps.App"},"This page is your homepage. Search engines use information from your site’s SEO settings to show your page in their search results, which you can preview here. If you set another page as your homepage, you can edit this page’s SEO information here."),s.default.createElement("div",{className:u.default.field},s.default.createElement(l.default,{className:u.default.buttonLink,to:"/marketing/seo",key:"marketing-seo"},s.default.createElement(c.T,{project:"apps.App"},"EDIT WEBSITE SEO SETTINGS"))))};var p=s.default.createElement(c.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:d.default.SEO_EDIT_TITLE},s.default.createElement(c.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don’t add a title or description, search engines will use this item's title and content.");var h=s.default.createElement(c.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:d.default.SEO_EDIT_TITLE},s.default.createElement(c.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don’t add a title or description, search engines will use your page title and content.");var f=function e(t){return t?p:h};var m=function e(t){return s.default.createElement(o.Description,null,t.isHomepage?s.default.createElement(g,{baseUrl:t.baseUrl}):f(t.isContentItem))};m.propTypes={baseUrl:r.default.string.isRequired,isContentItem:r.default.bool,isHomepage:r.default.bool};g.propTypes={baseUrl:r.default.string.isRequired};var v=m;t.default=v;e.exports=t.default},8712:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".SEOContentCollectionTab-container-oVPa9 {\n  width: 484px;\n}\n.SEOContentCollectionTab-contentItemContainer-1Fm3b {\n  width: 500px;\n}\n.SEOContentCollectionTab-flexContainer-XspAm {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.SEOContentCollectionTab-field-3jitZ {\n  margin-top: 22px;\n}\n.SEOContentCollectionTab-description-12mUH {\n  margin-top: 0;\n}\n.SEOContentCollectionTab-label-3hS5C {\n  padding-bottom: 0px;\n}\n.SEOContentCollectionTab-buttonLink-3Nrvn {\n  display: block !important;\n  width: 100%;\n  background-color: #ebebeb !important;\n  border-radius: 0px !important;\n  text-align: center;\n  display: block;\n  font-size: 11px;\n  font-weight: 500;\n  padding: 11px;\n}\n.SEOContentCollectionTab-buttonLink-3Nrvn:hover {\n  background-color: #d0d0d0 !important;\n}\n",""]);t.locals={container:"SEOContentCollectionTab-container-oVPa9",contentItemContainer:"SEOContentCollectionTab-contentItemContainer-1Fm3b",flexContainer:"SEOContentCollectionTab-flexContainer-XspAm",field:"SEOContentCollectionTab-field-3jitZ",description:"SEOContentCollectionTab-description-12mUH",label:"SEOContentCollectionTab-label-3hS5C",buttonLink:"SEOContentCollectionTab-buttonLink-3Nrvn"}},8713:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1));var o=i(a(0));var l=i(a(5152));var c=i(a(8714));var s=a(24);var d=(0,s.t)("This description will be automatically generated by search engines. To override that description, enter one below.");var u=(0,s.t)("This description will be automatically generated by search engines. To override that description, enter a description in website SEO settings.");var r=function e(t){var a=t.baseUrl||"";var i=t.urlId||"";"/"===i.charAt(0)&&(i=i.substring(1));var n=t.isHomepage?a:a+"/"+i;var s=t.description||d;!t.description&&t.isHomepage&&(s=u);var r=t.title||"";r=r.substring(0,70);return o.default.createElement("div",{className:l.default.field},o.default.createElement(c.default,{url:n,title:r,description:s,isHelpDescription:!t.description,hideTitle:t.hideTitle}))};r.propTypes={baseUrl:n.default.string,description:n.default.string,hideTitle:n.default.bool,isHomepage:n.default.bool,title:n.default.string,urlId:n.default.string};var g=r;t.default=g;e.exports=t.default},8714:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8715));var s=n.default;t.default=s;e.exports=t.default},8715:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(1));var u=i(a(0));var g=i(a(8716));var p=a(157);var h=a(39);var f=i(a(15));function m(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var v=function(e){(0,r.default)(a,e);var t=m(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.hideTitle,i=t.description,n=t.headerComponent,s=t.isHelpDescription,r=t.title,o=t.url;var l=(0,f.default)(g.default.description,(0,c.default)({},g.default.helperDescription,s));return u.default.createElement("div",null,a?null:n||u.default.createElement(p.Label,{className:g.default.label},u.default.createElement(h.T,{project:"apps.App"},"Search Results Preview")),u.default.createElement("div",{className:g.default.container},u.default.createElement("div",{className:g.default.title},r),u.default.createElement("div",{className:g.default.url},o),u.default.createElement("div",{className:l},i)))}}]);return a}(u.default.Component);(0,c.default)(v,"propTypes",{description:d.default.string,headerComponent:d.default.element,hideTitle:d.default.bool,isHelpDescription:d.default.bool,title:d.default.string,url:d.default.string});var b=v;t.default=b;e.exports=t.default},8716:function(e,t,a){var i=a(8717);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},8717:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".overflow {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.GoogleSearchPreview-container-1HbEB {\n  border: solid 1px rgba(0, 0, 0, 0.13);\n  background-color: white;\n  padding: 11px;\n  font-family: 'Roboto', arial, sans-serif;\n}\n.GoogleSearchPreview-title-1vKqW {\n  color: #1a0dab;\n  font-size: 16px;\n  line-height: 1.2;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.GoogleSearchPreview-previewTitle-T1opM {\n  margin-top: 0;\n}\n.GoogleSearchPreview-label-1qmLs {\n  padding-bottom: 0px;\n}\n.GoogleSearchPreview-description-fC5z4 {\n  line-height: 1.4;\n  word-wrap: break-word;\n  color: #545454;\n  font-size: small;\n}\n.GoogleSearchPreview-helperDescription-1CWXb {\n  color: #A1A1A1;\n  font-style: italic;\n}\n.GoogleSearchPreview-url-1Gz10 {\n  color: #006621;\n  font-size: 14px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n",""]);t.locals={container:"GoogleSearchPreview-container-1HbEB",title:"GoogleSearchPreview-title-1vKqW",previewTitle:"GoogleSearchPreview-previewTitle-T1opM",label:"GoogleSearchPreview-label-1qmLs",description:"GoogleSearchPreview-description-fC5z4",helperDescription:"GoogleSearchPreview-helperDescription-1CWXb",url:"GoogleSearchPreview-url-1Gz10"}},8718:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(5));var s=i(a(0));var r=i(a(1));var o=a(157);var l=a(24);var c=a(39);var d=i(a(5152));var u=function e(t){var a=t.linkField("isHidden").value;if(t.isHomePage&&!t.supportsFriendlyUrls)return s.default.createElement("div",{className:d.default.field});if(t.supportsFriendlyUrls)return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:d.default.field},s.default.createElement(s.default.Fragment,null,s.default.createElement(o.Label,null,s.default.createElement(c.T,{project:"apps.App"},"Hide from Search Engines")),!t.isHomePage&&s.default.createElement(o.Check,(0,n.default)({title:(0,l.t)("All pages in this collection")},t.linkField("isHidden"),{theme:"damask"})),s.default.createElement(o.Check,{isDisabled:a,title:(0,l.t)("All category pages in this collection"),value:a||t.linkField("categoryPagesSeoHidden").value,onChange:t.linkField("categoryPagesSeoHidden").onChange,theme:"damask"}),s.default.createElement(o.Check,{isDisabled:a,title:(0,l.t)("All tag pages in this collection"),value:a||t.linkField("tagPagesSeoHidden").value,onChange:t.linkField("tagPagesSeoHidden").onChange,theme:"damask"}))));return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:d.default.field},t.containsSubPages&&s.default.createElement(o.Check,(0,n.default)({title:(0,l.t)("Hide all pages in this collection from search engines")},t.linkField("isHidden"),{theme:"damask"})),!t.containsSubPages&&s.default.createElement(o.Check,(0,n.default)({title:(0,l.t)("Hide this page from search engines")},t.linkField("isHidden"),{theme:"damask"}))))};u.propTypes={isHomePage:r.default.bool,linkField:r.default.func,supportsFriendlyUrls:r.default.bool,containsSubPages:r.default.bool};var g=u;t.default=g;e.exports=t.default},8719:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1));var s=i(a(0));var r=a(157);var o=a(39);var l=i(a(207));var c=s.default.createElement(o.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:l.default.SEO_OVERVIEW},s.default.createElement(o.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find your page when they search for it. {squarespaceHelp}");var d=s.default.createElement(o.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:l.default.SEO_OVERVIEW},s.default.createElement(o.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find this item when they search for it. {squarespaceHelp}");var u=function e(t){return s.default.createElement(r.Description,null,t.isContentItem?d:c)};u.propTypes={isContentItem:n.default.bool};var g=u;t.default=g;e.exports=t.default},8720:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(5));var s=i(a(1));var r=i(a(0));var o=a(157);var l=a(24);var c=a(39);var d=i(a(5152));var u=function e(t){var a=t.linkFieldText("seoDescription");return r.default.createElement("div",{className:d.default.field},r.default.createElement(o.Label,{className:d.default.label},r.default.createElement(c.T,{project:"apps.App"},"SEO Description (Optional)")),r.default.createElement(o.TextArea,(0,n.default)({placeholder:(0,l.t)("Enter a description…")},a,{minRows:3,characterCountLimit:t.maxLength,maxLength:t.maxLength,errorMessage:t.errorMessage,wrapperClassName:d.default.description})))};u.propTypes={linkFieldText:s.default.func,maxLength:s.default.number,errorMessage:s.default.string};var g=u;t.default=g;e.exports=t.default},8721:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(5));var s=i(a(1));var r=i(a(0));var o=a(157);var l=a(39);var c=i(a(5152));var d=function e(t){return r.default.createElement("div",{className:c.default.field},r.default.createElement(o.Label,{className:c.default.label},r.default.createElement(l.T,{project:"apps.App"},"SEO Title (Optional)")),r.default.createElement(o.TextArea,(0,n.default)({},t.linkFieldText("seoTitle"),{minRows:1,characterCountLimit:t.maxLength,maxLength:t.maxLength,errorMessage:t.errorMessage,wrapperClassName:c.default.description})))};d.propTypes={linkFieldText:s.default.func,maxLength:s.default.number,errorMessage:s.default.string};var u=d;t.default=u;e.exports=t.default},8722:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a(8));var o=n(a(9));var l=n(a(6));var c=n(a(10));var s=n(a(11));var d=n(a(7));var u=n(a(2));var g=n(a(1));var p=i(a(0));var h=n(a(5065));var f=n(a(8723));var m=n(a(8725));var v=a(595);var b=n(a(8728));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var S=function(e){(0,c.default)(s,e);var n=y(s);function s(){var e;(0,r.default)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(e),"onImageUpload",function(e){return h.default.updateField("seoSocialSharingImageId",e)});return e}(0,o.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.assetHeight,i=t.assetUrl,n=t.assetWidth,s=t.description,r=t.isContentItem,o=t.isLoading,l=t.seoSocialSharingImageId,c=t.socialImageId,d=t.title,u=t.url;var g=(0,v.stripProtocolAndSlashes)(u);return p.default.createElement(p.Fragment,null,p.default.createElement("div",{className:b.default.field},p.default.createElement(m.default,{assetHeight:a,assetUrl:i,assetWidth:n,description:s,seoSocialSharingImageId:c,title:d,url:g})),p.default.createElement("div",{className:b.default.field},!o&&p.default.createElement(f.default,{contentItemId:l,isContentItem:r,onChange:this.onImageUpload})))}}]);return s}(p.Component);(0,u.default)(S,"propTypes",{assetHeight:g.default.number,assetUrl:g.default.string,assetWidth:g.default.number,description:g.default.string,isContentItem:g.default.bool,isLoading:g.default.bool,seoSocialSharingImageId:g.default.string,socialImageId:g.default.string,title:g.default.string,url:g.default.string});var q=S;t.default=q;e.exports=t.default},8723:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1));var s=i(a(0));var r=a(157);var o=i(a(3429));var l=a(39);var c=i(a(1715));var d=i(a(5152));var u=i(a(8724));var g=function e(t){return s.default.createElement("div",{className:d.default.field},s.default.createElement(r.Label,{className:d.default.label},s.default.createElement(l.T,{project:"apps.App"},"Alternate Social Sharing Image (Optional)")),s.default.createElement(o.default,{height:226,allowLicensedImage:true,key:"seo-image-editor",contentItemId:t.contentItemId,onChange:t.onChange,imageDestination:c.default.SEO_CONTENT,isFocalPointEditable:false}),s.default.createElement(u.default,{isContentItem:t.isContentItem}))};g.propTypes={isContentItem:n.default.bool,contentItemId:n.default.string,onChange:n.default.func};var p=g;t.default=p;e.exports=t.default},8724:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(1));var s=i(a(0));var r=a(157);var o=a(39);var l=i(a(207));var c=s.default.createElement(o.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:l.default.SEO_SOCIAL},s.default.createElement(o.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don’t add a social sharing image, we’ll use the item's thumbnail instead. {squarespaceHelp}");var d=s.default.createElement(o.T,{squarespaceHelp:s.default.createElement("a",{target:"_blank",href:l.default.SEO_SOCIAL},s.default.createElement(o.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don’t add a social sharing image, we’ll use your social sharing logo or site logo instead. {squarespaceHelp}");var u=function e(t){return s.default.createElement(r.Description,null,t.isContentItem?c:d)};u.propTypes={isContentItem:n.default.bool};var g=u;t.default=g;e.exports=t.default},8725:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=n(a(5));var d=n(a(2));var s=n(a(1));var u=i(a(0));var g=a(157);var p=a(24);var h=a(39);var f=n(a(15));var m=n(a(8726));var v=function e(t){var a=t.description,i=t.isHelpDescription,n=t.showImage,s=t.styles,r=t.title,o=t.url;var l=(0,f.default)(m.default.description,(0,d.default)({},m.default.helperDescription,i));return u.default.createElement(u.Fragment,null,n&&u.default.createElement("div",{className:m.default.image,style:s}),u.default.createElement("div",{className:m.default.container},u.default.createElement("div",{className:m.default.url},o),u.default.createElement("div",{className:m.default.title},r),u.default.createElement("div",{className:l},a)))};var b=function e(t){var a=t.description,i=t.isHelpDescription,n=t.showImage,s=t.styles,r=t.title,o=t.url;var l=(0,f.default)(m.default.leftAlignedDescription,(0,d.default)({},m.default.helperDescription,i));return u.default.createElement("div",{className:m.default.leftAligned},n&&u.default.createElement("div",{className:m.default.leftAlignedImage,style:s}),u.default.createElement("div",{className:n?m.default.leftAlignedContainer:m.default.leftAlignedContainerFullWidth},u.default.createElement("div",{className:m.default.url},o),u.default.createElement("div",{className:m.default.title},r),u.default.createElement("div",{className:l},a)))};var r=function e(t){var a={backgroundImage:"url('".concat(t.assetUrl,"?format=500w')"),height:"".concat(t.assetHeight,"px"),width:"".concat(t.assetWidth,"px")};var i=t.assetWidth/t.assetHeight;var n=!!t.assetUrl&&t.assetWidth>=200&&t.assetHeight>=200;var s=t.assetWidth<445&&t.assetHeight<315||i<.67;var r=(0,p.t)("This description will be automatically generated depending on the service this link is shared on. To override that description, enter a description on the SEO tab.");var o=t.description||r;var l=!t.description;return u.default.createElement(u.Fragment,null,t.hideTitle?null:u.default.createElement(g.Label,null,u.default.createElement(h.T,{project:"apps.App"},"Social Preview")),s?u.default.createElement(b,(0,c.default)({},t,{description:o,styles:a,showImage:n,isHelpDescription:l})):u.default.createElement(v,(0,c.default)({},t,{description:o,styles:a,showImage:n,isHelpDescription:l})))};r.propTypes={assetHeight:s.default.number,assetUrl:s.default.string,assetWidth:s.default.number,description:s.default.string,hideTitle:s.default.bool,seoSocialSharingImageId:s.default.string,title:s.default.string,url:s.default.string};var o=r;t.default=o;e.exports=t.default},8726:function(e,t,a){var i=a(8727);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},8727:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".container-mixin {\n  background-color: white;\n  color: #313131;\n  padding: 11px 16px 11px 16px;\n}\n.description-mixin {\n  font-size: 12px;\n  line-height: 22px;\n  margin-top: 5px;\n  overflow: hidden;\n  word-wrap: break-word;\n  color: #797979;\n}\n.image-crop-mixin {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  max-height: 207px !important;\n}\n.SEOSocialPreview-container-2s10l {\n  background-color: white;\n  color: #313131;\n  padding: 11px 16px 11px 16px;\n}\n.SEOSocialPreview-image-33Gnm {\n  display: inherit;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  max-height: 207px !important;\n  width: 100% !important;\n}\n.SEOSocialPreview-url-1iP-3 {\n  color: #a1a1a1;\n  font-size: 11px;\n  letter-spacing: 0.1px;\n  line-height: 22px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.SEOSocialPreview-title-2nSt- {\n  font-size: 17px;\n  line-height: 28px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.SEOSocialPreview-description-1YDqK {\n  font-size: 12px;\n  line-height: 22px;\n  margin-top: 5px;\n  overflow: hidden;\n  word-wrap: break-word;\n  color: #797979;\n  text-overflow: ellipsis;\n}\n.SEOSocialPreview-helperDescription-2w6b9 {\n  color: #A1A1A1;\n  font-style: italic;\n}\n.SEOSocialPreview-leftAligned-1MqGv {\n  display: flex;\n  max-height: 207px;\n}\n.SEOSocialPreview-leftAlignedContainer-1e4Ua {\n  background-color: white;\n  color: #313131;\n  padding: 11px 16px 11px 16px;\n  width: 308px;\n}\n.SEOSocialPreview-leftAlignedContainerFullWidth-1jsKE {\n  background-color: white;\n  color: #313131;\n  padding: 11px 16px 11px 16px;\n  width: 452px;\n}\n.SEOSocialPreview-leftAlignedDescription-3lk_R {\n  font-size: 12px;\n  line-height: 22px;\n  margin-top: 5px;\n  overflow: hidden;\n  word-wrap: break-word;\n  color: #797979;\n  max-height: 130px;\n}\n.SEOSocialPreview-leftAlignedImage-1CmfW {\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  max-height: 207px !important;\n  max-width: 160px !important;\n}\n",""]);t.locals={container:"SEOSocialPreview-container-2s10l",image:"SEOSocialPreview-image-33Gnm",url:"SEOSocialPreview-url-1iP-3",title:"SEOSocialPreview-title-2nSt-",description:"SEOSocialPreview-description-1YDqK",helperDescription:"SEOSocialPreview-helperDescription-2w6b9",leftAligned:"SEOSocialPreview-leftAligned-1MqGv",leftAlignedContainer:"SEOSocialPreview-leftAlignedContainer-1e4Ua",leftAlignedContainerFullWidth:"SEOSocialPreview-leftAlignedContainerFullWidth-1jsKE",leftAlignedDescription:"SEOSocialPreview-leftAlignedDescription-3lk_R",leftAlignedImage:"SEOSocialPreview-leftAlignedImage-1CmfW"}},8728:function(e,t,a){var i=a(8729);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},8729:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".SEOSocialTab-field-1HkVe {\n  margin-top: 22px;\n}\n.SEOSocialTab-label-wRcni {\n  padding-bottom: 0px;\n}\n",""]);t.locals={field:"SEOSocialTab-field-1HkVe",label:"SEOSocialTab-label-wRcni"}},8730:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getValueFnByKey=d;t.default=void 0;var n=i(a(2));var s;var r=a(24),o=r.t;var l=(s={Default:{url:o("{presentationName} URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your {presentationName|lower}s automatically, you can optionally create a custom URL for this {presentationName|lower} above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below {presentationName|lower|withIndefiniteArticle}, to provide attribution or further reading."),enterTitle:o("Enter {presentationName|lower|withIndefiniteArticle} title…"),featured:o("Featured {presentationName}"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight {presentationName|lower|withIndefiniteArticle} flagged as featured."),titleShouldLinkToSourceUrl:o("{presentationName} Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this {presentationName|lower}."),publishThisNow:o("Publish this {presentationName|lower} now."),publishThisInTheFuture:o("Publish this {presentationName|lower} in the future."),markThisForReview:o("Mark this {presentationName|lower} for review."),willBeAddedToReviewQueue:o("{presentationName} will be added to review queue."),saveThisForLaterEditing:o("Save this {presentationName|lower} for later editing."),thisWillNotBeVisible:o("This {presentationName|lower} will not be visible."),enterName:o("Enter {presentationName|lower|withIndefiniteArticle} name…")}},(0,n.default)(s,o("Text"),{url:o("Text URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your texts automatically, you can optionally create a custom URL for this text above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a text, to provide attribution or further reading."),enterTitle:o("Enter a text title…"),featured:o("Featured Text"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a text flagged as featured."),titleShouldLinkToSourceUrl:o("Text Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this text."),publishThisNow:o("Publish this text now."),publishThisInTheFuture:o("Publish this text in the future."),markThisForReview:o("Mark this text for review."),willBeAddedToReviewQueue:o("Text will be added to review queue."),saveThisForLaterEditing:o("Save this text for later editing."),thisWillNotBeVisible:o("This text will not be visible."),enterName:o("Enter a text name…")}),(0,n.default)(s,o("Image"),{url:o("Image URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your images automatically, you can optionally create a custom URL for this image above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below an image, to provide attribution or further reading."),enterTitle:o("Enter an image title…"),featured:o("Featured Image"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight an image flagged as featured."),titleShouldLinkToSourceUrl:o("Image Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this image."),publishThisNow:o("Publish this image now."),publishThisInTheFuture:o("Publish this image in the future."),markThisForReview:o("Mark this image for review."),willBeAddedToReviewQueue:o("Image will be added to review queue."),saveThisForLaterEditing:o("Save this image for later editing."),thisWillNotBeVisible:o("This image will not be visible."),enterName:o("Enter an image name…")}),(0,n.default)(s,o("Quote"),{url:o("Quote URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your quotes automatically, you can optionally create a custom URL for this quote above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a quote, to provide attribution or further reading."),enterTitle:o("Enter a quote title…"),featured:o("Featured Quote"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a quote flagged as featured."),titleShouldLinkToSourceUrl:o("Quote Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this quote."),publishThisNow:o("Publish this quote now."),publishThisInTheFuture:o("Publish this quote in the future."),markThisForReview:o("Mark this quote for review."),willBeAddedToReviewQueue:o("Quote will be added to review queue."),saveThisForLaterEditing:o("Save this quote for later editing."),thisWillNotBeVisible:o("This quote will not be visible."),enterName:o("Enter a quote name…")}),(0,n.default)(s,o("Link"),{url:o("Link URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your links automatically, you can optionally create a custom URL for this link above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a link, to provide attribution or further reading."),enterTitle:o("Enter a link title…"),featured:o("Featured Link"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a link flagged as featured."),titleShouldLinkToSourceUrl:o("Link Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this link."),publishThisNow:o("Publish this link now."),publishThisInTheFuture:o("Publish this link in the future."),markThisForReview:o("Mark this link for review."),willBeAddedToReviewQueue:o("Link will be added to review queue."),saveThisForLaterEditing:o("Save this link for later editing."),thisWillNotBeVisible:o("This link will not be visible."),enterName:o("Enter a link name…")}),(0,n.default)(s,o("Track"),{url:o("Track URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your tracks automatically, you can optionally create a custom URL for this track above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a track, to provide attribution or further reading."),enterTitle:o("Enter a track title…"),featured:o("Featured Track"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a track flagged as featured."),titleShouldLinkToSourceUrl:o("Track Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this track."),publishThisNow:o("Publish this track now."),publishThisInTheFuture:o("Publish this track in the future."),markThisForReview:o("Mark this track for review."),willBeAddedToReviewQueue:o("Track will be added to review queue."),saveThisForLaterEditing:o("Save this track for later editing."),thisWillNotBeVisible:o("This track will not be visible."),enterName:o("Enter a track name…")}),(0,n.default)(s,o("Video"),{url:o("Video URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your videos automatically, you can optionally create a custom URL for this video above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a video, to provide attribution or further reading."),enterTitle:o("Enter a video title…"),featured:o("Featured Video"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a video flagged as featured."),titleShouldLinkToSourceUrl:o("Video Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this video."),publishThisNow:o("Publish this video now."),publishThisInTheFuture:o("Publish this video in the future."),markThisForReview:o("Mark this video for review."),willBeAddedToReviewQueue:o("Video will be added to review queue."),saveThisForLaterEditing:o("Save this video for later editing."),thisWillNotBeVisible:o("This video will not be visible."),enterName:o("Enter a video name…")}),(0,n.default)(s,o("Event"),{url:o("Event URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your events automatically, you can optionally create a custom URL for this event above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below an event, to provide attribution or further reading."),enterTitle:o("Enter an event title…"),featured:o("Featured Event"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight an event flagged as featured."),titleShouldLinkToSourceUrl:o("Event Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this event."),publishThisNow:o("Publish this event now."),publishThisInTheFuture:o("Publish this event in the future."),markThisForReview:o("Mark this event for review."),willBeAddedToReviewQueue:o("Event will be added to review queue."),saveThisForLaterEditing:o("Save this event for later editing."),thisWillNotBeVisible:o("This event will not be visible."),enterName:o("Enter an event name…")}),(0,n.default)(s,o("Gallery"),{url:o("Gallery URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your gallerys automatically, you can optionally create a custom URL for this gallery above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a gallery, to provide attribution or further reading."),enterTitle:o("Enter a gallery title…"),featured:o("Featured Gallery"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a gallery flagged as featured."),titleShouldLinkToSourceUrl:o("Gallery Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this gallery."),publishThisNow:o("Publish this gallery now."),publishThisInTheFuture:o("Publish this gallery in the future."),markThisForReview:o("Mark this gallery for review."),willBeAddedToReviewQueue:o("Gallery will be added to review queue."),saveThisForLaterEditing:o("Save this gallery for later editing."),thisWillNotBeVisible:o("This gallery will not be visible."),enterName:o("Enter a gallery name…")}),(0,n.default)(s,o("KBArticle"),{url:o("KBArticle URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your kbArticles automatically, you can optionally create a custom URL for this kbArticle above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a kbArticle, to provide attribution or further reading."),enterTitle:o("Enter a kbArticle title…"),featured:o("Featured KBArticle"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a kbArticle flagged as featured."),titleShouldLinkToSourceUrl:o("KBArticle Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this kbArticle."),publishThisNow:o("Publish this kbArticle now."),publishThisInTheFuture:o("Publish this kbArticle in the future."),markThisForReview:o("Mark this kbArticle for review."),willBeAddedToReviewQueue:o("KBArticle will be added to review queue."),saveThisForLaterEditing:o("Save this kbArticle for later editing."),thisWillNotBeVisible:o("This kbArticle will not be visible."),enterName:o("Enter a kbArticle name…")}),(0,n.default)(s,o("Digital Product"),{url:o("Digital Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your digital products automatically, you can optionally create a custom URL for this digital product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a digital product, to provide attribution or further reading."),enterTitle:o("Enter a digital product title…"),featured:o("Featured Digital Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a digital product flagged as featured."),titleShouldLinkToSourceUrl:o("Digital Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this digital product."),publishThisNow:o("Publish this digital product now."),publishThisInTheFuture:o("Publish this digital product in the future."),markThisForReview:o("Mark this digital product for review."),willBeAddedToReviewQueue:o("Digital Product will be added to review queue."),saveThisForLaterEditing:o("Save this digital product for later editing."),thisWillNotBeVisible:o("This digital product will not be visible."),enterName:o("Enter a digital product name…")}),(0,n.default)(s,o("Gift Card Product"),{url:o("Gift Card Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your gift card products automatically, you can optionally create a custom URL for this gift card product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a gift card product, to provide attribution or further reading."),enterTitle:o("Enter a gift card product title…"),featured:o("Featured Gift Card Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a gift card product flagged as featured."),titleShouldLinkToSourceUrl:o("Gift Card Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this gift card product."),publishThisNow:o("Publish this gift card product now."),publishThisInTheFuture:o("Publish this gift card product in the future."),markThisForReview:o("Mark this gift card product for review."),willBeAddedToReviewQueue:o("Gift Card Product will be added to review queue."),saveThisForLaterEditing:o("Save this gift card product for later editing."),thisWillNotBeVisible:o("This gift card product will not be visible."),enterName:o("Enter a gift card product name…")}),(0,n.default)(s,o("Physical Product"),{url:o("Physical Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your physical products automatically, you can optionally create a custom URL for this physical product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a physical product, to provide attribution or further reading."),enterTitle:o("Enter a physical product title…"),featured:o("Featured Physical Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a physical product flagged as featured."),titleShouldLinkToSourceUrl:o("Physical Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this physical product."),publishThisNow:o("Publish this physical product now."),publishThisInTheFuture:o("Publish this physical product in the future."),markThisForReview:o("Mark this physical product for review."),willBeAddedToReviewQueue:o("Physical Product will be added to review queue."),saveThisForLaterEditing:o("Save this physical product for later editing."),thisWillNotBeVisible:o("This physical product will not be visible."),enterName:o("Enter a physical product name…")}),(0,n.default)(s,o("Service Product"),{url:o("Service Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your service products automatically, you can optionally create a custom URL for this service product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a service product, to provide attribution or further reading."),enterTitle:o("Enter a service product title…"),featured:o("Featured Service Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a service product flagged as featured."),titleShouldLinkToSourceUrl:o("Service Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this service product."),publishThisNow:o("Publish this service product now."),publishThisInTheFuture:o("Publish this service product in the future."),markThisForReview:o("Mark this service product for review."),willBeAddedToReviewQueue:o("Service Product will be added to review queue."),saveThisForLaterEditing:o("Save this service product for later editing."),thisWillNotBeVisible:o("This service product will not be visible."),enterName:o("Enter a service product name…")}),(0,n.default)(s,o("Post"),{url:o("Post URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your posts automatically, you can optionally create a custom URL for this post above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a post, to provide attribution or further reading."),enterTitle:o("Enter a post title…"),featured:o("Featured Post"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a post flagged as featured."),titleShouldLinkToSourceUrl:o("Post Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this post."),publishThisNow:o("Publish this post now."),publishThisInTheFuture:o("Publish this post in the future."),markThisForReview:o("Mark this post for review."),willBeAddedToReviewQueue:o("Post will be added to review queue."),saveThisForLaterEditing:o("Save this post for later editing."),thisWillNotBeVisible:o("This post will not be visible."),enterName:o("Enter a post name…")}),s);function c(a){return function(e){var t=l[e.presentationName];if(!t){false;t=l.Default}return t[a]}}function d(e){return{$valueFn:c(e)}}var u={getValueFnByKey:d};t.default=u},8731:function(e,t,a){var i=a(853);var n=a(5814);e.exports=i(n)},8987:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(5320));var s=a(24);var r=[{icon:"text",title:(0,s.t)("Text"),value:n.default.TEXT},{icon:"textarea",title:(0,s.t)("Text Area"),value:n.default.TEXT_AREA},{icon:"select",title:(0,s.t)("Select"),value:n.default.SELECT},{icon:"checkbox",title:(0,s.t)("Checkbox"),value:n.default.CHECKBOX},{icon:"radio",title:(0,s.t)("Radio"),value:n.default.RADIO},{icon:"likert",title:(0,s.t)("Survey"),value:n.default.LIKERT},{icon:"name",title:(0,s.t)("Name"),value:n.default.NAME},{icon:"password",title:(0,s.t)("Password"),value:n.default.PASSWORD},{icon:"address",title:(0,s.t)("Address"),value:n.default.ADDRESS},{icon:"twitter",title:(0,s.t)("Twitter"),value:n.default.TWITTER},{icon:"website",title:(0,s.t)("Website"),value:n.default.WEBSITE},{icon:"email",title:(0,s.t)("Email"),value:n.default.EMAIL},{icon:"date",title:(0,s.t)("Date"),value:n.default.DATE},{icon:"time",title:(0,s.t)("Time"),value:n.default.TIME},{icon:"phone",title:(0,s.t)("Phone"),value:n.default.PHONE},{icon:"number",title:(0,s.t)("Number"),value:n.default.NUMBER},{icon:"currency",title:(0,s.t)("Currency"),value:n.default.CURRENCY},{icon:"sectionbreak",title:(0,s.t)("Line"),value:n.default.SECTION},{icon:"hidden",title:(0,s.t)("Hidden"),value:n.default.HIDDEN}];var o=r;t.default=o;e.exports=t.default},8988:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var u=a(1);var g=a(0);var p=a(7676);var h=a(5982);var f=a(5996);var m=a(74);var v=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){return g.createElement(p,this.props)}}]);return a}(g.Component);(0,c.default)(v,"propTypes",{initialData:u.shape({connectionState:u.number,username:u.string,socialConfig:u.obj,spreadsheetName:u.string}),isConnecting:u.bool,isConnected:u.bool,username:u.string,showConnectionFailedAlert:u.bool,showConnectionFailedError:u.bool,googleDriveSpreadsheetName:u.string,showFormNameRequiredError:u.bool,googleDriveConfig:u.object});(0,c.default)(v,"defaultProps",{initialData:{}});var b=m({getStores:function e(){return[f]},componentDidConnect:function e(t){h.loadFromSavedData(t.initialData||{})},getPropsFromStores:function e(){return f.getState()}},v);e.exports=b},8991:function(e,t,a){"use strict";var i=a(4);var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));function d(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var u=a(1);var g=a(0);var p=a(7482);var h=a(5390);var f=a(5956);var m=a(74);var v=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"UNSAFE_componentWillMount",value:function e(){h.savePreviousSettings()}},{key:"componentWillUnmount",value:function e(){h.restorePreviousSettings()}},{key:"render",value:function e(){return g.createElement(p,this.props)}}]);return a}(g.Component);(0,c.default)(v,"propTypes",{initialData:u.shape({connectionState:u.number,list:u.string,socialConfig:u.obj,username:u.string,useSingleOptIn:u.bool}),isConnecting:u.bool.isRequired,isMailChimpConnected:u.bool.isRequired,mailChimpError:u.bool.isRequired,mailChimpListId:u.string,mailChimpLists:u.arrayOf(u.object),mailChimpUsername:u.string,mailChimpUseSingleOptIn:u.bool,showConnectionFailedAlert:u.bool.isRequired,showMailingListRequiredError:u.bool.isRequired,showNoMailChimpListsAlert:u.bool.isRequired});(0,c.default)(v,"defaultProps",{mailChimpLists:[]});var b=m({getStores:function e(){return[f]},componentDidConnect:function e(t){h.loadFromSavedData(t.initialData||{})},getPropsFromStores:function e(){var t=f.getState();var a=t.mailChimpConfig;return{isConnecting:t.isConnecting,isMailChimpConnected:a.isMailChimpConnected,mailChimpError:a.mailChimpConnectionInfo.mailChimpError,mailChimpListId:a.mailChimpListId,mailChimpLists:a.mailChimpConnectionInfo.mailChimpLists,mailChimpUsername:a.mailChimpUsername,mailChimpUseSingleOptIn:a.mailChimpUseSingleOptIn,showConnectionFailedAlert:t.showConnectionFailedAlert,showMailingListRequiredError:t.showMailingListRequiredError,showNoMailChimpListsAlert:t.showNoMailChimpListsAlert}}},v);e.exports=b},8994:function(e,t){YUI.add("@sqs/layout-engine/tablet-dd-overrides",function(i){i.DD.Drag.START_EVENT="gesturemovestart";var t=i.DD.Drag.prototype._unprep;i.DD.Drag.prototype._unprep=function(){var e=this.get("node");t.call(this);e.detachAll("gesturemoveend")};var a="node";var n="dragNode";var s="offsetHeight";var r="offsetWidth";i.DD.DDM.set("throttleTime",30);i.mix(i.DD.DDM,{_pg_size:function(){if(this.activeDrag){var e=i.one("body");var t=e.get("docHeight");var a=e.get("docWidth");this._pg.setStyles({height:t+"px",width:a+"px"})}},_createPG:function(){var e=i.Node.create("<div></div>");var t=i.one("body");var a;e.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});e.set("id",i.stamp(e));e.addClass(i.DD.DDM.CSS_PREFIX+"-shim");t.prepend(e);this._pg=e;this._pg.on("pointerup",i.bind(this._end,this));a=i.one("win");i.on("window:resize",i.bind(this._pg_size,this));a.on("scroll",i.bind(this._pg_size,this))},_move:function(e){if(this.activeDrag){if(false===this._modernLongpress||!e._event.cancelable){i.DD.DDM.stopDrag();return}if(false===this.activeDrag.get("lock")){e.preventDefault();this.activeDrag._move.call(this.activeDrag,e);this._dropMove()}}},_setupListeners:function(){this._createPG();this._active=true;this._setupModernTouchListeners();i.one(i.config.doc).on("gesturemove",i.throttle(i.bind(this._move,this),this.get("throttleTime")));i.one(i.config.doc).on("pointercancel",this._end,this)},_setupModernTouchListeners:function(){var e=function(e){this._modernTouchTimer=window.setTimeout(function(){this._modernTouchmoved||(this._modernLongpress=true)}.bind(this),300)}.bind(this);i.config.doc.addEventListener("pointerdown",e,{passive:false});var t=function(e){this._modernLongpress?e.preventDefault():this._modernTouchmoved=true}.bind(this);i.config.doc.addEventListener("pointermove",t,{passive:false});var a=function(e){window.clearTimeout(this._modernTouchTimer);this._modernLongpress=false;this._modernTouchmoved=false}.bind(this);i.config.doc.addEventListener("pointerup",a);this.on("destroy",function(){i.config.doc.removeEventListener("pointerdown",e,{passive:false});i.config.doc.removeEventListener("pointermove",t,{passive:false});i.config.doc.removeEventListener("pointerup",a)})},_attachEventsOnPgActivate:function(){}},true);i.mix(i.DD.Drag.prototype,{initializer:function(){this.get(a).dd=this;if(!this.get(a).get("id")){var e=i.stamp(this.get(a));this.get(a).set("id",e)}this.actXY=[];this._invalids=i.clone(this._invalidsDefault,true);this._createEvents();this.get(n)||this.set(n,this.get(a));this.get("dragDelegate")||this.once("initializedChange",i.bind(this._prep,this));this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=false;var e=this.get("node");var t=i.DD.DDM;e.addClass(t.CSS_PREFIX+"-draggable");this.get("dragDelegate")||e.on(i.DD.Drag.START_EVENT,i.bind(this._handleMouseDownEvent,this),{minDistance:this.get("clickPixelThresh"),minTime:this.get("clickTimeThresh")});e.on("pointerup",i.bind(this._handleMouseUp,this),{standAlone:true});e.on("dragstart",i.bind(this._fixDragStart,this))},_handleMouseUp:function(e){this.fire("drag:mouseup");this._fixIEMouseUp();this.get("dragging")&&e.preventDefault();i.DD.DDM.activeDrag&&setTimeout(function(){i.DD.DDM._end()},0)}},true);i.mix(i.DD.Drop.prototype,{initializer:function(){i.later(100,this,this._createEvents);var e=this.get(a);var t;if(!e.get("id")){t=i.stamp(e);e.set("id",t)}e.addClass(i.DD.DDM.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"));i.DD.DDM.activeDrag&&false===i.DD.DDM.activeDrag.get("lock")&&i.DD.DDM._addActiveShim(this)},_createShim:function(){if(!this.get(a)||!this.get(a)._node)return;var e=i.DD.DDM;if(!e._pg){i.later(10,this,this._createShim);return}if(this.shim)return;var t=this.get("node");if(this.get("useShim")){t=i.Node.create('<div id="'+this.get(a).get("id")+'_shim"></div>');t.setStyles({height:this.get(a).get(s)+"px",width:this.get(a).get(r)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});e._pg.appendChild(t);e.on("ddm:start",i.bind(this._handleOverEvent,this));e.on("ddm:end",i.bind(this._handleOutEvent,this))}this.shim=t},_handleOverEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","999");i.DD.DDM._addActiveShim(this)},_handleOutEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","1");i.DD.DDM._removeActiveShim(this)},_handleOut:function(e){var t=i.DD.DDM;if((!t.isOverTarget(this)||e)&&this.overTarget){this.overTarget=false;if(t.activeDrag){this.get(a).removeClass(t.CSS_PREFIX+"-drop-over");t.activeDrag.get(a).removeClass(t.CSS_PREFIX+"-drag-over");this.fire("drop:exit",{drop:this,drag:t.activeDrag});t.activeDrag.fire("drag:exit",{drop:this,drag:t.activeDrag});delete t.otherDrops[this]}}}},true);i.DD.DDM.on("drag:start",function(){var e=i.config.doc.activeElement;e&&e.blur()})},"1.0",{requires:["dd","@sqs/yui-dd-wrappers/dd-behaviors"]})},8995:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.filterBlocksByBetaFeature=void 0;var n=i(a(114));var s=i(a(8996));var r=i(a(565));var o=function e(t){var a=(0,r.default)(t);a.forEach(function(e){var t=e.items.filter(function(e){var t=s.default[e];if(t)return n.default.isFeatureEnabled(t);return true});e.items=t});return a};t.filterBlocksByBetaFeature=o},8996:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var s=i(a(87));var r=i(a(701));var o=Object.freeze((0,n.default)({},r.default.MEMBER_AREA,s.default.MEMBER_AREAS));var l=o;t.default=l;e.exports=t.default},8997:function(e,t,a){"use strict";var i=a(853);var n=a(5805);e.exports=i(n)},8998:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(2));var l=i(a(40));var s=i(a(74));var c=i(a(6264));var r=i(a(9002));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u=(0,s.default)({getStores:function e(){return[c.default]},getPropsFromStores:function e(t){var a=c.default.getState();var i=a.userDataRequestResolved,n=a.userData;var s=a.selectionState[t.clientId];var r={userDataRequestResolved:i,selectionState:s,userData:n};if(!n)return r;var o={calendars:[].concat((0,l.default)(n.calendars),(0,l.default)(s.additionalUserData.calendars)),categories:[].concat((0,l.default)(n.categories),(0,l.default)(s.additionalUserData.categories)),classes:[].concat((0,l.default)(n.classes),(0,l.default)(s.additionalUserData.classes)),appointmentTypes:[].concat((0,l.default)(n.appointmentTypes),(0,l.default)(s.additionalUserData.appointmentTypes))};return d({},r,{userData:o})}},r.default);var g=u;t.default=g;e.exports=t.default},8999:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.fetchAcuityData=m;var u=i(a(44));var n=i(a(52));var s=i(a(43));var g=i(a(228));var p=i(a(9e3));var r=(0,s.default)(window,"Static.SQUARESPACE_CONTEXT.website.id");var h="/config/scheduling-service/api/squarespace/v1";function f(){return o.apply(this,arguments)}function o(){o=(0,n.default)(u.default.mark(function e(){var a,i;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=document.createElement("iframe");a.setAttribute("src","/config/scheduling-service/oauth2/squarespace?websiteId=".concat(r,"&background=1"));a.style.display="none";i=new Promise(function(e,t){a.addEventListener("load",e);a.addEventListener("error",t)});document.body.appendChild(a);t.prev=5;t.next=8;return i;case 8:t.prev=8;a.parentNode.removeChild(a);return t.finish(8);case 11:case"end":return t.stop()}},e,null,[[5,,8,11]])}));return o.apply(this,arguments)}function m(){return l.apply(this,arguments)}function l(){l=(0,n.default)(u.default.mark(function e(){var a,i,n,s,r,o,l,c,d=arguments;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=d.length>0&&void 0!==d[0]?d[0]:{},i=a.afterAuth,n=void 0!==i&&i;t.prev=1;t.next=4;return g.default.get("".concat(h,"/me"));case 4:s=t.sent.data;r=g.default.get("".concat(h,"/calendars"));o=g.default.get("".concat(h,"/appointment-types"));t.next=9;return Promise.all([r,o]);case 9:l=t.sent;c=(0,p.default)({user:s,calendars:l[0].data,appointmentTypes:l[1].data});return t.abrupt("return",c);case 14:t.prev=14;t.t0=t["catch"](1);if(!(401===t.t0.status)){t.next=24;break}if(!n){t.next=19;break}throw new Error;case 19:t.next=21;return f();case 21:t.next=23;return m({afterAuth:true});case 23:return t.abrupt("return",t.sent);case 24:if(!(403===t.t0.status)){t.next=26;break}return t.abrupt("return",null);case 26:throw new Error(t.t0);case 27:case"end":return t.stop()}},e,null,[[1,14]])}));return l.apply(this,arguments)}},9e3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=function e(t){return{id:t.id,name:t.name}};function i(e){var t=e.user,a=e.calendars,i=e.appointmentTypes;var n=Array.from(i.reduce(function(e,t){return e.add(t.category)},new Set)).sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{id:e,name:e}});var s=i.filter(function(e){return"class"===e.type}).map(o);var r=i.filter(function(e){return"service"===e.type}).map(o);return{userId:t.id,calendars:a.map(function(e){return{id:e.id,name:e.name}}),categories:n,classes:s,appointmentTypes:r}}e.exports=t.default},9001:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=n;var l=i(a(565));var c=a(24);var d=a(6266);var u=i(a(5331));function g(e){if(e.schedulingPageGroup)return{schedulingPageGroup:e.schedulingPageGroup};if(e.acuityUrl)return{schedulingPageGroup:u.default.CUSTOM};return{}}function n(e,t){var a=(0,l.default)(d.initialSchedulingState);Object.assign(a,g(t));var i=a.schedulingPageGroup;Object.assign(a,{additionalUserData:{calendars:[],categories:[],classes:[],appointmentTypes:[]},initialSchedulingPageGroup:i});if(!e){t.acuityUrl&&(a.acuityUrl=t.acuityUrl);return a}a.schedulingPageGroup!==u.default.CATEGORIES&&(a.categoryIndex=e.categories.findIndex(function(e){return e.id.length>0}));switch(a.schedulingPageGroup){case u.default.ALL:break;case u.default.CALENDARS:var n=e.calendars.findIndex(function(e){return e.id===t.calendarId});if(-1===n){a.additionalUserData.calendars.push({id:t.calendarId,name:(0,c.t)("(Deleted)")});a.calendarIndex=e.calendars.length}else a.calendarIndex=n;break;case u.default.CATEGORIES:var s=e.categories.findIndex(function(e){return e.id===t.category});if(-1===s){a.additionalUserData.categories.push({id:t.category,name:(0,c.t)("(Deleted)")+" "+t.category});a.categoryIndex=e.categories.length}else a.categoryIndex=s;break;case u.default.CLASSES:if(null===t.classId)a.classIndex=d.ALL_CLASSES_INDEX;else{var r=e.classes.findIndex(function(e){return e.id===t.classId});if(-1===r){a.additionalUserData.classes.push({id:t.classId,name:(0,c.t)("(Deleted)")});a.classIndex=e.classes.length}else a.classIndex=r}break;case u.default.APPOINTMENT_TYPES:var o=e.appointmentTypes.findIndex(function(e){return e.id===t.appointmentTypeId});if(-1===o){a.additionalUserData.appointmentTypes.push({id:t.appointmentTypeId,name:(0,c.t)("(Deleted)")});a.appointmentTypeIndex=e.appointmentTypes.length}else a.appointmentTypeIndex=o;break;case u.default.CUSTOM:a.acuityUrl=t.acuityUrl;break;default:throw new Error("Unknown scheduling page type:",a.schedulingPageGroup)}return a}e.exports=t.default},9002:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));var g=i(a(0));var p=i(a(6265));var h=i(a(5331));var f=i(a(9003));var m=i(a(9005));var v=i(a(9010));var b=i(a(7375));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var n=function(e){(0,c.default)(s,e);var n=y(s);function s(){var t;(0,r.default)(this,s);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(t),"onChangeSchedulingPageGroup",function(e){p.default.change(t.props.clientId,{schedulingPageGroup:e})});(0,u.default)((0,l.default)(t),"onChangeCalendarIndex",function(e){p.default.change(t.props.clientId,{calendarIndex:parseInt(e,10)})});(0,u.default)((0,l.default)(t),"onChangeCategoryIndex",function(e){p.default.change(t.props.clientId,{categoryIndex:parseInt(e,10)})});(0,u.default)((0,l.default)(t),"onChangeClassIndex",function(e){p.default.change(t.props.clientId,{classIndex:parseInt(e,10)})});(0,u.default)((0,l.default)(t),"onChangeAppointmentTypeIndex",function(e){p.default.change(t.props.clientId,{appointmentTypeIndex:parseInt(e,10)})});(0,u.default)((0,l.default)(t),"onChangeAcuityUrl",function(e){p.default.change(t.props.clientId,{acuityUrl:e,urlValidationErrorMessage:""})});(0,u.default)((0,l.default)(t),"onChangeNonRegisteredAcuityUrl",function(e){p.default.change(t.props.clientId,{schedulingPageGroup:e?h.default.CUSTOM:h.default.ALL,acuityUrl:e,urlValidationErrorMessage:""})});return t}(0,o.default)(s,[{key:"renderRegisteredDialog",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;return g.default.createElement(v.default,{userData:a,selectionState:i,onChangeSchedulingPageGroup:this.onChangeSchedulingPageGroup,onChangeCalendarIndex:this.onChangeCalendarIndex,onChangeCategoryIndex:this.onChangeCategoryIndex,onChangeClassIndex:this.onChangeClassIndex,onChangeAppointmentTypeIndex:this.onChangeAppointmentTypeIndex,onChangeAcuityUrl:this.onChangeAcuityUrl,errorMessage:i.urlValidationErrorMessage})}},{key:"renderNonRegisteredDialog",value:function e(){var t=this.props.selectionState;return g.default.createElement(m.default,{acuityUrl:t.acuityUrl,onChangeAcuityUrl:this.onChangeNonRegisteredAcuityUrl,errorMessage:t.urlValidationErrorMessage})}},{key:"render",value:function e(){var t=this.props,a=t.userDataRequestResolved,i=t.userData;return g.default.createElement("div",{className:f.default.container},a?i?this.renderRegisteredDialog():this.renderNonRegisteredDialog():g.default.createElement(b.default,{className:f.default.loadingIndicator}))}}]);return s}(g.default.Component);t.default=n;e.exports=t.default},9003:function(e,t,a){var i=a(9004);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9004:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".SchedulingEditorDialog-container-3ZeSP {\n  padding: 22px 0;\n}\n.SchedulingEditorDialog-loadingIndicator-2r92U {\n  margin: 0 auto;\n}\n",""]);t.locals={container:"SchedulingEditorDialog-container-3ZeSP",loadingIndicator:"SchedulingEditorDialog-loadingIndicator-2r92U"}},9005:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));var g=i(a(0));var p=a(24);var h=i(a(9006));var f=a(157);var m=i(a(6860));function v(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var b="/config/scheduling";var n=function(e){(0,c.default)(s,e);var n=v(s);function s(){var t;(0,r.default)(this,s);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(t),"state",{showUrlInput:false});(0,u.default)((0,l.default)(t),"urlInputRef",function(e){t.urlInputElement=e});(0,u.default)((0,l.default)(t),"focusUrlInput",function(){t.urlInputElement&&t.urlInputElement.focus()});(0,u.default)((0,l.default)(t),"onGetStartedClick",function(){window.open(b,"_blank")});(0,u.default)((0,l.default)(t),"onAddUrlClick",function(){t.setState({showUrlInput:true});t.focusUrlInput()});return t}(0,o.default)(s,[{key:"componentDidUpdate",value:function e(t,a){!a.showUrlInput&&this.state.showUrlInput&&this.focusUrlInput()}},{key:"render",value:function e(){return g.default.createElement("div",null,g.default.createElement("div",{className:h.default.description},(0,p.t)("Allow visitors to directly book appointments and classes. If you already use Acuity, link your scheduler, calendar, or appointment type.")),g.default.createElement(f.Button,{type:"primary",onClick:this.onGetStartedClick},(0,p.t)("Get Started With Scheduling")),g.default.createElement(f.Button,{onClick:this.onAddUrlClick},(0,p.t)("Add Existing Acuity Schedule")),this.state.showUrlInput?g.default.createElement("div",{className:h.default.urlInputWrapper},g.default.createElement(m.default,{url:this.props.acuityUrl,onChange:this.props.onChangeAcuityUrl,inputRef:this.urlInputRef,errorMessage:this.props.errorMessage})):null)}}]);return s}(g.default.Component);t.default=n;e.exports=t.default},9006:function(e,t,a){var i=a(9007);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9007:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".NonRegisteredDialog-description-1kLqf {\n  font-size: 12px;\n  margin-bottom: 44px;\n}\n.NonRegisteredDialog-urlInputWrapper-39w91 {\n  margin-top: 44px;\n}\n",""]);t.locals={description:"NonRegisteredDialog-description-1kLqf",urlInputWrapper:"NonRegisteredDialog-urlInputWrapper-39w91"}},9008:function(e,t,a){var i=a(9009);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9009:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".UrlInput-hint-1GEgb {\n  font-size: 12px;\n  color: #a1a1a1;\n  margin-top: 4px;\n}\n",""]);t.locals={hint:"UrlInput-hint-1GEgb"}},9010:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=a(24);var d=i(a(0));var u=i(a(5331));var g=i(a(9011));var p=i(a(9013));var h=i(a(9014));var f=i(a(9015));var m=i(a(9016));var v=i(a(9017));var b=i(a(6860));function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var S=function(e){(0,r.default)(a,e);var t=y(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"renderSecondaryInput",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;switch(i.schedulingPageGroup){case u.default.ALL:return null;case u.default.CALENDARS:return d.default.createElement(h.default,{calendars:a.calendars,calendarIndex:i.calendarIndex,onChange:this.props.onChangeCalendarIndex});case u.default.CATEGORIES:return d.default.createElement(f.default,{categories:a.categories,categoryIndex:i.categoryIndex,onChange:this.props.onChangeCategoryIndex});case u.default.CLASSES:return d.default.createElement(m.default,{classes:a.classes,classIndex:i.classIndex,onChange:this.props.onChangeClassIndex});case u.default.APPOINTMENT_TYPES:return d.default.createElement(v.default,{appointmentTypes:a.appointmentTypes,appointmentTypeIndex:i.appointmentTypeIndex,onChange:this.props.onChangeAppointmentTypeIndex});case u.default.CUSTOM:return d.default.createElement(b.default,{url:i.acuityUrl,onChange:this.props.onChangeAcuityUrl,errorMessage:this.props.errorMessage,hint:(0,c.t)("Add the URL of your existing scheduling page, calendar, or appointment type.")});default:return null}}},{key:"render",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:g.default.description},(0,c.t)("Choose an existing scheduling page, calendar, or appointment type.")),d.default.createElement("div",{className:g.default.inputWrapper},d.default.createElement(p.default,{userData:a,schedulingPageGroup:i.schedulingPageGroup,initialSchedulingPageGroup:i.initialSchedulingPageGroup,onChange:this.props.onChangeSchedulingPageGroup})),d.default.createElement("div",{className:g.default.inputWrapper},this.renderSecondaryInput()))}}]);return a}(d.default.Component);t.default=S;e.exports=t.default},9011:function(e,t,a){var i=a(9012);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9012:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".RegisteredDialog-description-3B5Ms {\n  font-size: 12px;\n  margin-bottom: 33px;\n}\n.RegisteredDialog-inputWrapper-3NJjP:not(:last-child) {\n  margin-bottom: 22px;\n}\n",""]);t.locals={description:"RegisteredDialog-description-3B5Ms",inputWrapper:"RegisteredDialog-inputWrapper-3NJjP"}},9013:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=i(a(5331));var h=a(24);function f(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var m=function(e){(0,r.default)(a,e);var t=f(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.userData,i=t.schedulingPageGroup,n=t.initialSchedulingPageGroup;var s=n===p.default.CALENDARS||a.calendars.length>=2;var r=n===p.default.CATEGORIES||a.categories.length>=2;var o=a.classes.length+a.appointmentTypes.length>=2;var l=n===p.default.CLASSES||o&&a.classes.length>=1;var c=n===p.default.APPOINTMENT_TYPES||o&&a.appointmentTypes.length>=1;return d.default.createElement(g.Select,{label:(0,h.t)("Scheduling Page"),value:i,onChange:this.props.onChange},d.default.createElement("option",{value:p.default.ALL},(0,h.t)("All Public Appointment Types")),s?d.default.createElement("option",{value:p.default.CALENDARS},(0,h.t)("Calendars")):null,r?d.default.createElement("option",{value:p.default.CATEGORIES},(0,h.t)("Categories")):null,l?d.default.createElement("option",{value:p.default.CLASSES},(0,h.t)("Classes")):null,c?d.default.createElement("option",{value:p.default.APPOINTMENT_TYPES},(0,h.t)("Appointment Types")):null,d.default.createElement("option",{value:p.default.CUSTOM},(0,h.t)("Custom Link")))}}]);return a}(d.default.Component);t.default=m;(0,c.default)(m,"propTypes",{userData:u.default.shape({calendars:u.default.array.isRequired,categories:u.default.array.isRequired,classes:u.default.array.isRequired,appointmentTypes:u.default.array.isRequired}),schedulingPageGroup:u.default.string,initialSchedulingPageGroup:u.default.string,onChange:u.default.func});e.exports=t.default},9014:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=a(24);function h(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var f=function(e){(0,r.default)(a,e);var t=h(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.calendars,i=t.calendarIndex,n=t.onChange;return d.default.createElement(g.Select,{label:(0,p.t)("Calendar"),value:i,onChange:n},a.map(function(e,t){var a=e.name;return d.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(d.default.Component);t.default=f;(0,c.default)(f,"propTypes",{calendars:u.default.arrayOf(u.default.shape({name:u.default.string.isRequired})).isRequired,calendarIndex:u.default.number,onChange:u.default.func});e.exports=t.default},9015:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=a(24);function h(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var f=function(e){(0,r.default)(a,e);var t=h(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.categories,i=t.categoryIndex,n=t.onChange;return d.default.createElement(g.Select,{value:i,label:(0,p.t)("Category"),onChange:n},a.map(function(e,t){var a=e.id,i=e.name;return a.length>0?d.default.createElement("option",{key:t,value:t},i):null}))}}]);return a}(d.default.Component);t.default=f;(0,c.default)(f,"propTypes",{categories:u.default.arrayOf(u.default.shape({id:u.default.string.isRequired,name:u.default.string.isRequired})).isRequired,categoryIndex:u.default.number,onChange:u.default.func});e.exports=t.default},9016:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=a(24);var h=a(6266);function f(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var m=function(e){(0,r.default)(a,e);var t=f(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.classes,i=t.classIndex,n=t.onChange;return d.default.createElement(g.Select,{value:i,label:(0,p.t)("Class"),onChange:n},d.default.createElement("option",{value:h.ALL_CLASSES_INDEX},(0,p.t)("All Classes")),a.map(function(e,t){var a=e.name;return d.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(d.default.Component);t.default=m;(0,c.default)(m,"propTypes",{classes:u.default.arrayOf(u.default.shape({name:u.default.string.isRequired})).isRequired,classIndex:u.default.number,onChange:u.default.func});e.exports=t.default},9017:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(9));var r=i(a(10));var o=i(a(11));var l=i(a(7));var c=i(a(2));var d=i(a(0));var u=i(a(1));var g=a(157);var p=a(24);function h(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,l.default)(i),t;if(n()){var a=(0,l.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var f=function(e){(0,r.default)(a,e);var t=h(a);function a(){(0,n.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.appointmentTypes,i=t.appointmentTypeIndex,n=t.onChange;return d.default.createElement(g.Select,{value:i,label:(0,p.t)("Appointment Type"),onChange:n},a.map(function(e,t){var a=e.name;return d.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(d.default.Component);t.default=f;(0,c.default)(f,"propTypes",{appointmentTypes:u.default.arrayOf(u.default.shape({name:u.default.string.isRequired})).isRequired,appointmentTypeIndex:u.default.number,onChange:u.default.func});e.exports=t.default},9018:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=r;var n=i(a(5331));var s=a(6861);function r(e,t){var a=e.selectionState[t];var i={schedulingPageGroup:a.schedulingPageGroup};switch(a.schedulingPageGroup){case n.default.ALL:i.acuityUrl=a.acuityUrl;break;case n.default.CALENDARS:i.calendarId=(0,s.getCalendarId)(e,t);break;case n.default.CATEGORIES:i.category=(0,s.getCategory)(e,t);break;case n.default.CLASSES:i.classId=(0,s.getClassId)(e,t);break;case n.default.APPOINTMENT_TYPES:i.appointmentTypeId=(0,s.getAppointmentTypeId)(e,t);break;case n.default.CUSTOM:i.acuityUrl=a.acuityUrl;break;default:throw new Error("Undefined scheduling page group: "+a.schedulingPageGroup)}return i}e.exports=t.default},9019:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){if(""===e)return true;var t=["squarespacescheduling.com","acuityscheduling.com","as.me"];var a=/(https?:\/\/)?([a-zA-Z0-9_\-]+\.)*([a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,24})(\/\S*)?/g;var i=a.exec(e);var n=i?i[3]:null;return t.includes(n)}e.exports=t.default},9020:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a(5));var c=i(a(19));var r=i(a(8));var o=i(a(9));var d=i(a(6));var u=i(a(10));var s=i(a(11));var g=i(a(7));var p=i(a(2));var h=i(a(0));var n=i(a(21));var f=i(a(9021));var m=i(a(9028));var v=a(53);var b=a(32);function y(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,g.default)(i),t;if(n()){var a=(0,g.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var S={"mobile-0":f.default.Mobile,default:f.default.Desktop};var q=function(e){(0,u.default)(s,e);var n=y(s);function s(){var e;(0,r.default)(this,s);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=n.call.apply(n,[this].concat(a));(0,p.default)((0,d.default)(e),"formRef",h.default.createRef());(0,p.default)((0,d.default)(e),"onRequestClose",function(){e.formRef.current&&e.formRef.current.handleClose();e.props.onRequestClose()});return e}(0,o.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.id,i=t.isOpen,n=(0,c.default)(t,["id","isOpen"]);if(!i)return null;var s=(0,b.getBreakpoint)(v.breakpoints),r=s.name;var o=S[r]||S.default;return h.default.createElement(o,{isOpen:i,onRequestClose:this.onRequestClose},h.default.createElement(m.default,(0,l.default)({key:a,ref:this.formRef},n)))}}]);return s}(h.default.Component);(0,p.default)(q,"defaultProps",{onRequestClose:n.default});var _=q;t.default=_;e.exports=t.default},9021:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(9022));var s=i(a(9025));var r={Desktop:n.default,Mobile:s.default};t.default=r;e.exports=t.default},9022:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a(8));var r=n(a(9));var o=n(a(6));var l=n(a(10));var c=n(a(11));var d=n(a(7));var u=n(a(2));var g=n(a(1));var p=i(a(0));var h=a(30);var f=a(2023);var m=a(2612);var v=n(a(9023));function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),true).forEach(function(e){(0,u.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function S(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.default)(this,t)}}var q=230;var _=476;var C=56;var E=48;var k=function e(t){if(!t)return C;if(t.bottom+_>window.innerHeight-f.GRID_SIZE_PX)return window.innerHeight-_-4*f.GRID_SIZE_PX;return t.top+C};var w=function(e){(0,l.default)(i,e);var a=S(i);function i(e){var t;(0,s.default)(this,i);t=a.call(this,e);(0,u.default)((0,o.default)(t),"handleDrag",function(){t.state.wasDragged||t.setState({wasDragged:true})});(0,u.default)((0,o.default)(t),"renderModalHeader",function(e){return p.default.createElement(h.Modal.Position.DragHandle,null,p.default.createElement(m.Header,e))});t.state={mountPos:{x:window.innerWidth-E,y:k()},wasDragged:false};return t}(0,r.default)(i,[{key:"render",value:function e(){var t=this.props,a=t.isOpen,i=t.onRequestClose;var n=this.state.mountPos;return p.default.createElement(h.Modal.Transition,{duration:q},a&&p.default.createElement(h.Modal,{closeOnEsc:true,closeOnOverlayClicked:true,onRequestClose:i,lockScroll:false},p.default.createElement(h.Modal.Position,{draggable:true,position:n,anchor:"top-right",onDrag:this.handleDrag},p.default.createElement(h.Modal.Dialog,{className:v.default.dialogContainer},p.default.cloneElement(p.default.Children.only(this.props.children),y({},this.props.children.props,{isModalContainer:true,scrollContainerClassName:v.default.scrollContainerClassName,renderHeader:this.renderModalHeader}))))))}}]);return i}(p.Component);t.default=w;(0,u.default)(w,"propTypes",{jsfInstance:g.default.string,uiSchema:g.default.arrayOf(g.default.object),value:g.default.object,schema:g.default.object});e.exports=t.default},9023:function(e,t,a){var i=a(9024);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9024:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".BlockEditorContainer-desktop-noPointerEvents-1__VV {\n  pointer-events: none;\n}\n.BlockEditorContainer-desktop-dialogContainer-3ZbyR {\n  pointer-events: auto;\n  width: 320px;\n  min-width: 320px;\n  height: 476px;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.BlockEditorContainer-desktop-scrollContainerClassName-2bcTW {\n  position: absolute;\n  overflow: auto;\n  top: 55px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.BlockEditorContainer-desktop-customDropdownZIndexHack-3Zs65 {\n  z-index: 40000;\n}\n.BlockEditorContainer-desktop-contextWithoutMargin-bF27c > label {\n  margin-top: 0 !important;\n}\n",""]);t.locals={noPointerEvents:"BlockEditorContainer-desktop-noPointerEvents-1__VV",dialogContainer:"BlockEditorContainer-desktop-dialogContainer-3ZbyR",scrollContainerClassName:"BlockEditorContainer-desktop-scrollContainerClassName-2bcTW",customDropdownZIndexHack:"BlockEditorContainer-desktop-customDropdownZIndexHack-3Zs65",contextWithoutMargin:"BlockEditorContainer-desktop-contextWithoutMargin-bF27c"}},9025:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));var g=i(a(0));var p=i(a(60));var h=a(30);var f=a(53);var m=a(2612);var v=i(a(9026));var b=i(a(4137));var y=a(248);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),true).forEach(function(e){(0,u.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function q(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var _=function(e){(0,c.default)(s,e);var n=q(s);function s(){var t;(0,r.default)(this,s);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(t),"sheetRef",g.default.createRef());(0,u.default)((0,l.default)(t),"onDockIndexChange",function(e){0===e&&t.props.onRequestClose()});(0,u.default)((0,l.default)(t),"receiveHeaderRef",function(e){t.headerNode=e});(0,u.default)((0,l.default)(t),"renderBody",function(){return g.default.createElement("div",{className:v.default.formContainer},g.default.cloneElement(g.default.Children.only(t.props.children),S({},t.props.children.props,{renderHeader:t.renderFormHeader,scrollContainerClassName:v.default.scrollContainerClassName})))});(0,u.default)((0,l.default)(t),"renderFormHeader",function(e){return t.headerNode?p.default.createPortal(g.default.createElement(m.Header,e),t.headerNode):null});(0,u.default)((0,l.default)(t),"renderHeader",function(){return g.default.createElement("div",{ref:t.receiveHeaderRef,className:v.default.headerContainer})});return t}(0,o.default)(s,[{key:"componentDidMount",value:function e(){this.sheetRef.current.setDockIndex(1)}},{key:"render",value:function e(){return g.default.createElement(b.default.Provider,{theme:y.rosetta.white},g.default.createElement(h.Sheet.Portal,null,g.default.createElement(h.Sheet.Container,{zIndex:99999},g.default.createElement(h.Sheet.Drawer,{docks:[parseFloat(f.space[10]),window.innerHeight/2,window.innerHeight],draggable:true,onDockIndexChange:this.onDockIndexChange,ref:this.sheetRef,renderHeader:this.renderHeader,renderBody:this.renderBody}))))}}]);return s}(g.default.Component);var C=_;t.default=C;e.exports=t.default},9026:function(e,t,a){var i=a(9027);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9027:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".BlockEditorContainer-mobile-headerContainer-2P1kk {\n  height: 55px;\n}\n.BlockEditorContainer-mobile-formContainer-3TSn8 {\n  height: 100%;\n}\n.BlockEditorContainer-mobile-scrollContainerClassName-3Zhxu {\n  position: absolute;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n",""]);t.locals={headerContainer:"BlockEditorContainer-mobile-headerContainer-2P1kk",formContainer:"BlockEditorContainer-mobile-formContainer-3TSn8",scrollContainerClassName:"BlockEditorContainer-mobile-scrollContainerClassName-3Zhxu"}},9028:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a(5));var s=n(a(27));var o=n(a(8));var l=n(a(9));var c=n(a(6));var d=n(a(10));var u=n(a(11));var g=n(a(7));var p=n(a(2));var h=i(a(0));var f=n(a(1));var m=n(a(816));var v=n(a(2453));var b=n(a(7721));var y=a(2362);function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function q(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),true).forEach(function(e){(0,p.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,g.default)(i),t;if(n()){var a=(0,g.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,u.default)(this,t)}}var C={address:y.address,amazonsearch:y.amazonsearch,array:y.array,boolean:y.boolean,button:y.button,code:y.code,contentpicker:y.contentpicker,context:y.context,disclosure:y.disclosure,dropdownselect:y.dropdownselect,embed:b.default,fileuploader:y.fileuploader,gallerygrid:y.gallerygrid,group:y.group,hidden:y.hidden,iconselect:y.iconselect,image:y.image,imageuploader:y.imageuploader,link:y.link,linkeditor:y.linkeditor,markdown:y.markdown,oauthconnect:y.oauthconnect,pluck:y.pluck,range:y.range,rangeinput:y.rangeinput,richtext:y.richtext,search:y.search,segmentedcontrol:y.segmentedcontrol,segmentedradio:y.segmentedradio,select:y.select,spacer:y.spacer,socialaccountlinks:y.socialaccountlinks,string:y.string,textarea:y.textarea,urlparse:y.urlparse};var E=function(e){(0,d.default)(a,e);var t=_(a);function a(e){var i;(0,o.default)(this,a);i=t.call(this,e);(0,p.default)((0,c.default)(i),"handleClose",function(){var e=i.props.config.handlers;if(e&&e.onSave&&"function"===typeof e.onSave){var t=i.state.configurations;e.onSave(t.default.value,t)}});(0,p.default)((0,c.default)(i),"handleChange",function(e){var t=e.changes;if(!t)return;var a=Object.entries(t).reduce(function(e,t){var a=(0,s.default)(t,2),i=a[0],n=a[1].value;e[i]=q({},e[i],{value:n});return e},i.state.configurations);i.setState({configurations:a});i.props.onChange&&i.props.onChange(a.default.value)});i.state={initialValue:e.initialValue,configurations:{default:q({},e.config,{value:e.initialValue}),environmentVariables:{schema:{type:"object",properties:{}},uiSchema:[],value:{platform:"web",device:"desktop"}}}};return i}(0,l.default)(a,[{key:"componentDidMount",value:function e(){var a=this;var t=this.props.config.handlers;var i=this.state.configurations;t&&t.onLoad&&"function"===typeof t.onLoad&&t.onLoad(i.default.value).then(function(t){if(!i)return;a.setState(function(e){return{configurations:q({},e.configurations,{},t)}})})}},{key:"render",value:function e(){var t=this.props,a=t.config,i=t.renderHeader,n=t.scrollContainerClassName;var s=(0,m.default)(a.meta,function(e,t){return"leftBarButton"!==t&&"rightBarButton"!==t});return a.uiSchema?h.default.createElement(v.default,(0,r.default)({},s,{isFullHeight:true,onChange:this.handleChange,components:C,configurations:this.state.configurations,renderHeader:i,renderTransition:this.renderTransition,scrollContainerClassName:n})):null}}]);return a}(h.Component);(0,p.default)(E,"defaultProps",{config:{}});(0,p.default)(E,"propTypes",{config:f.default.shape({schema:f.default.object,uiSchema:f.default.array,itemDefaults:f.default.array,meta:f.default.object,handlers:f.default.object}),initialValue:f.default.object,scrollContainerClassName:f.default.string});var k=E;t.default=k;e.exports=t.default},9032:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a(8));var o=i(a(9));var l=i(a(6));var c=i(a(10));var s=i(a(11));var d=i(a(7));var u=i(a(2));var n=i(a(1));var g=i(a(0));var p=i(a(60));var h=i(a(15));var f=a(24);var m=a(39);var v=i(a(9033));function b(i){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,d.default)(i),t;if(n()){var a=(0,d.default)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,s.default)(this,t)}}var y=function(e){(0,c.default)(s,e);var n=b(s);function s(){var t;(0,r.default)(this,s);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=n.call.apply(n,[this].concat(a));(0,u.default)((0,l.default)(t),"state",{anchor:t.props.anchor});(0,u.default)((0,l.default)(t),"node",document.createElement("div"));(0,u.default)((0,l.default)(t),"handleRemoveClick",function(e){e.preventDefault();t.props.onRemoveLink()});(0,u.default)((0,l.default)(t),"handleEditClick",function(e){e.preventDefault();t.props.onEditLink(t.props.link)});return t}(0,o.default)(s,[{key:"UNSAFE_componentWillMount",value:function e(){document.body.appendChild(this.node);if(this.props.isOpen){var t=this.getAnchor();t&&this.setState({anchor:t})}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(t.isOpen&&t.link&&(!this.props.isOpen||!this.props.link||t.link.href!==this.props.link.href||!this.state.anchor)){var a=this.getAnchor(t);a&&this.setState({anchor:a})}}},{key:"componentDidUpdate",value:function e(t){var a=this;this.props.isOpen&&this.props.inFullScreen!==t.inFullScreen&&setTimeout(function(){var e=a.getAnchor();e&&a.setState({anchor:e})},0)}},{key:"componentWillUnmount",value:function e(){this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"getAnchor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(t.anchor)return t.anchor;return s.getAnchor(t.getSelection())}},{key:"renderPreview",value:function e(){var t=this.props,a=t.link,i=t.className;var n=this.state.anchor;var s=a.href;var r=(0,f.t)("No Link URL");var o=(0,h.default)(v.default.container,i);return g.default.createElement("div",{className:o,style:n},g.default.createElement("a",{className:v.default.link,href:s,target:"_blank",title:(0,f.t)("Go to URL"),onMouseDown:function e(t){t.stopPropagation();t.preventDefault();window.open(t.currentTarget.href)}},g.default.createElement("span",{className:v.default.linkText},s||r)),g.default.createElement("button",{className:v.default.actionButton,onMouseDown:this.handleRemoveClick},g.default.createElement(m.T,{project:"src.shared"},"Remove")),g.default.createElement("button",{className:v.default.actionButton,onMouseDown:this.handleEditClick},g.default.createElement(m.T,{project:"src.shared"},"Edit")))}},{key:"render",value:function e(){var t=this.props,a=t.link,i=t.isOpen;if(!i||!this.state.anchor||!a||!a.href)return null;return p.default.createPortal(this.renderPreview(),this.node)}}]);return s}(g.default.Component);(0,u.default)(y,"propTypes",{anchor:n.default.shape({left:n.default.number,top:n.default.number}),link:n.default.shape({href:n.default.string,target:n.default.string}),onRemoveLink:n.default.func.isRequired,onEditLink:n.default.func.isRequired,isOpen:n.default.bool,inFullScreen:n.default.bool,getSelection:n.default.func});(0,u.default)(y,"defaultProps",{getSelection:function e(){return window.getSelection()},isOpen:false});(0,u.default)(y,"getAnchor",function(e){if(!e||0===e.rangeCount)return null;var t=e.getRangeAt(0).startContainer;if(!t)return null;t.getBoundingClientRect||(t=t.parentNode);var a=t.getBoundingClientRect(),i=a.bottom,n=a.left;return{top:i,left:Math.min(n,window.innerWidth-305)}});var S=y;t.default=S;e.exports=t.default},9033:function(e,t,a){var i=a(9034);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9034:function(e,t,a){t=e.exports=a(16)(false);t.i(a(891),"");t.push([e.i,".LinkPreview-container-2kZ8x {\n  position: fixed;\n  width: 330px;\n  height: 44px;\n  margin-top: 5.5px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: white;\n  border-radius: 0px;\n  white-space: nowrap;\n  z-index: 300000;\n}\n.LinkPreview-link-2KjFj {\n  display: inline-block;\n  padding: 11px;\n  padding-right: 0;\n  margin-right: 11px;\n  flex-grow: 1;\n  border: none;\n  color: #3e3e3e;\n  font-size: 12px;\n  height: 22px;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  outline: none;\n}\n.LinkPreview-link-2KjFj .LinkPreview-linkText-31v4g {\n  border-bottom: 1px solid transparent;\n}\n.LinkPreview-link-2KjFj:hover .LinkPreview-linkText-31v4g {\n  border-bottom-color: #797979;\n}\n.LinkPreview-actionButton-3mSO9 {\n  display: inline-block;\n  padding: 11px;\n  flex-grow: 0;\n  color: #3e3e3e;\n  font-size: 11px;\n  letter-spacing: 0.5px;\n  font-weight: 500;\n  line-height: 22px;\n  text-transform: uppercase;\n  background: white;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\n.LinkPreview-actionButton-3mSO9:hover {\n  background: #e4e4e4;\n}\n",""]);t.locals={container:"LinkPreview-container-2kZ8x "+a(891).locals["windowShadow"],link:"LinkPreview-link-2KjFj",linkText:"LinkPreview-linkText-31v4g",actionButton:"LinkPreview-actionButton-3mSO9"}},9035:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var h=n(a(27));var f=i(a(0));var m=n(a(87));var v=a(30);var b=n(a(9036));var y=n(a(9037));var S=n(a(15));var q=a(103);var _=function e(t){return t.stopPropagation()};function s(e){var t=e.className,a=e.modalClassName,i=e.pageDropdownClassName,n=e.isOpen,s=e.initialPosition,r=e.value,o=e.onChange,l=e.canEditTextContent,c=e.onRequestClose;var d=(0,f.useState)(r),u=(0,h.default)(d,2),g=u[0],p=u[1];return f.default.createElement(v.Modal.Transition,null,n&&f.default.createElement(v.Modal,{className:(0,S.default)(y.default.noPointerEvents,t),lockScroll:false,lockFocus:false,zIndex:1e5},f.default.createElement(v.Modal.Position,{className:y.default.noPointerEvents,position:s,constraintTo:"window"},f.default.createElement(v.Modal.Dialog,{className:(0,S.default)(y.default.pointerEvents,y.default.editorContainer)},f.default.createElement("div",{onClick:_},f.default.createElement(b.default,{canEditTextContent:l,className:y.default.linkModal,modalClassName:(0,S.default)(y.default.linkModal,a),pageDropdownClassName:i,value:g,onChange:function e(t){p(t);o(t)},autocompleteContentItems:true,onRequestClose:c,componentProps:q.BetaFeaturesUtils.isFeatureEnabled(m.default.NESTED_CATEGORIES)?{CONTENT_PICKER:{websiteId:q.WebsiteStore.getState().get("id"),versions:{collection:{product:"1.1"}}}}:{}}))))))}var r=s;t.default=r;e.exports=t.default},9037:function(e,t,a){var i=a(9038);"string"===typeof i&&(i=[[e.i,i,""]]);var n;var s;var r={hmr:true};r.transform=n;r.insertInto=void 0;var o=a(17)(i,r);i.locals&&(e.exports=i.locals);false},9038:function(e,t,a){t=e.exports=a(16)(false);t.push([e.i,".LinkEditorPopOver-linkModal-1Ku_2 a {\n  border-bottom: none;\n}\n.LinkEditorPopOver-editorContainer-3kTTP {\n  overflow: hidden;\n  width: 320px;\n  box-shadow: 0px 16px 64px rgba(0, 0, 0, 0.32), 0px 0px 1px rgba(0, 0, 0, 0.1);\n}\n.LinkEditorPopOver-noPointerEvents-24zRd {\n  pointer-events: none;\n}\n.LinkEditorPopOver-pointerEvents-2VeMj {\n  pointer-events: auto;\n}\n",""]);t.locals={linkModal:"LinkEditorPopOver-linkModal-1Ku_2",editorContainer:"LinkEditorPopOver-editorContainer-3kTTP",noPointerEvents:"LinkEditorPopOver-noPointerEvents-24zRd",pointerEvents:"LinkEditorPopOver-pointerEvents-2VeMj"}},9039:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){if(0===e.rangeCount)return null;var t=e.getRangeAt(0).startContainer;if(!t)return null;t.getBoundingClientRect||(t=t.parentNode);return t.getBoundingClientRect()}e.exports=t.default},9040:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(44));var n=i(a(52));var r=i(a(8));var o=i(a(9));var l=i(a(2));var c=i(a(0));var d=i(a(60));var u=a(39);var g=i(a(3079));var p=a(3456);var h=i(a(3081));var f=i(a(3080));var m=function(){function t(e){var i=this;(0,r.default)(this,t);(0,l.default)(this,"container",void 0);(0,l.default)(this,"model",void 0);(0,l.default)(this,"setRelatedAttrsInYUI",void 0);(0,l.default)(this,"apiErrors",false);(0,l.default)(this,"storeWideCats",[]);(0,l.default)(this,"existingProductCats",[]);(0,l.default)(this,"value",void 0);(0,l.default)(this,"flush",false);(0,l.default)(this,"damaskify",false);(0,l.default)(this,"setExistingCats",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i.existingProductCats=e});(0,l.default)(this,"setValue",function(e){i.value=e;i.render()});(0,l.default)(this,"show",(0,n.default)(s.default.mark(function e(){return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i.getCategoriesAndTags();case 2:i.render();case 3:case"end":return t.stop()}},e)})));(0,l.default)(this,"setCollectionId",function(){var t=(0,n.default)(s.default.mark(function e(a){return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i.model.collectionId=a;t.next=3;return i.getCategoriesAndTags();case 3:i.render();case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,l.default)(this,"destroy",function(){d.default.unmountComponentAtNode(i.container)});(0,l.default)(this,"render",function(){var e=i.getSelectableTags();d.default.render(c.default.createElement("div",{className:"yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-text"},c.default.createElement("div",{className:"title"},c.default.createElement(u.T,{project:"apps.App.Commerce.RelatedProducts"},"Category Filter")),i.apiErrors?c.default.createElement("div",{className:f.default.error},c.default.createElement(u.T,{project:"apps.App.Commerce.RelatedProducts"},"Error: could not fetch categories.")):c.default.createElement(g.default,{model:i.model,saveRelatedAttrs:i.saveRelatedAttrs,storeWideCats:i.storeWideCats,existingProductCats:i.existingProductCats,selectableTags:e,value:i.value,disableDescription:true,isDropdownFlush:i.flush,damaskify:i.damaskify})),i.container)});(0,l.default)(this,"saveRelatedAttrs",function(e){i.setRelatedAttrsInYUI(e.filter(function(e){return e!==p.OFF_VALUE}));i.render()});this.container=e.container;this.model=e.model;this.setRelatedAttrsInYUI=e.setRelatedAttrsInYUI;this.value=e.value;this.flush=e.flush;this.damaskify=e.damaskify}(0,o.default)(t,[{key:"getSelectableTags",value:function e(){return[]}},{key:"getCategoriesAndTags",value:function(){var e=(0,n.default)(s.default.mark(function e(){var a,i,n;return s.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,h.default)(this.model.websiteId,this.model.collectionId);case 2:a=t.sent;i=a.storeWideCats;n=a.apiErrors;this.storeWideCats=i;this.apiErrors=n;case 7:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return t}();var v=m;t.default=v;e.exports=t.default},9041:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALBJREFUeNrs1rEKhDAMgOH2Bm/s7c7Cvam+2r2Nh5MuNYvgYMTelTbCXwiELn6kTayPMbo7rIe7yQIKFChQoECBZoX2ErFS9Ecgr7yeZommUvEWiedV6Lb5kvgWAgaJcXOlQn3haqrfvdpM4+4OTZa7/r3LuxrQlKMvcR3+PnoGPlCgmaCtkpuDfpTc5Bw1/QsNBZHhl4qae+ZpFR0qNviQUlHmKFCgQIECBXq6VgEGAAGdTEngMZ9oAAAAAElFTkSuQmCC"},9044:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getFocalPoint=void 0;var i=function e(t){var a=t.distance,i=t.imgSize,n=t.containerSize,s=t.startFocal;var r=n-i;if(r>=0)return s;var o=r*s+a;var l=o/r;return Math.max(Math.min(l,1),0)};t.getFocalPoint=i},9045:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.notifyUserTiming=i;function i(){"function"===typeof window.dispatchEvent&&"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("userTiming"))}},9047:function(e,t,a){"use strict";var i=a(24),n=i.t;var s=a(802);var r={menuTitle:n("MEALS"),sandwichesTitle:n("Sandwiches"),lePaysanSandwichTitle:n("LE PAYSAN"),lePaysanIngredients:n("Smoked Turkey, Brie & apple chutney\n$14"),sohoSandwichTitle:n("SOHO MEDITERRANEAN SANDWICH"),sohoSandwichIngredients:n("Hummus, grilled vegetables & halloumi cheese\n$15"),steakSandwichTitle:n("STEAK SANDWICH"),steakSandwichIngredients:n("Steak w/ onions, bacon & cheddar\n$18"),pastaTitle:n("Pasta"),gramignaTitle:n("GRAMIGNA"),gramignaPastaIngredients:n("macaroni, pork sausage, swiss chard, black pepper\n$20"),garganelliTitle:n("GARGANELLI"),garganelliPastaIngredients:n("pasta quills, cream, peas, truffle butter, prosciutto\n$22"),spallinaTitle:n("SPALLINA"),spallinaPastaIngredients:n("double ravioli, squacquerone cheese, rabbit, porcini\n$24"),drinksTitle:n("DRINKS"),wineTitle:n("Wine"),wine1:n("Sauvignon Blanc, Kim Crawford, Imalborough\n$12.00 glass /  $45.00 bottle"),wine2:n("Meursault, Mat Rot, Burgundy, France\n$13 glass / $80 bottle")};var o=s("{menuTitle}\n=========\n\n{sandwichesTitle}\n----------\n\n{lePaysanSandwichTitle}\n{lePaysanIngredients}\n\n{sohoSandwichTitle}\n{sohoSandwichIngredients}\n\n{steakSandwichTitle}\n{steakSandwichIngredients}\n\n\n{pastaTitle}\n------\n\n{gramignaTitle}\n{gramignaPastaIngredients}\n\n{garganelliTitle}\n{garganelliPastaIngredients}\n\n{spallinaTitle}\n{spallinaPastaIngredients}\n\n\n{drinksTitle}\n=========\n\n{wineTitle}\n----\n\n{wine1}\n\n{wine2}",r);e.exports=o},9065:function(e,t,a){var n=a(5800);var s=a(730);var o=a(5327);var l=a(2459);var r=a(2609);var i={};var c=function(e,s){var r=function(e){var i={};var n=[];o(e,function(e,t,a){if("array"===e.type){l(e.cycles,function(){n.push(r(a[t].items));i[t]=n});return}if("object"===e.type){if(!t){i=r(a[t].properties);return i}i[t]=r(a[t].properties);return i}i[t]=s||null});return i};return r(e.properties)};i.blockSchemaToYuiAttrs=function(e){if(!e){console.warn("No blockName provided");return}var t=n[e];if(!t){console.warn("No definition for blockName"+e);return}var a=s.objectUtils.flatten(t.defaultData||{});var i=c(t.schema,{value:null});Object.keys(a).forEach(function(e){r(i,e,{value:a[e]})});return i};e.exports=i},9116:function(e,t){var a={PAST:"past",UPCOMING:"upcoming"};e.exports=a},9117:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(8));var s=i(a(2));var r=i(a(149));var o=i(a(0));var l=i(a(60));var c=a(2028);var d=i(a(3455));var u=a(390);var g=a(1579);var p=u.ProductEditor.YUI_EDITOR;var h=function e(t){var i=this;(0,n.default)(this,e);(0,s.default)(this,"container",void 0);(0,s.default)(this,"mainImageId",void 0);(0,s.default)(this,"productModel",void 0);(0,s.default)(this,"setMainImageInYUI",void 0);(0,s.default)(this,"addProductImageInYUI",void 0);(0,s.default)(this,"removeProductImageInYUI",void 0);(0,s.default)(this,"variantId",void 0);(0,s.default)(this,"productId",void 0);(0,s.default)(this,"productName",void 0);(0,s.default)(this,"productType",void 0);(0,s.default)(this,"isOpen",void 0);(0,s.default)(this,"isLoading",void 0);(0,s.default)(this,"isUploadingImage",void 0);(0,s.default)(this,"selectedImageId",void 0);(0,s.default)(this,"errorImageFile",void 0);(0,s.default)(this,"productEditor",void 0);(0,s.default)(this,"show",function(){!i.selectedImageId&&i.mainImageId&&(i.selectedImageId=i.mainImageId);if(i.requiresProductSave()){i.isOpen=true;i.isLoading=true;i.render();i.productModel.once("save",function(){i.isLoading=false;i.render()})}else{i.isOpen=true;i.render()}(0,g.trackOpenVariantImagePicker)({productId:i.productModel.get("id"),variantId:i.variantId,productEditor:p})});(0,s.default)(this,"destroy",function(){l.default.unmountComponentAtNode(i.container)});(0,s.default)(this,"render",function(){var e=o.default.createElement(d.default,{addProductImage:i.addProductImage,closeModal:i.closeModal,errorImageFile:i.errorImageFile,isLoading:i.isLoading,isOpen:i.isOpen,isUploadingImage:i.isUploadingImage,productImageUploadUrl:i.getProductUploadUrl(),productImages:i.getProductImages(),removeProductImage:i.removeProductImage,saveMainImageId:i.saveMainImageId,selectImageId:i.selectImageId,selectedImageId:i.selectedImageId,setErrorImageFile:i.setErrorImageFile,setModalUploadingState:i.setModalUploadingState,productEditor:i.productEditor,productId:i.productId,productName:i.productName,productType:i.productType,variantId:i.variantId});l.default.render(e,i.container)});(0,s.default)(this,"selectImageId",function(e){i.selectedImageId=e;i.render()});(0,s.default)(this,"saveMainImageId",function(e){i.setMainImageInYUI(e);i.mainImageId=e;i.selectedImageId=i.mainImageId;i.closeModal()});(0,s.default)(this,"addProductImage",function(e,t,a){i.addProductImageInYUI(e,t,a);i.render()});(0,s.default)(this,"removeProductImage",function(e){i.removeProductImageInYUI(e,function(){i.render()})});(0,s.default)(this,"setErrorImageFile",function(e){i.errorImageFile=e;i.render()});(0,s.default)(this,"setModalUploadingState",function(e){i.isUploadingImage=e;i.render()});(0,s.default)(this,"closeModal",function(){i.isOpen=false;i.selectedImageId=null;i.render()});(0,s.default)(this,"getProductImages",function(){return i.productModel.items.map(function(e){return{assetUrl:e.get("assetUrl"),id:e.get("id"),mediaProcessingState:e.get("mediaProcessingState")}})});(0,s.default)(this,"requiresProductSave",function(){return!i.productModel.get("id")});(0,s.default)(this,"getProductUploadUrl",function(){return(0,c.getChildImageUploadUrl)({collectionId:i.productModel.get("collectionId"),parentId:i.productModel.get("id"),recordType:r.default.STORE_ITEM})});this.container=t.container;this.mainImageId=t.mainImageId;this.productModel=t.productModel;this.setMainImageInYUI=t.setMainImageInYUI;this.addProductImageInYUI=t.addProductImageInYUI;this.removeProductImageInYUI=t.removeProductImageInYUI;this.variantId=t.variantId;this.productId=t.productModel.get("id");this.productName=t.productModel.get("title");this.productType=t.productModel.get("productType");this.isOpen=false;this.isLoading=false;this.isUploadingImage=false;this.selectedImageId=null;this.errorImageFile=null;this.productEditor=u.ProductEditor.YUI_EDITOR};var f=h;t.default=f;e.exports=t.default},9118:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getInStockVariantIds=void 0;var i=function e(t){if(!t)return[];return t.filter(function(e){return e.qtyInStock||e.unlimited}).map(function(e){return e.id})};t.getInStockVariantIds=i},9119:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.getCloseIcon=void 0;var n=i(a(0));var s=a(72);var r=a(53);var o=function e(){return n.default.createElement(s.CrossLarge,{width:r.space[4],height:r.space[4],color:"gray.400"})};t.getCloseIcon=o},9120:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a(44));var n=i(a(52));var s=i(a(8));var r=i(a(2));var c=a(39);var d=i(a(4128));var u=i(a(0));var g=i(a(60));var p=i(a(2594));var h=i(a(1175));var f=a(1173);var m=a(1606);var v=i(a(599));var o=function e(t){var o=this;(0,s.default)(this,e);(0,r.default)(this,"container",void 0);(0,r.default)(this,"model",void 0);(0,r.default)(this,"isOpen",void 0);(0,r.default)(this,"rootId",void 0);(0,r.default)(this,"categories",void 0);(0,r.default)(this,"onTreeRefresh",void 0);(0,r.default)(this,"requestCloseOriginatingModal",void 0);(0,r.default)(this,"show",(0,n.default)(l.default.mark(function e(){return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.setSelectedCategories();case 2:o.render();o.model.once("save",function(){o.render()});case 4:case"end":return t.stop()}},e)})));(0,r.default)(this,"setSelectedCategories",(0,n.default)(l.default.mark(function e(){var a,i,n,s,r;return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=window.Static.SQUARESPACE_CONTEXT.website.id;i=o.model.get("collectionId");t.next=4;return(0,f.getCategories)(a,i);case 4:n=t.sent;s=n.categoryTree;r=m.CategoriesTree.constructCategoriesTree(s,o.categories.length>0?o.categories.map(function(e){return e.id}):o.model.get("categoryIds"),n.categoryTree[0],true);o.rootId=n.categoryTree[0].id;o.categories=r.getAllCategories().filter(function(e){return e.selected}).map(function(e){return{id:e.id,name:e.displayName}});case 9:case"end":return t.stop()}},e)})));(0,r.default)(this,"destroy",function(){g.default.unmountComponentAtNode(o.container)});(0,r.default)(this,"toggleEditor",function(){o.isOpen=!o.isOpen;o.render()});(0,r.default)(this,"setCategories",function(e){o.categories=e});(0,r.default)(this,"closeModal",function(){var t=(0,n.default)(l.default.mark(function e(a){return l.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:null===a||void 0===a?void 0:a.preventDefault();null===a||void 0===a?void 0:a.stopPropagation();o.isOpen=false;o.render();case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,r.default)(this,"requiresProductSave",function(){return!o.model.get("id")});(0,r.default)(this,"render",function(){g.default.render(u.default.createElement("div",{className:"field-wrapper tag-field-wrapper nested-categories-container clear",onClick:o.toggleEditor},u.default.createElement("div",{className:"field-lhs title"},u.default.createElement(c.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Categories")),o.isOpen&&u.default.createElement(d.default,{isOpen:o.isOpen,customClassNames:h.default.popOverZIndex,zIndex:35e3,onRequestClose:o.closeModal},u.default.createElement(p.default,{model:{collectionId:o.model.get("collectionId"),websiteId:window.Static.SQUARESPACE_CONTEXT.website.id,productId:o.model.get("id"),categoryIds:o.categories.map(function(e){return e.id}),productTitle:o.model.get("title"),productType:(0,v.default)(o.model.get("productType"))},closeModal:o.closeModal,callerName:"yui-editor",isEmptyState:false,stylesOverride:h.default,isLoading:!!o.requiresProductSave(),setCategories:o.setCategories,onTreeRefresh:o.onTreeRefresh,requestCloseOriginatingModal:o.requestCloseOriginatingModal})),u.default.createElement("div",{className:"field-rhs"},u.default.createElement("div",{className:"field-input-wrapper"},u.default.createElement("div",{className:"tag-field clear"},u.default.createElement("div",{className:"tag-field-container"},u.default.createElement("div",{className:"text dialog-element"},u.default.createElement("div",{className:"add-header"},u.default.createElement(c.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Click to add categories"))),o.categories.filter(function(e){return e.id!=o.rootId}).map(function(e){return u.default.createElement("div",{className:"tag category",key:e.id},e.name)})))))),o.container)});this.container=t.container;this.model=t.productModel;this.onTreeRefresh=t.onTreeRefresh;this.requestCloseOriginatingModal=t.requestCloseOriginatingModal;this.isOpen=false;this.categories=[];this.rootId=""};var b=o;t.default=b;e.exports=t.default},9121:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(40));var r=i(a(44));var s=i(a(52));var o=i(a(8));var l=i(a(9));var c=i(a(2));var d=i(a(0));var u=i(a(60));var g=a(39);var p=i(a(3079));var h=a(2596);var f=i(a(3080));var m=i(a(3081));var v=function(){function t(e){var a=this;(0,o.default)(this,t);(0,c.default)(this,"container",void 0);(0,c.default)(this,"model",void 0);(0,c.default)(this,"setRelatedAttrsInYUI",void 0);(0,c.default)(this,"relatedProductsEnabled",false);(0,c.default)(this,"apiErrors",false);(0,c.default)(this,"storeWideCats",[]);(0,c.default)(this,"storeWideTags",[]);(0,c.default)(this,"existingProductTags",[]);(0,c.default)(this,"existingProductCats",[]);(0,c.default)(this,"setExistingCats",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.existingProductCats=e});(0,c.default)(this,"setExistingTags",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.existingProductTags=e});(0,c.default)(this,"show",(0,s.default)(r.default.mark(function e(){return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a.getCategoriesAndTags();case 2:t.next=4;return a.setRelatedProductsEnabled();case 4:a.render();case 5:case"end":return t.stop()}},e)})));(0,c.default)(this,"destroy",function(){u.default.unmountComponentAtNode(a.container)});(0,c.default)(this,"render",function(){var e=a.getSelectableTags();u.default.render(d.default.createElement("div",{className:"yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-text"},d.default.createElement("div",{className:"title"},d.default.createElement(g.T,{project:"apps.App.Commerce.RelatedProducts"},"Show Related Products")),a.apiErrors?d.default.createElement("div",{className:f.default.error},d.default.createElement(g.T,{project:"apps.App.Commerce.RelatedProducts"},"Error: could not fetch related product settings.")):a.relatedProductsEnabled?d.default.createElement(p.default,{model:a.model,saveRelatedAttrs:a.saveRelatedAttrs,storeWideCats:a.storeWideCats,existingProductCats:a.existingProductCats,selectableTags:e}):d.default.createElement("div",{className:"description"},d.default.createElement(g.T,{project:"apps.App.Commerce.RelatedProducts",link:d.default.createElement("a",{href:"/config/commerce/related-products"},d.default.createElement(g.T,{project:"apps.App.Commerce.RelatedProducts"},"Commerce"))},"To show related products on this product's page, turn on this feature in {link}."))),a.container)});(0,c.default)(this,"saveRelatedAttrs",function(e,t){a.setRelatedAttrsInYUI(e,t);a.render()});this.container=e.container;this.model=e.model;this.setRelatedAttrsInYUI=e.setRelatedAttrsInYUI}(0,l.default)(t,[{key:"getSelectableTags",value:function e(){return(0,n.default)(new Set([].concat((0,n.default)(this.storeWideTags),(0,n.default)(this.existingProductTags))))}},{key:"getCategoriesAndTags",value:function(){var e=(0,s.default)(r.default.mark(function e(){var a,i,n,s;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,m.default)(this.model.websiteId,this.model.collectionId,true,true);case 2:a=t.sent;i=a.storeWideCats;n=a.apiErrors;s=a.storeWideTags;this.storeWideCats=i;this.storeWideTags=s;this.apiErrors=n;case 9:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setRelatedProductsEnabled",value:function(){var e=(0,s.default)(r.default.mark(function e(){var a;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,h.getMerchandisingSettings)();case 2:a=t.sent;a?this.relatedProductsEnabled=a.relatedProductsEnabled:this.apiErrors=true;case 4:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return t}();var b=v;t.default=b;e.exports=t.default},9122:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(8));var r=i(a(2));var o=i(a(0));var l=i(a(60));var c=i(a(9123));var n=function e(t){var a=this;var i=t.container,n=t.onClose;(0,s.default)(this,e);(0,r.default)(this,"container",void 0);(0,r.default)(this,"onClose",void 0);(0,r.default)(this,"destroy",function(){l.default.unmountComponentAtNode(a.container)});(0,r.default)(this,"render",function(){var e=o.default.createElement(c.default,{onClose:function e(t){null===t||void 0===t?void 0:t.preventDefault();null===t||void 0===t?void 0:t.stopPropagation();a.onClose&&a.onClose();a.destroy()}});l.default.render(e,a.container)});this.container=i;this.onClose=n};t.default=n;e.exports=t.default},9123:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a(0));var s=a(72);var r=a(18);var o=a(53);var l=a(39);var c=function e(t){var a=t.onClose;return n.default.createElement(r.Flex,{alignItems:"center",justifyContent:"space-between",sx:{px:3,py:1,backgroundColor:"black",color:"white",boxSizing:"content-box"},height:44},n.default.createElement(l.T,{project:"commerce-gift-cards-availability"},"We're including the Gift Card feature for free with your plan until September 1, 2020 to assist with the impact of COVID-19."),n.default.createElement(r.Flex,{onClick:a},n.default.createElement(s.CrossLarge,{sx:{"&:hover":{cursor:"pointer"},color:o.colors.gray[400]}})))};t.default=c;e.exports=t.default},9125:function(e,t,c){"use strict";c(9126);c(5518);var a=c(24);var d=c(43);var u=c(21);var g=c(9127);var f=c(5070);var p=c(213);var m=c(1078);var v=c(517);var b=c(2751);var y=c(5810);var S=c(9128);var q=c(9131);var _=c(9132);var C=c(6275);var E=c(9133);var k=c(9134);var w=c(9135);var T=c(9136);var I=c(9137);var A=c(5074);var x=c(5812);var L=c(276);var D=c(701);var N=c(522);var O=c(1937);var R=c(1622);var P=c(1940);var B=c(87);var M=c(114);var F=c(9139);var U=c(9140);var V=c(9142);var z=c(9143);var H=c(9144);var G=c(9145);var W=/Trident.*rv[ :]*11\./.test(navigator.userAgent);var j=a.t;var Q=a.setLocale;window.Common=function e(h){if(h.COMMON_ALREADY_RAN){console.warn("Detected second run, this is bad.");return}h.COMMON_ALREADY_RAN=true;h.Static=h.Static||{};h.noop=u;g(h);h.Singleton=A;h.Class={create:function e(t){var a;a=t.initialize?function e(){this.initialize.apply(this,arguments)}:function e(){};a.prototype=t;a.extend=function(e){return h.Class.extend(this,e)};a.specialize=function(e,t){var a=h.Class.specialize(this,e);a._parent=t;return a};return a},extend:function e(n,t){t.initialize||(t.initialize=n.prototype.initialize);var a=h.Class.create(t);var i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(var s in n.prototype)a.prototype[s]?"function"===typeof a.prototype[s]&&i.test(a.prototype[s])&&(a.prototype[s]=function(a,i){return function(){var e=this._super;this._super=n.prototype[a];var t=i.apply(this,arguments);this._super=e;return t}}(s,a.prototype[s])):a.prototype[s]=n.prototype[s];a.prototype.superclass=n.prototype;return a},specialize:function e(t,a){var i=h.Class.extend(t,a);return new i}};h.SquarespaceFonts={alreadyLoaded:[],alreadyPreloaded:[],loadViaContext:function e(){var t={googleFamilies:h.Static.SQUARESPACE_CONTEXT.googleFonts};h.Static.SQUARESPACE_CONTEXT.website.typekitId&&(t.typeKit={id:h.Static.SQUARESPACE_CONTEXT.website.typekitId});this.load(t)},getContext:function e(){return h.Static},setupTypekit:function e(){try{if(!this.setup){if(!h.TypekitPreview)return;h.TypekitPreview.setup({auth_id:"ss",auth_token:"BInhlQ%2Bl4i%2FTK2LNzmpe2QC%2Bdl6Qc7iJa15oy7OfSGK%2BY7lwDRam4FlQCIzQGEqAiJZo10MshaDLZWgX%2FckdPK0bOW%2FAfpkj2O5MO1d7Aul7v1RGoa7OBxfdciGAxZqjHAPKKo0fqkxxKF%2F9mM9JjA%3D%3D"});this.setup=true}}catch(e){console.error(e);v.trackCaughtError("common","setupTypekit issue",e.stack)}},loadTypekit:function e(t,a){this.setupTypekit();var i=[];var n;try{if(h.Y.Lang.isArray(t))t.forEach(function(e,t){if(-1!==this.alreadyLoaded.indexOf(e)&&-1!==this.alreadyPreloaded.indexOf(e))return;n=h.Static.SQUARESPACE_CONTEXT.typekitFonts[e];if(!n)throw new Error('Requested font no longer in Typekit "'+e+'"');this.alreadyPreloaded.push(e);i.push({id:n.id,css_name:e,variations:["n4"]})});else{if(-1!==this.alreadyLoaded.indexOf(t)){a&&a();return}n=h.Static.SQUARESPACE_CONTEXT.typekitFonts[t];if(!n)throw new Error('Requested font no longer in Typekit "'+t+'"');this.alreadyLoaded.push(t);i.push({id:n.id,css_name:t,variations:n.variations})}h.TypekitPreview.load(i,{active:function e(){a&&a()},inactive:function e(){a&&a()}})}catch(e){console.error(e);v.trackCaughtError("common","loadTypekit issue",e.stack)}},preloadTypekit:function e(t,a){this.setupTypekit();var i=[];for(var n=0;n<t.length;n++){if(-1!==this.alreadyPreloaded.indexOf(t[n])||-1!==this.alreadyLoaded.indexOf(t[n]))continue;this.alreadyPreloaded.push(t[n]);i.push({id:h.Static.SQUARESPACE_CONTEXT.typekitFonts[t[n]]?h.Static.SQUARESPACE_CONTEXT.typekitFonts[t[n]].id:h.Static.SQUARESPACE_CONTEXT.typekitkitFonts[t[n]].id,css_name:t[n],variations:["n4"]})}h.TypekitPreview.load(i,{active:function e(){a&&a()},inactive:function e(){a&&a()}})},load:function e(i,t,n){n=n||h;i=i||{};if("all"===i.googleFamilies){if(this.everythingLoaded)return;i.googleFamilies=[];for(var a in n.Static.SQUARESPACE_CONTEXT.googleFonts){var s=n.Static.SQUARESPACE_CONTEXT.googleFonts[a];i.googleFamilies.push(s.includeName)}this.everythingLoaded=true}else if(i.googleFamilies)for(var r=0;r<i.googleFamilies.length;r++)if(-1===this.alreadyLoaded.indexOf(i.googleFamilies[r]))this.alreadyLoaded.push(i.googleFamilies[r]);else{i.googleFamilies.splice(r,1);r--}else i.googleFamilies=[];if(0===i.googleFamilies.length)return;h.Y.UA.ie?n.setTimeout(function(){var e=n.document.createElement("link");e.rel="stylesheet";var t="//fonts.googleapis.com/css?family=";t+=i.googleFamilies.join("|");e.href=t;var a=n.document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)},20):n.setTimeout(function(){var e=n.document.createElement("style");var t="@import url('//fonts.googleapis.com/css?family=";t+=i.googleFamilies.join("|");t+="');";e.innerHTML=t;var a=n.document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)},20)}};h.Squarespace=h.Squarespace||{};h.Squarespace.INITIALIZED=false;h.Squarespace.SQUARESPACE_INITIALIZED_ONCE=false;G.mixin(h);h.Squarespace.shouldRedirectToConfig=function(e){var t="noredirect";var a=["noredirect"];if("localhost"===e.location.hostname)return false;if(this.getSession(t,e))return false;for(var i=0;i<a.length;i++)if(-1!==e.location.search.indexOf(a[i])){this.setSession(t,true,e);return false}return e.Static.SQUARESPACE_CONTEXT.websiteSettings&&e.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&!e.Static.SQUARESPACE_CONTEXT.website.developerMode&&!e.Static.SQUARESPACE_CONTEXT.website.cloneable&&!this._userHasViewerRole(e.Static.SQUARESPACE_CONTEXT.websiteRoles)&&e.top===e};h.Squarespace.getSession=function(e,t){try{if(t.sessionStorage&&t.sessionStorage[e])return t.sessionStorage[e]}catch(e){return null}return null};h.Squarespace.setSession=function(e,t,a){try{if(a.sessionStorage){a.sessionStorage[e]=t;return{success:true,error:null}}}catch(e){return{success:false,error:e}}return{success:false,error:"Browser does not support session storage"}};h.Squarespace.createCookie=function(e,t,a,i,n){var s;if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);s="; expires="+r.toGMTString()}else s="";n.document.cookie=e+"="+t+s+"; path="+i};h.Squarespace.load=function(a){if(!a){console.error("Squarespace.load running with an assumed window context! Results may vary!");a=window}if(this.shouldRedirectToConfig(a)){a.stop&&a.stop();var e=c(1236);this.createCookie(e.PREVIEW_FRAME_EXPANDED_COOKIE,true,null,"/",a);var t=encodeURIComponent(a.location.pathname+a.location.search);a.location.href="/config/?frameUrl="+t;return}F(a);a.document.addEventListener("DOMContentLoaded",function e(){V(a)});a.Y=a.YUI(function(){var e={};for(var t in a.YUI_CONFIG)e[t]=a.YUI_CONFIG[t];return e}());H(a);a.Y.use("squarespace-image-loader");a.Y.use("squarespace-public-api");a.Y.on("domready",a.Squarespace.afterBodyLoad,a.Squarespace);var i=L.setResolvedWebsiteLocaleFromContext();Q("en-US",i)};h.Squarespace.injectRollups=function(e){try{if(e.top.YUI!==e.YUI){for(var t in e.top.YUI.Env.mods)e.YUI.Env.mods.hasOwnProperty(t)||(e.YUI.Env.mods[t]=e.top.YUI.Env.mods[t]);var a=e.top.Static.SQUARESPACE_CONTEXT.frameRollups;for(var i in a)a[i].css&&this._injectStylesheetFromTopFrame(a[i].css,e.document)}}catch(e){}};h.Squarespace._injectStylesheetFromTopFrame=function(e,t){var a='<link rel="stylesheet" href="'+e+'" type="text/css" />';t.head?h.Y.one(t.head).append(a):t.write(a)};var r="squarespace-commerce_email_preview";var o=["squarespace-polyfills","squarespace-error_reporter"];function s(e){var t=h.Y.clone(e);var a=t[r];if(h.Y.Lang.isValue(a)){t["squarespace-commerce-email-preview"]=a;delete t[r]}for(var i=0,n=o;i<n.length;i++){var s=n[i];t.hasOwnProperty(s)&&delete t[s]}return t}h.Squarespace._humanizeAllDates=function(e){Y.all(e).each(function(e){var t=parseInt(e.getAttribute("data-date"),10);if(!Y.Lang.isNumber(t)){console.warn("Invalid date on node: ",e);return}e.set("innerHTML",m(t).capitalize())})};h.Squarespace.afterBodyLoad=function(){var i=h.Y;var e="loading"===i.config.doc.readyState;var n=i.Squarespace.Utils.isInDamaskFrame();if(!e&&n&&h.top.YUI_NOT_YET_LOADED){i.use(Object.keys(s(i.config.win.SQUARESPACE_ROLLUPS)),u);return}if(e&&n){i.once("domready",i.config.win.Squarespace.afterBodyLoad,i.config.win.Squarespace);return}if(this.AFTER_BODY_LOADED)return;this.AFTER_BODY_LOADED=true;n&&this.injectRollups(h);i.use(function(e){var t=i.Object.keys(s(e));if(n){var a=["squarespace-management"];a.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}return t}(i.config.win.SQUARESPACE_ROLLUPS),h.Squarespace.globalInit)};h.Squarespace.addLoadTrigger=function(i,t){var n=h.Y;if(!n.one(i))return;if(n.Squarespace.Utils.isInDamaskFrame()){var a=[];n.Array.each(t,function(e){n.Lang.isObject(h.YUI.Env.mods[e])&&a.push(e)});t=n.Array.filter(t,function(e){return!a.includes(e)});n.Array.each(a,function(e){n.use(e);var t=n.config.win.Static.SQUARESPACE_CONTEXT.rollups[e];if(!t){console.warn("Unable to load module '"+e+"' for trigger '"+i+"'");return}if(t.css){var a=t.css.split(",");n.Array.each(a,function(e){this._injectStylesheetFromTopFrame(e,n.config.doc)},this)}},this);t.length>0&&console.error("addLoadTrigger","There are modules that were requested, that were not available in the Seven top frame.",t)}if(0===t.length)return;var s=[];var r=[];for(var e=0,o=t.length;e<o;++e){var l=t[e];var c=n.config.win.Static.SQUARESPACE_CONTEXT.rollups[l];if(!c){console.warn("Unable to load module '"+l+"' for trigger '"+i+"'");return}c.js&&n.Array.each(c.js.split(","),function(e){e.length>0&&s.push(e)});c.css&&n.Array.each(c.css.split(","),function(e){e.length>0&&r.push(e)})}n.Get.load([].concat(s,r),{win:n.config.win},function(e){n.use(t)})};h.Squarespace.globalInit=function(e){H(h);N.isSevenOne()&&M.isFeatureEnabled(B.GLOBAL_ANIMATIONS)&&e.one("body").addClass("seven-one-global-animations");e.Squarespace.EscManager&&e.Squarespace.EscManager.attach(e.one(e.config.win));R.manageCookies();R.trackPageview();e.config.win.Squarespace._humanizeAllDates(".timesince");e.config.win.Squarespace.initializeLayoutBlocks(e);e.config.win.Squarespace.initializeImageBlockDynamicElements(e);e.config.win.Squarespace.initializeGlobalLightbox(e);e.config.win.Squarespace.initializeVideo(e);e.config.win.Squarespace.initializeCartPage(e);e.config.win.Squarespace.initializeSvgs(e);var t=h.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;e.Lang.isValue(t)&&""!==t&&e.config.win.Squarespace.initializeDisqusCommentLinks(e);-1!==e.config.doc.location.href.indexOf("logout=true")&&e.on("domready",function(){new e.Squarespace.Widgets.Information({"strings.title":j("Logout Successful"),"strings.message":j("You have been successfully logged out.")})});if(h.Static.SQUARESPACE_CONTEXT.websiteSettings.commentsEnabled){var a=h.Static.SQUARESPACE_CONTEXT.demoCollections;var i=h.Static.SQUARESPACE_CONTEXT.collectionId;var n=false;if(e.Lang.isArray(a)&&e.Lang.isValue(i)){var s=e.Array.map(a,function(e){return e.collectionId});-1!==s.indexOf(i)&&(n=true)}n||e.config.win.Squarespace.addLoadTrigger(".squarespace-comments",["squarespace-dialog","squarespace-comments"])}var r;r=e.Squarespace.Utils.isInDamaskFrame()?h.top.SQUARESPACE_LOGIN&&h.top.SQUARESPACE_LOGIN.isLoggedIn():h.SQUARESPACE_LOGIN&&h.SQUARESPACE_LOGIN.isLoggedIn();var o=f.shouldShowAnnouncementBar({settings:h.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings,context:{pageType:h.Static.SQUARESPACE_CONTEXT.pageType,collection:h.Static.SQUARESPACE_CONTEXT.collection}});(r||o)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-announcement-bar"]);var l=f.shouldShowSSBadge({websiteSettings:h.Static.SQUARESPACE_CONTEXT.websiteSettings});var c=f.shouldShowMobileInformationBar({win:e.config.win,isMobile:e.UA.mobile,settings:h.Static.SQUARESPACE_CONTEXT.websiteSettings.mobileInfoBarSettings});var d=f.shouldShowLicensedAssetsBar({YNodeBody:e.one(e.config.doc.body)});(r||l||c||d)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-website-overlays-manager"]);var u=h.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings;var g=u&&f.shouldShowPopupOverlay({settings:u,context:{pageType:h.Static.SQUARESPACE_CONTEXT.pageType,collection:h.Static.SQUARESPACE_CONTEXT.collection},isMobile:e.UA.mobile,urlSearch:window.location.search});(r||g)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-popup-overlay"]);U(e);e.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]);e.Lang.isObject(h.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions)&&"disabled"!==h.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions.mode&&e.config.win.Squarespace.addLoadTrigger(y.TRIGGER_SELECTORS.join(","),["squarespace-pinterest"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-list .products-collection-v2",["squarespace-products-collection-list-v2"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-item .products-collection-v2",["squarespace-products-collection-item-v2"]);e.config.win.Squarespace.addLoadTrigger(".sqs-image-zoom-area",["squarespace-image-zoom"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-blog.view-list .sqs-blog-list",["squarespace-blog-collection-list"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-gallery .sqs-gallery-list",["squarespace-gallery-collection-list"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-calendar",["squarespace-calendar-block-renderer"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-events.view-list",["squarespace-events-collection"]);e.config.win.Squarespace.addLoadTrigger(".sqs-product-quick-view-button[data-id]",["squarespace-product-quick-view","squarespace-image-zoom","squarespace-products-collection-item-v2"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]);e.config.win.Squarespace.addLoadTrigger(".sqs-search-page",["squarespace-search-page"]);e.config.win.Squarespace.addLoadTrigger(".sqs-simple-like",["squarespace-simple-liking"]);e.config.win.Squarespace.addLoadTrigger(".squarespace-social-buttons",["squarespace-social-buttons"]);e.config.win.Squarespace.addLoadTrigger(".sqs-share-buttons",["squarespace-share-buttons"]);S.initializeAnimations(e.config.win);function p(e){S.polyfillAndObserve(e)}e.Global.on("_syncBodyClasses",p);G.markReady(e)};h.Squarespace.initializeDisqusCommentLinks=function(a){var i="#disqus_thread";var n="#comment-{id}";var e=a.all(".sqs-comment-link");var s="href";var r="data-id";var t;var o=h.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;var l=a.Lang.isString(o)&&""!==o;t=l?function e(t){return h.Static.SQUARESPACE_CONTEXT.website.baseUrl+t.getAttribute(s)+i}:function e(t){return h.Static.SQUARESPACE_CONTEXT.website.baseUrl+t.getAttribute(s)+a.substitute(n,{id:t.getAttribute(r)})};e.each(function(e){e.setHTML("Comments");e.setAttribute(s,t(e))},this);if(l){h.disqus_shortname=o;a.Get.script("//"+o+".disqus.com/count.js")}};h.Squarespace.initializeCollectionPages=function(e,t){if(e.Squarespace.EventsCollection){t.all(".sqs-events-collection-list").each(e.Squarespace.EventsCollection.initializeListView);t.all(".sqs-events-collection-calendar").each(e.Squarespace.EventsCollection.initializeCalendarView)}else e.config.win.Squarespace.addLoadTrigger(".sqs-events-collection-list, .sqs-events-collection-calendar",["squarespace-events-collection"])};h.Squarespace.initializeLayoutBlocks=function(s,e){e=e||s;this.initializeSummaryV2Block(s);e.all([".sqs-block-video",".sqs-block-embed"].join(",")).each(function(e){z(e,s,h)});e.all(".sqs-block-image img[data-image]").each(function(e){q.initializeImageBlock(e,s)});var t=[".sqs-block-product img[data-image]"];s.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&t.push(".sqs-block-collectionlink img[data-image]");e.all(t.join(",")).each(function(e){q.initializeBasicBlockWithImage(e,s)});e.all(".sqs-block-soundcloud").each(function(e){h.Squarespace.initializeSoundcloudBlock(e,s)});e.all(".sqs-block-map[data-block-json]").each(function(e){var t=c(4117);var a=s.JSON.parse(e.getAttribute("data-block-json"));var i=x.mapModelToViewConfig(a);var n=L.getResolvedWebsiteLocale();e.setAttribute("data-animation-role","image");p("google_maps_map_load_on_site");N.isSevenOne()&&(i.ui=s.merge({},i.ui,{scrollwheel:false}));t.createView(i.ui,i.location,e.one(".sqs-block-content").getDOMNode(),n)});h.Squarespace.initializeFormBlocks(e,s);e.all(".sqs-block-newsletter").each(function(e){h.Squarespace.initializeNewsletterBlock(e,s)});e.all(".sqs-block-donation").each(function(e){h.Squarespace.initializeDonationButton(e,s)});e.all(".sqs-block-button").each(function(e){h.Squarespace.initializeButtonBlock(e,s)});h.Squarespace.initializeAspectRatioBlocks(s);var a=[".sqs-block-gallery",".sqs-block-video"].join(",");e.all(a).each(function(e){s.SQS.Gallery.Manager.initializeBlock(e)});var i=[{selector:".sqs-block-flickr",blockType:D.FLICKR},{selector:".sqs-block-instagram",blockType:D.INSTAGRAM},{selector:".sqs-block-fivehundredpix",blockType:D.FIVEHUNDREDPIX}];i.forEach(function(i){e.all(i.selector).each(function(e){var t=e.one(".sqs-gallery-container");var a=t&&"true"===t.getAttribute("data-async-rendering-enabled");a?k(e,i.blockType).then(function(){Squarespace.initializeAspectRatioBlocks(s);s.SQS.Gallery.Manager.initializeBlock(e)}):s.SQS.Gallery.Manager.initializeBlock(e)})});e.all(".sqs-block-opentable").each(function(e){h.Squarespace.initializeOpenTableBlock(e,s)});e.all(".sqs-block-opentable-v2").each(function(e){h.Squarespace.initializeOpenTableV2Block(e.getDOMNode())});s.Squarespace.Widgets.AudioPlayer?e.all(".sqs-audio-embed").each(s.Squarespace.Widgets.AudioPlayer.initializeNode):s.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]);s.Squarespace.Tourdates?e.all(".sqs-block-tourdates[data-block-json]").each(s.Squarespace.Tourdates.initializeNode):s.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]);s.Squarespace.CalendarBlockRenderer?e.all(".sqs-block.calendar-block[data-block-json]").each(s.Squarespace.CalendarBlockRenderer.initializeNode):s.config.win.Squarespace.addLoadTrigger(".sqs-block.calendar-block[data-block-json]",["squarespace-calendar-block-renderer"]);var n=e.one(".sqs-block-zola");n&&this.initializeZolaBlocks(n,s);var r=e.one(".sqs-block-acuity");r&&this.initializeAcuityBlocks(r,s);this.initializeSearchBlock(s);this.initializeChartBlock(s);this.initializeSocialLinks(s);this.initializeMenuBlock(s)};h.Squarespace.initializeSocialLinks=function(i){if(i.UA.gecko<=0)return;i.all('use[class^="SocialLinks"][*|href]').each(function(e){var t=e.getAttribute("xlink:href");var a=t.indexOf("#");-1!==a&&e.setAttribute("xlink:href",i.config.win.location.origin+i.config.win.location.pathname+t.substr(a))})};h.Squarespace.initializeMenuBlock=function(e){e.all(".menu-wrapper").each(function(e){w.initializeMenuBlock(e._node)})};h.Squarespace.initializePageContent=function(e,t){h.Squarespace.initializeLayoutBlocks(e,t);h.Squarespace.initializeCollectionPages(e,t)};h.Squarespace.initializeImageBlockDynamicElements=function(e){var a=e.config.win;function t(){e.all(".image-block-v2").each(function(e){e.toggleClass("sqs-narrow-width",e.get("offsetWidth")<415);var t=e.one("img");t&&a.ImageLoader.load(t)});V(a)}this._resizeEmitter=new e.Squarespace.ResizeEmitter;this._resizeEmitter.on("resize",t,this);e.Global.on("tweak:change",t)};h.Squarespace.initializeSummaryV2Block=function(t){t.all(".sqs-block-summary-v2").each(function(e){E(e).then(function(){t.SQS.Gallery.Manager.initializeBlock(e)})})};h.Squarespace.initializeButtonBlock=function(e,t){T(e)};h.Squarespace.initializeOpenTableBlock=function(e,t){_(e,t)};h.Squarespace.initializeOpenTableV2Block=function(e){C(e)};h.Squarespace.initializeZolaBlocks=function(e,t){var a="zola-wjs";var i=t.config.win.document.getElementById(a);if(i){if(!t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;if(t.config.win.ZolaWidget){t.config.win.ZolaWidget.init();return}i.remove()}var n=document.createElement("script");n.src=e.one("[data-zola-script-src]").getAttribute("data-zola-script-src");n.id=a;n.async=true;t.config.win.document.head.appendChild(n)};h.Squarespace.initializeAcuityBlocks=function(e,t){if(!t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;var a=e.one("script");var i=document.createElement("script");i.src=a.getAttribute("src");i.async=true;a.remove();e.appendChild(i)};h.Squarespace.initializeSoundcloudBlock=function(e,t){var a=e.one("iframe");if(a){var i=a.getAttribute("src");try{var n=t.QueryString.parse(i).url;if(n){var s=n.indexOf("/playlists/")>=0;e.toggleClass("isPlaylist",s)}}catch(e){console.error("Issue parsing SoundCloud url: "+i,e)}}};h.Squarespace.initializeVideoBlock=function(e,t){e.videoloader||e.plug(t.Squarespace.VideoLoader)};function n(e,t){try{var a=O.getCaptchaContainer(e,t);if(a){O.destroy(a);O.render(e,a)}var i=t.getAttribute("data-form-id");i&&R.trackFormRender(i)}catch(e){console.error("Could not render form",{formEl:t,error:e})}}h.Squarespace.initializeFormBlocks=function(e,i){e.all(".sqs-block-form").each(function e(t){var a=t.one("form");if(!a)return;n(i.config.win,a.getDOMNode())});b(i.config.doc);var t=".sqs-block-form .lightbox-handle";var a=e.all(t);if(a.isEmpty())return;if(i.Squarespace.FormRenderingUtils){i.Squarespace.FormRenderingUtils.initializeFormLightbox(e);return}i.config.win.Squarespace.addLoadTrigger(t,["squarespace-form-rendering-utils"])};h.Squarespace.initializeNewsletterBlock=function(e,t){var a=e.one(".newsletter-form");if(!a)return;n(t.config.win,a.getDOMNode());var i=e.ancestor();e.toggleClass("newsletter-form-has-small-container",i.get("offsetWidth")<320).addClass("rendered")};h.Squarespace.initializeDonationButton=function(e,t){var a=e.one(".sqs-donate-button");if(!a){console.error("Careful, there was no button found inside this node!",e.getDOMNode());return}var i=function e(){t.Squarespace.Commerce.goToDonatePage(a.getAttribute("data-donate-page-id"))};a.on("click",i);a.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||i()})};h.Squarespace.initializeGlobalLightbox=function(e){e.all('[rel="lightbox"][data-lightbox]').plug(e.Squarespace.Lightbox2Plug)};h.Squarespace.initializeCommerce=function(e){if(!e.Squarespace.Commerce.initializeCommerce){console.warn("Commerce rollup not loaded, exiting initializeCommerce() invocation.");return}e.Squarespace.Commerce.initializeCommerce(e)};h.Squarespace.initializeChartBlock=function(e){e.ChartJS&&e.ChartJS.initializeCharts?e.ChartJS.initializeCharts():e.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"])};h.Squarespace.initializeVideo=function(t){t.all(".sqs-video-wrapper").each(function(e){e.videoloader||e.ancestor(".sqs-block-video")||e.ancestor(".slide")||e.plug(t.Squarespace.VideoLoader,{load:"false"!==e.getAttribute("data-load")})})};h.Squarespace.initializeSearchBlock=function(e){var t=e.all(".sqs-search-ui-text-input");if(t.isEmpty())return;if(!e.Squarespace.Widgets.SearchPreview){e.config.win.Squarespace.addLoadTrigger(".sqs-search-ui-text-input",["squarespace-search-preview"]);return}e.Squarespace.Widgets.SearchPreview.renderAllSearchPreviewNodes()};var t=function e(t){var a=d(t,"SQS.LayoutEngine.AspectRatioManager");a&&a.initAllBlocks()};h.Squarespace.initializeAspectRatioBlocks=t;h.Squarespace._userHasViewerRole=function(e){if(!e)return false;return Object.keys(e).length>0&&e[P.VIEWER]};h.Squarespace.initializeCartPage=function(a){I.initialize({onInitialize:function e(t){a.config.win.Squarespace.onInitialize(a,t)},onDestroy:function e(t){a.config.win.Squarespace.onDestroy(a,t)},win:a.config.win})};h.Squarespace.initializeSvgs=function(e){e.config.win.Squarespace.onInitialize(e,function(){e.on("domready",function(){W&&Promise.all([c.e(352),c.e(340)]).then(function(e){var t=c(5333);t.parse()}.bind(null,c)).catch(u)})})};function a(){window.SquarespaceFonts.loadViaContext();window.Squarespace.load(window);window.Squarespace.afterBodyLoad(window.Y)}var i=W?document.querySelector('script[src*="common-"]'):document.currentScript;var l=i&&i.hasAttribute("defer");l&&h.document.addEventListener("DOMContentLoaded",a)};Common(window)},9126:function(e,t,a){"use strict";"undefined"===typeof console&&(console={assert:function e(){},group:function e(){},groupEnd:function e(){},log:function e(){},dir:function e(){},warn:function e(){},error:function e(t){var e=Array.prototype.slice.call(arguments);throw new Error(e)}})},9127:function(e,t,a){"use strict";e.exports=function(i){i.Element.prototype.matches||(i.Element.prototype.matches=i.Element.prototype.matchesSelector||i.Element.prototype.mozMatchesSelector||i.Element.prototype.msMatchesSelector||i.Element.prototype.oMatchesSelector||i.Element.prototype.webkitMatchesSelector||function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e);var a=t.length;while(--a>=0&&t.item(a)!==this);return a>-1});if("function"!==typeof i.CustomEvent){var e=function e(t,a){a=a||{bubbles:false,cancelable:false,detail:void 0};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,a.bubbles,a.cancelable,a.detail);return i};e.prototype=i.Event.prototype;i.CustomEvent=e;"function"!==typeof i.Event&&(i.Event=e)}i.String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};i.Array.prototype.removeRange=function(e,t){this.splice(e,!t||1+t-e+(!(t<0^e>=0)&&(t<0||-1)*this.length));return this.length};i.Array.prototype.removeAt=function(e){this.removeRange(e,e)};i.Array.prototype.remove=function(e){for(var t=0;t<this.length;++t)if(this[t]===e){this.removeAt(t);return}};i.Array.prototype.shuffle||(i.Array.prototype.shuffle=function(){var e=[];while(this.length)e.push(this.splice(Math.random()*this.length,1));while(e.length)this.push(e.pop()[0]);return this});var t="Array.prototype.contains is non standard. Use Array.prototype.includes instead";i.Array.prototype.contains=function(e){var t;false;return this.indexOf(e)>-1};i.Number.prototype.formatMoney=function(e,t,a,i){false;var n=this;e=isNaN(e=Math.abs(e))?2:e;i&&n%1===0&&(e=0);t=t||".";a=a||",";var s=n<0?"-":"";var r=parseInt(n=Math.abs(+n||0).toFixed(e),10)+"",o=(o=r.length)>3?o%3:0;return s+(o?r.substr(0,o)+a:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")};i.Date.prototype.toRelativeTime=function(e){e=e||new Date;var t=(e.getTime()-this.getTime())/1e3;return t<60?"less than a minute ago":t<120?"about a minute ago":t<3600?Math.floor(t/60)+" minutes ago":t<7200?"about an hour ago":t<86400?"about "+Math.floor(t/3600)+" hours ago":t<172800?"1 day ago":Math.floor(t/86400)+" days ago"};i.Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1);var t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())};i.Date.prototype.isDST=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};i.Date.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0};i.Date.getDaysInMonth=function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]};i.Date.prototype.isLeapYear=function(){return i.Date.isLeapYear(this.getFullYear())};i.Date.prototype.getDaysInMonth=function(){return i.Date.getDaysInMonth(this.getFullYear(),this.getMonth())};i.Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};i.Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};i.Date.prototype.addDays=function(e){return this.addMilliseconds(864e5*e)};i.Date.prototype.addMilliseconds=function(e){this.setMilliseconds(this.getMilliseconds()+e);return this};i.Date.prototype.addSeconds=function(e){return this.addMilliseconds(1e3*e)};i.Date.prototype.addMinutes=function(e){return this.addMilliseconds(6e4*e)};i.Date.prototype.addHours=function(e){return this.addMilliseconds(36e5*e)};i.Date.prototype.addDays=function(e){return this.addMilliseconds(864e5*e)};i.Date.prototype.addWeeks=function(e){return this.addMilliseconds(6048e5*e)};i.Date.prototype.addMonths=function(e){var t=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+e);this.setDate(Math.min(t,this.getDaysInMonth()));return this};i.Date.prototype.addYears=function(e){return this.addMonths(12*e)};i.Date._validate=function(e,t,a,i){return true};i.Date.validateMillisecond=function(e){return i.Date._validate(e,0,999,"milliseconds")};i.Date.validateSecond=function(e){return i.Date._validate(e,0,59,"seconds")};i.Date.validateMinute=function(e){return i.Date._validate(e,0,59,"minutes")};i.Date.validateHour=function(e){return i.Date._validate(e,0,23,"hours")};i.Date.validateDay=function(e,t,a){return i.Date._validate(e,1,i.Date.getDaysInMonth(t,a),"days")};i.Date.validateMonth=function(e){return i.Date._validate(e,0,11,"months")};i.Date.validateYear=function(e){return i.Date._validate(e,1,9999,"seconds")};i.Date.prototype.set=function(e){var t=e;t.millisecond||0===t.millisecond||(t.millisecond=-1);t.second||0===t.second||(t.second=-1);t.minute||0===t.minute||(t.minute=-1);t.hour||0===t.hour||(t.hour=-1);t.day||0===t.day||(t.day=-1);t.month||0===t.month||(t.month=-1);t.year||0===t.year||(t.year=-1);-1!==t.millisecond&&i.Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds());-1!==t.second&&i.Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds());-1!==t.minute&&i.Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes());-1!==t.hour&&i.Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours());-1!==t.month&&i.Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth());-1!==t.year&&i.Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear());-1!==t.day&&i.Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate());t.timezone&&this.setTimezone(t.timezone);t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset);return this}}},9128:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.initializeAnimations=t.polyfillAndObserve=void 0;var n=a(9129);var s=i(a(1349));var r=a(9130);var o=i(a(729));var l=(0,o.default)("BlockAnimationsInitializer","#fc0"),c=l.err;var d;var u=['[class*="block-animation-"]:not(.block-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-animation-"]:not(.individual-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-text-animation-"]:not(.individual-text-animation-none):not(.animation-loaded)','[class*="combination-animation-"]:not(.combination-animation-none):not([class*="combination-animation-custom"]):not(.animation-loaded)'].join(",");var g=function e(t,n){t.forEach(function(a){if(!document.body.contains(a.target)){n.unobserve(a.target);return}var e=a.target.querySelector("img.loading");if(e){if(e.dataset.queuedBlockAnimation)return;e.dataset.queuedBlockAnimation="true";var i=function e(t){t.currentTarget.removeEventListener("load",i);g([a],n)};e.addEventListener("load",i);return}if((0,r.isRatioIntersecting)(a)){a.target.classList.add("animation-loaded");if(!n||!n.unobserve){c("missing IntersectionObserver");return}n.unobserve(a.target)}})};var p=function e(a){if(!a||!a.document){c("Cannot init animations without a window context");return}(0,s.default)(a).then(function(e){d=d||new e(g,{root:null,threshold:[0,.1,.25,.5,1]});var t=a.document.body.querySelectorAll(u);t.length>0&&t.forEach(function e(t){t.classList.remove("animation-loaded");d.observe(t)})}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(e.message)})};t.polyfillAndObserve=p;var h=function e(t){if(!t||!t.document){c("Cannot init animations without a window context");return}if((0,n.isEditMode)(t))return;p(t);t.addEventListener("load",function(){return p(t)});t.Y&&t.Y.on("template:dynamicPageReady",function(){return p(t)});t.addEventListener("beforeunload",function(){d&&d.disconnect()})};t.initializeAnimations=h},9129:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.isEditMode=void 0;var n=i(a(43));var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var a="sqs-edit-mode";var i=(0,n.default)(t,"document.body");return i&&i.classList.contains(a)};t.isEditMode=s},9130:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isRatioIntersecting=void 0;var i=a(729);var l=(0,i.createLogger)("IntersectionObserverUtils","#fc0");var n=function e(t){var a=t.target,i=t.intersectionRatio,n=t.isIntersecting,s=t.boundingClientRect;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!document.body.contains(a)){l("Memory leak detected: el is no longer in document.body.",a);return false}if(!window.innerHeight)return false;if(i>=r)return true;var o=s.height>window.innerHeight;return o&&n};t.isRatioIntersecting=n},9131:function(e,t,a){"use strict";var l=a(24).t;var c=a(5811);var d=function e(t,a){var i=t.one("img[data-image]");if(!i)return;var n=i.loader;if(!n)return;var s={content:n.getBareElement(),title:l("Image")};var r=t.getAttribute("data-description");r&&(s.meta=r);var o=t.getAttribute("data-lightbox-theme");o&&(s.theme=o);t.plug(a.Squarespace.Lightbox2Plug,{lightboxOptions:s})};var u=function e(t,a){t.setStyles({position:null,top:null,left:null,width:null,height:null});var i=!!t.ancestor(".sized,.content-fill");if(i){var n=a.on("resize",function(){if(t.getDOMNode()&&t.inDoc())t.fire("refresh");else{n.detach();n=null}},a.config.win);var s=t.ancestor(".image-block-wrapper");var r=t.ancestor(".sqs-layout");if(s&&r&&!r.hasClass("editing")){var o=s.get("offsetHeight")/s.get("offsetWidth");var l=[];l.push("padding-bottom: "+100*o+"% !important;");l.push("height: auto !important;");s.setAttribute("style",l.join(""));t.setStyles({maxWidth:"none"})}}var c=!!t.ancestor(".has-aspect-ratio");t.plug(a.Squarespace.Loader2,{mode:c||i?"fill":"none",fixedRatio:c})};var i=function e(t,a){u(t,a);var i=t.ancestor(".sqs-block");if(!i)return;var n=i.one(".lightbox");n&&d(n,a);if(!i.hasClass("sqs-block-image"))return;var s=false;var r=i.one(".image-block-outer-wrapper");if(r){var o=r.get("offsetWidth")<415;r.toggleClass("sqs-narrow-width",o);o&&(s=true)}var l=i.one(".sqs-dynamic-text-container");l&&c(l.getDOMNode());i.addClass("sqs-text-ready");s&&a.config.win.ImageLoader.load(t)};e.exports={initializeImageBlock:i,initializeBasicBlockWithImage:u}},9132:function(e,t,a){"use strict";e.exports=function(s,r){var o=r.config.win;o.Squarespace.onInitialize(r,function(){var e=o.SQUARESPACE_LOGIN&&o.SQUARESPACE_LOGIN.isLoggedIn();var t="https:"===r.config.doc.location.protocol;var a=s.one(".OT_Faux_Block");var i=s.one("#OT_form:not(.OT_Faux_Block)");function n(){i&&i.remove();a.removeClass("sqs-block-opentable-hidden")}if(e){n();a.all(".OT_list li").removeClass("sqs-block-opentable-hidden");a.on("click",function(e){e.preventDefault();r.Squarespace.Widgets.Alert({"strings.title":"Preview Only","strings.message":"Please log out of your Squarespace account in order to use the OpenTable Block."})})}else(o.Squarespace.SQUARESPACE_INITIALIZED_ONCE||t)&&n()});o.Squarespace.onDestroy(r,function(){r.one("#ui-datepicker-div")&&r.one("#ui-datepicker-div").hide()})}},9133:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a(40));var o=a(228);var l=a(368);var c=a(701);function n(a){var e=a.querySelector(".summary-block-wrapper");if(!e)return Promise.resolve();if(!e.matches(".summary-block-collection-type-events"))return Promise.resolve();var t;try{t=JSON.parse(a.getAttribute("data-block-json"))}catch(e){console.warn("Issue with decoding the JSON: ",e);return Promise.resolve()}var i=a.ownerDocument.defaultView.Static.SQUARESPACE_CONTEXT.collectionId;var n=a.closest('.sqs-layout[data-type="page"]');n&&(i=n.getAttribute("id").replace("page-",""));var s=l.stringify({collectionId:i,widgetJSON:JSON.stringify({type:c.SUMMARY_V2,id:a.getAttribute("id").replace("block-",""),value:t})});var r={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return o.post("/api/widget/GetWidgetRendering",s,r).then(function(e){var t=a.querySelector(".sqs-block-content");t&&(t.innerHTML=e.data.html)})}var r=function e(t){t.getDOMNode&&(t=t.getDOMNode());return n(t).then(function(){if(!t.querySelector(".summary-block-setting-design-autogrid"))return Promise.resolve();var a=(0,s.default)(t.querySelectorAll("img"));var i=0;var n=function e(t){t.target.removeEventListener("load",e);i++;if(i===a.length){i=0;window.dispatchEvent(new Event("resize"))}};var e=function e(t){t.addEventListener("load",n)};a.forEach(e)})};t.default=r;e.exports=t.default},9134:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=n;var s=i(a(228));function n(a,e){a.getDOMNode&&(a=a.getDOMNode());var t;try{t=JSON.parse(a.getAttribute("data-block-json"))}catch(e){console.warn("Issue with decoding the JSON: ",e);return Promise.reject()}var i=JSON.stringify({type:e,id:a.getAttribute("id").replace("block-",""),value:t});var n="widgetJSON=".concat(i);return s.default.post("/api/widget/GetWidgetRendering",n).then(function(e){var t=a.querySelector(".sqs-block-content");t&&e.data&&e.data.html&&(t.innerHTML=e.data.html)})}e.exports=t.default},9135:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.initializeMenuBlock=n;var s=i(a(40));var r=0;var o="menu-select-labels--active";function n(e){var t=(0,s.default)(e.querySelectorAll(".js-menu-select-labels"));var a=t.length;if(0===a)return;var n=(0,s.default)(e.querySelectorAll(".js-menu"));function i(a,i){t.forEach(function(e,t){if(t===a){e.setAttribute("tabindex",0);e.setAttribute("aria-selected",true);e.classList.add(o);i&&e.focus()}else{e.setAttribute("tabindex",-1);e.setAttribute("aria-selected",false);e.classList.remove(o)}});n.forEach(function(e,t){e.style.display=t===a?"block":"none"})}i(r,false);t.forEach(function(e,t){e.addEventListener("click",function(){i(t,true)});e.addEventListener("keydown",function(e){if(13===e.keyCode||32===e.keyCode){e.stopPropagation();i(t,true)}else if(37===e.keyCode){e.stopPropagation();i((t-1+a)%a,true)}else if(39===e.keyCode){e.stopPropagation();i((t+1)%a,true)}})})}},9136:function(e,t,a){"use strict";var c=a(5520);var d=a(595);var u=a(1622);function i(e){var a=e.one("a");if(!a||a.getAttribute("data-initialized"))return;var t=a.get("parentNode");var i=a.ancestor(".sqs-block-button");var n=i.getAttribute("id");var s=a.getAttribute("href");var r=a.hasAttribute("target");var o=d.isMailto(s);var l={id:n,buttonText:a.get("innerHTML"),clickthroughUrl:s,alignment:t.getAttribute("data-alignment"),size:t.getAttribute("data-button-size"),newWindow:r,context:c.BUTTON_BLOCK};u.trackButtonView(l);a.on("click",function(e){if(a.hasAttribute("data-tracked")){a.removeAttribute("data-tracked");return}var t=(!r||e.metaKey||e.ctrlKey||e.shiftKey)&&!o;if(t){e.preventDefault();e.stopImmediatePropagation()}u.trackButtonClick(l).then(function(){if(t){a.setAttribute("data-tracked",true);a.simulate("click")}})});a.setAttribute("data-initialized",true)}e.exports=i},9137:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.initialize=void 0;var n=i(a(9138));var s=i(a(6274));var r=i(a(5260));var o=i(a(3503));var l=null;var c=false;var d=function e(t){if(!(0,s.default)(t))return;l=l||t.SquarespaceCommerceCartBundle;if(l){l.initialize();return}o.default.then(function(){(0,r.default)();var e=t.Static.SQUARESPACE_CONTEXT.rollups["squarespace-commerce-cart"].js;(0,n.default)(e,t).then(function(){l=t.SquarespaceCommerceCartBundle;l.initialize()}).catch(function(e){console.error("Failed to load cart page bundle.");throw new Error(e)})})};var u=function e(t){l&&(0,s.default)(t)&&l.destroy()};var g=function e(t){var a=t.onInitialize,i=t.onDestroy,n=t.win;if((0,s.default)(n)&&!c){a(function(){return d(n)});i(function(){return u(n)});c=true}};t.initialize=g},9138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(i,n){return new Promise(function(e,t){var a=n.document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",i);a.addEventListener("load",e);n.document.head?n.document.head.appendChild(a):t()})};t.default=i;e.exports=t.default},9139:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=l;var n=i(a(43));var s=a(472);function r(e){try{var t=e.top!==e;var a=(0,n.default)(e,"top.YUI.Env",false);return t&&a}catch(e){}return false}function o(e){return e.top.Static.SQUARESPACE_CONTEXT}function l(e){var t=s.IS_SQUARESPACE_MOBILE_APP||r(e);if(!t)return;e.YUI.Env.globalEvents=e.top.YUI.Env.globalEvents;var a=(0,n.default)(e,"StaticActions.bootstrap",null);if(!a)return;var i=o(e);a(i)}e.exports=t.default},9140:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=i(a(43));var s=a(9141);var r=i(a(5070));function o(a){if(!a||!(0,n.default)(a,"config.win.Static.COOKIE_BANNER_CAPABLE"))return;var e=(0,n.default)(a,"config.win.Static.SQUARESPACE_CONTEXT.cookieSettings");var t=e&&r.default.shouldShowCookieBanner({settings:e,urlSearch:window.location.search});t&&(0,s.mount)(a.config.win.Static.SQUARESPACE_CONTEXT.cookieSettings);a.Global.on("cookieBanner:force",function e(t){if(!(0,n.default)(a,"config.win.document.body"))return;(0,s.mount)(a.merge({force:true},t));a.config.win.document.body.classList.add("sqs-cookie-banner-v2-forced");a.Global.once("cookieBanner:unforce",function e(t){a.Global.detach("cookieBanner:update");if(!(0,n.default)(a,"config.win.document.body"))return;a.config.win.document.body.classList.remove("sqs-cookie-banner-v2-forced");(0,s.mount)(t)});a.Global.on("cookieBanner:update",function e(t){if(!(0,n.default)(a,"config.win.document.body"))return;(0,s.unmount)();(0,s.mount)(a.merge({force:true},t))})})}e.exports=t.default},9141:function(e,t,a){"use strict";var i=a(36);var n=a(4);Object.defineProperty(t,"__esModule",{value:true});t.unmount=t.mount=t.renderDom=t.applySettings=void 0;var s=n(a(128));var d=i(a(5083));var u=a(4131);var r=2;var g="sqs-cookie-banner-v".concat(r);var p;var h;var f;var m;var o=function e(t){t.preventDefault();if(document.body.className.indexOf("sqs-cookie-banner-v2-forced")>-1)return false;var a=new Date;a.setTime((new Date).getTime()+2592e6);s.default.set("ss_cookieAllowed",true,{path:"/",expires:a});h.remove()};var l=function e(){h=document.createElement("div");h.className=g;f=document.createElement("div");f.className="".concat(g,"-text");m=document.createElement("button");m.className="".concat(g,"-accept");m.addEventListener("click",o);var t=document.createElement("div");t.className="".concat(g,"-acceptWrapper");t.appendChild(m);h.appendChild(f);h.appendChild(t);return h};t.renderDom=l;var c=function e(t){var a=t.isCookieBannerEnabled;var i=(0,u.getWithDefaults)(t),n=i.cookieBannerCtaText,s=i.cookieBannerCtaVariant,r=i.cookieBannerPosition,o=i.cookieBannerText,l=i.cookieBannerTheme,c=i.cookieBannerVariant;p=r===d.BAR_POSITIONS.TOP&&document.body.querySelector(".sqs-announcement-bar-dropzone")||document.body;h.className=g;h.classList.add(c,l,r,s);f.innerHTML=0===o.indexOf("<p>")?o:"<p>".concat(o,"</p>");switch(s){case d.CTA_VARIANTS.BUTTON:m.innerText=n;break;case d.CTA_VARIANTS.TEXT:m.innerText=n;break;case d.CTA_VARIANTS.ICON:m.innerText=" ";break}r===d.BAR_POSITIONS.TOP?document.body.classList.add("".concat(g,"-top")):document.body.classList.remove("".concat(g,"-top"));if(a){p.classList.add("".concat(g,"-enabled"));p.appendChild(h)}else p.classList.remove("".concat(g,"-enabled"));return h};t.applySettings=c;var v=function e(){var t={expires:new Date(0)};["SS_MATTR","SS_MID","SS_lastvisit","user_segment","ss_cid","ss_cpvisit","ss_cvisit","ss_cvr","ss_cvt"].forEach(function(e){return s.default.set(e,"",t)})};var b=function e(){h&&h.remove();h=null;p&&p.classList.remove("".concat(g,"-enabled"))};t.unmount=b;var y=function e(t){if(!t.force){var a=s.default.get("ss_cookieAllowed");!a&&t.isRestrictiveCookiePolicyEnabled&&v();if("undefined"!==typeof a&&null!==a)return false}h||l();c(t);return true};t.mount=y},9142:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=o;var n=i(a(40));var s=i(a(5811));var r=[".image-block-v2 .sqs-dynamic-text-container"].join(",");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;(0,n.default)(e.document.querySelectorAll(t)).forEach(function(e){return(0,s.default)(e)})}e.exports=t.default},9143:function(e,t,a){"use strict";var i=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a(595));var c=function e(t,a){if(!t)return;var i=t.getAttribute("data-block-json");if(i){var n=a.JSON.parse(i);n&&"Twitter"!==n.providerName&&t.get("children").each(function(e){return e.resizetoparent({sizeonly:true})})}t.setStyles({visibility:"visible",opacity:1,height:"auto"})};var n=function e(t,a,i){var n=t.one(".sqs-block-content");if(!n)return;l.default.securifyBlockEmbed(n);var s=n.test(".sqs-block-video .sqs-block-content");if(s){var r=n.one(".sqs-video-wrapper");r&&i.Squarespace.initializeVideoBlock(r,a);return}var o=n.one(".intrinsic");o||c(n,a)};t.default=n;e.exports=t.default},9144:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){e.Static.SQUARESPACE_CONTEXT.collection&&(e.Static.SQUARESPACE_CONTEXT.collectionId=e.Static.SQUARESPACE_CONTEXT.collection.id);e.Static.SQUARESPACE_CONTEXT.item&&(e.Static.SQUARESPACE_CONTEXT.itemId=e.Static.SQUARESPACE_CONTEXT.item.id)}e.exports=t.default},9145:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mixin=t.globalDestroy=t.markReady=t.onDestroy=t.onInitialize=t.destructors=t.initializers=void 0;var i=[];t.initializers=i;var n=[];t.destructors=n;var s=function e(t,a){t.config.win.Squarespace.INITIALIZED&&a();-1===i.indexOf(a)&&i.push(a)};t.onInitialize=s;var r=function e(t,a){n.push(a)};t.onDestroy=r;var o=function e(t){if(t.config.win.Squarespace.INITIALIZED)return;i.forEach(function(e){try{e()}catch(e){console.error("[mercury.markReady] Error invoking initializer.",e)}});t.config.win.Squarespace.INITIALIZED=true;t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE=true};t.markReady=o;var l=function e(t){if(!t.config.win.Squarespace.INITIALIZED)return;t.config.win.Squarespace.INITIALIZED=false;n.forEach(function(e){return e()})};t.globalDestroy=l;var c=function e(t){t.Squarespace=t.Squarespace||{};t.Squarespace.onInitialize=s;t.Squarespace.onDestroy=r;t.Squarespace.globalMarkReady=o;t.Squarespace.globalDestroy=l};t.mixin=c}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/93-707c12d9d96c1bef48433-min.en-US.js.map