(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{11461:function(e,t,a){"use strict";var r=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=d;var n=r(a(2));var i=r(a(74));var s=r(a(1920));var o=r(a(411));function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function d(e){return(0,i.default)({getStores:function e(){return[s.default,o.default]},getPropsFromStores:function e(t){var a=t.tweakApi;var r=a?a.getFrameWindow():null;var n=s.default.getIsColorsLoaded();return l({},s.default.getState(),{},t,{typekitId:o.default.getState().typekitId,tweakWindowNode:r,isColorsLoaded:n})}},e)}e.exports=t.default},11470:function(e,t,a){"use strict";var r=a(1);var n=r.shape({category:r.string.isRequired,label:r.string,title:r.string.isRequired,type:r.string.isRequired,variableName:r.string.isRequired,defaultValue:r.string,js:r.bool,showOnlyWhenPresent:r.string,target:r.string,disableTransparency:r.bool,loadAllVariants:r.bool,max:r.number,min:r.number,step:r.number});var i=r.shape({category:r.string.isRequired,defs:r.arrayOf(r.string).isRequired,key:r.string.isRequired,label:r.string.isRequired,type:r.string.isRequired});var s={def:n.isRequired,value:r.string.isRequired,onFieldChange:r.func};e.exports={propsDef:n,propsFieldSet:i,propsField:s}},11668:function(e,t,a){"use strict";var r=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a(8));var i=r(a(9));var s=r(a(2));var o=r(a(1028));var u=r(a(34));var l=r(a(1306));var d=r(a(13660));var c=a(729);var v=(0,c.createLogger)("TweakDomManagerCache","#ff00ff");var f=function(){function e(){var r=this;(0,n.default)(this,e);(0,s.default)(this,"handleFrameRefresh",function(){v("FrameActions.REFRESH - Release");r.releaseInstance()});(0,s.default)(this,"getInstance",function(e,t){var a=e.tweakWindowNode;if(!a)return null;if(r.hit){if(a.document!==r.hit.doc||!r.hit.doc.defaultView){v("Releasing and re-creating invalid",r.hit);r.releaseInstance();return r.createInstance(e,t)}r.hit.consumers.add(t);return r.hit.instance}return r.createInstance(e,t)});(0,s.default)(this,"releaseInstance",function(e){if(!r.hit)return;if(e){r.hit.consumers.delete(e);if(r.hit.consumers.size>0){v("Instance still has consumers",r.hit);return}}r.hit.instance.destroy();r.hit=null;v("Instance released")});this.hit=null;this.actionListener=new o.default(u.default);this.actionListener.addActionListener(l.default.REFRESH,this.handleFrameRefresh)}(0,i.default)(e,[{key:"createInstance",value:function e(t,a){var r=t.tweakWindowNode;var n=new d.default(t);var i=r.document;var s=new Set([a]);this.hit={instance:n,doc:i,consumers:s};v("Create",this.hit);return n}}]);return e}();var p=new f;t.default=p;e.exports=t.default},11671:function(e,t,a){"use strict";var r=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(a(5198));var i=(0,n.default)("fontFamily","fontStyle","fontWeight","value","dropdown","checkbox","color");t.default=i;e.exports=t.default},11789:function(e,t,a){"use strict";var r=a(4);Object.defineProperty(t,"__esModule",{value:true});t.generateThemesCss=t.themesToLessMaps=t.mappingsToLess=t.getAdjustmentExpressionValue=t.upsertSectionThemesStyles=t.getSectionThemesStyleEl=t.paletteToLessMap=void 0;var v=r(a(27));var i=a(2372);var f=a(3075);var s=a(11539);var n=r(a(729));var o=(0,n.default)("ThemeUtils"),u=o.warn,l=o.err;var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.colors,r=void 0===a?[]:a;return r.map(function(e){var t=e.id,a=e.value;return"@".concat(t,": ").concat(a,";")}).join("")};t.paletteToLessMap=p;var d=function e(t){return t?t.querySelector(i.SECTION_THEMES_STYLES_SELECTOR):null};t.getSectionThemesStyleEl=d;var c=function e(t,a){if(!t||!a||!a.defaultView||!a.body)return;var r=d(a)||(0,s.createInjectableNode)({element:"style",id:i.SECTION_THEMES_STYLES_STYLE_TAG_ID});var n;"string"===typeof t?n=t:t instanceof Element&&(n=t.innerHTML);a.body.appendChild(r);r.innerHTML=n;return r};t.upsertSectionThemesStyles=c;var h={fade:function e(t){var a=(t||"0%").match(/(\d+)%/);var r=a&&a.length?parseInt(a[1],10):0;var n=r/100;return+n}};var w=function e(t,a){return h[t]?h[t](a):null};t.getAdjustmentExpressionValue=w;var g=function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.map(function(e,t){var a=e.colorId,r=e.custom,n=e.variableName,i=e.adjustmentExpression;if(!n){l("Invalid mapping -- missing variableName",{mappings:o,index:t});return""}if(!a){if(!r){l("Missing colorId mapping",{mappings:o,index:t});return""}u("Missing colorId mapping",{mappings:o,index:t})}var s;if(r)s=r;else{s="@".concat(a);i&&(s=i.replace("@color",s))}return"@".concat(n,": ").concat(s,";")}).join("")};t.mappingsToLess=g;var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce(function(e,t){var a=t.mappings,r=t.themeId;e[r]=g(a);return e},{})};t.themesToLessMaps=m;var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o=t.sectionThemesPartial,a=t.siteAestheticValues;a=void 0===a?{}:a;var r=a.colors;r=void 0===r?{}:r;var n=r.palette,i=void 0===n?{}:n,s=r.themes,u=void 0===s?[]:s;if(!o)return"";var l=p(i);var d=m(u);var c=Object.entries(d).reduce(function(e,t){var a=(0,v.default)(t,2),r=a[0],n=a[1];var i="".concat(l).concat(n," .").concat(r," {").concat(o,"}");var s=(0,f.compileLess)(i);return e+s},"");return c};t.generateThemesCss=y},12145:function(e,t,a){"use strict";var r=a(4);var n=r(a(2));var i,s;var u={YUI:"yui",NATIVE:"native"};var l={ALL:"all",SINGLE:"native"};var o=(i={},(0,n.default)(i,l.ALL,"querySelectorAll"),(0,n.default)(i,l.SINGLE,"querySelector"),i);var d=(s={},(0,n.default)(s,l.ALL,"all"),(0,n.default)(s,l.SINGLE,"one"),s);var c={};var v=function e(t,a,r,n){if(n===u.NATIVE)return t[o[r]](a);if(window.Y&&n===u.YUI)return window.Y.one(t)[d[r]](a);window.Y||console.error("Tried to use window.Y before it is available!",{selector:a})};var f=function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var n=a[1],i=a[2];var s=c[n];var o;if(s)o=v.apply(void 0,a.concat([s]));else{try{o=v.apply(void 0,a.concat([u.NATIVE]));s=u.NATIVE}catch(e){false;o=v.apply(void 0,a.concat([u.YUI]));s=u.YUI}c[n]=s}return i===l.ALL?Array.from(o):o};var p=function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return f.apply(void 0,a.concat([l.SINGLE]))};var h=function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return f.apply(void 0,a.concat([l.ALL]))};e.exports={single:p,all:h}},13660:function(e,t,a){"use strict";var r=a(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=r(a(40));var i=r(a(8));var s=r(a(9));var o=r(a(2));var l=r(a(11550));var c=r(a(425));var v=r(a(21));var u=r(a(183));var f=r(a(43));var n=r(a(1));var h=a(11719);var p=r(a(2607));var w=r(a(522));var g=r(a(13661));var m=a(13662);var y=a(729);var k=a(11789);var C=a(5960);var b=a(11539);var S=r(a(3073));var T=r(a(12145));var O=r(a(2450));var N=r(a(11478));function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,r)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),true).forEach(function(e){(0,o.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var E=(0,y.createGroup)("%c[TweakDomManager]","#ff00ff"),V=E.group,I=E.groupEnd;var A=(0,y.createLogger)("TweakDomManager","#ff00ff");var L={COLORS:"colors",TWEAKS:"tweaks"};var D=true;var P=false;var R="SquarespaceCustomCss";var M="SquarespaceInjectedCss";var q=function(){function n(){var u=this;var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,n);(0,o.default)(this,"throttledUpdate",(0,c.default)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.default;window.clearTimeout(this._checkDomTimeout);this.updateVisibleTweaksBasedOnDom();this.dispatchChangeEvent(this._tweakKeyQueue);t()}.bind(this),500,{leading:true,trailing:true}));(0,o.default)(this,"checkSlide",function(){var e=u.props,t=e.pageType,a=e.tweakWindowNode;var r=(0,C.getTweakWrapperSelector)(t);return r?T.default.single(a.document,r):null});(0,o.default)(this,"updateVisibleTweaksBasedOnDom",function(){var e=u.props,t=e.tweakDefinitions,o=e.tweakWindowNode,a=e.visibleDefinitions;var r=Object.values(t).reduce(function(e,t){var a=t.showOnlyWhenPresent,r=t.variableName;var n=a;var i=u.checkSlide()||o.document;var s=T.default.single(i,n);n&&!s||e.push(r);return e},[]);var n=(0,l.default)(r,a);n.length>0&&O.default.setFilterProperty.defer({visibleDefinitions:r,definitionVisibility:u.getDefinitionVisibility(t,r)})});false;this.props=e;var t=this.props,a=t.tweakValuesSaved,r=t.persistData;this._nextDomUpdateReasons=new Set;this._prevTweakValues=a;this._prevCustomCss=null;this._appliedValues=r?j({},a):{};this._tweakKeyQueue=[];this._injectedStyleNodes={};window&&window.Y&&window.Y.one&&(this._checkDomTimeout=window.setTimeout(this.updateVisibleTweaksBasedOnDom,0))}(0,s.default)(n,[{key:"destroy",value:function e(){A("Destroy",this);this.clearQueue()}},{key:"clearQueue",value:function e(){this.throttledUpdate.cancel();window.clearTimeout(this._checkDomTimeout);window.cancelAnimationFrame(this._domUpdateRaf)}},{key:"didTweaksChange",value:function e(t,a){return!(0,u.default)(t.tweakValuesCurrent,a.tweakValuesCurrent)}},{key:"didColorsChange",value:function e(t,a){return!!w.default.isSevenOne()&&!(0,u.default)(t.siteAestheticValues.colors,a.siteAestheticValues.colors)}},{key:"didCleanCssChange",value:function e(t,a){return t.cleanCss!==a.cleanCss}},{key:"didDomChange",value:function e(t,a){return t.domMutated!==a.domMutated}},{key:"update",value:function e(t,a){this.props=a;this.didCleanCssChange(t,a)&&this.cleanup(a);if(a.saving)return;if(this.didColorsChange(t,a)){this.requestDomUpdate(L.COLORS);return}if(this.didTweaksChange(t,a)){this.requestDomUpdate(L.TWEAKS);return}this.didDomChange(t,a)&&this.throttledUpdate()}},{key:"requestDomUpdate",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a&&this._nextDomUpdateReasons.add(a);window.cancelAnimationFrame(this._domUpdateRaf);this._domUpdateRaf=window.requestAnimationFrame(function(){return t.domUpdate(t._nextDomUpdateReasons)})}},{key:"domUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;V("domUpdate",{reasons:(0,d.default)(t)});var a=this.props,r=a.pageType,n=a.sectionThemesPartial,i=a.siteAestheticValues,s=a.tweakValuesCurrent,o=a.tweakWindowNode;if(!o||!(0,f.default)(o,"document.body")){A("The document was destroyed, skipping queued domUpdate.");I();return}var u=t.has(L.COLORS);t.clear();var l=Object.keys((0,S.default)({prev:this._prevTweakValues,next:s}));this._prevTweakValues=s;this._tweakKeyQueue=this._tweakKeyQueue.concat(l);this.updateCustomCss();if(l.length>0){this.updateCss(l);u||this.checkBodyClasses(l);this.checkStaticContext(l)}u&&this.updateSectionThemeStyles({pageType:r,sectionThemesPartial:n,siteAestheticValues:i,tweakWindowNode:o});this.throttledUpdate();I();N.default.domUpdated()}},{key:"updateSectionThemeStyles",value:function e(t){var a=t.pageType,r=t.sectionThemesPartial,n=t.siteAestheticValues,i=t.tweakWindowNode;if(a!==p.default.STYLE||!w.default.isSevenOne())return;var s=i.document;if(!s)return;var o=(0,k.generateThemesCss)({sectionThemesPartial:r,siteAestheticValues:n});var u=(0,k.upsertSectionThemesStyles)(o,s);u&&A("Injected new sectionThemeStyles",u)}},{key:"checkStaticContext",value:function e(t){var a=this.props,r=a.tweakValuesCurrent,n=a.tweakWindowNode;t.forEach(function(e){(0,g.default)(e,r[e],n)})}},{key:"checkBodyClasses",value:function e(t){var a=this.props,i=a.tweakValuesCurrent,r=a.tweakDefinitions,n=a.tweakApi;var s=n.getTargetNode();if(!s||!s.ownerDocument.defaultView)return;t.map(function(e){return r[e]}).filter(function(e){return!!e}).forEach(function(e){var t=e.type;var a=e.variableName;var r=i[a];if(void 0!==r)if("checkbox"===t)s.classList.toggle(a,r+""==="true");else if("dropdown"===t){var n=e.options;n.forEach(function(e){var t=a+"-"+(0,m.slugify)(e);s.classList.toggle(t,r===e)})}})}},{key:"getDefinitionVisibility",value:function e(a,t){var r=t.reduce(function(e,t){e[t]=a[t];return e},{});return Object.values(a).reduce(function(e,t){var a=t.variableName;e[a]=Boolean(r[a]);return e},{})}},{key:"dispatchChangeEvent",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!(0,f.default)(window,"Y.Global.fire"))return;var a=this.props,r=a.tweakValuesCurrent,n=a.tweakDefinitions;var i=new Set(t);i.forEach(function(t){var e=n[t];var a=r[t];try{window.Y.Global.fire("tweak:change",{config:Object.assign({value:a},e),getName:function e(){return t},getValue:function e(){return a}})}catch(e){false}});t.length=0}},{key:"initTweakEngine",value:function e(){if(this._tweakEngine)return this._tweakEngine;A("initializing tweak engine");var t=this.props,a=t.tweakValuesCurrent,r=t.rawData,n=r.tweakLess,i=r.tweakIdMap;if(!i&&!n){A("Missing tweakIdMap or tweakLess, cannot init",{props:this.props});return}var s=JSON.parse(n);this._tweakEngine=new h.TweakEngine(s,i,a,D,P);var o=this._tweakEngine.getGroupIds();var u=true;var l=false;var d=void 0;try{for(var c=o[Symbol.iterator](),v;!(u=(v=c.next()).done);u=true){var f=v.value;var p=this._tweakEngine.getCssForGroup(f);this.updateStyleNodeById(f,p)}}catch(e){l=true;d=e}finally{try{u||null==c.return||c.return()}finally{if(l)throw d}}this.removePageCss();return this._tweakEngine}},{key:"getInjectedNodes",value:function e(){var t=this.props.tweakWindowNode;return(0,d.default)(t.document.querySelectorAll(".".concat(M)))}},{key:"removePageCss",value:function e(){var t=this.props.tweakApi;var a=t.getStyleNode();a&&a.parentNode.removeChild(a)}},{key:"removeTweakCss",value:function e(){this.getInjectedNodes().forEach(function(e){return e.remove()});this._injectedStyleNodes={}}},{key:"updateCss",value:function e(t){var r=this;if(0===t.length)return;var n=this.props.tweakValuesCurrent;var i=this.initTweakEngine();if(i){t.forEach(function(e){var t=n[e];var a=i.setVariable(e,t).length>0;a&&r.updateStyleNode(e);r._appliedValues[e]=t});this.removePageCss()}}},{key:"updateStyleNode",value:function e(t){var a=this.initTweakEngine();if(!a)return;var r=a.getCssForVariable(t);if(!r)return;for(var n in r)this.updateStyleNodeById(n,r[n])}},{key:"updateStyleNodeById",value:function e(t,a){var r=this.props.tweakApi;var n=(0,C.getTweakStyleTagId)(t);var i=this._injectedStyleNodes[n];if(i)i.innerHTML=a;else{var s=(0,b.createInjectableNode)({element:"style",id:n,content:a,className:M});r.injectTweakStyleNode(s,this.getCustomCssNode());this._injectedStyleNodes[n]=s}}},{key:"getCustomCssNode",value:function e(){if(this._customCssNode&&this._customCssNode.ownerDocument.defaultView)return this._customCssNode;this._customCssNode=(0,b.createInjectableNode)({element:"style",id:R,className:M});this.props.tweakApi.injectCustomCssNode(this._customCssNode);return this._customCssNode}},{key:"updateCustomCss",value:function e(){var t=this.props.customCss;if(this._prevCustomCss!==t){this._prevCustomCss=t;this.getCustomCssNode().innerHTML=t}}},{key:"cleanup",value:function e(t){var a=t.cleanCss,r=t.pageType,n=t.saving,i=t.sectionThemesPartial,s=t.siteAestheticValuesSaved,o=t.tweakApi,u=t.tweakWindowNode,l=t.tweakValuesSaved;this.clearQueue();if(n){A("cleanup: tweaks network busy",{saving:n});return false}if(!a){A("cleanup: missing cleanCss",{cleanCss:a});return false}A("cleanup");this._prevTweakValues=l;this._prevCustomCss=null;this._customCssNode=null;this._appliedValues={};this._tweakKeyQueue.length=0;o.cleanCss(a);this.removeTweakCss();w.default.isSevenOne()&&this.updateSectionThemeStyles({pageType:r,sectionThemesPartial:i,siteAestheticValues:s,tweakWindowNode:u});this._tweakEngine=null;return true}}]);return n}();t.default=q;(0,o.default)(q,"propTypes",{cleanCss:n.default.string,customCss:n.default.string,domMutated:n.default.number,pageType:n.default.string,persistData:n.default.bool,rawData:n.default.object,saving:n.default.bool,sectionThemesPartial:n.default.string,siteAestheticValues:n.default.object,siteAestheticValuesSaved:n.default.object,tweakApi:n.default.object.isRequired,tweakDefinitions:n.default.object,tweakValuesCurrent:n.default.object,tweakValuesSaved:n.default.object,tweakWindowNode:n.default.object.isRequired,visibleDefinitions:n.default.array});e.exports=t.default},13661:function(e,t,a){"use strict";var r=function e(t,a,r){r=r||window;var n=r.Static.SQUARESPACE_CONTEXT.tweakJSON;n[t]&&(n[t]=a)};e.exports=r},13662:function(e,t,a){"use strict";var r=/[^a-z0-9-\s]/g;var n=/\s+|--+/g;var i=function e(t){return t.trim().toLowerCase().replace(r,"").replace(n,"-")};e.exports={slugify:i}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/9-e8f821092d3030a26a684-min.en-US.js.map