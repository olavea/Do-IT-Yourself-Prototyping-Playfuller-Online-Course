(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[103],{11519:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=a(r(5));var m=a(r(19));var p=a(r(0));var g=r(30);var C=function e(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0};var E=230;var I={closeOnEsc:true,closeOnOverlayClicked:true};var y={position:"center"};var M=g.Modal.Transition,h=g.Modal.Overlay,b=g.Modal.Position;var n=function e(t){var r=t.onRequestClose,a=t.isOpen,n=t.positionProps,o=void 0===n?y:n,l=t.transitionDuration,u=void 0===l?E:l,i=t.modalProps,d=void 0===i?I:i,c=t.onTransitionEnd,s=void 0===c?function(){return null}:c,f=(0,m.default)(t,["onRequestClose","isOpen","positionProps","transitionDuration","modalProps","onTransitionEnd"]);return p.default.createElement(M,{duration:u,onTransitionEnd:s},a&&p.default.createElement(g.Modal,(0,v.default)({onRequestClose:function e(t){t&&"esc"===t.source&&t.event.stopImmediatePropagation();r(t)},lockFocus:!C()},d),p.default.createElement(h,null),p.default.createElement(b,o,f.children)))};t.default=n;e.exports=t.default},11571:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=a(r(5));var l=a(r(19));var u=a(r(0));var i=a(r(15));var n=r(30);var d=a(r(11572));var c=n.Modal.Dialog;var s=function e(t){var r=t.children,a=t.className,n=(0,l.default)(t,["children","className"]);return u.default.createElement(c,(0,o.default)({},n,{className:(0,i.default)(d.default.dialogContainer,a)}),r)};var f=s;t.default=f;e.exports=t.default},11572:function(e,t,r){var a=r(11573);"string"===typeof a&&(a=[[e.i,a,""]]);var n;var o;var l={hmr:true};l.transform=n;l.insertInto=void 0;var u=r(17)(a,l);a.locals&&(e.exports=a.locals);false},11573:function(e,t,r){t=e.exports=r(16)(false);t.push([e.i,".ThinDialog-dialogContainer-3YFhb {\n  width: 400px;\n  min-width: 400px;\n  max-height: 600px;\n}\n",""]);t.locals={dialogContainer:"ThinDialog-dialogContainer-3YFhb"}},11665:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.EditorProvider=t.default=void 0;var i=a(r(0));var n=a(r(1433));var d=i.default.createContext("content-browser-editor");var o=d;t.default=o;var c=(0,n.default)(function(e,t,r,a,n){return{isOpen:e,initialRoute:t,onErrorsChange:r,isDirty:a,isNewItem:n}});var l=function e(t){var r=t.children,a=t.isOpen,n=t.initialRoute,o=t.onErrorsChange,l=t.isDirty,u=t.isNewItem;return i.default.createElement(d.Provider,{value:c(a,n,o,l,u)},r)};t.EditorProvider=l},11666:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.useRegistry=void 0;var l=r(0);var u=a(r(353));var n=function e(t,r){for(var a=arguments.length,n=new Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];return(0,l.useMemo)(function(){return u.default.get.apply(u.default,[t].concat(n))},[r])};t.useRegistry=n},11805:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(103);var o=a(r(869));var l=r(2619);var u=function e(t){try{if(t){var r=o.default.getCollection(t.parentCollectionId||t.collectionId);n.CMSV7Events.saveCollectionItem({itemId:t.id,collectionType:r.typeName,collectionId:r.id})}}catch(e){(0,l.captureMessage)("track save collection item failed")}};var i=u;t.default=i;e.exports=t.default},12042:function(e,t,r){e.exports=r.p+"new-category-preview-44d1e4099101feccb2dfbf04227e689c.png"},13466:function(e,t,r){"use strict";var a=r(36);var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var y=n(r(5));var M=n(r(27));var h=n(r(43));var b=a(r(0));var o=n(r(1));var O=r(1178);var S=r(246);var l=r(1045);var u=r(1350);var i=r(2614);var w=n(r(869));var x=n(r(13467));var P=n(r(13469));var T=n(r(13470));var d=r(1964);var R=r(103);var c=r(1619);var s=r(756);var _=r(13471);var D=n(r(11519));var N="tertiary";var f=function e(t){var r=t.location,a=void 0===r?{}:r,l=t.collections,u=t.items,n=t.currentCollectionId,i=t.currentItemId,d=t.onUpdateCurrentLocation,o=t.onLoadItemsForCollection,c=t.error,s=t.onCloseErrorModal,f=t.onCloseConfirmModal,v=t.onConfirmAction,m=t.confirm,p=t.currentCategoryId;var g=(0,b.useState)({}),C=(0,M.default)(g,2),E=C[0],I=C[1];(0,b.useEffect)(function(){var e=(0,h.default)(a,"params.id");var t=(0,h.default)(a,"state.frameUrl");var r=(0,h.default)(a,"params.categoryId");I({collectionId:e,frameUrl:t,categoryId:r})},[a]);(0,b.useEffect)(function(){var e=E.collectionId;var t=l[e];if(!w.default.canHandleCollection(t))return;if(e!==n){d({collectionId:e});o(e)}},[l,E,n,d,o]);(0,b.useEffect)(function(){var e=E.collectionId,t=E.frameUrl,r=E.categoryId;if(!e)return;var a=l[e];if(!a)return;var n=(0,_.getItemUrlId)(t,a.urlId);if(!n)return;var o=Object.values(u).find(function(e){return e.urlId===n});o&&o.id!==i&&d({collectionId:e,itemId:o.id,categoryId:r})},[l,i,E,u,d]);(0,b.useEffect)(function(){var e=E.categoryId,t=E.collectionId;e&&p!==e&&d({categoryId:e,collectionId:t})},[E,d,p]);return b.default.createElement(b.Fragment,null,b.default.createElement(T.default,null),b.default.createElement(P.default,null),b.default.createElement(x.default,null),b.default.createElement(O.AlertModal,(0,y.default)({},c,{onDismiss:s,onRequestClose:s})),b.default.createElement(D.default,{isOpen:m.isOpen,onRequestClose:f},b.default.createElement(S.AlertDialog,{title:m.title,message:m.message,buttons:[b.default.createElement(S.AlertDialog.Button,{key:"cancel","data-test":"content-browser-cancel-button",onClick:f},(0,R.t)("Cancel")),b.default.createElement(S.AlertDialog.Button,{variant:m.confirmVariant||N,key:"discard","data-test":"content-browser-confirm-button",onClick:v},m.confirmLabel||(0,R.t)("Confirm"))]})))};f.propTypes={location:o.default.object,collections:o.default.object,items:o.default.object,currentCollectionId:o.default.string,currentItemId:o.default.string,onUpdateCurrentLocation:o.default.func,onLoadItemsForCollection:o.default.func,error:o.default.object,onCloseErrorModal:o.default.func,onCloseConfirmModal:o.default.func,onConfirmAction:o.default.func,confirm:o.default.object};var v=(0,R.withRouter)((0,d.connect)(function(e){return{collections:(0,s.getAllCollections)(e),currentCollectionId:(0,s.getCurrentCollectionId)(e),currentItemId:(0,s.getCurrentItemId)(e),error:(0,s.getErrorModalState)(e),confirm:(0,s.getConfirmModalState)(e),items:(0,s.getItems)(e),currentCategoryId:(0,s.getCurrentCategoryId)(e)}},{onUpdateCurrentLocation:u.updateCurrentLocation,onLoadItemsForCollection:l.loadItemsForCollection,onCloseErrorModal:i.closeErrorModal,onCloseConfirmModal:c.closeConfirmModal,onConfirmAction:c.confirmAction})(f));t.default=v;e.exports=t.default},13467:function(e,t,r){"use strict";var a=r(36);var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var C=n(r(5));var E=n(r(44));var I=n(r(52));var y=n(r(43));var M=a(r(0));var o=n(r(1));var l=r(1178);var u=r(18);var h=n(r(5585));var b=r(103);var i=r(1964);var O=r(354);var S=r(2608);var w=r(11665);var x=n(r(353));var P=r(11666);var T=r(2619);var d=r(1181);var c=r(1045);var s=r(1619);var f=r(756);var R=n(r(11519));var v=n(r(11571));var _=r(594);var D=n(r(13468));var N=function e(){return M.default.createElement(v.default,null,M.default.createElement(u.Flex,{height:"400px",alignItems:"center",justifyContent:"center"},M.default.createElement(l.CircularProgressIndicator,null)))};var m=function e(t){var r=t.entity,a=t.categories,n=t.tags,o=t.initialRoute,l=t.isDirty,u=t.isOpen,i=t.isNewItem,d=t.isLoading,c=t.onCloseSettingsModal,s=t.onDeleteItem,f=t.onErrorsChange,v=t.onOpenConfirmModal;var m=(0,y.default)(r,"collection.id")||(0,y.default)(r,"contentItem.id");var p=(0,P.useRegistry)(O.SETTINGS,m,r);(0,M.useEffect)(function(){u&&(x.default.accepts(O.SETTINGS,r)||(0,T.captureMessage)("Collection Editor Opened With No Settings Component",{level:"info",context:(0,_.getCollectionDataForReporting)(r)}))},[u,r]);var g=function e(){l||i?v({title:null,message:(0,b.t)("You have made changes. Are you sure you want to discard them?"),confirmLabel:(0,b.t)("Discard")},S.NONE,[],(0,I.default)(E.default.mark(function e(){return E.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(null===r||void 0===r?void 0:r.contentItem)){t.next=7;break}if(!i){t.next=6;break}t.next=4;return s(r.contentItem.id,false);case 4:t.next=7;break;case 6:(0,D.default)(r.contentItem);case 7:c();case 8:case"end":return t.stop()}},e)}))):c()};if(!r||!r.collection&&!r.contentItem)return null;return M.default.createElement(h.default,null,M.default.createElement(w.EditorProvider,{isOpen:u,initialRoute:o,onErrorsChange:f,isDirty:l,isNewItem:i},M.default.createElement(R.default,{isOpen:u||d,onRequestClose:g},u?M.default.createElement(M.Suspense,{fallback:M.default.createElement(N,null)},M.default.createElement(p,(0,C.default)({},r,{categories:a,tags:n,onCloseSettingsModal:c,onRequestClose:g}))):M.default.createElement(N,null))))};m.propTypes={entity:o.default.object,categories:o.default.object,tags:o.default.object,initialRoute:o.default.string,isDirty:o.default.bool,isOpen:o.default.bool,isNewItem:o.default.bool,isLoading:o.default.bool,onCloseSettingsModal:o.default.func,onDeleteItem:o.default.func.isRequired,onErrorsChange:o.default.func,onOpenConfirmModal:o.default.func.isRequired};var p=(0,i.connect)(function(e){return{isOpen:(0,f.getShouldShowSettingsModal)(e),isDirty:(0,f.getIsDirty)(e),entity:(0,f.getCurrentEditingEntity)(e),categories:(0,f.getEditingCategories)(e),tags:(0,f.getEditingTags)(e),initialRoute:(0,f.getDefaultEditorTab)(e),isLoading:(0,f.getIsModalLoading)(e),isNewItem:(0,f.getIsNewItem)(e)}},{onCloseSettingsModal:d.closeSettingsEditorModal,onErrorsChange:d.errorsChange,onDeleteItem:c.deleteItem,onOpenConfirmModal:s.openConfirmModal})(m);t.default=p;e.exports=t.default},13468:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=r(103);var o=a(r(869));var l=r(2619);var u=function e(t){try{if(t){var r=o.default.getCollection(t.parentCollectionId||t.collectionId);n.CMSV7Events.cancelEditCollectionItem({itemId:t.id,collectionType:r.typeName,collectionId:r.id})}}catch(e){(0,l.captureMessage)("track cancel collection item failed")}};var i=u;t.default=i;e.exports=t.default},13469:function(e,t,r){"use strict";var a=r(36);var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=n(r(44));var m=n(r(52));var p=a(r(0));var o=n(r(1));var l=r(30);var u=r(18);var g=r(103);var i=r(1964);var C=r(354);var E=r(2608);var d=a(r(1184));var I=r(11666);var c=r(1619);var s=r(1181);var f=r(1045);var y=r(756);var M=n(r(11805));var h=n(r(11519));var b=function e(){return p.default.createElement(l.Modal.Dialog,null,p.default.createElement(u.Flex,{justifyContent:"center",alignItems:"center",css:{width:"360px",height:"200px"}},p.default.createElement(l.ActivityIndicator,null)))};var O=function e(t){var n=t.contentItem,r=t.isAddItemModalOpen,a=t.isDirty,o=t.isLoading,l=t.onCloseAddItemModal,u=t.onItemChange,i=t.onSave,d=t.onOpenConfirmModal;var c=(0,I.useRegistry)(C.ADD_ITEM_MODAL,null===n||void 0===n?void 0:n.id,{contentItem:n});var s=function(){var t=(0,m.default)(v.default.mark(function e(){var r,a=arguments;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:(0,M.default)(n);t.next=3;return i.apply(void 0,a);case 3:r=t.sent;l();return t.abrupt("return",r);case 6:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var f=function e(){a?d({title:null,message:(0,g.t)("You have made changes. Are you sure you want to discard them?"),confirmLabel:(0,g.t)("Discard")},E.NONE,[],l):l()};return p.default.createElement(p.default.Fragment,null,p.default.createElement(h.default,{isOpen:r,onRequestClose:f},p.default.createElement(p.Suspense,{fallback:p.default.createElement(b,null)},o?p.default.createElement(b,null):p.default.createElement(c,{contentItem:n,onCloseAddItemModal:l,onItemChange:u,onRequestClose:f,onSave:s}))))};O.propTypes={contentItem:o.default.object,isAddItemModalOpen:o.default.bool,isLoading:o.default.bool.isRequired,onCloseAddItemModal:o.default.func,onItemChange:o.default.func.isRequired,onSave:o.default.func};var S=(0,i.connect)(function(e){return{contentItem:(0,y.getEditingItem)(e),isAddItemModalOpen:(0,y.getShouldShowAddItemModal)(e),isDirty:(0,y.getIsDirty)(e),isLoading:(0,y.getIsAddModalLoading)(e)}},{onCloseAddItemModal:s.closeAddItemModal,onItemChange:function e(t){return(0,s.entityChange)({value:t},d.CONTENT_ITEM)},onSave:f.updateItem,onOpenConfirmModal:c.openConfirmModal})(O);t.default=S;e.exports=t.default},13470:function(e,t,r){"use strict";var a=r(36);var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var m=n(r(44));var p=n(r(52));var g=n(r(27));var C=a(r(0));var o=n(r(1));var E=n(r(229));var I=r(246);var y=r(30);var M=r(18);var h=r(2027);var b=n(r(1628));var l=r(1964);var u=a(r(2636));var i=r(756);var O=r(103);var S=n(r(869));var w=n(r(12042));var x={ONLY_STEP:"only-step",FAKE_SECOND_STEP:"fake-second-step"};var d=function e(t){var r=t.isOpen,a=t.onRequestClose,l=t.pollNestedCategoriesMigration;var n=(0,C.useState)(function(){return new I.Wizard.History}),o=(0,g.default)(n,1),u=o[0];var i=(0,C.useState)(false),d=(0,g.default)(i,2),c=d[0],s=d[1];var f="https://support.squarespace.com/hc/en-us/articles/227059347";var v=function(){var t=(0,p.default)(m.default.mark(function e(){var r,a,n,o;return m.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s(true);r=S.default.getCollectionsOfType(E.default.PRODUCTS);t.next=4;return Promise.all(r.map(function(e){return S.default.loadCollection(e.collectionId).then(function(e){var t=e.collection;return t})}));case 4:a=t.sent;n=a.length;o=a.reduce(function(e,t){return e+t.itemCount},0);(0,O.trackUserClicksMigrate)(n,o);b.default.startMigration().then(function(e){l(e,function(){(0,O.trackUserSuccessfullyMigratesCollection)(n,o)})});case 9:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();return C.default.createElement(C.default.Fragment,null,C.default.createElement(y.Modal.Transition,null,r&&C.default.createElement(y.Modal,{closeOnEsc:true,lockFocus:false,onRequestClose:a},C.default.createElement(y.Modal.Overlay,null),C.default.createElement(y.Modal.Position,{position:"center"},C.default.createElement(y.Modal.Dialog.ResponsiveProvider,null,C.default.createElement(y.Modal.Dialog,null,c?C.default.createElement(M.Flex,{justifyContent:"center",alignItems:"center",css:{height:"100%"}},C.default.createElement(y.ActivityIndicator,null)):C.default.createElement(I.Wizard.SplitScreen,null,C.default.createElement(I.Wizard.SplitScreen.Panel,null,C.default.createElement(I.Wizard,{closeButtonProps:{onClick:a},currentStepId:x.ONLY_STEP,history:u,renderProgress:function e(){return null}},C.default.createElement(I.Wizard.Step,{id:x.ONLY_STEP,nextStepId:x.FAKE_SECOND_STEP,nextButtonProps:{css:{marginLeft:0},inverted:true,label:(0,O.t)("Upgrade"),onClick:v}},C.default.createElement(I.Wizard.Step.Content,null,C.default.createElement(M.Text.Title,null,(0,O.t)("Upgrade Your Product Pages")),C.default.createElement(M.Text.Subtitle,{color:"gray.400",mt:4},C.default.createElement(O.T,{project:"apps.ContentBrowser",learnMore:C.default.createElement("a",{href:f},C.default.createElement(O.T,{project:"apps.ContentBrowser"},"Learn More"))},"We’ve made it easier for customers to find products in your store. {learnMore}")),C.default.createElement(M.Text.Subtitle,{color:"gray.400",mb:6,ml:4,mt:6},C.default.createElement("ul",null,C.default.createElement("li",null,(0,O.t)("Add up to {maxProductCount} products or services",{maxProductCount:(0,O.formatNumber)(h.TYPE_TO_ITEMS_LIMIT.products)})),C.default.createElement("li",null,(0,O.t)("Group products across multiple SEO optimized category pages")),C.default.createElement("li",null,(0,O.t)("Organize and rearrange your categories any way you want")))),C.default.createElement(M.Text.Subtitle,{color:"gray.400"},(0,O.t)("Category-based discounts are currently unavailable in the upgraded product pages, but will be supported in the coming weeks.",null,{project:"apps.ContentBrowser"})))))),C.default.createElement(I.Wizard.SplitScreen.Panel,{style:{backgroundImage:"url(".concat(w.default,")"),backgroundSize:"cover",backgroundPosition:"50% 50%"}}))))))))};d.propTypes={isOpen:o.default.bool.isRequired,onRequestClose:o.default.func.isRequired,pollNestedCategoriesMigration:o.default.func.isRequired};var c=(0,l.connect)(function(e){return{isOpen:(0,i.getShouldShowNestedCategoriesMigrationModal)(e)}},{onRequestClose:u.closeNestedCategoriesMigrationModal,pollNestedCategoriesMigration:u.pollNestedCategoriesMigration})(d);t.default=c;e.exports=t.default},13471:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getItemUrlId=void 0;var a=function e(t,r){return t.replace("/".concat(r,"/"),"")};t.getItemUrlId=a},13472:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=a(r(8));var u=a(r(9));var i=a(r(6));var d=a(r(10));var o=a(r(11));var c=a(r(7));var s=a(r(2));var n=a(r(0));var f=r(2619);function v(a){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}return function(){var e=(0,c.default)(a),t;if(n()){var r=(0,c.default)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,o.default)(this,t)}}var m=function(e){(0,d.default)(o,e);var n=v(o);function o(){var e;(0,l.default)(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e=n.call.apply(n,[this].concat(r));(0,s.default)((0,i.default)(e),"state",{hasError:false});return e}(0,u.default)(o,[{key:"componentDidCatch",value:function e(t,r){(0,f.captureException)(t);this.setState({hasError:true})}},{key:"render",value:function e(){if(this.state.hasError)return null;return this.props.children}}]);return o}(n.default.Component);var p=m;t.default=p;e.exports=t.default},6937:function(e,t,r){"use strict";var a=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=a(r(0));var o=a(r(13466));var l=a(r(13472));var u=function e(){return n.default.createElement(l.default,null,n.default.createElement(o.default,null))};t.default=u;e.exports=t.default}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/async-content-browser-38fdd5eb808570f09a930-min.en-US.js.map