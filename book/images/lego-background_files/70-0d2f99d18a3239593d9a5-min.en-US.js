(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[70],{11661:function(e,t,r){"use strict";r.r(t);var n=r(464);r.d(t,"default",function(){return n["a"]})},12409:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=function e(n,i){return new Promise(function(e){var t=new Image;t.onerror=function(){return e({status:"error"})};t.onload=function(){return e({image:t,status:"ok"})};var r="jpg"===i?"jpeg":i;t.src="data:image/".concat(r,";base64, ").concat(n)})};var i=n;t.default=i},13521:function(e,t,r){"use strict";var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.importSquarespaceFilters=t.importContrastFilters=void 0;var i=n(r(13522));var o=n(r(13523));var s=i.default;t.importContrastFilters=s;var a=o.default;t.importSquarespaceFilters=a},13522:function(e,t,r){"use strict";var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r(12409));var o={};var s=function e(){var t=[r.e(449).then(r.t.bind(null,15543,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{contrastMax:t})})}),new Promise(function(e,t){r.e(450).then(r.t.bind(null,15544,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{contrastMin:t})})})})];o.loadPromise=Promise.all(t);return o};t.default=s},13523:function(e,t,r){"use strict";var n=r(4);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r(12409));var o={};var s=function e(){var t=[r.e(459).then(r.t.bind(null,15545,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{voyager:t})})}),r.e(447).then(r.t.bind(null,15546,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{apollo:t})})}),r.e(448).then(r.t.bind(null,15547,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{cassini:t})})}),r.e(455).then(r.t.bind(null,15548,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{gramercy:t})})}),r.e(452).then(r.t.bind(null,15549,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{denali:t})})}),r.e(456).then(r.t.bind(null,15550,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{niagara:t})})}),r.e(451).then(r.t.bind(null,15551,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{delavan:t})})}),r.e(453).then(r.t.bind(null,15552,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{facet:t})})}),r.e(454).then(r.t.bind(null,15553,7)).then(function(e){(0,i.default)(e.default,"png").then(function(e){var t=e.image;Object.assign(o,{frieze:t})})}),r.e(458).then(r.t.bind(null,15554,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{serengeti:t})})}),r.e(457).then(r.t.bind(null,15555,7)).then(function(e){(0,i.default)(e.default,"jpg").then(function(e){var t=e.image;Object.assign(o,{savannah:t})})})];o.loadPromise=Promise.all(t);return o};t.default=s},5586:function(o,e,s){(function e(t,r){var n,i;true;o.exports=r(s(1178),s(2749),s(11661),s(1436),s(13521),s(2574),s(2362),s(2719),s(730),s(698),s(565),s(1697),s(100),s(183),s(722),s(109),s(1),s(0))})(window,function(r,n,i,o,s,a,l,c,u,d,h,f,p,m,g,v,_,b){return function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,i);t.l=true;return t.exports}i.m=r;i.c=n;i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:true,get:r})};i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:true})};i.t=function(t,e){1&e&&(t=i(t));if(8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);i.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r};i.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};i.d(e,"a",e);return e};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s="./src/index.js")}({"../image-editor-core/dist/CropZone.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/utils/debugLog.js"));var f="rgba(255, 255, 255, 0.9)";var s="rgba(0, 0, 0, .6)";var c=5;var a=44;var l=4*-c;var u="#313131";var d=i.fabric.util.createClass(i.fabric.Rect,{type:"cropZone",initialize:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.callSuper("initialize",t);this.minWidth=t.minWidth;this.minHeight=t.minHeight;this.lockScalingFlip=true;this.stroke=u;this.strokeWidth=0;this.borderColor=u;this.cornerColor=u;this.cornerSize=a;this.padding=l},toObject:function e(){return i.fabric.util.object.extend(this.callSuper("toObject"),{style:this.get("style")})},_drawControl:function e(t,r,n,i,o){if(!this.isControlVisible(t))return;var s=this.cornerSize/2;this.transparentCorners&&r.clearRect(i,o,s,s);var a=i;var l=o;r.save();r.lineWidth=c;r.lineCap="round";r.beginPath();switch(t){case"tl":r.moveTo(a,l);r.lineTo(a+s,l);r.moveTo(a,l);r.lineTo(a,l+s);break;case"tr":a+=2*s;r.moveTo(a,l);r.lineTo(a-s,l);r.moveTo(a,l);r.lineTo(a,l+s);break;case"bl":l+=2*s;r.moveTo(a,l);r.lineTo(a+s,l);r.moveTo(a,l);r.lineTo(a,l-s);break;case"br":a+=2*s;l+=2*s;r.moveTo(a,l);r.lineTo(a-s,l);r.moveTo(a,l);r.lineTo(a,l-s);break;case"mt":a+=s;r.moveTo(a-s,l);r.lineTo(a+s,l);break;case"mb":l+=2*s;a+=s;r.moveTo(a-s,l);r.lineTo(a+s,l);break;case"mr":a+=2*s;l+=s;r.moveTo(a,l-s);r.lineTo(a,l+s);break;case"ml":l+=s;r.moveTo(a,l-s);r.lineTo(a,l+s);break;default:break}r.stroke();r.restore()},onDeselect:function e(){return this.hasControls},render:function e(t){this.callSuper("render",t);this.originalDimensions||(this.originalDimensions={left:this.left,top:this.top,width:this.width,height:this.height});var r=this.flipX?-1:1;var n=this.flipY?-1:1;var i=r/this.scaleX;var o=n/this.scaleY;t.scale(i,o);t.scale(this.scaleX,this.scaleY);this.renderZone(t);this.renderInnerOverlay(t);t.scale(1/i,1/o)},renderZone:function e(t){t.strokeStyle=s;this.renderBorders(t);this.isMoving&&this.renderGrid(t)},renderBorders:function e(t){var r=this.getScaledWidth();var n=this.getScaledHeight();t.beginPath();t.moveTo(this.left,this.top);t.lineTo(this.left+r,this.top);t.lineTo(this.left+r,this.top+n);t.lineTo(this.left,this.top+n);t.lineTo(this.left,this.top);t.stroke()},renderGrid:function e(t){var r=this.getScaledWidth();var n=this.getScaledHeight();t.beginPath();t.moveTo(this.left+1/3*r,this.top);t.lineTo(this.left+1/3*r,this.top+n);t.stroke();t.beginPath();t.moveTo(this.left+2/3*r,this.top);t.lineTo(this.left+2/3*r,this.top+n);t.stroke();t.beginPath();t.moveTo(this.left,this.top+1/3*n);t.lineTo(this.left+r,this.top+1/3*n);t.stroke();t.beginPath();t.moveTo(this.left,this.top+2/3*n);t.lineTo(this.left+r,this.top+2/3*n);t.stroke()},renderInnerOverlay:function e(t){var r=this.getScaledWidth();var n=this.getScaledHeight();var i=this.originalDimensions.left;var o=this.left;var s=this.left+r;var a=this.originalDimensions.left+this.originalDimensions.width;var l=this.originalDimensions.top;var c=this.top;var u=this.top+n;var d=this.originalDimensions.top+this.originalDimensions.height;t.fillStyle=f;if("undefined"===typeof Path2D){t.fillRect(i,l,a-i,c-l);t.fillRect(i,c,o-i,u-c);t.fillRect(s,c,a-s,u-c);t.fillRect(i,u,a-i,d-u)}else{var h=new Path2D;h.rect(i,l,a-i,d-l);h.rect(o,c,s-o,u-c);t.clip(h,"evenodd");t.fillRect(i,l,a-i,d-l)}false},setOriginalDimensions:function e(t){this.originalDimensions=t}});t.default=d},"../image-editor-core/dist/Filters/BaseLookupTableFilter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/Filters/lookuptable.frag.js"));var s=i.fabric.Image.filters;var a=i.fabric.util.object.extend;var l=i.fabric.util.createClass;var b=4096;var c=4096;s.BaseLookupTableFilter=l(s.BaseFilter,{type:"BaseLookupTableFilter",fragmentSource:o.default,lutCanvasContext:{},toObject:function e(){return a(this.callSuper("toObject"),{lutCanvasContext:this.lutCanvasContext})},initialize:function e(t){this.callSuper("initialize",t);var r=this.lutCanvasContext;this.lutData=r&&r.getImageData(0,0,b,c)},applyTo2d:function e(t){if(!this.lutData)return;var r=t.imageData,n=t.value;var i=Math.abs(n)/100;for(var o=0;o<r.data.length;o+=4){var s=r.data[o];var a=r.data[o+1];var l=r.data[o+2];var c=r.data[o+3];var u=s%16*256+l;var d=256*Math.floor(s/16)+a;var h=4*(d*b+u);var f=this.lutData.data[h];var p=this.lutData.data[h+1];var m=this.lutData.data[h+2];var g=s-f;var v=a-p;var _=l-m;r.data[o]=s-g*i;r.data[o+1]=a-v*i;r.data[o+2]=l-_*i;r.data[o+3]=c}},createTexture:function e(t,r,n){if(!r)return;return t.getCachedTexture(n,r.canvas)},getUniformLocations:function e(t,r){return{lutImage:t.getUniformLocation(r,"lutImage"),amount:t.getUniformLocation(r,"amount")}}});s.BaseLookupTableFilter.fromObject=s.BaseFilter.fromObject;var u=s.BaseLookupTableFilter;t.default=u},"../image-editor-core/dist/Filters/ContrastFilter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/Filters/BaseLookupTableFilter.js"));var s=i.fabric.Image.filters;var a=i.fabric.util.createClass;s.ContrastFilter=a(o.default,{type:"ContrastFilter",mainParameter:"contrast",applyTo:function e(t){t=Object.assign({},t,{value:this.contrast});this.callSuper("applyTo",t)},applyToWebGL:function e(t){var r=t.context;var n=this.createTexture(t.filterBackend,this.lutCanvasContext,this.type);this.bindAdditionalTexture(r,n,r.TEXTURE3);this.callSuper("applyToWebGL",t);this.unbindAdditionalTexture(r,r.TEXTURE3)},sendUniformData:function e(t,r){t.uniform1i(r.lutImage,3);t.uniform1f(r.amount,this.contrast/100)}});s.ContrastFilter.fromObject=o.default.fromObject;var l=s.ContrastFilter;t.default=l},"../image-editor-core/dist/Filters/HighlightsFilter/HighlightsFilter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/Filters/HighlightsFilter/highlights.frag"));var s=i.fabric.Image.filters;var a=i.fabric.util.createClass;var c=.005;s.HighlightsFilter=a(s.BaseFilter,{type:"HighlightsFilter",fragmentSource:o.default,highlights:0,mainParameter:"highlights",colorsOnly:true,transformImageData:function e(t,r){for(var n=0;n<t.data.length;n+=4){var i=t.data[n];var o=t.data[n+1];var s=t.data[n+2];var a=(i+o+s)/3;var l=1+r*c*a/255;t.data[n]=i*l<256?i*l:255;t.data[n+1]=o*l<256?o*l:255;t.data[n+2]=s*l<256?s*l:255}return t},applyTo2d:function e(t){var r=t.imageData;var n=this.highlights;this.transformImageData(r,n)},getUniformLocations:function e(t,r){return{uHighlights:t.getUniformLocation(r,"uHighlights"),uFactor:t.getUniformLocation(r,"uFactor")}},sendUniformData:function e(t,r){t.uniform1f(r.uHighlights,this.highlights);t.uniform1f(r.uFactor,c)}});s.HighlightsFilter.fromObject=s.BaseFilter.fromObject;var l=s.HighlightsFilter;t.default=l},"../image-editor-core/dist/Filters/HighlightsFilter/highlights.frag":function(e,t){e.exports='// Implementation of the "highlights" adjustment\n// IMPORTANT\n// DO NOT EDIT THIS CODE WIHOUT EDITING "applyTo2d" IN HighlightsFilter\n// IMPORTANT\n\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\n\n// Passed in from javascript\n// Intensity variable\nuniform float uHighlights;\n// Arbitrary factor\nuniform float uFactor;\n\nvoid main() {\n  // Grab the colors vector (r, g, b)\n  vec4 ogColor = texture2D(uTexture, vTexCoord);\n  vec3 color = ogColor.rgb;\n  // Calculate the relative luminance.\n  float brightness = (color.r + color.g + color.b) / 3.0;\n  // Define the multiplier with intensity\n  float multiplier = 1.0 + (uHighlights * uFactor * brightness);\n  // Apply the multiplier to all colors.\n  color *= multiplier;\n  // Return a 4-component vector, always. (alpha=1)\n  gl_FragColor = vec4(color, ogColor.a);\n}'},"../image-editor-core/dist/Filters/HighlightsFilter/index.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("../image-editor-core/dist/Filters/HighlightsFilter/HighlightsFilter.js"));var o=i.default;t.default=o},"../image-editor-core/dist/Filters/ShadowsFilter/ShadowsFilter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/Filters/ShadowsFilter/shadows.frag"));var s=i.fabric.Image.filters;var a=i.fabric.util.createClass;var u=.005;s.ShadowsFilter=a(s.BaseFilter,{type:"ShadowsFilter",fragmentSource:o.default,shadows:0,mainParameter:"shadows",colorsOnly:true,transformImageData:function e(t,r){for(var n=0;n<t.data.length;n+=4){var i=t.data[n];var o=t.data[n+1];var s=t.data[n+2];var a=(i+o+s)/3;var l=255-a;var c=1+r*u*l/255;t.data[n]=i*c<256?i*c:255;t.data[n+1]=o*c<256?o*c:255;t.data[n+2]=s*c<256?s*c:255}return t},applyTo2d:function e(t){var r=t.imageData;var n=this.shadows;this.transformImageData(r,n)},getUniformLocations:function e(t,r){return{uShadows:t.getUniformLocation(r,"uShadows"),uFactor:t.getUniformLocation(r,"uFactor")}},sendUniformData:function e(t,r){t.uniform1f(r.uShadows,this.shadows);t.uniform1f(r.uFactor,u)}});s.ShadowsFilter.fromObject=s.BaseFilter.fromObject;var l=s.ShadowsFilter;t.default=l},"../image-editor-core/dist/Filters/ShadowsFilter/index.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("../image-editor-core/dist/Filters/ShadowsFilter/ShadowsFilter.js"));var o=i.default;t.default=o},"../image-editor-core/dist/Filters/ShadowsFilter/shadows.frag":function(e,t){e.exports='\n// Implementation of the "shadows" adjustment\n// IMPORTANT\n// DO NOT EDIT THIS CODE WIHOUT EDITING "applyTo2d" IN ShadowsFilter\n// IMPORTANT\n\nprecision highp float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\n\n// Passed in from javascript\n// Intensity variable\nuniform float uShadows;\n// Arbitrary factor\nuniform float uFactor;\n\nvoid main() {\n  // Grab the colors vector (r, g, b)\n    // Grab the colors vector (r, g, b)\n  vec4 ogColor = texture2D(uTexture, vTexCoord);\n  vec3 color = ogColor.rgb;\n  // Calculate the relative luminance.\n  float brightness = (color.r + color.g + color.b) / 3.0;\n  // For shadows, we want to alter the darker pixels more, so invert here\n  float darkness = 1.0 - brightness;\n  // Define the multiplier with intensity\n  float multiplier = 1.0 + (uShadows * uFactor * darkness);\n  // Apply the multiplier to all colors.\n  color *= multiplier;\n  // Return a 4-component vector, always. (alpha=1)\n  gl_FragColor = vec4(color, ogColor.a);\n}'},"../image-editor-core/dist/Filters/SquarespaceFilter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r("../image-editor-fabric/fabric.js");var o=n(r("../image-editor-core/dist/Filters/BaseLookupTableFilter.js"));var s=i.fabric.Image.filters;var a=i.fabric.util.object.extend;var l=i.fabric.util.createClass;s.SquarespaceFilter=l(o.default,{type:"SquarespaceFilter",mainParameter:"squarespaceFilter",squarespaceFilter:"",value:100,toObject:function e(){return a(this.callSuper("toObject"),{squarespaceFilter:this.squarespaceFilter,value:this.value})},applyTo2d:function e(t){var r=this.value;var n=this.squarespaceFilter;t=Object.assign({},t,{value:r,squarespaceFilter:n});this.callSuper("applyTo2d",t)},applyToWebGL:function e(t){var r=this.value;var n=this.squarespaceFilter;t=Object.assign({},t,{value:r,squarespaceFilter:n});var i=t.context;var o=this.createTexture(t.filterBackend,this.lutCanvasContext,this.type+"_"+n);this.bindAdditionalTexture(i,o,i.TEXTURE2);this.callSuper("applyToWebGL",t);this.unbindAdditionalTexture(i,i.TEXTURE2)},sendUniformData:function e(t,r){t.uniform1i(r.lutImage,2);t.uniform1f(r.amount,this.value/100)}});s.SquarespaceFilter.fromObject=o.default.fromObject;var c=s.SquarespaceFilter;t.default=c},"../image-editor-core/dist/Filters/lookuptable.frag.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n="precision highp float;\n#define GLSLIFY 1\n#define size 4096.0\n#define clipSize 16.0\nuniform float amount;\nuniform sampler2D uTexture;\nuniform sampler2D lutImage;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  vec4 textureColor = texture2D(uTexture, vTexCoord);\n  textureColor = clamp(textureColor, 0.0, 1.0);\n\n  float redColor = textureColor.r * (clipSize*clipSize-1.0);\n  vec2 quad1;\n  quad1.y = floor(floor(redColor) / clipSize);\n  quad1.x = floor(redColor) - (quad1.y * clipSize);\n  vec2 quad2;\n  quad2.y = floor(ceil(redColor) / clipSize);\n  quad2.x = ceil(redColor) - (quad2.y * clipSize);\n  vec2 texPos1;\n  texPos1.x = (quad1.x * 1.0/clipSize) + 0.5/size + ((1.0/clipSize - 1.0/size) * textureColor.b);\n  texPos1.y = (quad1.y * 1.0/clipSize) + 0.5/size + ((1.0/clipSize - 1.0/size) * textureColor.g);\n\n  vec2 texPos2;\n  texPos2.x = (quad2.x *1.0/clipSize) + 0.5/size + ((1.0/clipSize - 1.0/size) * textureColor.b);\n  texPos2.y = (quad2.y * 1.0/clipSize) + 0.5/size + ((1.0/clipSize - 1.0/size) * textureColor.g);\n\n  vec4 newColor1 = texture2D(lutImage, texPos1);\n  vec4 newColor2 = texture2D(lutImage, texPos2);\n  vec4 newMixedColor = mix(newColor1, newColor2, fract(redColor));\n\n  gl_FragColor = vec4(mix(textureColor.rgb, newMixedColor.rgb, amount), textureColor.a);\n}";t.default=n},"../image-editor-core/dist/ImageEditor.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var h=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/objectSpread.js"));var c=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var u=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/createClass.js"));var d=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=r("../image-editor-fabric/fabric.js");var p=r("../image-editor-core/node_modules/@sqs/styles/variables/baseRosetta.js");var m=n(r("../image-editor-core/dist/brightness.js"));var g=n(r("../image-editor-core/dist/flip.js"));var v=n(r("../image-editor-core/dist/saturation.js"));var _=n(r("../image-editor-core/dist/contrast.js"));var o=n(r("../image-editor-core/dist/filter.js"));var b=n(r("../image-editor-core/dist/rotate.js"));var y=n(r("../image-editor-core/dist/sharpness.js"));var j=n(r("../image-editor-core/dist/blur.js"));var C=n(r("../image-editor-core/dist/highlights.js"));var w=n(r("../image-editor-core/dist/shadows.js"));var x=n(r("../image-editor-data-model/FlipAxis.js"));var E=n(r("../image-editor-core/dist/constants/EditorMode.js"));var A=n(r("../image-editor-data-model/EditorStateKey.js"));var s=n(r("../image-editor-core/dist/CropZone.js"));var O=n(r("../image-editor-core/dist/utils/getScalingTransformation.js"));var S=r("../image-editor-core/dist/utils/scale.js");var T=r("@sqs/image-editor-filters");var I=r("../image-editor-core/dist/utils/convertDimensions.js");var k=n(r("../image-editor-core/dist/utils/clampInnerRectWithinOuterRect.js"));var P=n(r("../image-editor-utils/isOriginalOrientation.js"));var R=n(r("../image-editor-core/dist/utils/flipInnerRect.js"));var F=n(r("../image-editor-core/dist/utils/rotateInnerRect.js"));var a=n(r("../image-editor-core/dist/utils/debugLog.js"));var D=n(r("lodash/isEqual"));var L=n(r("lodash/pick"));var M=n(r("lodash/cloneDeep"));var B=n(r("../image-editor-core/dist/utils/toDataURL.js"));var N=n(r("../image-editor-utils/getStraightenAmount.js"));var U=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var X={centeredRotation:true,selectable:false,evented:false,lockMovementX:true,lockMovementY:true,lockRotation:true,lockScalingX:true,lockScalingY:true,lockUniScaling:true,hasControls:false,hasBorders:false};var G=4096;var H=4096;var z;var Y;var W;var V;var q;var l=function(){function l(e,t){var a=this,r;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,u.default)(this,l);(0,d.default)(this,"createLutCanvas",function(e){var t=document.createDocumentFragment();var r=document.createElement("canvas");r.setAttribute("id",e);r.setAttribute("width",G);r.setAttribute("height",H);r.style.display="none";t.appendChild(r);a.canvasElement.parentNode.appendChild(t);return document.getElementById(e).getContext("2d",{alpha:false})});(0,d.default)(this,"handleObjectScaling",function(e){if(!a.isCropping()&&a.cropZone!==e.target)return;var t=(0,O.default)(a.cropZone,a.clipPath,e.transform),r=t.originX,n=t.originY,i=t.x,o=t.y,s=(0,c.default)(t,["originX","originY","x","y"]);a.cropZone.set(s);a.cropZone.setPositionByOrigin({x:i,y:o},r,n)});(0,d.default)(this,"handleObjectMoving",function(e){if(!a.isCropping()&&a.cropZone!==e.target)return;a.renderCropZone((0,k.default)(a.cropZone,a.clipPath))});(0,d.default)(this,"handleObjectMouseDown",function(e){var t=a.canvas.getPointer(e.e),r=t.x,n=t.y;a.currentPointerPosition={x:r,y:n}});(0,d.default)(this,"handleObjectMouseUp",function(e){var t=a.canvas.getPointer(e.e);var r=t.x!==a.currentPointerPosition.x||t.y!==a.currentPointerPosition.y;e.target===a.cropZone&&r&&a.handleCropChange({left:a.cropZone.left,top:a.cropZone.top,width:a.cropZone.getScaledWidth(),height:a.cropZone.getScaledHeight()})});(0,d.default)(this,"handleCropChange",function(e){var t=a.image.getCenterPoint();var r=1/a.scaleFactors.get();var n=(0,I.scaledToOriginal)(e,t,r);a.options.onCropChange(n);a.cropZone.setCoords()});(0,d.default)(this,"applyChanges",function(e){var t=e.cropConfig,r=e.cropDimensions;var n=!!t&&t.isRatioLocked;var i=r||a.getInitialCropDimensions();a.applyCropZone(i,n);a.applyTransformations(e);a.state=(0,M.default)(e);a.updateCropZone();a.refresh()});(0,d.default)(this,"TRANSFORMATIONS",(r={},(0,d.default)(r,A.default.BRIGHTNESS,function(e){(0,m.default)(a.image,e)}),(0,d.default)(r,A.default.FLIP,function(e){(0,g.default)(a.image,e)}),(0,d.default)(r,A.default.SATURATION,function(e){(0,v.default)(a.image,e)}),(0,d.default)(r,A.default.CONTRAST,function(e){var t;var r=a.state[A.default.CONTRAST];if(e===r||"undefined"===typeof r&&0===e)return;if(e>=0){if(!a.lutDataMax){if(!a.contrastLookupTables.contrastMax){a.reapplyContrastFilter=true;return}a.lutContrastMax.drawImage(a.contrastLookupTables.contrastMax,0,0,G,H);a.lutDataMax=a.lutContrastMax.getImageData(0,0,G,H);a.lutImageMax=a.lutContrastMax}t=a.lutImageMax}else{if(!a.lutDataMin){if(!a.contrastLookupTables.contrastMin){a.reapplyContrastFilter=true;return}a.lutContrastMin.drawImage(a.contrastLookupTables.contrastMin,0,0,G,H);a.lutDataMin=a.lutContrastMin.getImageData(0,0,G,H)}t=a.lutImageMax}(0,_.default)(a.image,e,t)}),(0,d.default)(r,A.default.FILTER,function(e){var t=e.type,r=e.intensity;if(!t)return;if(!z){q=true;return}z[t]?l.filterImage(a.image,t,r).then():a.removeFilter()}),(0,d.default)(r,A.default.ROTATION,function(e){if(!a.isCropping())return;(0,b.default)(a.image,e);a.scaleFactors.rotation=(0,S.scaleRotatedRectangle)(e,a.image.height,a.image.width);a.state.rotation=e;var t=a.image.width;var r=a.image.height;if(!(0,P.default)(e)){t=a.image.height*a.scaleFactors.rotation;r=a.image.width*a.scaleFactors.rotation}a.updateClipPath(t,r);a.updateImage();a.image.center()}),(0,d.default)(r,A.default.SHARPNESS,function(e){(0,y.default)(a.image,e)}),(0,d.default)(r,A.default.BLUR,function(e){(0,j.default)(a.image,e)}),(0,d.default)(r,A.default.HIGHLIGHTS,function(e){(0,C.default)(a.image,e)}),(0,d.default)(r,A.default.SHADOWS,function(e){(0,w.default)(a.image,e)}),r));if(!e)throw new Error("ImageEditor: Requires a canvas element or a selector to create a new instance.");if(!t)throw new Error("ImageEditor: Requires an image element or a selector to create a new instance.");"string"===typeof e&&(e=document.querySelector(e));"string"===typeof t&&(t=document.querySelector(t));this.options=n;f.fabric.webGlPrecision="mediump";f.fabric.DPI=n.DPI||96;this.options.hasCanvasPadding=false!==n.hasCanvasPadding;this.canvasPadding=this.options.hasCanvasPadding?p.GRID_SIZE_PX:0;this.canvasElement=e;this.canvas=new f.fabric.Canvas(this.canvasElement,{selectable:false,backgroundColor:"transparent"});this.canvas.selection=false;this.imageElement=t;this.image=new f.fabric.Image(this.imageElement,X);this.thumbnailImage=new f.fabric.Image(this.imageElement,X);var i=136/this.thumbnailImage.width;var o=136/this.thumbnailImage.height;var s=Math.max(i,o);this.thumbnailImage.scaleX=s;this.thumbnailImage.scaleY=s;f.fabric.textureSize=this.image.width>this.image.height?this.image.width:this.image.height;this.setFilterBackend(void 0===this.options.webglEnabled||this.options.webglEnabled);this.state=this.options.initialState||{};this.scaleFactors={rotation:1,croppedFit:null,uncroppedFit:1,get:function e(){if(a.image.width>f.fabric.textureSize)return f.fabric.textureSize/a.image.width;if(a.isCropping()||!a.scaleFactors.croppedFit)return a.scaleFactors.uncroppedFit*a.scaleFactors.rotation;return a.scaleFactors.croppedFit},getScaledWidth:function e(){return a.scaleFactors.get()*a.image.width},getScaledHeight:function e(){return a.scaleFactors.get()*a.image.height},recalculateFit:function e(t){var r=a.image,n=r.width,i=r.height;var o=(0,P.default)(t)?{width:n,height:i}:{width:i,height:n};a.scaleFactors.uncroppedFit=(0,S.scaleToFit)(o,a.clipPath);a.state.cropDimensions&&(a.scaleFactors.croppedFit=(0,S.scaleToFit)(a.state.cropDimensions,a.clipPath))}};this.canvas.add(this.image);setTimeout(function(){a.updateClipPath();a.updateImage();a.refresh()},0);this.clipPath=this.createClipPath({left:this.image.left,top:this.image.top,width:this.image.width,height:this.image.height});this.transformations=[];this.mode=E.default.STANDARD;this.canvas.on("object:scaling",this.handleObjectScaling);this.canvas.on("object:moving",this.handleObjectMoving);this.canvas.on("mouse:down",this.handleObjectMouseDown);this.canvas.on("mouse:up",this.handleObjectMouseUp);V=void 0;q=false;this.contrastLookupTables=(0,T.importContrastFilters)();this.contrastLookupTables.loadPromise.then(function(){if(a.reapplyContrastFilter){a.reapplyContrastFilter=false;a.applyTransformations(a.state)}});z=(0,T.importSquarespaceFilters)();z.loadPromise.then(function(){if(q){q=false;a.applyTransformations(a.state)}});Y=this.createLutCanvas("filterLutCanvas");W=this.createLutCanvas("filterThumbnailLutCanvas");this.lutContrastMax=this.createLutCanvas("contrastMaxLutCanvas");this.lutContrastMin=this.createLutCanvas("contrastMinLutCanvas");false}(0,i.default)(l,[{key:"removeFilter",value:function e(){if(void 0===V)return;this.image.filters.splice(V,1)}},{key:"applyTransformations",value:function e(t){var r=this;Object.keys(this.TRANSFORMATIONS).forEach(function(e){r.TRANSFORMATIONS[e](t[e])});this.image.applyFilters();this.refresh()}},{key:"refresh",value:function e(){var t=!this.isCropping()&&this.state.cropDimensions;var r=this.canvas.getCenter();var n=this.clipPath.getCenterPoint();var i=this.image.getCenterPoint();var o=r.left-i.x;var s=r.top-i.y;var a=t?new f.fabric.Point(n.x-this.scaleFactors.get()*this.state.cropDimensions.centerOffsetFromImageX,n.y-this.scaleFactors.get()*this.state.cropDimensions.centerOffsetFromImageY):new f.fabric.Point(i.x+o,i.y+s);this.image.setPositionByOrigin(a,"center","center");this.image.setCoords();this.canvas.renderAll();false}},{key:"resizeCanvas",value:function e(t){this.canvas.setDimensions(t);this.updateClipPath();this.updateImage();this.refresh();this.updateImage();this.updateCropZone();this.refresh()}},{key:"updateImage",value:function e(){this.scaleFactors.recalculateFit(this.state.rotation);this.image.scale(this.scaleFactors.get());this.image.setCoords()}},{key:"renderCropZone",value:function e(t){if(!t){console.error("renderCropZone: The cropzone needs dimensions passed to be rendered.");return}this.cropZone||(this.cropZone=new s.default((0,h.default)({fill:"transparent",hasBorders:false,originX:"left",originY:"top",transparentCorners:false,lockRotation:true,hasRotatingPoint:false,eventable:true},t)));if(!this.canvas.contains(this.cropZone)){this.canvas.add(this.cropZone);this.canvas.setActiveObject(this.cropZone)}this.cropZone.set({scaleX:1,scaleY:1,hasControls:true});this.cropZone.set(t);this.cropZone.setCoords()}},{key:"createClipPath",value:function e(t){var r=new f.fabric.Rect((0,h.default)({absolutePositioned:true,strokeWidth:0},t));this.image.clipPath=r;return r}},{key:"updateClipPath",value:function e(t,r){var n=this.clipPath,i=n.width,o=n.height,s=n.left,a=n.top;if("number"===typeof t&&"number"===typeof r){this.clipPath.set("width",t);this.clipPath.set("height",r)}if(this.canvas.width&&this.canvas.height){var l=(0,S.scaleToFit)(this.clipPath,this.canvas,this.canvasPadding);this.clipPath.set("height",this.clipPath.height*l);this.clipPath.set("width",this.clipPath.width*l)}this.clipPath.center();this.clipPath.setCoords();var c=this.clipPath,u=c.width,d=c.height,h=c.left,f=c.top;if(u===i&&d===o&&h===s&&f===a)return;this.isCropping()&&this.cropZone.setOriginalDimensions(this.clipPath)}},{key:"updateCropZone",value:function e(){if(this.isCropping()){var t=(0,L.default)(this.cropZone,["top","left","width","height"]);var r=this.image.getCenterPoint();var n=this.scaleFactors.get();var i=this.state.cropDimensions||this.getInitialCropDimensions();var o=(0,I.originalToScaled)(i,r,n);(0,D.default)(t,o)||this.renderCropZone(o)}}},{key:"toggleCropMode",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mode!==E.default.CROP;t?this.enableCropMode():this.disableCropMode()}},{key:"enableCropMode",value:function e(){this.mode=E.default.CROP;this.canvas.uniScaleTransform=true;var t=this.image.getCenterPoint();var r=this.scaleFactors.get();var n=this.state.cropDimensions||this.getInitialCropDimensions();var i=(0,I.originalToScaled)(n,t,r);this.renderCropZone(i)}},{key:"disableCropMode",value:function e(){if(this.isCropping()){this.updateClipPath(this.cropZone.getScaledWidth(),this.cropZone.getScaledHeight());this.mode=E.default.STANDARD}this.canvas.uniScaleTransform=false;this.hideCropZone();this.updateImage()}},{key:"hideCropZone",value:function e(){if(!this.cropZone)return;this.canvas.discardActiveObject();this.cropZone.set({hasControls:false});this.canvas.remove(this.cropZone);this.canvas.defaultCursor="default"}},{key:"isCropping",value:function e(){return this.mode===E.default.CROP}},{key:"applyCropZone",value:function e(t,r){this.state.cropDimensions=t;if(!this.isCropping())return;this.cropZone.lockUniScaling=r;var n=this.image.getCenterPoint();var i=this.scaleFactors.get();var o=(0,I.originalToScaled)(t,n,i);this.renderCropZone((0,k.default)(o,this.clipPath))}},{key:"getInitialCropDimensions",value:function e(){var t=this.image.getOriginalSize();return(0,h.default)({},t,{centerOffsetFromImageY:0,centerOffsetFromImageX:0})}},{key:"transformStateForRatio",value:function e(t){var r=t.cropConfig.ratio;var n=this.clipPath.getScaledWidth()/this.clipPath.getScaledHeight();var i;var o;if(!r||window.isNaN(r)){i=this.clipPath.getScaledWidth();o=this.clipPath.getScaledHeight()}else if(n<r){i=this.clipPath.getScaledWidth();o=i/r}else{o=this.clipPath.getScaledHeight();i=o*r}var s=this.clipPath.left+(this.clipPath.width-i)/2;var a=this.clipPath.top+(this.clipPath.height-o)/2;var l=this.image.getCenterPoint();var c=1/this.scaleFactors.get();var u=(0,I.scaledToOriginal)({left:s,top:a,width:i,height:o},l,c);return{cropDimensions:u}}},{key:"transformStateForRotation",value:function e(t){var r=t.rotation;var n=this.image,i=n.width,o=n.height;var s=!(0,P.default)(this.state.rotation);var a=!(0,P.default)(r);var l=this.canvas.getCenter(),c=l.top,u=l.left;var d={x:u,y:c};var h=a?{width:o,height:i}:{width:i,height:o};var f=(0,S.scaleToFit)(h,this.canvas,this.canvasPadding);var p=(0,S.scaleRotatedRectangle)(r,this.image.height,this.image.width);var m={width:h.width*f,height:h.height*f,getCenterPoint:function e(){return d}};var g=this.image.getCenterPoint();if(a!==s){var v=f/this.scaleFactors.uncroppedFit;var _=r-this.state.rotation;var b=(0,F.default)(this.cropZone,m,v,_>0);return{cropDimensions:(0,I.scaledToOriginal)(b,g,1/(f*p))}}return{cropDimensions:(0,I.scaledToOriginal)(this.cropZone,g,1/(f*p))}}},{key:"transformStateForFlip",value:function e(t){var r=t.flip||{x:false,y:false},n=r.x,i=r.y;var o=this.state.rotation||0;var s=!(0,P.default)(o);var a=this.state.flip||{x:false,y:false},l=a.x,c=a.y;var u=this.image.getCenterPoint();var d=1/this.scaleFactors.get();var h=(0,N.default)(o);var f=o-2*h;if(l!==n){var p=s?x.default.VERTICAL:x.default.HORIZONTAL;var m=(0,R.default)(this.cropZone,this.clipPath,p);return{cropDimensions:(0,I.scaledToOriginal)(m,u,d),rotation:f}}if(c!==i){var g=s?x.default.HORIZONTAL:x.default.VERTICAL;var v=(0,R.default)(this.cropZone,this.clipPath,g);return{cropDimensions:(0,I.scaledToOriginal)(v,u,d),rotation:f}}}},{key:"export",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.isCropping()?this.cropZone:this.clipPath;r.setCoords();this.image.setCoords();var n=r.getPointByOrigin("left","top"),i=n.x,o=n.y;var s=this.image.getBoundingRect(),a=s.left,l=s.top;false;var c=i-a;var u=o-l;this.image.clipPath=null;var d=(0,B.default)(this.image,(0,h.default)({format:"jpeg",quality:.94,multiplier:1/this.scaleFactors.get(),withoutTransform:false,withoutShadow:true,left:c,top:u,width:r.getScaledWidth(),height:r.getScaledHeight()},t));this.image.clipPath=this.clipPath;this.canvas.renderAll();return d}},{key:"getThumbnailObject",value:function e(){return this.thumbnailImage.toObject()}},{key:"getImageObject",value:function e(){return this.image.toObject()}},{key:"setFilterBackend",value:function e(t){var r=t&&f.fabric.enableGLFiltering&&f.fabric.isWebglSupported&&f.fabric.isWebglSupported(f.fabric.textureSize);f.fabric.filterBackend=r?new f.fabric.WebglFilterBackend({tileSize:f.fabric.textureSize}):new f.fabric.Canvas2dFilterBackend;false}}],[{key:"filterThumbnailImage",value:function e(r,n,i){return new Promise(function(e,t){if(!n){console.error("ImageEditor.filterThumbnailImage: No filter name provided");t();return}if(!z){console.error("ImageEditor.filterThumbnailImage: Squarespace Filter lookup tables not loaded.");t();return}z.loadPromise.then(function(){W.drawImage(z[n],0,0,G,H);(0,o.default)(r,W,n,i);e(r)},t)})}},{key:"filterImage",value:function e(r,n,i){return new Promise(function(e,t){if(!n){console.error("ImageEditor.filterImage: No filter name provided");t();return}if(!z){console.error("ImageEditor.filterThumbnailImage: Squarespace Filter lookup tables not loaded.");t();return}z.loadPromise.then(function(){Y.drawImage(z[n],0,0,G,H);(0,o.default)(r,Y,n,i);V=(0,U.default)(r.filters,A.default.FILTER);e(r)},t)})}},{key:"getImageDataFromImageObject",value:function e(r){return new Promise(function(t){f.fabric.Image.fromObject(r,function(e){t(e.toDataURL())})})}}]);return l}();var Z=l;t.default=Z},"../image-editor-core/dist/blur.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=r("../image-editor-fabric/fabric.js");var s=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var i=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r/=100;var n=(0,s.default)(t.filters,"blur");if(null===n){if(0===r)return;var i=new o.fabric.Image.filters.Blur({blur:r});t.filters.unshift(i);return}t.filters[n].blur=r};t.default=i},"../image-editor-core/dist/brightness.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=r("../image-editor-fabric/fabric.js");var s=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var a=.2;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.fabric.Image;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=t*a/100;var n=(0,s.default)(e.filters,"brightness");if(null===n){if(0===t)return;var i=new o.fabric.Image.filters.Brightness({brightness:r});e.filters.unshift(i);return}e.filters[n].brightness=r}},"../image-editor-core/dist/constants/EditorMode.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n={STANDARD:"standard",CROP:"crop"};t.default=n},"../image-editor-core/dist/contrast.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=r("../image-editor-fabric/fabric.js");var s=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var a=n(r("../image-editor-core/dist/Filters/ContrastFilter.js"));function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.fabric.Image;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=arguments.length>2?arguments[2]:void 0;var n=(0,s.default)(e.filters,"contrast");if(null===n){if(0===t)return;var i=new a.default({contrast:t,lutCanvasContext:r});e.filters.push(i);return}e.filters[n].contrast=t;e.filters[n].lutCanvasContext=r}},"../image-editor-core/dist/filter.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var s=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var a=n(r("../image-editor-core/dist/Filters/SquarespaceFilter.js"));function i(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;var i=(0,s.default)(e.filters,"squarespaceFilter");if(null===i){var o=new a.default({squarespaceFilter:r,lutCanvasContext:t,value:n});e.filters.unshift(o);return}e.filters[i].squarespaceFilter=r;e.filters[i].lutCanvasContext=t;e.filters[i].value=n}},"../image-editor-core/dist/flip.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=r("../image-editor-fabric/fabric.js");var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.fabric.Image;var r=arguments.length>1?arguments[1]:void 0,n=r.x,i=r.y;t.set("flipX",n);t.set("flipY",i)};t.default=n},"../image-editor-core/dist/highlights.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var i=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var o=n(r("../image-editor-core/dist/Filters/HighlightsFilter/index.js"));function s(e,t){var r=(0,i.default)(e.filters,"highlights");if(null===r){if(!t||0===t)return;var n=new o.default({highlights:t});e.filters.unshift(n);return}e.filters[r].highlights=t}},"../image-editor-core/dist/index.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=n(r("../image-editor-core/dist/ImageEditor.js"));var o=i.default;t.default=o},"../image-editor-core/dist/rotate.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var n=r("../image-editor-fabric/fabric.js");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.fabric.Image;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=arguments.length>2?arguments[2]:void 0;e.rotate(t)}},"../image-editor-core/dist/saturation.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=r("../image-editor-fabric/fabric.js");var s=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var a=.8;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.fabric.Image;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=t>0?t*a/100:t/100;var n=(0,s.default)(e.filters,"saturation");if(null===n){if(0===t)return;var i=new o.fabric.Image.filters.Saturation({saturation:r});e.filters.unshift(i);return}e.filters[n].saturation=r}},"../image-editor-core/dist/shadows.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var i=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var o=n(r("../image-editor-core/dist/Filters/ShadowsFilter/index.js"));function s(e,t){var r=(0,i.default)(e.filters,"shadows");if(null===r){if(!t||0===t)return;var n=new o.default({shadows:t});e.filters.unshift(n);return}e.filters[r].shadows=t}},"../image-editor-core/dist/sharpness.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=r("../image-editor-fabric/fabric.js");var c=n(r("../image-editor-core/dist/utils/checkEnhancement.js"));var u=-1;var i=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r/=100;var n=u*r;var i=1-4*n;var o=[0,n,0,n,i,n,0,n,0];var s=(0,c.default)(t.filters,"matrix");if(null===s){if(0===r)return;var a=new l.fabric.Image.filters.Convolute({matrix:o});t.filters.unshift(a);return}t.filters[s].matrix=o};t.default=i},"../image-editor-core/dist/utils/checkEnhancement.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=function e(t,r){var n=null;t.forEach(function(e,t){if(r in e){n=t;return false}});return n};t.default=n},"../image-editor-core/dist/utils/clamp.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;function n(e,t,r){return Math.min(Math.max(e,t),r)}},"../image-editor-core/dist/utils/clampInnerRectWithinOuterRect.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var j=n(r("../image-editor-core/dist/utils/clamp.js"));var C=n(r("../image-editor-core/dist/utils/getObjectBoundaries.js"));var i=function e(t,r){var n=(0,C.default)(r),i=n.left,o=n.top,s=n.right,a=n.bottom,l=n.width,c=n.height;var u=(0,C.default)(t),d=u.left,h=u.top,f=u.width,p=u.height;var m=Math.min(f,l);var g=Math.min(p,c);var v=i;var _=o;var b=s-m;var y=a-g;return{left:(0,j.default)(d,v,b),top:(0,j.default)(h,_,y),width:m,height:g}};t.default=i},"../image-editor-core/dist/utils/convertDegreesToRadians.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;function n(e){return e*Math.PI/180}},"../image-editor-core/dist/utils/convertDimensions.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.originalToScaled=t.scaledToOriginal=void 0;var n=function e(t,r,n){var i=t.left+t.width/2;var o=t.top+t.height/2;return{centerOffsetFromImageX:(i-r.x)*n,centerOffsetFromImageY:(o-r.y)*n,width:t.width*n,height:t.height*n}};t.scaledToOriginal=n;var i=function e(t,r,n){return{left:r.x-(t.width/2-t.centerOffsetFromImageX)*n,top:r.y-(t.height/2-t.centerOffsetFromImageY)*n,width:t.width*n,height:t.height*n}};t.originalToScaled=i},"../image-editor-core/dist/utils/debugLog.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var s=n(r("../image-editor-core/node_modules/@babel/runtime/helpers/toArray.js"));function i(e,t){console.debug("%c".concat(e," (").concat(performance.now(),")"),"font-weight: bold");t.forEach(function(e){var t;var r=(0,s.default)(e),n=r[0],i=r.slice(1);(t=console).debug.apply(t,[" ".concat(n)].concat((0,o.default)(i)))})}},"../image-editor-core/dist/utils/flipInnerRect.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=n(r("../image-editor-data-model/FlipAxis.js"));var i=function e(t,r,n){var i=t.getCenterPoint();var o=r.getCenterPoint();var s=o.x-i.x;var a=o.y-i.y;var l=n===u.default.HORIZONTAL?o.x+s:i.x;var c=n===u.default.VERTICAL?o.y+a:i.y;return{left:l-t.width/2,top:c-t.height/2,width:t.width,height:t.height}};t.default=i},"../image-editor-core/dist/utils/getLengthWidthFromDimensions.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;function n(e,t){return e>t?{length:e,width:t}:{length:t,width:e}}},"../image-editor-core/dist/utils/getObjectBoundaries.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=r("../image-editor-fabric/fabric.js");var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.fabric.Object;var r=t.getScaledWidth?t.getScaledWidth():t.width;var n=t.getScaledHeight?t.getScaledHeight():t.height;var i=t.left;var o=t.top;var s=t.left+r;var a=t.top+n;return{left:i,top:o,right:s,bottom:a,width:r,height:n}};var i=n;t.default=i},"../image-editor-core/dist/utils/getScalingTransformation.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var A=r("../image-editor-fabric/fabric.js");var O=n(r("../image-editor-core/dist/CropZone.js"));var S=n(r("../image-editor-core/dist/utils/getObjectBoundaries.js"));var T=n(r("../image-editor-core/dist/utils/clamp.js"));var I=100;var k=100;var i={br:{originX:"left",originY:"top"},bl:{originX:"right",originY:"top"},tl:{originX:"right",originY:"bottom"},tr:{originX:"left",originY:"bottom"},mt:{originX:"left",originY:"bottom"},mb:{originX:"left",originY:"top"},ml:{originX:"right",originY:"top"},mr:{originX:"left",originY:"top"}};var P=function e(t){return i.hasOwnProperty(t)?i[t]:{}};var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new O.default;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.fabric.Object;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i=(0,S.default)(t),o=i.left,s=i.top,a=i.right,l=i.bottom;var c=(0,S.default)(r),u=c.left,d=c.top,h=c.right,f=c.bottom;var p={};var m=n.currentAction,g=n.corner;var v=null;var _=null;a>h?v=(h-o)/t.width:o<u&&(v=(a-u)/t.width);l>f?_=(f-s)/t.height:s<d&&(_=(l-d)/t.height);var b=t.width*n.newScaleX;var y=t.height*n.newScaleY;b<y&&b<I?v=I/t.width:b>=y&&y<k&&(_=k/t.height);if("scaleEqually"===m&&(v||_)){var j=_&&v?Math.min(v,_):v||_;p.scaleX=j;p.scaleY=j}else{v&&(p.scaleX=v);_&&(p.scaleY=_)}var C=P(g),w=C.originX,x=C.originY;var E=t.getPointByOrigin(w,x);p.originX=w;p.originY=x;p.x=(0,T.default)(E.x,u,h);p.y=(0,T.default)(E.y,d,f);return p};var s=o;t.default=s},"../image-editor-core/dist/utils/rotateInnerRect.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=function e(t,r,n,i){var o=i?1:-1;var s=t.getCenterPoint();var a=r.getCenterPoint();var l=a.x-s.x;var c=a.y-s.y;var u=a.x+o*c*n;var d=a.y-o*l*n;var h=t.height*n;var f=t.width*n;return{left:u-h/2,top:d-f/2,width:t.height*n,height:t.width*n}};t.default=n},"../image-editor-core/dist/utils/scale.js":function(e,t,r){"use strict";var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.scaleRotatedRectangle=t.getScaleForRadsLengthWidth=t.scaleDownToFit=t.scaleToFit=void 0;var u=n(r("../image-editor-utils/normalizeRotation.js"));var d=n(r("../image-editor-utils/isOriginalOrientation.js"));var h=n(r("../image-editor-core/dist/utils/convertDegreesToRadians.js"));var f=n(r("../image-editor-core/dist/utils/getLengthWidthFromDimensions.js"));var i=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i=t.width,o=t.height;var s=r.width,a=r.height;var l=s-2*n;var c=a-2*n;return Math.min(l/i,c/o)};t.scaleToFit=i;var o=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(1,i(t,r,n))};t.scaleDownToFit=o;var p=function e(t,r,n){var i=t%Math.PI<=Math.PI/2?1:-1;return Math.abs(n*Math.cos(t)+i*r*Math.sin(t))/n};t.getScaleForRadsLengthWidth=p;var s=function e(t,r,n){var i=(0,d.default)(t)?0:90;var o=(0,u.default)(t+i);var s=(0,h.default)(o);var a=(0,f.default)(r,n),l=a.length,c=a.width;return p(s,l,c)};t.scaleRotatedRectangle=s},"../image-editor-core/dist/utils/toDataURL.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;var c=r("../image-editor-fabric/fabric.js");var u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=r.format||"png",i=r.quality||1,o=(r.multiplier||1)*(r.enableRetinaScaling?1:1/t.getRetinaScaling()),s={left:r.left||0,top:r.top||0,width:r.width||0,height:r.height||0};return a(t,n,i,s,o)};var a=function e(t,r,n,i,o){var s=t.width,a=t.height,l=(i.width||t.width)*o,c=(i.height||t.height)*o,u=t.getZoom(),d=u,h=t.viewportTransform,f=(h[4]-i.left)*o,p=(h[5]-i.top)*o,m=[d,0,0,d,f,p],g=t.interactive,v=t.skipOffscreen,_=s!==l||a!==c;t.viewportTransform=m;t.skipOffscreen=false;t.interactive=false;_&&t.setDimensions({width:l,height:c},{backstoreOnly:true});t.renderAll();var b=t.__toDataURL(r,n,i);t.interactive=g;t.skipOffscreen=v;t.viewportTransform=h;_&&t.setDimensions({width:s,height:a},{backstoreOnly:true});t.renderAll();return b};function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=c.fabric.util;var n=r.saveObjectTransform(e);t.withoutTransform&&r.resetObjectTransform(e);var i=r.createCanvasElement();e.scale(1);var o=e.getBoundingRect(true,true);i.width=o.width;i.height=o.height;var s=new c.fabric.StaticCanvas(i,{enableRetinaScaling:t.enableRetinaScaling,renderOnAddRemove:false,skipOffscreen:false});"jpeg"===t.format&&(s.backgroundColor="#fff");e.setPositionByOrigin(new c.fabric.Point(s.width/2,s.height/2),"center","center");var a=e.canvas;s.add(e);var l=u(s,t);e.set(n).setCoords();e.canvas=a;s._objects=[];s.dispose();return l}},"../image-editor-core/node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(e,t){function r(e){if(Array.isArray(e))return e}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/classCallCheck.js":function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/createClass.js":function(e,t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function r(e,t,r){t&&n(e.prototype,t);r&&n(e,r);return e}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/defineProperty.js":function(e,t){function r(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/iterableToArray.js":function(e,t){function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/nonIterableRest.js":function(e,t){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(e,t){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/objectSpread.js":function(e,t,r){var i=r("../image-editor-core/node_modules/@babel/runtime/helpers/defineProperty.js");function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};var n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})));n.forEach(function(e){i(t,e,r[e])})}return t}e.exports=n},"../image-editor-core/node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(e,t,r){var s=r("../image-editor-core/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function n(e,t){if(null==e)return{};var r=s(e,t);var n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}e.exports=n},"../image-editor-core/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(e,t){function r(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,o;for(o=0;o<n.length;o++){i=n[o];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}e.exports=r},"../image-editor-core/node_modules/@babel/runtime/helpers/toArray.js":function(e,t,r){var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/arrayWithHoles.js");var i=r("../image-editor-core/node_modules/@babel/runtime/helpers/iterableToArray.js");var o=r("../image-editor-core/node_modules/@babel/runtime/helpers/nonIterableRest.js");function s(e){return n(e)||i(e)||o()}e.exports=s},"../image-editor-core/node_modules/@babel/runtime/helpers/toConsumableArray.js":function(e,t,r){var n=r("../image-editor-core/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js");var i=r("../image-editor-core/node_modules/@babel/runtime/helpers/iterableToArray.js");var o=r("../image-editor-core/node_modules/@babel/runtime/helpers/nonIterableSpread.js");function s(e){return n(e)||i(e)||o()}e.exports=s},"../image-editor-core/node_modules/@sqs/styles/variables/baseRosetta.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GLOBAL_ROUNDED_CORNER_RADIUS_PX=t.BUTTON_INSET_PX=t.FONT_WEIGHT_MEDIUM=t.FONT_WEIGHT_BOOK=t.FONT_SIZE_SMALLEST_CAPS_LETTER_SPACING_PX=t.FONT_SIZE_SMALLER_CAPS_LETTER_SPACING_PX=t.FONT_SIZE_LARGE_PX=t.MOBILE_FONT_SIZE_SMALLEST_PX=t.MOBILE_FONT_SIZE_SMALLER_PX=t.MOBILE_FONT_SIZE_PX=t.FONT_SIZE_SMALLEST_PX=t.FONT_SIZE_SMALLER_PX=t.FONT_SIZE_PX=t.FONT_FAMILY=t.ERROR_FONT_SIZE_PX=t.ACCESSORY_ICON_SIZE_PX=t.MARGIN_TOP_LABEL_PX=t.MARGIN_TOP_DESCRIPTION_PX=t.MARGIN_BOTTOM_DESCRIPTION_PX=t.LINE_HEIGHT_LABEL_PX=t.LINE_HEIGHT_DESCRIPTION_PX=t.BUTTON_HEIGHT_MEDIUM_PX=t.BUTTON_HEIGHT_SMALL_PX=t.FIELD_LABEL_MARGIN_TOP_PX=t.FIELD_INNER_MARGIN_PX=t.FIELD_INLINE_LABEL_WIDTH_PX=t.FIELD_HORIZONTAL_PADDING_PX=t.FIELD_HEIGHT_PX=t.FIELD_BORDER_RADIUS_PX=t.COLOR_TRACK_SIZE_PX=t.COLORS=t.TRANSITION_DURATION_MS=t.SIDEBAR_WIDTH_PX=t.STROKE_WIDTH_PX=t.GRID_SIZE_PX=void 0;var n=r("../image-editor-core/node_modules/babel-runtime/helpers/defineProperty.js");var i=s(n);var o;function s(e){return e&&e.__esModule?e:{default:e}}var a=t.GRID_SIZE_PX=11;var l=t.STROKE_WIDTH_PX=1;var c=t.SIDEBAR_WIDTH_PX=320;var u=t.TRANSITION_DURATION_MS=350;var d=t.COLORS={black:"#313131",blue:"#0888c8",error:"#f0523d",field_blur:"rgba(0, 0, 0, 0)",field_caret:"#436bf1",field_focus:"rgba(0, 0, 0, 0.03)",field_line_inverse:"#efefef",field_line:"rgba(0, 0, 0, 0.06)",gray_dark:"#6d6d6d",gray_darker:"#ededed",gray_light:"#d0d0d0",gray_lighter:"#e4e4e4",gray_lightest:"#f2f2f2",gray:"#a1a1a1",green:"#35d297",outline_hover:"#00adff",red:"#ec3e3d",white:"#ffffff"};var h=t.COLOR_TRACK_SIZE_PX=3*a;var f=t.FIELD_BORDER_RADIUS_PX=4;var p=t.FIELD_HEIGHT_PX=4*a;var m=t.FIELD_HORIZONTAL_PADDING_PX=16;var g=t.FIELD_INLINE_LABEL_WIDTH_PX=100;var v=t.FIELD_INNER_MARGIN_PX=6;var _=t.FIELD_LABEL_MARGIN_TOP_PX=16;var b=t.BUTTON_HEIGHT_SMALL_PX=32;var y=t.BUTTON_HEIGHT_MEDIUM_PX=37;var j=t.LINE_HEIGHT_DESCRIPTION_PX=16;var C=t.LINE_HEIGHT_LABEL_PX=12;var w=t.MARGIN_BOTTOM_DESCRIPTION_PX=4;var x=t.MARGIN_TOP_DESCRIPTION_PX=2;var E=t.MARGIN_TOP_LABEL_PX=4;var A=t.ACCESSORY_ICON_SIZE_PX=16;var O={FADEIN_DURATION:"0.1s",FADEIN_EASING:"ease-in-out"};var S=t.ERROR_FONT_SIZE_PX=12;var T=t.FONT_FAMILY="Clarkson";var I=t.FONT_SIZE_PX=14;var k=t.FONT_SIZE_SMALLER_PX=12;var P=t.FONT_SIZE_SMALLEST_PX=9.75;var R=t.MOBILE_FONT_SIZE_PX=16;var F=t.MOBILE_FONT_SIZE_SMALLER_PX=12;var D=t.MOBILE_FONT_SIZE_SMALLEST_PX=11;var L=t.FONT_SIZE_LARGE_PX=R;var M=t.FONT_SIZE_SMALLER_CAPS_LETTER_SPACING_PX=.5;var B=t.FONT_SIZE_SMALLEST_CAPS_LETTER_SPACING_PX=.75;var N=t.FONT_WEIGHT_BOOK="400";var U=t.FONT_WEIGHT_MEDIUM="500";var X=t.BUTTON_INSET_PX=54;var G=t.GLOBAL_ROUNDED_CORNER_RADIUS_PX=4;t.default=(o={"rosetta-background-color-light":"rgba(255,255,255,0.3)","rosetta-black":d.black,"rosetta-blue":d.blue,"rosetta-error-color":d.error,"rosetta-field-caret-color":d.field_caret,"rosetta-field-focus-color":d.field_focus,"rosetta-field-line-color":d.field_line,"rosetta-gray-dark":d.gray_dark,"rosetta-gray-darker":d.gray_darker,"rosetta-gray-light":d.gray_light,"rosetta-gray-lighter":d.gray_lighter,"rosetta-gray-lightest":d.gray_lightest,"rosetta-gray-medium":"rgba(0,0,0,0.1)","rosetta-gray":d.gray,"rosetta-green":d.green,"rosetta-outlineHoverColor":d.outline_hover,"rosetta-outlineSelectedColor":d.outline_hover,"rosetta-red":d.red,"rosetta-text-color-light":"rgba(62,62,62,0.4)","rosetta-text-color":"rgba(62,62,62,1)","rosetta-white":d.white,"rosetta-sidebar-width":c+"px","rosetta-transition-duration":u+"ms","rosetta-transition-easing-bounce":"cubic-bezier(0.175, 0.885, 0.32, 1.15)","rosetta-transition-easing":"cubic-bezier(0.77, 0, 0.175, 1)","rosetta-transition-fadein-duration":O.FADEIN_DURATION,"rosetta-transition-fadein-easing":O.FADEIN_EASING,"rosetta-transition-fadein":O.FADEIN_DURATION+" "+O.FADEIN_EASING,grid:a+"px","dialog-border-radius":"8px","dialog-box-shadow":"rgba(0, 0, 0, 0.2) 0 30px 100px, rgba(0, 0, 0, 0.06) 0 4px 10px","dialog-overlay-color":"rgba(0, 0, 0, 0.1)","field-horizontal-padding":m+"px","field-height":p+"px","field-border-radius":f+"px","field-inner-margin":v+"px","field-label-margin-top":_+"px","field-inline-label-width":g+"px","button-height-small":b+"px","button-height-medium":b+"px",strokeWidth:l+"px","font-family":T,"font-size":I+"px","font-size-large":L+"px","font-size-smaller":k+"px","font-size-smallest":P+"px","mobile-font-size":R+"px","mobile-font-size-smaller":k+"px","mobile-font-size-smallest":P+"px"},(0,i.default)(o,"font-size-large",L+"px"),(0,i.default)(o,"font-size-smaller-caps-letter-spacing",M+"px"),(0,i.default)(o,"font-size-smallest-caps-letter-spacing",B+"px"),(0,i.default)(o,"error-font-size",S+"px"),(0,i.default)(o,"font-weight-medium",U),(0,i.default)(o,"font-weight-book",N),(0,i.default)(o,"line-height-label",C+"px"),(0,i.default)(o,"line-height-description",j+"px"),(0,i.default)(o,"margin-top-label",E+"px"),(0,i.default)(o,"margin-top-description",x+"px"),(0,i.default)(o,"margin-bottom-description",w+"px"),(0,i.default)(o,"accessory-icon-size",A+"px"),(0,i.default)(o,"knob-box-shadow","0 3px 14px rgba(0, 0, 0, 0.2)"),o)},"../image-editor-core/node_modules/babel-runtime/core-js/object/define-property.js":function(e,t,r){e.exports={default:r("../image-editor-core/node_modules/core-js/library/fn/object/define-property.js"),__esModule:true}},"../image-editor-core/node_modules/babel-runtime/helpers/defineProperty.js":function(e,t,r){"use strict";t.__esModule=true;var n=r("../image-editor-core/node_modules/babel-runtime/core-js/object/define-property.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){t in e?(0,i.default)(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}},"../image-editor-core/node_modules/core-js/library/fn/object/define-property.js":function(e,t,r){r("../image-editor-core/node_modules/core-js/library/modules/es6.object.define-property.js");var i=r("../image-editor-core/node_modules/core-js/library/modules/_core.js").Object;e.exports=function e(t,r,n){return i.defineProperty(t,r,n)}},"../image-editor-core/node_modules/core-js/library/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"../image-editor-core/node_modules/core-js/library/modules/_an-object.js":function(e,t,r){var n=r("../image-editor-core/node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"../image-editor-core/node_modules/core-js/library/modules/_core.js":function(e,t){var r=e.exports={version:"2.6.2"};"number"==typeof __e&&(__e=r)},"../image-editor-core/node_modules/core-js/library/modules/_ctx.js":function(e,t,r){var o=r("../image-editor-core/node_modules/core-js/library/modules/_a-function.js");e.exports=function(n,i,e){o(n);if(void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}},"../image-editor-core/node_modules/core-js/library/modules/_descriptors.js":function(e,t,r){e.exports=!r("../image-editor-core/node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"../image-editor-core/node_modules/core-js/library/modules/_dom-create.js":function(e,t,r){var n=r("../image-editor-core/node_modules/core-js/library/modules/_is-object.js");var i=r("../image-editor-core/node_modules/core-js/library/modules/_global.js").document;var o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"../image-editor-core/node_modules/core-js/library/modules/_export.js":function(e,t,r){var m=r("../image-editor-core/node_modules/core-js/library/modules/_global.js");var g=r("../image-editor-core/node_modules/core-js/library/modules/_core.js");var v=r("../image-editor-core/node_modules/core-js/library/modules/_ctx.js");var _=r("../image-editor-core/node_modules/core-js/library/modules/_hide.js");var b=r("../image-editor-core/node_modules/core-js/library/modules/_has.js");var y="prototype";var j=function(e,t,r){var n=e&j.F;var i=e&j.G;var o=e&j.S;var s=e&j.P;var a=e&j.B;var l=e&j.W;var c=i?g:g[t]||(g[t]={});var u=c[y];var d=i?m:o?m[t]:(m[t]||{})[y];var h,f,p;i&&(r=t);for(h in r){f=!n&&d&&void 0!==d[h];if(f&&b(c,h))continue;p=f?d[h]:r[h];c[h]=i&&"function"!=typeof d[h]?r[h]:a&&f?v(p,m):l&&d[h]==p?function(n){var e=function(e,t,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return n.apply(this,arguments)};e[y]=n[y];return e}(p):s&&"function"==typeof p?v(Function.call,p):p;if(s){(c.virtual||(c.virtual={}))[h]=p;e&j.R&&u&&!u[h]&&_(u,h,p)}}};j.F=1;j.G=2;j.S=4;j.P=8;j.B=16;j.W=32;j.U=64;j.R=128;e.exports=j},"../image-editor-core/node_modules/core-js/library/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},"../image-editor-core/node_modules/core-js/library/modules/_global.js":function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"../image-editor-core/node_modules/core-js/library/modules/_has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"../image-editor-core/node_modules/core-js/library/modules/_hide.js":function(e,t,r){var n=r("../image-editor-core/node_modules/core-js/library/modules/_object-dp.js");var i=r("../image-editor-core/node_modules/core-js/library/modules/_property-desc.js");e.exports=r("../image-editor-core/node_modules/core-js/library/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},"../image-editor-core/node_modules/core-js/library/modules/_ie8-dom-define.js":function(e,t,r){e.exports=!r("../image-editor-core/node_modules/core-js/library/modules/_descriptors.js")&&!r("../image-editor-core/node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty(r("../image-editor-core/node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"../image-editor-core/node_modules/core-js/library/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"../image-editor-core/node_modules/core-js/library/modules/_object-dp.js":function(e,t,r){var i=r("../image-editor-core/node_modules/core-js/library/modules/_an-object.js");var o=r("../image-editor-core/node_modules/core-js/library/modules/_ie8-dom-define.js");var s=r("../image-editor-core/node_modules/core-js/library/modules/_to-primitive.js");var a=Object.defineProperty;t.f=r("../image-editor-core/node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function e(t,r,n){i(t);r=s(r,true);i(n);if(o)try{return a(t,r,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(t[r]=n.value);return t}},"../image-editor-core/node_modules/core-js/library/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../image-editor-core/node_modules/core-js/library/modules/_to-primitive.js":function(e,t,r){var i=r("../image-editor-core/node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},"../image-editor-core/node_modules/core-js/library/modules/es6.object.define-property.js":function(e,t,r){var n=r("../image-editor-core/node_modules/core-js/library/modules/_export.js");n(n.S+n.F*!r("../image-editor-core/node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:r("../image-editor-core/node_modules/core-js/library/modules/_object-dp.js").f})},"../image-editor-data-model/EditorStateKey.js":function(e,t){e.exports={BRIGHTNESS:"brightness",CONTRAST:"contrast",SATURATION:"saturation",SHARPNESS:"sharpness",BLUR:"blur",HIGHLIGHTS:"highlights",SHADOWS:"shadows",CROP_DIMENSIONS:"cropDimensions",INITIAL_CROP_DIMENSIONS:"initialCropDimensions",CROP_CONFIG:"cropConfig",ROTATION:"rotation",FLIP:"flip",FILTER:"squarespaceFilter"}},"../image-editor-data-model/EditorStateSchema.json":function(e){e.exports={type:"object",properties:{brightness:{type:"number",key:"BRIGHTNESS"},contrast:{type:"number",key:"CONTRAST"},saturation:{type:"number",key:"SATURATION"},sharpness:{type:"number",key:"SHARPNESS"},blur:{type:"number",key:"BLUR"},highlights:{type:"number",key:"HIGHLIGHTS"},shadows:{type:"number",key:"SHADOWS"},cropDimensions:{type:"object",key:"CROP_DIMENSIONS",properties:{centerOffsetFromImageX:{type:"number"},centerOffsetFromImageY:{type:"number"},height:{type:"number"},width:{type:"number"}},additionalProperties:false,required:["centerOffsetFromImageX","centerOffsetFromImageY","height","width"]},initialCropDimensions:{type:"object",key:"INITIAL_CROP_DIMENSIONS",properties:{centerOffsetFromImageX:{type:"number"},centerOffsetFromImageY:{type:"number"},height:{type:"number"},width:{type:"number"}},additionalProperties:false,required:["centerOffsetFromImageX","centerOffsetFromImageY","height","width"]},cropConfig:{type:"object",key:"CROP_CONFIG",properties:{isRatioLocked:{type:"boolean"},ratio:{type:"number"},type:{type:"string"}},required:["isRatioLocked","type"]},rotation:{type:"number",key:"ROTATION"},flip:{type:"object",key:"FLIP",properties:{x:{type:"boolean",key:"HORIZONTAL"},y:{type:"boolean",key:"VERTICAL"}}},squarespaceFilter:{type:"object",key:"FILTER",properties:{type:{type:"string",key:"TYPE"},intensity:{type:"number",key:"INTENSITY"}}}}}},"../image-editor-data-model/FlipAxis.js":function(e,t){e.exports={HORIZONTAL:"x",VERTICAL:"y"}},"../image-editor-fabric/fabric.js":function(e,t,r){(function(e){var B=B||{version:"2.4.6"};true;t.fabric=B;if("undefined"!==typeof document&&"undefined"!==typeof window){B.document=document;B.window=window}B.isTouchSupported="ontouchstart"in B.window||"ontouchstart"in B.document||B.window&&B.window.navigator&&B.window.navigator.maxTouchPoints>0;B.isLikelyNode="undefined"!==typeof e&&"undefined"===typeof window;B.DPI=96;B.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)";B.fontPaths={};B.iMatrix=[1,0,0,1,0,0];B.canvasModule="canvas";B.perfLimitSizeTotal=2097152;B.maxCacheSideLimit=4096;B.minCacheSideLimit=256;B.charWidthsCache={};B.textureSize=2048;B.enableGLFiltering=true;B.devicePixelRatio=B.window.devicePixelRatio||B.window.webkitDevicePixelRatio||B.window.mozDevicePixelRatio||1;B.browserShadowBlurConstant=1;B.arcToSegmentsCache={};B.boundsOfCurveCache={};B.cachesBoundsOfCurve=true;B.initFilterBackend=function(){if(B.enableGLFiltering&&B.isWebglSupported&&B.isWebglSupported(B.textureSize)){console.log("max texture size: "+B.maxTextureSize);return new B.WebglFilterBackend({tileSize:B.textureSize})}if(B.Canvas2dFilterBackend)return new B.Canvas2dFilterBackend};(function(){function n(e,t){if(!this.__eventListeners[e])return;var r=this.__eventListeners[e];t?r[r.indexOf(t)]=false:B.util.array.fill(r,false)}function e(e,t){this.__eventListeners||(this.__eventListeners={});if(1===arguments.length)for(var r in e)this.on(r,e[r]);else{this.__eventListeners[e]||(this.__eventListeners[e]=[]);this.__eventListeners[e].push(t)}return this}function t(e,t){if(!this.__eventListeners)return;if(0===arguments.length)for(e in this.__eventListeners)n.call(this,e);else if(1===arguments.length&&"object"===typeof e)for(var r in e)n.call(this,r,e[r]);else n.call(this,e,t);return this}function r(e,t){if(!this.__eventListeners)return;var r=this.__eventListeners[e];if(!r)return;for(var n=0,i=r.length;n<i;n++)r[n]&&r[n].call(this,t||{});this.__eventListeners[e]=r.filter(function(e){return false!==e});return this}B.Observable={observe:e,stopObserving:t,fire:r,on:e,off:t,trigger:r}})();B.Collection={_objects:[],add:function(){this._objects.push.apply(this._objects,arguments);if(this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);this.renderOnAddRemove&&this.requestRenderAll();return this},insertAt:function(e,t,r){var n=this._objects;r?n[t]=e:n.splice(t,0,e);this._onObjectAdded&&this._onObjectAdded(e);this.renderOnAddRemove&&this.requestRenderAll();return this},remove:function(){var e=this._objects,t,r=false;for(var n=0,i=arguments.length;n<i;n++){t=e.indexOf(arguments[n]);if(-1!==t){r=true;e.splice(t,1);this._onObjectRemoved&&this._onObjectRemoved(arguments[n])}}this.renderOnAddRemove&&r&&this.requestRenderAll();return this},forEachObject:function(e,t){var r=this.getObjects();for(var n=0,i=r.length;n<i;n++)e.call(t,r[n],n,r);return this},getObjects:function(t){if("undefined"===typeof t)return this._objects.concat();return this._objects.filter(function(e){return e.type===t})},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e){return this._objects.indexOf(e)>-1},complexity:function(){return this._objects.reduce(function(e,t){e+=t.complexity?t.complexity():0;return e},0)}};B.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof B.Gradient||this.set(t,new B.Gradient(e))},_initPattern:function(e,t,r){!e||!e.source||e instanceof B.Pattern?r&&r():this.set(t,new B.Pattern(e,r))},_initClipping:function(e){if(!e.clipTo||"string"!==typeof e.clipTo)return;var t=B.util.getFunctionBody(e.clipTo);"undefined"!==typeof t&&(this.clipTo=new Function("ctx",t))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){"object"===typeof e?this._setObject(e):"function"===typeof t&&"clipTo"!==e?this._set(e,t(this.get(e))):this._set(e,t);return this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);"boolean"===typeof t&&this.set(e,!t);return this},get:function(e){return this[e]}};(function(o){var f=Math.sqrt,p=Math.atan2,s=Math.pow,a=Math.abs,l=Math.PI/180,n=Math.PI/2;B.util={cos:function(e){if(0===e)return 1;e<0&&(e=-e);var t=e/n;switch(t){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=e/n,r=1;e<0&&(r=-1);switch(t){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(e)},removeFromArray:function(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1);return e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*l},radiansToDegrees:function(e){return e/l},rotatePoint:function(e,t,r){e.subtractEquals(t);var n=B.util.rotateVector(e,r);return new B.Point(n.x,n.y).addEquals(t)},rotateVector:function(e,t){var r=B.util.sin(t),n=B.util.cos(t),i=e.x*n-e.y*r,o=e.x*r+e.y*n;return{x:i,y:o}},transformPoint:function(e,t,r){if(r)return new B.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y);return new B.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e){var t=[e[0].x,e[1].x,e[2].x,e[3].x],r=B.util.array.min(t),n=B.util.array.max(t),i=n-r,o=[e[0].y,e[1].y,e[2].y,e[3].y],s=B.util.array.min(o),a=B.util.array.max(o),l=a-s;return{left:r,top:s,width:i,height:l}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),r=[t*e[3],-t*e[1],-t*e[2],t*e[0]],n=B.util.transformPoint({x:e[4],y:e[5]},r,true);r[4]=-n.x;r[5]=-n.y;return r},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var r=/\D{0,2}$/.exec(e),n=parseFloat(e);t=t||B.Text.DEFAULT_SVG_FONT_SIZE;switch(r[0]){case"mm":return n*B.DPI/25.4;case"cm":return n*B.DPI/2.54;case"in":return n*B.DPI;case"pt":return n*B.DPI/72;case"pc":return n*B.DPI/72*12;case"em":return n*t;default:return n}},falseFunction:function(){return false},getKlass:function(e,t){e=B.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1));return B.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"]);break}return t},resolveNamespace:function(e){if(!e)return B;var t=e.split("."),r=t.length,n,i=o||B.window;for(n=0;n<r;++n)i=i[t[n]];return i},loadImage:function(e,t,r,n){if(!e){t&&t.call(r,e);return}var i=B.util.createImage();var o=function(){t&&t.call(r,i);i=i.onload=i.onerror=null};i.onload=o;i.onerror=function(){B.log("Error loading "+i.src);t&&t.call(r,null,true);i=i.onload=i.onerror=null};0!==e.indexOf("data")&&n&&(i.crossOrigin=n);if("data:image/svg"===e.substring(0,14)){i.onload=null;B.util.loadImageInDom(i,o)}i.src=e},loadImageInDom:function(e,t){var r=B.document.createElement("div");r.style.width=r.style.height="1px";r.style.left=r.style.top="-100%";r.style.position="absolute";r.appendChild(e);B.document.querySelector("body").appendChild(r);e.onload=function(){t();r.parentNode.removeChild(r);r=null}},enlivenObjects:function(e,t,i,o){e=e||[];function s(){++r===n&&t&&t(a)}var a=[],r=0,n=e.length;if(!n){t&&t(a);return}e.forEach(function(r,n){if(!r||!r.type){s();return}var e=B.util.getKlass(r.type,i);e.fromObject(r,function(e,t){t||(a[n]=e);o&&o(r,e,t);s()})})},enlivenPatterns:function(e,t){e=e||[];function r(){++i===o&&t&&t(n)}var n=[],i=0,o=e.length;if(!o){t&&t(n);return}e.forEach(function(e,t){if(e&&e.source)new B.Pattern(e,function(e){n[t]=e;r()});else{n[t]=e;r()}})},groupSVGElements:function(e,t,r){var n;if(e&&1===e.length)return e[0];if(t)if(t.width&&t.height)t.centerPoint={x:t.width/2,y:t.height/2};else{delete t.width;delete t.height}n=new B.Group(e,t);"undefined"!==typeof r&&(n.sourcePath=r);return n},populateWithProperties:function(e,t,r){if(r&&"[object Array]"===Object.prototype.toString.call(r))for(var n=0,i=r.length;n<i;n++)r[n]in e&&(t[r[n]]=e[r[n]])},drawDashedLine:function(e,t,r,n,i,o){var s=n-t,a=i-r,l=f(s*s+a*a),c=p(a,s),u=o.length,d=0,h=true;e.save();e.translate(t,r);e.moveTo(0,0);e.rotate(c);t=0;while(l>t){t+=o[d++%u];t>l&&(t=l);e[h?"lineTo":"moveTo"](t,0);h=!h}e.restore()},createCanvasElement:function(){return B.document.createElement("canvas")},copyCanvasElement:function(e){var t=B.util.createCanvasElement();t.width=e.width;t.height=e.height;t.getContext("2d").drawImage(e,0,0);return t},createImage:function(){return B.document.createElement("img")},clipContext:function(e,t){t.save();t.beginPath();e.clipTo(t);t.clip()},multiplyTransformMatrices:function(e,t,r){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],r?0:e[0]*t[4]+e[2]*t[5]+e[4],r?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=p(e[1],e[0]),r=s(e[0],2)+s(e[1],2),n=f(r),i=(e[0]*e[3]-e[2]*e[1])/n,o=p(e[0]*e[2]+e[1]*e[3],r);return{angle:t/l,scaleX:n,scaleY:i,skewX:o/l,skewY:0,translateX:e[4],translateY:e[5]}},customTransformMatrix:function(e,t,r){var n=[1,0,a(Math.tan(r*l)),1],i=[a(e),0,0,a(t)];return B.util.multiplyTransformMatrices(i,n,true)},resetObjectTransform:function(e){e.scaleX=1;e.scaleY=1;e.skewX=0;e.skewY=0;e.flipX=false;e.flipY=false;e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},getFunctionBody:function(e){return(String(e).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(e,t,r,n){if(n>0){t>n?t-=n:t=0;r>n?r-=n:r=0}var i=true,o,s,a=e.getImageData(t,r,2*n||1,2*n||1),l=a.data.length;for(o=3;o<l;o+=4){s=a.data[o];i=s<=0;if(false===i)break}a=null;return i},parsePreserveAspectRatioAttribute:function(e){var t="meet",r="Mid",n="Mid",i=e.split(" "),o;if(i&&i.length){t=i.pop();if("meet"!==t&&"slice"!==t){o=t;t="meet"}else i.length&&(o=i.pop())}r="none"!==o?o.slice(1,4):"none";n="none"!==o?o.slice(5,8):"none";return{meetOrSlice:t,alignX:r,alignY:n}},clearFabricFontCache:function(e){e=(e||"").toLowerCase();e?B.charWidthsCache[e]&&delete B.charWidthsCache[e]:B.charWidthsCache={}},limitDimsByArea:function(e,t){var r=Math.sqrt(t*e),n=Math.floor(t/r);return{x:Math.floor(r),y:n}},capValue:function(e,t,r){return Math.max(e,Math.min(t,r))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)}}})((true,t));(function(){var D=Array.prototype.join;function g(e,t,r,n,i,o,s){var a=D.call(arguments);if(B.arcToSegmentsCache[a])return B.arcToSegmentsCache[a];var l=Math.PI,c=s*l/180,u=B.util.sin(c),d=B.util.cos(c),h=0,f=0;r=Math.abs(r);n=Math.abs(n);var p=-d*e*.5-u*t*.5,m=-d*t*.5+u*e*.5,g=r*r,v=n*n,_=m*m,b=p*p,y=g*v-g*_-v*b,j=0;if(y<0){var C=Math.sqrt(1-y/(g*v));r*=C;n*=C}else j=(i===o?-1:1)*Math.sqrt(y/(g*_+v*b));var w=j*r*m/n,x=-j*n*p/r,E=d*w-u*x+.5*e,A=u*w+d*x+.5*t,O=M(1,0,(p-w)/r,(m-x)/n),S=M((p-w)/r,(m-x)/n,(-p-w)/r,(-m-x)/n);0===o&&S>0?S-=2*l:1===o&&S<0&&(S+=2*l);var T=Math.ceil(Math.abs(S/l*2)),I=[],k=S/T,P=8/3*Math.sin(k/4)*Math.sin(k/4)/Math.sin(k/2),R=O+k;for(var F=0;F<T;F++){I[F]=L(O,R,d,u,r,n,E,A,P,h,f);h=I[F][4];f=I[F][5];O=R;R+=k}B.arcToSegmentsCache[a]=I;return I}function L(e,t,r,n,i,o,s,a,l,c,u){var d=B.util.cos(e),h=B.util.sin(e),f=B.util.cos(t),p=B.util.sin(t),m=r*i*f-n*o*p+s,g=n*i*f+r*o*p+a,v=c+l*(-r*i*h-n*o*d),_=u+l*(-n*i*h+r*o*d),b=m+l*(r*i*p+n*o*f),y=g+l*(n*i*p-r*o*f);return[v,_,b,y,m,g]}function M(e,t,r,n){var i=Math.atan2(t,e),o=Math.atan2(n,r);return o>=i?o-i:2*Math.PI-(i-o)}B.util.drawArc=function(e,t,r,n){var i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],u=n[6],d=[[],[],[],[]],h=g(c-t,u-r,i,o,a,l,s);for(var f=0,p=h.length;f<p;f++){d[f][0]=h[f][0]+t;d[f][1]=h[f][1]+r;d[f][2]=h[f][2]+t;d[f][3]=h[f][3]+r;d[f][4]=h[f][4]+t;d[f][5]=h[f][5]+r;e.bezierCurveTo.apply(e,d[f])}};B.util.getBoundsOfArc=function(e,t,r,n,i,o,s,a,l){var c=0,u=0,d,h=[],f=g(a-e,l-t,r,n,o,s,i);for(var p=0,m=f.length;p<m;p++){d=v(c,u,f[p][0],f[p][1],f[p][2],f[p][3],f[p][4],f[p][5]);h.push({x:d[0].x+e,y:d[0].y+t});h.push({x:d[1].x+e,y:d[1].y+t});c=f[p][4];u=f[p][5]}return h};function v(e,t,r,n,i,o,s,a){var l;if(B.cachesBoundsOfCurve){l=D.call(arguments);if(B.boundsOfCurveCache[l])return B.boundsOfCurveCache[l]}var c=Math.sqrt,u=Math.min,d=Math.max,h=Math.abs,f=[],p=[[],[]],m,g,v,_,b,y,j,C;g=6*e-12*r+6*i;m=-3*e+9*r-9*i+3*s;v=3*r-3*e;for(var w=0;w<2;++w){if(w>0){g=6*t-12*n+6*o;m=-3*t+9*n-9*o+3*a;v=3*n-3*t}if(h(m)<1e-12){if(h(g)<1e-12)continue;_=-v/g;0<_&&_<1&&f.push(_);continue}j=g*g-4*v*m;if(j<0)continue;C=c(j);b=(-g+C)/(2*m);0<b&&b<1&&f.push(b);y=(-g-C)/(2*m);0<y&&y<1&&f.push(y)}var x,E,A=f.length,O=A,S;while(A--){_=f[A];S=1-_;x=S*S*S*e+3*S*S*_*r+3*S*_*_*i+_*_*_*s;p[0][A]=x;E=S*S*S*t+3*S*S*_*n+3*S*_*_*o+_*_*_*a;p[1][A]=E}p[0][O]=e;p[1][O]=t;p[0][O+1]=s;p[1][O+1]=a;var T=[{x:u.apply(null,p[0]),y:u.apply(null,p[1])},{x:d.apply(null,p[0]),y:d.apply(null,p[1])}];B.cachesBoundsOfCurve&&(B.boundsOfCurveCache[l]=T);return T}B.util.getBoundsOfCurve=v})();(function(){var s=Array.prototype.slice;function e(e,t){var r=s.call(arguments,2),n=[];for(var i=0,o=e.length;i<o;i++)n[i]=r.length?e[i][t].apply(e[i],r):e[i][t].call(e[i]);return n}function t(e,t){return i(e,t,function(e,t){return e>=t})}function r(e,t){return i(e,t,function(e,t){return e<t})}function n(e,t){var r=e.length;while(r--)e[r]=t;return e}function i(e,t,r){if(!e||0===e.length)return;var n=e.length-1,i=t?e[n][t]:e[n];if(t)while(n--)r(e[n][t],i)&&(i=e[n][t]);else while(n--)r(e[n],i)&&(i=e[n]);return i}B.util.array={fill:n,invoke:e,min:r,max:t}})();(function(){function s(e,t,r){if(r)if(!B.isLikelyNode&&t instanceof Element)e=t;else if(t instanceof Array){e=[];for(var n=0,i=t.length;n<i;n++)e[n]=s({},t[n],r)}else if(t&&"object"===typeof t)for(var o in t)"canvas"===o?e[o]=s({},t[o]):t.hasOwnProperty(o)&&(e[o]=s({},t[o],r));else e=t;else for(var o in t)e[o]=t[o];return e}function e(e,t){return s({},e,t)}B.util.object={extend:s,clone:e};B.util.object.extend(B.util,B.Observable)})();(function(){function e(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function t(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())}function r(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(e){var t=0,r,n=[];for(t=0,r;t<e.length;t++){if(false===(r=i(e,t)))continue;n.push(r)}return n}function i(e,t){var r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var i=e.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return false}B.util.string={camelize:e,capitalize:t,escapeXml:r,graphemeSplit:n}})();(function(){var o=Array.prototype.slice,s=function(){},r=function(){for(var e in{toString:1})if("toString"===e)return false;return true}(),a=function(e,n,i){for(var t in n){t in e.prototype&&"function"===typeof e.prototype[t]&&(n[t]+"").indexOf("callSuper")>-1?e.prototype[t]=function(r){return function(){var e=this.constructor.superclass;this.constructor.superclass=i;var t=n[r].apply(this,arguments);this.constructor.superclass=e;if("initialize"!==r)return t}}(t):e.prototype[t]=n[t];if(r){n.toString!==Object.prototype.toString&&(e.prototype.toString=n.toString);n.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=n.valueOf)}}};function l(){}function c(e){var t=null,r=this;while(r.constructor.superclass){var n=r.constructor.superclass.prototype[e];if(r[e]!==n){t=n;break}r=r.constructor.superclass.prototype}if(!t)return console.log("tried to callSuper "+e+", method not found in prototype chain",this);return arguments.length>1?t.apply(this,o.call(arguments,1)):t.call(this)}function e(){var e=null,t=o.call(arguments,0);"function"===typeof t[0]&&(e=t.shift());function r(){this.initialize.apply(this,arguments)}r.superclass=e;r.subclasses=[];if(e){l.prototype=e.prototype;r.prototype=new l;e.subclasses.push(r)}for(var n=0,i=t.length;n<i;n++)a(r,t[n],e);r.prototype.initialize||(r.prototype.initialize=s);r.prototype.constructor=r;r.prototype.callSuper=c;return r}B.util.createClass=e})();(function(){var n="unknown";function e(e){var t=Array.prototype.slice.call(arguments,1),r,n,i=t.length;for(n=0;n<i;n++){r=typeof e[t[n]];if(!/^(?:function|object|unknown)$/.test(r))return false}return true}var i,o,a=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();(function(){var r={};i=function(e){return r[e]};o=function(e,t){r[e]=t}})();function s(e,t){return{handler:t,wrappedHandler:r(e,t)}}function r(t,r){return function(e){r.call(i(t),e||B.window.event)}}function l(i,o){return function(e){if(d[i]&&d[i][o]){var t=d[i][o];for(var r=0,n=t.length;r<n;r++)t[r].call(this,e||B.window.event)}}}var t=e(B.document.documentElement,"addEventListener","removeEventListener")&&e(B.window,"addEventListener","removeEventListener"),c=e(B.document.documentElement,"attachEvent","detachEvent")&&e(B.window,"attachEvent","detachEvent"),u={},d={},h,f;if(t){h=function(e,t,r,n){e&&e.addEventListener(t,r,!c&&n)};f=function(e,t,r,n){e&&e.removeEventListener(t,r,!c&&n)}}else if(c){h=function(e,t,r){if(!e)return;var n=a(e);o(n,e);u[n]||(u[n]={});u[n][t]||(u[n][t]=[]);var i=s(n,r);u[n][t].push(i);e.attachEvent("on"+t,i.wrappedHandler)};f=function(e,t,r){if(!e)return;var n=a(e),i;if(u[n]&&u[n][t])for(var o=0,s=u[n][t].length;o<s;o++){i=u[n][t][o];if(i&&i.handler===r){e.detachEvent("on"+t,i.wrappedHandler);u[n][t][o]=null}}}}else{h=function(e,t,r){if(!e)return;var n=a(e);d[n]||(d[n]={});if(!d[n][t]){d[n][t]=[];var i=e["on"+t];i&&d[n][t].push(i);e["on"+t]=l(n,t)}d[n][t].push(r)};f=function(e,t,r){if(!e)return;var n=a(e);if(d[n]&&d[n][t]){var i=d[n][t];for(var o=0,s=i.length;o<s;o++)i[o]===r&&i.splice(o,1)}}}B.util.addListener=h;B.util.removeListener=f;function p(e){e=e||B.window.event;var t=e.target||(typeof e.srcElement!==n?e.srcElement:null),r=B.util.getScrollLeftTop(t);return{x:m(e)+r.left,y:g(e)+r.top}}var m=function(e){return e.clientX},g=function(e){return e.clientY};function v(e,t,r){var n="touchend"===e.type?"changedTouches":"touches";var i,o=e[n];o&&o[0]&&(i=o[0][r]);"undefined"===typeof i&&(i=e[r]);return i}if(B.isTouchSupported){m=function(e){return v(e,"pageX","clientX")};g=function(e){return v(e,"pageY","clientY")}}B.util.getPointer=p})();(function(){function e(e,t){var r=e.style;if(!r)return e;if("string"===typeof t){e.style.cssText+=";"+t;return t.indexOf("opacity")>-1?o(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e}for(var n in t)if("opacity"===n)o(e,t[n]);else{var i="float"===n||"cssFloat"===n?"undefined"===typeof r.styleFloat?"cssFloat":"styleFloat":n;r[i]=t[n]}return e}var t=B.document.createElement("div"),r="string"===typeof t.style.opacity,n="string"===typeof t.style.filter,i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(e){return e};r?o=function(e,t){e.style.opacity=t;return e}:n&&(o=function(e,t){var r=e.style;e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1);if(i.test(r.filter)){t=t>=.9999?"":"alpha(opacity="+100*t+")";r.filter=r.filter.replace(i,t)}else r.filter+=" alpha(opacity="+100*t+")";return e});B.util.setStyle=e})();(function(){var t=Array.prototype.slice;function e(e){return"string"===typeof e?B.document.getElementById(e):e}var r,n=function(e){return t.call(e,0)};try{r=n(B.document.childNodes)instanceof Array}catch(e){}r||(n=function(e){var t=new Array(e.length),r=e.length;while(r--)t[r]=e[r];return t});function i(e,t){var r=B.document.createElement(e);for(var n in t)"class"===n?r.className=t[n]:"for"===n?r.htmlFor=t[n]:r.setAttribute(n,t[n]);return r}function o(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)}function s(e,t,r){"string"===typeof t&&(t=i(t,r));e.parentNode&&e.parentNode.replaceChild(t,e);t.appendChild(e);return t}function l(e){var t=0,r=0,n=B.document.documentElement,i=B.document.body||{scrollLeft:0,scrollTop:0};while(e&&(e.parentNode||e.host)){e=e.parentNode||e.host;if(e===B.document){t=i.scrollLeft||n.scrollLeft||0;r=i.scrollTop||n.scrollTop||0}else{t+=e.scrollLeft||0;r+=e.scrollTop||0}if(1===e.nodeType&&"fixed"===e.style.position)break}return{left:t,top:r}}function a(e){var t,r=e&&e.ownerDocument,n={left:0,top:0},i={left:0,top:0},o,s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return i;for(var a in s)i[s[a]]+=parseInt(c(e,a),10)||0;t=r.documentElement;"undefined"!==typeof e.getBoundingClientRect&&(n=e.getBoundingClientRect());o=l(e);return{left:n.left+o.left-(t.clientLeft||0)+i.left,top:n.top+o.top-(t.clientTop||0)+i.top}}var c;c=B.document.defaultView&&B.document.defaultView.getComputedStyle?function(e,t){var r=B.document.defaultView.getComputedStyle(e,null);return r?r[t]:void 0}:function(e,t){var r=e.style[t];!r&&e.currentStyle&&(r=e.currentStyle[t]);return r};(function(){var e=B.document.documentElement.style,t="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"";function r(e){"undefined"!==typeof e.onselectstart&&(e.onselectstart=B.util.falseFunction);t?e.style[t]="none":"string"===typeof e.unselectable&&(e.unselectable="on");return e}function n(e){"undefined"!==typeof e.onselectstart&&(e.onselectstart=null);t?e.style[t]="":"string"===typeof e.unselectable&&(e.unselectable="");return e}B.util.makeElementUnselectable=r;B.util.makeElementSelectable=n})();(function(){function e(e,t){var r=B.document.getElementsByTagName("head")[0],n=B.document.createElement("script"),i=true;n.onload=n.onreadystatechange=function(e){if(i){if("string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;i=false;t(e||B.window.event);n=n.onload=n.onreadystatechange=null}};n.src=e;r.appendChild(n)}B.util.getScript=e})();function u(e){var t=B.jsdomImplForWrapper(e);return t._canvas||t._image}function d(e){if(!B.isLikelyNode)return;var t=B.jsdomImplForWrapper(e);if(t){t._image=null;t._canvas=null;t._currentSrc=null;t._attributes=null;t._classList=null}}B.util.getById=e;B.util.toArray=n;B.util.makeElement=i;B.util.addClass=o;B.util.wrapElement=s;B.util.getScrollLeftTop=l;B.util.getElementOffset=a;B.util.getElementStyle=c;B.util.getNodeCanvas=u;B.util.cleanUpJsdomNode=d})();(function(){function s(e,t){return e+(/\?/.test(e)?"&":"?")+t}function a(){}function e(e,t){t=t||{};var r=t.method?t.method.toUpperCase():"GET",n=t.onComplete||function(){},i=new B.window.XMLHttpRequest,o=t.body||t.parameters;i.onreadystatechange=function(){if(4===i.readyState){n(i);i.onreadystatechange=a}};if("GET"===r){o=null;"string"===typeof t.parameters&&(e=s(e,t.parameters))}i.open(r,e,true);"POST"!==r&&"PUT"!==r||i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.send(o);return i}B.util.request=e})();B.log=function(){};B.warn=function(){};"undefined"!==typeof console&&["log","warn"].forEach(function(e){"undefined"!==typeof console[e]&&"function"===typeof console[e].apply&&(B[e]=function(){return console[e].apply(console,arguments)})});(function(){function t(){return false}function e(v){_(function(e){v=v||{};var s=e||+new Date,a=v.duration||500,l=s+a,c,u=v.onChange||t,d=v.abort||t,h=v.onComplete||t,f=v.easing||function(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t},p="startValue"in v?v.startValue:0,m="endValue"in v?v.endValue:100,g=v.byValue||m-p;v.onStart&&v.onStart();(function e(t){if(d()){h(m,1,1);return}c=t||+new Date;var r=c>l?a:c-s,n=r/a,i=f(r,p,g,a),o=Math.abs((i-p)/g);u(i,o,n);if(c>l){v.onComplete&&v.onComplete();return}_(e)})(s)})}var r=B.window.requestAnimationFrame||B.window.webkitRequestAnimationFrame||B.window.mozRequestAnimationFrame||B.window.oRequestAnimationFrame||B.window.msRequestAnimationFrame||function(e){return B.window.setTimeout(e,1e3/60)};var n=B.window.cancelAnimationFrame||B.window.clearTimeout;function _(){return r.apply(B.window,arguments)}function i(){return n.apply(B.window,arguments)}B.util.animate=e;B.util.requestAnimFrame=_;B.util.cancelAnimFrame=i})();(function(){function s(e,t,r){var n="rgba("+parseInt(e[0]+r*(t[0]-e[0]),10)+","+parseInt(e[1]+r*(t[1]-e[1]),10)+","+parseInt(e[2]+r*(t[2]-e[2]),10);n+=","+(e&&t?parseFloat(e[3]+r*(t[3]-e[3])):1);n+=")";return n}function e(e,t,r,o){var n=new B.Color(e).getSource(),i=new B.Color(t).getSource();o=o||{};B.util.animate(B.util.object.extend(o,{duration:r||500,startValue:n,endValue:i,byValue:i,easing:function(e,t,r,n){var i=o.colorEasing?o.colorEasing(e,n):1-Math.cos(e/n*(Math.PI/2));return s(t,r,i)}}))}B.util.animateColor=e})();(function(){function l(e,t,r,n){if(e<Math.abs(t)){e=t;n=r/4}else n=0===t&&0===e?r/(2*Math.PI)*Math.asin(1):r/(2*Math.PI)*Math.asin(t/e);return{a:e,c:t,p:r,s:n}}function c(e,t,r){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*r-e.s)*(2*Math.PI)/e.p)}function e(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function t(e,t,r,n){e/=n/2;if(e<1)return r/2*e*e*e+t;return r/2*((e-=2)*e*e+2)+t}function r(e,t,r,n){return r*(e/=n)*e*e*e+t}function n(e,t,r,n){return-r*((e=e/n-1)*e*e*e-1)+t}function i(e,t,r,n){e/=n/2;if(e<1)return r/2*e*e*e*e+t;return-r/2*((e-=2)*e*e*e-2)+t}function o(e,t,r,n){return r*(e/=n)*e*e*e*e+t}function s(e,t,r,n){return r*((e=e/n-1)*e*e*e*e+1)+t}function a(e,t,r,n){e/=n/2;if(e<1)return r/2*e*e*e*e*e+t;return r/2*((e-=2)*e*e*e*e+2)+t}function u(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t}function d(e,t,r,n){return r*Math.sin(e/n*(Math.PI/2))+t}function h(e,t,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+t}function f(e,t,r,n){return 0===e?t:r*Math.pow(2,10*(e/n-1))+t}function p(e,t,r,n){return e===n?t+r:r*(1-Math.pow(2,-10*e/n))+t}function m(e,t,r,n){if(0===e)return t;if(e===n)return t+r;e/=n/2;if(e<1)return r/2*Math.pow(2,10*(e-1))+t;return r/2*(2-Math.pow(2,-10*--e))+t}function g(e,t,r,n){return-r*(Math.sqrt(1-(e/=n)*e)-1)+t}function v(e,t,r,n){return r*Math.sqrt(1-(e=e/n-1)*e)+t}function _(e,t,r,n){e/=n/2;if(e<1)return-r/2*(Math.sqrt(1-e*e)-1)+t;return r/2*(Math.sqrt(1-(e-=2)*e)+1)+t}function b(e,t,r,n){var i=1.70158,o=0,s=r;if(0===e)return t;e/=n;if(1===e)return t+r;o=o||.3*n;var a=l(s,r,o,i);return-c(a,e,n)+t}function y(e,t,r,n){var i=1.70158,o=0,s=r;if(0===e)return t;e/=n;if(1===e)return t+r;o=o||.3*n;var a=l(s,r,o,i);return a.a*Math.pow(2,-10*e)*Math.sin((e*n-a.s)*(2*Math.PI)/a.p)+a.c+t}function j(e,t,r,n){var i=1.70158,o=0,s=r;if(0===e)return t;e/=n/2;if(2===e)return t+r;o=o||n*(.3*1.5);var a=l(s,r,o,i);if(e<1)return-.5*c(a,e,n)+t;return a.a*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a.s)*(2*Math.PI)/a.p)*.5+a.c+t}function C(e,t,r,n,i){void 0===i&&(i=1.70158);return r*(e/=n)*e*((i+1)*e-i)+t}function w(e,t,r,n,i){void 0===i&&(i=1.70158);return r*((e=e/n-1)*e*((i+1)*e+i)+1)+t}function x(e,t,r,n,i){void 0===i&&(i=1.70158);e/=n/2;if(e<1)return r/2*(e*e*((1+(i*=1.525))*e-i))+t;return r/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t}function E(e,t,r,n){return r-A(n-e,0,r,n)+t}function A(e,t,r,n){return(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t}function O(e,t,r,n){if(e<n/2)return.5*E(2*e,0,r,n)+t;return.5*A(2*e-n,0,r,n)+.5*r+t}B.util.ease={easeInQuad:function(e,t,r,n){return r*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){return-r*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){e/=n/2;if(e<1)return r/2*e*e+t;return-r/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){return r*(e/=n)*e*e+t},easeOutCubic:e,easeInOutCubic:t,easeInQuart:r,easeOutQuart:n,easeInOutQuart:i,easeInQuint:o,easeOutQuint:s,easeInOutQuint:a,easeInSine:u,easeOutSine:d,easeInOutSine:h,easeInExpo:f,easeOutExpo:p,easeInOutExpo:m,easeInCirc:g,easeOutCirc:v,easeInOutCirc:_,easeInElastic:b,easeOutElastic:y,easeInOutElastic:j,easeInBack:C,easeOutBack:w,easeInOutBack:x,easeInBounce:E,easeOutBounce:A,easeInOutBounce:O}})();(function(e){"use strict";var t=e.fabric||(e.fabric={});if(t.Point){t.warn("fabric.Point is already defined");return}t.Point=r;function r(e,t){this.x=e;this.y=t}r.prototype={type:"point",constructor:r,add:function(e){return new r(this.x+e.x,this.y+e.y)},addEquals:function(e){this.x+=e.x;this.y+=e.y;return this},scalarAdd:function(e){return new r(this.x+e,this.y+e)},scalarAddEquals:function(e){this.x+=e;this.y+=e;return this},subtract:function(e){return new r(this.x-e.x,this.y-e.y)},subtractEquals:function(e){this.x-=e.x;this.y-=e.y;return this},scalarSubtract:function(e){return new r(this.x-e,this.y-e)},scalarSubtractEquals:function(e){this.x-=e;this.y-=e;return this},multiply:function(e){return new r(this.x*e,this.y*e)},multiplyEquals:function(e){this.x*=e;this.y*=e;return this},divide:function(e){return new r(this.x/e,this.y/e)},divideEquals:function(e){this.x/=e;this.y/=e;return this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){"undefined"===typeof t&&(t=.5);t=Math.max(Math.min(1,t),0);return new r(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new r(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new r(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){this.x=e;this.y=t;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setFromPoint:function(e){this.x=e.x;this.y=e.y;return this},swap:function(e){var t=this.x,r=this.y;this.x=e.x;this.y=e.y;e.x=t;e.y=r},clone:function(){return new r(this.x,this.y)}}})((true,t));(function(e){"use strict";var h=e.fabric||(e.fabric={});if(h.Intersection){h.warn("fabric.Intersection is already defined");return}function f(e){this.status=e;this.points=[]}h.Intersection=f;h.Intersection.prototype={constructor:f,appendPoint:function(e){this.points.push(e);return this},appendPoints:function(e){this.points=this.points.concat(e);return this}};h.Intersection.intersectLineLine=function(e,t,r,n){var i,o=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),s=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),a=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!==a){var l=o/a,c=s/a;if(0<=l&&l<=1&&0<=c&&c<=1){i=new f("Intersection");i.appendPoint(new h.Point(e.x+l*(t.x-e.x),e.y+l*(t.y-e.y)))}else i=new f}else i=new f(0===o||0===s?"Coincident":"Parallel");return i};h.Intersection.intersectLinePolygon=function(e,t,r){var n=new f,i=r.length,o,s,a,l;for(l=0;l<i;l++){o=r[l];s=r[(l+1)%i];a=f.intersectLineLine(e,t,o,s);n.appendPoints(a.points)}n.points.length>0&&(n.status="Intersection");return n};h.Intersection.intersectPolygonPolygon=function(e,t){var r=new f,n=e.length,i;for(i=0;i<n;i++){var o=e[i],s=e[(i+1)%n],a=f.intersectLinePolygon(o,s,t);r.appendPoints(a.points)}r.points.length>0&&(r.status="Intersection");return r};h.Intersection.intersectPolygonRectangle=function(e,t,r){var n=t.min(r),i=t.max(r),o=new h.Point(i.x,n.y),s=new h.Point(n.x,i.y),a=f.intersectLinePolygon(n,o,e),l=f.intersectLinePolygon(o,i,e),c=f.intersectLinePolygon(i,s,e),u=f.intersectLinePolygon(s,n,e),d=new f;d.appendPoints(a.points);d.appendPoints(l.points);d.appendPoints(c.points);d.appendPoints(u.points);d.points.length>0&&(d.status="Intersection");return d}})((true,t));(function(e){"use strict";var c=e.fabric||(e.fabric={});if(c.Color){c.warn("fabric.Color is already defined.");return}function u(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}c.Color=u;c.Color.prototype={_tryParsingColor:function(e){var t;e in u.colorNameMap&&(e=u.colorNameMap[e]);"transparent"===e&&(t=[255,255,255,0]);t=t||u.sourceFromHex(e);t=t||u.sourceFromRgb(e);t=t||u.sourceFromHsl(e);t=t||[0,0,0,1];t&&this.setSource(t)},_rgbToHsl:function(e,t,r){e/=255;t/=255;r/=255;var n,i,o,s=c.util.array.max([e,t,r]),a=c.util.array.min([e,t,r]);o=(s+a)/2;if(s===a)n=i=0;else{var l=s-a;i=o>.5?l/(2-s-a):l/(s+a);switch(s){case e:n=(t-r)/l+(t<r?6:0);break;case t:n=(r-e)/l+2;break;case r:n=(e-t)/l+4;break}n/=6}return[Math.round(360*n),Math.round(100*i),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e=this.getSource(),t,r,n;t=e[0].toString(16);t=1===t.length?"0"+t:t;r=e[1].toString(16);r=1===r.length?"0"+r:r;n=e[2].toString(16);n=1===n.length?"0"+n:n;return t.toUpperCase()+r.toUpperCase()+n.toUpperCase()},toHexa:function(){var e=this.getSource(),t;t=Math.round(255*e[3]);t=t.toString(16);t=1===t.length?"0"+t:t;return this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();t[3]=e;this.setSource(t);return this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),r=e[3];this.setSource([t,t,t,r]);return this},toBlackWhite:function(e){var t=this.getSource(),r=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),n=t[3];e=e||127;r=Number(r)<Number(e)?0:255;this.setSource([r,r,r,n]);return this},overlayWith:function(e){e instanceof u||(e=new u(e));var t=[],r=this.getAlpha(),n=.5,i=this.getSource(),o=e.getSource(),s;for(s=0;s<3;s++)t.push(Math.round(i[s]*(1-n)+o[s]*n));t[3]=r;this.setSource(t);return this}};c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i;c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i;c.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;c.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(e,t,r){r<0&&(r+=1);r>1&&(r-=1);if(r<1/6)return e+6*(t-e)*r;if(r<.5)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}c.Color.fromRgb=function(e){return u.fromSource(u.sourceFromRgb(e))};c.Color.sourceFromRgb=function(e){var t=e.match(u.reRGBa);if(t){var r=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),n=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),i=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(r,10),parseInt(n,10),parseInt(i,10),t[4]?parseFloat(t[4]):1]}};c.Color.fromRgba=u.fromRgb;c.Color.fromHsl=function(e){return u.fromSource(u.sourceFromHsl(e))};c.Color.sourceFromHsl=function(e){var t=e.match(u.reHSLa);if(!t)return;var r=(parseFloat(t[1])%360+360)%360/360,n=parseFloat(t[2])/(/%$/.test(t[2])?100:1),i=parseFloat(t[3])/(/%$/.test(t[3])?100:1),o,s,a;if(0===n)o=s=a=i;else{var l=i<=.5?i*(n+1):i+n-i*n,c=2*i-l;o=d(c,l,r+1/3);s=d(c,l,r);a=d(c,l,r-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*a),t[4]?parseFloat(t[4]):1]};c.Color.fromHsla=u.fromHsl;c.Color.fromHex=function(e){return u.fromSource(u.sourceFromHex(e))};c.Color.sourceFromHex=function(e){if(e.match(u.reHex)){var t=e.slice(e.indexOf("#")+1),r=3===t.length||4===t.length,n=8===t.length||4===t.length,i=r?t.charAt(0)+t.charAt(0):t.substring(0,2),o=r?t.charAt(1)+t.charAt(1):t.substring(2,4),s=r?t.charAt(2)+t.charAt(2):t.substring(4,6),a=n?r?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(i,16),parseInt(o,16),parseInt(s,16),parseFloat((parseInt(a,16)/255).toFixed(2))]}};c.Color.fromSource=function(e){var t=new u;t.setSource(e);return t}})((true,t));(function(){"use strict";if(B.StaticCanvas){B.warn("fabric.StaticCanvas is already defined.");return}var i=B.util.object.extend,e=B.util.getElementOffset,c=B.util.removeFromArray,a=B.util.toFixed,o=B.util.transformPoint,s=B.util.invertTransform,r=B.util.getNodeCanvas,n=B.util.createCanvasElement,t=new Error("Could not initialize `canvas` element");B.StaticCanvas=B.util.createClass(B.CommonMethods,{initialize:function(e,t){t=t||{};this.renderAndResetBound=this.renderAndReset.bind(this);this.requestRenderAllBound=this.requestRenderAll.bind(this);this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:true,stateful:false,renderOnAddRemove:true,clipTo:null,controlsAboveOverlay:false,allowTouchScrolling:false,imageSmoothingEnabled:true,viewportTransform:B.iMatrix.concat(),backgroundVpt:true,overlayVpt:true,onBeforeScaleRotate:function(){},enableRetinaScaling:true,vptCoords:{},skipOffscreen:true,clipPath:void 0,_initStatic:function(e,t){var r=this.requestRenderAllBound;this._objects=[];this._createLowerCanvas(e);this._initOptions(t);this._setImageSmoothing();this.interactive||this._initRetinaScaling();t.overlayImage&&this.setOverlayImage(t.overlayImage,r);t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,r);t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,r);t.overlayColor&&this.setOverlayColor(t.overlayColor,r);this.calcOffset()},_isRetinaScaling:function(){return 1!==B.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?B.devicePixelRatio:1},_initRetinaScaling:function(){if(!this._isRetinaScaling())return;this.lowerCanvasEl.setAttribute("width",this.width*B.devicePixelRatio);this.lowerCanvasEl.setAttribute("height",this.height*B.devicePixelRatio);this.contextContainer.scale(B.devicePixelRatio,B.devicePixelRatio)},calcOffset:function(){this._offset=e(this.lowerCanvasEl);return this},setOverlayImage:function(e,t,r){return this.__setBgOverlayImage("overlayImage",e,t,r)},setBackgroundImage:function(e,t,r){return this.__setBgOverlayImage("backgroundImage",e,t,r)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},_setImageSmoothing:function(){var e=this.getContext();e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled;e.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(r,e,n,i){if("string"===typeof e)B.util.loadImage(e,function(e){if(e){var t=new B.Image(e,i);this[r]=t;t.canvas=this}n&&n(e)},this,i&&i.crossOrigin);else{i&&e.setOptions(i);this[r]=e;e&&(e.canvas=this);n&&n(e)}return this},__setBgOverlayColor:function(e,t,r){this[e]=t;this._initGradient(t,e);this._initPattern(t,e,r);return this},_createCanvasElement:function(){var e=n();if(!e)throw t;e.style||(e.style={});if("undefined"===typeof e.getContext)throw t;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e);this.width=this.width||parseInt(t.width,10)||0;this.height=this.height||parseInt(t.height,10)||0;if(!this.lowerCanvasEl.style)return;t.width=this.width;t.height=this.height;t.style.width=this.width+"px";t.style.height=this.height+"px";this.viewportTransform=this.viewportTransform.slice()},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=B.util.getById(e)||this._createCanvasElement();B.util.addClass(this.lowerCanvasEl,"lower-canvas");this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl);this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var r;t=t||{};for(var n in e){r=e[n];if(!t.cssOnly){this._setBackstoreDimension(n,e[n]);r+="px";this.hasLostContext=true}t.backstoreOnly||this._setCssDimension(n,r)}this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles();this._initRetinaScaling();this._setImageSmoothing();this.calcOffset();t.cssOnly||this.requestRenderAll();return this},_setBackstoreDimension:function(e,t){this.lowerCanvasEl[e]=t;this.upperCanvasEl&&(this.upperCanvasEl[e]=t);this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t);this[e]=t;return this},_setCssDimension:function(e,t){this.lowerCanvasEl.style[e]=t;this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t);this.wrapperEl&&(this.wrapperEl.style[e]=t);return this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t=this._activeObject,r,n=false,i=true,o,s;this.viewportTransform=e;for(o=0,s=this._objects.length;o<s;o++){r=this._objects[o];r.group||r.setCoords(n,i)}t&&"activeSelection"===t.type&&t.setCoords(n,i);this.calcViewportBoundaries();this.renderOnAddRemove&&this.requestRenderAll();return this},zoomToPoint:function(e,t){var r=e,n=this.viewportTransform.slice(0);e=o(e,s(this.viewportTransform));n[0]=t;n[3]=t;var i=o(e,n);n[4]+=r.x-i.x;n[5]+=r.y-i.y;return this.setViewportTransform(n)},setZoom:function(e){this.zoomToPoint(new B.Point(0,0),e);return this},absolutePan:function(e){var t=this.viewportTransform.slice(0);t[4]=-e.x;t[5]=-e.y;return this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new B.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState();e._set("canvas",this);e.setCoords();this.fire("object:added",{target:e});e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e});e.fire("removed");delete e.canvas},clearContext:function(e){e.clearRect(0,0,this.width,this.height);return this},getContext:function(){return this.contextContainer},clear:function(){this._objects.length=0;this.backgroundImage=null;this.overlayImage=null;this.backgroundColor="";this.overlayColor="";if(this._hasITextHandlers){this.off("mouse:up",this._mouseUpITextHandler);this._iTextInstances=null;this._hasITextHandlers=false}this.clearContext(this.contextContainer);this.fire("canvas:cleared");this.renderOnAddRemove&&this.requestRenderAll();return this},renderAll:function(){var e=this.contextContainer;this.renderCanvas(e,this._objects);return this},renderAndReset:function(){this.isRendering=0;this.renderAll()},requestRenderAll:function(){this.isRendering||(this.isRendering=B.util.requestAnimFrame(this.renderAndResetBound));return this},calcViewportBoundaries:function(){var e={},t=this.width,r=this.height,n=s(this.viewportTransform);e.tl=o({x:0,y:0},n);e.br=o({x:t,y:r},n);e.tr=new B.Point(e.br.x,e.tl.y);e.bl=new B.Point(e.tl.x,e.br.y);this.vptCoords=e;return e},cancelRequestedRender:function(){if(this.isRendering){B.util.cancelAnimFrame(this.isRendering);this.isRendering=0}},renderCanvas:function(e,t){var r=this.viewportTransform,n=this.clipPath;this.cancelRequestedRender();this.calcViewportBoundaries();this.clearContext(e);this.fire("before:render",{ctx:e});this.clipTo&&B.util.clipContext(this,e);this._renderBackground(e);e.save();e.transform(r[0],r[1],r[2],r[3],r[4],r[5]);this._renderObjects(e,t);e.restore();!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e);this.clipTo&&e.restore();if(n){n.canvas=this;n.shouldCache();n._transformDone=true;n.renderCache({forClipping:true});this.drawClipPathOnCanvas(e)}this._renderOverlay(e);this.controlsAboveOverlay&&this.interactive&&this.drawControls(e);this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,r=this.clipPath;e.save();e.transform(t[0],t[1],t[2],t[3],t[4],t[5]);e.globalCompositeOperation="destination-in";r.transform(e);e.scale(1/r.zoomX,1/r.zoomY);e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY);e.restore()},_renderObjects:function(e,t){var r,n;for(r=0,n=t.length;r<n;++r)t[r]&&t[r].render(e)},_renderBackgroundOrOverlay:function(e,t){var r=this[t+"Color"],n;if(r){e.fillStyle=r.toLive?r.toLive(e,this):r;e.fillRect(r.offsetX||0,r.offsetY||0,this.width,this.height)}r=this[t+"Image"];if(r){if(this[t+"Vpt"]){n=this.viewportTransform;e.save();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}r.render(e);this[t+"Vpt"]&&e.restore()}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(e){return this._centerObject(e,new B.Point(this.getCenter().left,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new B.Point(e.getCenterPoint().x,this.getCenter().top))},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new B.Point(t.left,t.top))},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();this._centerObject(e,new B.Point(t.x,e.getCenterPoint().y));return this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new B.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenter(),t=s(this.viewportTransform);return o({x:e.left,y:e.top},t)},_centerObject:function(e,t){e.setPositionByOrigin(t,"center","center");e.setCoords();this.renderOnAddRemove&&this.requestRenderAll();return this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(e,t){var r=this.clipPath,n={version:B.version,objects:this._toObjects(e,t)};r=r&&r.toObject(t);i(n,this.__serializeBgOverlay(e,t));B.util.populateWithProperties(this,n,t);return n},_toObjects:function(t,r){return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(e){return this._toObject(e,t,r)},this)},_toObject:function(e,t,r){var n;if(!this.includeDefaultValues){n=e.includeDefaultValues;e.includeDefaultValues=false}var i=e[t](r);this.includeDefaultValues||(e.includeDefaultValues=n);return i},__serializeBgOverlay:function(e,t){var r={},n=this.backgroundImage,i=this.overlayImage;this.backgroundColor&&(r.background=this.backgroundColor.toObject?this.backgroundColor.toObject(t):this.backgroundColor);this.overlayColor&&(r.overlay=this.overlayColor.toObject?this.overlayColor.toObject(t):this.overlayColor);n&&!n.excludeFromExport&&(r.backgroundImage=this._toObject(n,e,t));i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t));return r},svgViewportTransformation:true,toSVG:function(e,t){e=e||{};e.reviver=t;var r=[];this._setSVGPreamble(r,e);this._setSVGHeader(r,e);this.clipPath&&r.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n');this._setSVGBgOverlayColor(r,"backgroundColor");this._setSVGBgOverlayImage(r,"backgroundImage",t);this._setSVGObjects(r,t);this.clipPath&&r.push("</g>\n");this._setSVGBgOverlayColor(r,"overlayColor");this._setSVGBgOverlayImage(r,"overlayImage",t);r.push("</svg>");return r.join("")},_setSVGPreamble:function(e,t){if(t.suppressPreamble)return;e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var r=t.width||this.width,n=t.height||this.height,i,o='viewBox="0 0 '+this.width+" "+this.height+'" ',s=B.Object.NUM_FRACTION_DIGITS;if(t.viewBox)o='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ';else if(this.svgViewportTransformation){i=this.viewportTransform;o='viewBox="'+a(-i[4]/i[0],s)+" "+a(-i[5]/i[3],s)+" "+a(this.width/i[0],s)+" "+a(this.height/i[3],s)+'" '}e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",B.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;if(t){t.clipPathId="CLIPPATH_"+B.Object.__uid++;return'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"}return""},createSVGRefElementsMarkup:function(){var r=this,e=["backgroundColor","overlayColor"].map(function(e){var t=r[e];if(t&&t.toLive)return t.toSVG(r,false)});return e.join("")},createSVGFontFacesMarkup:function(){var e="",t={},r,n,i,o,s,a,l,c,u,d=B.fontPaths,h=this._objects;for(c=0,u=h.length;c<u;c++){r=h[c];n=r.fontFamily;if(-1===r.type.indexOf("text")||t[n]||!d[n])continue;t[n]=true;if(!r.styles)continue;i=r.styles;for(s in i){o=i[s];for(l in o){a=o[l];n=a.fontFamily;!t[n]&&d[n]&&(t[n]=true)}}}for(var f in t)e+=["\t\t@font-face {\n","\t\t\tfont-family: '",f,"';\n","\t\t\tsrc: url('",d[f],"');\n","\t\t}\n"].join("");e=e&&['\t<style type="text/css">',"<![CDATA[\n",e,"]]>","</style>\n"].join("");return e},_setSVGObjects:function(e,t){var r,n,i,o=this._objects;for(n=0,i=o.length;n<i;n++){r=o[n];if(r.excludeFromExport)continue;this._setSVGObject(e,r,t)}},_setSVGObject:function(e,t,r){e.push(t.toSVG(r))},_setSVGBgOverlayImage:function(e,t,r){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(r))},_setSVGBgOverlayColor:function(e,t){var r=this[t],n=this.viewportTransform,i=this.width/n[0],o=this.height/n[3];if(!r)return;if(r.toLive){var s=r.repeat;e.push('<rect transform="translate(',i/2,",",o/2,')"',' x="',r.offsetX-i/2,'" y="',r.offsetY-o/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?r.source.width:i,'" height="',"repeat-x"===s||"no-repeat"===s?r.source.height:o,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',this[t],'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t=this._activeObject,r,n,i;if(e===t&&"activeSelection"===e.type){i=t._objects;for(r=i.length;r--;){n=i[r];c(this._objects,n);this._objects.unshift(n)}}else{c(this._objects,e);this._objects.unshift(e)}this.renderOnAddRemove&&this.requestRenderAll();return this},bringToFront:function(e){if(!e)return this;var t=this._activeObject,r,n,i;if(e===t&&"activeSelection"===e.type){i=t._objects;for(r=0;r<i.length;r++){n=i[r];c(this._objects,n);this._objects.push(n)}}else{c(this._objects,e);this._objects.push(e)}this.renderOnAddRemove&&this.requestRenderAll();return this},sendBackwards:function(e,t){if(!e)return this;var r=this._activeObject,n,i,o,s,a,l=0;if(e===r&&"activeSelection"===e.type){a=r._objects;for(n=0;n<a.length;n++){i=a[n];o=this._objects.indexOf(i);if(o>0+l){s=o-1;c(this._objects,i);this._objects.splice(s,0,i)}l++}}else{o=this._objects.indexOf(e);if(0!==o){s=this._findNewLowerIndex(e,o,t);c(this._objects,e);this._objects.splice(s,0,e)}}this.renderOnAddRemove&&this.requestRenderAll();return this},_findNewLowerIndex:function(e,t,r){var n,i;if(r){n=t;for(i=t-1;i>=0;--i){var o=e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e);if(o){n=i;break}}}else n=t-1;return n},bringForward:function(e,t){if(!e)return this;var r=this._activeObject,n,i,o,s,a,l=0;if(e===r&&"activeSelection"===e.type){a=r._objects;for(n=a.length;n--;){i=a[n];o=this._objects.indexOf(i);if(o<this._objects.length-1-l){s=o+1;c(this._objects,i);this._objects.splice(s,0,i)}l++}}else{o=this._objects.indexOf(e);if(o!==this._objects.length-1){s=this._findNewUpperIndex(e,o,t);c(this._objects,e);this._objects.splice(s,0,e)}}this.renderOnAddRemove&&this.requestRenderAll();return this},_findNewUpperIndex:function(e,t,r){var n,i,o;if(r){n=t;for(i=t+1,o=this._objects.length;i<o;++i){var s=e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e);if(s){n=i;break}}}else n=t+1;return n},moveTo:function(e,t){c(this._objects,e);this._objects.splice(t,0,e);return this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){if(this.isRendering){B.util.cancelAnimFrame(this.isRendering);this.isRendering=0}this.forEachObject(function(e){e.dispose&&e.dispose()});this._objects=[];this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose();this.backgroundImage=null;this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose();this.overlayImage=null;this._iTextInstances=null;this.contextContainer=null;B.util.cleanUpJsdomNode(this.lowerCanvasEl);this.lowerCanvasEl=void 0;return this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}});i(B.StaticCanvas.prototype,B.Observable);i(B.StaticCanvas.prototype,B.Collection);i(B.StaticCanvas.prototype,B.DataURLExporter);i(B.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=n();if(!t||!t.getContext)return null;var r=t.getContext("2d");if(!r)return null;switch(e){case"getImageData":return"undefined"!==typeof r.getImageData;case"setLineDash":return"undefined"!==typeof r.setLineDash;case"toDataURL":return"undefined"!==typeof t.toDataURL;case"toDataURLWithQuality":try{t.toDataURL("image/jpeg",0);return true}catch(e){}return false;default:return null}}});B.StaticCanvas.prototype.toJSON=B.StaticCanvas.prototype.toObject;if(B.isLikelyNode){B.StaticCanvas.prototype.createPNGStream=function(){var e=r(this.lowerCanvasEl);return e&&e.createPNGStream()};B.StaticCanvas.prototype.createJPEGStream=function(e){var t=r(this.lowerCanvasEl);return t&&t.createJPEGStream(e)}}})();(function(){var l=B.util.getPointer,a=B.util.degreesToRadians,f=B.util.radiansToDegrees,p=Math.atan2,c=Math.abs,u=B.StaticCanvas.supports("setLineDash"),d=.5;B.Canvas=B.util.createClass(B.StaticCanvas,{initialize:function(e,t){t=t||{};this.renderAndResetBound=this.renderAndReset.bind(this);this.requestRenderAllBound=this.requestRenderAll.bind(this);this._initStatic(e,t);this._initInteractive();this._createCacheCanvas()},uniScaleTransform:false,uniScaleKey:"shiftKey",centeredScaling:false,centeredRotation:false,centeredKey:"altKey",altActionKey:"shiftKey",interactive:true,selection:true,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:false,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:false,targetFindTolerance:0,skipTargetFind:false,isDrawingMode:false,preserveObjectStacking:false,snapAngle:0,snapThreshold:null,stopContextMenu:false,fireRightClick:false,fireMiddleClick:false,_initInteractive:function(){this._currentTransform=null;this._groupSelector=null;this._initWrapperElement();this._createUpperCanvas();this._initEventListeners();this._initRetinaScaling();this.freeDrawingBrush=B.PencilBrush&&new B.PencilBrush(this);this.calcOffset()},_chooseObjectsToRender:function(){var e=this.getActiveObjects(),t,r,n;if(e.length>0&&!this.preserveObjectStacking){r=[];n=[];for(var i=0,o=this._objects.length;i<o;i++){t=this._objects[i];-1===e.indexOf(t)?r.push(t):n.push(t)}e.length>1&&(this._activeObject._objects=n);r.push.apply(r,n)}else r=this._objects;return r},renderAll:function(){if(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode){this.clearContext(this.contextTop);this.contextTopDirty=false}this.hasLostContext&&this.renderTopLayer(this.contextTop);var e=this.contextContainer;this.renderCanvas(e,this._chooseObjectsToRender());return this},renderTopLayer:function(e){e.save();if(this.isDrawingMode&&this._isCurrentlyDrawing){this.freeDrawingBrush&&this.freeDrawingBrush._render();this.contextTopDirty=true}if(this.selection&&this._groupSelector){this._drawSelection(e);this.contextTopDirty=true}e.restore()},renderTop:function(){var e=this.contextTop;this.clearContext(e);this.renderTopLayer(e);this.fire("after:render");return this},_resetCurrentTransform:function(){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,skewX:e.original.skewX,skewY:e.original.skewY,left:e.original.left,top:e.original.top});if(this._shouldCenterTransform(e.target)){"center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1);"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1);e.originX="center";e.originY="center"}else{e.originX=e.original.originX;e.originY=e.original.originY}},containsPoint:function(e,t,r){var n=true,i=r||this.getPointer(e,n),o;o=t.group&&t.group===this._activeObject&&"activeSelection"===t.group.type?this._normalizePointer(t.group,i):{x:i.x,y:i.y};return t.containsPoint(o)||t._findTargetCorner(i)},_normalizePointer:function(e,t){var r=e.calcTransformMatrix(),n=B.util.invertTransform(r),i=this.restorePointerVpt(t);return B.util.transformPoint(i,n)},isTargetTransparent:function(e,t,r){if(e.shouldCache()&&e._cacheCanvas){var n=this._normalizePointer(e,{x:t,y:r}),i=e.cacheTranslationX+n.x*e.zoomX,o=e.cacheTranslationY+n.y*e.zoomY;var s=B.util.isTransparent(e._cacheContext,i,o,this.targetFindTolerance);return s}var a=this.contextCache,l=e.selectionBackgroundColor,c=this.viewportTransform;e.selectionBackgroundColor="";this.clearContext(a);a.save();a.transform(c[0],c[1],c[2],c[3],c[4],c[5]);e.render(a);a.restore();e===this._activeObject&&e._renderControls(a,{hasBorders:false,transparentCorners:false},{hasBorders:false});e.selectionBackgroundColor=l;var s=B.util.isTransparent(a,t,r,this.targetFindTolerance);return s},_isSelectionKeyPressed:function(t){var e=false;e="[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(e){return true===t[e]}):t[this.selectionKey];return e},_shouldClearSelection:function(e,t){var r=this.getActiveObjects(),n=this._activeObject;return!t||t&&n&&r.length>1&&-1===r.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t},_shouldCenterTransform:function(e){if(!e)return;var t=this._currentTransform,r;"scale"===t.action||"scaleX"===t.action||"scaleY"===t.action?r=this.centeredScaling||e.centeredScaling:"rotate"===t.action&&(r=this.centeredRotation||e.centeredRotation);return r?!t.altKey:t.altKey},_getOriginFromCorner:function(e,t){var r={x:e.originX,y:e.originY};"ml"===t||"tl"===t||"bl"===t?r.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(r.x="left");"tl"===t||"mt"===t||"tr"===t?r.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(r.y="top");return r},_getActionFromCorner:function(e,t,r){if(!t||!e)return"drag";switch(t){case"mtr":return"rotate";case"ml":case"mr":return r[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return r[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(e,t,r){if(!t)return;var n=this.getPointer(e),i=t._findTargetCorner(this.getPointer(e,true)),o=this._getActionFromCorner(r,i,e),s=this._getOriginFromCorner(t,i);this._currentTransform={target:t,action:o,corner:i,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:n.x-t.left,offsetY:n.y-t.top,originX:s.x,originY:s.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,theta:a(t.angle),width:t.width*t.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:e.shiftKey,altKey:e[this.centeredKey],original:B.util.saveObjectTransform(t)};this._currentTransform.original.originX=s.x;this._currentTransform.original.originY=s.y;this._resetCurrentTransform();this._beforeTransform(e)},_translateObject:function(e,t){var r=this._currentTransform,n=r.target,i=e-r.offsetX,o=t-r.offsetY,s=!n.get("lockMovementX")&&n.left!==i,a=!n.get("lockMovementY")&&n.top!==o;s&&n.set("left",i);a&&n.set("top",o);return s||a},_changeSkewTransformOrigin:function(e,t,r){var n="originX",i={0:"center"},o=t.target.skewX,s="left",a="right",l="mt"===t.corner||"ml"===t.corner?1:-1,c=1;e=e>0?1:-1;if("y"===r){o=t.target.skewY;s="top";a="bottom";n="originY"}i[-1]=s;i[1]=a;t.target.flipX&&(c*=-1);t.target.flipY&&(c*=-1);if(0===o){t.skewSign=-l*e*c;t[n]=i[-e]}else{o=o>0?1:-1;t.skewSign=o;t[n]=i[o*l*c]}},_skewObject:function(e,t,r){var n=this._currentTransform,i=n.target,o=false,s=i.get("lockSkewingX"),a=i.get("lockSkewingY");if(s&&"x"===r||a&&"y"===r)return false;var l=i.getCenterPoint(),c=i.toLocalPoint(new B.Point(e,t),"center","center")[r],u=i.toLocalPoint(new B.Point(n.lastX,n.lastY),"center","center")[r],d,h,f=i._getTransformedDimensions();this._changeSkewTransformOrigin(c-u,n,r);d=i.toLocalPoint(new B.Point(e,t),n.originX,n.originY)[r];h=i.translateToOriginPoint(l,n.originX,n.originY);o=this._setObjectSkew(d,n,r,f);n.lastX=e;n.lastY=t;i.setPositionByOrigin(h,n.originX,n.originY);return o},_setObjectSkew:function(e,t,r,n){var i=t.target,o,s=false,a=t.skewSign,l,c,u,d,h,f,p,m;if("x"===r){u="y";d="Y";h="X";p=0;m=i.skewY}else{u="x";d="X";h="Y";p=i.skewX;m=0}c=i._getTransformedDimensions(p,m);f=2*Math.abs(e)-c[r];if(f<=2)o=0;else{o=a*Math.atan(f/i["scale"+h]/(c[u]/i["scale"+d]));o=B.util.radiansToDegrees(o)}s=i["skew"+h]!==o;i.set("skew"+h,o);if(0!==i["skew"+d]){l=i._getTransformedDimensions();o=n[u]/l[u]*i["scale"+d];i.set("scale"+d,o)}return s},_scaleObject:function(e,t,r){var n=this._currentTransform,i=n.target,o=i.lockScalingX,s=i.lockScalingY,a=i.lockScalingFlip;if(o&&s)return false;var l=i.translateToOriginPoint(i.getCenterPoint(),n.originX,n.originY),c=i.toLocalPoint(new B.Point(e,t),n.originX,n.originY),u=i._getTransformedDimensions(),d=false;this._setLocalMouse(c,n);d=this._setObjectScale(c,n,o,s,r,a,u);i.setPositionByOrigin(l,n.originX,n.originY);return d},_setObjectScale:function(e,t,r,n,i,o,s){var a=t.target,l=false,c=false,u=false,d,h,f,p;f=e.x*a.scaleX/s.x;p=e.y*a.scaleY/s.y;d=a.scaleX!==f;h=a.scaleY!==p;if(o&&f<=0&&f<a.scaleX){l=true;e.x=0}if(o&&p<=0&&p<a.scaleY){c=true;e.y=0}if("equally"!==i||r||n)if(i)"x"!==i||a.get("lockUniScaling")?"y"!==i||a.get("lockUniScaling")||c||n||a.set("scaleY",p)&&(u=u||h):l||r||a.set("scaleX",f)&&(u=u||d);else{l||r||a.set("scaleX",f)&&(u=u||d);c||n||a.set("scaleY",p)&&(u=u||h)}else u=this._scaleObjectEqually(e,a,t,s);t.newScaleX=f;t.newScaleY=p;l||c||this._flipObject(t,i);return u},_scaleObjectEqually:function(e,t,r,n){var i=e.y+e.x,o=n.y*r.original.scaleY/t.scaleY+n.x*r.original.scaleX/t.scaleX,s,a=e.x<0?-1:1,l=e.y<0?-1:1;r.newScaleX=a*Math.abs(r.original.scaleX*i/o);r.newScaleY=l*Math.abs(r.original.scaleY*i/o);s=r.newScaleX!==t.scaleX||r.newScaleY!==t.scaleY;t.set("scaleX",r.newScaleX);t.set("scaleY",r.newScaleY);return s},_flipObject:function(e,t){e.newScaleX<0&&"y"!==t&&("left"===e.originX?e.originX="right":"right"===e.originX&&(e.originX="left"));e.newScaleY<0&&"x"!==t&&("top"===e.originY?e.originY="bottom":"bottom"===e.originY&&(e.originY="top"))},_setLocalMouse:function(e,t){var r=t.target,n=this.getZoom(),i=r.padding/n;if("right"===t.originX)e.x*=-1;else if("center"===t.originX){e.x*=2*t.mouseXSign;e.x<0&&(t.mouseXSign=-t.mouseXSign)}if("bottom"===t.originY)e.y*=-1;else if("center"===t.originY){e.y*=2*t.mouseYSign;e.y<0&&(t.mouseYSign=-t.mouseYSign)}c(e.x)>i?e.x<0?e.x+=i:e.x-=i:e.x=0;c(e.y)>i?e.y<0?e.y+=i:e.y-=i:e.y=0},_rotateObject:function(e,t){var r=this._currentTransform,n=r.target,i,i=n.translateToOriginPoint(n.getCenterPoint(),r.originX,r.originY);if(n.lockRotation)return false;var o=p(r.ey-i.y,r.ex-i.x),s=p(t-i.y,e-i.x),a=f(s-o+r.theta),l=true;if(n.snapAngle>0){var c=n.snapAngle,u=n.snapThreshold||c,d=Math.ceil(a/c)*c,h=Math.floor(a/c)*c;Math.abs(a-h)<u?a=h:Math.abs(a-d)<u&&(a=d)}a<0&&(a=360+a);a%=360;if(n.angle===a)l=false;else{n.angle=a;n.setPositionByOrigin(i,r.originX,r.originY)}return l},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,r=t.left,n=t.top,i=c(r),o=c(n);if(this.selectionColor){e.fillStyle=this.selectionColor;e.fillRect(t.ex-(r>0?0:-r),t.ey-(n>0?0:-n),i,o)}if(!this.selectionLineWidth||!this.selectionBorderColor)return;e.lineWidth=this.selectionLineWidth;e.strokeStyle=this.selectionBorderColor;if(this.selectionDashArray.length>1&&!u){var s=t.ex+d-(r>0?0:i),a=t.ey+d-(n>0?0:o);e.beginPath();B.util.drawDashedLine(e,s,a,s+i,a,this.selectionDashArray);B.util.drawDashedLine(e,s,a+o-1,s+i,a+o-1,this.selectionDashArray);B.util.drawDashedLine(e,s,a,s,a+o,this.selectionDashArray);B.util.drawDashedLine(e,s+i-1,a,s+i-1,a+o,this.selectionDashArray);e.closePath();e.stroke()}else{B.Object.prototype._setLineDash.call(this,e,this.selectionDashArray);e.strokeRect(t.ex+d-(r>0?0:i),t.ey+d-(n>0?0:o),i,o)}},findTarget:function(e,t){if(this.skipTargetFind)return;var r=true,n=this.getPointer(e,r),i=this._activeObject,o=this.getActiveObjects(),s,a;this.targets=[];if(o.length>1&&!t&&i===this._searchPossibleTargets([i],n))return i;if(1===o.length&&i._findTargetCorner(n))return i;if(1===o.length&&i===this._searchPossibleTargets([i],n)){if(!this.preserveObjectStacking)return i;s=i;a=this.targets;this.targets=[]}var l=this._searchPossibleTargets(this._objects,n);if(e[this.altSelectionKey]&&l&&s&&l!==s){l=s;this.targets=a}return l},_checkTarget:function(e,t,r){if(t&&t.visible&&t.evented&&this.containsPoint(null,t,e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return true;var n=this.isTargetTransparent(t,r.x,r.y);if(!n)return true}},_searchPossibleTargets:function(e,t){var r,n=e.length,i;while(n--){var o=e[n];var s=o.group&&"activeSelection"!==o.group.type?this._normalizePointer(o.group,t):t;if(this._checkTarget(s,o,t)){r=e[n];if(r.subTargetCheck&&r instanceof B.Group){i=this._searchPossibleTargets(r._objects,t);i&&this.targets.push(i)}break}}return r},restorePointerVpt:function(e){return B.util.transformPoint(e,B.util.invertTransform(this.viewportTransform))},getPointer:function(e,t){if(this._absolutePointer&&!t)return this._absolutePointer;if(this._pointer&&t)return this._pointer;var r=l(e),n=this.upperCanvasEl,i=n.getBoundingClientRect(),o=i.width||0,s=i.height||0,a;if(!o||!s){"top"in i&&"bottom"in i&&(s=Math.abs(i.top-i.bottom));"right"in i&&"left"in i&&(o=Math.abs(i.right-i.left))}this.calcOffset();r.x=r.x-this._offset.left;r.y=r.y-this._offset.top;t||(r=this.restorePointerVpt(r));a=0===o||0===s?{width:1,height:1}:{width:n.width/o,height:n.height/s};return{x:r.x*a.width,y:r.y*a.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement();B.util.addClass(this.upperCanvasEl,"upper-canvas "+e);this.wrapperEl.appendChild(this.upperCanvasEl);this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl);this._applyCanvasStyle(this.upperCanvasEl);this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement();this.cacheCanvasEl.setAttribute("width",this.width);this.cacheCanvasEl.setAttribute("height",this.height);this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=B.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass});B.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"});B.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,r=this.height||e.height;B.util.setStyle(e,{position:"absolute",width:t+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none"});e.width=t;e.height=r;B.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;if(e)return"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e];return[]},_onObjectRemoved:function(e){if(e===this._activeObject){this.fire("before:selection:cleared",{target:e});this._discardActiveObject();this.fire("selection:cleared",{target:e});e.fire("deselected")}this._hoveredTarget===e&&(this._hoveredTarget=null);this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(t,e){var r=false,n=this.getActiveObjects(),i=[],o=[],s={e:e};t.forEach(function(e){if(-1===n.indexOf(e)){r=true;e.fire("deselected",s);o.push(e)}});n.forEach(function(e){if(-1===t.indexOf(e)){r=true;e.fire("selected",s);i.push(e)}});if(t.length>0&&n.length>0){s.selected=i;s.deselected=o;s.updated=i[0]||o[0];s.target=this._activeObject;r&&this.fire("selection:updated",s)}else if(n.length>0){if(1===n.length){s.target=i[0];this.fire("object:selected",s)}s.selected=i;s.target=this._activeObject;this.fire("selection:created",s)}else if(t.length>0){s.deselected=o;this.fire("selection:cleared",s)}},setActiveObject:function(e,t){var r=this.getActiveObjects();this._setActiveObject(e,t);this._fireSelectionEvents(r,t);return this},_setActiveObject:function(e,t){if(this._activeObject===e)return false;if(!this._discardActiveObject(t,e))return false;if(e.onSelect({e:t}))return false;this._activeObject=e;return true},_discardActiveObject:function(e,t){var r=this._activeObject;if(r){if(r.onDeselect({e:e,object:t}))return false;this._activeObject=null}return true},discardActiveObject:function(e){var t=this.getActiveObjects();t.length&&this.fire("before:selection:cleared",{target:t[0],e:e});this._discardActiveObject(e);this._fireSelectionEvents(t,e);return this},dispose:function(){var e=this.wrapperEl;this.removeListeners();e.removeChild(this.upperCanvasEl);e.removeChild(this.lowerCanvasEl);this.contextCache=null;this.contextTop=null;["upperCanvasEl","cacheCanvasEl"].forEach(function(e){B.util.cleanUpJsdomNode(this[e]);this[e]=void 0}.bind(this));e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl);delete this.wrapperEl;B.StaticCanvas.prototype.dispose.call(this);return this},clear:function(){this.discardActiveObject();this.clearContext(this.contextTop);return this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,r){var n=this._realizeGroupTransformOnObject(e),i=this.callSuper("_toObject",e,t,r);this._unwindGroupTransformOnObject(e,n);return i},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"];var r={};e.forEach(function(e){r[e]=t[e]});this._activeObject.realizeTransform(t);return r}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,r){var n=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,r);this._unwindGroupTransformOnObject(t,n)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop();B.StaticCanvas.prototype.setViewportTransform.call(this,e)}});for(var e in B.StaticCanvas)"prototype"!==e&&(B.Canvas[e]=B.StaticCanvas[e]);B.isTouchSupported&&(B.Canvas.prototype._setCursorFromEvent=function(){})})();(function(){var i={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},r=B.util.addListener,n=B.util.removeListener,s=3,a=2,l=1,o={passive:false};function c(e,t){return"which"in e?e.which===t:e.button===t-1}B.util.object.extend(B.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners();this._bindEvents();this.addOrRemove(r,"add")},addOrRemove:function(e,t){e(B.window,"resize",this._onResize);e(this.upperCanvasEl,"mousedown",this._onMouseDown);e(this.upperCanvasEl,"mousemove",this._onMouseMove,o);e(this.upperCanvasEl,"mouseout",this._onMouseOut);e(this.upperCanvasEl,"mouseenter",this._onMouseEnter);e(this.upperCanvasEl,"wheel",this._onMouseWheel);e(this.upperCanvasEl,"contextmenu",this._onContextMenu);e(this.upperCanvasEl,"dblclick",this._onDoubleClick);e(this.upperCanvasEl,"touchstart",this._onMouseDown,o);e(this.upperCanvasEl,"touchmove",this._onMouseMove,o);e(this.upperCanvasEl,"dragover",this._onDragOver);e(this.upperCanvasEl,"dragenter",this._onDragEnter);e(this.upperCanvasEl,"dragleave",this._onDragLeave);e(this.upperCanvasEl,"drop",this._onDrop);if("undefined"!==typeof eventjs&&t in eventjs){eventjs[t](this.upperCanvasEl,"gesture",this._onGesture);eventjs[t](this.upperCanvasEl,"drag",this._onDrag);eventjs[t](this.upperCanvasEl,"orientation",this._onOrientationChange);eventjs[t](this.upperCanvasEl,"shake",this._onShake);eventjs[t](this.upperCanvasEl,"longpress",this._onLongPress)}},removeListeners:function(){this.addOrRemove(n,"remove");n(B.document,"mouseup",this._onMouseUp);n(B.document,"touchend",this._onMouseUp,o);n(B.document,"mousemove",this._onMouseMove,o);n(B.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){if(this.eventsBound)return;this._onMouseDown=this._onMouseDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this._onMouseUp=this._onMouseUp.bind(this);this._onResize=this._onResize.bind(this);this._onGesture=this._onGesture.bind(this);this._onDrag=this._onDrag.bind(this);this._onShake=this._onShake.bind(this);this._onLongPress=this._onLongPress.bind(this);this._onOrientationChange=this._onOrientationChange.bind(this);this._onMouseWheel=this._onMouseWheel.bind(this);this._onMouseOut=this._onMouseOut.bind(this);this._onMouseEnter=this._onMouseEnter.bind(this);this._onContextMenu=this._onContextMenu.bind(this);this._onDoubleClick=this._onDoubleClick.bind(this);this._onDragOver=this._onDragOver.bind(this);this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter");this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave");this._onDrop=this._simpleEventHandler.bind(this,"drop");this.eventsBound=true},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e});this._hoveredTarget=null;t&&t.fire("mouseout",{e:e});this._iTextInstances&&this._iTextInstances.forEach(function(e){e.isEditing&&e.hiddenTextarea.focus()})},_onMouseEnter:function(e){if(!this.findTarget(e)){this.fire("mouse:over",{target:null,e:e});this._hoveredTarget=null}},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onContextMenu:function(e){if(this.stopContextMenu){e.stopPropagation();e.preventDefault()}return false},_onDoubleClick:function(e){this._cacheTransformEventData(e);this._handleEvent(e,"dblclick");this._resetTransformEventData(e)},_onMouseDown:function(e){this.__onMouseDown(e);this._resetTransformEventData();r(B.document,"touchend",this._onMouseUp,o);r(B.document,"touchmove",this._onMouseMove,o);n(this.upperCanvasEl,"mousemove",this._onMouseMove,o);n(this.upperCanvasEl,"touchmove",this._onMouseMove,o);if("touchstart"===e.type)n(this.upperCanvasEl,"mousedown",this._onMouseDown);else{r(B.document,"mouseup",this._onMouseUp);r(B.document,"mousemove",this._onMouseMove,o)}},_onMouseUp:function(e){this.__onMouseUp(e);this._resetTransformEventData();n(B.document,"mouseup",this._onMouseUp);n(B.document,"touchend",this._onMouseUp,o);n(B.document,"mousemove",this._onMouseMove,o);n(B.document,"touchmove",this._onMouseMove,o);r(this.upperCanvasEl,"mousemove",this._onMouseMove,o);r(this.upperCanvasEl,"touchmove",this._onMouseMove,o);if("touchend"===e.type){var t=this;setTimeout(function(){r(t.upperCanvasEl,"mousedown",t._onMouseDown)},400)}},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault();this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;if(!!t!==!!e||t&&e&&t!==e)return true;if(t&&t.isEditing)return false;return false},__onMouseUp:function(e){var t,r=this._currentTransform,n=this._groupSelector,i=false,o=!n||0===n.left&&0===n.top;this._cacheTransformEventData(e);t=this._target;this._handleEvent(e,"up:before");if(c(e,s)){this.fireRightClick&&this._handleEvent(e,"up",s,o);return}if(c(e,a)){this.fireMiddleClick&&this._handleEvent(e,"up",a,o);this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(e);return}if(r){this._finalizeCurrentTransform(e);i=r.actionPerformed}if(!o){this._maybeGroupObjects(e);i=i||this._shouldRender(t)}t&&(t.isMoving=false);this._setCursorFromEvent(e,t);this._handleEvent(e,"up",l,o);this._groupSelector=null;this._currentTransform=null;t&&(t.__corner=0);i?this.requestRenderAll():o||this.renderTop()},_simpleEventHandler:function(e,t){var r=this.findTarget(t),n=this.targets,i={e:t,target:r,subTargets:n};this.fire(e,i);r&&r.fire(e,i);if(!n)return r;for(var o=0;o<n.length;o++)n[o].fire(e,i);return r},_handleEvent:function(e,t,r,n){var i=this._target,o=this.targets||[],s={e:e,target:i,subTargets:o,button:r||l,isClick:n||false,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+t,s);i&&i.fire("mouse"+t,s);for(var a=0;a<o.length;a++)o[a].fire("mouse"+t,s)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,r=t.target,n,i={e:e,target:r,transform:t};r._scaling&&(r._scaling=false);r.setCoords();if(t.actionPerformed||this.stateful&&r.hasStateChanged()){if(t.actionPerformed){n=this._addEventOptions(i,t);this._fire(n,i)}this._fire("modified",i)}},_addEventOptions:function(e,t){var r,n;switch(t.action){case"scaleX":r="scaled";n="x";break;case"scaleY":r="scaled";n="y";break;case"skewX":r="skewed";n="x";break;case"skewY":r="skewed";n="y";break;case"scale":r="scaled";n="equally";break;case"rotate":r="rotated";break;case"drag":r="moved";break}e.by=n;return r},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=true;this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();this.clipTo&&B.util.clipContext(this,this.contextTop);var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t);this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t)}this.setCursor(this.freeDrawingCursor);this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){this._isCurrentlyDrawing=false;this.clipTo&&this.contextTop.restore();this.freeDrawingBrush.onMouseUp();this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e);this._handleEvent(e,"down:before");var t=this._target;if(c(e,s)){this.fireRightClick&&this._handleEvent(e,"down",s);return}if(c(e,a)){this.fireMiddleClick&&this._handleEvent(e,"down",a);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(e);return}if(this._currentTransform)return;var r=this._pointer;this._previousPointer=r;var n=this._shouldRender(t),i=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t))this.discardActiveObject(e);else if(i){this._handleGrouping(e,t);t=this._activeObject}!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:r.x,ey:r.y,top:0,left:0});if(t){var o=t===this._activeObject;t.selectable&&this.setActiveObject(t,e);t!==this._activeObject||!t.__corner&&i||this._setupCurrentTransform(e,t,o)}this._handleEvent(e,"down");(n||i)&&this.requestRenderAll()},_resetTransformEventData:function(){this._target=null;this._pointer=null;this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData();this._pointer=this.getPointer(e,true);this._absolutePointer=this.restorePointerVpt(this._pointer);this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState();this.fire("before:transform",{e:e,transform:t});t.corner&&this.onBeforeScaleRotate(t.target)},__onMouseMove:function(e){this._handleEvent(e,"move:before");this._cacheTransformEventData(e);var t,r;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(e);return}if("undefined"!==typeof e.touches&&e.touches.length>1)return;var n=this._groupSelector;if(n){r=this._pointer;n.left=r.x-n.ex;n.top=r.y-n.ey;this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{t=this.findTarget(e)||null;this._setCursorFromEvent(e,t);this._fireOverOutEvents(t,e)}this._handleEvent(e,"move");this._resetTransformEventData()},_fireOverOutEvents:function(e,t){this.fireSynteticInOutEvents(e,t,{targetName:"_hoveredTarget",canvasEvtOut:"mouse:out",evtOut:"mouseout",canvasEvtIn:"mouse:over",evtIn:"mouseover"})},_fireEnterLeaveEvents:function(e,t){this.fireSynteticInOutEvents(e,t,{targetName:"_draggedoverTarget",evtOut:"dragleave",evtIn:"dragenter"})},fireSynteticInOutEvents:function(e,t,r){var n,i,o=this[r.targetName],s,a,l=o!==e,c=r.canvasEvtIn,u=r.canvasEvtOut;if(l){n={e:t,target:e,previousTarget:o};i={e:t,target:o,nextTarget:e};this[r.targetName]=e}a=e&&l;s=o&&l;if(s){u&&this.fire(u,i);o.fire(r.evtOut,i)}if(a){c&&this.fire(c,n);e.fire(r.evtIn,n)}},__onMouseWheel:function(e){this._cacheTransformEventData(e);this._handleEvent(e,"wheel");this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),r=this._currentTransform;r.reset=false;r.target.isMoving=true;r.shiftKey=e.shiftKey;r.altKey=e[this.centeredKey];this._beforeScaleTransform(e,r);this._performTransformAction(e,r,t);r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,r){var n=r.x,i=r.y,o=t.action,s=false,a={target:t.target,e:e,transform:t,pointer:r};if("rotate"===o)(s=this._rotateObject(n,i))&&this._fire("rotating",a);else if("scale"===o)(s=this._onScale(e,t,n,i))&&this._fire("scaling",a);else if("scaleX"===o)(s=this._scaleObject(n,i,"x"))&&this._fire("scaling",a);else if("scaleY"===o)(s=this._scaleObject(n,i,"y"))&&this._fire("scaling",a);else if("skewX"===o)(s=this._skewObject(n,i,"x"))&&this._fire("skewing",a);else if("skewY"===o)(s=this._skewObject(n,i,"y"))&&this._fire("skewing",a);else{s=this._translateObject(n,i);if(s){this._fire("moving",a);this.setCursor(a.target.moveCursor||this.moveCursor)}}t.actionPerformed=t.actionPerformed||s},_fire:function(e,t){this.fire("object:"+e,t);t.target.fire(e,t)},_beforeScaleTransform:function(e,t){if("scale"===t.action||"scaleX"===t.action||"scaleY"===t.action){var r=this._shouldCenterTransform(t.target);if(r&&("center"!==t.originX||"center"!==t.originY)||!r&&"center"===t.originX&&"center"===t.originY){this._resetCurrentTransform();t.reset=true}}},_onScale:function(e,t,r,n){if(this._isUniscalePossible(e,t.target)){t.currentAction="scale";return this._scaleObject(r,n)}t.reset||"scale"!==t.currentAction||this._resetCurrentTransform();t.currentAction="scaleEqually";return this._scaleObject(r,n,"equally")},_isUniscalePossible:function(e,t){return(e[this.uniScaleKey]||this.uniScaleTransform)&&!t.get("lockUniScaling")},_setCursorFromEvent:function(e,t){if(!t){this.setCursor(this.defaultCursor);return false}var r=t.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,i=(!n||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,true));i?this.setCursor(this.getCornerCursor(i,t,e)):this.setCursor(r)},getCornerCursor:function(e,t,r){return this.actionIsDisabled(e,t,r)?this.notAllowedCursor:e in i?this._getRotatedCornerCursor(e,t,r):"mtr"===e&&t.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(e,t,r){return"mt"===e||"mb"===e?r[this.altActionKey]?t.lockSkewingX:t.lockScalingY:"ml"===e||"mr"===e?r[this.altActionKey]?t.lockSkewingY:t.lockScalingX:"mtr"===e?t.lockRotation:this._isUniscalePossible(r,t)?t.lockScalingX&&t.lockScalingY:t.lockScalingX||t.lockScalingY},_getRotatedCornerCursor:function(e,t,r){var n=Math.round(t.angle%360/45);n<0&&(n+=8);n+=i[e];r[this.altActionKey]&&i[e]%2===0&&(n+=2);n%=8;return this.cursorMap[n]}})})();(function(){var h=Math.min,f=Math.max;B.util.object.extend(B.Canvas.prototype,{_shouldGroup:function(e,t){var r=this._activeObject;return r&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(r!==t||"activeSelection"===r.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var r=this._activeObject;if(r.__corner)return;if(t===r){t=this.findTarget(e,true);if(!t||!t.selectable)return}r&&"activeSelection"===r.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e)},_updateActiveSelection:function(e,t){var r=this._activeObject,n=r._objects.slice(0);if(r.contains(e)){r.removeWithUpdate(e);this._hoveredTarget=e;1===r.size()&&this._setActiveObject(r.item(0),t)}else{r.addWithUpdate(e);this._hoveredTarget=r}this._fireSelectionEvents(n,t)},_createActiveSelection:function(e,t){var r=this.getActiveObjects(),n=this._createGroup(e);this._hoveredTarget=n;this._setActiveObject(n,t);this._fireSelectionEvents(r,t)},_createGroup:function(e){var t=this._objects,r=t.indexOf(this._activeObject)<t.indexOf(e),n=r?[this._activeObject,e]:[e,this._activeObject];this._activeObject.isEditing&&this._activeObject.exitEditing();return new B.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(e){var t=this._collectObjects(e),r;if(1===t.length)this.setActiveObject(t[0],e);else if(t.length>1){r=new B.ActiveSelection(t.reverse(),{canvas:this});this.setActiveObject(r,e)}},_collectObjects:function(e){var t=[],r,n=this._groupSelector.ex,i=this._groupSelector.ey,o=n+this._groupSelector.left,s=i+this._groupSelector.top,a=new B.Point(h(n,o),h(i,s)),l=new B.Point(f(n,o),f(i,s)),c=!this.selectionFullyContained,u=n===o&&i===s;for(var d=this._objects.length;d--;){r=this._objects[d];if(!r||!r.selectable||!r.visible||r.onSelect({e:e}))continue;if(c&&r.intersectsWithRect(a,l)||r.isContainedWithinRect(a,l)||c&&r.containsPoint(a)||c&&r.containsPoint(l)){t.push(r);if(u)break}}return t},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e);this.setCursor(this.defaultCursor);this._groupSelector=null}})})();(function(){var i=B.StaticCanvas.supports("toDataURLWithQuality");B.util.object.extend(B.StaticCanvas.prototype,{toDataURL:function(e){e=e||{};var t=e.format||"png",r=e.quality||1,n=(e.multiplier||1)*(e.enableRetinaScaling?1:1/this.getRetinaScaling()),i={left:e.left||0,top:e.top||0,width:e.width||0,height:e.height||0};return this.__toDataURLWithMultiplier(t,r,i,n)},__toDataURLWithMultiplier:function(e,t,r,n){var i=this.width,o=this.height,s=(r.width||this.width)*n,a=(r.height||this.height)*n,l=this.getZoom(),c=l*n,u=this.viewportTransform,d=(u[4]-r.left)*n,h=(u[5]-r.top)*n,f=[c,0,0,c,d,h],p=this.interactive,m=this.skipOffscreen,g=i!==s||o!==a;this.viewportTransform=f;this.skipOffscreen=false;this.interactive=false;g&&this.setDimensions({width:s,height:a},{backstoreOnly:true});this.renderAll();var v=this.__toDataURL(e,t,r);this.interactive=p;this.skipOffscreen=m;this.viewportTransform=u;g&&this.setDimensions({width:i,height:o},{backstoreOnly:true});this.renderAll();return v},__toDataURL:function(e,t){var r=this.contextContainer.canvas;var n=i?r.toDataURL("image/"+e,t):r.toDataURL("image/"+e);return n}})})();(function(e){"use strict";var C=e.fabric||(e.fabric={}),t=C.util.object.extend,s=C.util.object.clone,n=C.util.toFixed,r=C.util.string.capitalize,a=C.util.degreesToRadians,i=C.StaticCanvas.supports("setLineDash"),o=!C.isLikelyNode,l=2;if(C.Object)return;C.Object=C.util.createClass(C.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:false,flipY:false,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:true,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:false,centeredRotation:true,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:true,evented:true,visible:true,hasControls:true,hasBorders:true,hasRotatingPoint:true,rotatingPointOffset:40,perPixelTargetFind:false,includeDefaultValues:true,clipTo:null,lockMovementX:false,lockMovementY:false,lockRotation:false,lockScalingX:false,lockScalingY:false,lockUniScaling:false,lockSkewingX:false,lockSkewingY:false,lockScalingFlip:false,excludeFromExport:false,objectCaching:o,statefullCache:false,noScaleCache:true,dirty:true,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:false,absolutePositioned:false,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={};this._cacheCanvas=C.util.createCanvasElement();this._cacheContext=this._cacheCanvas.getContext("2d");this._updateCacheCanvas();this.dirty=true},_limitCacheSize:function(e){var t=C.perfLimitSizeTotal,r=e.width,n=e.height,i=C.maxCacheSideLimit,o=C.minCacheSideLimit;if(r<=i&&n<=i&&r*n<=t){r<o&&(e.width=o);n<o&&(e.height=o);return e}var s=r/n,a=C.util.limitDimsByArea(s,t),l=C.util.capValue,c=l(o,a.x,i),u=l(o,a.y,i);if(r>c){e.zoomX/=r/c;e.width=c;e.capped=true}if(n>u){e.zoomY/=n/u;e.height=u;e.capped=true}return e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getNonTransformedDimensions(),r=e.scaleX,n=e.scaleY,i=t.x*r,o=t.y*n;return{width:i+l,height:o+l,zoomX:r,zoomY:n,x:t.x,y:t.y}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var t=e._currentTransform.target,r=e._currentTransform.action;if(this===t&&r.slice&&"scale"===r.slice(0,5))return false}var n=this._cacheCanvas,i=this._limitCacheSize(this._getCacheCanvasDimensions()),o=C.minCacheSideLimit,s=i.width,a=i.height,l,c,u=i.zoomX,d=i.zoomY,h=s!==this.cacheWidth||a!==this.cacheHeight,f=this.zoomX!==u||this.zoomY!==d,p=h||f,m=0,g=0,v=false;if(h){var _=this._cacheCanvas.width,b=this._cacheCanvas.height,y=s>_||a>b,j=(s<.9*_||a<.9*b)&&_>o&&b>o;v=y||j;if(y&&!i.capped&&(s>o||a>o)){m=.1*s;g=.1*a}}if(p){if(v){n.width=Math.ceil(s+m);n.height=Math.ceil(a+g)}else{this._cacheContext.setTransform(1,0,0,1,0,0);this._cacheContext.clearRect(0,0,n.width,n.height)}l=i.x*u/2;c=i.y*d/2;this.cacheTranslationX=Math.round(n.width/2-l)+l;this.cacheTranslationY=Math.round(n.height/2-c)+c;this.cacheWidth=s;this.cacheHeight=a;this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY);this._cacheContext.scale(u,d);this.zoomX=u;this.zoomY=d;return true}return false},setOptions:function(e){this._setOptions(e);this._initGradient(e.fill,"fill");this._initGradient(e.stroke,"stroke");this._initClipping(e);this._initPattern(e.fill,"fill");this._initPattern(e.stroke,"stroke")},transform:function(e){var t;t=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix();e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},toObject:function(e){var t=C.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:C.version,originX:this.originX,originY:this.originY,left:n(this.left,t),top:n(this.top,t),width:n(this.width,t),height:n(this.height,t),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,t),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,t),scaleX:n(this.scaleX,t),scaleY:n(this.scaleY,t),angle:n(this.angle,t),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,t),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,t),skewY:n(this.skewY,t)};if(this.clipPath){r.clipPath=this.clipPath.toObject(e);r.clipPath.inverted=this.clipPath.inverted;r.clipPath.absolutePositioned=this.clipPath.absolutePositioned}C.util.populateWithProperties(this,r,e);this.includeDefaultValues||(r=this._removeDefaultValues(r));return r},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(r){var n=C.util.getKlass(r.type).prototype,e=n.stateProperties;e.forEach(function(e){r[e]===n[e]&&delete r[e];var t="[object Array]"===Object.prototype.toString.call(r[e])&&"[object Array]"===Object.prototype.toString.call(n[e]);t&&0===r[e].length&&0===n[e].length&&delete r[e]});return r},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){var e=this.scaleX,t=this.scaleY;if(this.group){var r=this.group.getObjectScaling();e*=r.scaleX;t*=r.scaleY}return{scaleX:e,scaleY:t}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,r=e.scaleY;if(this.canvas){var n=this.canvas.getZoom();var i=this.canvas.getRetinaScaling();t*=n*i;r*=n*i}return{scaleX:t,scaleY:r}},getObjectOpacity:function(){var e=this.opacity;this.group&&(e*=this.group.getObjectOpacity());return e},_set:function(e,t){var r="scaleX"===e||"scaleY"===e,n=this[e]!==t,i=false;r&&(t=this._constrainScale(t));if("scaleX"===e&&t<0){this.flipX=!this.flipX;t*=-1}else if("scaleY"===e&&t<0){this.flipY=!this.flipY;t*=-1}else"shadow"!==e||!t||t instanceof C.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",t):t=new C.Shadow(t);this[e]=t;if(n){i=this.group&&this.group.isOnACache();if(this.cacheProperties.indexOf(e)>-1){this.dirty=true;i&&this.group.set("dirty",true)}else i&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",true)}return this},setOnGroup:function(){},getViewportTransform:function(){if(this.canvas&&this.canvas.viewportTransform)return this.canvas.viewportTransform;return C.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(e){if(this.isNotVisible())return;if(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen())return;e.save();this._setupCompositeOperation(e);this.drawSelectionBackground(e);this.transform(e);this._setOpacity(e);this._setShadow(e,this);this.transformMatrix&&e.transform.apply(e,this.transformMatrix);this.clipTo&&C.util.clipContext(this,e);if(this.shouldCache()){this.renderCache();this.drawCacheOnCanvas(e)}else{this._removeCacheCanvas();this.dirty=false;this.drawObject(e);this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})}this.clipTo&&e.restore();e.restore()},renderCache:function(e){e=e||{};this._cacheCanvas||this._createCacheCanvas();if(this.isCacheDirty()){this.statefullCache&&this.saveState({propertySet:"cacheProperties"});this.drawObject(this._cacheContext,e.forClipping);this.dirty=false}},_removeCacheCanvas:function(){this._cacheCanvas=null;this.cacheWidth=0;this.cacheHeight=0},needsItsOwnCache:function(){if("stroke"===this.paintFirst&&"object"===typeof this.shadow)return true;if(this.clipPath)return true;return false},shouldCache:function(){this.ownCaching=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache());return this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e){var t=this.clipPath;e.save();t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in";if(t.absolutePositioned){var r=C.util.invertTransform(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}t.transform(e);e.scale(1/t.zoomX,1/t.zoomY);e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY);e.restore()},drawObject:function(e,t){if(t)this._setClippingProperties(e);else{this._renderBackground(e);this._setStrokeStyles(e,this);this._setFillStyles(e,this)}this._render(e);this._drawClipPath(e)},_drawClipPath:function(e){var t=this.clipPath;if(!t)return;t.canvas=this.canvas;t.shouldCache();t._transformDone=true;t.renderCache({forClipping:true});this.drawClipPathOnCache(e)},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY);e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return false;if(this._cacheCanvas&&!e&&this._updateCacheCanvas())return true;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!e){var t=this.cacheWidth/this.zoomX;var r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-r/2,t,r)}return true}return false},_renderBackground:function(e){if(!this.backgroundColor)return;var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor;e.fillRect(-t.x/2,-t.y/2,t.x,t.y);this._removeShadow(e)},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){if(t.stroke){e.lineWidth=t.strokeWidth;e.lineCap=t.strokeLineCap;e.lineDashOffset=t.strokeDashOffset;e.lineJoin=t.strokeLineJoin;e.miterLimit=t.strokeMiterLimit;e.strokeStyle=t.stroke.toLive?t.stroke.toLive(e,this):t.stroke}},_setFillStyles:function(e,t){t.fill&&(e.fillStyle=t.fill.toLive?t.fill.toLive(e,this):t.fill)},_setClippingProperties:function(e){e.globalAlpha=1;e.strokeStyle="transparent";e.fillStyle="#000000"},_setLineDash:function(e,t,r){if(!t)return;1&t.length&&t.push.apply(t,t);i?e.setLineDash(t):r&&r(e)},_renderControls:function(e,t){var r=this.getViewportTransform(),n=this.calcTransformMatrix(),i,o,s;t=t||{};o="undefined"!==typeof t.hasBorders?t.hasBorders:this.hasBorders;s="undefined"!==typeof t.hasControls?t.hasControls:this.hasControls;n=C.util.multiplyTransformMatrices(r,n);i=C.util.qrDecompose(n);e.save();e.translate(i.translateX,i.translateY);e.lineWidth=1*this.borderScaleFactor;this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1);if(t.forActiveSelection){e.rotate(a(i.angle));o&&this.drawBordersInGroup(e,i,t)}else{e.rotate(a(this.angle));o&&this.drawBorders(e,t)}s&&this.drawControls(e,t);e.restore()},_setShadow:function(e){if(!this.shadow)return;var t=this.canvas&&this.canvas.viewportTransform[0]||1,r=this.canvas&&this.canvas.viewportTransform[3]||1,n=this.getObjectScaling();if(this.canvas&&this.canvas._isRetinaScaling()){t*=C.devicePixelRatio;r*=C.devicePixelRatio}e.shadowColor=this.shadow.color;e.shadowBlur=this.shadow.blur*C.browserShadowBlurConstant*(t+r)*(n.scaleX+n.scaleY)/4;e.shadowOffsetX=this.shadow.offsetX*t*n.scaleX;e.shadowOffsetY=this.shadow.offsetY*r*n.scaleY},_removeShadow:function(e){if(!this.shadow)return;e.shadowColor="";e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var r=t.gradientTransform||t.patternTransform;var n=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;e.translate(n,i);r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]);return{offsetX:n,offsetY:i}},_renderPaintInOrder:function(e){if("stroke"===this.paintFirst){this._renderStroke(e);this._renderFill(e)}else{this._renderFill(e);this._renderStroke(e)}},_renderFill:function(e){if(!this.fill)return;e.save();this._applyPatternGradientTransform(e,this.fill);"evenodd"===this.fillRule?e.fill("evenodd"):e.fill();e.restore()},_renderStroke:function(e){if(!this.stroke||0===this.strokeWidth)return;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e);e.save();this._setLineDash(e,this.strokeDashArray,this._renderDashedStroke);this._applyPatternGradientTransform(e,this.stroke);e.stroke();e.restore()},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=C.util.qrDecompose(this.transformMatrix);this.flipX=false;this.flipY=false;this.set("scaleX",e.scaleX);this.set("scaleY",e.scaleY);this.angle=e.angle;this.skewX=e.skewX;this.skewY=0}},_removeTransformMatrix:function(e){var t=this._findCenterFromElement();if(this.transformMatrix){this._assignTransformMatrixProps();t=C.util.transformPoint(t,this.transformMatrix)}this.transformMatrix=null;if(e){this.scaleX*=e.scaleX;this.scaleY*=e.scaleY;this.cropX=e.cropX;this.cropY=e.cropY;t.x+=e.offsetLeft;t.y+=e.offsetTop;this.width=e.width;this.height=e.height}this.setPositionByOrigin(t,"center","center")},clone:function(e,t){var r=this.toObject(t);this.constructor.fromObject?this.constructor.fromObject(r,e):C.Object._fromObject("Object",r,e)},cloneAsImage:function(t,e){var r=this.toDataURL(e);C.util.loadImage(r,function(e){t&&t(new C.Image(e))});return this},toDataURL:function(e){e=e||{};var t=C.util,r=t.saveObjectTransform(this),n=this.shadow,i=Math.abs;e.withoutTransform&&t.resetObjectTransform(this);e.withoutShadow&&(this.shadow=null);var o=C.util.createCanvasElement(),s=this.getBoundingRect(true,true),a=this.shadow,l,c={x:0,y:0},u;if(a){u=a.blur;l=this.getObjectScaling();c.x=2*Math.round((i(a.offsetX)+u)*i(l.scaleX));c.y=2*Math.round((i(a.offsetY)+u)*i(l.scaleY))}o.width=s.width+c.x;o.height=s.height+c.y;o.width+=o.width%2?2-o.width%2:0;o.height+=o.height%2?2-o.height%2:0;var d=new C.StaticCanvas(o,{enableRetinaScaling:e.enableRetinaScaling,renderOnAddRemove:false,skipOffscreen:false});"jpeg"===e.format&&(d.backgroundColor="#fff");this.setPositionByOrigin(new C.Point(d.width/2,d.height/2),"center","center");var h=this.canvas;d.add(this);var f=d.toDataURL(e);this.shadow=n;this.set(r).setCoords();this.canvas=h;d._objects=[];d.dispose();d=null;return f},isType:function(e){return this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},setGradient:function(e,t){t=t||{};var r={colorStops:[]};r.type=t.type||(t.r1||t.r2?"radial":"linear");r.coords={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2};if(t.r1||t.r2){r.coords.r1=t.r1;r.coords.r2=t.r2}r.gradientTransform=t.gradientTransform;C.Gradient.prototype.addColorStop.call(r,t.colorStops);return this.set(e,C.Gradient.forObject(this,r))},setPatternFill:function(e,t){return this.set("fill",new C.Pattern(e,t))},setShadow:function(e){return this.set("shadow",e?new C.Shadow(e):null)},setColor:function(e){this.set("fill",e);return this},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;t&&this._setOriginToCenter();this.set("angle",e);t&&this._resetOrigin();return this},centerH:function(){this.canvas&&this.canvas.centerObjectH(this);return this},viewportCenterH:function(){this.canvas&&this.canvas.viewportCenterObjectH(this);return this},centerV:function(){this.canvas&&this.canvas.centerObjectV(this);return this},viewportCenterV:function(){this.canvas&&this.canvas.viewportCenterObjectV(this);return this},center:function(){this.canvas&&this.canvas.centerObject(this);return this},viewportCenter:function(){this.canvas&&this.canvas.viewportCenterObject(this);return this},getLocalPointer:function(e,t){t=t||this.canvas.getPointer(e);var r=new C.Point(t.x,t.y),n=this._getLeftTopCoords();this.angle&&(r=C.util.rotatePoint(r,n,a(-this.angle)));return{x:r.x-n.x,y:r.y-n.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}});C.util.createAccessors&&C.util.createAccessors(C.Object);t(C.Object.prototype,C.Observable);C.Object.NUM_FRACTION_DIGITS=2;C.Object._fromObject=function(e,r,n,i){var o=C[e];r=s(r,true);C.util.enlivenPatterns([r.fill,r.stroke],function(e){"undefined"!==typeof e[0]&&(r.fill=e[0]);"undefined"!==typeof e[1]&&(r.stroke=e[1]);C.util.enlivenObjects([r.clipPath],function(e){r.clipPath=e[0];var t=i?new o(r[i],r):new o(r);n&&n(t)})})};C.Object.__uid=0})((true,t));(function(){var a=B.util.degreesToRadians,u={left:-.5,center:0,right:.5},d={top:-.5,center:0,bottom:.5};B.util.object.extend(B.Object.prototype,{translateToGivenOrigin:function(e,t,r,n,i){var o=e.x,s=e.y,a,l,c;"string"===typeof t?t=u[t]:t-=.5;"string"===typeof n?n=u[n]:n-=.5;a=n-t;"string"===typeof r?r=d[r]:r-=.5;"string"===typeof i?i=d[i]:i-=.5;l=i-r;if(a||l){c=this._getTransformedDimensions();o=e.x+a*c.x;s=e.y+l*c.y}return new B.Point(o,s)},translateToCenterPoint:function(e,t,r){var n=this.translateToGivenOrigin(e,t,r,"center","center");if(this.angle)return B.util.rotatePoint(n,e,a(this.angle));return n},translateToOriginPoint:function(e,t,r){var n=this.translateToGivenOrigin(e,"center","center",t,r);if(this.angle)return B.util.rotatePoint(n,e,a(this.angle));return n},getCenterPoint:function(){var e=new B.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var r=this.getCenterPoint();return this.translateToOriginPoint(r,e,t)},toLocalPoint:function(e,t,r){var n=this.getCenterPoint(),i,o;i="undefined"!==typeof t&&"undefined"!==typeof r?this.translateToGivenOrigin(n,"center","center",t,r):new B.Point(this.left,this.top);o=new B.Point(e.x,e.y);this.angle&&(o=B.util.rotatePoint(o,n,-a(this.angle)));return o.subtractEquals(i)},setPositionByOrigin:function(e,t,r){var n=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",i.x);this.set("top",i.y)},adjustPosition:function(e){var t=a(this.angle),r=this.getScaledWidth(),n=B.util.cos(t)*r,i=B.util.sin(t)*r,o,s;o="string"===typeof this.originX?u[this.originX]:this.originX-.5;s="string"===typeof e?u[e]:e-.5;this.left+=n*(s-o);this.top+=i*(s-o);this.setCoords();this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX;this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center";this.originY="center";this.left=e.x;this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX;this.originY=this._originalOriginY;this.left=e.x;this.top=e.y;this._originalOriginX=null;this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})})();(function(){function n(e){return[new B.Point(e.tl.x,e.tl.y),new B.Point(e.tr.x,e.tr.y),new B.Point(e.br.x,e.br.y),new B.Point(e.bl.x,e.bl.y)]}var O=B.util.degreesToRadians,S=B.util.multiplyTransformMatrices,T=B.util.transformPoint;B.util.object.extend(B.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(e,t){this.oCoords||this.setCoords();var r=e?this.aCoords:this.oCoords;return n(t?this.calcCoords(e):r)},intersectsWithRect:function(e,t,r,n){var i=this.getCoords(r,n),o=B.Intersection.intersectPolygonRectangle(i,e,t);return"Intersection"===o.status},intersectsWithObject:function(e,t,r){var n=B.Intersection.intersectPolygonPolygon(this.getCoords(t,r),e.getCoords(t,r));return"Intersection"===n.status||e.isContainedWithinObject(this,t,r)||this.isContainedWithinObject(e,t,r)},isContainedWithinObject:function(e,t,r){var n=this.getCoords(t,r),i=0,o=e._getImageLines(r?e.calcCoords(t):t?e.aCoords:e.oCoords);for(;i<4;i++)if(!e.containsPoint(n[i],o))return false;return true},isContainedWithinRect:function(e,t,r,n){var i=this.getBoundingRect(r,n);return i.left>=e.x&&i.left+i.width<=t.x&&i.top>=e.y&&i.top+i.height<=t.y},containsPoint:function(e,t,r,n){var t=t||this._getImageLines(n?this.calcCoords(r):r?this.aCoords:this.oCoords),i=this._findCrossPoints(e,t);return 0!==i&&i%2===1},isOnScreen:function(e){if(!this.canvas)return false;var t=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br;var n=this.getCoords(true,e),i;for(var o=0;o<4;o++){i=n[o];if(i.x<=r.x&&i.x>=t.x&&i.y<=r.y&&i.y>=t.y)return true}if(this.intersectsWithRect(t,r,true,e))return true;return this._containsCenterOfCanvas(t,r,e)},_containsCenterOfCanvas:function(e,t,r){var n={x:(e.x+t.x)/2,y:(e.y+t.y)/2};if(this.containsPoint(n,null,true,r))return true;return false},isPartiallyOnScreen:function(e){if(!this.canvas)return false;var t=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br;if(this.intersectsWithRect(t,r,true,e))return true;return this._containsCenterOfCanvas(t,r,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var r,n,i,o,s,a=0,l;for(var c in t){l=t[c];if(l.o.y<e.y&&l.d.y<e.y)continue;if(l.o.y>=e.y&&l.d.y>=e.y)continue;if(l.o.x===l.d.x&&l.o.x>=e.x)s=l.o.x;else{r=0;n=(l.d.y-l.o.y)/(l.d.x-l.o.x);i=e.y-r*e.x;o=l.o.y-n*l.o.x;s=-(i-o)/(r-n)}s>=e.x&&(a+=1);if(2===a)break}return a},getBoundingRect:function(e,t){var r=this.getCoords(e,t);return B.util.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){if(Math.abs(e)<this.minScaleLimit)return e<0?-this.minScaleLimit:this.minScaleLimit;if(0===e)return 1e-4;return e},scale:function(e){this._set("scaleX",e);this._set("scaleY",e);return this.setCoords()},scaleToWidth:function(e,t){var r=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/r)},scaleToHeight:function(e,t){var r=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/r)},calcCoords:function(e){var t=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),n=S(r,t),i=this.getViewportTransform(),o=e?n:S(i,n),s=this._getTransformedDimensions(),a=s.x/2,l=s.y/2,c=T({x:-a,y:-l},o),u=T({x:a,y:-l},o),d=T({x:-a,y:l},o),h=T({x:a,y:l},o);if(!e){var f=this.padding,p=O(this.angle),m=B.util.cos(p),g=B.util.sin(p),v=m*f,_=g*f,b=v+_,y=v-_;if(f){c.x-=y;c.y-=b;u.x+=b;u.y-=y;d.x-=b;d.y+=y;h.x+=y;h.y+=b}var j=new B.Point((c.x+d.x)/2,(c.y+d.y)/2),C=new B.Point((u.x+c.x)/2,(u.y+c.y)/2),w=new B.Point((h.x+u.x)/2,(h.y+u.y)/2),x=new B.Point((h.x+d.x)/2,(h.y+d.y)/2),E=new B.Point(C.x+g*this.rotatingPointOffset,C.y-m*this.rotatingPointOffset)}var A={tl:c,tr:u,br:h,bl:d};if(!e){A.ml=j;A.mt=C;A.mr=w;A.mb=x;A.mtr=E}return A},setCoords:function(e,t){this.oCoords=this.calcCoords(e);t||(this.aCoords=this.calcCoords(true));e||this._setCornerCoords&&this._setCornerCoords();return this},_calcRotateMatrix:function(){if(this.angle){var e=O(this.angle),t=B.util.cos(e),r=B.util.sin(e);return[t,r,-r,t,0,0]}return B.iMatrix.concat()},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",r="";!e&&this.group&&(r=this.group.transformMatrixKey(e)+t);return r+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){if(e)return this.calcOwnMatrix();var t=this.transformMatrixKey(),r=this.matrixCache||(this.matrixCache={});if(r.key===t)return r.value;var n=this.calcOwnMatrix();this.group&&(n=S(this.group.calcTransformMatrix(),n));r.key=t;r.value=n;return n},calcOwnMatrix:function(){var e=this.transformMatrixKey(true),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===e)return t.value;var r=this._calcTranslateMatrix(),n,i=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,true);if(this.angle){n=this._calcRotateMatrix();r=S(r,n)}r=S(r,i);t.key=e;t.value=r;return r},_calcDimensionsTransformMatrix:function(e,t,r){var n,i=this.scaleX*(r&&this.flipX?-1:1),o=this.scaleY*(r&&this.flipY?-1:1),s=[i,0,0,o,0,0];if(e){n=[1,0,Math.tan(O(e)),1];s=S(s,n,true)}if(t){n=[1,Math.tan(O(t)),0,1];s=S(s,n,true)}return s},_getNonTransformedDimensions:function(){var e=this.strokeWidth,t=this.width+e,r=this.height+e;return{x:t,y:r}},_getTransformedDimensions:function(e,t){"undefined"===typeof e&&(e=this.skewX);"undefined"===typeof t&&(t=this.skewY);var r=this._getNonTransformedDimensions();if(0===e&&0===t)return{x:r.x*this.scaleX,y:r.y*this.scaleY};var n=r.x/2,i=r.y/2,o=[{x:-n,y:-i},{x:n,y:-i},{x:-n,y:i},{x:n,y:i}],s,a=this._calcDimensionsTransformMatrix(e,t,false),l;for(s=0;s<o.length;s++)o[s]=B.util.transformPoint(o[s],a);l=B.util.makeBoundingBoxFromPoints(o);return{x:l.width,y:l.height}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions(),r=B.util.transformPoint(t,e,true);return r.scalarAdd(2*this.padding)}})})();B.util.object.extend(B.Object.prototype,{sendToBack:function(){this.group?B.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this);return this},bringToFront:function(){this.group?B.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this);return this},sendBackwards:function(e){this.group?B.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas.sendBackwards(this,e);return this},bringForward:function(e){this.group?B.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas.bringForward(this,e);return this},moveTo:function(e){this.group&&"activeSelection"!==this.group.type?B.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas.moveTo(this,e);return this}});(function(){function f(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var r=new B.Color(t),n=e+": "+r.toRgb()+"; ",i=r.getAlpha();1!==i&&(n+=e+"-opacity: "+i.toString()+"; ");return n}return e+": none; "}var i=B.util.toFixed;B.util.object.extend(B.Object.prototype,{getSvgStyles:function(e){var t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l="undefined"!==typeof this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),d=f("fill",this.fill),h=f("stroke",this.stroke);return[h,"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ",d,"fill-rule: ",t,"; ","opacity: ",l,";",u,c].join("")},getSvgSpanStyles:function(e,t){var r="; ";var n=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+r:"";var i=e.strokeWidth?"stroke-width: "+e.strokeWidth+r:"",n=n,o=e.fontSize?"font-size: "+e.fontSize+"px"+r:"",s=e.fontStyle?"font-style: "+e.fontStyle+r:"",a=e.fontWeight?"font-weight: "+e.fontWeight+r:"",l=e.fill?f("fill",e.fill):"",c=e.stroke?f("stroke",e.stroke):"",u=this.getSvgTextDecoration(e),d=e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"";u=u&&"text-decoration: "+u+r;return[c,i,n,o,s,a,u,l,d,t?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){if("overline"in e||"underline"in e||"linethrough"in e)return(e.overline?"overline ":"")+(e.underline?"underline ":"")+(e.linethrough?"line-through ":"");return""},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var r=e?this.calcTransformMatrix():this.calcOwnMatrix(),n=r.map(function(e){return i(e,B.Object.NUM_FRACTION_DIGITS)}).join(" ");return'transform="matrix('+n+")"+(t||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+")":""},_setSVGBg:function(e){if(this.backgroundColor){var t=B.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,t),'" y="',i(-this.height/2,t),'" width="',i(this.width,t),'" height="',i(this.height,t),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){t=t||{};var r=t.reviver,n=t.additionalTransform||"",i=[this.getSvgTransform(true,n),this.getSvgCommons()].join(""),o=e.indexOf("COMMON_PARTS");e[o]=i;return r?r(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){t=t||{};var r=t.noStyle,n=t.withShadow,i=t.reviver,o=r?"":'style="'+this.getSvgStyles()+'" ',s=n?'style="'+this.getSvgFilter()+'" ':"",a=this.clipPath,l=this.clipPath&&this.clipPath.absolutePositioned,c,u=[],d,h=e.indexOf("COMMON_PARTS"),f=t.additionalTransform;if(a){a.clipPathId="CLIPPATH_"+B.Object.__uid++;d='<clipPath id="'+a.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(i)+"</clipPath>\n"}l&&u.push("<g ",s,this.getSvgCommons()," >\n");u.push("<g ",this.getSvgTransform(false),l?"":s+this.getSvgCommons()," >\n");c=[o,r?"":this.addPaintOrder()," ",f?'transform="'+f+'" ':""].join("");e[h]=c;this.fill&&this.fill.toLive&&u.push(this.fill.toSVG(this,false));this.stroke&&this.stroke.toLive&&u.push(this.stroke.toSVG(this,false));this.shadow&&u.push(this.shadow.toSVG(this));a&&u.push(d);u.push(e.join(""));u.push("</g>\n");l&&u.push("</g>\n");return i?i(u.join("")):u.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})})();(function(){var o=B.util.object.extend,n="stateProperties";function i(t,e,r){var n={},i=true;r.forEach(function(e){n[e]=t[e]});o(t[e],n,i)}function a(e,t,r){if(e===t)return true;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return false;for(var n=0,i=e.length;n<i;n++)if(!a(e[n],t[n]))return false;return true}if(e&&"object"===typeof e){var o=Object.keys(e),s;if(!t||"object"!==typeof t||!r&&o.length!==Object.keys(t).length)return false;for(var n=0,i=o.length;n<i;n++){s=o[n];if("canvas"===s)continue;if(!a(e[s],t[s]))return false}return true}}B.util.object.extend(B.Object.prototype,{hasStateChanged:function(e){e=e||n;var t="_"+e;if(Object.keys(this[t]).length<this[e].length)return true;return!a(this[t],this,true)},saveState:function(e){var t=e&&e.propertySet||n,r="_"+t;if(!this[r])return this.setupState(e);i(this,r,this[t]);e&&e.stateProperties&&i(this,r,e.stateProperties);return this},setupState:function(e){e=e||{};var t=e.propertySet||n;e.propertySet=t;this["_"+t]={};this.saveState(e);return this}})})();(function(){var l=B.util.degreesToRadians;B.util.object.extend(B.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return false;var t=e.x,r=e.y,n,i;this.__corner=0;for(var o in this.oCoords){if(!this.isControlVisible(o))continue;if("mtr"===o&&!this.hasRotatingPoint)continue;if(this.get("lockUniScaling")&&("mt"===o||"mr"===o||"mb"===o||"ml"===o))continue;i=this._getImageLines(this.oCoords[o].corner);n=this._findCrossPoints({x:t,y:r},i);if(0!==n&&n%2===1){this.__corner=o;return o}}return false},_setCornerCoords:function(){var e=this.oCoords,t=l(45-this.angle),r=.707106*this.cornerSize,n=r*B.util.cos(t),i=r*B.util.sin(t),o,s;for(var a in e){o=e[a].x;s=e[a].y;e[a].corner={tl:{x:o-i,y:s-n},tr:{x:o+n,y:s-i},bl:{x:o-n,y:s+i},br:{x:o+i,y:s+n}}}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var t=this.getCenterPoint(),r=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;e.translate(t.x,t.y);e.scale(1/n[0],1/n[3]);e.rotate(l(this.angle));e.fillStyle=this.selectionBackgroundColor;e.fillRect(-r.x/2,-r.y/2,r.x,r.y);e.restore();return this},drawBorders:function(e,t){t=t||{};var r=this._calculateCurrentDimensions(),n=1/this.borderScaleFactor,i=r.x+n,o=r.y+n,s="undefined"!==typeof t.hasRotatingPoint?t.hasRotatingPoint:this.hasRotatingPoint,a="undefined"!==typeof t.hasControls?t.hasControls:this.hasControls,l="undefined"!==typeof t.rotatingPointOffset?t.rotatingPointOffset:this.rotatingPointOffset;e.save();e.strokeStyle=t.borderColor||this.borderColor;this._setLineDash(e,t.borderDashArray||this.borderDashArray,null);e.strokeRect(-i/2,-o/2,i,o);if(s&&this.isControlVisible("mtr")&&a){var c=-o/2;e.beginPath();e.moveTo(0,c);e.lineTo(0,c-l);e.stroke()}e.restore();return this},drawBordersInGroup:function(e,t,r){r=r||{};var n=this._getNonTransformedDimensions(),i=B.util.customTransformMatrix(t.scaleX,t.scaleY,t.skewX),o=B.util.transformPoint(n,i),s=1/this.borderScaleFactor,a=o.x+s,l=o.y+s;e.save();this._setLineDash(e,r.borderDashArray||this.borderDashArray,null);e.strokeStyle=r.borderColor||this.borderColor;e.strokeRect(-a/2,-l/2,a,l);e.restore();return this},drawControls:function(e,t){t=t||{};var r=this._calculateCurrentDimensions(),n=r.x,i=r.y,o=t.cornerSize||this.cornerSize,s=-(n+o)/2,a=-(i+o)/2,l="undefined"!==typeof t.transparentCorners?t.transparentCorners:this.transparentCorners,c="undefined"!==typeof t.hasRotatingPoint?t.hasRotatingPoint:this.hasRotatingPoint,u=l?"stroke":"fill";e.save();e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor;this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor);this._setLineDash(e,t.cornerDashArray||this.cornerDashArray,null);this._drawControl("tl",e,u,s,a,t);this._drawControl("tr",e,u,s+n,a,t);this._drawControl("bl",e,u,s,a+i,t);this._drawControl("br",e,u,s+n,a+i,t);if(!this.get("lockUniScaling")){this._drawControl("mt",e,u,s+n/2,a,t);this._drawControl("mb",e,u,s+n/2,a+i,t);this._drawControl("mr",e,u,s+n,a+i/2,t);this._drawControl("ml",e,u,s,a+i/2,t)}c&&this._drawControl("mtr",e,u,s+n/2,a-this.rotatingPointOffset,t);e.restore();return this},_drawControl:function(e,t,r,n,i,o){o=o||{};if(!this.isControlVisible(e))return;var s=this.cornerSize,a=!this.transparentCorners&&this.cornerStrokeColor;switch(o.cornerStyle||this.cornerStyle){case"circle":t.beginPath();t.arc(n+s/2,i+s/2,s/2,0,2*Math.PI,false);t[r]();a&&t.stroke();break;default:this.transparentCorners||t.clearRect(n,i,s,s);t[r+"Rect"](n,i,s,s);a&&t.strokeRect(n,i,s,s)}},isControlVisible:function(e){return this._getControlsVisibility()[e]},setControlVisible:function(e,t){this._getControlsVisibility()[e]=t;return this},setControlsVisibility:function(e){e=e||{};for(var t in e)this.setControlVisible(t,e[t]);return this},_getControlsVisibility:function(){this._controlsVisibility||(this._controlsVisibility={tl:true,tr:true,br:true,bl:true,ml:true,mt:true,mr:true,mb:true,mtr:true});return this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})})();B.util.object.extend(B.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var r=function(){},n=e.onComplete||r,i=e.onChange||r,o=this;B.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e);o.requestRenderAll();i()},onComplete:function(){t.setCoords();n()}});return this},fxCenterObjectV:function(t,e){e=e||{};var r=function(){},n=e.onComplete||r,i=e.onChange||r,o=this;B.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e);o.requestRenderAll();i()},onComplete:function(){t.setCoords();n()}});return this},fxRemove:function(t,e){e=e||{};var r=function(){},n=e.onComplete||r,i=e.onChange||r,o=this;B.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e);o.requestRenderAll();i()},onComplete:function(){o.remove(t);n()}});return this}});B.util.object.extend(B.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e=[],t,r;for(t in arguments[0])e.push(t);for(var n=0,i=e.length;n<i;n++){t=e[n];r=n!==i-1;this._animate(t,arguments[0][t],arguments[1],r)}}else this._animate.apply(this,arguments);return this},_animate:function(n,e,i,o){var s=this,a;e=e.toString();i=i?B.util.object.clone(i):{};~n.indexOf(".")&&(a=n.split("."));var t=a?this.get(a[0])[a[1]]:this.get(n);"from"in i||(i.from=t);e=~e.indexOf("=")?t+parseFloat(e.replace("=","")):parseFloat(e);B.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(s)},onChange:function(e,t,r){a?s[a[0]][a[1]]=e:s.set(n,e);if(o)return;i.onChange&&i.onChange(e,t,r)},onComplete:function(e,t,r){if(o)return;s.setCoords();i.onComplete&&i.onComplete(e,t,r)}})}});(function(e){"use strict";var i=e.fabric||(e.fabric={}),t=i.util.object.extend,o=i.util.object.clone,r={x1:1,x2:1,y1:1,y2:1},n=i.StaticCanvas.supports("setLineDash");if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e=e||[0,0,0,0];this.callSuper("initialize",t);this.set("x1",e[0]);this.set("y1",e[1]);this.set("x2",e[2]);this.set("y2",e[3]);this._setWidthHeight(t)},_setWidthHeight:function(e){e=e||{};this.width=Math.abs(this.x2-this.x1);this.height=Math.abs(this.y2-this.y1);this.left="left"in e?e.left:this._getLeftToOriginX();this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){this.callSuper("_set",e,t);"undefined"!==typeof r[e]&&this._setWidthHeight();return this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();if(!this.strokeDashArray||this.strokeDashArray&&n){var t=this.calcLinePoints();e.moveTo(t.x1,t.y1);e.lineTo(t.x2,t.y2)}e.lineWidth=this.strokeWidth;var r=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle;this.stroke&&this._renderStroke(e);e.strokeStyle=r},_renderDashedStroke:function(e){var t=this.calcLinePoints();e.beginPath();i.util.drawDashedLine(e,t.x1,t.y1,t.x2,t.y2,this.strokeDashArray);e.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return t(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");if("butt"===this.strokeLineCap){0===this.width&&(e.y-=this.strokeWidth);0===this.height&&(e.x-=this.strokeWidth)}return e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,r=e*this.width*.5,n=t*this.height*.5,i=e*this.width*-.5,o=t*this.height*-.5;return{x1:r,x2:i,y1:n,y2:o}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}});i.Line.fromObject=function(e,t){function r(e){delete e.points;t&&t(e)}var n=o(e,true);n.points=[e.x1,e.y1,e.x2,e.y2];i.Object._fromObject("Line",n,r,"points")};function s(e,t){var r=e.origin,n=e.axis1,i=e.axis2,o=e.dimension,s=t.nearest,a=t.center,l=t.farthest;return function(){switch(this.get(r)){case s:return Math.min(this.get(n),this.get(i));case a:return Math.min(this.get(n),this.get(i))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(i))}}}})((true,t));(function(e){"use strict";var c=e.fabric||(e.fabric={}),u=Math.PI;if(c.Circle){c.warn("fabric.Circle is already defined.");return}c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*u,cacheProperties:c.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){this.callSuper("_set",e,t);"radius"===e&&this.setRadius(t);return this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,t=0,r=0,n=(this.endAngle-this.startAngle)%(2*u);if(0===n)e=["<circle ","COMMON_PARTS",'cx="'+t+'" cy="'+r+'" ','r="',this.radius,'" />\n'];else{var i=c.util.cos(this.startAngle)*this.radius,o=c.util.sin(this.startAngle)*this.radius,s=c.util.cos(this.endAngle)*this.radius,a=c.util.sin(this.endAngle)*this.radius,l=n>u?"1":"0";e=['<path d="M '+i+" "+o," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+s+" "+a,'"',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath();e.arc(0,0,this.radius,this.startAngle,this.endAngle,false);this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){this.radius=e;return this.set("width",2*e).set("height",2*e)}});c.Circle.fromObject=function(e,t){return c.Object._fromObject("Circle",e,t)}})((true,t));(function(e){"use strict";var n=e.fabric||(e.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,r=this.height/2;e.beginPath();e.moveTo(-t,r);e.lineTo(0,-r);e.lineTo(t,r);e.closePath();this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var t=this.width/2,r=this.height/2;e.beginPath();n.util.drawDashedLine(e,-t,r,0,-r,this.strokeDashArray);n.util.drawDashedLine(e,0,-r,t,r,this.strokeDashArray);n.util.drawDashedLine(e,t,r,-t,r,this.strokeDashArray);e.closePath()},_toSVG:function(){var e=this.width/2,t=this.height/2,r=[-e+" "+t,"0 "+-t,e+" "+t].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}});n.Triangle.fromObject=function(e,t){return n.Object._fromObject("Triangle",e,t)}})((true,t));(function(e){"use strict";var r=e.fabric||(e.fabric={}),t=2*Math.PI;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e);this.set("rx",e&&e.rx||0);this.set("ry",e&&e.ry||0)},_set:function(e,t){this.callSuper("_set",e,t);switch(e){case"rx":this.rx=t;this.set("width",2*t);break;case"ry":this.ry=t;this.set("height",2*t);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath();e.save();e.transform(1,0,0,this.ry/this.rx,0,0);e.arc(0,0,this.rx,0,t,false);e.restore();this._renderPaintInOrder(e)}});r.Ellipse.fromObject=function(e,t){return r.Object._fromObject("Ellipse",e,t)}})((true,t));(function(e){"use strict";var o=e.fabric||(e.fabric={}),t=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e);this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,i=this.height,o=-this.width/2,s=-this.height/2,a=0!==t||0!==r,l=.4477152502;e.beginPath();e.moveTo(o+t,s);e.lineTo(o+n-t,s);a&&e.bezierCurveTo(o+n-l*t,s,o+n,s+l*r,o+n,s+r);e.lineTo(o+n,s+i-r);a&&e.bezierCurveTo(o+n,s+i-l*r,o+n-l*t,s+i,o+n-t,s+i);e.lineTo(o+t,s+i);a&&e.bezierCurveTo(o+l*t,s+i,o,s+i-l*r,o,s+i-r);e.lineTo(o,s+r);a&&e.bezierCurveTo(o,s+l*r,o+l*t,s,o+t,s);e.closePath();this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var t=-this.width/2,r=-this.height/2,n=this.width,i=this.height;e.beginPath();o.util.drawDashedLine(e,t,r,t+n,r,this.strokeDashArray);o.util.drawDashedLine(e,t+n,r,t+n,r+i,this.strokeDashArray);o.util.drawDashedLine(e,t+n,r+i,t,r+i,this.strokeDashArray);o.util.drawDashedLine(e,t,r+i,t,r,this.strokeDashArray);e.closePath()},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){var e=-this.width/2,t=-this.height/2;return["<rect ","COMMON_PARTS",'x="',e,'" y="',t,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}});o.Rect.fromObject=function(e,t){return o.Object._fromObject("Rect",e,t)}})((true,t));(function(e){"use strict";var s=e.fabric||(e.fabric={}),t=s.util.object.extend,a=s.util.array.min,l=s.util.array.max,c=s.util.toFixed;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{};this.points=e||[];this.callSuper("initialize",t);var r=this._calcDimensions();"undefined"===typeof t.left&&(this.left=r.left);"undefined"===typeof t.top&&(this.top=r.top);this.width=r.width;this.height=r.height;this.pathOffset={x:r.left+this.width/2,y:r.top+this.height/2}},_calcDimensions:function(){var e=this.points,t=a(e,"x")||0,r=a(e,"y")||0,n=l(e,"x")||0,i=l(e,"y")||0,o=n-t,s=i-r;return{left:t,top:r,width:o,height:s}},toObject:function(e){return t(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){var e=[],t=this.pathOffset.x,r=this.pathOffset.y,n=s.Object.NUM_FRACTION_DIGITS;for(var i=0,o=this.points.length;i<o;i++)e.push(c(this.points[i].x-t,n),",",c(this.points[i].y-r,n)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,r=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return false;e.beginPath();e.moveTo(this.points[0].x-n,this.points[0].y-i);for(var o=0;o<r;o++){t=this.points[o];e.lineTo(t.x-n,t.y-i)}return true},_render:function(e){if(!this.commonRender(e))return;this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var t,r;e.beginPath();for(var n=0,i=this.points.length;n<i;n++){t=this.points[n];r=this.points[n+1]||t;s.util.drawDashedLine(e,t.x,t.y,r.x,r.y,this.strokeDashArray)}},complexity:function(){return this.get("points").length}});s.Polyline.fromObject=function(e,t){return s.Object._fromObject("Polyline",e,t,"points")}})((true,t));(function(e){"use strict";var r=e.fabric||(e.fabric={}),t=r.util.object.extend;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_render:function(e){if(!this.commonRender(e))return;e.closePath();this._renderPaintInOrder(e)},_renderDashedStroke:function(e){this.callSuper("_renderDashedStroke",e);e.closePath()}});r.Polygon.fromObject=function(e,t){return r.Object._fromObject("Polygon",e,t,"points")}})((true,t));(function(e){"use strict";var C=e.fabric||(e.fabric={}),w=C.util.array.min,x=C.util.array.max,r=C.util.object.extend,n=Object.prototype.toString,m=C.util.drawArc,t=C.util.toFixed,v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_={m:"l",M:"L"};if(C.Path){C.warn("fabric.Path is already defined");return}C.Path=C.util.createClass(C.Object,{type:"path",path:null,cacheProperties:C.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:C.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){t=t||{};this.callSuper("initialize",t);e=e||[];var r="[object Array]"===n.call(e);this.path=r?e:e.match&&e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(!this.path)return;r||(this.path=this._parsePath());this._setPositionDimensions(t)},_setPositionDimensions:function(e){var t=this._parseDimensions();this.width=t.width;this.height=t.height;"undefined"===typeof e.left&&(this.left=t.left);"undefined"===typeof e.top&&(this.top=t.top);this.pathOffset=this.pathOffset||{x:t.left+this.width/2,y:t.top+this.height/2}},_renderPathCommands:function(e){var t,r=null,n=0,i=0,o=0,s=0,a=0,l=0,c,u,d=-this.pathOffset.x,h=-this.pathOffset.y;e.beginPath();for(var f=0,p=this.path.length;f<p;++f){t=this.path[f];switch(t[0]){case"l":o+=t[1];s+=t[2];e.lineTo(o+d,s+h);break;case"L":o=t[1];s=t[2];e.lineTo(o+d,s+h);break;case"h":o+=t[1];e.lineTo(o+d,s+h);break;case"H":o=t[1];e.lineTo(o+d,s+h);break;case"v":s+=t[1];e.lineTo(o+d,s+h);break;case"V":s=t[1];e.lineTo(o+d,s+h);break;case"m":o+=t[1];s+=t[2];n=o;i=s;e.moveTo(o+d,s+h);break;case"M":o=t[1];s=t[2];n=o;i=s;e.moveTo(o+d,s+h);break;case"c":c=o+t[5];u=s+t[6];a=o+t[3];l=s+t[4];e.bezierCurveTo(o+t[1]+d,s+t[2]+h,a+d,l+h,c+d,u+h);o=c;s=u;break;case"C":o=t[5];s=t[6];a=t[3];l=t[4];e.bezierCurveTo(t[1]+d,t[2]+h,a+d,l+h,o+d,s+h);break;case"s":c=o+t[3];u=s+t[4];if(null===r[0].match(/[CcSs]/)){a=o;l=s}else{a=2*o-a;l=2*s-l}e.bezierCurveTo(a+d,l+h,o+t[1]+d,s+t[2]+h,c+d,u+h);a=o+t[1];l=s+t[2];o=c;s=u;break;case"S":c=t[3];u=t[4];if(null===r[0].match(/[CcSs]/)){a=o;l=s}else{a=2*o-a;l=2*s-l}e.bezierCurveTo(a+d,l+h,t[1]+d,t[2]+h,c+d,u+h);o=c;s=u;a=t[1];l=t[2];break;case"q":c=o+t[3];u=s+t[4];a=o+t[1];l=s+t[2];e.quadraticCurveTo(a+d,l+h,c+d,u+h);o=c;s=u;break;case"Q":c=t[3];u=t[4];e.quadraticCurveTo(t[1]+d,t[2]+h,c+d,u+h);o=c;s=u;a=t[1];l=t[2];break;case"t":c=o+t[1];u=s+t[2];if(null===r[0].match(/[QqTt]/)){a=o;l=s}else{a=2*o-a;l=2*s-l}e.quadraticCurveTo(a+d,l+h,c+d,u+h);o=c;s=u;break;case"T":c=t[1];u=t[2];if(null===r[0].match(/[QqTt]/)){a=o;l=s}else{a=2*o-a;l=2*s-l}e.quadraticCurveTo(a+d,l+h,c+d,u+h);o=c;s=u;break;case"a":m(e,o+d,s+h,[t[1],t[2],t[3],t[4],t[5],t[6]+o+d,t[7]+s+h]);o+=t[6];s+=t[7];break;case"A":m(e,o+d,s+h,[t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+h]);o=t[6];s=t[7];break;case"z":case"Z":o=n;s=i;e.closePath();break}r=t}},_render:function(e){this._renderPathCommands(e);this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){var t=r(this.callSuper("toObject",e),{path:this.path.map(function(e){return e.slice()}),top:this.top,left:this.left});return t},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));t.sourcePath&&delete t.path;return t},_toSVG:function(){var e=this.path.map(function(e){return e.join(" ")}).join(" ");return["<path ","COMMON_PARTS",'d="',e,'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=C.Object.NUM_FRACTION_DIGITS;return" translate("+t(-this.pathOffset.x,e)+", "+t(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_parsePath:function(){var e=[],t=[],r,n,i=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,o,s;for(var a=0,l,c=this.path.length;a<c;a++){r=this.path[a];s=r.slice(1).trim();t.length=0;while(o=i.exec(s))t.push(o[0]);l=[r.charAt(0)];for(var u=0,d=t.length;u<d;u++){n=parseFloat(t[u]);isNaN(n)||l.push(n)}var h=l[0],f=v[h.toLowerCase()],p=_[h]||h;if(l.length-1>f)for(var m=1,g=l.length;m<g;m+=f){e.push([h].concat(l.slice(m,m+f)));h=p}else e.push(l)}return e},_parseDimensions:function(){var t=[],r=[],e,n=null,i=0,o=0,s=0,a=0,l=0,c=0,u,d,h;for(var f=0,p=this.path.length;f<p;++f){e=this.path[f];switch(e[0]){case"l":s+=e[1];a+=e[2];h=[];break;case"L":s=e[1];a=e[2];h=[];break;case"h":s+=e[1];h=[];break;case"H":s=e[1];h=[];break;case"v":a+=e[1];h=[];break;case"V":a=e[1];h=[];break;case"m":s+=e[1];a+=e[2];i=s;o=a;h=[];break;case"M":s=e[1];a=e[2];i=s;o=a;h=[];break;case"c":u=s+e[5];d=a+e[6];l=s+e[3];c=a+e[4];h=C.util.getBoundsOfCurve(s,a,s+e[1],a+e[2],l,c,u,d);s=u;a=d;break;case"C":l=e[3];c=e[4];h=C.util.getBoundsOfCurve(s,a,e[1],e[2],l,c,e[5],e[6]);s=e[5];a=e[6];break;case"s":u=s+e[3];d=a+e[4];if(null===n[0].match(/[CcSs]/)){l=s;c=a}else{l=2*s-l;c=2*a-c}h=C.util.getBoundsOfCurve(s,a,l,c,s+e[1],a+e[2],u,d);l=s+e[1];c=a+e[2];s=u;a=d;break;case"S":u=e[3];d=e[4];if(null===n[0].match(/[CcSs]/)){l=s;c=a}else{l=2*s-l;c=2*a-c}h=C.util.getBoundsOfCurve(s,a,l,c,e[1],e[2],u,d);s=u;a=d;l=e[1];c=e[2];break;case"q":u=s+e[3];d=a+e[4];l=s+e[1];c=a+e[2];h=C.util.getBoundsOfCurve(s,a,l,c,l,c,u,d);s=u;a=d;break;case"Q":l=e[1];c=e[2];h=C.util.getBoundsOfCurve(s,a,l,c,l,c,e[3],e[4]);s=e[3];a=e[4];break;case"t":u=s+e[1];d=a+e[2];if(null===n[0].match(/[QqTt]/)){l=s;c=a}else{l=2*s-l;c=2*a-c}h=C.util.getBoundsOfCurve(s,a,l,c,l,c,u,d);s=u;a=d;break;case"T":u=e[1];d=e[2];if(null===n[0].match(/[QqTt]/)){l=s;c=a}else{l=2*s-l;c=2*a-c}h=C.util.getBoundsOfCurve(s,a,l,c,l,c,u,d);s=u;a=d;break;case"a":h=C.util.getBoundsOfArc(s,a,e[1],e[2],e[3],e[4],e[5],e[6]+s,e[7]+a);s+=e[6];a+=e[7];break;case"A":h=C.util.getBoundsOfArc(s,a,e[1],e[2],e[3],e[4],e[5],e[6],e[7]);s=e[6];a=e[7];break;case"z":case"Z":s=i;a=o;break}n=e;h.forEach(function(e){t.push(e.x);r.push(e.y)});t.push(s);r.push(a)}var m=w(t)||0,g=w(r)||0,v=x(t)||0,_=x(r)||0,b=v-m,y=_-g,j={left:m,top:g,width:b,height:y};return j}});C.Path.fromObject=function(r,n){if("string"===typeof r.sourcePath){var e=r.sourcePath;C.loadSVGFromURL(e,function(e){var t=e[0];t.setOptions(r);n&&n(t)})}else C.Object._fromObject("Path",r,n,"path")}})((true,t));(function(e){"use strict";var c=e.fabric||(e.fabric={}),u=c.util.array.min,d=c.util.array.max;if(c.Group)return;c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",strokeWidth:0,subTargetCheck:false,cacheProperties:[],useSetOnGroup:false,initialize:function(e,t,r){t=t||{};this._objects=[];r&&this.callSuper("initialize",t);this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(r)this._updateObjectsACoords();else{var i=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX);void 0!==t.originY&&(this.originY=t.originY);i||this._calcBounds();this._updateObjectsCoords(i);delete t.centerPoint;this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){var e=true,t=true;for(var r=this._objects.length;r--;)this._objects[r].setCoords(e,t)},_updateObjectsCoords:function(e){var e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var r=e.left,n=e.top,i=true,o=true;e.set({left:r-t.x,top:n-t.y});e.group=this;e.setCoords(i,o)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){this._restoreObjectsState();c.util.resetObjectTransform(this);if(e){this._objects.push(e);e.group=this;e._set("canvas",this.canvas)}this._calcBounds();this._updateObjectsCoords();this.setCoords();this.dirty=true;return this},removeWithUpdate:function(e){this._restoreObjectsState();c.util.resetObjectTransform(this);this.remove(e);this._calcBounds();this._updateObjectsCoords();this.setCoords();this.dirty=true;return this},_onObjectAdded:function(e){this.dirty=true;e.group=this;e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=true;delete e.group},_set:function(e,t){var r=this._objects.length;if(this.useSetOnGroup)while(r--)this._objects[r].setOnGroup(e,t);if("canvas"===e)while(r--)this._objects[r]._set(e,t);c.Object.prototype._set.call(this,e,t)},toObject:function(n){var i=this.includeDefaultValues;var e=this._objects.map(function(e){var t=e.includeDefaultValues;e.includeDefaultValues=i;var r=e.toObject(n);e.includeDefaultValues=t;return r});var t=c.Object.prototype.toObject.call(this,n);t.objects=e;return t},toDatalessObject:function(n){var e,t=this.sourcePath;if(t)e=t;else{var i=this.includeDefaultValues;e=this._objects.map(function(e){var t=e.includeDefaultValues;e.includeDefaultValues=i;var r=e.toDatalessObject(n);e.includeDefaultValues=t;return r})}var r=c.Object.prototype.toDatalessObject.call(this,n);r.objects=e;return r},render:function(e){this._transformDone=true;this.callSuper("render",e);this._transformDone=false},shouldCache:function(){var e=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache());this.ownCaching=e;if(e)for(var t=0,r=this._objects.length;t<r;t++)if(this._objects[t].willDrawShadow()){this.ownCaching=false;return false}return e},willDrawShadow:function(){if(this.shadow)return c.Object.prototype.willDrawShadow.call(this);for(var e=0,t=this._objects.length;e<t;e++)if(this._objects[e].willDrawShadow())return true;return false},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,r=this._objects.length;t<r;t++)this._objects[t].render(e);this._drawClipPath(e)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return true;if(!this.statefullCache)return false;for(var t=0,r=this._objects.length;t<r;t++)if(this._objects[t].isCacheDirty(true)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-i/2,n,i)}return true}return false},_restoreObjectsState:function(){this._objects.forEach(this._restoreObjectState,this);return this},realizeTransform:function(e){var t=e.calcTransformMatrix(),r=c.util.qrDecompose(t),n=new c.Point(r.translateX,r.translateY);e.flipX=false;e.flipY=false;e.set("scaleX",r.scaleX);e.set("scaleY",r.scaleY);e.skewX=r.skewX;e.skewY=r.skewY;e.angle=r.angle;e.setPositionByOrigin(n,"center","center");return e},_restoreObjectState:function(e){this.realizeTransform(e);e.setCoords();delete e.group;return this},destroy:function(){this._objects.forEach(function(e){e.set("dirty",true)});return this._restoreObjectsState()},toActiveSelection:function(){if(!this.canvas)return;var e=this._objects,t=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var n=new c.ActiveSelection([]);n.set(r);n.type="activeSelection";t.remove(this);e.forEach(function(e){e.group=n;e.dirty=true;t.add(e)});n.canvas=t;n._objects=e;t._activeObject=n;n.setCoords();return n},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=true,r=true;this.forEachObject(function(e){e.setCoords(t,r)});return this},_calcBounds:function(e){var t=[],r=[],n,i,o=["tr","br","bl","tl"],s=0,a=this._objects.length,l,c=o.length,u=true;for(;s<a;++s){n=this._objects[s];n.setCoords(u);for(l=0;l<c;l++){i=o[l];t.push(n.oCoords[i].x);r.push(n.oCoords[i].y)}}this._getBounds(t,r,e)},_getBounds:function(e,t,r){var n=new c.Point(u(e),u(t)),i=new c.Point(d(e),d(t)),o=n.y||0,s=n.x||0,a=i.x-n.x||0,l=i.y-n.y||0;this.width=a;this.height=l;r||this.setPositionByOrigin({x:s,y:o},"left","top")},toSVG:function(e){var t=[];for(var r=0,n=this._objects.length;r<n;r++)t.push("\t",this._objects[r].toSVG(e));return this._createBaseSVGMarkup(t,{reviver:e,noStyle:true,withShadow:true})},toClipPathSVG:function(e){var t=[];for(var r=0,n=this._objects.length;r<n;r++)t.push("\t",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}});c.Group.fromObject=function(n,i){c.util.enlivenObjects(n.objects,function(r){c.util.enlivenObjects([n.clipPath],function(e){var t=c.util.object.clone(n,true);t.clipPath=e[0];delete t.objects;i&&i(new c.Group(r,t,true))})})}})((true,t));(function(e){"use strict";var i=e.fabric||(e.fabric={});if(i.ActiveSelection)return;i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(e,t){t=t||{};this._objects=e||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;t.originX&&(this.originX=t.originX);t.originY&&(this.originY=t.originY);this._calcBounds();this._updateObjectsCoords();i.Object.prototype.initialize.call(this,t);this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var t=i.Object.prototype.toObject.call(this);var r=new i.Group([]);delete t.type;r.set(t);e.forEach(function(e){e.canvas.remove(e);e.group=r});r._objects=e;if(!this.canvas)return r;var n=this.canvas;n.add(r);n._activeObject=r;r.setCoords();return r},onDeselect:function(){this.destroy();return false},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return false},isOnACache:function(){return false},_renderControls:function(e,t,r){e.save();e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;this.callSuper("_renderControls",e,t);r=r||{};"undefined"===typeof r.hasControls&&(r.hasControls=false);"undefined"===typeof r.hasRotatingPoint&&(r.hasRotatingPoint=false);r.forActiveSelection=true;for(var n=0,i=this._objects.length;n<i;n++)this._objects[n]._renderControls(e,r);e.restore()}});i.ActiveSelection.fromObject=function(t,r){i.util.enlivenObjects(t.objects,function(e){delete t.objects;r&&r(new i.ActiveSelection(e,t,true))})}})((true,t));(function(e){"use strict";var n=B.util.object.extend;e.fabric||(e.fabric={});if(e.fabric.Image){B.warn("fabric.Image is already defined.");return}B.Image=B.util.createClass(B.Object,{type:"image",crossOrigin:"",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:B.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(e,t){t=t||{};this.filters=[];this.cacheKey="texture"+B.Object.__uid++;this.callSuper("initialize",t);this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){this.removeTexture(this.cacheKey);this.removeTexture(this.cacheKey+"_filtered");this._element=e;this._originalElement=e;this._initConfig(t);0!==this.filters.length&&this.applyFilters();this.resizeFilter&&this.applyResizeFilters();return this},removeTexture:function(e){var t=B.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.removeTexture(this.cacheKey);this.removeTexture(this.cacheKey+"_filtered");this._cacheContext=void 0;["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){B.util.cleanUpJsdomNode(this[e]);this[e]=void 0}.bind(this))},setCrossOrigin:function(e){this.crossOrigin=e;this._element.crossOrigin=e;return this},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(!this.stroke||0===this.strokeWidth)return;var t=this.width/2,r=this.height/2;e.beginPath();e.moveTo(-t,-r);e.lineTo(t,-r);e.lineTo(t,r);e.lineTo(-t,r);e.lineTo(-t,-r);e.closePath()},_renderDashedStroke:function(e){var t=-this.width/2,r=-this.height/2,n=this.width,i=this.height;e.save();this._setStrokeStyles(e,this);e.beginPath();B.util.drawDashedLine(e,t,r,t+n,r,this.strokeDashArray);B.util.drawDashedLine(e,t+n,r,t+n,r+i,this.strokeDashArray);B.util.drawDashedLine(e,t+n,r+i,t,r+i,this.strokeDashArray);B.util.drawDashedLine(e,t,r+i,t,r,this.strokeDashArray);e.closePath();e.restore()},toObject:function(e){var t=[];this.filters.forEach(function(e){e&&t.push(e.toObject())});var r=n(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(e)),{src:this.getSrc(),filters:t});this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject());return r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e=[],t=[],r,n=-this.width/2,i=-this.height/2,o="";if(this.hasCrop()){var s=B.Object.__uid++;e.push('<clipPath id="imageCrop_'+s+'">\n','\t<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n");o=' clip-path="url(#imageCrop_'+s+')" '}t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(true),'" x="',n-this.cropX,'" y="',i-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',o,"></image>\n");if(this.stroke||this.strokeDashArray){var a=this.fill;this.fill=null;r=["\t<rect ",'x="',n,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'];this.fill=a}e="fill"!==this.paintFirst?e.concat(r,t):e.concat(t,r);return e},getSrc:function(e){var t=e?this._element:this._originalElement;if(t){if(t.toDataURL)return t.toDataURL();return t.src}return this.src||""},setSrc:function(e,t,r){B.util.loadImage(e,function(e){this.setElement(e,r);this._setWidthHeight();t(this)},this,r&&r.crossOrigin);return this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),n=r.scaleX,i=r.scaleY,o=this._filteredEl||this._originalElement;this.group&&this.set("dirty",true);if(!e||n>t&&i>t){this._element=o;this._filterScalingX=1;this._filterScalingY=1;this._lastScaleX=n;this._lastScaleY=i;return}B.filterBackend||(B.filterBackend=B.initFilterBackend());var s=B.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=o.width,c=o.height;s.width=l;s.height=c;this._element=s;this._lastScaleX=e.scaleX=n;this._lastScaleY=e.scaleY=i;B.filterBackend.applyFilters([e],o,l,c,this._element,a);this._filterScalingX=s.width/this._originalElement.width;this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(e){e=e||this.filters||[];e=e.filter(function(e){return e&&!e.isNeutralState()});this.set("dirty",true);this.removeTexture(this.cacheKey+"_filtered");if(0===e.length){this._element=this._originalElement;this._filteredEl=null;this._filterScalingX=1;this._filterScalingY=1;return this}var t=this._originalElement,r=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){var i=B.util.createCanvasElement();i.width=r;i.height=n;this._element=i;this._filteredEl=i}else{this._element=this._filteredEl;this._filteredEl.getContext("2d").clearRect(0,0,r,n);this._lastScaleX=1;this._lastScaleY=1}B.filterBackend||(B.filterBackend=B.initFilterBackend());B.filterBackend.applyFilters(e,this._originalElement,r,n,this._element,this.cacheKey);if(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height){this._filterScalingX=this._element.width/this._originalElement.width;this._filterScalingY=this._element.height/this._originalElement.height}return this},_render:function(e){true!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters();this._stroke(e);this._renderPaintInOrder(e)},shouldCache:function(){this.ownCaching=this.objectCaching&&this.needsItsOwnCache();return this.ownCaching},_renderFill:function(e){var t=this.width,r=this.height,n=t*this._filterScalingX,i=r*this._filterScalingY,o=-t/2,s=-r/2,a=this._element;a&&e.drawImage(a,this.cropX*this._filterScalingX,this.cropY*this._filterScalingY,n,i,o,s,t,r)},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(B.util.getById(e),t);B.util.addClass(this.getElement(),B.Image.CSS_CANVAS)},_initConfig:function(e){e=e||{};this.setOptions(e);this._setWidthHeight(e);this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(e,t){e&&e.length?B.util.enlivenObjects(e,function(e){t&&t(e)},"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e=e||{};var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0;this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e=B.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,r=this._element.height,n=1,i=1,o=0,s=0,a=0,l=0,c,u=this.width,d=this.height,h={width:u,height:d};if(!e||"none"===e.alignX&&"none"===e.alignY){n=u/t;i=d/r}else{if("meet"===e.meetOrSlice){n=i=B.util.findScaleToFit(this._element,h);c=(u-t*n)/2;"Min"===e.alignX&&(o=-c);"Max"===e.alignX&&(o=c);c=(d-r*i)/2;"Min"===e.alignY&&(s=-c);"Max"===e.alignY&&(s=c)}if("slice"===e.meetOrSlice){n=i=B.util.findScaleToCover(this._element,h);c=t-u/n;"Mid"===e.alignX&&(a=c/2);"Max"===e.alignX&&(a=c);c=r-d/i;"Mid"===e.alignY&&(l=c/2);"Max"===e.alignY&&(l=c);t=u/n;r=d/i}}return{width:t,height:r,scaleX:n,scaleY:i,offsetLeft:o,offsetTop:s,cropX:a,cropY:l}}});B.Image.CSS_CANVAS="canvas-img";B.Image.prototype.getSvgSrc=B.Image.prototype.getSrc;B.Image.fromObject=function(e,n){var i=B.util.object.clone(e);B.util.loadImage(i.src,function(r,e){if(e){n&&n(null,e);return}B.Image.prototype._initFilters.call(i,i.filters,function(e){i.filters=e||[];B.Image.prototype._initFilters.call(i,[i.resizeFilter],function(e){i.resizeFilter=e[0];B.util.enlivenObjects([i.clipPath],function(e){i.clipPath=e[0];var t=new B.Image(r,i);n(t)})})})},null,i.crossOrigin)};B.Image.fromURL=function(e,t,r){B.util.loadImage(e,function(e){t&&t(new B.Image(e,r))},null,r&&r.crossOrigin)}})((true,t));(function(){"use strict";function s(e,t){var r="precision "+t+" float;\nvoid main(){}";var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,r);e.compileShader(n);if(!e.getShaderParameter(n,e.COMPILE_STATUS))return false;return true}B.isWebglSupported=function(e){if(B.isLikelyNode)return false;e=e||B.WebglFilterBackend.prototype.tileSize;var t=document.createElement("canvas");var r=t.getContext("webgl")||t.getContext("experimental-webgl");var n=false;if(r){B.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE);n=B.maxTextureSize>=e;var i=["highp","mediump","lowp"];for(var o=0;o<3;o++)if(s(r,i[o])){B.webGlPrecision=i[o];break}}this.isSupported=n;return n};B.WebglFilterBackend=e;function e(e){e&&e.tileSize&&(this.tileSize=e.tileSize);this.setupGLContext(this.tileSize,this.tileSize);this.captureGPUInfo()}e.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose();this.createWebGLCanvas(e,t);this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]);this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var r="undefined"!==typeof window.performance;var n;try{new ImageData(1,1);n=true}catch(e){n=false}var i="undefined"!==typeof ArrayBuffer;var o="undefined"!==typeof Uint8ClampedArray;if(!(r&&n&&i&&o))return;var s=B.util.createCanvasElement();var a=new ArrayBuffer(e*t*4);var l={imageBuffer:a,destinationWidth:e,destinationHeight:t,targetCanvas:s};var c,u,d;s.width=e;s.height=t;c=window.performance.now();h.call(l,this.gl,l);u=window.performance.now()-c;c=window.performance.now();f.call(l,this.gl,l);d=window.performance.now()-c;if(u>d){this.imageBuffer=a;this.copyGLTo2D=f}else this.copyGLTo2D=h},createWebGLCanvas:function(e,t){var r=B.util.createCanvasElement();r.width=e;r.height=t;var n={alpha:true,premultipliedAlpha:false,depth:false,stencil:false,antialias:false},i=r.getContext("webgl",n);i=i||r.getContext("experimental-webgl",n);if(!i)return;i.clearColor(0,0,0,0);this.canvas=r;this.gl=i},applyFilters:function(e,t,r,n,i,o){var s=this.gl;var a;o&&(a=this.getCachedTexture(o,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:r,sourceHeight:n,destinationWidth:r,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,r,n,!a&&t),targetTexture:this.createTexture(s,r,n),originalTexture:a||this.createTexture(s,r,n,!a&&t),passes:e.length,webgl:true,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i};var c=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,c);e.forEach(function(e){e&&e.applyTo(l)});u(l);this.copyGLTo2D(s,l);s.bindTexture(s.TEXTURE_2D,null);s.deleteTexture(l.sourceTexture);s.deleteTexture(l.targetTexture);s.deleteFramebuffer(c);i.getContext("2d").setTransform(1,0,0,1,0,0);return l},applyFiltersDebug:function(e,t,r,n,i,o){var s=this.gl;var a=this.applyFilters(e,t,r,n,i,o);var l=s.getError();if(l!==s.NO_ERROR){var c=this.glErrorToString(s,l);var u=new Error("WebGL Error "+c);u.glErrorCode=l;throw u}return a},glErrorToString:function(e,t){if(!e)return"Context undefined for error code: "+t;if("number"!==typeof t)return"Error code is not a number";switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"UNKNOWN_ERROR"}},dispose:function(){if(this.canvas){this.canvas=null;this.gl=null}this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={};this.textureCache={}},createTexture:function(e,t,r,n){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null);return i},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var r=this.createTexture(this.gl,t.width,t.height,t);this.textureCache[e]=r;return r},evictCachesForKey:function(e){if(this.textureCache[e]){this.gl.deleteTexture(this.textureCache[e]);delete this.textureCache[e]}},copyGLTo2D:h,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl;var t=e.getExtension("WEBGL_debug_renderer_info");var r={renderer:"",vendor:""};if(t){var n=e.getParameter(t.UNMASKED_RENDERER_WEBGL);var i=e.getParameter(t.UNMASKED_VENDOR_WEBGL);n&&(r.renderer=n.toLowerCase());i&&(r.vendor=i.toLowerCase())}this.gpuInfo=r;return r}}})();function u(e){var t=e.targetCanvas,r=t.width,n=t.height,i=e.destinationWidth,o=e.destinationHeight;if(r!==i||n!==o){t.width=i;t.height=o}}function h(e,t){var r=e.canvas,n=t.targetCanvas,i=n.getContext("2d");i.translate(0,n.height);i.scale(1,-1);var o=r.height-n.height;i.drawImage(r,0,o,n.width,n.height,0,0,n.width,n.height)}function f(e,t){var r=t.targetCanvas,n=r.getContext("2d"),i=t.destinationWidth,o=t.destinationHeight,s=i*o*4;var a=new Uint8Array(this.imageBuffer,0,s);var l=new Uint8ClampedArray(this.imageBuffer,0,s);e.readPixels(0,0,i,o,e.RGBA,e.UNSIGNED_BYTE,a);var c=new ImageData(l,i,o);n.putImageData(c,0,0)}(function(){"use strict";var e=function(){};B.Canvas2dFilterBackend=t;function t(){}t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,r,n,i){var o=i.getContext("2d");o.drawImage(t,0,0,r,n);var s=o.getImageData(0,0,r,n);var a=o.getImageData(0,0,r,n);var l={sourceWidth:r,sourceHeight:n,imageData:s,originalEl:t,originalImageData:a,canvasEl:i,ctx:o,filterBackend:this};e.forEach(function(e){e.applyTo(l)});if(l.imageData.width!==r||l.imageData.height!==n){i.width=l.imageData.width;i.height=l.imageData.height}o.putImageData(l.imageData,0,0);return l}}})();B.Image=B.Image||{};B.Image.filters=B.Image.filters||{};B.Image.filters.BaseFilter=B.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,r){t=t||this.fragmentSource;r=r||this.vertexSource;"highp"!==B.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+B.webGlPrecision+" float"));var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,r);e.compileShader(n);if(!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(n));var i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,t);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(i));var o=e.createProgram();e.attachShader(o,n);e.attachShader(o,i);e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(o));var s=this.getAttributeLocations(e,o);var a=this.getUniformLocations(e,o)||{};a.uStepW=e.getUniformLocation(o,"uStepW");a.uStepH=e.getUniformLocation(o,"uStepH");return{program:o,attributeLocations:s,uniformLocations:a}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,r){var n=t.aPosition;var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);e.enableVertexAttribArray(n);e.vertexAttribPointer(n,2,e.FLOAT,false,0,0);e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t=e.context,r,n;if(e.passes>1){r=e.destinationWidth;n=e.destinationHeight;if(e.sourceWidth!==r||e.sourceHeight!==n){t.deleteTexture(e.targetTexture);e.targetTexture=e.filterBackend.createTexture(t,r,n)}t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else{t.bindFramebuffer(t.FRAMEBUFFER,null);t.finish()}},_swapTextures:function(e){e.passes--;e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture;e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=B.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var r=t[e].length;r--;)if(this[e][r]!==t[e][r])return false;return true}return t[e]===this[e]}return false},applyTo:function(e){if(e.webgl){this._setupFrameBuffer(e);this.applyToWebGL(e);this._swapTextures(e)}else this.applyTo2d(e)},retrieveShader:function(e){e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context));return e.programCache[this.type]},applyToWebGL:function(e){var t=e.context;var r=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture);t.useProgram(r.program);this.sendAttributeData(t,r.attributeLocations,e.aPosition);t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth);t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight);this.sendUniformData(t,r.uniformLocations);t.viewport(0,0,e.destinationWidth,e.destinationHeight);t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,r){e.activeTexture(r);e.bindTexture(e.TEXTURE_2D,t);e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t);e.bindTexture(e.TEXTURE_2D,null);e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth;t.height=e.sourceHeight;e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;t&&(e[t]=this[t]);return e},toJSON:function(){return this.toObject()}});B.Image.filters.BaseFilter.fromObject=function(e,t){var r=new B.Image.filters[e.type](e);t&&t(r);return r};(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.ColorMatrix=n(r.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:true,initialize:function(e){this.callSuper("initialize",e);this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t=e.imageData,r=t.data,n=r.length,i=this.matrix,o,s,a,l,c,u=this.colorsOnly;for(c=0;c<n;c+=4){o=r[c];s=r[c+1];a=r[c+2];if(u){r[c]=o*i[0]+s*i[1]+a*i[2]+255*i[4];r[c+1]=o*i[5]+s*i[6]+a*i[7]+255*i[9];r[c+2]=o*i[10]+s*i[11]+a*i[12]+255*i[14]}else{l=r[c+3];r[c]=o*i[0]+s*i[1]+a*i[2]+l*i[3]+255*i[4];r[c+1]=o*i[5]+s*i[6]+a*i[7]+l*i[8]+255*i[9];r[c+2]=o*i[10]+s*i[11]+a*i[12]+l*i[13]+255*i[14];r[c+3]=o*i[15]+s*i[16]+a*i[17]+l*i[18]+255*i[19]}}},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var r=this.matrix,n=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,false,n);e.uniform4fv(t.uConstants,i)}});t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Brightness=n(r.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0===this.brightness)return;var t=e.imageData,r=t.data,n,i=r.length,o=Math.round(255*this.brightness);for(n=0;n<i;n+=4){r[n]=r[n]+o;r[n+1]=r[n+1]+o;r[n+2]=r[n+2]+o}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}});t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,n=t.Image.filters,i=t.util.createClass;n.Convolute=i(n.BaseFilter,{type:"Convolute",opaque:false,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length);var r=this.type+"_"+t+"_"+(this.opaque?1:0);var n=this.fragmentSource[r];e.programCache.hasOwnProperty(r)||(e.programCache[r]=this.createProgram(e.context,n));return e.programCache[r]},applyTo2d:function(e){var t=e.imageData,r=t.data,n=this.matrix,i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),s=t.width,a=t.height,l=e.ctx.createImageData(s,a),c=l.data,u=this.opaque?1:0,d,h,f,p,m,g,v,_,b,y,j,C,w;for(j=0;j<a;j++)for(y=0;y<s;y++){m=4*(j*s+y);d=0;h=0;f=0;p=0;for(w=0;w<i;w++)for(C=0;C<i;C++){v=j+w-o;g=y+C-o;if(v<0||v>a||g<0||g>s)continue;_=4*(v*s+g);b=n[w*i+C];d+=r[_]*b;h+=r[_+1]*b;f+=r[_+2]*b;u||(p+=r[_+3]*b)}c[m]=d;c[m+1]=h;c[m+2]=f;c[m+3]=u?r[m+3]:p}e.imageData=l},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return r(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}});t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Grayscale=n(r.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t=e.imageData,r=t.data,n,i=r.length,o,s=this.mode;for(n=0;n<i;n+=4){"average"===s?o=(r[n]+r[n+1]+r[n+2])/3:"lightness"===s?o=(Math.min(r[n],r[n+1],r[n+2])+Math.max(r[n],r[n+1],r[n+2]))/2:"luminosity"===s&&(o=.21*r[n]+.72*r[n+1]+.07*r[n+2]);r[n]=o;r[n+1]=o;r[n+2]=o}},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var r=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,r)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){var r=1;e.uniform1i(t.uMode,r)},isNeutralState:function(){return false}});t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Invert=n(r.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:true,mainParameter:"invert",applyTo2d:function(e){var t=e.imageData,r=t.data,n,i=r.length;for(n=0;n<i;n+=4){r[n]=255-r[n];r[n+1]=255-r[n+1];r[n+2]=255-r[n+2]}},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}});t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,n=t.Image.filters,i=t.util.createClass;n.Noise=i(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0===this.noise)return;var t=e.imageData,r=t.data,n,i=r.length,o=this.noise,s;for(n=0,i=r.length;n<i;n+=4){s=(.5-Math.random())*o;r[n]+=s;r[n+1]+=s;r[n+2]+=s}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255);e.uniform1f(t.uSeed,Math.random())},toObject:function(){return r(this.callSuper("toObject"),{noise:this.noise})}});t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Pixelate=n(r.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t=e.imageData,r=t.data,n=t.height,i=t.width,o,s,a,l,c,u,d,h,f,p,m;for(s=0;s<n;s+=this.blocksize)for(a=0;a<i;a+=this.blocksize){o=4*s*i+4*a;l=r[o];c=r[o+1];u=r[o+2];d=r[o+3];p=Math.min(s+this.blocksize,n);m=Math.min(a+this.blocksize,i);for(h=s;h<p;h++)for(f=a;f<m;f++){o=4*h*i+4*f;r[o]=l;r[o+1]=c;r[o+2]=u;r[o+3]=d}}},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}});t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var d=e.fabric||(e.fabric={}),t=d.util.object.extend,r=d.Image.filters,n=d.util.createClass;r.RemoveColor=n(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:false,applyTo2d:function(e){var t=e.imageData,r=t.data,n,i=255*this.distance,o,s,a,l=new d.Color(this.color).getSource(),c=[l[0]-i,l[1]-i,l[2]-i],u=[l[0]+i,l[1]+i,l[2]+i];for(n=0;n<r.length;n+=4){o=r[n];s=r[n+1];a=r[n+2];o>c[0]&&s>c[1]&&a>c[2]&&o<u[0]&&s<u[1]&&a<u[2]&&(r[n+3]=0)}},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,t){var r=new d.Color(this.color).getSource(),n=parseFloat(this.distance),i=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],o=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];e.uniform4fv(t.uLow,i);e.uniform4fv(t.uHigh,o)},toObject:function(){return t(this.callSuper("toObject"),{color:this.color,distance:this.distance})}});d.Image.filters.RemoveColor.fromObject=d.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;var i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in i){r[o]=n(r.ColorMatrix,{type:o,matrix:i[o],mainParameter:false,colorsOnly:true});t.Image.filters[o].fromObject=t.Image.filters.BaseFilter.fromObject}})((true,t));(function(e){"use strict";var f=e.fabric,t=f.Image.filters,r=f.util.createClass;t.BlendColor=r(t.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,r;if(!e.programCache.hasOwnProperty(t)){r=this.buildSource(this.mode);e.programCache[t]=this.createProgram(e.context,r)}return e.programCache[t]},applyTo2d:function(e){var t=e.imageData,r=t.data,n=r.length,i,o,s,a,l,c,u,d=1-this.alpha;u=new f.Color(this.color).getSource();i=u[0]*this.alpha;o=u[1]*this.alpha;s=u[2]*this.alpha;for(var h=0;h<n;h+=4){a=r[h];l=r[h+1];c=r[h+2];switch(this.mode){case"multiply":r[h]=a*i/255;r[h+1]=l*o/255;r[h+2]=c*s/255;break;case"screen":r[h]=255-(255-a)*(255-i)/255;r[h+1]=255-(255-l)*(255-o)/255;r[h+2]=255-(255-c)*(255-s)/255;break;case"add":r[h]=a+i;r[h+1]=l+o;r[h+2]=c+s;break;case"diff":case"difference":r[h]=Math.abs(a-i);r[h+1]=Math.abs(l-o);r[h+2]=Math.abs(c-s);break;case"subtract":r[h]=a-i;r[h+1]=l-o;r[h+2]=c-s;break;case"darken":r[h]=Math.min(a,i);r[h+1]=Math.min(l,o);r[h+2]=Math.min(c,s);break;case"lighten":r[h]=Math.max(a,i);r[h+1]=Math.max(l,o);r[h+2]=Math.max(c,s);break;case"overlay":r[h]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255;r[h+1]=o<128?2*l*o/255:255-2*(255-l)*(255-o)/255;r[h+2]=s<128?2*c*s/255:255-2*(255-c)*(255-s)/255;break;case"exclusion":r[h]=i+a-2*i*a/255;r[h+1]=o+l-2*o*l/255;r[h+2]=s+c-2*s*c/255;break;case"tint":r[h]=i+a*d;r[h+1]=o+l*d;r[h+2]=s+c*d}}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,t){var r=new f.Color(this.color).getSource();r[0]=this.alpha*r[0]/255;r[1]=this.alpha*r[1]/255;r[2]=this.alpha*r[2]/255;r[3]=this.alpha;e.uniform4fv(t.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}});f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var y=e.fabric,t=y.Image.filters,r=y.util.createClass;t.BlendImage=r(t.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode;var r=this.fragmentSource[this.mode];e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,r));return e.programCache[t]},applyToWebGL:function(e){var t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1);this.callSuper("applyToWebGL",e);this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,r=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]},applyTo2d:function(e){var t=e.imageData,r=e.filterBackend.resources,n=t.data,i=n.length,o=t.width,s=t.height,a,l,c,u,d,h,f,p,m,g,v=this.image,_;r.blendImage||(r.blendImage=y.util.createCanvasElement());m=r.blendImage;g=m.getContext("2d");if(m.width!==o||m.height!==s){m.width=o;m.height=s}else g.clearRect(0,0,o,s);g.setTransform(v.scaleX,0,0,v.scaleY,v.left,v.top);g.drawImage(v._element,0,0,o,s);_=g.getImageData(0,0,o,s).data;for(var b=0;b<i;b+=4){d=n[b];h=n[b+1];f=n[b+2];p=n[b+3];a=_[b];l=_[b+1];c=_[b+2];u=_[b+3];switch(this.mode){case"multiply":n[b]=d*a/255;n[b+1]=h*l/255;n[b+2]=f*c/255;n[b+3]=p*u/255;break;case"mask":n[b+3]=u;break}}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var r=this.calculateMatrix();e.uniform1i(t.uImage,1);e.uniformMatrix3fv(t.uTransformMatrix,false,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}});y.Image.filters.BlendImage.fromObject=function(r,n){y.Image.fromObject(r.image,function(e){var t=y.util.object.clone(r);t.image=e;n(new y.Image.filters.BlendImage(t))})}})((true,t));(function(e){"use strict";var _=e.fabric||(e.fabric={}),k=Math.pow,P=Math.floor,R=Math.sqrt,F=Math.abs,c=Math.round,n=Math.sin,D=Math.ceil,t=_.Image.filters,r=_.util.createClass;t.Resize=r(t.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]);e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),r=this.type+"_"+t;if(!e.programCache.hasOwnProperty(r)){var n=this.generateShader(t);e.programCache[r]=this.createProgram(e.context,n)}return e.programCache[r]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),n=new Array(r);for(var i=1;i<=r;i++)n[i-1]=e(i*t);return n},generateShader:function(e){var t=new Array(e),r=this.fragmentSourceTOP,e;for(var n=1;n<=e;n++)t[n-1]=n+".0 * uDelta";r+="uniform float uTaps["+e+"];\n";r+="void main() {\n";r+="  vec4 color = texture2D(uTexture, vTexCoord);\n";r+="  float sum = 1.0;\n";t.forEach(function(e,t){r+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n";r+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n";r+="  sum += 2.0 * uTaps["+t+"];\n"});r+="  gl_FragColor = color / sum;\n";r+="}";return r},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){if(e.webgl){e.passes++;this.width=e.sourceWidth;this.horizontal=true;this.dW=Math.round(this.width*this.scaleX);this.dH=e.sourceHeight;this.tempScale=this.dW/this.width;this.taps=this.getTaps();e.destinationWidth=this.dW;this._setupFrameBuffer(e);this.applyToWebGL(e);this._swapTextures(e);e.sourceWidth=e.destinationWidth;this.height=e.sourceHeight;this.horizontal=false;this.dH=Math.round(this.height*this.scaleY);this.tempScale=this.dH/this.height;this.taps=this.getTaps();e.destinationHeight=this.dH;this._setupFrameBuffer(e);this.applyToWebGL(e);this._swapTextures(e);e.sourceHeight=e.destinationHeight}else this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(r){return function(e){if(e>=r||e<=-r)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var t=e/r;return n(e)/e*n(t)/t}},applyTo2d:function(e){var t=e.imageData,r=this.scaleX,n=this.scaleY;this.rcpScaleX=1/r;this.rcpScaleY=1/n;var i=t.width,o=t.height,s=c(i*r),a=c(o*n),l;"sliceHack"===this.resizeType?l=this.sliceByTwo(e,i,o,s,a):"hermite"===this.resizeType?l=this.hermiteFastResize(e,i,o,s,a):"bilinear"===this.resizeType?l=this.bilinearFiltering(e,i,o,s,a):"lanczos"===this.resizeType&&(l=this.lanczosResize(e,i,o,s,a));e.imageData=l},sliceByTwo:function(e,t,r,n,i){var o=e.imageData,s=.5,a=false,l=false,c=t*s,u=r*s,d=_.filterBackend.resources,h,f,p=0,m=0,g=t,v=0;d.sliceByTwo||(d.sliceByTwo=document.createElement("canvas"));h=d.sliceByTwo;if(h.width<1.5*t||h.height<r){h.width=1.5*t;h.height=r}f=h.getContext("2d");f.clearRect(0,0,1.5*t,r);f.putImageData(o,0,0);n=P(n);i=P(i);while(!a||!l){t=c;r=u;if(n<P(c*s))c=P(c*s);else{c=n;a=true}if(i<P(u*s))u=P(u*s);else{u=i;l=true}f.drawImage(h,p,m,t,r,g,v,c,u);p=g;m=v;v+=u}return f.getImageData(p,m,n,i)},lanczosResize:function(e,f,p,m,g){function v(e){var t,r,n,i,o,s,a,l,c,u,d;T.x=(e+.5)*C;I.x=P(T.x);for(t=0;t<g;t++){T.y=(t+.5)*w;I.y=P(T.y);o=0;s=0;a=0;l=0;c=0;for(r=I.x-A;r<=I.x+A;r++){if(r<0||r>=f)continue;u=P(1e3*F(r-T.x));S[u]||(S[u]={});for(var h=I.y-O;h<=I.y+O;h++){if(h<0||h>=p)continue;d=P(1e3*F(h-T.y));S[u][d]||(S[u][d]=j(R(k(u*x,2)+k(d*E,2))/1e3));n=S[u][d];if(n>0){i=4*(h*f+r);o+=n;s+=n*_[i];a+=n*_[i+1];l+=n*_[i+2];c+=n*_[i+3]}}}i=4*(t*m+e);y[i]=s/o;y[i+1]=a/o;y[i+2]=l/o;y[i+3]=c/o}return++e<m?v(e):b}var _=e.imageData.data,b=e.ctx.createImageData(m,g),y=b.data,j=this.lanczosCreate(this.lanczosLobes),C=this.rcpScaleX,w=this.rcpScaleY,x=2/this.rcpScaleX,E=2/this.rcpScaleY,A=D(C*this.lanczosLobes/2),O=D(w*this.lanczosLobes/2),S={},T={},I={};return v(0)},bilinearFiltering:function(e,t,r,n,i){var o,s,a,l,c,u,d,h,f,p,m,g,v=0,_,b=this.rcpScaleX,y=this.rcpScaleY,j=4*(t-1),C=e.imageData,w=C.data,x=e.ctx.createImageData(n,i),E=x.data;for(d=0;d<i;d++)for(h=0;h<n;h++){c=P(b*h);u=P(y*d);f=b*h-c;p=y*d-u;_=4*(u*t+c);for(m=0;m<4;m++){o=w[_+m];s=w[_+4+m];a=w[_+j+m];l=w[_+j+4+m];g=o*(1-f)*(1-p)+s*f*(1-p)+a*p*(1-f)+l*f*p;E[v++]=g}}return x},hermiteFastResize:function(e,t,r,n,i){var o=this.rcpScaleX,s=this.rcpScaleY,a=D(o/2),l=D(s/2),c=e.imageData,u=c.data,d=e.ctx.createImageData(n,i),h=d.data;for(var f=0;f<i;f++)for(var p=0;p<n;p++){var m=4*(p+f*n),g=0,v=0,_=0,b=0,y=0,j=0,C=0,w=(f+.5)*s;for(var x=P(f*s);x<(f+1)*s;x++){var E=F(w-(x+.5))/l,A=(p+.5)*o,O=E*E;for(var S=P(p*o);S<(p+1)*o;S++){var T=F(A-(S+.5))/a,I=R(O+T*T);if(I>1&&I<-1)continue;g=2*I*I*I-3*I*I+1;if(g>0){T=4*(S+x*t);C+=g*u[T+3];_+=g;u[T+3]<255&&(g=g*u[T+3]/250);b+=g*u[T];y+=g*u[T+1];j+=g*u[T+2];v+=g}}}h[m]=b/v;h[m+1]=y/v;h[m+2]=j/v;h[m+3]=C/_}return d},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}});_.Image.filters.Resize.fromObject=_.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Contrast=n(r.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0===this.contrast)return;var t=e.imageData,r,n,i=t.data,n=i.length,o=Math.floor(255*this.contrast),s=259*(o+255)/(255*(259-o));for(r=0;r<n;r+=4){i[r]=s*(i[r]-128)+128;i[r+1]=s*(i[r+1]-128)+128;i[r+2]=s*(i[r+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}});t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Saturation=n(r.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0===this.saturation)return;var t=e.imageData,r=t.data,n=r.length,i=-this.saturation,o,s;for(o=0;o<n;o+=4){s=Math.max(r[o],r[o+1],r[o+2]);r[o]+=s!==r[o]?(s-r[o])*i:0;r[o+1]+=s!==r[o+1]?(s-r[o+1])*i:0;r[o+2]+=s!==r[o+2]?(s-r[o+2])*i:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}});t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var m=e.fabric||(e.fabric={}),t=m.Image.filters,r=m.util.createClass;t.Blur=r(t.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){if(e.webgl){this.aspectRatio=e.sourceWidth/e.sourceHeight;e.passes++;this._setupFrameBuffer(e);this.horizontal=true;this.applyToWebGL(e);this._swapTextures(e);this._setupFrameBuffer(e);this.horizontal=false;this.applyToWebGL(e);this._swapTextures(e)}else this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var t=e.filterBackend.resources,r,n,i=e.imageData.width,o=e.imageData.height;if(!t.blurLayer1){t.blurLayer1=m.util.createCanvasElement();t.blurLayer2=m.util.createCanvasElement()}r=t.blurLayer1;n=t.blurLayer2;if(r.width!==i||r.height!==o){n.width=r.width=i;n.height=r.height=o}var s=r.getContext("2d"),a=n.getContext("2d"),l=15,c,u,d,h,f=.06*this.blur*.5;s.putImageData(e.imageData,0,0);a.clearRect(0,0,i,o);for(h=-l;h<=l;h++){c=(Math.random()-.5)/4;u=h/l;d=f*u*i+c;a.globalAlpha=1-Math.abs(u);a.drawImage(r,d,c);s.drawImage(n,0,0);a.globalAlpha=1;a.clearRect(0,0,n.width,n.height)}for(h=-l;h<=l;h++){c=(Math.random()-.5)/4;u=h/l;d=f*u*o+c;a.globalAlpha=1-Math.abs(u);a.drawImage(r,c,d);s.drawImage(n,0,0);a.globalAlpha=1;a.clearRect(0,0,n.width,n.height)}e.ctx.drawImage(r,0,0);var p=e.ctx.getImageData(0,0,r.width,r.height);s.globalAlpha=1;s.clearRect(0,0,r.width,r.height);return p},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var r=this.chooseRightDelta();e.uniform2fv(t.delta,r)},chooseRightDelta:function(){var e=1,t=[0,0],r;this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);r=e*this.blur*.12;this.horizontal?t[0]=r:t[1]=r;return t}});t.Blur.fromObject=m.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,n=t.util.createClass;r.Gamma=n(r.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1];r.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t=e.imageData,r=t.data,n=this.gamma,i=r.length,o=1/n[0],s=1/n[1],a=1/n[2],l;if(!this.rVals){this.rVals=new Uint8Array(256);this.gVals=new Uint8Array(256);this.bVals=new Uint8Array(256)}for(l=0,i=256;l<i;l++){this.rVals[l]=255*Math.pow(l/255,o);this.gVals[l]=255*Math.pow(l/255,s);this.bVals[l]=255*Math.pow(l/255,a)}for(l=0,i=r.length;l<i;l+=4){r[l]=this.rVals[r[l]];r[l+1]=this.gVals[r[l+1]];r[l+2]=this.bVals[r[l+2]]}},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}});t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject})((true,t));(function(e){"use strict";var o=e.fabric||(e.fabric={}),t=o.Image.filters,r=o.util.createClass;t.Composed=r(t.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e);this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1;this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(e){return e.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(e){return!e.isNeutralState()})}});o.Image.filters.Composed.fromObject=function(e,t){var r=e.subFilters||[],n=r.map(function(e){return new o.Image.filters[e.type](e)}),i=new o.Image.filters.Composed({subFilters:n});t&&t(i);return i}})((true,t));(function(e){"use strict";var s=e.fabric||(e.fabric={}),t=s.Image.filters,r=s.util.createClass;t.HueRotation=r(t.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,t=s.util.cos(e),r=s.util.sin(e),n=1/3,i=Math.sqrt(n)*r,o=1-t;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.matrix[0]=t+o/3;this.matrix[1]=n*o-i;this.matrix[2]=n*o+i;this.matrix[5]=n*o+i;this.matrix[6]=t+n*o;this.matrix[7]=n*o-i;this.matrix[10]=n*o-i;this.matrix[11]=n*o+i;this.matrix[12]=t+n*o},isNeutralState:function(e){this.calculateMatrix();return t.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix();t.BaseFilter.prototype.applyTo.call(this,e)}});s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject})((true,t))}).call(this,r("./node_modules/buffer/index.js").Buffer)},"../image-editor-utils/getStraightenAmount.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=function e(t){t<0&&(t+=360*Math.ceil(-1*t/360));return t%90>=45?t%90-90:t%90};t.default=n},"../image-editor-utils/isOriginalOrientation.js":function(e,t,r){"use strict";var n=r("../image-editor-utils/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var i=n(r("../image-editor-utils/normalizeRotation.js"));function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,i.default)(e+45)%180<=90}},"../image-editor-utils/node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}e.exports=r},"../image-editor-utils/normalizeRotation.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=n;function n(e){var t=e<0?360:0;return e%360+t}},"./node_modules/@sqs/styles/variables/baseRosetta.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GLOBAL_ROUNDED_CORNER_RADIUS_PX=t.BUTTON_INSET_PX=t.FONT_WEIGHT_MEDIUM=t.FONT_WEIGHT_BOOK=t.FONT_SIZE_SMALLEST_CAPS_LETTER_SPACING_PX=t.FONT_SIZE_SMALLER_CAPS_LETTER_SPACING_PX=t.FONT_SIZE_LARGE_PX=t.MOBILE_FONT_SIZE_SMALLEST_PX=t.MOBILE_FONT_SIZE_SMALLER_PX=t.MOBILE_FONT_SIZE_PX=t.FONT_SIZE_SMALLEST_PX=t.FONT_SIZE_SMALLER_PX=t.FONT_SIZE_PX=t.FONT_FAMILY=t.ERROR_FONT_SIZE_PX=t.ACCESSORY_ICON_SIZE_PX=t.MARGIN_TOP_LABEL_PX=t.MARGIN_TOP_DESCRIPTION_PX=t.MARGIN_BOTTOM_DESCRIPTION_PX=t.LINE_HEIGHT_LABEL_PX=t.LINE_HEIGHT_DESCRIPTION_PX=t.BUTTON_HEIGHT_MEDIUM_PX=t.BUTTON_HEIGHT_SMALL_PX=t.FIELD_LABEL_MARGIN_TOP_PX=t.FIELD_INNER_MARGIN_PX=t.FIELD_INLINE_LABEL_WIDTH_PX=t.FIELD_HORIZONTAL_PADDING_PX=t.FIELD_HEIGHT_PX=t.FIELD_BORDER_RADIUS_PX=t.COLOR_TRACK_SIZE_PX=t.COLORS=t.TRANSITION_DURATION_MS=t.SIDEBAR_WIDTH_PX=t.STROKE_WIDTH_PX=t.GRID_SIZE_PX=void 0;var n=r("./node_modules/babel-runtime/helpers/defineProperty.js");var i=s(n);var o;function s(e){return e&&e.__esModule?e:{default:e}}var a=t.GRID_SIZE_PX=11;var l=t.STROKE_WIDTH_PX=1;var c=t.SIDEBAR_WIDTH_PX=320;var u=t.TRANSITION_DURATION_MS=350;var d=t.COLORS={black:"#313131",blue:"#0888c8",error:"#f0523d",field_blur:"rgba(0, 0, 0, 0)",field_caret:"#436bf1",field_focus:"rgba(0, 0, 0, 0.03)",field_line_inverse:"#efefef",field_line:"rgba(0, 0, 0, 0.06)",gray_dark:"#6d6d6d",gray_darker:"#ededed",gray_light:"#d0d0d0",gray_lighter:"#e4e4e4",gray_lightest:"#f2f2f2",gray:"#a1a1a1",green:"#35d297",outline_hover:"#00adff",red:"#ec3e3d",white:"#ffffff"};var h=t.COLOR_TRACK_SIZE_PX=3*a;var f=t.FIELD_BORDER_RADIUS_PX=4;var p=t.FIELD_HEIGHT_PX=4*a;var m=t.FIELD_HORIZONTAL_PADDING_PX=16;var g=t.FIELD_INLINE_LABEL_WIDTH_PX=100;var v=t.FIELD_INNER_MARGIN_PX=6;var _=t.FIELD_LABEL_MARGIN_TOP_PX=16;var b=t.BUTTON_HEIGHT_SMALL_PX=32;var y=t.BUTTON_HEIGHT_MEDIUM_PX=37;var j=t.LINE_HEIGHT_DESCRIPTION_PX=16;var C=t.LINE_HEIGHT_LABEL_PX=12;var w=t.MARGIN_BOTTOM_DESCRIPTION_PX=4;var x=t.MARGIN_TOP_DESCRIPTION_PX=2;var E=t.MARGIN_TOP_LABEL_PX=4;var A=t.ACCESSORY_ICON_SIZE_PX=16;var O={FADEIN_DURATION:"0.1s",FADEIN_EASING:"ease-in-out"};var S=t.ERROR_FONT_SIZE_PX=12;var T=t.FONT_FAMILY="Clarkson";var I=t.FONT_SIZE_PX=14;var k=t.FONT_SIZE_SMALLER_PX=12;var P=t.FONT_SIZE_SMALLEST_PX=9.75;var R=t.MOBILE_FONT_SIZE_PX=16;var F=t.MOBILE_FONT_SIZE_SMALLER_PX=12;var D=t.MOBILE_FONT_SIZE_SMALLEST_PX=11;var L=t.FONT_SIZE_LARGE_PX=R;var M=t.FONT_SIZE_SMALLER_CAPS_LETTER_SPACING_PX=.5;var B=t.FONT_SIZE_SMALLEST_CAPS_LETTER_SPACING_PX=.75;var N=t.FONT_WEIGHT_BOOK="400";var U=t.FONT_WEIGHT_MEDIUM="500";var X=t.BUTTON_INSET_PX=54;var G=t.GLOBAL_ROUNDED_CORNER_RADIUS_PX=4;t.default=(o={"rosetta-background-color-light":"rgba(255,255,255,0.3)","rosetta-black":d.black,"rosetta-blue":d.blue,"rosetta-error-color":d.error,"rosetta-field-caret-color":d.field_caret,"rosetta-field-focus-color":d.field_focus,"rosetta-field-line-color":d.field_line,"rosetta-gray-dark":d.gray_dark,"rosetta-gray-darker":d.gray_darker,"rosetta-gray-light":d.gray_light,"rosetta-gray-lighter":d.gray_lighter,"rosetta-gray-lightest":d.gray_lightest,"rosetta-gray-medium":"rgba(0,0,0,0.1)","rosetta-gray":d.gray,"rosetta-green":d.green,"rosetta-outlineHoverColor":d.outline_hover,"rosetta-outlineSelectedColor":d.outline_hover,"rosetta-red":d.red,"rosetta-text-color-light":"rgba(62,62,62,0.4)","rosetta-text-color":"rgba(62,62,62,1)","rosetta-white":d.white,"rosetta-sidebar-width":c+"px","rosetta-transition-duration":u+"ms","rosetta-transition-easing-bounce":"cubic-bezier(0.175, 0.885, 0.32, 1.15)","rosetta-transition-easing":"cubic-bezier(0.77, 0, 0.175, 1)","rosetta-transition-fadein-duration":O.FADEIN_DURATION,"rosetta-transition-fadein-easing":O.FADEIN_EASING,"rosetta-transition-fadein":O.FADEIN_DURATION+" "+O.FADEIN_EASING,grid:a+"px","dialog-border-radius":"8px","dialog-box-shadow":"rgba(0, 0, 0, 0.2) 0 30px 100px, rgba(0, 0, 0, 0.06) 0 4px 10px","dialog-overlay-color":"rgba(0, 0, 0, 0.1)","field-horizontal-padding":m+"px","field-height":p+"px","field-border-radius":f+"px","field-inner-margin":v+"px","field-label-margin-top":_+"px","field-inline-label-width":g+"px","button-height-small":b+"px","button-height-medium":b+"px",strokeWidth:l+"px","font-family":T,"font-size":I+"px","font-size-large":L+"px","font-size-smaller":k+"px","font-size-smallest":P+"px","mobile-font-size":R+"px","mobile-font-size-smaller":k+"px","mobile-font-size-smallest":P+"px"},(0,i.default)(o,"font-size-large",L+"px"),(0,i.default)(o,"font-size-smaller-caps-letter-spacing",M+"px"),(0,i.default)(o,"font-size-smallest-caps-letter-spacing",B+"px"),(0,i.default)(o,"error-font-size",S+"px"),(0,i.default)(o,"font-weight-medium",U),(0,i.default)(o,"font-weight-book",N),(0,i.default)(o,"line-height-label",C+"px"),(0,i.default)(o,"line-height-description",j+"px"),(0,i.default)(o,"margin-top-label",E+"px"),(0,i.default)(o,"margin-top-description",x+"px"),(0,i.default)(o,"margin-bottom-description",w+"px"),(0,i.default)(o,"accessory-icon-size",A+"px"),(0,i.default)(o,"knob-box-shadow","0 3px 14px rgba(0, 0, 0, 0.2)"),o)},"./node_modules/babel-runtime/core-js/object/define-property.js":function(e,t,r){e.exports={default:r("./node_modules/core-js/library/fn/object/define-property.js"),__esModule:true}},"./node_modules/babel-runtime/helpers/defineProperty.js":function(e,t,r){"use strict";t.__esModule=true;var n=r("./node_modules/babel-runtime/core-js/object/define-property.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){t in e?(0,i.default)(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}},"./node_modules/base64-js/index.js":function(e,t,r){"use strict";t.byteLength=s;t.toByteArray=a;t.fromByteArray=m;var l=[];var c=[];var u="undefined"!==typeof Uint8Array?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,o=n.length;i<o;++i){l[i]=n[i];c[n.charCodeAt(i)]=i}c["-".charCodeAt(0)]=62;c["_".charCodeAt(0)]=63;function d(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function s(e){var t=d(e);var r=t[0];var n=t[1];return 3*(r+n)/4-n}function h(e,t,r){return 3*(t+r)/4-r}function a(e){var t;var r=d(e);var n=r[0];var i=r[1];var o=new u(h(e,n,i));var s=0;var a=i>0?n-4:n;for(var l=0;l<a;l+=4){t=c[e.charCodeAt(l)]<<18|c[e.charCodeAt(l+1)]<<12|c[e.charCodeAt(l+2)]<<6|c[e.charCodeAt(l+3)];o[s++]=t>>16&255;o[s++]=t>>8&255;o[s++]=255&t}if(2===i){t=c[e.charCodeAt(l)]<<2|c[e.charCodeAt(l+1)]>>4;o[s++]=255&t}if(1===i){t=c[e.charCodeAt(l)]<<10|c[e.charCodeAt(l+1)]<<4|c[e.charCodeAt(l+2)]>>2;o[s++]=t>>8&255;o[s++]=255&t}return o}function f(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function p(e,t,r){var n;var i=[];for(var o=t;o<r;o+=3){n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]);i.push(f(n))}return i.join("")}function m(e){var t;var r=e.length;var n=r%3;var i=[];var o=16383;for(var s=0,a=r-n;s<a;s+=o)i.push(p(e,s,s+o>a?a:s+o));if(1===n){t=e[r-1];i.push(l[t>>2]+l[t<<4&63]+"==")}else if(2===n){t=(e[r-2]<<8)+e[r-1];i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return i.join("")}},"./node_modules/buffer/index.js":function(e,ee,te){"use strict";(function(e){var n=te("./node_modules/base64-js/index.js");var o=te("./node_modules/ieee754/index.js");var a=te("./node_modules/buffer/node_modules/isarray/index.js");ee.Buffer=h;ee.SlowBuffer=v;ee.INSPECT_MAX_BYTES=50;h.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:t();ee.kMaxLength=r();function t(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return false}}function r(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(r()<t)throw new RangeError("Invalid typed array length");if(h.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=h.prototype}else{null===e&&(e=new h(t));e.length=t}return e}function h(e,t,r){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,r)}h.poolSize=8192;h._augment=function(e){e.__proto__=h.prototype;return e};function i(e,t,r,n){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer)return p(e,t,r,n);if("string"===typeof t)return d(e,t,r);return m(e,t)}h.from=function(e,t,r){return i(null,e,t,r)};if(h.TYPED_ARRAY_SUPPORT){h.prototype.__proto__=Uint8Array.prototype;h.__proto__=Uint8Array;"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:true})}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){l(t);if(t<=0)return s(e,t);if(void 0!==r)return"string"===typeof n?s(e,t).fill(r,n):s(e,t).fill(r);return s(e,t)}h.alloc=function(e,t,r){return c(null,e,t,r)};function u(e,t){l(t);e=s(e,t<0?0:0|g(t));if(!h.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}h.allocUnsafe=function(e){return u(null,e)};h.allocUnsafeSlow=function(e){return u(null,e)};function d(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!h.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(t,r);e=s(e,n);var i=e.write(t,r);i!==n&&(e=e.slice(0,i));return e}function f(e,t){var r=t.length<0?0:0|g(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);if(h.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=h.prototype}else e=f(e,t);return e}function m(e,t){if(h.isBuffer(t)){var r=0|g(t.length);e=s(e,r);if(0===e.length)return e;t.copy(e,0,0,r);return e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t){if("number"!==typeof t.length||Q(t.length))return s(e,0);return f(e,t)}if("Buffer"===t.type&&a(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function v(e){+e!=e&&(e=0);return h.alloc(+e)}h.isBuffer=function e(t){return!!(null!=t&&t._isBuffer)};h.compare=function e(t,r){if(!h.isBuffer(t)||!h.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;var n=t.length;var i=r.length;for(var o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o];i=r[o];break}if(n<i)return-1;if(i<n)return 1;return 0};h.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};h.concat=function e(t,r){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===r){r=0;for(n=0;n<t.length;++n)r+=t[n].length}var i=h.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var s=t[n];if(!h.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o);o+=s.length}return i};function _(e,t){if(h.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;var n=false;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return q(e).length;t=(""+t).toLowerCase();n=true}}h.byteLength=_;function b(e,t,r){var n=false;(void 0===t||t<0)&&(t=0);if(t>this.length)return"";(void 0===r||r>this.length)&&(r=this.length);if(r<=0)return"";r>>>=0;t>>>=0;if(r<=t)return"";e=e||"utf8";while(true)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return F(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}h.prototype._isBuffer=true;function y(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}h.prototype.swap16=function e(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)y(this,r,r+1);return this};h.prototype.swap32=function e(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4){y(this,r,r+3);y(this,r+1,r+2)}return this};h.prototype.swap64=function e(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8){y(this,r,r+7);y(this,r+1,r+6);y(this,r+2,r+5);y(this,r+3,r+4)}return this};h.prototype.toString=function e(){var t=0|this.length;if(0===t)return"";if(0===arguments.length)return I(this,0,t);return b.apply(this,arguments)};h.prototype.equals=function e(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return 0===h.compare(this,t)};h.prototype.inspect=function e(){var t="";var r=ee.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");this.length>r&&(t+=" ... ")}return"<Buffer "+t+">"};h.prototype.compare=function e(t,r,n,i,o){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");void 0===r&&(r=0);void 0===n&&(n=t?t.length:0);void 0===i&&(i=0);void 0===o&&(o=this.length);if(r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===t)return 0;var s=o-i;var a=n-r;var l=Math.min(s,a);var c=this.slice(i,o);var u=t.slice(r,n);for(var d=0;d<l;++d)if(c[d]!==u[d]){s=c[d];a=u[d];break}if(s<a)return-1;if(a<s)return 1;return 0};function j(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r){n=r;r=0}else r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648);r=+r;isNaN(r)&&(r=i?0:e.length-1);r<0&&(r=e.length+r);if(r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}"string"===typeof t&&(t=h.from(t,n));if(h.isBuffer(t)){if(0===t.length)return-1;return C(e,t,r,n,i)}if("number"===typeof t){t&=255;if(h.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf)return i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r);return C(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function C(e,t,r,n,i){var o=1;var s=e.length;var a=t.length;if(void 0!==n){n=String(n).toLowerCase();if("ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n){if(e.length<2||t.length<2)return-1;o=2;s/=2;a/=2;r/=2}}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var c;if(i){var u=-1;for(c=r;c<s;c++)if(l(e,c)===l(t,-1===u?0:c-u)){-1===u&&(u=c);if(c-u+1===a)return u*o}else{-1!==u&&(c-=c-u);u=-1}}else{r+a>s&&(r=s-a);for(c=r;c>=0;c--){var d=true;for(var h=0;h<a;h++)if(l(e,c+h)!==l(t,h)){d=false;break}if(d)return c}}return-1}h.prototype.includes=function e(t,r,n){return-1!==this.indexOf(t,r,n)};h.prototype.indexOf=function e(t,r,n){return j(this,t,r,n,true)};h.prototype.lastIndexOf=function e(t,r,n){return j(this,t,r,n,false)};function w(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(n){n=Number(n);n>i&&(n=i)}else n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function x(e,t,r,n){return J(q(t,e.length-r),e,r,n)}function E(e,t,r,n){return J(Z(t),e,r,n)}function A(e,t,r,n){return E(e,t,r,n)}function O(e,t,r,n){return J($(t),e,r,n)}function S(e,t,r,n){return J(K(t,e.length-r),e,r,n)}h.prototype.write=function e(t,r,n,i){if(void 0===r){i="utf8";n=this.length;r=0}else if(void 0===n&&"string"===typeof r){i=r;n=this.length;r=0}else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0;if(isFinite(n)){n|=0;void 0===i&&(i="utf8")}else{i=n;n=void 0}}var o=this.length-r;(void 0===n||n>o)&&(n=o);if(t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";var s=false;for(;;)switch(i){case"hex":return w(this,t,r,n);case"utf8":case"utf-8":return x(this,t,r,n);case"ascii":return E(this,t,r,n);case"latin1":case"binary":return A(this,t,r,n);case"base64":return O(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true}};h.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var o=e[i];var s=null;var a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var l,c,u,d;switch(a){case 1:o<128&&(s=o);break;case 2:l=e[i+1];if(128===(192&l)){d=(31&o)<<6|63&l;d>127&&(s=d)}break;case 3:l=e[i+1];c=e[i+2];if(128===(192&l)&&128===(192&c)){d=(15&o)<<12|(63&l)<<6|63&c;d>2047&&(d<55296||d>57343)&&(s=d)}break;case 4:l=e[i+1];c=e[i+2];u=e[i+3];if(128===(192&l)&&128===(192&c)&&128===(192&u)){d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u;d>65535&&d<1114112&&(s=d)}}}if(null===s){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|1023&s}n.push(s);i+=a}return P(n)}var k=4096;function P(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var r="";var n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function F(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function D(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||r>n)&&(r=n);var i="";for(var o=t;o<r;++o)i+=V(e[o]);return i}function L(e,t,r){var n=e.slice(t,r);var i="";for(var o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}h.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=void 0===r?n:~~r;if(t<0){t+=n;t<0&&(t=0)}else t>n&&(t=n);if(r<0){r+=n;r<0&&(r=0)}else r>n&&(r=n);r<t&&(r=t);var i;if(h.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=h.prototype}else{var o=r-t;i=new h(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+t]}return i};function M(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function e(t,r,n){t|=0;r|=0;n||M(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256))i+=this[t+s]*o;return i};h.prototype.readUIntBE=function e(t,r,n){t|=0;r|=0;n||M(t,r,this.length);var i=this[t+--r];var o=1;while(r>0&&(o*=256))i+=this[t+--r]*o;return i};h.prototype.readUInt8=function e(t,r){r||M(t,1,this.length);return this[t]};h.prototype.readUInt16LE=function e(t,r){r||M(t,2,this.length);return this[t]|this[t+1]<<8};h.prototype.readUInt16BE=function e(t,r){r||M(t,2,this.length);return this[t]<<8|this[t+1]};h.prototype.readUInt32LE=function e(t,r){r||M(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]};h.prototype.readUInt32BE=function e(t,r){r||M(t,4,this.length);return 16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])};h.prototype.readIntLE=function e(t,r,n){t|=0;r|=0;n||M(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256))i+=this[t+s]*o;o*=128;i>=o&&(i-=Math.pow(2,8*r));return i};h.prototype.readIntBE=function e(t,r,n){t|=0;r|=0;n||M(t,r,this.length);var i=r;var o=1;var s=this[t+--i];while(i>0&&(o*=256))s+=this[t+--i]*o;o*=128;s>=o&&(s-=Math.pow(2,8*r));return s};h.prototype.readInt8=function e(t,r){r||M(t,1,this.length);if(!(128&this[t]))return this[t];return-1*(255-this[t]+1)};h.prototype.readInt16LE=function e(t,r){r||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n};h.prototype.readInt16BE=function e(t,r){r||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n};h.prototype.readInt32LE=function e(t,r){r||M(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};h.prototype.readInt32BE=function e(t,r){r||M(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};h.prototype.readFloatLE=function e(t,r){r||M(t,4,this.length);return o.read(this,t,true,23,4)};h.prototype.readFloatBE=function e(t,r){r||M(t,4,this.length);return o.read(this,t,false,23,4)};h.prototype.readDoubleLE=function e(t,r){r||M(t,8,this.length);return o.read(this,t,true,52,8)};h.prototype.readDoubleBE=function e(t,r){r||M(t,8,this.length);return o.read(this,t,false,52,8)};function B(e,t,r,n,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r|=0;n|=0;if(!i){var o=Math.pow(2,8*n)-1;B(this,t,r,n,o,0)}var s=1;var a=0;this[r]=255&t;while(++a<n&&(s*=256))this[r+a]=t/s&255;return r+n};h.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r|=0;n|=0;if(!i){var o=Math.pow(2,8*n)-1;B(this,t,r,n,o,0)}var s=n-1;var a=1;this[r+s]=255&t;while(--s>=0&&(a*=256))this[r+s]=t/a&255;return r+n};h.prototype.writeUInt8=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,1,255,0);h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t));this[r]=255&t;return r+1};function N(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}h.prototype.writeUInt16LE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,2,65535,0);if(h.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8}else N(this,t,r,true);return r+2};h.prototype.writeUInt16BE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,2,65535,0);if(h.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=255&t}else N(this,t,r,false);return r+2};function U(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}h.prototype.writeUInt32LE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,4,4294967295,0);if(h.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=255&t}else U(this,t,r,true);return r+4};h.prototype.writeUInt32BE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,4,4294967295,0);if(h.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=255&t}else U(this,t,r,false);return r+4};h.prototype.writeIntLE=function e(t,r,n,i){t=+t;r|=0;if(!i){var o=Math.pow(2,8*n-1);B(this,t,r,n,o-1,-o)}var s=0;var a=1;var l=0;this[r]=255&t;while(++s<n&&(a*=256)){t<0&&0===l&&0!==this[r+s-1]&&(l=1);this[r+s]=(t/a>>0)-l&255}return r+n};h.prototype.writeIntBE=function e(t,r,n,i){t=+t;r|=0;if(!i){var o=Math.pow(2,8*n-1);B(this,t,r,n,o-1,-o)}var s=n-1;var a=1;var l=0;this[r+s]=255&t;while(--s>=0&&(a*=256)){t<0&&0===l&&0!==this[r+s+1]&&(l=1);this[r+s]=(t/a>>0)-l&255}return r+n};h.prototype.writeInt8=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,1,127,-128);h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t));t<0&&(t=255+t+1);this[r]=255&t;return r+1};h.prototype.writeInt16LE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,2,32767,-32768);if(h.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8}else N(this,t,r,true);return r+2};h.prototype.writeInt16BE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,2,32767,-32768);if(h.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=255&t}else N(this,t,r,false);return r+2};h.prototype.writeInt32LE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,4,2147483647,-2147483648);if(h.TYPED_ARRAY_SUPPORT){this[r]=255&t;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else U(this,t,r,true);return r+4};h.prototype.writeInt32BE=function e(t,r,n){t=+t;r|=0;n||B(this,t,r,4,2147483647,-2147483648);t<0&&(t=4294967295+t+1);if(h.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=255&t}else U(this,t,r,false);return r+4};function X(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function G(e,t,r,n,i){i||X(e,t,r,4,34028234663852886e22,-34028234663852886e22);o.write(e,t,r,n,23,4);return r+4}h.prototype.writeFloatLE=function e(t,r,n){return G(this,t,r,true,n)};h.prototype.writeFloatBE=function e(t,r,n){return G(this,t,r,false,n)};function H(e,t,r,n,i){i||X(e,t,r,8,17976931348623157e292,-17976931348623157e292);o.write(e,t,r,n,52,8);return r+8}h.prototype.writeDoubleLE=function e(t,r,n){return H(this,t,r,true,n)};h.prototype.writeDoubleBE=function e(t,r,n){return H(this,t,r,false,n)};h.prototype.copy=function e(t,r,n,i){n=n||0;i||0===i||(i=this.length);r>=t.length&&(r=t.length);r=r||0;i>0&&i<n&&(i=n);if(i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);t.length-r<i-n&&(i=t.length-r+n);var o=i-n;var s;if(this===t&&n<r&&r<i)for(s=o-1;s>=0;--s)t[s+r]=this[s+n];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(s=0;s<o;++s)t[s+r]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};h.prototype.fill=function e(t,r,n,i){if("string"===typeof t){if("string"===typeof r){i=r;r=0;n=this.length}else if("string"===typeof n){i=n;n=this.length}if(1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0;n=void 0===n?this.length:n>>>0;t=t||0;var s;if("number"===typeof t)for(s=r;s<n;++s)this[s]=t;else{var a=h.isBuffer(t)?t:q(new h(t,i).toString());var l=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%l]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function Y(e){e=W(e).replace(z,"");if(e.length<2)return"";while(e.length%4!==0)e+="=";return e}function W(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function V(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function q(e,t){t=t||1/0;var r;var n=e.length;var i=null;var o=[];for(var s=0;s<n;++s){r=e.charCodeAt(s);if(r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189);i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);i=null;if(r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Z(e){var t=[];for(var r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function K(e,t){var r,n,i;var o=[];for(var s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s);n=r>>8;i=r%256;o.push(i);o.push(n)}return o}function $(e){return n.toByteArray(Y(e))}function J(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Q(e){return e!==e}}).call(this,te("./node_modules/webpack/buildin/global.js"))},"./node_modules/buffer/node_modules/isarray/index.js":function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"./node_modules/classnames/index.js":function(e,t,r){var n,i;(function(){"use strict";var s={}.hasOwnProperty;function a(){var e=[];for(var t=0;t<arguments.length;t++){var r=arguments[t];if(!r)continue;var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===n)for(var o in r)s.call(r,o)&&r[o]&&e.push(o)}return e.join(" ")}if(true,e.exports){a.default=a;e.exports=a}else{true;!(n=[],i=function(){return a}.apply(t,n),void 0!==i&&(e.exports=i))}})()},"./node_modules/core-js/library/fn/object/define-property.js":function(e,t,r){r("./node_modules/core-js/library/modules/es6.object.define-property.js");var i=r("./node_modules/core-js/library/modules/_core.js").Object;e.exports=function e(t,r,n){return i.defineProperty(t,r,n)}},"./node_modules/core-js/library/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_an-object.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_core.js":function(e,t){var r=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},"./node_modules/core-js/library/modules/_ctx.js":function(e,t,r){var o=r("./node_modules/core-js/library/modules/_a-function.js");e.exports=function(n,i,e){o(n);if(void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}},"./node_modules/core-js/library/modules/_descriptors.js":function(e,t,r){e.exports=!r("./node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"./node_modules/core-js/library/modules/_dom-create.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_is-object.js");var i=r("./node_modules/core-js/library/modules/_global.js").document;var o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"./node_modules/core-js/library/modules/_export.js":function(e,t,r){var m=r("./node_modules/core-js/library/modules/_global.js");var g=r("./node_modules/core-js/library/modules/_core.js");var v=r("./node_modules/core-js/library/modules/_ctx.js");var _=r("./node_modules/core-js/library/modules/_hide.js");var b=r("./node_modules/core-js/library/modules/_has.js");var y="prototype";var j=function(e,t,r){var n=e&j.F;var i=e&j.G;var o=e&j.S;var s=e&j.P;var a=e&j.B;var l=e&j.W;var c=i?g:g[t]||(g[t]={});var u=c[y];var d=i?m:o?m[t]:(m[t]||{})[y];var h,f,p;i&&(r=t);for(h in r){f=!n&&d&&void 0!==d[h];if(f&&b(c,h))continue;p=f?d[h]:r[h];c[h]=i&&"function"!=typeof d[h]?r[h]:a&&f?v(p,m):l&&d[h]==p?function(n){var e=function(e,t,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return n.apply(this,arguments)};e[y]=n[y];return e}(p):s&&"function"==typeof p?v(Function.call,p):p;if(s){(c.virtual||(c.virtual={}))[h]=p;e&j.R&&u&&!u[h]&&_(u,h,p)}}};j.F=1;j.G=2;j.S=4;j.P=8;j.B=16;j.W=32;j.U=64;j.R=128;e.exports=j},"./node_modules/core-js/library/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},"./node_modules/core-js/library/modules/_global.js":function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"./node_modules/core-js/library/modules/_has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"./node_modules/core-js/library/modules/_hide.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_object-dp.js");var i=r("./node_modules/core-js/library/modules/_property-desc.js");e.exports=r("./node_modules/core-js/library/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},"./node_modules/core-js/library/modules/_ie8-dom-define.js":function(e,t,r){e.exports=!r("./node_modules/core-js/library/modules/_descriptors.js")&&!r("./node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty(r("./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/library/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/library/modules/_object-dp.js":function(e,t,r){var i=r("./node_modules/core-js/library/modules/_an-object.js");var o=r("./node_modules/core-js/library/modules/_ie8-dom-define.js");var s=r("./node_modules/core-js/library/modules/_to-primitive.js");var a=Object.defineProperty;t.f=r("./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function e(t,r,n){i(t);r=s(r,true);i(n);if(o)try{return a(t,r,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(t[r]=n.value);return t}},"./node_modules/core-js/library/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/library/modules/_to-primitive.js":function(e,t,r){var i=r("./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/es6.object.define-property.js":function(e,t,r){var n=r("./node_modules/core-js/library/modules/_export.js");n(n.S+n.F*!r("./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:r("./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_wks.js")("unscopables");var i=Array.prototype;void 0==i[n]&&r("./node_modules/core-js/modules/_hide.js")(i,n,{});e.exports=function(e){i[n][e]=true}},"./node_modules/core-js/modules/_an-instance.js":function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},"./node_modules/core-js/modules/_an-object.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/modules/_array-fill.js":function(e,t,r){"use strict";var l=r("./node_modules/core-js/modules/_to-object.js");var c=r("./node_modules/core-js/modules/_to-absolute-index.js");var u=r("./node_modules/core-js/modules/_to-length.js");e.exports=function e(t){var r=l(this);var n=u(r.length);var i=arguments.length;var o=c(i>1?arguments[1]:void 0,n);var s=i>2?arguments[2]:void 0;var a=void 0===s?n:c(s,n);while(a>o)r[o++]=t;return r}},"./node_modules/core-js/modules/_array-includes.js":function(e,t,r){var l=r("./node_modules/core-js/modules/_to-iobject.js");var c=r("./node_modules/core-js/modules/_to-length.js");var u=r("./node_modules/core-js/modules/_to-absolute-index.js");e.exports=function(a){return function(e,t,r){var n=l(e);var i=c(n.length);var o=u(r,i);var s;if(a&&t!=t)while(i>o){s=n[o++];if(s!=s)return true}else for(;i>o;o++)if((a||o in n)&&n[o]===t)return a||o||0;return!a&&-1}}},"./node_modules/core-js/modules/_array-methods.js":function(e,t,r){var b=r("./node_modules/core-js/modules/_ctx.js");var y=r("./node_modules/core-js/modules/_iobject.js");var j=r("./node_modules/core-js/modules/_to-object.js");var C=r("./node_modules/core-js/modules/_to-length.js");var n=r("./node_modules/core-js/modules/_array-species-create.js");e.exports=function(d,e){var h=1==d;var f=2==d;var p=3==d;var m=4==d;var g=6==d;var v=5==d||g;var _=e||n;return function(e,t,r){var n=j(e);var i=y(n);var o=b(t,r,3);var s=C(i.length);var a=0;var l=h?_(e,s):f?_(e,0):void 0;var c,u;for(;s>a;a++)if(v||a in i){c=i[a];u=o(c,a,n);if(d)if(h)l[a]=u;else if(u)switch(d){case 3:return true;case 5:return c;case 6:return a;case 2:l.push(c)}else if(m)return false}return g?-1:p||m?m:l}}},"./node_modules/core-js/modules/_array-reduce.js":function(e,t,r){var u=r("./node_modules/core-js/modules/_a-function.js");var d=r("./node_modules/core-js/modules/_to-object.js");var h=r("./node_modules/core-js/modules/_iobject.js");var f=r("./node_modules/core-js/modules/_to-length.js");e.exports=function(e,t,r,n,i){u(t);var o=d(e);var s=h(o);var a=f(o.length);var l=i?a-1:0;var c=i?-1:1;if(r<2)for(;;){if(l in s){n=s[l];l+=c;break}l+=c;if(i?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?l>=0:a>l;l+=c)l in s&&(n=t(n,s[l],l,o));return n}},"./node_modules/core-js/modules/_array-species-constructor.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_is-object.js");var i=r("./node_modules/core-js/modules/_is-array.js");var o=r("./node_modules/core-js/modules/_wks.js")("species");e.exports=function(e){var t;if(i(e)){t=e.constructor;"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0);if(n(t)){t=t[o];null===t&&(t=void 0)}}return void 0===t?Array:t}},"./node_modules/core-js/modules/_array-species-create.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_array-species-constructor.js");e.exports=function(e,t){return new(n(e))(t)}},"./node_modules/core-js/modules/_bind.js":function(e,t,r){"use strict";var o=r("./node_modules/core-js/modules/_a-function.js");var s=r("./node_modules/core-js/modules/_is-object.js");var a=r("./node_modules/core-js/modules/_invoke.js");var l=[].slice;var c={};var u=function(e,t,r){if(!(t in c)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";c[t]=Function("F,a","return new F("+n.join(",")+")")}return c[t](e,r)};e.exports=Function.bind||function e(t){var r=o(this);var n=l.call(arguments,1);var i=function(){var e=n.concat(l.call(arguments));return this instanceof i?u(r,e.length,e):a(r,e,t)};s(r.prototype)&&(i.prototype=r.prototype);return i}},"./node_modules/core-js/modules/_classof.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_cof.js");var o=r("./node_modules/core-js/modules/_wks.js")("toStringTag");var s="Arguments"==i(function(){return arguments}());var a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:s?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},"./node_modules/core-js/modules/_cof.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(e,t){var r=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},"./node_modules/core-js/modules/_create-property.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_object-dp.js");var i=r("./node_modules/core-js/modules/_property-desc.js");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},"./node_modules/core-js/modules/_ctx.js":function(e,t,r){var o=r("./node_modules/core-js/modules/_a-function.js");e.exports=function(n,i,e){o(n);if(void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/modules/_descriptors.js":function(e,t,r){e.exports=!r("./node_modules/core-js/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"./node_modules/core-js/modules/_dom-create.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_is-object.js");var i=r("./node_modules/core-js/modules/_global.js").document;var o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(e,t,r){var a=r("./node_modules/core-js/modules/_object-keys.js");var l=r("./node_modules/core-js/modules/_object-gops.js");var c=r("./node_modules/core-js/modules/_object-pie.js");e.exports=function(e){var t=a(e);var r=l.f;if(r){var n=r(e);var i=c.f;var o=0;var s;while(n.length>o)i.call(e,s=n[o++])&&t.push(s)}return t}},"./node_modules/core-js/modules/_export.js":function(e,t,r){var m=r("./node_modules/core-js/modules/_global.js");var g=r("./node_modules/core-js/modules/_core.js");var v=r("./node_modules/core-js/modules/_hide.js");var _=r("./node_modules/core-js/modules/_redefine.js");var b=r("./node_modules/core-js/modules/_ctx.js");var y="prototype";var j=function(e,t,r){var n=e&j.F;var i=e&j.G;var o=e&j.S;var s=e&j.P;var a=e&j.B;var l=i?m:o?m[t]||(m[t]={}):(m[t]||{})[y];var c=i?g:g[t]||(g[t]={});var u=c[y]||(c[y]={});var d,h,f,p;i&&(r=t);for(d in r){h=!n&&l&&void 0!==l[d];f=(h?l:r)[d];p=a&&h?b(f,m):s&&"function"==typeof f?b(Function.call,f):f;l&&_(l,d,f,e&j.U);c[d]!=f&&v(c,d,p);s&&u[d]!=f&&(u[d]=f)}};m.core=g;j.F=1;j.G=2;j.S=4;j.P=8;j.B=16;j.W=32;j.U=64;j.R=128;e.exports=j},"./node_modules/core-js/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(e,t,r){"use strict";var a=r("./node_modules/core-js/modules/_hide.js");var l=r("./node_modules/core-js/modules/_redefine.js");var c=r("./node_modules/core-js/modules/_fails.js");var u=r("./node_modules/core-js/modules/_defined.js");var d=r("./node_modules/core-js/modules/_wks.js");e.exports=function(t,e,r){var n=d(t);var i=r(u,n,""[t]);var o=i[0];var s=i[1];if(c(function(){var e={};e[n]=function(){return 7};return 7!=""[t](e)})){l(String.prototype,t,o);a(RegExp.prototype,n,2==e?function(e,t){return s.call(e,this,t)}:function(e){return s.call(e,this)})}}},"./node_modules/core-js/modules/_flags.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_an-object.js");e.exports=function(){var e=n(this);var t="";e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.unicode&&(t+="u");e.sticky&&(t+="y");return t}},"./node_modules/core-js/modules/_for-of.js":function(e,t,r){var h=r("./node_modules/core-js/modules/_ctx.js");var f=r("./node_modules/core-js/modules/_iter-call.js");var p=r("./node_modules/core-js/modules/_is-array-iter.js");var m=r("./node_modules/core-js/modules/_an-object.js");var g=r("./node_modules/core-js/modules/_to-length.js");var v=r("./node_modules/core-js/modules/core.get-iterator-method.js");var _={};var b={};var t=e.exports=function(e,t,r,n,i){var o=i?function(){return e}:v(e);var s=h(r,n,t?2:1);var a=0;var l,c,u,d;if("function"!=typeof o)throw TypeError(e+" is not iterable!");if(p(o))for(l=g(e.length);l>a;a++){d=t?s(m(c=e[a])[0],c[1]):s(e[a]);if(d===_||d===b)return d}else for(u=o.call(e);!(c=u.next()).done;){d=f(u,s,c.value,t);if(d===_||d===b)return d}};t.BREAK=_;t.RETURN=b},"./node_modules/core-js/modules/_global.js":function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"./node_modules/core-js/modules/_has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"./node_modules/core-js/modules/_hide.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_object-dp.js");var i=r("./node_modules/core-js/modules/_property-desc.js");e.exports=r("./node_modules/core-js/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},"./node_modules/core-js/modules/_html.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_global.js").document;e.exports=n&&n.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(e,t,r){e.exports=!r("./node_modules/core-js/modules/_descriptors.js")&&!r("./node_modules/core-js/modules/_fails.js")(function(){return 7!=Object.defineProperty(r("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/modules/_invoke.js":function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},"./node_modules/core-js/modules/_iobject.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"./node_modules/core-js/modules/_is-array-iter.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_iterators.js");var i=r("./node_modules/core-js/modules/_wks.js")("iterator");var o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},"./node_modules/core-js/modules/_is-array.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_cof.js");e.exports=Array.isArray||function e(t){return"Array"==n(t)}},"./node_modules/core-js/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/modules/_is-regexp.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_is-object.js");var i=r("./node_modules/core-js/modules/_cof.js");var o=r("./node_modules/core-js/modules/_wks.js")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"./node_modules/core-js/modules/_iter-call.js":function(e,t,r){var o=r("./node_modules/core-js/modules/_an-object.js");e.exports=function(t,e,r,n){try{return n?e(o(r)[0],r[1]):e(r)}catch(e){var i=t["return"];void 0!==i&&o(i.call(t));throw e}}},"./node_modules/core-js/modules/_iter-create.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_object-create.js");var i=r("./node_modules/core-js/modules/_property-desc.js");var o=r("./node_modules/core-js/modules/_set-to-string-tag.js");var s={};r("./node_modules/core-js/modules/_hide.js")(s,r("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this});e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)});o(e,t+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(e,t,r){"use strict";var b=r("./node_modules/core-js/modules/_library.js");var y=r("./node_modules/core-js/modules/_export.js");var j=r("./node_modules/core-js/modules/_redefine.js");var C=r("./node_modules/core-js/modules/_hide.js");var w=r("./node_modules/core-js/modules/_iterators.js");var x=r("./node_modules/core-js/modules/_iter-create.js");var E=r("./node_modules/core-js/modules/_set-to-string-tag.js");var A=r("./node_modules/core-js/modules/_object-gpo.js");var O=r("./node_modules/core-js/modules/_wks.js")("iterator");var S=!([].keys&&"next"in[].keys());var T="@@iterator";var I="keys";var k="values";var P=function(){return this};e.exports=function(e,t,r,n,i,o,s){x(r,t,n);var a=function(t){if(!S&&t in d)return d[t];switch(t){case I:return function e(){return new r(this,t)};case k:return function e(){return new r(this,t)}}return function e(){return new r(this,t)}};var l=t+" Iterator";var c=i==k;var u=false;var d=e.prototype;var h=d[O]||d[T]||i&&d[i];var f=h||a(i);var p=i?c?a("entries"):f:void 0;var m="Array"==t&&d.entries||h;var g,v,_;if(m){_=A(m.call(new e));if(_!==Object.prototype&&_.next){E(_,l,true);b||"function"==typeof _[O]||C(_,O,P)}}if(c&&h&&h.name!==k){u=true;f=function e(){return h.call(this)}}b&&!s||!S&&!u&&d[O]||C(d,O,f);w[t]=f;w[l]=P;if(i){g={values:c?f:a(k),keys:o?f:a(I),entries:p};if(s)for(v in g)v in d||j(d,v,g[v]);else y(y.P+y.F*(S||u),t,g)}return g}},"./node_modules/core-js/modules/_iter-detect.js":function(e,t,r){var o=r("./node_modules/core-js/modules/_wks.js")("iterator");var s=false;try{var n=[7][o]();n["return"]=function(){s=true};Array.from(n,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!s)return false;var r=false;try{var n=[7];var i=n[o]();i.next=function(){return{done:r=true}};n[o]=function(){return i};e(n)}catch(e){}return r}},"./node_modules/core-js/modules/_iter-step.js":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"./node_modules/core-js/modules/_iterators.js":function(e,t){e.exports={}},"./node_modules/core-js/modules/_library.js":function(e,t){e.exports=false},"./node_modules/core-js/modules/_meta.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_uid.js")("meta");var i=r("./node_modules/core-js/modules/_is-object.js");var o=r("./node_modules/core-js/modules/_has.js");var s=r("./node_modules/core-js/modules/_object-dp.js").f;var a=0;var l=Object.isExtensible||function(){return true};var c=!r("./node_modules/core-js/modules/_fails.js")(function(){return l(Object.preventExtensions({}))});var u=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})};var d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[n].i};var h=function(e,t){if(!o(e,n)){if(!l(e))return true;if(!t)return false;u(e)}return e[n].w};var f=function(e){c&&p.NEED&&l(e)&&!o(e,n)&&u(e);return e};var p=e.exports={KEY:n,NEED:false,fastKey:d,getWeak:h,onFreeze:f}},"./node_modules/core-js/modules/_microtask.js":function(e,t,r){var a=r("./node_modules/core-js/modules/_global.js");var l=r("./node_modules/core-js/modules/_task.js").set;var c=a.MutationObserver||a.WebKitMutationObserver;var u=a.process;var d=a.Promise;var h="process"==r("./node_modules/core-js/modules/_cof.js")(u);e.exports=function(){var r,n,i;var e=function(){var e,t;h&&(e=u.domain)&&e.exit();while(r){t=r.fn;r=r.next;try{t()}catch(e){r?i():n=void 0;throw e}}n=void 0;e&&e.enter()};if(h)i=function(){u.nextTick(e)};else if(!c||a.navigator&&a.navigator.standalone)if(d&&d.resolve){var t=d.resolve(void 0);i=function(){t.then(e)}}else i=function(){l.call(a,e)};else{var o=true;var s=document.createTextNode("");new c(e).observe(s,{characterData:true});i=function(){s.data=o=!o}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t);if(!r){r=t;i()}n=t}}},"./node_modules/core-js/modules/_new-promise-capability.js":function(e,t,r){"use strict";var i=r("./node_modules/core-js/modules/_a-function.js");function n(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e;n=t});this.resolve=i(r);this.reject=i(n)}e.exports.f=function(e){return new n(e)}},"./node_modules/core-js/modules/_object-assign.js":function(e,t,r){"use strict";var f=r("./node_modules/core-js/modules/_object-keys.js");var p=r("./node_modules/core-js/modules/_object-gops.js");var m=r("./node_modules/core-js/modules/_object-pie.js");var g=r("./node_modules/core-js/modules/_to-object.js");var v=r("./node_modules/core-js/modules/_iobject.js");var i=Object.assign;e.exports=!i||r("./node_modules/core-js/modules/_fails.js")(function(){var e={};var t={};var r=Symbol();var n="abcdefghijklmnopqrst";e[r]=7;n.split("").forEach(function(e){t[e]=e});return 7!=i({},e)[r]||Object.keys(i({},t)).join("")!=n})?function e(t,r){var n=g(t);var i=arguments.length;var o=1;var s=p.f;var a=m.f;while(i>o){var l=v(arguments[o++]);var c=s?f(l).concat(s(l)):f(l);var u=c.length;var d=0;var h;while(u>d)a.call(l,h=c[d++])&&(n[h]=l[h])}return n}:i},"./node_modules/core-js/modules/_object-create.js":function(e,t,o){var i=o("./node_modules/core-js/modules/_an-object.js");var s=o("./node_modules/core-js/modules/_object-dps.js");var a=o("./node_modules/core-js/modules/_enum-bug-keys.js");var l=o("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");var c=function(){};var u="prototype";var d=function(){var e=o("./node_modules/core-js/modules/_dom-create.js")("iframe");var t=a.length;var r="<";var n=">";var i;e.style.display="none";o("./node_modules/core-js/modules/_html.js").appendChild(e);e.src="javascript:";i=e.contentWindow.document;i.open();i.write(r+"script"+n+"document.F=Object"+r+"/script"+n);i.close();d=i.F;while(t--)delete d[u][a[t]];return d()};e.exports=Object.create||function e(t,r){var n;if(null!==t){c[u]=i(t);n=new c;c[u]=null;n[l]=t}else n=d();return void 0===r?n:s(n,r)}},"./node_modules/core-js/modules/_object-dp.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_an-object.js");var o=r("./node_modules/core-js/modules/_ie8-dom-define.js");var s=r("./node_modules/core-js/modules/_to-primitive.js");var a=Object.defineProperty;t.f=r("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function e(t,r,n){i(t);r=s(r,true);i(n);if(o)try{return a(t,r,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(t[r]=n.value);return t}},"./node_modules/core-js/modules/_object-dps.js":function(e,t,r){var a=r("./node_modules/core-js/modules/_object-dp.js");var l=r("./node_modules/core-js/modules/_an-object.js");var c=r("./node_modules/core-js/modules/_object-keys.js");e.exports=r("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function e(t,r){l(t);var n=c(r);var i=n.length;var o=0;var s;while(i>o)a.f(t,s=n[o++],r[s]);return t}},"./node_modules/core-js/modules/_object-gopd.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_object-pie.js");var i=r("./node_modules/core-js/modules/_property-desc.js");var o=r("./node_modules/core-js/modules/_to-iobject.js");var s=r("./node_modules/core-js/modules/_to-primitive.js");var a=r("./node_modules/core-js/modules/_has.js");var l=r("./node_modules/core-js/modules/_ie8-dom-define.js");var c=Object.getOwnPropertyDescriptor;t.f=r("./node_modules/core-js/modules/_descriptors.js")?c:function e(t,r){t=o(t);r=s(r,true);if(l)try{return c(t,r)}catch(e){}if(a(t,r))return i(!n.f.call(t,r),t[r])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_to-iobject.js");var i=r("./node_modules/core-js/modules/_object-gopn.js").f;var o={}.toString;var s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(e){try{return i(e)}catch(e){return s.slice()}};e.exports.f=function e(t){return s&&"[object Window]"==o.call(t)?a(t):i(n(t))}},"./node_modules/core-js/modules/_object-gopn.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_object-keys-internal.js");var i=r("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,i)}},"./node_modules/core-js/modules/_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_has.js");var i=r("./node_modules/core-js/modules/_to-object.js");var o=r("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");var s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(n(e,o))return e[o];if("function"==typeof e.constructor&&e instanceof e.constructor)return e.constructor.prototype;return e instanceof Object?s:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(e,t,r){var s=r("./node_modules/core-js/modules/_has.js");var a=r("./node_modules/core-js/modules/_to-iobject.js");var l=r("./node_modules/core-js/modules/_array-includes.js")(false);var c=r("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var r=a(e);var n=0;var i=[];var o;for(o in r)o!=c&&s(r,o)&&i.push(o);while(t.length>n)s(r,o=t[n++])&&(~l(i,o)||i.push(o));return i}},"./node_modules/core-js/modules/_object-keys.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_object-keys-internal.js");var i=r("./node_modules/core-js/modules/_enum-bug-keys.js");e.exports=Object.keys||function e(t){return n(t,i)}},"./node_modules/core-js/modules/_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_object-sap.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_export.js");var o=r("./node_modules/core-js/modules/_core.js");var s=r("./node_modules/core-js/modules/_fails.js");e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e];var n={};n[e]=t(r);i(i.S+i.F*s(function(){r(1)}),"Object",n)}},"./node_modules/core-js/modules/_object-to-array.js":function(e,t,r){var l=r("./node_modules/core-js/modules/_object-keys.js");var c=r("./node_modules/core-js/modules/_to-iobject.js");var u=r("./node_modules/core-js/modules/_object-pie.js").f;e.exports=function(a){return function(e){var t=c(e);var r=l(t);var n=r.length;var i=0;var o=[];var s;while(n>i)u.call(t,s=r[i++])&&o.push(a?[s,t[s]]:t[s]);return o}}},"./node_modules/core-js/modules/_perform.js":function(e,t){e.exports=function(e){try{return{e:false,v:e()}}catch(e){return{e:true,v:e}}}},"./node_modules/core-js/modules/_promise-resolve.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_an-object.js");var o=r("./node_modules/core-js/modules/_is-object.js");var s=r("./node_modules/core-js/modules/_new-promise-capability.js");e.exports=function(e,t){i(e);if(o(t)&&t.constructor===e)return t;var r=s.f(e);var n=r.resolve;n(t);return r.promise}},"./node_modules/core-js/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/modules/_redefine-all.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_redefine.js");e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},"./node_modules/core-js/modules/_redefine.js":function(e,t,r){var o=r("./node_modules/core-js/modules/_global.js");var s=r("./node_modules/core-js/modules/_hide.js");var a=r("./node_modules/core-js/modules/_has.js");var l=r("./node_modules/core-js/modules/_uid.js")("src");var n="toString";var i=Function[n];var c=(""+i).split(n);r("./node_modules/core-js/modules/_core.js").inspectSource=function(e){return i.call(e)};(e.exports=function(e,t,r,n){var i="function"==typeof r;i&&(a(r,"name")||s(r,"name",t));if(e[t]===r)return;i&&(a(r,l)||s(r,l,e[t]?""+e[t]:c.join(String(t))));if(e===o)e[t]=r;else if(n)e[t]?e[t]=r:s(e,t,r);else{delete e[t];s(e,t,r)}})(Function.prototype,n,function e(){return"function"==typeof this&&this[l]||i.call(this)})},"./node_modules/core-js/modules/_set-proto.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_is-object.js");var i=r("./node_modules/core-js/modules/_an-object.js");var o=function(e,t){i(e);if(!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,i){try{i=r("./node_modules/core-js/modules/_ctx.js")(Function.call,r("./node_modules/core-js/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2);i(e,[]);n=!(e instanceof Array)}catch(e){n=true}return function e(t,r){o(t,r);n?t.__proto__=r:i(t,r);return t}}({},false):void 0),check:o}},"./node_modules/core-js/modules/_set-species.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_global.js");var i=r("./node_modules/core-js/modules/_object-dp.js");var o=r("./node_modules/core-js/modules/_descriptors.js");var s=r("./node_modules/core-js/modules/_wks.js")("species");e.exports=function(e){var t=n[e];o&&t&&!t[s]&&i.f(t,s,{configurable:true,get:function(){return this}})}},"./node_modules/core-js/modules/_set-to-string-tag.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_object-dp.js").f;var i=r("./node_modules/core-js/modules/_has.js");var o=r("./node_modules/core-js/modules/_wks.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:true,value:t})}},"./node_modules/core-js/modules/_shared-key.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_shared.js")("keys");var i=r("./node_modules/core-js/modules/_uid.js");e.exports=function(e){return n[e]||(n[e]=i(e))}},"./node_modules/core-js/modules/_shared.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_core.js");var i=r("./node_modules/core-js/modules/_global.js");var o="__core-js_shared__";var s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_an-object.js");var o=r("./node_modules/core-js/modules/_a-function.js");var s=r("./node_modules/core-js/modules/_wks.js")("species");e.exports=function(e,t){var r=i(e).constructor;var n;return void 0===r||void 0==(n=i(r)[s])?t:o(n)}},"./node_modules/core-js/modules/_strict-method.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_fails.js");e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},"./node_modules/core-js/modules/_string-at.js":function(e,t,r){var l=r("./node_modules/core-js/modules/_to-integer.js");var c=r("./node_modules/core-js/modules/_defined.js");e.exports=function(a){return function(e,t){var r=String(c(e));var n=l(t);var i=r.length;var o,s;if(n<0||n>=i)return a?"":void 0;o=r.charCodeAt(n);return o<55296||o>56319||n+1===i||(s=r.charCodeAt(n+1))<56320||s>57343?a?r.charAt(n):o:a?r.slice(n,n+2):s-56320+(o-55296<<10)+65536}}},"./node_modules/core-js/modules/_task.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_ctx.js");var i=r("./node_modules/core-js/modules/_invoke.js");var o=r("./node_modules/core-js/modules/_html.js");var s=r("./node_modules/core-js/modules/_dom-create.js");var a=r("./node_modules/core-js/modules/_global.js");var l=a.process;var c=a.setImmediate;var u=a.clearImmediate;var d=a.MessageChannel;var h=a.Dispatch;var f=0;var p={};var m="onreadystatechange";var g,v,_;var b=function(){var e=+this;if(p.hasOwnProperty(e)){var t=p[e];delete p[e];t()}};var y=function(e){b.call(e.data)};if(!c||!u){c=function e(t){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);p[++f]=function(){i("function"==typeof t?t:Function(t),r)};g(f);return f};u=function e(t){delete p[t]};if("process"==r("./node_modules/core-js/modules/_cof.js")(l))g=function(e){l.nextTick(n(b,e,1))};else if(h&&h.now)g=function(e){h.now(n(b,e,1))};else if(d){v=new d;_=v.port2;v.port1.onmessage=y;g=n(_.postMessage,_,1)}else if(a.addEventListener&&"function"==typeof postMessage&&!a.importScripts){g=function(e){a.postMessage(e+"","*")};a.addEventListener("message",y,false)}else g=m in s("script")?function(e){o.appendChild(s("script"))[m]=function(){o.removeChild(this);b.call(e)}}:function(e){setTimeout(n(b,e,1),0)}}e.exports={set:c,clear:u}},"./node_modules/core-js/modules/_to-absolute-index.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_to-integer.js");var i=Math.max;var o=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):o(e,t)}},"./node_modules/core-js/modules/_to-index.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_to-integer.js");var i=r("./node_modules/core-js/modules/_to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=n(e);var r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},"./node_modules/core-js/modules/_to-integer.js":function(e,t){var r=Math.ceil;var n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"./node_modules/core-js/modules/_to-iobject.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_iobject.js");var i=r("./node_modules/core-js/modules/_defined.js");e.exports=function(e){return n(i(e))}},"./node_modules/core-js/modules/_to-length.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_to-integer.js");var i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_defined.js");e.exports=function(e){return Object(n(e))}},"./node_modules/core-js/modules/_to-primitive.js":function(e,t,r){var i=r("./node_modules/core-js/modules/_is-object.js");e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_typed-buffer.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_global.js");var i=r("./node_modules/core-js/modules/_descriptors.js");var o=r("./node_modules/core-js/modules/_library.js");var s=r("./node_modules/core-js/modules/_typed.js");var a=r("./node_modules/core-js/modules/_hide.js");var l=r("./node_modules/core-js/modules/_redefine-all.js");var c=r("./node_modules/core-js/modules/_fails.js");var u=r("./node_modules/core-js/modules/_an-instance.js");var d=r("./node_modules/core-js/modules/_to-integer.js");var h=r("./node_modules/core-js/modules/_to-length.js");var f=r("./node_modules/core-js/modules/_to-index.js");var p=r("./node_modules/core-js/modules/_object-gopn.js").f;var m=r("./node_modules/core-js/modules/_object-dp.js").f;var g=r("./node_modules/core-js/modules/_array-fill.js");var v=r("./node_modules/core-js/modules/_set-to-string-tag.js");var _="ArrayBuffer";var b="DataView";var y="prototype";var j="Wrong length!";var C="Wrong index!";var w=n[_];var x=n[b];var E=n.Math;var A=n.RangeError;var O=n.Infinity;var S=w;var T=E.abs;var I=E.pow;var k=E.floor;var P=E.log;var R=E.LN2;var F="buffer";var D="byteLength";var L="byteOffset";var M=i?"_b":F;var B=i?"_l":D;var N=i?"_o":L;function U(e,t,r){var n=new Array(r);var i=8*r-t-1;var o=(1<<i)-1;var s=o>>1;var a=23===t?I(2,-24)-I(2,-77):0;var l=0;var c=e<0||0===e&&1/e<0?1:0;var u,d,h;e=T(e);if(e!=e||e===O){d=e!=e?1:0;u=o}else{u=k(P(e)/R);if(e*(h=I(2,-u))<1){u--;h*=2}e+=u+s>=1?a/h:a*I(2,1-s);if(e*h>=2){u++;h/=2}if(u+s>=o){d=0;u=o}else if(u+s>=1){d=(e*h-1)*I(2,t);u+=s}else{d=e*I(2,s-1)*I(2,t);u=0}}for(;t>=8;n[l++]=255&d,d/=256,t-=8);u=u<<t|d;i+=t;for(;i>0;n[l++]=255&u,u/=256,i-=8);n[--l]|=128*c;return n}function X(e,t,r){var n=8*r-t-1;var i=(1<<n)-1;var o=i>>1;var s=n-7;var a=r-1;var l=e[a--];var c=127&l;var u;l>>=7;for(;s>0;c=256*c+e[a],a--,s-=8);u=c&(1<<-s)-1;c>>=-s;s+=t;for(;s>0;u=256*u+e[a],a--,s-=8);if(0===c)c=1-o;else{if(c===i)return u?NaN:l?-O:O;u+=I(2,t);c-=o}return(l?-1:1)*u*I(2,c-t)}function G(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function H(e){return[255&e]}function z(e){return[255&e,e>>8&255]}function Y(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function W(e){return U(e,52,8)}function V(e){return U(e,23,4)}function q(e,t,r){m(e[y],t,{get:function(){return this[r]}})}function Z(e,t,r,n){var i=+r;var o=f(i);if(o+t>e[B])throw A(C);var s=e[M]._b;var a=o+e[N];var l=s.slice(a,a+t);return n?l:l.reverse()}function K(e,t,r,n,i,o){var s=+r;var a=f(s);if(a+t>e[B])throw A(C);var l=e[M]._b;var c=a+e[N];var u=n(+i);for(var d=0;d<t;d++)l[c+d]=u[o?d:t-d-1]}if(s.ABV){if(!c(function(){w(1)})||!c(function(){new w(-1)})||c(function(){new w;new w(1.5);new w(NaN);return w.name!=_})){w=function e(t){u(this,w);return new S(f(t))};var $=w[y]=S[y];for(var J=p(S),Q=0,ee;J.length>Q;)(ee=J[Q++])in w||a(w,ee,S[ee]);o||($.constructor=w)}var te=new x(new w(2));var re=x[y].setInt8;te.setInt8(0,2147483648);te.setInt8(1,2147483649);!te.getInt8(0)&&te.getInt8(1)||l(x[y],{setInt8:function e(t,r){re.call(this,t,r<<24>>24)},setUint8:function e(t,r){re.call(this,t,r<<24>>24)}},true)}else{w=function e(t){u(this,w,_);var r=f(t);this._b=g.call(new Array(r),0);this[B]=r};x=function e(t,r,n){u(this,x,b);u(t,w,b);var i=t[B];var o=d(r);if(o<0||o>i)throw A("Wrong offset!");n=void 0===n?i-o:h(n);if(o+n>i)throw A(j);this[M]=t;this[N]=o;this[B]=n};if(i){q(w,D,"_l");q(x,F,"_b");q(x,D,"_l");q(x,L,"_o")}l(x[y],{getInt8:function e(t){return Z(this,1,t)[0]<<24>>24},getUint8:function e(t){return Z(this,1,t)[0]},getInt16:function e(t){var r=Z(this,2,t,arguments[1]);return(r[1]<<8|r[0])<<16>>16},getUint16:function e(t){var r=Z(this,2,t,arguments[1]);return r[1]<<8|r[0]},getInt32:function e(t){return G(Z(this,4,t,arguments[1]))},getUint32:function e(t){return G(Z(this,4,t,arguments[1]))>>>0},getFloat32:function e(t){return X(Z(this,4,t,arguments[1]),23,4)},getFloat64:function e(t){return X(Z(this,8,t,arguments[1]),52,8)},setInt8:function e(t,r){K(this,1,t,H,r)},setUint8:function e(t,r){K(this,1,t,H,r)},setInt16:function e(t,r){K(this,2,t,z,r,arguments[2])},setUint16:function e(t,r){K(this,2,t,z,r,arguments[2])},setInt32:function e(t,r){K(this,4,t,Y,r,arguments[2])},setUint32:function e(t,r){K(this,4,t,Y,r,arguments[2])},setFloat32:function e(t,r){K(this,4,t,V,r,arguments[2])},setFloat64:function e(t,r){K(this,8,t,W,r,arguments[2])}})}v(w,_);v(x,b);a(x[y],s.VIEW,true);t[_]=w;t[b]=x},"./node_modules/core-js/modules/_typed.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_global.js");var i=r("./node_modules/core-js/modules/_hide.js");var o=r("./node_modules/core-js/modules/_uid.js");var s=o("typed_array");var a=o("view");var l=!!(n.ArrayBuffer&&n.DataView);var c=l;var u=0;var d=9;var h;var f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(u<d)if(h=n[f[u++]]){i(h.prototype,s,true);i(h.prototype,a,true)}else c=false;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:a}},"./node_modules/core-js/modules/_uid.js":function(e,t){var r=0;var n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},"./node_modules/core-js/modules/_user-agent.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_global.js");var i=n.navigator;e.exports=i&&i.userAgent||""},"./node_modules/core-js/modules/_wks-define.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_global.js");var i=r("./node_modules/core-js/modules/_core.js");var o=r("./node_modules/core-js/modules/_library.js");var s=r("./node_modules/core-js/modules/_wks-ext.js");var a=r("./node_modules/core-js/modules/_object-dp.js").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(e,t,r){t.f=r("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_shared.js")("wks");var i=r("./node_modules/core-js/modules/_uid.js");var o=r("./node_modules/core-js/modules/_global.js").Symbol;var s="function"==typeof o;var a=e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))};a.store=n},"./node_modules/core-js/modules/core.get-iterator-method.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_classof.js");var i=r("./node_modules/core-js/modules/_wks.js")("iterator");var o=r("./node_modules/core-js/modules/_iterators.js");e.exports=r("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},"./node_modules/core-js/modules/es6.array.filter.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_array-methods.js")(2);n(n.P+n.F*!r("./node_modules/core-js/modules/_strict-method.js")([].filter,true),"Array",{filter:function e(t){return i(this,t,arguments[1])}})},"./node_modules/core-js/modules/es6.array.for-each.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_array-methods.js")(0);var o=r("./node_modules/core-js/modules/_strict-method.js")([].forEach,true);n(n.P+n.F*!o,"Array",{forEach:function e(t){return i(this,t,arguments[1])}})},"./node_modules/core-js/modules/es6.array.from.js":function(e,t,r){"use strict";var f=r("./node_modules/core-js/modules/_ctx.js");var n=r("./node_modules/core-js/modules/_export.js");var p=r("./node_modules/core-js/modules/_to-object.js");var m=r("./node_modules/core-js/modules/_iter-call.js");var g=r("./node_modules/core-js/modules/_is-array-iter.js");var v=r("./node_modules/core-js/modules/_to-length.js");var _=r("./node_modules/core-js/modules/_create-property.js");var b=r("./node_modules/core-js/modules/core.get-iterator-method.js");n(n.S+n.F*!r("./node_modules/core-js/modules/_iter-detect.js")(function(e){Array.from(e)}),"Array",{from:function e(t){var r=p(t);var n="function"==typeof this?this:Array;var i=arguments.length;var o=i>1?arguments[1]:void 0;var s=void 0!==o;var a=0;var l=b(r);var c,u,d,h;s&&(o=f(o,i>2?arguments[2]:void 0,2));if(void 0==l||n==Array&&g(l)){c=v(r.length);for(u=new n(c);c>a;a++)_(u,a,s?o(r[a],a):r[a])}else for(h=l.call(r),u=new n;!(d=h.next()).done;a++)_(u,a,s?m(h,o,[d.value,a],true):d.value);u.length=a;return u}})},"./node_modules/core-js/modules/es6.array.index-of.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_array-includes.js")(false);var o=[].indexOf;var s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!r("./node_modules/core-js/modules/_strict-method.js")(o)),"Array",{indexOf:function e(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},"./node_modules/core-js/modules/es6.array.is-array.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S,"Array",{isArray:r("./node_modules/core-js/modules/_is-array.js")})},"./node_modules/core-js/modules/es6.array.iterator.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_add-to-unscopables.js");var i=r("./node_modules/core-js/modules/_iter-step.js");var o=r("./node_modules/core-js/modules/_iterators.js");var s=r("./node_modules/core-js/modules/_to-iobject.js");e.exports=r("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(e,t){this._t=s(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var r=this._i++;if(!e||r>=e.length){this._t=void 0;return i(1)}if("keys"==t)return i(0,r);if("values"==t)return i(0,e[r]);return i(0,[r,e[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},"./node_modules/core-js/modules/es6.array.map.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_array-methods.js")(1);n(n.P+n.F*!r("./node_modules/core-js/modules/_strict-method.js")([].map,true),"Array",{map:function e(t){return i(this,t,arguments[1])}})},"./node_modules/core-js/modules/es6.array.reduce.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_array-reduce.js");n(n.P+n.F*!r("./node_modules/core-js/modules/_strict-method.js")([].reduce,true),"Array",{reduce:function e(t){return i(this,t,arguments.length,arguments[1],false)}})},"./node_modules/core-js/modules/es6.date.now.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"./node_modules/core-js/modules/es6.date.to-string.js":function(e,t,r){var n=Date.prototype;var i="Invalid Date";var o="toString";var s=n[o];var a=n.getTime;new Date(NaN)+""!=i&&r("./node_modules/core-js/modules/_redefine.js")(n,o,function e(){var t=a.call(this);return t===t?s.call(this):i})},"./node_modules/core-js/modules/es6.function.bind.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.P,"Function",{bind:r("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.object.assign.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S+n.F,"Object",{assign:r("./node_modules/core-js/modules/_object-assign.js")})},"./node_modules/core-js/modules/es6.object.create.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S,"Object",{create:r("./node_modules/core-js/modules/_object-create.js")})},"./node_modules/core-js/modules/es6.object.define-property.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S+n.F*!r("./node_modules/core-js/modules/_descriptors.js"),"Object",{defineProperty:r("./node_modules/core-js/modules/_object-dp.js").f})},"./node_modules/core-js/modules/es6.object.keys.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_to-object.js");var i=r("./node_modules/core-js/modules/_object-keys.js");r("./node_modules/core-js/modules/_object-sap.js")("keys",function(){return function e(t){return i(n(t))}})},"./node_modules/core-js/modules/es6.object.set-prototype-of.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.S,"Object",{setPrototypeOf:r("./node_modules/core-js/modules/_set-proto.js").set})},"./node_modules/core-js/modules/es6.promise.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_library.js");var s=r("./node_modules/core-js/modules/_global.js");var i=r("./node_modules/core-js/modules/_ctx.js");var o=r("./node_modules/core-js/modules/_classof.js");var a=r("./node_modules/core-js/modules/_export.js");var l=r("./node_modules/core-js/modules/_is-object.js");var c=r("./node_modules/core-js/modules/_a-function.js");var u=r("./node_modules/core-js/modules/_an-instance.js");var d=r("./node_modules/core-js/modules/_for-of.js");var h=r("./node_modules/core-js/modules/_species-constructor.js");var f=r("./node_modules/core-js/modules/_task.js").set;var p=r("./node_modules/core-js/modules/_microtask.js")();var m=r("./node_modules/core-js/modules/_new-promise-capability.js");var g=r("./node_modules/core-js/modules/_perform.js");var v=r("./node_modules/core-js/modules/_user-agent.js");var _=r("./node_modules/core-js/modules/_promise-resolve.js");var b="Promise";var y=s.TypeError;var j=s.process;var C=j&&j.versions;var w=C&&C.v8||"";var x=s[b];var E="process"==o(j);var A=function(){};var O,S,T,I;var k=S=m.f;var P=!!function(){try{var e=x.resolve(1);var t=(e.constructor={})[r("./node_modules/core-js/modules/_wks.js")("species")]=function(e){e(A,A)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==w.indexOf("6.6")&&-1===v.indexOf("Chrome/66")}catch(e){}}();var R=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t};var F=function(u,r){if(u._n)return;u._n=true;var n=u._c;p(function(){var l=u._v;var c=1==u._s;var e=0;var t=function(e){var t=c?e.ok:e.fail;var r=e.resolve;var n=e.reject;var i=e.domain;var o,s,a;try{if(t){if(!c){2==u._h&&M(u);u._h=1}if(true===t)o=l;else{i&&i.enter();o=t(l);if(i){i.exit();a=true}}o===e.promise?n(y("Promise-chain cycle")):(s=R(o))?s.call(o,r,n):r(o)}else n(l)}catch(e){i&&!a&&i.exit();n(e)}};while(n.length>e)t(n[e++]);u._c=[];u._n=false;r&&!u._h&&D(u)})};var D=function(o){f.call(s,function(){var e=o._v;var t=L(o);var r,n,i;if(t){r=g(function(){E?j.emit("unhandledRejection",e,o):(n=s.onunhandledrejection)?n({promise:o,reason:e}):(i=s.console)&&i.error&&i.error("Unhandled promise rejection",e)});o._h=E||L(o)?2:1}o._a=void 0;if(t&&r.e)throw r.v})};var L=function(e){return 1!==e._h&&0===(e._a||e._c).length};var M=function(t){f.call(s,function(){var e;E?j.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})};var B=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;t._a||(t._a=t._c.slice());F(t,true)};var N=function(e){var r=this;var n;if(r._d)return;r._d=true;r=r._w||r;try{if(r===e)throw y("Promise can't be resolved itself");if(n=R(e))p(function(){var t={_w:r,_d:false};try{n.call(e,i(N,t,1),i(B,t,1))}catch(e){B.call(t,e)}});else{r._v=e;r._s=1;F(r,false)}}catch(e){B.call({_w:r,_d:false},e)}};if(!P){x=function e(t){u(this,x,b,"_h");c(t);O.call(this);try{t(i(N,this,1),i(B,this,1))}catch(e){B.call(this,e)}};O=function e(t){this._c=[];this._a=void 0;this._s=0;this._d=false;this._v=void 0;this._h=0;this._n=false};O.prototype=r("./node_modules/core-js/modules/_redefine-all.js")(x.prototype,{then:function e(t,r){var n=k(h(this,x));n.ok="function"!=typeof t||t;n.fail="function"==typeof r&&r;n.domain=E?j.domain:void 0;this._c.push(n);this._a&&this._a.push(n);this._s&&F(this,false);return n.promise},catch:function(e){return this.then(void 0,e)}});T=function(){var e=new O;this.promise=e;this.resolve=i(N,e,1);this.reject=i(B,e,1)};m.f=k=function(e){return e===x||e===I?new T(e):S(e)}}a(a.G+a.W+a.F*!P,{Promise:x});r("./node_modules/core-js/modules/_set-to-string-tag.js")(x,b);r("./node_modules/core-js/modules/_set-species.js")(b);I=r("./node_modules/core-js/modules/_core.js")[b];a(a.S+a.F*!P,b,{reject:function e(t){var r=k(this);var n=r.reject;n(t);return r.promise}});a(a.S+a.F*(n||!P),b,{resolve:function e(t){return _(n&&this===I?x:this,t)}});a(a.S+a.F*!(P&&r("./node_modules/core-js/modules/_iter-detect.js")(function(e){x.all(e)["catch"](A)})),b,{all:function e(t){var s=this;var r=k(s);var a=r.resolve;var l=r.reject;var n=g(function(){var n=[];var i=0;var o=1;d(t,false,function(e){var t=i++;var r=false;n.push(void 0);o++;s.resolve(e).then(function(e){if(r)return;r=true;n[t]=e;--o||a(n)},l)});--o||a(n)});n.e&&l(n.v);return r.promise},race:function e(t){var r=this;var n=k(r);var i=n.reject;var o=g(function(){d(t,false,function(e){r.resolve(e).then(n.resolve,i)})});o.e&&i(o.v);return n.promise}})},"./node_modules/core-js/modules/es6.regexp.flags.js":function(e,t,r){r("./node_modules/core-js/modules/_descriptors.js")&&"g"!=/./g.flags&&r("./node_modules/core-js/modules/_object-dp.js").f(RegExp.prototype,"flags",{configurable:true,get:r("./node_modules/core-js/modules/_flags.js")})},"./node_modules/core-js/modules/es6.regexp.split.js":function(e,t,r){r("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(o,s,a){"use strict";var f=r("./node_modules/core-js/modules/_is-regexp.js");var p=a;var m=[].push;var e="split";var g="length";var v="lastIndex";if("c"=="abbc"[e](/(b)*/)[1]||4!="test"[e](/(?:)/,-1)[g]||2!="ab"[e](/(?:ab)*/)[g]||4!="."[e](/(.?)(.?)/)[g]||"."[e](/()()/)[g]>1||""[e](/.?/)[g]){var _=void 0===/()??/.exec("")[1];a=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!f(e))return p.call(r,e,t);var n=[];var i=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"");var o=0;var s=void 0===t?4294967295:t>>>0;var a=new RegExp(e.source,i+"g");var l,c,u,d,h;_||(l=new RegExp("^"+a.source+"$(?!\\s)",i));while(c=a.exec(r)){u=c.index+c[0][g];if(u>o){n.push(r.slice(o,c.index));!_&&c[g]>1&&c[0].replace(l,function(){for(h=1;h<arguments[g]-2;h++)void 0===arguments[h]&&(c[h]=void 0)});c[g]>1&&c.index<r[g]&&m.apply(n,c.slice(1));d=c[0][g];o=u;if(n[g]>=s)break}a[v]===c.index&&a[v]++}o===r[g]?!d&&a.test("")||n.push(""):n.push(r.slice(o));return n[g]>s?n.slice(0,s):n}}else"0"[e](void 0,0)[g]&&(a=function(e,t){return void 0===e&&0===t?[]:p.call(this,e,t)});return[function e(t,r){var n=o(this);var i=void 0==t?void 0:t[s];return void 0!==i?i.call(t,n,r):a.call(String(n),t,r)},a]})},"./node_modules/core-js/modules/es6.regexp.to-string.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es6.regexp.flags.js");var n=r("./node_modules/core-js/modules/_an-object.js");var i=r("./node_modules/core-js/modules/_flags.js");var o=r("./node_modules/core-js/modules/_descriptors.js");var s="toString";var a=/./[s];var l=function(e){r("./node_modules/core-js/modules/_redefine.js")(RegExp.prototype,s,e,true)};r("./node_modules/core-js/modules/_fails.js")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function e(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):a.name!=s&&l(function e(){return a.call(this)})},"./node_modules/core-js/modules/es6.string.iterator.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_string-at.js")(true);r("./node_modules/core-js/modules/_iter-define.js")(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var t=this._i;var r;if(t>=e.length)return{value:void 0,done:true};r=n(e,t);this._i+=r.length;return{value:r,done:false}})},"./node_modules/core-js/modules/es6.symbol.js":function(e,t,r){"use strict";var n=r("./node_modules/core-js/modules/_global.js");var a=r("./node_modules/core-js/modules/_has.js");var i=r("./node_modules/core-js/modules/_descriptors.js");var o=r("./node_modules/core-js/modules/_export.js");var s=r("./node_modules/core-js/modules/_redefine.js");var l=r("./node_modules/core-js/modules/_meta.js").KEY;var c=r("./node_modules/core-js/modules/_fails.js");var u=r("./node_modules/core-js/modules/_shared.js");var d=r("./node_modules/core-js/modules/_set-to-string-tag.js");var h=r("./node_modules/core-js/modules/_uid.js");var f=r("./node_modules/core-js/modules/_wks.js");var p=r("./node_modules/core-js/modules/_wks-ext.js");var m=r("./node_modules/core-js/modules/_wks-define.js");var g=r("./node_modules/core-js/modules/_enum-keys.js");var v=r("./node_modules/core-js/modules/_is-array.js");var _=r("./node_modules/core-js/modules/_an-object.js");var b=r("./node_modules/core-js/modules/_is-object.js");var y=r("./node_modules/core-js/modules/_to-iobject.js");var j=r("./node_modules/core-js/modules/_to-primitive.js");var C=r("./node_modules/core-js/modules/_property-desc.js");var w=r("./node_modules/core-js/modules/_object-create.js");var x=r("./node_modules/core-js/modules/_object-gopn-ext.js");var E=r("./node_modules/core-js/modules/_object-gopd.js");var A=r("./node_modules/core-js/modules/_object-dp.js");var O=r("./node_modules/core-js/modules/_object-keys.js");var S=E.f;var T=A.f;var I=x.f;var k=n.Symbol;var P=n.JSON;var R=P&&P.stringify;var F="prototype";var D=f("_hidden");var L=f("toPrimitive");var M={}.propertyIsEnumerable;var B=u("symbol-registry");var N=u("symbols");var U=u("op-symbols");var X=Object[F];var G="function"==typeof k;var H=n.QObject;var z=!H||!H[F]||!H[F].findChild;var Y=i&&c(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=S(X,t);n&&delete X[t];T(e,t,r);n&&e!==X&&T(X,t,n)}:T;var W=function(e){var t=N[e]=w(k[F]);t._k=e;return t};var V=G&&"symbol"==typeof k.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof k};var q=function e(t,r,n){t===X&&q(U,r,n);_(t);r=j(r,true);_(n);if(a(N,r)){if(n.enumerable){a(t,D)&&t[D][r]&&(t[D][r]=false);n=w(n,{enumerable:C(0,false)})}else{a(t,D)||T(t,D,C(1,{}));t[D][r]=true}return Y(t,r,n)}return T(t,r,n)};var Z=function e(t,r){_(t);var n=g(r=y(r));var i=0;var o=n.length;var s;while(o>i)q(t,s=n[i++],r[s]);return t};var K=function e(t,r){return void 0===r?w(t):Z(w(t),r)};var $=function e(t){var r=M.call(this,t=j(t,true));if(this===X&&a(N,t)&&!a(U,t))return false;return!(r||!a(this,t)||!a(N,t)||a(this,D)&&this[D][t])||r};var J=function e(t,r){t=y(t);r=j(r,true);if(t===X&&a(N,r)&&!a(U,r))return;var n=S(t,r);!n||!a(N,r)||a(t,D)&&t[D][r]||(n.enumerable=true);return n};var Q=function e(t){var r=I(y(t));var n=[];var i=0;var o;while(r.length>i)a(N,o=r[i++])||o==D||o==l||n.push(o);return n};var ee=function e(t){var r=t===X;var n=I(r?U:y(t));var i=[];var o=0;var s;while(n.length>o)!a(N,s=n[o++])||r&&!a(X,s)||i.push(N[s]);return i};if(!G){k=function e(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0);var r=function(e){this===X&&r.call(U,e);a(this,D)&&a(this[D],t)&&(this[D][t]=false);Y(this,t,C(1,e))};i&&z&&Y(X,t,{configurable:true,set:r});return W(t)};s(k[F],"toString",function e(){return this._k});E.f=J;A.f=q;r("./node_modules/core-js/modules/_object-gopn.js").f=x.f=Q;r("./node_modules/core-js/modules/_object-pie.js").f=$;r("./node_modules/core-js/modules/_object-gops.js").f=ee;i&&!r("./node_modules/core-js/modules/_library.js")&&s(X,"propertyIsEnumerable",$,true);p.f=function(e){return W(f(e))}}o(o.G+o.W+o.F*!G,{Symbol:k});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)f(te[re++]);for(var ne=O(f.store),ie=0;ne.length>ie;)m(ne[ie++]);o(o.S+o.F*!G,"Symbol",{for:function(e){return a(B,e+="")?B[e]:B[e]=k(e)},keyFor:function e(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var r in B)if(B[r]===t)return r},useSetter:function(){z=true},useSimple:function(){z=false}});o(o.S+o.F*!G,"Object",{create:K,defineProperty:q,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});P&&o(o.S+o.F*(!G||c(function(){var e=k();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function e(t){var r=[t];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!b(i)&&void 0===t||V(t))return;v(i)||(i=function(e,t){"function"==typeof o&&(t=o.call(this,e,t));if(!V(t))return t});r[1]=i;return R.apply(P,r)}});k[F][L]||r("./node_modules/core-js/modules/_hide.js")(k[F],L,k[F].valueOf);d(k,"Symbol");d(Math,"Math",true);d(n.JSON,"JSON",true)},"./node_modules/core-js/modules/es6.typed.data-view.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");n(n.G+n.W+n.F*!r("./node_modules/core-js/modules/_typed.js").ABV,{DataView:r("./node_modules/core-js/modules/_typed-buffer.js").DataView})},"./node_modules/core-js/modules/es7.object.entries.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_object-to-array.js")(true);n(n.S,"Object",{entries:function e(t){return i(t)}})},"./node_modules/core-js/modules/es7.object.values.js":function(e,t,r){var n=r("./node_modules/core-js/modules/_export.js");var i=r("./node_modules/core-js/modules/_object-to-array.js")(false);n(n.S,"Object",{values:function e(t){return i(t)}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(e,t,r){r("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(e,t,r){var n=r("./node_modules/core-js/modules/es6.array.iterator.js");var i=r("./node_modules/core-js/modules/_object-keys.js");var o=r("./node_modules/core-js/modules/_redefine.js");var s=r("./node_modules/core-js/modules/_global.js");var a=r("./node_modules/core-js/modules/_hide.js");var l=r("./node_modules/core-js/modules/_iterators.js");var c=r("./node_modules/core-js/modules/_wks.js");var u=c("iterator");var d=c("toStringTag");var h=l.Array;var f={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var p=i(f),m=0;m<p.length;m++){var g=p[m];var v=f[g];var _=s[g];var b=_&&_.prototype;var y;if(b){b[u]||a(b,u,h);b[d]||a(b,d,g);l[g]=h;if(v)for(y in n)b[y]||o(b,y,n[y],true)}}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/CanvasContainer/CanvasContainer.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".CanvasContainer-container-3OOoV {\n  height: 100%;\n}\n.CanvasContainer-container-3OOoV .canvas-container {\n  margin: 0 auto;\n}\n.CanvasContainer-image-v_pNA {\n  display: none;\n}\n.CanvasContainer-canvas-3aUOq {\n  /* TODO remove prefixes if we install autoprefixer */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  outline: none;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/CanvasContainer/CanvasContainer.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/CanvasContainer/CanvasContainer.less"],names:[],mappings:"AAEA;EACE,aAAA;CCDD;ADAD;EAII,eAAA;CCDH;ADKD;EACE,cAAA;CCHD;ADMD;ECJE,qDAAqD;EDMrD,4BAAA;EACA,0BAAA;EACA,yBAAA;EACA,uBAAA;EACA,sBAAA;EACA,kBAAA;EACA,cAAA;CCJD",file:"CanvasContainer.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n\n.container {\n  height: 100%;\n\n  :global(.canvas-container) {\n    margin: 0 auto;\n  }\n}\n\n.image {\n  display: none;\n}\n\n.canvas {\n  /* TODO remove prefixes if we install autoprefixer */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  outline: none;\n}',".container {\n  height: 100%;\n}\n.container :global(.canvas-container) {\n  margin: 0 auto;\n}\n.image {\n  display: none;\n}\n.canvas {\n  /* TODO remove prefixes if we install autoprefixer */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  outline: none;\n}\n"],sourceRoot:""}]);t.locals={container:"CanvasContainer-container-3OOoV",image:"CanvasContainer-image-v_pNA",canvas:"CanvasContainer-canvas-3aUOq"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/EditorForm/EditorForm.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".EditorForm-container-1yLau {\n  background: #fff;\n  height: calc(100% - 22px * 2.5);\n  padding: 22px 0;\n  font-size: 14px;\n  color: #313131;\n}\n.EditorForm-container-1yLau .EditorForm-componentListContainer-1nl-n {\n  height: 100%;\n  overflow: auto;\n}\n.EditorForm-header-2ZJag {\n  position: relative;\n  line-height: 22px;\n  padding: 0 0 11px;\n  height: 44px;\n  font-weight: 300;\n}\n.EditorForm-header-2ZJag span {\n  font-weight: 500;\n  text-align: center;\n  margin: 0 auto;\n  display: block;\n}\n.EditorForm-header-2ZJag .EditorForm-action-3xNix {\n  position: absolute;\n  right: 22px;\n  top: 0;\n  cursor: pointer;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/EditorForm/EditorForm.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/EditorForm/EditorForm.less"],names:[],mappings:"AACA;EAEI,iBAAA;EACA,gCAAA;EACA,gBAAA;EACA,gBAAA;EACA,eAAA;CCDH;ADLD;EASM,aAAA;EACA,eAAA;CCDL;ADTD;EAeI,mBAAA;EACA,kBAAA;EACA,kBAAA;EACA,aAAA;EACA,iBAAA;CCHH;ADhBD;EAqBM,iBAAA;EACA,mBAAA;EACA,eAAA;EACA,eAAA;CCFL;ADtBD;EA4BM,mBAAA;EACA,YAAA;EACA,OAAA;EACA,gBAAA;CCHL",file:"EditorForm.less",sourcesContent:["@import \"~@sqs/styles/variables.less\";\n:local {\n  .container {\n    background: #fff;\n    height: ~'calc(100% - @{global-grid} * 2.5)';\n    padding: @global-grid 0;\n    font-size: @font-size;\n    color: @rosetta-black;\n\n    .componentListContainer {\n      height: 100%;\n      overflow: auto;\n    }\n  }\n\n  .header {\n    position: relative;\n    line-height: @global-grid;\n    padding: 0 0 @global-grid * .5;\n    height: @global-grid * 2;\n    font-weight: 300;\n    span {\n      font-weight: @font-weight-medium;\n      text-align: center;\n      margin: 0 auto;\n      display: block;\n    }\n\n    .action {\n      position: absolute;\n      right: @global-grid;\n      top: 0;\n      cursor: pointer;\n    }\n  }\n}",":local .container {\n  background: #fff;\n  height: calc(100% - 22px * 2.5);\n  padding: 22px 0;\n  font-size: 14px;\n  color: #313131;\n}\n:local .container .componentListContainer {\n  height: 100%;\n  overflow: auto;\n}\n:local .header {\n  position: relative;\n  line-height: 22px;\n  padding: 0 0 11px;\n  height: 44px;\n  font-weight: 300;\n}\n:local .header span {\n  font-weight: 500;\n  text-align: center;\n  margin: 0 auto;\n  display: block;\n}\n:local .header .action {\n  position: absolute;\n  right: 22px;\n  top: 0;\n  cursor: pointer;\n}\n"],sourceRoot:""}]);t.locals={container:"EditorForm-container-1yLau",componentListContainer:"EditorForm-componentListContainer-1nl-n",header:"EditorForm-header-2ZJag",action:"EditorForm-action-3xNix"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/EditorSelector/EditorSelector.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".EditorSelector-editorSelectorWrapper-3hFeb {\n  display: flex;\n  align-self: stretch;\n  margin-right: 9px;\n}\n.EditorSelector-editorSelectorBtn-2kx-Y {\n  display: flex;\n  flex-direction: row;\n  width: 44px;\n  height: calc(22px * 2.5 - 2px);\n  cursor: pointer;\n  margin: 0;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  border-bottom: solid 2px transparent;\n}\n.EditorSelector-editorSelectorBtn-2kx-Y .EditorSelector-icon-2KDkm {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.EditorSelector-editorSelectorBtn-2kx-Y.EditorSelector-active-1d_KA {\n  border-bottom: solid 2px #313131;\n}\n.EditorSelector-btnPopover--eGrK {\n  z-index: 310010;\n  margin: 15px 0 0 0;\n}\n.EditorSelector-btnPopoverBody-1tBz8 {\n  padding: 11px;\n  font-size: 11px;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/EditorSelector/EditorSelector.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/EditorSelector/EditorSelector.less"],names:[],mappings:"AAEA;EAEI,cAAA;EACA,oBAAA;EACA,kBAAA;CCFH;ADFD;EAOI,cAAA;EACA,oBAAA;EACA,YAAA;EACA,+BAAA;EACA,gBAAA;EACA,UAAA;EACA,wBAAA;EACA,oBAAA;EACA,gBAAA;EACA,qCAAA;CCFH;ADdD;EAmBM,cAAA;EACA,oBAAA;EACA,wBAAA;CCFL;ADKG;EACE,iCAAA;CCHL;ADtBD;EA8BI,gBAAA;EACA,mBAAA;CCLH;AD1BD;EAmCI,cAAA;EACA,gBAAA;CCNH",file:"EditorSelector.less",sourcesContent:["@import \"~@sqs/styles/variables.less\";\n\n:local {\n  .editorSelectorWrapper {\n    display: flex;\n    align-self: stretch;\n    margin-right: 9px;\n  }\n  .editorSelectorBtn {\n    display: flex;\n    flex-direction: row;\n    width: @global-grid * 2;\n    height: ~'calc(@{global-grid} * 2.5 - 2px)';\n    cursor: pointer;\n    margin: 0;\n    justify-content: center;\n    align-items: center;\n    font-size: 14px;\n    border-bottom: solid 2px transparent;\n\n    .icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    &.active {\n      border-bottom: solid 2px #313131;\n    }\n  }\n\n  .btnPopover {\n    z-index: 310010;\n    margin: 15px 0 0 0;\n  }\n\n  .btnPopoverBody {\n    padding: @global-grid / 2;\n    font-size: 11px;\n  }\n}",":local .editorSelectorWrapper {\n  display: flex;\n  align-self: stretch;\n  margin-right: 9px;\n}\n:local .editorSelectorBtn {\n  display: flex;\n  flex-direction: row;\n  width: 44px;\n  height: calc(22px * 2.5 - 2px);\n  cursor: pointer;\n  margin: 0;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  border-bottom: solid 2px transparent;\n}\n:local .editorSelectorBtn .icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n:local .editorSelectorBtn.active {\n  border-bottom: solid 2px #313131;\n}\n:local .btnPopover {\n  z-index: 310010;\n  margin: 15px 0 0 0;\n}\n:local .btnPopoverBody {\n  padding: 11px;\n  font-size: 11px;\n}\n"],sourceRoot:""}]);t.locals={editorSelectorWrapper:"EditorSelector-editorSelectorWrapper-3hFeb",editorSelectorBtn:"EditorSelector-editorSelectorBtn-2kx-Y",icon:"EditorSelector-icon-2KDkm",active:"EditorSelector-active-1d_KA",btnPopover:"EditorSelector-btnPopover--eGrK",btnPopoverBody:"EditorSelector-btnPopoverBody-1tBz8"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/FilterIntensityField/FilterIntensityField.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".FilterIntensityField-container-8bkSr {\n  max-width: 300px;\n  margin: 0 auto;\n}\n.FilterIntensityField-container-8bkSr.FilterIntensityField-hidden-2UuH9 {\n  opacity: 0;\n}\n.FilterIntensityField-labels-3IhQA {\n  font-size: 14px;\n  line-height: 22px;\n}\n.FilterIntensityField-labels-3IhQA .FilterIntensityField-value-3eX5v {\n  float: right;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/FilterIntensityField/FilterIntensityField.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/FilterIntensityField/FilterIntensityField.less"],names:[],mappings:"AAEA;EACE,iBAAA;EACA,eAAA;CCDD;ADGC;EACE,WAAA;CCDH;ADKD;EACE,gBAAA;EACA,kBAAA;CCHD;ADCD;EAII,aAAA;CCFH",file:"FilterIntensityField.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n\n.container {\n  max-width: 300px;\n  margin: 0 auto;\n\n  &.hidden {\n    opacity: 0;\n  }\n}\n\n.labels {\n  font-size: @font-size;\n  line-height: 22px;\n  .value {\n    float: right;\n  }\n}',".container {\n  max-width: 300px;\n  margin: 0 auto;\n}\n.container.hidden {\n  opacity: 0;\n}\n.labels {\n  font-size: 14px;\n  line-height: 22px;\n}\n.labels .value {\n  float: right;\n}\n"],sourceRoot:""}]);t.locals={container:"FilterIntensityField-container-8bkSr",hidden:"FilterIntensityField-hidden-2UuH9",labels:"FilterIntensityField-labels-3IhQA",value:"FilterIntensityField-value-3eX5v"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/Grid/Grid.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".Grid-container-3r6eO {\n  column-gap: 22px;\n  column-fill: balance;\n  padding: 0 11px;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/Grid/Grid.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/Grid/Grid.less"],names:[],mappings:"AAEA;EAEI,iBAAA;EACA,qBAAA;EACA,gBAAA;CCFH",file:"Grid.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n\n:local {\n  .container {\n    column-gap: @global-grid;\n    column-fill: balance;\n    padding: 0 @global-grid / 2;\n  }\n}',":local .container {\n  column-gap: 22px;\n  column-fill: balance;\n  padding: 0 11px;\n}\n"],sourceRoot:""}]);t.locals={container:"Grid-container-3r6eO"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/IconButton/IconButton.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".IconButton-container-1x5-X {\n  padding-bottom: 5.5px;\n  -moz-column-break-inside: avoid;\n  -webkit-column-break-inside: avoid;\n  column-break-inside: avoid;\n}\n.IconButton-button-1gM_r {\n  padding: 11px;\n  width: 100%;\n}\n.IconButton-button-1gM_r:hover {\n  background: #eee;\n}\n.IconButton-button-1gM_r.IconButton-active-jmAoI {\n  background: #eee;\n}\n.IconButton-buttonFlexContainer-3Y445 {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n.IconButton-title-AmaEf {\n  padding-left: 4px;\n}\n.IconButton-title-AmaEf.IconButton-withIcon-vxgXx {\n  padding-left: 11px;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/IconButton/IconButton.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/IconButton/IconButton.less"],names:[],mappings:"AAEA;EAEI,sBAAA;EACA,gCAAA;EACA,mCAAA;EACA,2BAAA;CCFH;ADHD;EAUI,cAAA;EACA,YAAA;CCJH;ADMG;EACE,iBAAA;CCJL;ADOG;EACE,iBAAA;CCLL;ADbD;EAuBI,cAAA;EACA,4BAAA;EACA,oBAAA;CCPH;ADlBD;EAgCI,kBAAA;CCXH;ADaG;EACE,mBAAA;CCXL",file:"IconButton.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n\n:local {\n  .container {\n    padding-bottom: @global-grid * .25;\n    -moz-column-break-inside: avoid;\n    -webkit-column-break-inside: avoid;\n    column-break-inside: avoid;\n    // Safari needs column-break-inside to align columns correctly\n  }\n\n  .button {\n    padding: @global-grid / 2;\n    width: 100%;\n\n    &:hover {\n      background: #eee;\n    }\n\n    &.active {\n      background: #eee;\n    }\n  }\n\n  .buttonFlexContainer {\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n  }\n\n  .title {\n    // Title has to line up with icons in rows above / below,\n    // icons are centered in a container, so we just need a\n    // little off-grid padding to scootch it over\n    padding-left: 4px;\n\n    &.withIcon {\n      padding-left: @global-grid / 2;\n    }\n  }\n}',":local .container {\n  padding-bottom: 5.5px;\n  -moz-column-break-inside: avoid;\n  -webkit-column-break-inside: avoid;\n  column-break-inside: avoid;\n}\n:local .button {\n  padding: 11px;\n  width: 100%;\n}\n:local .button:hover {\n  background: #eee;\n}\n:local .button.active {\n  background: #eee;\n}\n:local .buttonFlexContainer {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n:local .title {\n  padding-left: 4px;\n}\n:local .title.withIcon {\n  padding-left: 11px;\n}\n"],sourceRoot:""}]);t.locals={container:"IconButton-container-1x5-X",button:"IconButton-button-1gM_r",active:"IconButton-active-jmAoI",buttonFlexContainer:"IconButton-buttonFlexContainer-3Y445",title:"IconButton-title-AmaEf",withIcon:"IconButton-withIcon-vxgXx"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/Layout/Layout.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".Layout-container-1QbPA {\n  width: 100%;\n  height: 100%;\n}\n.Layout-toolbar-1sMRt {\n  border-bottom: solid 1px #ddd;\n  height: 55px;\n}\n.Layout-toolbar-1sMRt.Layout-hidden-1C0e1 {\n  display: none;\n}\n.Layout-bodyContainer-2RbUE {\n  position: absolute;\n  z-index: 1;\n  top: 56px;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n}\n.Layout-progressIndicatorContainer-1wjZ5 {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 2;\n  opacity: 1;\n  width: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  transition: opacity 200ms;\n}\n.Layout-progressIndicatorContainer-1wjZ5.Layout-hiding-2BmiP {\n  opacity: 0;\n}\n.Layout-progressIndicatorContainer-1wjZ5.Layout-hidden-1C0e1 {\n  display: none;\n}\n.Layout-hiddenCanvasContainer-3wKIK {\n  display: none;\n}\n.Layout-imageContainer-1K1ku {\n  flex-grow: 1;\n  position: relative;\n  min-width: 600px;\n  max-width: 100%;\n  height: 100%;\n}\n.Layout-canvas-kldCh {\n  position: absolute;\n  box-sizing: border-box;\n  padding: 22px;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n}\n.Layout-canvas-kldCh.Layout-withSliderTool-1CWXp {\n  bottom: 77px;\n}\n.Layout-slider-2Aa8O {\n  position: absolute;\n  bottom: 0;\n  height: 44px;\n  width: 100%;\n  margin-bottom: 33px;\n}\n.Layout-form-TL1yE {\n  height: 100%;\n  flex: 1 0 320px;\n  align-self: flex-start;\n  max-width: 320px;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/Layout/Layout.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/Layout/Layout.less"],names:[],mappings:"AAMA;EACE,YAAA;EACA,aAAA;CCLD;ADQD;EACE,8BAAA;EACA,aAAA;CCND;ADQC;EACE,cAAA;CCNH;ADUD;EACE,mBAAA;EACA,WAAA;EACA,UAAA;EACA,UAAA;EACA,YAAA;EACA,cAAA;EACA,qBAAA;EACA,wBAAA;CCRD;ADWD;EACE,mBAAA;EACA,OAAA;EACA,UAAA;EACA,WAAA;EACA,WAAA;EACA,YAAA;EACA,QAAA;EACA,cAAA;EACA,uBAAA;EACA,oBAAA;EACA,wBAAA;EACA,kBAAA;EACA,0BAAA;CCTD;ADWC;EACE,WAAA;CCTH;ADYC;EACE,cAAA;CCVH;ADcD;EACE,cAAA;CCZD;ADeD;EACE,aAAA;EACA,mBAAA;EACA,iBAAA;EACA,gBAAA;EACA,aAAA;CCbD;ADgBD;EACE,mBAAA;EACA,uBAAA;EACA,cAAA;EACA,OAAA;EACA,UAAA;EACA,YAAA;CCdD;ADgBC;EACE,aAAA;CCdH;ADkBD;EACE,mBAAA;EACA,UAAA;EACA,aAAA;EACA,YAAA;EACA,oBAAA;CChBD;ADmBD;EACE,aAAA;EACA,gBAAA;EACA,uBAAA;EACA,iBAAA;CCjBD",file:"Layout.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n\n@sliderHeight: @grid * 4;\n@sliderMargin: @grid * 3;\n@totalSliderHeight: @sliderHeight + @sliderMargin;\n\n.container {\n  width: 100%;\n  height: 100%;\n}\n\n.toolbar {\n  border-bottom: solid 1px #ddd;\n  height: 55px;\n\n  &.hidden {\n    display: none;\n  }\n}\n\n.bodyContainer {\n  position: absolute;\n  z-index: 1;\n  top: 56px; // offset for toolbar + 1px border\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n}\n\n.progressIndicatorContainer {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 2;\n  opacity: 1;\n  width: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  transition: opacity 200ms;\n\n  &.hiding {\n    opacity: 0;\n  }\n\n  &.hidden {\n    display: none;\n  }\n}\n\n.hiddenCanvasContainer {\n  display: none;\n}\n\n.imageContainer {\n  flex-grow: 1;\n  position: relative;\n  min-width: 600px;\n  max-width: 100%;\n  height: 100%;\n}\n\n.canvas {\n  position: absolute;\n  box-sizing: border-box;\n  padding: @grid * 2;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n\n  &.withSliderTool {\n    bottom: @totalSliderHeight;\n  }\n}\n\n.slider {\n  position: absolute;\n  bottom: 0;\n  height: @sliderHeight; //height of the tool\n  width: 100%;\n  margin-bottom: @sliderMargin;\n}\n\n.form {\n  height: 100%;\n  flex: 1 0 320px;\n  align-self: flex-start;\n  max-width: 320px;\n}\n',".container {\n  width: 100%;\n  height: 100%;\n}\n.toolbar {\n  border-bottom: solid 1px #ddd;\n  height: 55px;\n}\n.toolbar.hidden {\n  display: none;\n}\n.bodyContainer {\n  position: absolute;\n  z-index: 1;\n  top: 56px;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  align-items: stretch;\n  justify-content: center;\n}\n.progressIndicatorContainer {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  z-index: 2;\n  opacity: 1;\n  width: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  transition: opacity 200ms;\n}\n.progressIndicatorContainer.hiding {\n  opacity: 0;\n}\n.progressIndicatorContainer.hidden {\n  display: none;\n}\n.hiddenCanvasContainer {\n  display: none;\n}\n.imageContainer {\n  flex-grow: 1;\n  position: relative;\n  min-width: 600px;\n  max-width: 100%;\n  height: 100%;\n}\n.canvas {\n  position: absolute;\n  box-sizing: border-box;\n  padding: 22px;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n}\n.canvas.withSliderTool {\n  bottom: 77px;\n}\n.slider {\n  position: absolute;\n  bottom: 0;\n  height: 44px;\n  width: 100%;\n  margin-bottom: 33px;\n}\n.form {\n  height: 100%;\n  flex: 1 0 320px;\n  align-self: flex-start;\n  max-width: 320px;\n}\n"],sourceRoot:""}]);t.locals={container:"Layout-container-1QbPA",toolbar:"Layout-toolbar-1sMRt",hidden:"Layout-hidden-1C0e1",bodyContainer:"Layout-bodyContainer-2RbUE",progressIndicatorContainer:"Layout-progressIndicatorContainer-1wjZ5",hiding:"Layout-hiding-2BmiP",hiddenCanvasContainer:"Layout-hiddenCanvasContainer-3wKIK",imageContainer:"Layout-imageContainer-1K1ku",canvas:"Layout-canvas-kldCh",withSliderTool:"Layout-withSliderTool-1CWXp",slider:"Layout-slider-2Aa8O",form:"Layout-form-TL1yE"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/StraightenField/StraightenField.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".StraightenField-container-1zduc {\n  max-width: 300px;\n  margin: 0 auto;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/StraightenField/StraightenField.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/StraightenField/StraightenField.less"],names:[],mappings:"AAAA;EACE,iBAAA;EACA,eAAA;CCCD",file:"StraightenField.less",sourcesContent:[".container {\n  max-width: 300px;\n  margin: 0 auto;\n}",".container {\n  max-width: 300px;\n  margin: 0 auto;\n}\n"],sourceRoot:""}]);t.locals={container:"StraightenField-container-1zduc"}},"./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/ThumbnailButton/ThumbnailButton.less":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(true);t.push([e.i,".ThumbnailButton-container-3Rljk {\n  text-align: center;\n  padding-top: 11px;\n}\n.ThumbnailButton-button-3QR2c {\n  position: relative;\n  padding: 0;\n  box-sizing: border-box;\n}\n.ThumbnailButton-button-3QR2c.ThumbnailButton-active-3veMR .ThumbnailButton-image-Uchd7 {\n  border: 3px solid #313131;\n  width: 130px;\n  height: 130px;\n}\n.ThumbnailButton-button-3QR2c.ThumbnailButton-active-3veMR .ThumbnailButton-title-3W5Vb {\n  color: #313131;\n  background-color: #fff;\n}\n.ThumbnailButton-title-3W5Vb {\n  display: block;\n  position: absolute;\n  padding: 6px;\n  bottom: 6px;\n  left: 6px;\n  background-color: #313131;\n  line-height: 11px;\n  font-size: 9.75px;\n  letter-spacing: 0.75px;\n  text-transform: uppercase;\n  color: #FFFFFF;\n}\n.ThumbnailButton-image-Uchd7 {\n  border: 3px solid #fff;\n  width: 130px;\n  height: 130px;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.03);\n}\n.ThumbnailButton-image-Uchd7 div {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  background-position: center;\n  background-size: cover;\n  transition: opacity cubic-bezier(0, 0, 0.2, 1) 600ms;\n  -webkit-transition: opacity cubic-bezier(0, 0, 0.2, 1) 600ms;\n}\n.ThumbnailButton-image-Uchd7.ThumbnailButton-loaded-1pVHl div {\n  opacity: 1;\n}\n","",{version:3,sources:["/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/ThumbnailButton/ThumbnailButton.less","/Users/cblagg/workspace/repositories/web-modules/image-editor/packages/image-editor-ui/src/ThumbnailButton/ThumbnailButton.less"],names:[],mappings:"AAMA;EACE,mBAAA;EACA,kBAAA;CCLD;ADQD;EACE,mBAAA;EACA,WAAA;EACA,uBAAA;CCND;ADQC;EAEI,0BAAA;EACA,aAAA;EACA,cAAA;CCPL;ADGC;EAQI,eAAA;EACA,uBAAA;CCRL;ADaD;EACE,eAAA;EACA,mBAAA;EACA,aAAA;EACA,YAAA;EACA,UAAA;EAEA,0BAAA;EACA,kBAAA;EACA,kBAAA;EACA,uBAAA;EACA,0BAAA;EACA,eAAA;CCZD;ADeD;EACE,uBAAA;EACA,aAAA;EACA,cAAA;EACA,uBAAA;EACA,sCAAA;CCbD;ADQD;EAQI,YAAA;EACA,aAAA;EACA,WAAA;EACA,4BAAA;EACA,uBAAA;EACA,qDAAA;EACA,6DAAA;CCbH;ADgBC;EAEI,WAAA;CCfL",file:"ThumbnailButton.less",sourcesContent:['@import "~@sqs/styles/variables.less";\n@import "~@sqs/animation-less-core/dist/less-core.less";\n\n@image-dimension: 136px;\n@border-size: 3px;\n\n.container {\n  text-align: center;\n  padding-top: @grid;\n}\n\n.button {\n  position: relative;\n  padding: 0;\n  box-sizing: border-box;\n\n  &.active {\n    .image {\n      border: @border-size solid @rosetta-black;\n      width: @image-dimension - @border-size * 2;\n      height: @image-dimension - @border-size * 2;\n    }\n\n    .title {\n      color: @rosetta-black;\n      background-color: #fff;\n    }\n  }\n}\n\n.title {\n  display: block;\n  position: absolute;\n  padding: 6px;\n  bottom: 6px;\n  left: 6px;\n  text-transform: uppercase;\n  background-color: #313131;\n  line-height: @grid;\n  font-size: @font-size-smallest;\n  letter-spacing: @font-size-smallest-caps-letter-spacing;\n  text-transform: uppercase;\n  color: #FFFFFF;\n}\n\n.image {\n  border: @border-size solid #fff;\n  width: @image-dimension - @border-size * 2;\n  height: @image-dimension - @border-size * 2;\n  vertical-align: middle;\n  background-color: rgba(0,0,0,.03);\n\n  div {\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    background-position: center;\n    background-size: cover;\n    transition: opacity @sqsa-ease-in @sqsa-duration-fast;\n    -webkit-transition: opacity @sqsa-ease-in @sqsa-duration-fast;\n  }\n\n  &.loaded {\n    div {\n      opacity: 1;\n    }\n  }\n}',".container {\n  text-align: center;\n  padding-top: 11px;\n}\n.button {\n  position: relative;\n  padding: 0;\n  box-sizing: border-box;\n}\n.button.active .image {\n  border: 3px solid #313131;\n  width: 130px;\n  height: 130px;\n}\n.button.active .title {\n  color: #313131;\n  background-color: #fff;\n}\n.title {\n  display: block;\n  position: absolute;\n  padding: 6px;\n  bottom: 6px;\n  left: 6px;\n  background-color: #313131;\n  line-height: 11px;\n  font-size: 9.75px;\n  letter-spacing: 0.75px;\n  text-transform: uppercase;\n  color: #FFFFFF;\n}\n.image {\n  border: 3px solid #fff;\n  width: 130px;\n  height: 130px;\n  vertical-align: middle;\n  background-color: rgba(0, 0, 0, 0.03);\n}\n.image div {\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  background-position: center;\n  background-size: cover;\n  transition: opacity cubic-bezier(0, 0, 0.2, 1) 600ms;\n  -webkit-transition: opacity cubic-bezier(0, 0, 0.2, 1) 600ms;\n}\n.image.loaded div {\n  opacity: 1;\n}\n"],sourceRoot:""}]);t.locals={container:"ThumbnailButton-container-3Rljk",button:"ThumbnailButton-button-3QR2c",active:"ThumbnailButton-active-3veMR",image:"ThumbnailButton-image-Uchd7",title:"ThumbnailButton-title-3W5Vb",loaded:"ThumbnailButton-loaded-1pVHl"}},"./node_modules/css-loader/lib/css-base.js":function(e,t){e.exports=function(r){var s=[];s.toString=function e(){return this.map(function(e){var t=n(e,r);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")};s.i=function(e,t){"string"===typeof e&&(e=[[null,e,""]]);var r={};for(var n=0;n<this.length;n++){var i=this[n][0];"number"===typeof i&&(r[i]=true)}for(n=0;n<e.length;n++){var o=e[n];if("number"!==typeof o[0]||!r[o[0]]){t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")");s.push(o)}}};return s};function n(e,t){var r=e[1]||"";var n=e[3];if(!n)return r;if(t&&"function"===typeof btoa){var i=s(n);var o=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}function s(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));var r="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+r+" */"}},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,r,n,i){var o,s;var a=8*i-n-1;var l=(1<<a)-1;var c=l>>1;var u=-7;var d=r?i-1:0;var h=r?-1:1;var f=e[t+d];d+=h;o=f&(1<<-u)-1;f>>=-u;u+=a;for(;u>0;o=256*o+e[t+d],d+=h,u-=8);s=o&(1<<-u)-1;o>>=-u;u+=n;for(;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n);o-=c}return(f?-1:1)*s*Math.pow(2,o-n)};t.write=function(e,t,r,n,i,o){var s,a,l;var c=8*o-i-1;var u=(1<<c)-1;var d=u>>1;var h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0;var f=n?0:o-1;var p=n?1:-1;var m=t<0||0===t&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===1/0){a=isNaN(t)?1:0;s=u}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-s))<1){s--;l*=2}t+=s+d>=1?h/l:h*Math.pow(2,1-d);if(t*l>=2){s++;l/=2}if(s+d>=u){a=0;s=u}else if(s+d>=1){a=(t*l-1)*Math.pow(2,i);s+=d}else{a=t*Math.pow(2,d-1)*Math.pow(2,i);s=0}}for(;i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);s=s<<i|a;c+=i;for(;c>0;e[r+f]=255&s,f+=p,s/=256,c-=8);e[r+f-p]|=128*m}},"./node_modules/style-loader/lib/addStyles.js":function(e,t,r){var u={};var n=function(e){var t;return function(){"undefined"===typeof t&&(t=e.apply(this,arguments));return t}};var i=n(function(){return window&&document&&document.all&&!window.atob});var o=function(e,t){if(t)return t.querySelector(e);return document.querySelector(e)};var s=function(e){var n={};return function(e,t){if("function"===typeof e)return e();if("undefined"===typeof n[e]){var r=o.call(this,e,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}n[e]=r}return n[e]}}();var a=null;var l=0;var c=[];var d=r("./node_modules/style-loader/lib/urls.js");e.exports=function(e,l){if("undefined"!==typeof DEBUG&&DEBUG&&"object"!==typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");l=l||{};l.attrs="object"===typeof l.attrs?l.attrs:{};l.singleton||"boolean"===typeof l.singleton||(l.singleton=i());l.insertInto||(l.insertInto="head");l.insertAt||(l.insertAt="bottom");var c=f(e,l);h(c,l);return function e(t){var r=[];for(var n=0;n<c.length;n++){var i=c[n];var o=u[i.id];o.refs--;r.push(o)}if(t){var s=f(t,l);h(s,l)}for(var n=0;n<r.length;n++){var o=r[n];if(0===o.refs){for(var a=0;a<o.parts.length;a++)o.parts[a]();delete u[o.id]}}}};function h(e,t){for(var r=0;r<e.length;r++){var n=e[r];var i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(y(n.parts[o],t))}else{var s=[];for(var o=0;o<n.parts.length;o++)s.push(y(n.parts[o],t));u[n.id]={id:n.id,refs:1,parts:s}}}}function f(e,t){var r=[];var n={};for(var i=0;i<e.length;i++){var o=e[i];var s=t.base?o[0]+t.base:o[0];var a=o[1];var l=o[2];var c=o[3];var u={css:a,media:l,sourceMap:c};n[s]?n[s].parts.push(u):r.push(n[s]={id:s,parts:[u]})}return r}function p(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt){n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild);c.push(t)}else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!==typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,r);r.insertBefore(t,i)}}function m(e){if(null===e.parentNode)return false;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function g(e){var t=document.createElement("style");void 0===e.attrs.type&&(e.attrs.type="text/css");if(void 0===e.attrs.nonce){var r=b();r&&(e.attrs.nonce=r)}_(t,e.attrs);p(e,t);return t}function v(e){var t=document.createElement("link");void 0===e.attrs.type&&(e.attrs.type="text/css");e.attrs.rel="stylesheet";_(t,e.attrs);p(e,t);return t}function _(t,r){Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])})}function b(){false;return r.nc}function y(r,e){var t,n,i,o;if(e.transform&&r.css){o="function"===typeof e.transform?e.transform(r.css):e.transform.default(r.css);if(!o)return function(){};r.css=o}if(e.singleton){var s=l++;t=a=a||g(e);n=C.bind(null,t,s,false);i=C.bind(null,t,s,true)}else if(r.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa){t=v(e);n=x.bind(null,t,e);i=function(){m(t);t.href&&URL.revokeObjectURL(t.href)}}else{t=g(e);n=w.bind(null,t);i=function(){m(t)}}n(r);return function e(t){if(t){if(t.css===r.css&&t.media===r.media&&t.sourceMap===r.sourceMap)return;n(r=t)}else i()}}var j=function(){var r=[];return function(e,t){r[e]=t;return r.filter(Boolean).join("\n")}}();function C(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=j(t,i);else{var o=document.createTextNode(i);var s=e.childNodes;s[t]&&e.removeChild(s[t]);s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function w(e,t){var r=t.css;var n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function x(e,t,r){var n=r.css;var i=r.sourceMap;var o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=d(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"});var a=e.href;e.href=URL.createObjectURL(s);a&&URL.revokeObjectURL(a)}},"./node_modules/style-loader/lib/urls.js":function(e,t){e.exports=function(e){var t="undefined"!==typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!==typeof e)return e;var i=t.protocol+"//"+t.host;var o=i+t.pathname.replace(/\/[^\/]*$/,"/");var r=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r))return e;var n;n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,"");return"url("+JSON.stringify(n)+")"});return r}},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(e){"object"===typeof window&&(r=window)}e.exports=r},"./src/CanvasContainer/CanvasContainer.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/CanvasContainer/CanvasContainer.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/EditorForm/EditorForm.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/EditorForm/EditorForm.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/EditorSelector/EditorSelector.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/EditorSelector/EditorSelector.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/FilterIntensityField/FilterIntensityField.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/FilterIntensityField/FilterIntensityField.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/Grid/Grid.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/Grid/Grid.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/IconButton/IconButton.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/IconButton/IconButton.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/Layout/Layout.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/Layout/Layout.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/StraightenField/StraightenField.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/StraightenField/StraightenField.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/ThumbnailButton/ThumbnailButton.less":function(e,t,r){var n=r("./node_modules/css-loader/index.js?!./node_modules/less-loader/dist/cjs.js?!./src/ThumbnailButton/ThumbnailButton.less");"string"===typeof n&&(n=[[e.i,n,""]]);var i;var o;var s={hmr:true};s.transform=i;s.insertInto=void 0;var a=r("./node_modules/style-loader/lib/addStyles.js")(n,s);n.locals&&(e.exports=n.locals);false},"./src/assets/icons/AlignLeft.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/AlignLeft"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("defs",{key:2},[n.createElement("rect",{id:"path-1",x:"2",y:"11",width:"18",height:"1",key:0}),n.createElement("mask",{id:"mask-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"0",y:"0",width:"18",height:"1",fill:"white",key:1},n.createElement("use",{xlinkHref:"#path-1"}))]),n.createElement("g",{id:"Icon/Crop/AlignLeft",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},[n.createElement("use",{id:"Rectangle",stroke:"#313131",mask:"url(#mask-2)",strokeWidth:"2",strokeDasharray:"2,4",fillRule:"nonzero",xlinkHref:"#path-1",key:0}),n.createElement("rect",{id:"Rectangle",stroke:"#313131",fillRule:"nonzero",transform:"translate(11.513140, 11.513140) rotate(-30.000000) translate(-11.513140, -11.513140) ",x:"6.51313972",y:"6.51313972",width:"10",height:"10",key:1})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/AlignRight.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/AlignRight"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("defs",{key:2},[n.createElement("rect",{id:"path-1",x:"2",y:"11",width:"18",height:"1",key:0}),n.createElement("mask",{id:"mask-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"0",y:"0",width:"18",height:"1",fill:"white",key:1},n.createElement("use",{xlinkHref:"#path-1"}))]),n.createElement("g",{id:"Icon/Crop/AlignRight",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},[n.createElement("use",{id:"Rectangle",stroke:"#313131",mask:"url(#mask-2)",strokeWidth:"2",strokeDasharray:"2,4",fillRule:"nonzero",xlinkHref:"#path-1",key:0}),n.createElement("rect",{id:"Rectangle",stroke:"#313131",fillRule:"nonzero",transform:"translate(11.513140, 11.513140) rotate(30.000000) translate(-11.513140, -11.513140) ",x:"6.51313972",y:"6.51313972",width:"10",height:"10",key:1})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/Custom.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"TempIcons/Crop/Customv2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"TempIcons/Crop/Customv2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"Group",transform:"translate(2.000000, 2.000000)",fill:"#000000",fillRule:"nonzero"},[n.createElement("rect",{id:"Rectangle",x:"0",y:"0",width:"1",height:"2",key:0}),n.createElement("rect",{id:"Rectangle",x:"0",y:"0",width:"2",height:"1",key:1}),n.createElement("rect",{id:"Rectangle",x:"0",y:"4",width:"1",height:"2",key:2}),n.createElement("rect",{id:"Rectangle",x:"0",y:"8",width:"1",height:"2",key:3}),n.createElement("rect",{id:"Rectangle",x:"0",y:"12",width:"1",height:"2",key:4}),n.createElement("rect",{id:"Rectangle",x:"0",y:"16",width:"1",height:"2",key:5}),n.createElement("rect",{id:"Rectangle",x:"0",y:"17",width:"2",height:"1",key:6}),n.createElement("rect",{id:"Rectangle",x:"4",y:"17",width:"2",height:"1",key:7}),n.createElement("rect",{id:"Rectangle",x:"8",y:"17",width:"2",height:"1",key:8}),n.createElement("rect",{id:"Rectangle",x:"12",y:"17",width:"2",height:"1",key:9}),n.createElement("rect",{id:"Rectangle",x:"16",y:"17",width:"2",height:"1",key:10}),n.createElement("rect",{id:"Rectangle",x:"17",y:"16",width:"1",height:"2",key:11}),n.createElement("rect",{id:"Rectangle",x:"17",y:"12",width:"1",height:"2",key:12}),n.createElement("rect",{id:"Rectangle",x:"17",y:"8",width:"1",height:"2",key:13}),n.createElement("rect",{id:"Rectangle",x:"17",y:"4",width:"1",height:"2",key:14}),n.createElement("rect",{id:"Rectangle",x:"17",y:"0",width:"1",height:"2",key:15}),n.createElement("rect",{id:"Rectangle",x:"16",y:"0",width:"2",height:"1",key:16}),n.createElement("rect",{id:"Rectangle",x:"12",y:"0",width:"2",height:"1",key:17}),n.createElement("rect",{id:"Rectangle",x:"8",y:"0",width:"2",height:"1",key:18}),n.createElement("rect",{id:"Rectangle",x:"4",y:"0",width:"2",height:"1",key:19})]))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/FiveFour.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/fivefour"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/fivefour",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",transform:"translate(11.000000, 11.000000) rotate(90.000000) translate(-11.000000, -11.000000) ",x:"3.5",y:"2.5",width:"15",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/FlipX.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/FlipY"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/FlipY",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},[n.createElement("rect",{fill:"#1E1E1E",opacity:"0",x:"0",y:"0",width:"22",height:"22",key:0}),n.createElement("polygon",{id:"Triangle-3",fill:"#313131",fillRule:"nonzero",transform:"translate(5.500000, 11.000000) rotate(90.000000) translate(-5.500000, -11.000000) ",points:"5.5 7.5 9.5 14.5 1.5 14.5",key:1}),n.createElement("polygon",{id:"Triangle-3",fill:"#313131",fillRule:"nonzero",transform:"translate(16.500000, 11.000000) scale(-1, 1) rotate(90.000000) translate(-16.500000, -11.000000) ",points:"16.5 7.5 20.5 14.5 12.5 14.5",key:2}),n.createElement("g",{id:"Group",transform:"translate(10.500000, 5.500000)",fill:"#313131",fillRule:"nonzero",key:3},[n.createElement("rect",{id:"Rectangle-23",x:"0",y:"0",width:"1",height:"1",key:0}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"2",width:"1",height:"1",key:1}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"4",width:"1",height:"1",key:2}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"6",width:"1",height:"1",key:3}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"8",width:"1",height:"1",key:4}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"10",width:"1",height:"1",key:5})])])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/FlipY.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/FlipX"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/FlipX",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"Icon/Flip(vertical)",transform:"translate(5.000000, 2.000000)",fill:"#313131",fillRule:"nonzero"},n.createElement("g",{id:"Group-2",transform:"translate(6.000000, 9.000000) rotate(90.000000) translate(-6.000000, -9.000000) translate(-3.000000, 3.000000)"},[n.createElement("polygon",{id:"Triangle-3",transform:"translate(3.500000, 6.000000) rotate(90.000000) translate(-3.500000, -6.000000) ",points:"3.5 2.5 7.5 9.5 -0.5 9.5",key:0}),n.createElement("polygon",{id:"Triangle-3",transform:"translate(14.500000, 6.000000) scale(-1, 1) rotate(90.000000) translate(-14.500000, -6.000000) ",points:"14.5 2.5 18.5 9.5 10.5 9.5",key:1}),n.createElement("g",{id:"Group",transform:"translate(8.500000, 0.500000)",key:2},[n.createElement("rect",{id:"Rectangle-23",x:"0",y:"0",width:"1",height:"1",key:0}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"2",width:"1",height:"1",key:1}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"4",width:"1",height:"1",key:2}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"6",width:"1",height:"1",key:3}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"8",width:"1",height:"1",key:4}),n.createElement("rect",{id:"Rectangle-23",x:"0",y:"10",width:"1",height:"1",key:5})])])))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/FourFive.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/fourfive"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/fourfive",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",x:"3.5",y:"2.5",width:"15",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/FourThree.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/fourthree"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/fourthree",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",transform:"translate(11.000000, 11.000000) rotate(90.000000) translate(-11.000000, -11.000000) ",x:"4.5",y:"2.5",width:"13",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/NineSixteen.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/sixnineteen"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/sixnineteen",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",x:"6.5",y:"2.5",width:"9",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/RotateLeft.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/RotateLeft"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/RotateLeft",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"Icon/Flip",transform:"translate(11.000000, 11.000000) scale(-1, 1) translate(-11.000000, -11.000000) ",fillRule:"nonzero"},[n.createElement("rect",{id:"Rectangle-10",x:"0",y:"0",width:"22",height:"22",key:0}),n.createElement("path",{d:"M17.4670625,6.5 L14.375,6.5 C14.0639375,6.5 13.8125,6.248 13.8125,5.9375 C13.8125,5.627 14.0639375,5.375 14.375,5.375 L17.1875,5.375 L17.1875,2.5625 C17.1875,2.252 17.4389375,2 17.75,2 C18.0610625,2 18.3125,2.252 18.3125,2.5625 L18.3125,5.6545625 C18.3125,6.120875 17.933375,6.5 17.4670625,6.5 Z",id:"Shape",fill:"#313131",key:1}),n.createElement("path",{d:"M11,20 C6.037625,20 2,15.962375 2,11 C2,6.037625 6.037625,2 11,2 C13.404125,2 15.6648125,2.9365625 17.3635625,4.6364375 C17.5835,4.856375 17.5835,5.2124375 17.3635625,5.4318125 C17.143625,5.65175 16.788125,5.65175 16.5681875,5.4318125 C15.0815,3.944 13.10375,3.125 11,3.125 C6.6575,3.125 3.125,6.6575 3.125,11 C3.125,15.3425 6.6575,18.875 11,18.875 C15.3425,18.875 18.875,15.3425 18.875,11 C18.875,10.6895 19.1264375,10.4375 19.4375,10.4375 C19.7485625,10.4375 20,10.6895 20,11 C20,15.962375 15.962375,20 11,20 Z",id:"Shape",fill:"#313131",key:2})]))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/RotateRight.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/RotateRight"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/RotateRight",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("g",{id:"Icon/Flip",fillRule:"nonzero"},[n.createElement("rect",{id:"Rectangle-10",x:"0",y:"0",width:"22",height:"22",key:0}),n.createElement("path",{d:"M17.4670625,6.5 L14.375,6.5 C14.0639375,6.5 13.8125,6.248 13.8125,5.9375 C13.8125,5.627 14.0639375,5.375 14.375,5.375 L17.1875,5.375 L17.1875,2.5625 C17.1875,2.252 17.4389375,2 17.75,2 C18.0610625,2 18.3125,2.252 18.3125,2.5625 L18.3125,5.6545625 C18.3125,6.120875 17.933375,6.5 17.4670625,6.5 Z",id:"Shape",fill:"#313131",key:1}),n.createElement("path",{d:"M11,20 C6.037625,20 2,15.962375 2,11 C2,6.037625 6.037625,2 11,2 C13.404125,2 15.6648125,2.9365625 17.3635625,4.6364375 C17.5835,4.856375 17.5835,5.2124375 17.3635625,5.4318125 C17.143625,5.65175 16.788125,5.65175 16.5681875,5.4318125 C15.0815,3.944 13.10375,3.125 11,3.125 C6.6575,3.125 3.125,6.6575 3.125,11 C3.125,15.3425 6.6575,18.875 11,18.875 C15.3425,18.875 18.875,15.3425 18.875,11 C18.875,10.6895 19.1264375,10.4375 19.4375,10.4375 C19.7485625,10.4375 20,10.6895 20,11 C20,15.962375 15.962375,20 11,20 Z",id:"Shape",fill:"#313131",key:2})]))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/SixteenNine.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/nineteensix"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/nineteensix",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",transform:"translate(11.000000, 11.000000) rotate(90.000000) translate(-11.000000, -11.000000) ",x:"6.5",y:"2.5",width:"9",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/Square.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/Square"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/Square",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",x:"2.5",y:"2.5",width:"17",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/ThreeFour.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/threefour"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/threefour",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",x:"4.5",y:"2.5",width:"13",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/ThreeTwo.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/threetwo"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/threetwo",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",transform:"translate(11.000000, 11.000000) rotate(90.000000) translate(-11.000000, -11.000000) ",x:"5.5",y:"2.5",width:"11",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/TwoThree.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/Crop/twothree"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/Crop/twothree",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},n.createElement("rect",{id:"Rectangle-22",stroke:"#313131",x:"5.5",y:"2.5",width:"11",height:"17"}))])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/adjust.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,n.createElement("g",{id:"Icon/ImageEditor/Adjustv2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},[n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"2",y:"5",width:"18",height:"1",rx:"0.5",key:0}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"2",y:"11",width:"18",height:"1",rx:"0.5",key:1}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"2",y:"17",width:"18",height:"1",rx:"0.5",key:2}),n.createElement("circle",{id:"Oval",stroke:"#000000",fill:"#FFFFFF",fillRule:"nonzero",cx:"6.5",cy:"5.5",r:"2",key:3}),n.createElement("circle",{id:"Oval",stroke:"#000000",fill:"#FFFFFF",fillRule:"nonzero",cx:"14.5",cy:"11.5",r:"2",key:4}),n.createElement("circle",{id:"Oval",stroke:"#000000",fill:"#FFFFFF",fillRule:"nonzero",cx:"9.5",cy:"17.5",r:"2",key:5})]))}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/blur.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("path",{d:"M14 22.5C18.6944 22.5 22.5 18.6944 22.5 14C22.5 9.30558 18.6944 5.5 14 5.5C9.30558 5.5 5.5 9.30558 5.5 14C5.5 18.6944 9.30558 22.5 14 22.5Z",stroke:"black",key:0}),n.createElement("g",{filter:"url(#filter0_f)",key:1},n.createElement("circle",{cx:"14",cy:"14",r:"7",fill:"#313131"})),n.createElement("defs",{key:2},n.createElement("filter",{id:"filter0_f",x:"0",y:"0",width:"28",height:"28",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},[n.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix",key:0}),n.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape",key:1}),n.createElement("feGaussianBlur",{stdDeviation:"3.5",result:"effect1_foregroundBlur",key:2})]))])}i.defaultProps={width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"};e.exports=i;i.default=i},"./src/assets/icons/brightness.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Brightness-v2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("defs",{key:2},[n.createElement("circle",{id:"path-1",cx:"11",cy:"11",r:"8",key:0}),n.createElement("mask",{id:"mask-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"-1",y:"-1",width:"18",height:"18",key:1},[n.createElement("rect",{x:"2",y:"2",width:"18",height:"18",fill:"white",key:0}),n.createElement("use",{xlinkHref:"#path-1",fill:"black",key:1})])]),n.createElement("g",{id:"Icon/ImageEditor/Brightness-v2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},[n.createElement("use",{id:"Oval",stroke:"#000000",mask:"url(#mask-2)",strokeWidth:"2",strokeDasharray:"3",fillRule:"nonzero",xlinkHref:"#path-1",key:0}),n.createElement("circle",{id:"Oval",stroke:"#000000",fillRule:"nonzero",cx:"11",cy:"11",r:"6.5",key:1})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/contrast.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Contrast-v2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/ImageEditor/Contrast-v2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},[n.createElement("circle",{id:"Oval",stroke:"#000000",fillRule:"nonzero",cx:"11",cy:"11",r:"8.5",key:0}),n.createElement("path",{d:"M11,18 L11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z",id:"Combined-Shape",fill:"#000000",fillRule:"nonzero",key:1})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/crop.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,n.createElement("g",{id:"Icon/Crop(Light)",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},[n.createElement("path",{d:"M5.5,2 L5.5,2 C5.77614237,2 6,2.22385763 6,2.5 L6,18 L6,18 C5.44771525,18 5,17.5522847 5,17 L5,2.5 C5,2.22385763 5.22385763,2 5.5,2 Z",id:"Rectangle-6",fill:"#1E1E1E",fillRule:"nonzero",key:0}),n.createElement("path",{d:"M5,17 L15,17 L15,18 L6,18 C5.44771525,18 5,17.5522847 5,17 Z",id:"Rectangle",fill:"#1E1E1E",fillRule:"nonzero",key:1}),n.createElement("path",{d:"M16,4 L16,4 C16.5522847,4 17,4.44771525 17,5 L17,19.5 C17,19.7761424 16.7761424,20 16.5,20 L16.5,20 C16.2238576,20 16,19.7761424 16,19.5 L16,4 Z",id:"Rectangle-2",fill:"#1E1E1E",fillRule:"nonzero",key:2}),n.createElement("path",{d:"M2.5,4 L4,4 L4,5 L2.5,5 C2.22385763,5 2,4.77614237 2,4.5 L2,4.5 C2,4.22385763 2.22385763,4 2.5,4 Z",id:"Rectangle-7",fill:"#1E1E1E",fillRule:"nonzero",key:3}),n.createElement("path",{d:"M18,17 L19.5,17 C19.7761424,17 20,17.2238576 20,17.5 L20,17.5 C20,17.7761424 19.7761424,18 19.5,18 L18,18 L18,17 Z",id:"Rectangle-7",fill:"#1E1E1E",fillRule:"nonzero",key:4}),n.createElement("rect",{id:"Rectangle-3",fill:"#1E1E1E",fillRule:"nonzero",x:"7",y:"4",width:"9",height:"1",key:5})]))}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/filter.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Filter"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("rect",{width:"44",height:"44",fill:"white",key:2}),n.createElement("rect",{width:"22",height:"22",transform:"translate(11 11)",fill:"white",key:3}),n.createElement("circle",{cx:"20",cy:"20",r:"6.5",stroke:"#313131",key:4}),n.createElement("circle",{cx:"24",cy:"24",r:"6.5",stroke:"#313131",key:5})])}i.defaultProps={width:"44",height:"44",viewBox:"0 0 44 44",fill:"none"};e.exports=i;i.default=i},"./src/assets/icons/highlight.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Highlight-v2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/ImageEditor/Highlight-v2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},[n.createElement("circle",{id:"Oval",stroke:"#000000",fillRule:"nonzero",cx:"11",cy:"11",r:"8.5",key:0}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"11",y:"6",width:"7",height:"1",key:1}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"11",y:"9",width:"8",height:"1",key:2}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"11",y:"12",width:"8",height:"1",key:3}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"11",y:"15",width:"7",height:"1",key:4})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/saturation.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Saturation-v2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("defs",{key:2},n.createElement("linearGradient",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",id:"linearGradient-1"},[n.createElement("stop",{stopColor:"#FFFFFF",offset:"0%",key:0}),n.createElement("stop",{stopColor:"#000000",offset:"100%",key:1})])),n.createElement("g",{id:"Icon/ImageEditor/Saturation-v2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:3},[n.createElement("circle",{id:"Oval",stroke:"#000000",fillRule:"nonzero",cx:"11",cy:"11",r:"8.5",key:0}),n.createElement("circle",{id:"Oval",fill:"url(#linearGradient-1)",fillRule:"nonzero",cx:"11",cy:"11",r:"7",key:1})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/shadow.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,[n.createElement("title",{key:0},"Icon/ImageEditor/Shadow-v2"),n.createElement("desc",{key:1},"Created with Sketch."),n.createElement("g",{id:"Icon/ImageEditor/Shadow-v2",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},[n.createElement("circle",{id:"Oval",stroke:"#000000",fillRule:"nonzero",cx:"11",cy:"11",r:"8.5",key:0}),n.createElement("path",{d:"M3,19 L3,3 C7.418278,3 11,6.581722 11,11 C11,15.418278 7.418278,19 3,19 Z",id:"Combined-Shape",fill:"#000000",fillRule:"nonzero",transform:"translate(7.000000, 11.000000) scale(-1, 1) translate(-7.000000, -11.000000) ",key:1}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"10",y:"6",width:"8",height:"1",key:2}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"10",y:"9",width:"9",height:"1",key:3}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"10",y:"12",width:"9",height:"1",key:4}),n.createElement("rect",{id:"Rectangle",fill:"#000000",fillRule:"nonzero",x:"10",y:"15",width:"8",height:"1",key:5})])])}i.defaultProps={width:"22px",height:"22px",viewBox:"0 0 22 22",version:"1.1"};e.exports=i;i.default=i},"./src/assets/icons/sharpness.svg":function(e,t,r){var n=r("react");function i(e){return n.createElement("svg",e,n.createElement("path",{d:"M2.85488 18.5L11 4.01986L19.145 18.5H2.85488Z",stroke:"#313131"}))}i.defaultProps={width:"22",height:"22",viewBox:"0 0 22 22",fill:"none"};e.exports=i;i.default=i},"./src/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/core-js/modules/es7.object.values.js");var i=r("./node_modules/core-js/modules/es7.symbol.async-iterator.js");var o=r("./node_modules/core-js/modules/es6.symbol.js");var s=r("./node_modules/core-js/modules/es6.array.for-each.js");var a=r("./node_modules/core-js/modules/es6.array.filter.js");var l=r("./node_modules/core-js/modules/web.dom.iterable.js");var c=r("./node_modules/core-js/modules/es6.array.iterator.js");var u=r("./node_modules/core-js/modules/es6.object.keys.js");var d=r("./node_modules/core-js/modules/es6.object.define-property.js");var h=r("./node_modules/core-js/modules/es6.object.create.js");var f=r("./node_modules/core-js/modules/es6.object.set-prototype-of.js");var p=r("./node_modules/core-js/modules/es6.object.assign.js");var m=r("react");var g=r.n(m);var v=r("prop-types");var _=r.n(v);var b=r("../image-editor-core/dist/index.js");var y=r.n(b);var j=r("./node_modules/core-js/modules/es6.function.bind.js");var C=r("./node_modules/core-js/modules/es6.array.map.js");var w=r("./node_modules/classnames/index.js");var x=r.n(w);var E=r("./src/EditorSelector/EditorSelector.less");var A=r.n(E);var O=r("@sqs/core-components");var S={LIGHT_AND_COLOR:"LIGHT_AND_COLOR",CROP_AND_ROTATE:"CROP_AND_ROTATE",FILTER:"FILTER"};var T=r("./src/assets/icons/adjust.svg");var I=r.n(T);var k=r("./src/assets/icons/crop.svg");var P=r.n(k);var R=r("./src/assets/icons/filter.svg");var F=r.n(R);var D;function L(e){L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return L(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function N(e,t,r){t&&B(e.prototype,t);r&&B(e,r);return e}function U(e,t){if(t&&("object"===L(t)||"function"===typeof t))return t;return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){G=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return G(e)}function H(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&z(e,t)}function z(e,t){z=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return z(e,t)}function Y(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var W=(D={},Y(D,S.CROP_AND_ROTATE,g.a.createElement(P.a,null)),Y(D,S.LIGHT_AND_COLOR,g.a.createElement(I.a,null)),Y(D,S.FILTER,g.a.createElement(F.a,null)),D);var V=function e(t){var r=t.type;return W[r]};var q=function(e){H(r,e);function r(e){var t;M(this,r);t=U(this,G(r).call(this,e));t.handleClick=function(e){t.props.onClick(e)};t.handleMouseEnter=function(e){t.timeoutOnMouseEnter&&clearTimeout(t.timeoutOnMouseEnter);t.timeoutOnMouseEnter=setTimeout(function(){t.setState({hoveredIcon:e});t.timeoutOnMouseEnter=false},400)};t.handleMouseLeave=function(){t.timeoutOnMouseEnter&&clearTimeout(t.timeoutOnMouseEnter);t.setState({hoveredIcon:null})};t.state={hoveredIcon:null};t.timeoutOnMouseEnter=false;t.editorSelectorWrapper=g.a.createRef();return t}N(r,[{key:"render",value:function e(){var r=this;var t=this.props,n=t.messages,i=t.selectedEditor;return g.a.createElement("div",{className:A.a.editorSelectorWrapper,ref:this.editorSelectorWrapper},Object.keys(S).map(function(t){return g.a.createElement("div",{key:t,className:x()(A.a.editorSelectorBtn,Y({},A.a.active,t===i)),onClick:r.handleClick.bind(r,t),onMouseEnter:function e(){return r.handleMouseEnter(t)},onMouseLeave:r.handleMouseLeave},g.a.createElement("div",{className:A.a.icon,"data-test":t},g.a.createElement(V,{type:t})),g.a.createElement(O["PopOver"],{anchor:"mouse",anchorPoint:{x:"center",y:"bottom"},bodyClassName:A.a.btnPopoverBody,className:A.a.btnPopover,isOpen:r.state.hoveredIcon===t,mountAt:document.body,position:"bottom-center"},n.EDITOR_TYPE[t]))}))}}]);return r}(m["Component"]);q.propTypes={messages:_.a.object.isRequired,onClick:_.a.func.isRequired,selectedEditor:_.a.oneOf(Object.values(S))};var Z=q;var K=Z;var $=r("@sqs/core-components/lib/web/ConfirmModal");var J=r.n($);var Q=r("@sqs/track-events");var ee=r.n(Q);var te=r("lodash/debounce");var re=r.n(te);var ne=new ee.a({customSchemaName:"image_editor",logging:false},{actor:"user",action:"click",object_type:"button",product_area:"image-editor",event_owner_team:"asset-management",event_source:"web"});var ie=re()(function(e){false;ne.track(e)},200);var oe=function e(t){ie({product_page:t,object_identifier:"open"})};var se=function e(t,r,n,i){ie({product_page:t,object_identifier:"edit-button",editor_state_key:r,editor_state_keys_changed:n,has_edited:i})};var ae=function e(t,r,n,i){ie({product_page:r,object_identifier:"editor-selector",editor_type:t,editor_state_keys_changed:n,has_edited:i})};var le=function e(t,r){ie({product_page:t,object_identifier:"cancel",editor_state_keys_changed:r})};var ce=function e(t,r){ie({product_page:t,object_identifier:"cancel-cancel",editor_state_keys_changed:r})};var ue=function e(t,r){ie({product_page:t,object_identifier:"cancel-confirm",editor_state_keys_changed:r})};var de=function e(t,r){ie({product_page:t,object_identifier:"save",editor_state_keys_changed:r})};var he=function e(t,r){ie({product_page:t,object_identifier:"save-cancel",editor_state_keys_changed:r})};var fe=function e(t,r){ie({product_page:t,object_identifier:"save-confirm",editor_state_keys_changed:r})};function pe(e){pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return pe(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function ve(e,t,r){t&&ge(e.prototype,t);r&&ge(e,r);return e}function _e(e,t){if(t&&("object"===pe(t)||"function"===typeof t))return t;return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){ye=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return ye(e)}function je(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&Ce(e,t)}function Ce(e,t){Ce=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return Ce(e,t)}var we=function(e){je(t,e);function t(e){var s;me(this,t);s=_e(this,ye(t).call(this,e));s.handleCancelButtonClick=function(){var e=s.props,t=e.editorStateChanges,r=e.hasEdited,n=e.onCancel,i=e.selectedEditor;le(i,t,r);t.length?s.setState({isReviewingCancel:true}):n()};s.handleSaveButtonClick=function(){var e=s.props,t=e.editorStateChanges,r=e.hasEdited,n=e.selectedEditor;de(n,t,r);s.setState({isReviewingSave:true})};s.resumeEditing=function(){var e=s.props,t=e.editorStateChanges,r=e.hasEdited,n=e.selectedEditor;var i=s.state.isReviewingCancel;var o=i?ce:he;o(n,t,r);s.setState({isReviewingCancel:false,isReviewingSave:false})};s.handleConfirmCancel=function(){var e=s.props,t=e.editorStateChanges,r=e.hasEdited,n=e.selectedEditor;ue(n,t,r);s.setState({isReviewingCancel:false});s.props.onCancel()};s.handleSave=function(){var e=s.props,t=e.editorStateChanges,r=e.hasEdited,n=e.selectedEditor;fe(n,t,r);s.setState({isReviewingSave:false});s.props.onSave()};s.state={isReviewingCancel:false,isReviewingSave:false};return s}ve(t,[{key:"render",value:function e(){var t=this.props,r=t.className,n=t.messages,i=t.onSelectEditor,o=t.selectedEditor;var s=this.state,a=s.isReviewingCancel,l=s.isReviewingSave;return g.a.createElement(g.a.Fragment,null,g.a.createElement(O["Toolbar"],{className:r},g.a.createElement(O["Toolbar"].Left,null,g.a.createElement(O["Toolbar"].Button,{inverted:true,label:n.SAVE,onClick:this.handleSaveButtonClick,htmlAttributes:{"data-test":"ToolbarSaveButton"}}),g.a.createElement(O["Toolbar"].Button,{label:n.CANCEL,onClick:this.handleCancelButtonClick,htmlAttributes:{"data-test":"ToolbarCancelButton"}}),g.a.createElement(O["Toolbar"].IconButton,{name:"undo",onClick:this.props.onUndo,isDisabled:!this.props.isUndoable}),g.a.createElement(O["Toolbar"].IconButton,{name:"redo",onClick:this.props.onRedo,isDisabled:!this.props.isRedoable})),g.a.createElement(O["Toolbar"].Right,null,g.a.createElement(K,{messages:n,onClick:i,selectedEditor:o}))),g.a.createElement(J.a,{isOpen:a,cancelLabel:n.REVIEW_CANCEL.CANCEL_LABEL,cancelStyle:"default",onDismiss:this.resumeEditing,confirmLabel:n.REVIEW_CANCEL.CONFIRM_LABEL,confirmStyle:"default",onConfirm:this.handleConfirmCancel,message:n.REVIEW_CANCEL.MESSAGE,baseZIndex:310001}),g.a.createElement(J.a,{isOpen:l,cancelLabel:n.REVIEW_SAVE.CANCEL_LABEL,cancelStyle:"default",onDismiss:this.resumeEditing,confirmLabel:n.REVIEW_SAVE.CONFIRM_LABEL,confirmStyle:"default",onConfirm:this.handleSave,message:n.REVIEW_SAVE.MESSAGE,baseZIndex:310001,htmlAttributes:{"data-test":"ReviewSaveModal"}}))}}]);return t}(g.a.Component);we.propTypes={editorStateChanges:_.a.array.isRequired,hasEdited:_.a.bool,isUndoable:_.a.bool,isRedoable:_.a.bool,messages:_.a.object.isRequired,onSave:_.a.func.isRequired,onCancel:_.a.func.isRequired,onRedo:_.a.func.isRequired,onUndo:_.a.func.isRequired,onSelectEditor:_.a.func.isRequired,selectedEditor:_.a.oneOf(Object.values(S))};var xe=we;var Ee=r("./node_modules/core-js/modules/es6.array.is-array.js");var Ae=r("./node_modules/core-js/modules/es6.array.index-of.js");var Oe=r("./node_modules/core-js/modules/es7.object.entries.js");var Se=r("./node_modules/core-js/modules/es6.array.reduce.js");var Te=r("lodash/merge");var Ie=r.n(Te);var ke=r("@sqs/jsf-core");var Pe=r("@sqs/jsf-router");var Re=Object(Pe["withRouter"])(Object(ke["withDataValidation"])(ke["Formodule"]));var Fe=Re;var De=r("@sqs/jsf-fields");var Le=r("@sqs/jsf-utils");var Me=r("../image-editor-data-model/EditorStateSchema.json");var Be=r("../image-editor-data-model/FlipAxis.js");var Ne=r.n(Be);var Ue=r("./src/assets/icons/RotateRight.svg");var Xe=r.n(Ue);var Ge=r("./src/assets/icons/RotateLeft.svg");var He=r.n(Ge);var ze=r("./src/assets/icons/FlipX.svg");var Ye=r.n(ze);var We=r("./src/assets/icons/FlipY.svg");var Ve=r.n(We);var qe=r("./src/assets/icons/brightness.svg");var Ze=r.n(qe);var Ke=r("./src/assets/icons/contrast.svg");var $e=r.n(Ke);var Je=r("./src/assets/icons/saturation.svg");var Qe=r.n(Je);var et=r("./src/assets/icons/sharpness.svg");var tt=r.n(et);var rt=r("./src/assets/icons/blur.svg");var nt=r.n(rt);var it=r("./src/assets/icons/highlight.svg");var ot=r.n(it);var st=r("./src/assets/icons/shadow.svg");var at=r.n(st);var lt=r("./src/assets/icons/Square.svg");var ct=r.n(lt);var ut=r("./src/assets/icons/TwoThree.svg");var dt=r.n(ut);var ht=r("./src/assets/icons/ThreeFour.svg");var ft=r.n(ht);var pt=r("./src/assets/icons/FourFive.svg");var mt=r.n(pt);var gt=r("./src/assets/icons/NineSixteen.svg");var vt=r.n(gt);var _t=r("./src/assets/icons/ThreeTwo.svg");var bt=r.n(_t);var yt=r("./src/assets/icons/FourThree.svg");var jt=r.n(yt);var Ct=r("./src/assets/icons/FiveFour.svg");var wt=r.n(Ct);var xt=r("./src/assets/icons/SixteenNine.svg");var Et=r.n(xt);var At=r("./src/assets/icons/Custom.svg");var Ot=r.n(At);var St;function Tt(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var It={ROTATE_LEFT:"ROTATE_LEFT",ROTATE_RIGHT:"ROTATE_RIGHT",FLIP_X:"FLIP_X",FLIP_Y:"FLIP_Y",BRIGHTNESS:"BRIGHTNESS",CONTRAST:"CONTRAST",SATURATION:"SATURATION",SHARPNESS:"SHARPNESS",BLUR:"BLUR",HIGHLIGHTS:"HIGHLIGHTS",SHADOWS:"SHADOWS",SQUARE:"SQUARE",TWO_THREE:"TWO_THREE",THREE_FOUR:"THREE_FOUR",FOUR_FIVE:"FOUR_FIVE",NINE_SIXTEEN:"NINE_SIXTEEN",THREE_TWO:"THREE_TWO",FOUR_THREE:"FOUR_THREE",FIVE_FOUR:"FIVE_FOUR",SIXTEEN_NINE:"SIXTEEN_NINE",CUSTOM:"CUSTOM",ORIGINAL:"ORIGINAL"};var kt=(St={},Tt(St,It.ROTATE_LEFT,g.a.createElement(He.a,null)),Tt(St,It.ROTATE_RIGHT,g.a.createElement(Xe.a,null)),Tt(St,It.FLIP_X,g.a.createElement(Ye.a,null)),Tt(St,It.FLIP_Y,g.a.createElement(Ve.a,null)),Tt(St,It.BRIGHTNESS,g.a.createElement(Ze.a,null)),Tt(St,It.CONTRAST,g.a.createElement($e.a,null)),Tt(St,It.SATURATION,g.a.createElement(Qe.a,null)),Tt(St,It.SQUARE,g.a.createElement(ct.a,null)),Tt(St,It.TWO_THREE,g.a.createElement(dt.a,null)),Tt(St,It.THREE_FOUR,g.a.createElement(ft.a,null)),Tt(St,It.FOUR_FIVE,g.a.createElement(mt.a,null)),Tt(St,It.NINE_SIXTEEN,g.a.createElement(vt.a,null)),Tt(St,It.THREE_TWO,g.a.createElement(bt.a,null)),Tt(St,It.FOUR_THREE,g.a.createElement(jt.a,null)),Tt(St,It.FIVE_FOUR,g.a.createElement(wt.a,null)),Tt(St,It.SIXTEEN_NINE,g.a.createElement(Et.a,null)),Tt(St,It.CUSTOM,g.a.createElement(Ot.a,null)),Tt(St,It.ORIGINAL,g.a.createElement(ct.a,null)),Tt(St,It.SHARPNESS,g.a.createElement(tt.a,null)),Tt(St,It.BLUR,g.a.createElement(nt.a,null)),Tt(St,It.HIGHLIGHTS,g.a.createElement(ot.a,null)),Tt(St,It.SHADOWS,g.a.createElement(at.a,null)),St);var Pt={ORIGINAL:{type:"ORIGINAL",ratio:null,title:"Original",icon:null,isRatioLocked:true,inverse:null},TWO_THREE:{type:"TWO_THREE",ratio:2/3,title:"2:3",icon:It.TWO_THREE,isRatioLocked:true,inverse:"THREE_TWO"},THREE_FOUR:{type:"THREE_FOUR",ratio:.75,title:"3:4",icon:It.THREE_FOUR,isRatioLocked:true,inverse:"FOUR_THREE"},FOUR_FIVE:{type:"FOUR_FIVE",ratio:.8,title:"4:5",icon:It.FOUR_FIVE,isRatioLocked:true,inverse:"FIVE_FOUR"},NINE_SIXTEEN:{type:"NINE_SIXTEEN",ratio:9/16,title:"9:16",icon:It.NINE_SIXTEEN,isRatioLocked:true,inverse:"SIXTEEN_NINE"},CUSTOM:{type:"CUSTOM",ratio:null,title:"Custom",icon:null,isRatioLocked:false,inverse:null},ONE_ONE:{type:"ONE_ONE",ratio:1,title:"1:1",icon:It.SQUARE,isRatioLocked:true,inverse:null},THREE_TWO:{type:"THREE_TWO",ratio:1.5,title:"3:2",icon:It.THREE_TWO,isRatioLocked:true,inverse:"TWO_THREE"},FOUR_THREE:{type:"FOUR_THREE",ratio:4/3,title:"4:3",icon:It.FOUR_THREE,isRatioLocked:true,inverse:"THREE_FOUR"},FIVE_FOUR:{type:"FIVE_FOUR",ratio:5/4,title:"5:4",icon:It.FIVE_FOUR,isRatioLocked:true,inverse:"FOUR_FIVE"},SIXTEEN_NINE:{type:"SIXTEEN_NINE",ratio:16/9,title:"16:9",icon:It.SIXTEEN_NINE,isRatioLocked:true,inverse:"NINE_SIXTEEN"}};var Rt=Pt;var Ft={cropDimensions:null,initialCropDimensions:null,cropConfig:Rt.ORIGINAL,flip:{x:false,y:false},rotation:0};var Dt={brightness:0,contrast:0,saturation:0,sharpness:0,blur:0,highlights:0,shadows:0};var Lt={ORIGINAL:{title:"ORIGINAL",type:"original"},FACET:{title:"FACET",type:"facet"},DENALI:{title:"DENALI",type:"denali"},SAVANNAH:{title:"SAVANNAH",type:"savannah"},VOYAGER:{title:"VOYAGER",type:"voyager"},DELAVAN:{title:"DELAVAN",type:"delavan"},GRAMERCY:{title:"GRAMERCY",type:"gramercy"},NIAGARA:{title:"NIAGARA",type:"niagara"},SERENGETI:{title:"SERENGETI",type:"serengeti"},CASSINI:{title:"CASSINI",type:"cassini"},APOLLO:{title:"APOLLO",type:"apollo"},FRIEZE:{title:"FRIEZE",type:"frieze"}};var Mt=Lt;var Bt={squarespaceFilter:{type:Mt.ORIGINAL.type,intensity:100}};var Nt;function Ut(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var Xt=(Nt={},Ut(Nt,S.CROP_AND_ROTATE,Ft),Ut(Nt,S.LIGHT_AND_COLOR,Dt),Ut(Nt,S.FILTER,Bt),Nt);var Gt=function(){return Ie()({},Ft,Dt,Bt)};var Ht=Object.values(Rt);var zt=function e(t){return Ht.map(function(r){return{type:"cropButton",$mapping:"#/cropConfig",properties:{label:t.CROP_CONFIG[r.type],icon:r.icon,isActive:function e(t){return t.type===r.type},cropConfig:{type:r.type,ratio:r.ratio,isRatioLocked:r.isRatioLocked,inverse:r.inverse}}}})};var Yt=function(e){if(!e){console.error("No message bundle available for CropAndRotate uiSchema");e={}}return[{type:"grid",$mapping:"#/",properties:{baseIndex:0,columnCount:2,children:zt(e)}},{type:"spacer",properties:{gridMultiplier:3}},{type:"grid",$mapping:"#/",properties:{baseIndex:0,columnCount:2,children:[{type:"flipButton",$mapping:"#/flip",properties:{label:e.FLIP_X,icon:It.FLIP_X,axis:"x",currentRotation:{$data:"#/rotation"}}},{type:"flipButton",$mapping:"#/flip",properties:{label:e.FLIP_Y,icon:It.FLIP_Y,axis:"y",currentRotation:{$data:"#/rotation"}}}]}},{type:"grid",$mapping:"#/",properties:{baseIndex:0,columnCount:2,children:[{type:"rotateButton",$mapping:"#/rotation",properties:{label:"-90°",icon:It.ROTATE_LEFT,direction:-90}},{type:"rotateButton",$mapping:"#/rotation",properties:{label:"90°",icon:It.ROTATE_RIGHT,direction:90}}]}},{type:"spacer",properties:{gridMultiplier:3}},{type:"resetButton",$mapping:{rotation:"#/rotation",flip:{x:"#/flip/x",y:"#/flip/y"},cropConfig:"#/cropConfig",cropDimensions:"#/cropDimensions",initialCropDimensions:"#/initialCropDimensions"},$conditional:{$if:{anyOf:[{"#/rotation":{ne:0}},{"#/flip/x":{ne:false}},{"#/flip/y":{ne:false}},{"#/cropConfig/type":{ne:"ORIGINAL"}},{allOf:[{"#/initialCropDimensions":{ne:null}},{anyOf:[{$pointer:"#/cropDimensions/width",$comparator:{ne:{$data:"#/initialCropDimensions/width"}}},{$pointer:"#/cropDimensions/height",$comparator:{ne:{$data:"#/initialCropDimensions/height"}}}]}]}]},$then:{properties:{isDisabled:false}}},properties:{label:e.RESET_CROP,color:"warning",errors:{},isDisabled:true,htmlAttributes:{"data-test":"RESET"},underlined:false}}]};var Wt=r("lodash/compact");var Vt=r.n(Wt);var qt=100;var Zt=-100;var Kt=function(e){if(!e){console.error("No message bundle available for LightAndColor uiSchema");e={}}return Vt()([{type:"range",$mapping:"#/brightness",properties:{label:e.BRIGHTNESS,beforeSlider:kt[It.BRIGHTNESS],max:qt,min:Zt,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"brightness-slider"}}},{type:"range",$mapping:"#/contrast",properties:{label:e.CONTRAST,beforeSlider:kt[It.CONTRAST],max:qt,min:Zt,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"contrast-slider"}}},{type:"range",$mapping:"#/saturation",properties:{label:e.SATURATION,beforeSlider:kt[It.SATURATION],max:qt,min:Zt,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"saturation-slider"}}},{type:"range",$mapping:"#/sharpness",properties:{label:e.SHARPNESS,beforeSlider:kt[It.SHARPNESS],max:100,min:0,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"sharpness-slider"}}},{type:"range",$mapping:"#/blur",properties:{label:e.BLUR,beforeSlider:kt[It.BLUR],max:100,min:0,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"blur-slider"}}},{type:"range",$mapping:"#/highlights",properties:{label:e.HIGHLIGHTS,beforeSlider:kt[It.HIGHLIGHTS],max:100,min:-100,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"highlights-slider"}}},{type:"range",$mapping:"#/shadows",properties:{label:e.SHADOWS,beforeSlider:kt[It.SHADOWS],max:100,min:-100,showInput:true,step:1,underlined:false,htmlAttributes:{"data-test":"shadows-slider"}}},{type:"spacer",properties:{gridMultiplier:3}},{type:"resetButton",$mapping:{brightness:"#/brightness",contrast:"#/contrast",saturation:"#/saturation",sharpness:"#/sharpness",blur:"#/blur"},$conditional:{$if:{anyOf:[{"#/brightness":{ne:0}},{"#/contrast":{ne:0}},{"#/saturation":{ne:0}},{"#/sharpness":{ne:0}},{"#/blur":{ne:0}},{"#/highlights":{ne:0}},{"#/shadows":{ne:0}}]},$then:{properties:{isDisabled:false}}},properties:{label:e.RESET_ADJUST,color:"warning",errors:{},isDisabled:true,htmlAttributes:{"data-test":"RESET"},underlined:false}}])};var $t=Object.values(Mt);var Jt=function e(t){return $t.map(function(r){return{type:"filterButton",$mapping:"#/squarespaceFilter/type",properties:{label:t.FILTER_CONFIG[r.title],alignment:"left",title:r.title,type:r.type,isActive:function e(t){return t===r.type}}}})};var Qt=function(e){if(!e){console.error("No message bundle available for Filter uiSchema");e={}}return[{type:"grid",properties:{baseIndex:0,columnCount:2,children:Jt(e)}}]};var er;function tr(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var rr=(er={},tr(er,S.CROP_AND_ROTATE,Yt),tr(er,S.LIGHT_AND_COLOR,Kt),tr(er,S.FILTER,Qt),er);function nr(){nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return nr.apply(this,arguments)}var ir=function(e,r){return function(t){return g.a.createElement(e,nr({},t,{onClick:function e(){return r(t)}}))}};function or(e){or="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return or(e)}function sr(){sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return sr.apply(this,arguments)}function ar(e,t){if(null==e)return{};var r=lr(e,t);var n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function lr(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,o;for(o=0;o<n.length;o++){i=n[o];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function dr(e,t,r){t&&ur(e.prototype,t);r&&ur(e,r);return e}function hr(e,t){if(t&&("object"===or(t)||"function"===typeof t))return t;return fr(e)}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e){pr=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return pr(e)}function mr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&gr(e,t)}function gr(e,t){gr=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return gr(e,t)}function vr(i){return function(e){mr(t,e);function t(){cr(this,t);return hr(this,pr(t).apply(this,arguments))}dr(t,[{key:"render",value:function e(){var t=this.props,r=t.isActive,n=ar(t,["isActive"]);return g.a.createElement(i,sr({isActive:r(n.value)},n))}}]);return t}(m["Component"])}vr.propTypes={isActive:_.a.func.isRequired};var _r=vr;var br=r("./src/Grid/Grid.less");var yr=r.n(br);function jr(e){jr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return jr(e)}function Cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function xr(e,t,r){t&&wr(e.prototype,t);r&&wr(e,r);return e}function Er(e,t){if(t&&("object"===jr(t)||"function"===typeof t))return t;return Ar(e)}function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(e){Or=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Or(e)}function Sr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&Tr(e,t)}function Tr(e,t){Tr=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return Tr(e,t)}var Ir=function(e){Sr(t,e);function t(){Cr(this,t);return Er(this,Or(t).apply(this,arguments))}xr(t,[{key:"render",value:function e(){var t=this.props,r=t.columnCount,n=t.children;return g.a.createElement("div",{className:yr.a.container,style:{columnCount:r||1}},g.a.createElement(ke["ComponentIterator"],{components:n}))}}]);return t}(m["Component"]);Ir.propTypes={baseIndex:_.a.number.isRequired,columnCount:_.a.number.isRequired,children:_.a.array.isRequired,fieldId:_.a.string,formValues:_.a.object,errors:_.a.object,presentationMode:_.a.string};var kr=Ir;var Pr=kr;var Rr=r("./src/IconButton/IconButton.less");var Fr=r.n(Rr);var Dr=r("@sqs/core-components/web/primitives/Button");var Lr=r.n(Dr);function Mr(e){Mr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return Mr(e)}function Br(){Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return Br.apply(this,arguments)}function Nr(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Ur(e,t){if(null==e)return{};var r=Xr(e,t);var n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function Xr(e,t){if(null==e)return{};var r={};var n=Object.keys(e);var i,o;for(o=0;o<n.length;o++){i=n[o];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function zr(e,t,r){t&&Hr(e.prototype,t);r&&Hr(e,r);return e}function Yr(e,t){if(t&&("object"===Mr(t)||"function"===typeof t))return t;return Wr(e)}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){Vr=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Vr(e)}function qr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&Zr(e,t)}function Zr(e,t){Zr=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return Zr(e,t)}var Kr=function(e){qr(t,e);function t(){Gr(this,t);return Yr(this,Vr(t).apply(this,arguments))}zr(t,[{key:"render",value:function e(){var t=this.props,r=t.icon,n=t.onClick,i=t.label,o=t.isActive,s=Ur(t,["icon","onClick","label","isActive"]);var a=!!kt[r];var l=x()(Fr.a.title,Nr({},Fr.a.withIcon,a));return g.a.createElement("div",{className:Fr.a.container,"data-test":r},g.a.createElement(Lr.a,Br({color:"default",onClick:n,underlined:false,className:x()(Fr.a.button,Nr({},Fr.a.active,o))},s),g.a.createElement("div",{className:Fr.a.buttonFlexContainer},a&&kt[r],g.a.createElement("span",{className:l},i))))}}]);return t}(m["Component"]);Kr.propTypes={alignment:_.a.oneOf(["left","center"]),icon:_.a.oneOf(Object.values(It)),onClick:_.a.func.isRequired,isActive:_.a.bool};var $r=Kr;var Jr=$r;var Qr=r("./src/ThumbnailButton/ThumbnailButton.less");var en=r.n(Qr);var tn=r("./node_modules/core-js/modules/es6.promise.js");var rn={};var nn=null;var on=function e(t){return rn[t]};var sn=function e(t){return rn[t]&&rn[t].isGenerated};var an=function e(r){if(sn(r))return Promise.resolve(on(r));if(!nn)return Promise.resolve(null);return new Promise(function(t){var e=r!==Mt.ORIGINAL.type?y.a.filterThumbnailImage(Object.assign(nn,{filters:[]}),r):Promise.resolve(nn);e.then(function(e){y.a.getImageDataFromImageObject(e).then(function(e){rn[r]={dataURL:e,isGenerated:true};t(rn[r])})})})};var ln={getSourceImage:function e(){return nn},setSourceImage:function e(t){nn=t;Object.keys(rn).forEach(function(e){delete rn[e]})},generateThumbnail:an,getThumbnailByType:on,isGenerated:sn};var cn=Object.values(Mt);var un={};var dn=false;var hn=function e(r){return new Promise(function(t){ln.generateThumbnail(r).then(function(e){un[r]=e;t(un)})})};var fn=function e(t){return hn(cn[t].type).then(function(){if(t===cn.length-1)return Promise.resolve(un);return e(t+1)})};var pn=function e(){if(!dn){dn=true;fn(0)}};var mn=function e(){Object.keys(un).forEach(function(e){delete un[e]});dn=false};var gn=un;function vn(e){vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return vn(e)}function _n(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function jn(e,t,r){t&&yn(e.prototype,t);r&&yn(e,r);return e}function Cn(e,t){if(t&&("object"===vn(t)||"function"===typeof t))return t;return wn(e)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e){xn=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return xn(e)}function En(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&An(e,t)}function An(e,t){An=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return An(e,t)}var On=function(e){En(t,e);function t(e){var r;bn(this,t);r=Cn(this,xn(t).call(this,e));r.pollForThumbnail=function(){var e=r.props.type;var t=r.state.thumbnail;gn[e]?gn[e]!==t&&r.setState({thumbnail:gn[e]}):setTimeout(r.pollForThumbnail,250)};r.state={thumbnail:null};return r}jn(t,[{key:"componentDidMount",value:function e(){this.pollForThumbnail()}},{key:"componentDidUpdate",value:function e(){this.pollForThumbnail()}},{key:"render",value:function e(){var t=this.props,r=t.label,n=t.onClick,i=t.isActive,o=t.type;var s=gn[o]||null;return g.a.createElement("div",{className:en.a.container},g.a.createElement(Lr.a,{color:"default",onClick:n,underlined:false,className:x()(en.a.button,_n({},en.a.active,i))},g.a.createElement("div",{className:x()(en.a.image,_n({},en.a.loaded,!!s))},g.a.createElement("div",{style:s&&{backgroundImage:"url(".concat(s.dataURL,")")}})),g.a.createElement("span",{className:en.a.title},r)))}}]);return t}(m["Component"]);On.propTypes={onClick:_.a.func,label:_.a.string,type:_.a.string,isActive:_.a.bool};var Sn=On;var Tn=Sn;var In=r("../image-editor-utils/isOriginalOrientation.js");var kn=r.n(In);var Pn=r("./src/EditorForm/EditorForm.less");var Rn=r.n(Pn);function Fn(e){Fn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return Fn(e)}function Dn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};var n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})));n.forEach(function(e){Un(t,e,r[e])})}return t}function Ln(e,t){return Nn(e)||Bn(e,t)||Mn()}function Mn(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Bn(e,t){var r=[];var n=true;var i=false;var o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){r.push(a.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return r}function Nn(e){if(Array.isArray(e))return e}function Un(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function Hn(e,t,r){t&&Gn(e.prototype,t);r&&Gn(e,r);return e}function zn(e,t){if(t&&("object"===Fn(t)||"function"===typeof t))return t;return Yn(e)}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){Wn=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Wn(e)}function Vn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&qn(e,t)}function qn(e,t){qn=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return qn(e,t)}var Zn="default";var Kn=function(e){Vn(t,e);function t(e){var o;Xn(this,t);o=zn(this,Wn(t).call(this,e));o.getConfiguration=function(){return Un({},Zn,{schema:Me,uiSchema:o.state.uiSchema,value:o.props.value})};o.getNextValue=function(e,t){return Object.entries(e.diff).reduce(function(e,t){var r=Ln(t,2),n=r[0],i=r[1];return Le["jsonPointerUtils"].setJsonPointerValue(e,n,i)},t)};o.handleChange=function(e){var t=o.props.onChange;var r=e.changes[Zn];var n=r.diff&&Object.keys(r.diff)[0]||null;var i=o.getNextValue(r,o.getConfiguration()[Zn].value);-1!==n.indexOf("squarespaceFilter/type")&&(i.squarespaceFilter.intensity=100);t(i,n)};o.handleResetClick=function(){var e=o.props,t=e.onChange,r=e.selectedEditor,n=e.value;t(Ie()({},n,Xt[r]))};o.renderComponentList=function(e){var t=e.children;return g.a.createElement("div",{className:Rn.a.componentListContainer},t)};o.state={uiSchema:null};return o}Hn(t,[{key:"render",value:function e(){var t=this.props,r=t.messages,n=t.selectedEditor;var i=r.EDITOR_TYPE[n];return g.a.createElement("div",{className:Rn.a.container},g.a.createElement(Fe,{title:i,renderComponentList:this.renderComponentList,renderHeader:function e(){return g.a.createElement("div",{className:Rn.a.header},g.a.createElement("span",null,i))},components:Dn({},De,{grid:Pr,cropButton:_r(ir(Jr,function(e){return e.onChange(e.cropConfig)})),filterButton:_r(ir(Tn,function(e){return e.onChange(e.type)})),rotateButton:ir(Jr,function(e){return e.onChange(e.value+e.direction)}),flipButton:ir(Jr,function(e){var t;var r=(t={},Un(t,Ne.a.HORIZONTAL,e.value[Ne.a.HORIZONTAL]),Un(t,Ne.a.VERTICAL,e.value[Ne.a.VERTICAL]),t);kn()(e.currentRotation)?e.axis===Ne.a.VERTICAL?r[Ne.a.VERTICAL]=!e.value[Ne.a.VERTICAL]:e.axis===Ne.a.HORIZONTAL&&(r[Ne.a.HORIZONTAL]=!e.value[Ne.a.HORIZONTAL]):e.axis===Ne.a.HORIZONTAL?r[Ne.a.VERTICAL]=!e.value[Ne.a.VERTICAL]:e.axis===Ne.a.VERTICAL&&(r[Ne.a.HORIZONTAL]=!e.value[Ne.a.HORIZONTAL]);e.onChange(Dn({},e.value,r))}),resetButton:ir(De["button"],this.handleResetClick)}),configurations:this.getConfiguration(),onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function e(t){var r=rr[t.selectedEditor];return{uiSchema:r(t.messages)}}}]);return t}(m["Component"]);Kn.propTypes={filterInstance:_.a.any,selectedEditor:_.a.oneOf(Object.values(S)),onChange:_.a.func,value:_.a.object,messages:_.a.object.isRequired,imageObject:_.a.object};Kn.defaultProps={value:{},onChange:function e(){}};var $n=Kn;var Jn=$n;var Qn=r("./src/CanvasContainer/CanvasContainer.less");var ei=r.n(Qn);function ti(e){ti="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return ti(e)}function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function ii(e,t,r){t&&ni(e.prototype,t);r&&ni(e,r);return e}function oi(e,t){if(t&&("object"===ti(t)||"function"===typeof t))return t;return si(e)}function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(e){ai=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return ai(e)}function li(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&ci(e,t)}function ci(e,t){ci=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return ci(e,t)}var ui=function(e){li(t,e);function t(e){var r;ri(this,t);r=oi(this,ai(t).call(this,e));r.updateCanvasDimensions=function(){if(!r.containerRef.current)return;var e=r.containerRef.current.clientHeight;var t=r.containerRef.current.clientWidth;r.setState({canvasWidth:t,canvasHeight:e});r.props.onResize&&r.props.onResize(t,e)};r.handleImageError=function(e){var t=r.props.imageSrc;setTimeout(function(){throw new Error("Error: Image won't load [".concat(t,"]"),e)},0)};r.containerRef=g.a.createRef();r.state=t.getInitialState(e.instance);return r}ii(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.updateCanvasDimensions)}},{key:"componentDidUpdate",value:function e(){var t=this.state,r=t.canvasHeight,n=t.canvasWidth;r===this.containerRef.current.clientHeight&&n===this.containerRef.current.clientWidth||setTimeout(this.updateCanvasDimensions,0)}},{key:"render",value:function e(){var t=this.props,r=t.imageSrc,n=t.className,i=t.canvasRef,o=t.imgRef,s=t.onImageLoad;var a=this.state,l=a.canvasWidth,c=a.canvasHeight;var u=x()(n,ei.a.container);return g.a.createElement("div",{className:u,ref:this.containerRef,onContextMenu:function e(t){return t.preventDefault()}},g.a.createElement("canvas",{ref:i,width:l,height:c,className:ei.a.canvas}),g.a.createElement("img",{className:ei.a.image,src:r,onLoad:s,onError:this.handleImageError,ref:o}))}}],[{key:"getInitialState",value:function e(t){return{hasImageLoaded:false,instance:t}}}]);return t}(m["Component"]);ui.propTypes={imageSrc:_.a.string.isRequired,instance:_.a.any,imgRef:_.a.object,canvasRef:_.a.object,onImageLoad:_.a.func,onResize:_.a.func};var di=ui;var hi=di;var fi=r("./src/Layout/Layout.less");var pi=r.n(fi);function mi(e){mi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return mi(e)}function gi(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function vi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _i(e,t){if(t&&("object"===mi(t)||"function"===typeof t))return t;return bi(e)}function bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yi(e){yi=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return yi(e)}function ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function Ci(e,t,r){t&&ji(e.prototype,t);r&&ji(e,r);return e}function wi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&xi(e,t)}function xi(e,t){xi=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return xi(e,t)}var Ei=function(e){wi(r,e);Ci(r,null,[{key:"getDerivedStateFromProps",value:function e(t,r){if(t.isLoading&&r.isProgressHidden)return{isProgressHidden:false};return null}}]);function r(e){var t;vi(this,r);t=_i(this,yi(r).call(this,e));t.setProgressHidden=function(){setTimeout(function(){t.setState({isProgressHidden:true})},200)};t.state={isProgressHidden:true};return t}Ci(r,[{key:"componentDidUpdate",value:function e(t){t.isLoading&&!this.props.isLoading&&this.setProgressHidden()}},{key:"render",value:function e(){var t;var r=this.state.isProgressHidden;var n=this.props,i=n.canvasContainer,o=n.editorForm,s=n.isLoading,a=n.progressIndicator,l=n.straightenTool,c=n.filterIntensityTool,u=n.toolbar;var d=x()(pi.a.progressIndicatorContainer,(t={},gi(t,pi.a.hiding,!s&&!r),gi(t,pi.a.hidden,!s&&r),t));return g.a.createElement("div",{className:pi.a.container},g.a.createElement("div",{className:pi.a.toolbar},!s&&u),g.a.createElement("div",{className:pi.a.bodyContainer},g.a.createElement("div",{className:pi.a.imageContainer},g.a.createElement("div",{className:x()(pi.a.canvas,gi({},pi.a.withSliderTool,!!l||!!c))},i),!!l&&g.a.createElement("div",{className:pi.a.slider},l),!!c&&g.a.createElement("div",{className:pi.a.slider},c)),!!o&&g.a.createElement("div",{className:pi.a.form},o)),g.a.createElement("div",{className:d},a))}}]);return r}(m["Component"]);Ei.propTypes={toolbar:_.a.node.isRequired,canvasContainer:_.a.node.isRequired,straightenTool:_.a.node,filterIntensityTool:_.a.node,editorForm:_.a.node,progressIndicator:_.a.node,isLoading:_.a.bool};var Ai=Ei;var Oi=Ai;var Si=r("../image-editor-utils/getStraightenAmount.js");var Ti=r.n(Si);var Ii=r("./src/StraightenField/StraightenField.less");var ki=r.n(Ii);var Pi=r("./src/assets/icons/AlignLeft.svg");var Ri=r.n(Pi);var Fi=r("./src/assets/icons/AlignRight.svg");var Di=r.n(Fi);var Li=r("./node_modules/@sqs/styles/variables/baseRosetta.js");function Mi(e){Mi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return Mi(e)}function Bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function Ui(e,t,r){t&&Ni(e.prototype,t);r&&Ni(e,r);return e}function Xi(e,t){if(t&&("object"===Mi(t)||"function"===typeof t))return t;return Gi(e)}function Gi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hi(e){Hi=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Hi(e)}function zi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&Yi(e,t)}function Yi(e,t){Yi=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return Yi(e,t)}var Wi=-30;var Vi=30;var qi=2*Li["GRID_SIZE_PX"];var Zi=function(e){zi(t,e);function t(e){var r;Bi(this,t);r=Xi(this,Hi(t).call(this,e));r.handleChange=function(e){var t=r.props.onChange;t({rotation:e+r.state.closest90})};r.state={closest90:e.rotation-Ti()(e.rotation)};return r}Ui(t,[{key:"render",value:function e(){var t=this.props.rotation;return g.a.createElement("div",{className:ki.a.container,"data-test":"straighten-slider"},g.a.createElement(O["Slider"],{afterSlider:function e(){return g.a.createElement(Di.a,{width:qi,height:qi})},beforeSlider:function e(){return g.a.createElement(Ri.a,{width:qi,height:qi})},min:Wi,max:Vi,onChange:this.handleChange,value:Ti()(t),step:1,clampAtMax:true,clampAtMin:true}))}}],[{key:"getDerivedStateFromProps",value:function e(t){return{closest90:t.rotation-Ti()(t.rotation)}}}]);return t}(m["Component"]);Zi.propTypes={onChange:_.a.func.isRequired,rotation:_.a.number.isRequired};var Ki=Zi;var $i=Ki;var Ji=r("./src/FilterIntensityField/FilterIntensityField.less");var Qi=r.n(Ji);function eo(e){eo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return eo(e)}function to(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function no(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function io(e,t,r){t&&no(e.prototype,t);r&&no(e,r);return e}function oo(e,t){if(t&&("object"===eo(t)||"function"===typeof t))return t;return so(e)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e){ao=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return ao(e)}function lo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&co(e,t)}function co(e,t){co=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return co(e,t)}var uo=0;var ho=100;var fo=function(e){lo(r,e);function r(e){var t;ro(this,r);t=oo(this,ao(r).call(this,e));t.handleChange=function(e){t.props.onChange({squarespaceFilter:{intensity:e}})};return t}io(r,[{key:"render",value:function e(){var t=this.props,r=t.label,n=t.value,i=t.isVisible;return g.a.createElement("div",{className:x()(Qi.a.container,to({},Qi.a.hidden,!i)),"data-test":"filter-intensity-slider"},g.a.createElement("div",{className:Qi.a.labels},g.a.createElement("span",null,r),g.a.createElement("span",{className:Qi.a.value},n," %")),g.a.createElement(O["Slider"],{min:uo,max:ho,onChange:this.handleChange,value:n,step:1,clampAtMax:true,clampAtMin:true}))}}]);return r}(m["Component"]);fo.propTypes={onChange:_.a.func.isRequired,value:_.a.number.isRequired,label:_.a.string,isVisible:_.a.bool};var po=fo;var mo=po;var go={DATA_URL:"DATA_URL",FILE:"FILE"};var vo=r("./node_modules/core-js/modules/es6.date.now.js");var _o=r("./node_modules/core-js/modules/es6.typed.data-view.js");var bo=r("./node_modules/core-js/modules/es6.regexp.split.js");var yo={"image/jpeg":"jpg","image/png":"png"};function jo(e){var t=e.split(",");var r=t[0].indexOf("base64")>=0;var n=r?atob(t[1]):unescape(t[1]);var i=t[0].split(":")[1].split(";")[0];return{byteString:n,mimeString:i}}function Co(e){var t=new ArrayBuffer(e.length);var r=new DataView(t);for(var n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t}function wo(e,t){return new Blob([e],{type:t})}function xo(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();try{return new window.File([t],r,{lastModified:n,type:t.type})}catch(e){return Object.assign(t,{name:r,lastModified:n})}}function Eo(e,t){var r=yo[e]||"jpg";if(!t)return"";var n=t.split(".");if(n.length>1){n.pop();n.push(r)}return n.join(".")}var Ao=function(e,t){var r=jo(e),n=r.byteString,i=r.mimeString;var o=Co(n);var s=wo(o,i);var a=Eo(i,t);return xo(s,a)};var Oo=function(e){var t=e.split("?")[0];var r=t.split("/");return r[r.length-1]};var So={SAVE:"Save",CANCEL:"Cancel",FLIP_X:"Flip X",FLIP_Y:"Flip Y",RESET_ADJUST:"Reset",BRIGHTNESS:"Brightness",SATURATION:"Saturation",CONTRAST:"Contrast",SHARPNESS:"Sharpness",BLUR:"Blur",HIGHLIGHTS:"Highlights",SHADOWS:"Shadows",RESET_CROP:"Reset",FILTER_STRENGTH:"Strength",REVIEW_CANCEL:{CANCEL_LABEL:"Resume",CONFIRM_LABEL:"Discard",MESSAGE:"Are you sure you want to discard your changes? This can't be undone."},REVIEW_SAVE:{CANCEL_LABEL:"Resume",CONFIRM_LABEL:"Save",MESSAGE:"Are you sure you want to save your changes? This will be permanent."},EDITOR_TYPE:{LIGHT_AND_COLOR:"Adjust",CROP_AND_ROTATE:"Crop",FILTER:"Filter"},FILTER_CONFIG:{VOYAGER:"Voyager",APOLLO:"Apollo",CASSINI:"Cassini",GRAMERCY:"Gramercy",DENALI:"Denali",NIAGARA:"Niagara",DELAVAN:"Delavan",FACET:"Facet",FRIEZE:"Frieze",SERENGETI:"Serengeti",SAVANNAH:"Savannah"},CROP_CONFIG:{ORIGINAL:"Original",TWO_THREE:"2:3",THREE_FOUR:"3:4",FOUR_FIVE:"4:5",NINE_SIXTEEN:"9:16",CUSTOM:"Custom",ONE_ONE:"1:1",THREE_TWO:"3:2",FOUR_THREE:"4:3",FIVE_FOUR:"5:4",SIXTEEN_NINE:"16:9"}};var To=r("@sqs/core-components/lib/web/CircularProgressIndicator");var Io=r.n(To);var ko=r("../image-editor-data-model/EditorStateKey.js");var Po=r.n(ko);var Ro;function Fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};var n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})));n.forEach(function(e){Do(t,e,r[e])})}return t}function Do(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}var Lo=function e(t,r,n){var i=n.cropConfig,o=n.rotation;var s=t.transformStateForRotation(r);var a=Math.floor(r.rotation/90)!==Math.floor(o/90);var l=a&&i.inverse?Rt[i.inverse]:i;return Fo({},s,{cropConfig:l})};var Mo=(Ro={reset:function e(t){return{cropDimensions:t.getInitialCropDimensions()}},straighten:Lo},Do(Ro,Po.a.ROTATION,Lo),Do(Ro,Po.a.CROP_CONFIG,function(e,t){return e.transformStateForRatio(t)}),Do(Ro,Po.a.FLIP,function(e,t){return e.transformStateForFlip(t)}),Ro);var Bo=r("lodash/pick");var No=r.n(Bo);var Uo=r("lodash/isEqual");var Xo=r.n(Uo);var Go=function(e,t,r,n){if(e)return e.substring(2);var i=No()(n,Object.keys(Xt[t]));if(Xo()(i,Xt[t]))return"reset";var o=Math.abs(n.rotation-r.rotation)%90!==0;if(o)return"straighten"};var Ho=function(t,r){return Object.keys(r).filter(function(e){if(e===Po.a.INITIAL_CROP_DIMENSIONS)return false;if(e===Po.a.CROP_DIMENSIONS)return null!==r[e]&&!Xo()(r[Po.a.INITIAL_CROP_DIMENSIONS],r[e]);return!Xo()(t[e],r[e])})};var zo=r("./node_modules/core-js/modules/es6.string.iterator.js");var Yo=r("./node_modules/core-js/modules/es6.array.from.js");var Wo=r("./node_modules/core-js/modules/es6.regexp.to-string.js");var Vo=r("./node_modules/core-js/modules/es6.date.to-string.js");function qo(e){return $o(e)||Ko(e)||Zo()}function Zo(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ko(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function $o(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var Jo=function e(t,r,n){return qo(r.slice(0,n+1)).concat([t])};var Qo=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=n.map(function(e){return{editingChanges:e}});return Ie.a.apply(void 0,[{},t].concat(qo(o)))};function es(e){es="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return es(e)}function ts(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};var n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})));n.forEach(function(e){rs(t,e,r[e])})}return t}function rs(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true}):e[t]=r;return e}function ns(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function is(e,t){if(t&&("object"===es(t)||"function"===typeof t))return t;return os(e)}function os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ss(e){ss=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return ss(e)}function as(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function ls(e,t,r){t&&as(e.prototype,t);r&&as(e,r);return e}function cs(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&us(e,t)}function us(e,t){us=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return us(e,t)}var ds=function(e){cs(n,e);ls(n,null,[{key:"getDerivedStateFromProps",value:function e(t,r){if(t.instance!==r.instance)return ts({},n.getInitialState(t.instance,t.webglEnabled),{isCanvasReady:true});if(t.webglEnabled!==r.webglEnabled)return ts({},n.getInitialState(t.instance,t.webglEnabled),{isCanvasReady:true,hasImageLoaded:true});return null}},{key:"getInitialState",value:function e(t,r){var n={editingChanges:Gt()};var i={instance:t,isCanvasReady:false,hasImageLoaded:false,selectedEditor:S.LIGHT_AND_COLOR,editorStateChanges:[],hasEdited:false,store:n,history:[n],historyPointer:0,webglEnabled:r,filterInstance:null};oe(i.selectedEditor);return i}}]);function n(e){var u;ns(this,n);u=is(this,ss(n).call(this,e));u.resetFilterInstance=function(e){u.setState({filterInstance:e})};u.handleImageLoad=function(){var e=u.props.showExperimentalFeatures;var t=u.state.webglEnabled;u.editorInstance=new y.a(u.canvasRef.current,u.imgRef.current,{onCropChange:u.handleCropChange,showExperimentalFeatures:e,webglEnabled:t});var r=u.editorInstance.getImageObject();var n=u.editorInstance.getThumbnailObject();u.setState({hasImageLoaded:true,imageObject:r,thumbnailObject:n})};u.handleCanvasResize=function(e,t){u.setState({isCanvasReady:!!(e&&t)});u.editorInstance&&u.editorInstance.resizeCanvas({height:t,width:e})};u.handleSave=function(){var e=u.props,t=e.exportFormat,r=e.imageSrc,n=e.onSave;var i=u.editorInstance.export();if(t===go.DATA_URL)n(i);else{var o=Ao(i,Oo(r));n(o)}};u.handleToolPicked=function(e){var t=u.state,r=t.editorStateChanges,n=t.hasEdited,i=t.selectedEditor;var o=i===e?null:e;i===e?u.editorInstance.disableCropMode():u.editorInstance.toggleCropMode(e===S.CROP_AND_ROTATE);u.setState({selectedEditor:o});ae(o,i,r,n)};u.handleFormChange=function(e,t){var r=u.state,n=r.editorStateChanges,i=r.hasEdited,o=r.selectedEditor;var s=u.state.store.editingChanges;var a=Go(t,o,s,e);se(o,a,n,i);if(o===S.CROP_AND_ROTATE){var l=Mo[a];l&&(e=Object.assign({},e,l(u.editorInstance,e,s)))}var c=u.getNextStateFromEditingChanges(e);u.updateState(c)};u.handleCropChange=function(e){var t=u.state,r=t.editorStateChanges,n=t.hasEdited,i=t.selectedEditor;se(i,"cropDimensions",r,n);var o=u.getNextStateFromEditingChanges({cropDimensions:e});u.updateState(o)};u.handleUndo=function(){var e=u.state,t=e.editorStateChanges,r=e.hasEdited,n=e.historyPointer,i=e.selectedEditor;se(i,"undo",t,r);var o=u.getNextStateFromHistoryPointer(n-1);u.updateState(o)};u.handleRedo=function(){var e=u.state,t=e.editorStateChanges,r=e.hasEdited,n=e.historyPointer,i=e.selectedEditor;se(i,"redo",t,r);var o=u.getNextStateFromHistoryPointer(n+1);u.updateState(o)};u.isUndoable=function(){return!!u.state.historyPointer};u.isRedoable=function(){var e=u.state,t=e.history,r=e.historyPointer;return r<t.length-1};u.getNextStateFromEditingChanges=function(e){var t=u.state,r=t.history,n=t.historyPointer,i=t.store;var o=i.editingChanges.initialCropDimensions||u.editorInstance.getInitialCropDimensions();var s=Qo(i,e,{initialCropDimensions:o});var a=Jo(s,r,n);var l=a.length-1;return{store:s,history:a,historyPointer:l}};u.getNextStateFromHistoryPointer=function(e){var t=u.state.history;return{store:t[e],history:t,historyPointer:e}};u.updateState=function(e){var t=e.store,r=e.history,n=e.historyPointer;var i=Ho(Gt(),t.editingChanges);u.setState({hasEdited:true,editorStateChanges:i,store:t});u.updateHistory(r,n)};u.updateHistory=re()(function(e,t){u.setState({history:e,historyPointer:t})},200);u.state=n.getInitialState(e.instance,e.webglEnabled);u.canvasRef=g.a.createRef();u.imgRef=g.a.createRef();return u}ls(n,[{key:"componentDidUpdate",value:function e(t,r){var n=this.state,i=n.filterInstance,o=n.thumbnailObject,s=n.instance,a=n.hasImageLoaded,l=n.isCanvasReady,c=n.store,u=n.webglEnabled,d=n.selectedEditor;if(a&&l){this.editorInstance.applyChanges(c.editingChanges);if(d===S.FILTER&&i!==s){this.resetFilterInstance(s);mn();ln.setSourceImage(o);pn()}}u!==r.webglEnabled&&this.editorInstance.setFilterBackend(u)}},{key:"render",value:function e(){var t=this.props,r=t.imageSrc,n=t.instance,i=t.messages,o=t.onCancel;var s=this.state,a=s.editorStateChanges,l=s.filterInstance,c=s.hasEdited,u=s.isCanvasReady,d=s.selectedEditor,h=s.store,f=s.imageObject;var p=h.editingChanges.squarespaceFilter;var m=p&&p.type!==Mt.ORIGINAL.type;return g.a.createElement(Oi,{isLoading:!u,toolbar:g.a.createElement(xe,{editorStateChanges:a,hasEdited:c,isUndoable:this.isUndoable(),isRedoable:this.isRedoable(),messages:i,onCancel:o,onSave:this.handleSave,onUndo:this.handleUndo,onRedo:this.handleRedo,onSelectEditor:this.handleToolPicked,selectedEditor:d}),canvasContainer:g.a.createElement(hi,{imageSrc:r,instance:n,imgRef:this.imgRef,canvasRef:this.canvasRef,onImageLoad:this.handleImageLoad,onResize:this.handleCanvasResize}),straightenTool:d===S.CROP_AND_ROTATE&&g.a.createElement($i,{onChange:this.handleFormChange,rotation:h.editingChanges.rotation}),filterIntensityTool:d===S.FILTER&&g.a.createElement(mo,{onChange:this.handleFormChange,value:p&&p.intensity,label:i.FILTER_STRENGTH,isVisible:m}),editorForm:d&&g.a.createElement(Jn,{filterInstance:l,messages:i,onChange:this.handleFormChange,selectedEditor:d,value:h.editingChanges,imageObject:f}),progressIndicator:g.a.createElement(Io.a,{size:"large"})})}}]);return n}(m["Component"]);ds.propTypes={exportFormat:_.a.oneOf(Object.values(go)),imageSrc:_.a.string.isRequired,instance:_.a.any,messages:_.a.object,onSave:_.a.func.isRequired,onCancel:_.a.func.isRequired,showExperimentalFeatures:_.a.bool,webglEnabled:_.a.bool};ds.defaultProps={exportFormat:go.FILE,instance:"_IMAGE_EDITOR_DEFAULT_INSTANCE_ID_",messages:So};var hs=ds;var fs=hs;var ps=t["default"]=fs},"@sqs/core-components":function(e,t){e.exports=r},"@sqs/core-components/lib/web/CircularProgressIndicator":function(e,t){e.exports=n},"@sqs/core-components/lib/web/ConfirmModal":function(e,t){e.exports=i},"@sqs/core-components/web/primitives/Button":function(e,t){e.exports=o},"@sqs/image-editor-filters":function(e,t){e.exports=s},"@sqs/jsf-core":function(e,t){e.exports=a},"@sqs/jsf-fields":function(e,t){e.exports=l},"@sqs/jsf-router":function(e,t){e.exports=c},"@sqs/jsf-utils":function(e,t){e.exports=u},"@sqs/track-events":function(e,t){e.exports=d},"lodash/cloneDeep":function(e,t){e.exports=h},"lodash/compact":function(e,t){e.exports=f},"lodash/debounce":function(e,t){e.exports=p},"lodash/isEqual":function(e,t){e.exports=m},"lodash/merge":function(e,t){e.exports=g},"lodash/pick":function(e,t){e.exports=v},"prop-types":function(e,t){e.exports=_},react:function(e,t){e.exports=b}})})}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/70-62bac510ab705fc0bd258-min.en-US.js.map